window.__require=function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var l=a.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({AlertView:[function(e,t,n){"use strict";cc._RF.push(t,"5a9bebApaNDkI2OrxXqXHKI","AlertView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/EventMgr"),s=e("../../Mgr/LanguageMgr"),l=e("../../Res/ResPanelOpen"),c=e("../../Tool/Tool"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.message=null,t.btnOk=null,t.btnOkStr=null,t.btnAd=null,t.btnAdStr=null,t.btnCancel=null,t.btnCancelStr=null,t._onOkHandler=null,t._onAdHandler=null,t._onCancelHandler=null,t._onCloseHandler=null,t._showOk=!1,t._showAd=!1,t._showCancel=!1,t._showClose=!1,t}return i(t,e),t.prototype.onLoad=function(){c.Tool.addClickEvent(this.btnOk,this.onClickOk,this),c.Tool.addClickEvent(this.btnAd,this.onClickAd,this),c.Tool.addClickEvent(this.btnCancel,this.onClickCancel,this)},t.prototype.reset=function(){this._showOk=!1,this._showAd=!1,this._showCancel=!1,this._showClose=!1,this._onOkHandler=null,this._onAdHandler=null,this._onCancelHandler=null,this._onCloseHandler=null},t.prototype.setTile=function(e){this.title.string=e||s.default.Instance.getLanguage("common_prompt_tooltip")},t.prototype.setMessage=function(e){this.message.string=e},t.prototype.onEnable=function(){cc.director.once(cc.Director.EVENT_BEFORE_DRAW,this.refreshAfterScene,this)},t.prototype.onDisable=function(){a.EventMgr.clearTarget(this)},t.prototype.refreshAfterScene=function(){this.btnOk.active=this._showOk,this.btnAd.active=this._showAd,this.btnCancel.active=this._showCancel},t.prototype.confirm=function(e,t){this._showOk=!0,this._onOkHandler=e,this.btnOkStr.string=t||s.default.Instance.getLanguage("common_prompt_ok")},t.prototype.confirmAd=function(e,t){this._showAd=!0,this._onAdHandler=e,this.btnAdStr.string=t||s.default.Instance.getLanguage("common_prompt_ok")},t.prototype.cancel=function(e,t){this._showCancel=!0,this._onCancelHandler=e,this.btnCancelStr.string=t||s.default.Instance.getLanguage("common_prompt_cancal")},t.prototype.close=function(e){this._showClose=!0,this._onCloseHandler=e},t.prototype.onClickOk=function(){var e=this;this.onClose(function(){if(e._onOkHandler){var t=e._onOkHandler;e._onOkHandler=null,t&&t()}})},t.prototype.onClickAd=function(){var e=this;this.onClose(function(){if(e._onAdHandler){var t=e._onAdHandler;e._onAdHandler=null,t&&t()}})},t.prototype.onClickCancel=function(){var e=this;this.onClose(function(){if(e._onCancelHandler){var t=e._onCancelHandler;e._onCancelHandler=null,t&&t()}})},t.prototype.show=function(){var e=this.node.getChildByName("base");this.node.active=!0,l.default.panelOpen_SmallToBig(e)},t.prototype.onClose=function(e){var t=this.node.getChildByName("base"),n=this;l.default.panelClose_BigToSmall(t,function(){e&&e(),n.node.active=!1})},r([h(cc.Label)],t.prototype,"title",void 0),r([h(cc.Label)],t.prototype,"message",void 0),r([h(cc.Node)],t.prototype,"btnOk",void 0),r([h(cc.Label)],t.prototype,"btnOkStr",void 0),r([h(cc.Node)],t.prototype,"btnAd",void 0),r([h(cc.Label)],t.prototype,"btnAdStr",void 0),r([h(cc.Node)],t.prototype,"btnCancel",void 0),r([h(cc.Label)],t.prototype,"btnCancelStr",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool"}],Alert:[function(e,t,n){"use strict";cc._RF.push(t,"91ce9owDnpMSb/sCy0LnNlK","Alert");var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/BundleMgr"),l=e("./AlertView"),c=cc._decorator,u=c.ccclass,d=(c.property,function(){function e(){}return e.open=function(e,t){return i(this,void 0,Promise,function(){var n=this;return r(this,function(){return[2,new Promise(function(o){n._component&&(n._open(e,t),o(n._component));var i=cc.find("Canvas").getChildByName("panel3");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Common/AlertView",cc.Prefab,function(r,a){if(!r&&i&&i.isValid&&!i.getChildByName(a.name)){var s=cc.instantiate(a);n._component=s.getComponent(l.default),n._open(e,t),n._component.node.active=!1,i.addChild(s),o(n._component)}})})]})})},e._open=function(e,t){return this._component.reset(),this._component.setTile(t),this._component.setMessage(e),this._component},e._component=null,o([u],e)}());n.default=d,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/BundleMgr":"BundleMgr","./AlertView":"AlertView"}],App:[function(e,t,n){"use strict";cc._RF.push(t,"197bdmE39xEcaK/8kIcCAX+","App");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../Toast/Toast"),l=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return i(t,e),n=t,Object.defineProperty(t,"instance",{get:function(){return n._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){n._instance=this,s.default.Instance||s.default.createNode();var e=cc.EventListener,t=e.create({event:e.TOUCH_ONE_BY_ONE,swallowTouches:!1,onTouchBegan:function(){cc.director.emit(a.GlobalEvent.TouchScreen)}});cc.internal.eventManager.addListener(t,-1)},t._instance=null,n=r([l],t)}(cc.Component);n.default=c,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../Toast/Toast":"Toast"}],AssetPool:[function(e,t,n){"use strict";cc._RF.push(t,"f08230rZoNEAqzqT3v5BhPN","AssetPool"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.pools=new Map,this.prefabs=new Map}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.addPrefab=function(e,t,n){e.addRef(),this.pools.has(t)||this.createPool(t,n),this.getPool(t).put(cc.instantiate(e)),this.prefabs.set(t,e)},e.prototype.getPrefab=function(e){return this.prefabs.get(e)},e.prototype.removePrefab=function(e){var t=this.prefabs.get(e);t&&t.decRef(!0),this.prefabs.delete(e);var n=this.pools.get(e);n&&n.clear(),this.pools.delete(e)},e.prototype.clearPrefabs=function(){var e=this;this.prefabs.forEach(function(t,n){t.decRef(!0);var o=e.pools.get(n);o&&o.clear(),e.pools.delete(n)}),this.prefabs.clear()},e.prototype.createPool=function(e,t){var n=new cc.NodePool(t);return this.pools.set(e,n),n},e.prototype.removePool=function(e){this.pools.has(e)&&this.pools.delete(e)},e.prototype.clear=function(e){myGlobalThis.isNil(e)?this.pools.forEach(function(e){e.clear()}):this.getPool(e).clear()},e.prototype.getPool=function(e,t){var n=this.pools.get(e);return n||(n=this.createPool(e,t)),n},e.prototype.createObjWithPrefab=function(e,t){var n=cc.instantiate(e);return n.__pool__=t,n},e.prototype.createObject=function(e){var t=this.get(e);if(t)return t;var n=this.getPrefab(e);if(!n)return console.warn("Can't createObject prefab is null",e),null;console.warn(" createObject pool is empty, createObjWithPrefab",e),this.createObjWithPrefab(n,e)},e.prototype.createObjAsync=function(){},e.prototype.get=function(e,t,n){var o=this.getPool(e,n),i=null;return o.size()>0&&(i=o.get(t).__pool__=e),i},e.prototype.put=function(e){e instanceof cc.Component&&(e=e.node);var t=e.__pool__;t&&this.getPool(t).put(e)},e}();n.default=o,cc._RF.pop()},{}],AssetsMgr:[function(e,t,n){"use strict";cc._RF.push(t,"da70eVJJTdFkpoJNrI0r7DV","AssetsMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Config/EnumTypes"),a=e("../../Config/GameData"),s=e("../../Mgr/BaseMgr"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/ItemMgr"),u=e("../../Mgr/StorageMgr"),d=e("./EquipmentMgr"),h=e("./Hero/HeroMgr"),p=e("./MgrSummon"),f=e("./PartnerMgr"),g=e("./SkillMgr"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.assetsMap=new Map,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;this.assetsMap.clear();var o=a.default.getJsonObject("asset");for(var i in o){var r=o[i];for(var s in r){var l=r[s];this.assetsMap.set(l.id,l)}}},t.prototype.getInfo=function(e){return this.assetsMap.get(e)},t.prototype.getQuality=function(e){var t=this.getInfo(e);switch(t.type){case r.ITEM_TYPE.Asset:return 1;case r.ITEM_TYPE.Gear:return d.default.Instance.getGearInfo(t.id).quality;case r.ITEM_TYPE.Hero:return h.default.Instance.getHeroInfo(t.id).grade;case r.ITEM_TYPE.Partner:return f.default.Instance.getPartnerInfo(t.id).quality;case r.ITEM_TYPE.Skill:return g.default.Instance.getSkillInfo(t.id).quality;default:return 1}},t.prototype.getIcon=function(e){var t=this.getInfo(e);switch(t.type){case r.ITEM_TYPE.Gear:return c.default.Instance.getEquipmentIcon(t.icon);case r.ITEM_TYPE.Hero:return h.default.Instance.getHeroInfo(t.id).icon;case r.ITEM_TYPE.Partner:return c.default.Instance.getPartnerIcon(t.icon);case r.ITEM_TYPE.Skill:return c.default.Instance.getSkillIcon(t.icon);default:return c.default.Instance.getResIcon(t.icon)}},t.prototype.addAsset=function(e,t,n,o){void 0===n&&(n=1),void 0===o&&(o=!1);var i=u.default.instance.storageData,a=u.default.instance.storageName;e==r.ASSET_TYPE.Coin?u.default.instance.addCoin(t*n):e==r.ASSET_TYPE.Diamond?u.default.instance.addDiamond(t*n):e==r.ASSET_TYPE.SlimeExp?u.default.instance.addExp(t*n):e==r.ASSET_TYPE.BossRushKey?u.default.instance.addBossRushKey(t*n):e==r.ASSET_TYPE.GoldRushKey?u.default.instance.addGoldRushKey(t*n):e==r.ASSET_TYPE.CaveRushKey?u.default.instance.addClearRushKey(t*n):e==r.ASSET_TYPE.DwarvenKing||(e==r.ASSET_TYPE.HeroLegion?u.default.instance.addHeroRushKey(t*n):e==r.ASSET_TYPE.Sp?u.default.instance.addSp(t*n):e==r.ASSET_TYPE.Tailt?(i.trait+=t*n,u.default.instance.writeStorage(a.trait,i.trait)):e==r.ASSET_TYPE.Fork?u.default.instance.addFork(t*n):e==r.ASSET_TYPE.RingChip?u.default.instance.addRingChip(t*n):e==r.ASSET_TYPE.MineCube?(i.mineCube+=t*n,u.default.instance.saveMineCubeCount(i.mineCube)):e==r.ASSET_TYPE.MinePickax?(i.mineHammer+=t*n,u.default.instance.saveMineHammer(i.mineHammer)):e==r.ASSET_TYPE.MineDrill?(i.mineDrill+=t*n,u.default.instance.saveMineDrill(i.mineDrill)):e==r.ASSET_TYPE.MineBomb?(i.mineBoom+=t*n,u.default.instance.saveMineBoom(i.mineBoom)):e==r.ASSET_TYPE.PassExp?(i.passExp+=t*n,u.default.instance.writeStorage(a.passExp,i.passExp)):console.error("\u8d44\u6e90 ["+e+"] \u4e0d\u5b58\u5728"))},t.prototype.useItem=function(e){var t=this.getInfo(e),n=t.useMethod,o=t.param;if(""!=n){var i=this[n];if(i)return i.call(this,o)}return null},t.prototype.summon=function(e){return p.default.Instance.randomSummon(parseInt(e))},t.prototype.addItem=function(e,t,n,o){void 0===n&&(n=1),void 0===o&&(o=!1);var i=this.getInfo(e);switch(i.type){case r.ITEM_TYPE.Asset:this.addAsset(e,t,n);break;case r.ITEM_TYPE.Gear:d.default.Instance.addEquipment(i.id,t*n);break;case r.ITEM_TYPE.Hero:h.default.Instance.unlock(e);break;case r.ITEM_TYPE.Partner:f.default.Instance.addPartnerItem(i.id,t*n);break;case r.ITEM_TYPE.Skill:g.default.Instance.addSkillItem(i.id,t*n);break;default:console.warn("\u9053\u5177\u7c7b\u578b ["+e+"] \u4e0d\u5b58\u5728")}o&&l.EventMgr.event(r.GlobalEvent.AssetItemChange+i.id)},t}(s.default);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/StorageMgr":"StorageMgr","./EquipmentMgr":"EquipmentMgr","./Hero/HeroMgr":"HeroMgr","./MgrSummon":"MgrSummon","./PartnerMgr":"PartnerMgr","./SkillMgr":"SkillMgr"}],AsyncQueue:[function(e,t,n){"use strict";cc._RF.push(t,"f823bsmAMRMPp1ob6Co36a5","AsyncQueue"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this._runningAsyncTask=null,this._queues=[],this._isProcessingTaskUUID=0,this._enable=!0,this.complete=null}return Object.defineProperty(e.prototype,"queues",{get:function(){return this._queues},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enable",{get:function(){return this._enable},set:function(e){this.enable!==e&&(this.enable=e,this.enable&&this.size>0&&this.play())},enumerable:!1,configurable:!0}),e.prototype.push=function(t,n){return this._queues.push({uuid:e._uuid_count++,callbacks:[t],params:n}),this.queues},e.prototype.remove=function(e){var t;if((null===(t=this._runningAsyncTask)||void 0===t?void 0:t.uuid)!==e){for(var n=0;n<this.queues.length;n++)if(this.queues[n].uuid==e){this.queues.splice(n,1);break}}else console.error("\u6b63\u5728\u6267\u884c\u7684\u4efb\u52a1\u4e0d\u53ef\u4ee5\u79fb\u9664")},Object.defineProperty(e.prototype,"size",{get:function(){return this._queues.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isProcessing",{get:function(){return this._isProcessingTaskUUID>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStop",{get:function(){return!(this._queues.length>0||this.isProcessing)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"runningParams",{get:function(){return this._runningAsyncTask?this._runningAsyncTask.params:null},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this._queues=[],this._isProcessingTaskUUID=0,this._runningAsyncTask=null},e.prototype.step=function(){this.isProcessing&&this.next(this._isProcessingTaskUUID)},e.prototype.play=function(e){var t=this;if(!e&&!this.isProcessing&&this.enable){var n=this.queues.shift();if(n){this._runningAsyncTask=n;var o=n.uuid,i=n.callbacks;this._isProcessingTaskUUID=o,1==i.length&&(0,i[0])(function(){t.next(o)},n.params,e)}else this._isProcessingTaskUUID=0,this._runningAsyncTask=null,this.complete&&this.complete(e)}},e.prototype.next=function(e,t){if(this._isProcessingTaskUUID==e)return this._isProcessingTaskUUID=0,this._runningAsyncTask=null,void this.play(t);console.log(this._runningAsyncTask)},e._uuid_count=1,e}();n.default=o,cc._RF.pop()},{}],AwardShowComp:[function(e,t,n){"use strict";cc._RF.push(t,"896219cs3hIfp1YJ2mwB/AJ","AwardShowComp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/FlyItemMgr"),c=e("../../Tool/Tool"),u=e("./CoinComp"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.coinPrefab=null,t.diamondPrefab=null,t.forkPrefab=null,t.drillPrefab=null,t.boomPrefab=null,t.cubePrefab=null,t.shovelPrefab=null,t.expCrystal=null,t.equipPrefab=null,t.bossRushKeyPrefab=null,t.goldRushKeyPrefab=null,t.caveRushKeyPrefab=null,t.dwarvenKingPrefab=null,t.heroLegionPrefab=null,t.spPrefab=null,t.tailtPrefab=null,t.ringChip=null,t.passExpPrefab=null,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){this.panel3=cc.find("Canvas").getChildByName("panel3"),s.EventMgr.on(a.EventType.Common_Coin_Add,this.getCoinEffect,this),n.instance=this,l.default.flyItemMap[a.ASSET_TYPE.Coin]=this.coinPrefab,l.default.flyItemMap[a.ASSET_TYPE.Diamond]=this.diamondPrefab,l.default.flyItemMap[a.ASSET_TYPE.SlimeExp]=this.expCrystal,l.default.flyItemMap[a.ASSET_TYPE.BossRushKey]=this.bossRushKeyPrefab,l.default.flyItemMap[a.ASSET_TYPE.GoldRushKey]=this.goldRushKeyPrefab,l.default.flyItemMap[a.ASSET_TYPE.CaveRushKey]=this.caveRushKeyPrefab,l.default.flyItemMap[a.ASSET_TYPE.DwarvenKing]=this.dwarvenKingPrefab,l.default.flyItemMap[a.ASSET_TYPE.HeroLegion]=this.heroLegionPrefab,l.default.flyItemMap[a.ASSET_TYPE.Sp]=this.spPrefab,l.default.flyItemMap[a.ASSET_TYPE.Tailt]=this.tailtPrefab,l.default.flyItemMap[a.ASSET_TYPE.Fork]=this.forkPrefab,l.default.flyItemMap[a.ASSET_TYPE.RingChip]=this.ringChip,l.default.flyItemMap[a.ASSET_TYPE.MineCube]=this.cubePrefab,l.default.flyItemMap[a.ASSET_TYPE.MinePickax]=this.shovelPrefab,l.default.flyItemMap[a.ASSET_TYPE.MineDrill]=this.drillPrefab,l.default.flyItemMap[a.ASSET_TYPE.MineBomb]=this.boomPrefab,l.default.flyItemMap[a.ASSET_TYPE.PassExp]=this.passExpPrefab},t.prototype.getCoinEffect=function(e,t,n){e>5&&(e=5);var o=u.default.instance.node.convertToWorldSpaceAR(cc.Vec2.ZERO);t=this.node.convertToNodeSpaceAR(t),o=this.node.convertToNodeSpaceAR(o),this.getItemEffect("coin",e,t,o,this.node,n)},t.prototype.getPrefab=function(e){for(var t=0;t<this.node.children.length;t++)if(this.node.children[t].name==e&&0==this.node.children[t].opacity)return this.node.children[t].opacity=255,this.node.children[t];var n;switch(e){case"coin":return n=cc.instantiate(this.coinPrefab),this.node.addChild(n),n;default:return console.warn("AwardShowComp\u672a\u627e\u5230\u9884\u5236\u4f53",e),null}},t.prototype.getItemEffect=function(e,t,n,o,i,r){for(var a=function(i){var a=s.getPrefab(e);a.setPosition(n);var l=.3+.1*Math.random()-.05,u=new cc.Vec3(n.x+c.Tool.randomNumber(-75,75),n.y+c.Tool.randomNumber(-75,75),0);cc.tween(a).to(l,{x:u.x,y:u.y}).delay(.05).to(.8,{x:o.x,y:o.y}).call(function(){a.opacity=0,i==t-1&&r&&r()}).start()},s=this,l=0;l<t;l++)a(l)},r([p(cc.Prefab)],t.prototype,"coinPrefab",void 0),r([p(cc.Prefab)],t.prototype,"diamondPrefab",void 0),r([p(cc.Prefab)],t.prototype,"forkPrefab",void 0),r([p(cc.Prefab)],t.prototype,"drillPrefab",void 0),r([p(cc.Prefab)],t.prototype,"boomPrefab",void 0),r([p(cc.Prefab)],t.prototype,"cubePrefab",void 0),r([p(cc.Prefab)],t.prototype,"shovelPrefab",void 0),r([p(cc.Prefab)],t.prototype,"expCrystal",void 0),r([p(cc.Prefab)],t.prototype,"equipPrefab",void 0),r([p(cc.Prefab)],t.prototype,"bossRushKeyPrefab",void 0),r([p(cc.Prefab)],t.prototype,"goldRushKeyPrefab",void 0),r([p(cc.Prefab)],t.prototype,"caveRushKeyPrefab",void 0),r([p(cc.Prefab)],t.prototype,"dwarvenKingPrefab",void 0),r([p(cc.Prefab)],t.prototype,"heroLegionPrefab",void 0),r([p(cc.Prefab)],t.prototype,"spPrefab",void 0),r([p(cc.Prefab)],t.prototype,"tailtPrefab",void 0),r([p(cc.Prefab)],t.prototype,"ringChip",void 0),r([p(cc.Prefab)],t.prototype,"passExpPrefab",void 0),n=r([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/FlyItemMgr":"FlyItemMgr","../../Tool/Tool":"Tool","./CoinComp":"CoinComp"}],Bar:[function(e,t,n){"use strict";cc._RF.push(t,"ae9aaeF/k5LipjXwBmLXZxE","Bar");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=a.property,c=a.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bar=null,t._value=0,t._reversal=!1,t}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.value>1?this._value=1:this.value<0&&(this._value=0),this.onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"reversal",{get:function(){return this._reversal},set:function(e){this._reversal=e,this.onChange()},enumerable:!1,configurable:!0}),t.prototype.onChange=function(){if(this.bar){var e=this.bar.getComponent(cc.Sprite);e.type=cc.Sprite.Type.FILLED,e.fillType=cc.Sprite.FillType.HORIZONTAL,this._reversal?(e.fillStart=1-this._value,e.fillRange=1):(e.fillStart=0,e.fillRange=this._value)}},r([l({type:cc.Node,visible:!0,displayName:"\u8fdb\u5ea6\u6761\u7684\u6761"})],t.prototype,"bar",void 0),r([l({type:cc.Float,visible:!0,displayName:"\u8fdb\u5ea6"})],t.prototype,"value",null),r([l({visible:!0,displayName:"\u7ffb\u8f6c"})],t.prototype,"reversal",null),r([s,c("Comp/Bar")],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],BaseMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ad20bLx/bhMYpC0Rxy/EC+A","BaseMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.isInitJson=!1}return e.prototype.initJson=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!this.isInitJson&&(this.isInitJson=!0,!0)},e}();n.default=o,cc._RF.pop()},{}],BaseStorageInfo:[function(e,t,n){"use strict";cc._RF.push(t,"473d3U4WPFGXIC1SpTWAvZ7","BaseStorageInfo"),Object.defineProperty(n,"__esModule",{value:!0});n.default=function(){},cc._RF.pop()},{}],BaseUI:[function(e,t,n){"use strict";cc._RF.push(t,"cc986qetChFcociq8FCIJ3f","BaseUI");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/EventMgr"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.registerEvents()},t.prototype.registerEvents=function(){},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){this._touchId=null},t.prototype.clearTouchId=function(){this._touchId=null},t.prototype.unregisterEvents=function(){a.EventMgr.clearTarget(this)},t.prototype.registerSimpleTouchEvents=function(){this.unregisterTouchEvents(),this._touchMode=0,this.node.on(cc.Node.EventType.TOUCH_START,this._onSimpleTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onSimpleTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onSimpleTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onSimpleTouchCancel,this)},t.prototype.unregisterSimpleTouchEvents=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onSimpleTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onSimpleTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onSimpleTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onSimpleTouchCancel,this)},t.prototype._onSimpleTouchStart=function(e){null==this._touchId&&(this._touchId=e.getID(),this.onTouchStart(e))},t.prototype._onSimpleTouchMove=function(e){this._touchId==e.getID()&&this.onTouchMove(e)},t.prototype._onSimpleTouchEnd=function(e){this._touchId==e.getID()&&(this.onTouchEnd(e),this._touchId=null)},t.prototype._onSimpleTouchCancel=function(e){this._touchId==e.getID()&&(this.onTouchCancel(e),this._touchId=null)},t.prototype.registerMutilTouchEvents=function(){this._touchMode=1,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.unregisterMutilTouchEvents=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.unregisterTouchEvents=function(){null!=this._touchMode&&(0==this._touchMode?this.unregisterSimpleTouchEvents():(this.unregisterMutilTouchEvents(),this._touchMode=null))},t.prototype.onTouchStart=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onTouchMove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onTouchEnd=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onTouchCancel=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onDestroy=function(){this.unregisterEvents()},t.prototype.reuse=function(){},t.prototype.unuse=function(){this.unscheduleAllCallbacks(),this.node.stopAllActions(),this.unregisterEvents()},r([l],t)}(cc.Component));n.default=c,cc._RF.pop()},{"../../Mgr/EventMgr":"EventMgr"}],BattleData:[function(e,t,n){"use strict";cc._RF.push(t,"c17f9JkCcFF9pFq9j3Dn91S","BattleData");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Config/GameData"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelInfos=[],t.enemyInfos=[],t.goldRushInfos=[],t.bossRushInfos=[],t.clearRushInfo=[],t.bulletInfos=[],t.heroRushBattleInfos=[],t.heroRushRandInfos=[],t.heroRushPropInfos=[],t}return i(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.apply(this,t))return!1;var o=this,i=r.default.getJsonObject("level");for(var a in i){var s=i[a];myGlobalThis.each(s,function(e){var t=e;t.wave1=o.splitValue(e.wave1),t.wave2=o.splitValue(e.wave2),t.wave3=o.splitValue(e.wave3),t.wave4=o.splitValue(e.wave4),t.wave5=o.splitValue(e.wave5);var n=[];e.obtainWidget&&e.obtainWidget.split(",").forEach(function(e){var t=e.split("|");n.push({id:parseInt(t[0]),weight:parseInt(t[1])})}),t.obtainWidget=n,o.levelInfos.push(t)})}var l=function(e,t){for(var n in e){var o=e[n];myGlobalThis.each(o,function(e){var n=e;t.push(n)})}};for(var a in l(r.default.getJsonObject("enemy"),this.enemyInfos),l(r.default.getJsonObject("goldRush"),this.goldRushInfos),l(r.default.getJsonObject("bossRush"),this.bossRushInfos),l(r.default.getJsonObject("bullet"),this.bulletInfos),i=r.default.getJsonObject("clearRush")){var c=i[a];myGlobalThis.each(c,function(e){var t=e;t.wave1=o.splitValue(e.wave1),t.wave2=o.splitValue(e.wave2),t.wave3=o.splitValue(e.wave3),t.wave4=o.splitValue(e.wave4),t.wave5=o.splitValue(e.wave5),o.clearRushInfo.push(t)})}l(r.default.getJsonObject("heroRushBattle"),this.heroRushBattleInfos),l(r.default.getJsonObject("heroRushRand"),this.heroRushRandInfos),l(r.default.getJsonObject("heroRushProp"),this.heroRushPropInfos)},t.prototype.splitValue=function(e){var t=[];return e&&e.split(",").forEach(function(e){var n=e.split("|");t.push({enemy:parseInt(n[0]),count:parseInt(n[1])})}),t},t.prototype.getLevelInfo=function(e){return this.levelInfos.find(function(t){return t.id==e})},t.prototype.getEnemyInfo=function(e){return this.enemyInfos.find(function(t){return t.id==e})},t.prototype.getGoldRushInfo=function(e){return this.goldRushInfos.find(function(t){return t.id==e})},t.prototype.getAllGoldRushInfos=function(){return this.goldRushInfos},t.prototype.getBossRushInfo=function(e){return this.bossRushInfos.find(function(t){return t.id==e})},t.prototype.getAllBossRushInfos=function(){return this.bossRushInfos},t.prototype.getClearRushInfo=function(e){return this.clearRushInfo.find(function(t){return t.id==e})},t.prototype.getAllClearRushInfos=function(){return this.clearRushInfo},t.prototype.getHeroRushInfo=function(e){return this.heroRushBattleInfos.find(function(t){return t.id==e})},t.prototype.getAllHeroRushInfos=function(){return this.heroRushBattleInfos},t.prototype.getHeroRushRandInfo=function(e){return this.heroRushRandInfos.find(function(t){return t.id==e})},t.prototype.getAllHeroRushRandInfos=function(){return this.heroRushRandInfos},t.prototype.getBulletInfo=function(e){return this.bulletInfos.find(function(t){return t.id==e})},t.prototype.getAllBulletInfos=function(){return this.bulletInfos},t.prototype.getHeroRushPropInfo=function(e){return this.heroRushPropInfos.find(function(t){return t.id==e})},t.prototype.getAllHeroRushPropInfos=function(){return this.heroRushPropInfos},t}(e("./BaseMgr").default);n.default=a,cc._RF.pop()},{"../Config/GameData":"GameData","./BaseMgr":"BaseMgr"}],BattleMgr:[function(e,t,n){"use strict";cc._RF.push(t,"9ab8bO82J9DfaIJQIQcJ6OW","BattleMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.MusicState=void 0;var a,s,l=e("../../../plugin/NumberPlus"),c=e("../../Config/EnumTypes"),u=e("../../Mgr/BundleMgr"),d=e("../../Mgr/BattleData"),h=e("../../Mgr/EventMgr"),p=e("../../Mgr/LanguageMgr"),f=e("../../Mgr/SoundMgr"),g=e("../../Mgr/StorageMgr"),y=e("../../Platform/Platform"),m=e("../../Tool/Tool"),v=e("../Main_PanelOpen"),_=e("../Main_UI"),b=e("../Mgr/GuideCore/GuideEnums"),S=e("../Mgr/GuideCore/GuideMgr"),M=e("../Mgr/Hero/HeroMgr"),C=e("../Mgr/PartnerMgr"),T=e("./Battle_HeroRushMgr"),k=e("./Battle_RelicMgr"),I=e("./Comp/HurtLabel"),E=e("./Comp/UIBossBattleTip"),w=e("./Hero"),P=e("./HeroPartner"),R=e("./Monster"),O=e("./Partner"),D=e("../../Config/GameData"),A=e("./SceneCrl"),L=e("./Comp/Battle_HpBar"),B=e("../../Comp/Bar"),U=cc._decorator,N=U.ccclass,j=U.property;(function(e){e[e.normal=1]="normal",e[e.bossRush=2]="bossRush",e[e.goldRush=3]="goldRush",e[e.clearRush=4]="clearRush",e[e.heroRush=5]="heroRush",e[e.kingRush=6]="kingRush"})(a||(a={})),function(e){e[e.main=0]="main",e[e.boss=1]="boss",e[e.copy=2]="copy",e[e.vitory=3]="vitory",e[e.fail=4]="fail"}(s=n.MusicState||(n.MusicState={}));var x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sceneNode=null,t.heroNode=null,t.monsterNode=null,t.bulletBackNode=null,t.bulletNode=null,t.effectNode=null,t.monsterEffectNode=null,t.goldEffetNode=null,t.clearRushNode=null,t.wordLabelNode=null,t.skillNode=null,t.skillBackNode=null,t.partnerBackNode=null,t.partnerFrontNode=null,t.heroPartnerNode=null,t.successNode=null,t.hpBarNode=null,t.heroBornPoint=null,t.monsterBornPoint=null,t.partnerPoints=null,t.heroPartnerPoints=null,t.blackMask=null,t.wind=null,t.hpBarPrefab=null,t.hpBarBossPrefab=null,t.isShake=!1,t.tempSpeed=0,t.nowLevel=1,t.nowRound=0,t.needKillMonster=0,t.bossTime=30,t.nowBossTime=0,t.isLoop=!1,t.lastDeadLevel=-1,t.copyName="",t.copyTime=0,t.copyDifficulty=0,t.monsterIsMove=!1,t.moveTween=[],t.moveInTime=1.5,t.moveTime=1,t.moveOutTime=1,t.bossAnimPanel=null,t.nowMusicState=s.main,t.isLoadingStage=!1,t.loadCount=1,t.wavesData=[],t.needLoadMonster=[],t.sceneName=["scene_black_1","scene_grass_1","scene_castle_1","scene_sand_1","scene_cunzhuang"],t.isGold=!1,t.nowHeroRushDifficulty=0,t.nowHeroRushRound=1,t.nowHeroRushLevelData=null,t.sceneAsset=[],t.nowHeroIndex=-1,t.nowHeroLevel=-1,t.nowHeroSkill=-1,t.heroAsset=[],t.nowMonsters=[],t.monsterAsset=[],t.nowPartner=[],t.partnerAsset=[],t.heroPartnerAsset=[],t.allBulletPrefabs=[],t.allSkillPrefabs=[],t.shakeTime=1,t.isShaking=!1,t.baseX=0,t.baseY=0,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){var e=this;n.instance=this,h.EventMgr.on(c.EventType.Battle_Hero_Dead,this.heroDead,this),h.EventMgr.on(c.EventType.Battle_Monster_Dead,this.monsterDead,this),h.EventMgr.on(c.EventType.Battle_SpeedUp_Switch,this.speedUpSwitch,this),h.EventMgr.on(c.EventType.Battle_SpeedNormal_Switch,this.speedNormalSwitch,this),h.EventMgr.on(c.EventType.Battle_Go_Boss,this.goToBoss,this),h.EventMgr.on(c.EventType.Battle_Copy_BossRush_In,function(t){e.isLoadingStage=!0,cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:255}).call(function(){e.isLoadingStage=!1,e.loadBossRushStage(t,function(){cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:0}).start()})}).start()},this),h.EventMgr.on(c.EventType.Battle_Copy_GoldRush_In,function(t){e.isLoadingStage=!0,cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:255}).call(function(){e.isLoadingStage=!1,e.loadGoldRushStage(t,function(){cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:0}).start()})}).start()},this),h.EventMgr.on(c.EventType.Battle_Copy_ClearRush_In,function(t){e.isLoadingStage=!0,cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:255}).call(function(){e.isLoadingStage=!1,e.loadClearRushStage(t,function(){cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:0}).start()})}).start()},this),h.EventMgr.on(c.EventType.Battle_Copy_HeroRush_HeroSelect,this.inHeroSelect,this),h.EventMgr.on(c.EventType.Battle_Copy_HeroRush_Select,function(){e.nowStageState=a.heroRush,e.heroRushRoundStart()},this),h.EventMgr.on(c.EventType.Battle_Copy_HeroRush_In,function(t,o){e.isLoadingStage=!0,cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:255}).call(function(){e.isLoadingStage=!1,e.loadHeroRushStage(t,o,function(){cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:0}).start()})}).start()},this),h.EventMgr.on(c.EventType.Battle_Restart_Normal,this.copyEnd,this),h.EventMgr.on(c.EventType.Main_UI_Hero_CloseSelectView,function(){var t=M.default.Instance.getData(g.default.instance.storageData.usingHeroId).level;e.nowHeroIndex==g.default.instance.storageData.usingHeroId&&e.nowHeroLevel==t||cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:255}).call(function(){e.startLoadStage(function(){cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:0}).start()})}).start()},this),h.EventMgr.on(c.EventType.Battle_World_Shake_Mini,this.worldShake_Mini,this),h.EventMgr.on(c.EventType.Battle_World_Shake_Large,this.worldShake_Big,this),this.scheduleOnce(function(){e.baseX=e.node.x,e.baseY=e.node.y,e.isShake=!0})},t.prototype.startLoadStage=function(e){var t=this,n=g.default.instance.storageData.stage.split("_");this.nowLevel=parseInt(n[0]),this.nowRound=parseInt(n[1]),this.isLoop="1"==n[2],this.loadAllBullet(function(){t.loadAllSkill(function(){t.loadPartner(function(){t.loadStage(t.nowLevel.toString(),e),h.EventMgr.on(c.EventType.Battle_Partner_Reload,t.loadPartner,t)})})})},t.prototype.update=function(e){this.shakeUpdate(e),this.hpBarUpdate()},t.prototype.speedUpSwitch=function(){n.battleSpeed=2},t.prototype.speedNormalSwitch=function(){n.battleSpeed=1},t.prototype.pause=function(){n.isPause=!0},t.prototype.resume=function(){n.isPause=!1},t.prototype.startStage=function(){this.nowStageState!=a.heroRush?this.setRound(this.wavesData[this.nowRound]):this.setRound(this.wavesData)},t.prototype.sceneMove=function(e,t,n){var o=this;this.inScene(function(){e&&e(),o.moveTween.push(cc.tween(o.wind).delay(o.moveTime).call(function(){t&&t(),o.outScene(function(){n&&n()})}).start())})},t.prototype.inScene=function(e){this.sceneStop(),this.nowHero.getComponent(w.default).move(),this.moveTween.push(cc.tween(A.default.instance).to(this.moveInTime,{speed:1e3}).call(function(){}).start()),this.moveTween.push(cc.tween(this.wind).to(this.moveInTime,{opacity:255}).call(function(){e&&e()}).start())},t.prototype.outScene=function(e){var t=this,o=this.nowHero.getComponent(w.default);this.moveTween.push(cc.tween(A.default.instance).to(this.moveOutTime,{speed:0}).call(function(){}).start());for(var i=0,r=function(e){if(0==a.monsterNode.children[e].opacity)return"continue";var o=a.monsterNode.children[e].x-n.bornMosterOffsetX,r=a.monsterNode.children[e].y;-1!=a.monsterNode.children[e].name.indexOf("boss")?(i=0,a.moveTween.push(cc.tween(a.monsterNode.children[e]).to(a.moveOutTime,{x:o,y:r},{easing:"sineOut"}).start())):(i=.45,a.moveTween.push(cc.tween(a.monsterNode.children[e]).to(a.moveOutTime,{x:o,y:r},{easing:"sineOut"}).call(function(){t.monsterNode.children[e].getComponent(R.default).hitAnim()}).delay(i).start()))},a=this,s=0;s<this.monsterNode.childrenCount;s++)r(s);this.moveTween.push(cc.tween(this.wind).to(this.moveOutTime,{opacity:0}).delay(i).call(function(){e&&e(),o.idle()}).start())},t.prototype.sceneStop=function(){for(var e,t=0;t<this.moveTween.length;t++)null===(e=this.moveTween[t])||void 0===e||e.stop();this.moveTween.length=0},t.prototype.setRound=function(e){var t=this;this.unschedule(this.goldRushUpdate),this.unschedule(this.bossRoundUpdate);var o=[];switch(this.nowStageState){case a.normal:g.default.instance.stageSet(this.nowLevel,this.nowRound,this.isLoop);break;case a.bossRush:this.bossRushRoundStart();break;case a.goldRush:this.goldRushRoundStart();break;case a.clearRush:this.clearRushRoundStart();break;case a.heroRush:}for(var i=0;i<e.length;i++)for(var r=d.default.instance.getEnemyInfo(e[i].enemy),l=e[i].count,u=0;u<l;u++)o.push(r.viewUrl);for(this.needKillMonster=o.length,i=0;i<this.nowMonsters.length;i++)this.nowMonsters[i].getComponent(R.default).dead();n.bornMosterOffsetX;var p=function(){t.monsterIsMove=!1;for(var e=0,i=0;i<o.length;i++){switch(t.nowStageState){case a.normal:e=4!=t.nowRound?100*i:0;break;case a.goldRush:e=0,t.schedule(t.goldRushUpdate);break;case a.clearRush:default:e=100*i}t.bornMoster(o[i],n.bornMosterOffsetX+e%550)}k.default.Instance.battleInit(),D.default.isTest&&console.log("\u5f00\u59cb\u5173\u5361",t.nowLevel,"\u6ce2\u6b21",t.nowRound)},f=function(e,n){t.sceneMove(function(){e&&e()},function(){t.monsterIsMove=!1,p()},function(){n&&n(),t.monsterIsMove=!0,t.nowStageState==a.goldRush&&(t.isGold=!0)})},y=this;switch(this.nowStageState){case a.normal:this.isLoop?(h.EventMgr.event(c.EventType.Battle_State_Switch,2),h.EventMgr.event(c.EventType.Battle_Round_Update,4),this.playBattleMusic(s.main),f()):4==this.nowRound?(this.inScene(function(){var e=n.instance.nowHero.getComponent(w.default);e.skillCDReset(),e.hpRecoverMax()}),this.show_Ballte_Boss_Tips(n.instance.nowHero.name,o[0],function(){t.monsterIsMove=!1,p(),t.outScene(function(){t.monsterIsMove=!0,y.nowBossTime=y.bossTime,y.schedule(y.bossRoundUpdate),h.EventMgr.event(c.EventType.Battle_State_Switch,1)})}),h.EventMgr.event(c.EventType.Battle_Round_Update,this.nowRound),this.playBattleMusic(s.boss)):(f(),h.EventMgr.event(c.EventType.Battle_Round_Update,this.nowRound),this.playBattleMusic(s.main));break;case a.heroRush:this.playBattleMusic(s.copy),this.monsterIsMove=!1,p(),this.outScene(function(){t.monsterIsMove=!0});break;default:this.playBattleMusic(s.copy),f()}},t.prototype.endRound=function(){if(this.isLoop||this.nowRound++,this.nowStageState==a.heroRush)this.heroRushRoundEnd();else if(this.nowRound>=this.wavesData.length)switch(this.nowStageState){case a.normal:this.endStage();break;case a.bossRush:this.bossRushSuccessEnd();break;case a.goldRush:this.goldRushSuccessEnd();break;case a.clearRush:this.clearRushSuccessEnd()}else this.setRound(this.wavesData[this.nowRound])},t.prototype.endStage=function(){var e=this;this.successNode.getComponent(cc.Animation).play(),D.default.isTest&&console.log("\u901a\u5173\u4e86",this.nowLevel,this.nowRound),this.judeLevelTrackEvent(this.nowLevel),this.nowLevel++,this.nowRound=0,g.default.instance.stageSet(this.nowLevel,this.nowRound,this.isLoop),h.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.ClearStage,this.nowLevel-1),h.EventMgr.event(c.GlobalEvent.UnlockValueChange,c.UnlockSysType.Level,this.nowLevel-1),h.EventMgr.event(c.GlobalEvent.BattleComplete),h.EventMgr.event(c.GlobalEvent.BattleStart),cc.tween(this.blackMask).to(.5/n.battleSpeed,{opacity:255}).call(function(){e.loadStage(e.nowLevel.toString(),function(){cc.tween(e.blackMask).to(.5/n.battleSpeed,{opacity:0}).start()})}).start();var t=S.default.instance.getSpecialGuideEnum(b.GuideConditionType.UNLOCK_CUSTOMS,this.nowLevel-1);t!=b.SpecialGuideEnum.None&&(_.default.instance.closeAll(),S.default.instance.checkSpecial(t))},t.prototype.judeLevelTrackEvent=function(e){switch(e<=10&&e>1&&D.default.trackEvent(D.TrackEventKey.key["\u901a\u51731-"+e]),e){case 15:D.default.trackEvent(D.TrackEventKey.key["\u901a\u51732-5"]);break;case 20:D.default.trackEvent(D.TrackEventKey.key["\u901a\u51732-10"]);break;case 30:D.default.trackEvent(D.TrackEventKey.key["\u901a\u51733-10"]);break;case 40:D.default.trackEvent(D.TrackEventKey.key["\u901a\u51734-10"]);break;case 50:D.default.trackEvent(D.TrackEventKey.key["\u901a\u51735-10"])}e>=65&&D.default.trackEvent(D.TrackEventKey.key["\u901a\u51737-5\u4ee5\u4e0a"])},t.prototype.goToBoss=function(){this.unscheduleAllCallbacks(),this.sceneStop();for(var e=0;e<this.nowMonsters.length;e++)this.nowMonsters[e].getComponent(R.default).recyle();this.isLoop=!1,this.endRound()},t.prototype.monsterDead=function(){this.needKillMonster--,this.needKillMonster<=0&&this.endRound()},t.prototype.heroDead=function(e){var t=this;switch(void 0===e&&(e=!1),this.unschedule(this.bossRoundUpdate),this.nowStageState){case a.normal:4==this.nowRound&&g.default.instance.stageSet(this.nowLevel,3,!0),cc.tween(this.blackMask).to(.5/n.battleSpeed,{opacity:255}).call(function(){t.startLoadStage(function(){cc.tween(t.blackMask).to(.5/n.battleSpeed,{opacity:0}).start()})}).start(),this.lastDeadLevel!=this.nowLevel&&(!e&&v.default.showBattleFailPanel(),this.lastDeadLevel=this.nowLevel);break;case a.heroRush:T.default.instance.heroDead();break;default:this.copyEnd(function(){t.scheduleOnce(function(){!e&&v.default.showBattleFailPanel()})})}},t.prototype.copyEnd=function(e){var t=this;this.nowStageState=a.normal,this.unschedule(this.copyTimeUpdate),this.scheduleOnce(function(){h.EventMgr.event(c.EventType.Battle_State_Switch,3),_.default.instance.setNormal(),cc.tween(t.blackMask).to(.5/n.battleSpeed,{opacity:255}).call(function(){t.startLoadStage(function(){cc.tween(t.blackMask).to(.5/n.battleSpeed,{opacity:0}).start(),e&&e()})}).start()})},t.prototype.copyTimeUpdate=function(){this.copyTime--,this.copyTime<=0&&(this.copyTime=0,this.heroDead(),y.default.instance.showToast("\u8d85\u65f6")),h.EventMgr.event(c.EventType.Battle_CopyInfo_Update,!0,this.copyName,this.copyTime.toString())},t.prototype.show_Ballte_Boss_Tips=function(e,t,n){var o=this,i=this.node.parent;u.default.getBundleData(c.BundleName.Main).loadRes("Prefabs/Battle/Comp/UIBossBattleTip",cc.Prefab,function(r,a){if(r)console.error("Boss\u6218\u6597\u524d\u52a8\u753b\u5c55\u793a\u5931\u8d25",r);else if(i&&i.isValid)if(i.getChildByName(a.name))console.warn("Boss\u6218\u6597\u524d\u52a8\u753b\u5df2\u7ecf\u5c55\u793a\u4e86");else{var s=cc.instantiate(a),l=s.getComponent(E.default);l.endCb=n,l.setName(e,t),i.addChild(s),s.setPosition(cc.Vec2.ZERO),o.bossAnimPanel=s}else console.warn("Boss\u6218\u6597\u524d\u52a8\u753b\u5c55\u793a\u5931\u8d25,\u7236\u8282\u70b9\u4e0d\u5b58\u5728")})},t.prototype.playBattleMusic=function(e){D.default.isTest&&console.log("\u64ad\u653e\u97f3\u4e50",e),this.nowMusicState=e;var t=this;if(-1==[c.SoundType.bgm_vitory,c.SoundType.bgm_fail,c.SoundType.bgm_login].indexOf(f.default.instance.currentMusicKey))switch(e){case s.boss:f.default.instance.PlayMusic(c.SoundType.bgm_boss,!0);break;case s.copy:f.default.instance.PlayMusic(c.SoundType.bgm_copy,!0);break;case s.vitory:f.default.instance.PlayMusic(c.SoundType.bgm_vitory,!1,1.1,function(){f.default.instance.currentMusicKey="",t.playBattleMusic(t.nowMusicState)});break;case s.fail:f.default.instance.PlayMusic(c.SoundType.bgm_fail,!1,.8,function(){f.default.instance.currentMusicKey="",t.playBattleMusic(t.nowMusicState)});default:case s.main:f.default.instance.PlayMusic(c.SoundType.bgm_main,!0)}},t.prototype.loadStage=function(e,t){if(!this.isLoadingStage){if(this.isLoadingStage=!0,this.isGold=!1,this.unscheduleAllCallbacks(),this.nowStageState=a.normal,this.bossAnimPanel&&this.bossAnimPanel.isValid){this.bossAnimPanel.opacity=0;var o=this.bossAnimPanel.getComponent(E.default);o&&(o.endCb=null)}this.wavesData.length=0,this.needLoadMonster.length=0,this.loadFinishCb=t,this.loadCount=3,this.bulletClear(),this.skillClear(),this.effectClear(),this.wordLabelClear();var i=d.default.instance.getLevelInfo(e),r=i.difficulty;h.EventMgr.event(c.EventType.Battle_CopyInfo_Update,!1);var s=i.level;h.EventMgr.event(c.EventType.Battle_Update_Stage,r,s),h.EventMgr.event(c.EventType.Battle_State_Switch,0),n.monsterHpAxis=l.default.decode(i.multiHP),n.monsterAttackAxis=l.default.decode(i.multiAttack),n.monsterGoldAxis=l.default.decode(i.multiGold),n.bossHpAxis=l.default.decode(i.multiBossHP),n.bossAttackAxis=l.default.decode(i.multiBossAttack),this.wavesData.push(i.wave1),this.wavesData.push(i.wave2),this.wavesData.push(i.wave3),this.wavesData.push(i.wave4),this.wavesData.push(i.wave5);for(var u=0;u<this.wavesData.length;u++)for(var p=this.wavesData[u],f=0;f<p.length;f++){for(var g=d.default.instance.getEnemyInfo(p[f].enemy),y=!1,m=0;m<this.needLoadMonster.length;m++)if(this.needLoadMonster[m].name==g.viewUrl){y=!0;break}if(!y){var v=g.type,_=l.default.mul(n.monsterAttackAxis,l.default.decode(g.damage)),b=l.default.mul(n.monsterHpAxis,l.default.decode(g.hp));1==v&&(_=l.default.div(_,n.bossAttackAxis),b=l.default.div(b,n.bossHpAxis)),this.needLoadMonster.push({name:g.viewUrl,speed:g.speed,range:g.range,atk:_,maxHp:b,gold:l.default.mul(n.monsterGoldAxis,l.default.decode(g.gold)),fre:g.fre})}}this.loadScene("scene_cunzhuang"),this.loadHero(),this.loadMonster(),this.releaseHeroPartner()}},t.prototype.finishLoadStage=function(){this.loadCount--,this.loadCount<=0&&(this.loadFinishCb&&this.loadFinishCb(),this.isLoadingStage=!1,this.startStage())},t.prototype.waveTranslate=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n].split("|");t.push({enemy:parseInt(o[0]),count:parseInt(o[1])})}return t},t.prototype.loadBossRushStage=function(e,t){if(!this.isLoadingStage){if(this.isLoadingStage=!0,this.unscheduleAllCallbacks(),this.nowStageState=a.bossRush,this.bossAnimPanel&&this.bossAnimPanel.isValid){this.bossAnimPanel.opacity=0;var o=this.bossAnimPanel.getComponent(E.default);o&&(o.endCb=null)}this.nowRound=0,this.wavesData.length=0,this.needLoadMonster.length=0,this.loadFinishCb=t,this.loadCount=3,this.isLoop=!1,this.bulletClear(),this.skillClear(),this.effectClear(),this.wordLabelClear();var i=d.default.instance.getAllBossRushInfos(),r=d.default.instance.getGoldRushInfo(e);h.EventMgr.event(c.EventType.Main_UI_UpdateState,c.MainUIState.InCopy,"desc_bossRush"),h.EventMgr.event(c.EventType.Battle_State_Switch,4);var s="\u9996\u9886\u526f\u672c "+e+"\n1/10";this.copyDifficulty=e,this.copyName=s,this.copyTime=120,h.EventMgr.event(c.EventType.Battle_CopyInfo_Update,!0,this.copyName,this.copyTime.toString()),this.schedule(this.copyTimeUpdate,1/n.battleSpeed);for(var u=[],p=0;p<i.length;p++)u.push([{enemy:i[p].enemy.toString(),count:1}]);this.wavesData=u,h.EventMgr.event(c.EventType.Battle_State_Switch,0);var f=m.Tool.getRandomInArray(this.sceneName);for(n.monsterHpAxis="0",n.monsterAttackAxis="0",n.monsterGoldAxis="0",n.bossHpAxis=l.default.decode(r.multiHP),n.bossAttackAxis=l.default.decode(r.multiAttack),p=0;p<this.wavesData.length;p++)for(var g=this.wavesData[p],y=0;y<g.length;y++){for(var v=d.default.instance.getEnemyInfo(g[y].enemy),_=!1,b=0;b<this.needLoadMonster.length;b++)if(this.needLoadMonster[b].name==v.viewUrl){_=!0;break}if(!_){var S=l.default.mul(n.bossAttackAxis,l.default.decode(v.damage)),M=l.default.mul(n.bossHpAxis,l.default.decode(v.hp));S=l.default.mul(S,i[p].multiHP),M=l.default.mul(M,i[p].multiHP),this.needLoadMonster.push({name:v.viewUrl,speed:v.speed,range:v.range,atk:S,maxHp:M,gold:l.default.mul(n.monsterGoldAxis,l.default.decode(v.gold)),fre:v.fre})}}this.loadScene(f),this.loadHero(),this.loadMonster()}},t.prototype.bossRushRoundStart=function(){this.copyName="\u9996\u9886\u526f\u672c "+this.copyDifficulty+"\n"+(this.nowRound+1)+"/10",h.EventMgr.event(c.EventType.Battle_CopyInfo_Update,!0,this.copyName,this.copyTime.toString())},t.prototype.bossRoundUpdate=function(){var e=cc.director.getDeltaTime()*n.battleSpeed;this.nowBossTime-=e,this.nowBossTime<=0&&(this.nowBossTime=0,this.heroDead(),y.default.instance.showToast("BOSS\u6311\u6218\u5931\u8d25\uff0cTime Out~")),h.EventMgr.event(c.EventType.Battle_Boss_Time_Update,this.nowBossTime/this.bossTime)},t.prototype.bossRushSuccessEnd=function(){D.default.isTest&&console.log("bossRush\u7ed3\u675f"),this.copyDifficulty>=g.default.instance.storageData.bossRushMaxDifficulty&&g.default.instance.addBossRushDifficulty(),v.default.showCopyRewardPanel("diamond",D.default.bossRushRewardCal(this.copyDifficulty),"bossRush"),this.copyEnd(),h.EventMgr.event(c.GlobalEvent.BattleComplete),h.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.ClearBoss,this.copyDifficulty),g.default.instance.storageData.bossRushKey>0?g.default.instance.useBossRushKey():g.default.instance.storageData.bossRushKeyVideo>0&&g.default.instance.useBossRushVideoKey()},t.prototype.loadGoldRushStage=function(e,t){if(!this.isLoadingStage){if(this.isLoadingStage=!0,this.unscheduleAllCallbacks(),this.nowStageState=a.goldRush,this.bossAnimPanel&&this.bossAnimPanel.isValid){this.bossAnimPanel.opacity=0;var o=this.bossAnimPanel.getComponent(E.default);o&&(o.endCb=null)}this.nowRound=0,this.wavesData.length=0,this.needLoadMonster.length=0,this.loadFinishCb=t,this.loadCount=3,this.isLoop=!1,this.bulletClear(),this.skillClear(),this.effectClear(),this.wordLabelClear();var i=d.default.instance.getGoldRushInfo(e);h.EventMgr.event(c.EventType.Main_UI_UpdateState,c.MainUIState.InCopy,"desc_goldRush"),h.EventMgr.event(c.EventType.Battle_State_Switch,4);var r="\u91d1\u5e01\u526f\u672c "+e;this.copyDifficulty=e,this.copyName=r,this.copyTime=60,h.EventMgr.event(c.EventType.Battle_CopyInfo_Update,!0,this.copyName,this.copyTime.toString()),this.schedule(this.copyTimeUpdate,1/n.battleSpeed);var s=[];s.push([{enemy:i.enemy.toString(),count:1}]),this.wavesData=s,h.EventMgr.event(c.EventType.Battle_State_Switch,0),n.monsterHpAxis="0",n.monsterAttackAxis="0",n.monsterGoldAxis="0",n.bossHpAxis=l.default.decode(i.multiHP),n.bossAttackAxis=l.default.decode(i.multiAttack);for(var u=0;u<this.wavesData.length;u++)for(var p=this.wavesData[u],f=0;f<p.length;f++){for(var g=d.default.instance.getEnemyInfo(p[f].enemy),y=!1,m=0;m<this.needLoadMonster.length;m++)if(this.needLoadMonster[m].name==g.viewUrl){y=!0;break}if(!y){var v=l.default.mul(n.bossAttackAxis,l.default.decode(g.damage)),_=l.default.mul(n.bossHpAxis,l.default.decode(g.hp));this.needLoadMonster.push({name:g.viewUrl,speed:g.speed,range:g.range,atk:v,maxHp:_,gold:l.default.mul(n.monsterGoldAxis,l.default.decode(g.gold)),fre:g.fre})}}this.loadScene("scene_gold_1"),this.loadHero(),this.loadMonster()}},t.prototype.goldRushRoundStart=function(){this.copyName="\u91d1\u5e01\u526f\u672c "+this.copyDifficulty,h.EventMgr.event(c.EventType.Battle_CopyInfo_Update,!0,this.copyName,this.copyTime.toString())},t.prototype.goldRushUpdate=function(){A.default.instance.speed=25},t.prototype.goldRushSuccessEnd=function(){D.default.isTest&&console.log("goldRush\u7ed3\u675f"),this.copyDifficulty>=g.default.instance.storageData.goldRushMaxDifficulty&&g.default.instance.addGoldRushDifficulty(),v.default.showCopyRewardPanel("gold",D.default.goldRushRewardCal(this.copyDifficulty),"goldRush"),this.copyEnd(),h.EventMgr.event(c.GlobalEvent.BattleComplete),h.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.ClearGold,this.copyDifficulty),g.default.instance.storageData.goldRushKey>0?g.default.instance.useGoldRushKey():g.default.instance.storageData.goldRushKeyVideo>0&&g.default.instance.useGoldRushVideoKey()},t.prototype.loadClearRushStage=function(e,t){if(!this.isLoadingStage){if(this.isLoadingStage=!0,this.unscheduleAllCallbacks(),this.nowStageState=a.clearRush,this.bossAnimPanel&&this.bossAnimPanel.isValid){this.bossAnimPanel.opacity=0;var o=this.bossAnimPanel.getComponent(E.default);o&&(o.endCb=null)}this.nowRound=0,this.wavesData.length=0,this.needLoadMonster.length=0,this.loadFinishCb=t,this.loadCount=3,this.isLoop=!1,this.bulletClear(),this.skillClear(),this.effectClear(),this.wordLabelClear();var i=d.default.instance.getClearRushInfo(e);h.EventMgr.event(c.EventType.Main_UI_UpdateState,c.MainUIState.InCopy,"clearRushDesc"),h.EventMgr.event(c.EventType.Battle_State_Switch,4);var r=p.default.Instance.getLanguage("clearRushTitle")+" "+e+"\n"+(this.nowRound+1)+"/5";this.copyDifficulty=e,this.copyName=r,this.copyTime=120,h.EventMgr.event(c.EventType.Battle_CopyInfo_Update,!0,this.copyName,this.copyTime.toString()),this.schedule(this.copyTimeUpdate,1),this.wavesData.push(m.Tool.cloneArray_Obj(i.wave1)),this.wavesData.push(m.Tool.cloneArray_Obj(i.wave2)),this.wavesData.push(m.Tool.cloneArray_Obj(i.wave3)),this.wavesData.push(m.Tool.cloneArray_Obj(i.wave4)),this.wavesData.push(m.Tool.cloneArray_Obj(i.wave5));for(var s=0;s<this.wavesData.length;s++)this.wavesData[s].unshift({enemy:i.caveId.toString(),count:1});for(h.EventMgr.event(c.EventType.Battle_State_Switch,0),n.monsterHpAxis=l.default.decode(i.multiHP),n.monsterAttackAxis=l.default.decode(i.multiAttack),n.monsterGoldAxis="0",n.bossHpAxis=l.default.decode(i.caveHP),n.bossAttackAxis=l.default.decode(i.multiAttack),s=0;s<this.wavesData.length;s++)for(var u=this.wavesData[s],f=0;f<u.length;f++){for(var g=d.default.instance.getEnemyInfo(u[f].enemy),y=!1,v=0;v<this.needLoadMonster.length;v++)if(this.needLoadMonster[v].name==g.viewUrl){y=!0;break}if(!y){var _=g.type,b=void 0,S=void 0;1==_?(b=l.default.mul(n.monsterAttackAxis,l.default.decode(g.damage)),S=l.default.mul(n.monsterHpAxis,l.default.decode(g.hp))):2==_&&(b=l.default.mul(n.monsterAttackAxis,l.default.decode(g.damage)),S=l.default.mul(n.bossHpAxis,l.default.decode(g.hp))),this.needLoadMonster.push({name:g.viewUrl,speed:g.speed,range:g.range,atk:b,maxHp:S,gold:l.default.mul(n.monsterGoldAxis,l.default.decode(g.gold)),fre:g.fre})}}console.log("\u9700\u8981\u52a0\u8f7d\u7684\u602a\u7269",this.needLoadMonster),this.loadScene("scene_black_1"),this.loadHero(),this.loadMonster()}},t.prototype.clearRushRoundStart=function(){this.copyName="\u626b\u8361\u526f\u672c "+this.copyDifficulty+"\n"+(this.nowRound+1)+"/5",h.EventMgr.event(c.EventType.Battle_CopyInfo_Update,!0,this.copyName,this.copyTime.toString())},t.prototype.clearRushSuccessEnd=function(){D.default.isTest&&console.log("clearRush\u7ed3\u675f"),this.copyDifficulty>=g.default.instance.storageData.clearRushMaxDifficulty&&g.default.instance.addClearRushDifficulty(),v.default.showCopyRewardPanel("fork",D.default.clearRushRewardCal(this.copyDifficulty),"clearRush"),this.copyEnd(),h.EventMgr.event(c.GlobalEvent.BattleComplete),h.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.ClearClearRush,this.copyDifficulty),g.default.instance.storageData.clearRushKey>0?g.default.instance.useClearRushKey():g.default.instance.storageData.clearRushKeyVideo>0&&g.default.instance.useClearRushVideoKey()},t.prototype.inHeroSelect=function(e){this.nowHeroRushDifficulty=e,this.nowHeroRushRound=1,this.nowHeroRushLevelData=null,this.nowHeroRushLevelData=d.default.instance.getHeroRushInfo(this.nowHeroRushDifficulty),T.default.instance.init(this.nowHeroRushLevelData.ringLevel),v.default.showHeroRushHeroSelectView()},t.prototype.heroRushDeadWait=function(){for(var e=0;e<this.nowMonsters.length;e++)this.nowMonsters[e].getComponent(R.default).hitBack();this.setPartnerToHero()},t.prototype.heroRushRoundStart=function(){if(this.nowStageState==a.heroRush){this.unscheduleAllCallbacks();for(var e=0;e<this.nowMonsters.length;e++)this.nowMonsters[e].getComponent(R.default).recyle();cc.tween(this.blackMask).to(.5/n.battleSpeed,{opacity:255}).call(function(){v.default.showHeroRushLevelSelectView()}).start(),this.inScene(function(){})}},t.prototype.heroRushRoundEnd=function(){D.default.isTest&&console.log("heroRush\uff1a\u5b8c\u6210F",this.nowHeroRushRound),this.nowHeroRushRound++,this.nowStageState==a.heroRush&&(this.nowHeroRushRound<=T.default.maxRound?this.heroRushRoundStart():T.default.instance.heroRushLevelEnd())},t.prototype.loadHeroRushStage=function(e,t,o){if(!this.isLoadingStage){if(this.isLoadingStage=!0,this.unscheduleAllCallbacks(),D.default.isTest&&console.log("HeroRush\u5f00\u59cb\u5173\u5361",t),this.bossAnimPanel&&this.bossAnimPanel.isValid){this.bossAnimPanel.opacity=0;var i=this.bossAnimPanel.getComponent(E.default);i&&(i.endCb=null)}this.nowRound=0,this.wavesData.length=0,this.needLoadMonster.length=0,this.loadFinishCb=o,this.loadCount=4,this.isLoop=!1,this.bulletClear(),this.skillClear(),this.effectClear(),this.wordLabelClear();var r=d.default.instance.getHeroRushRandInfo(t);h.EventMgr.event(c.EventType.Main_UI_UpdateState,c.MainUIState.InHeroCopy);var a=_.default.instance.inHeroCopyProp.getChildByName("levelBar");a.destroyAllChildren();var s=cc.instantiate(T.default.instance.levelbar);a.addChild(s),s.setPosition(cc.v2(0,0)),h.EventMgr.event(c.EventType.Battle_State_Switch,4);for(var u=r.monster.split(","),p=0;p<u.length;p++){var f=u[p].split("|"),g=f[0],y=f[1];D.default.isTest&&console.log("heroRush:",g,y),this.wavesData.push({enemy:g,count:parseInt(y)})}var m=r.scene;n.monsterHpAxis=l.default.mul(l.default.decode(this.nowHeroRushLevelData.multiHP),Math.pow(this.nowHeroRushLevelData.multiHPUP,this.nowHeroRushRound-1)),n.monsterAttackAxis=l.default.mul(l.default.decode(this.nowHeroRushLevelData.multiAtk),Math.pow(this.nowHeroRushLevelData.multiAtkUP,this.nowHeroRushRound-1)),n.monsterGoldAxis="0",n.bossHpAxis=l.default.mul(n.monsterHpAxis,500),n.bossAttackAxis=l.default.mul(n.monsterHpAxis,10);for(var v=this.wavesData,b=0;b<v.length;b++){for(var S=d.default.instance.getEnemyInfo(v[b].enemy),M=!1,C=0;C<this.needLoadMonster.length;C++)if(this.needLoadMonster[C].name==S.viewUrl){M=!0;break}if(M)D.default.isTest&&console.log("heroRush:\u68c0\u67e5\u662f\u5426\u5df2\u7ecf\u52a0\u8f7d\u8fc7\u4e86");else{var k=S.type,I=void 0,w=void 0;1==k?(I=l.default.mul(n.monsterAttackAxis,l.default.decode(S.damage)),w=l.default.mul(n.monsterHpAxis,l.default.decode(S.hp))):2==k&&(I=l.default.mul(n.bossAttackAxis,l.default.decode(S.damage)),w=l.default.mul(n.bossHpAxis,l.default.decode(S.hp))),this.needLoadMonster.push({name:S.viewUrl,speed:S.speed,range:S.range,atk:I,maxHp:w,gold:l.default.mul(n.monsterGoldAxis,l.default.decode(S.gold)),fre:S.fre})}}this.releasePartner(),this.loadScene(m),this.loadHero(e),this.loadMonster(),this.loadHeroPartner(T.default.instance.getNowLiveHero())}},t.prototype.heroRushFailEnd=function(e){D.default.isTest&&console.log("HeroRush\u5931\u8d25"),this.copyEnd(),g.default.instance.storageData.heroRushKey>0?g.default.instance.useHeroRushKey():g.default.instance.storageData.heroRushKeyVideo>0&&g.default.instance.useHeroRushVideoKey(),this.openResultPanel(e)},t.prototype.heroRushSuccessEnd=function(){D.default.isTest&&console.log("HeroRush\u80dc\u5229"),this.nowHeroRushDifficulty>=g.default.instance.storageData.heroRushMaxDifficulty&&g.default.instance.addHeroRushDifficulty(),this.copyEnd(),h.EventMgr.event(c.GlobalEvent.BattleComplete),h.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.ClearHeroRush,this.nowHeroRushDifficulty),g.default.instance.storageData.heroRushKey>0?g.default.instance.useHeroRushKey():g.default.instance.storageData.heroRushKeyVideo>0&&g.default.instance.useHeroRushVideoKey(),this.openResultPanel(1)},t.prototype.openResultPanel=function(e){this.scheduleOnce(function(){D.default.isTest&&console.log("\u6212\u6307\u6570\u636e",e,T.default.instance.currPickProps.ring,T.default.instance.levelbar),v.default.showHeroRushResultPanel({type:e,props:T.default.instance.currPickProps.ring,barNode:T.default.instance.levelbar})})},t.prototype.loadScene=function(e){var t=this;this.nowSceneRelaase();for(var n="S",o=1;o<e.length;o++)n+=e[o];u.default.getBundleData(n).loadRes(e,cc.Prefab,function(e,n){if(e)console.error("\u573a\u666f\u52a0\u8f7d\u9519\u8bef",e);else{n.addRef(),t.sceneAsset.push(n);var o=cc.instantiate(n);t.sceneNode.addChild(o),o.setPosition(0,0),t.nowScene=o,D.default.isTest&&console.log("\u573a\u666f\u52a0\u8f7d\u5b8c\u6210"),t.finishLoadStage()}})},t.prototype.nowSceneRelaase=function(){this.nowScene&&this.nowScene.isValid&&this.nowScene.destroy();for(var e=this.sceneAsset.length-1;e>=0;e--)this.sceneAsset[e].decRef();this.sceneAsset.length=0},t.prototype.loadHero=function(e){var t=this;this.nowHeroRelaase();var n=e||g.default.instance.storageData.usingHeroId,o=M.default.Instance.getData(n).level,i="0",r="0",a="0",s="0";M.default.Instance.getOwnMap().forEach(function(e,t){switch(t){case c.PROP_TYPE.ATK:i=l.default.add(i,e);break;case c.PROP_TYPE.HP:r=l.default.add(r,e);break;case c.PROP_TYPE.CoinAdd:a=l.default.add(a,e);break;case c.PROP_TYPE.SkillHurtAdd:s=l.default.add(s,e);break;default:D.default.isTest&&console.log("\u672a\u77e5\u82f1\u96c4\u589e\u5e45buff",t)}}),D.default.heroAddCoinValue=a,D.default.heroSkillDamageValue=s,D.default.heroBuffAddAtk=i,D.default.heroBuffAddHp=r,D.default.isTest&&console.log("\u4f7f\u7528\u82f1\u96c4ID:",n),D.default.isTest&&console.log("\u5f53\u524d\u82f1\u96c4Level",o),this.nowHeroIndex=n,this.nowHeroLevel=o,this.nowHeroSkill=M.default.Instance.getNowSkill(n),D.default.isTest&&console.log("\u5f53\u524d\u82f1\u96c4\u6280\u80fd",this.nowHeroSkill);var d=n,h="Prefabs/Battle/Hero/hero_"+d.toString();u.default.loadMainRes(h,cc.Prefab,function(e,n){if(e)console.error("\u82f1\u96c4\u52a0\u8f7d\u9519\u8bef",e);else{n.addRef(),t.heroAsset.push(n);var o=cc.instantiate(n);t.heroNode.addChild(o),o.setPosition(t.heroBornPoint.getPosition()),t.nowHero=o,t.nowHero.getChildByName("anim").setScale(1);var i=o.addComponent(w.default);i.bulletName="bullet_hero_"+d.toString(),i.init(),t.finishLoadStage(),D.default.isTest&&console.log("\u82f1\u96c4\u52a0\u8f7d\u5b8c\u6bd5")}})},t.prototype.nowHeroRelaase=function(){for(var e=this.heroNode.children.length-1;e>=0;e--)this.heroNode.children[e].destroy();for(this.nowHero&&this.nowHero.destroy(),e=this.heroAsset.length-1;e>=0;e--)this.heroAsset[e].decRef();this.heroAsset.length=0},t.prototype.loadMonster=function(){var e=this;this.nowEnemyRelaase();for(var t=this.needLoadMonster.length,n=0;n<this.needLoadMonster.length;n++)u.default.loadMainRes("Prefabs/Battle/Monster/"+this.needLoadMonster[n].name.toString(),cc.Prefab,function(n,o){if(n)console.error("\u602a\u7269\u52a0\u8f7d\u9519\u8bef",n);else{D.default.isTest&&console.log("\u602a\u7269\u52a0\u8f7d\u6210\u529f",o.name),o.addRef(),e.monsterAsset.push(o);var i=cc.instantiate(o);e.addMonster(i),i.opacity=0,0==--t&&(D.default.isTest&&console.log("\u602a\u7269\u52a0\u8f7d\u5b8c\u6210"),e.finishLoadStage())}})},t.prototype.addMonster=function(e){this.monsterNode.addChild(e),e.getComponent(R.default).id=this.monsterNode.children.length,e.setPosition(this.monsterBornPoint.getPosition()),e.getComponent(R.default).anim.node.setPosition(cc.Vec2.ZERO),this.nowMonsters.push(e)},t.prototype.nowEnemyRelaase=function(){for(var e=this.nowMonsters.length-1;e>=0;e--)this.nowMonsters[e].destroy();for(this.nowMonsters.length=0,e=this.monsterAsset.length-1;e>=0;e--)this.monsterAsset[e].decRef();this.monsterAsset.length=0},t.prototype.bornMoster=function(e,t){var n;void 0===t&&(t=0),D.default.isTest&&console.log("\u751f\u6210",e);for(var o=0;o<this.nowMonsters.length;o++)if(0==this.nowMonsters[o].opacity&&this.nowMonsters[o].name==e){n=this.nowMonsters[o];break}var i=this.monsterBornPoint.getPosition();if(i.x+=t,-1==e.indexOf("boss")&&(i.y+=m.Tool.randomNumber(-this.monsterBornPoint.height/2,this.monsterBornPoint.height/2)),n)n.opacity=255,n.setPosition(i);else for(o=0;o<this.monsterAsset.length;o++)if(this.monsterAsset[o].name==e){n=cc.instantiate(this.monsterAsset[o]),this.addMonster(n),n.opacity=255,n.setPosition(i);break}for(o=0;o<this.needLoadMonster.length;o++)if(this.needLoadMonster[o].name==n.name){var r=n.getComponent(R.default);r.speed=this.needLoadMonster[o].speed,r.range=this.needLoadMonster[o].range,r.atk=this.needLoadMonster[o].atk,r.maxHp=this.needLoadMonster[o].maxHp,r.gold=this.needLoadMonster[o].gold,r.fre=this.needLoadMonster[o].fre;break}n.getComponent(R.default).init(),this.monsterLayerRefresh()},t.prototype.getAliveMonster=function(){for(var e=[],t=0;t<n.instance.nowMonsters.length;t++)0!=n.instance.nowMonsters[t].opacity&&2!=n.instance.nowMonsters[t].getComponent(R.default).nowState&&e.push(n.instance.nowMonsters[t]);return e},t.prototype.getBulletAtckMonster=function(){for(var e,t,o=[],i=0;i<n.instance.nowMonsters.length;i++)e=(t=n.instance.nowMonsters[i]).getComponent(R.default),0!=t.opacity&&!e.isAlreadyDead&&2!=e.nowState&&t.x<300&&o.push(n.instance.nowMonsters[i]);return o},t.prototype.getImmediatelyAtckMonster=function(){for(var e,t,o=[],i=0;i<n.instance.nowMonsters.length;i++)e=(t=n.instance.nowMonsters[i]).getComponent(R.default),0!=t.opacity&&2!=e.nowState&&t.x<350&&o.push(n.instance.nowMonsters[i]);return o},t.prototype.monsterLayerRefresh=function(){var e=this.monsterNode.children;e.sort(function(e,t){return t.y-e.y});for(var t=0;t<e.length;t++)e[t].setSiblingIndex(t)},t.prototype.loadPartner=function(e){var t=this;this.releasePartner();for(var n=[],o=g.default.instance.storageData.usingPartnerIds,i=0;i<o.length;i++)if(0!=o[i]){var r=C.default.Instance.getPartnerDomain(o[i]);n.push(r)}var a=n.length;if(0!=a){var s=function(o){u.default.getBundleData(c.BundleName.Main).loadRes(n[o].getViewUrl(),cc.Prefab,function(i,r){if(i)console.error("\u4f19\u4f34\u52a0\u8f7d\u9519\u8bef",i);else{D.default.isTest&&console.log("\u4f19\u4f34\u52a0\u8f7d\u6210\u529f",r.name),t.partnerAsset.push(r),r.addRef();var s=cc.instantiate(r);t.addPartner(s,o,n[o].getId()),--a<=0&&(e&&e(),D.default.isTest&&console.log("partner\u52a0\u8f7d\u6210\u529f"))}})};for(i=0;i<n.length;i++)s(i)}else e&&e()},t.prototype.addPartner=function(e,t,n){this.nowPartner.push(e),t<2?this.partnerBackNode.addChild(e):this.partnerFrontNode.addChild(e),e.addComponent(O.default).init(n,50+50*t),e.setPosition(this.partnerPoints.children[t].getPosition()),e.getChildByName("anim").scale=1},t.prototype.releasePartner=function(){for(var e=this.nowPartner.length-1;e>=0;e--)this.nowPartner[e]&&this.nowPartner[e].isValid&&this.nowPartner[e].destroy();for(e=this.partnerAsset.length-1;e>=0;e--)this.partnerAsset[e].decRef();this.nowPartner.length=0,this.partnerAsset.length=0},t.prototype.bornHpBar=function(e,t,o,i){var r;void 0===i&&(i=!1);for(var a=i?"hpBarBoss":"hpBar",s=0;s<this.hpBarNode.children.length;s++)if(0==this.hpBarNode.children[s].opacity&&this.hpBarNode.children[s].name==a){r=this.hpBarNode.children[s];break}r||(r=i?cc.instantiate(n.instance.hpBarBossPrefab):cc.instantiate(n.instance.hpBarPrefab),this.hpBarNode.addChild(r)),r.opacity=0;var l=r.getComponent(L.default);return i&&(t*=1.5,o*=1.5),l.followNode=e,l.offset=cc.v2(0,t),r.scale=o,r.getComponent(B.default)},t.prototype.hpBarUpdate=function(){for(var e=0;e<this.hpBarNode.children.length;e++)this.hpBarNode.children[e].getComponent(L.default).followUpdate()},t.prototype.loadHeroPartner=function(e,t){var n=this;this.releaseHeroPartner();var o=0,i=function(){if(++o>=e.length){n.finishLoadStage(),t&&t();for(var i=0;i<n.heroPartnerNode.children.length;i++){var r=n.heroPartnerNode.children[i].getComponent(P.default);r.node.setSiblingIndex(r.order)}D.default.isTest&&console.log("\u82f1\u96c4\u4f19\u4f34\u52a0\u8f7d\u5b8c\u6bd5")}};0==e.length&&i();for(var r=function(t){var o=e[t],r="Prefabs/Battle/Hero/hero_"+o.toString();u.default.loadMainRes(r,cc.Prefab,function(e,r){if(e)console.error("\u82f1\u96c4\u4f19\u4f34\u52a0\u8f7d\u9519\u8bef",e);else{r.addRef(),n.heroPartnerAsset.push(r);var a=cc.instantiate(r);n.heroPartnerNode.addChild(a);var s=n.heroPartnerPoints.children[t];a.setPosition(s.getPosition()),a.getChildByName("anim").setScale(1);var c=a.addComponent(P.default);c.init(o,"bullet_hero_"+o.toString(),l.default.mul(D.default.heroAtkCal(),.5),l.default.mul(D.default.heroAspdCal(),.5)),c.order=t,i()}})},a=0;a<e.length;a++)r(a)},t.prototype.setPartnerToHero=function(){for(var e=function(e){var n=t.heroPartnerNode.children[e].getComponent(P.default);if(n){var o=n.id,i=M.default.Instance.getData(o).level,r="0",a="0",s="0",u="0";M.default.Instance.getOwnMap().forEach(function(e,t){switch(t){case c.PROP_TYPE.ATK:r=l.default.add(r,e);break;case c.PROP_TYPE.HP:a=l.default.add(a,e);break;case c.PROP_TYPE.CoinAdd:s=l.default.add(s,e);break;case c.PROP_TYPE.SkillHurtAdd:u=l.default.add(u,e);break;default:D.default.isTest&&console.log("\u672a\u77e5\u82f1\u96c4\u589e\u5e45buff",t)}}),D.default.heroAddCoinValue=s,D.default.heroSkillDamageValue=u,D.default.heroBuffAddAtk=r,D.default.heroBuffAddHp=a,D.default.isTest&&console.log("\u4f7f\u7528\u82f1\u96c4ID:",o),D.default.isTest&&console.log("\u5f53\u524d\u82f1\u96c4Level",i),t.nowHeroIndex=o,t.nowHeroLevel=i,t.nowHeroSkill=M.default.Instance.getNowSkill(o),D.default.isTest&&console.log("\u5f53\u524d\u82f1\u96c4\u6280\u80fd",t.nowHeroSkill),n.destroy(),n=t.heroPartnerNode.children[e].addComponent(w.default);var d=t.heroPartnerNode.children[e];d.setParent(t.heroNode);var h=t.heroBornPoint.getPosition();cc.tween(d).to(.5,{x:h.x,y:h.y}).start();var p=t.nowHero;return cc.tween(p).to(.5,{opacity:0}).start(),t.nowHero=d,t.nowHero.getChildByName("anim").setScale(1),n.bulletName="bullet_hero_"+o.toString(),n.init(),{value:void 0}}},t=this,n=0;n<this.heroPartnerNode.children.length;n++){var o=e(n);if("object"==typeof o)return o.value}},t.prototype.releaseHeroPartner=function(){for(var e=this.heroPartnerNode.children.length-1;e>=0;e--)this.heroPartnerNode.children[e]&&this.heroPartnerNode.children[e].isValid&&this.heroPartnerNode.children[e].destroy();for(e=this.heroPartnerAsset.length-1;e>=0;e--)this.heroPartnerAsset[e].decRef();this.heroPartnerAsset.length=0},t.prototype.bornEffect=function(e,t){for(var n,o=0;o<this.effectNode.children.length;o++)if(0==this.effectNode.children[o].opacity){n=this.effectNode.children[o];break}if(!n){if(this.effectNode.children.length>=20)return;(n=cc.instantiate(this.effectNode.children[0])).opacity=0,this.effectNode.addChild(n)}n.setPosition(t),n.opacity=255;var i=n.getComponent(sp.Skeleton);i.setAnimation(0,e,!1);var r=i.findAnimation(e).duration;this.scheduleOnce(function(){cc.tween(n).to(.1*r,{opacity:0}).start()},r)},t.prototype.bornMonsterDieFx=function(e){for(var t,n=0;n<this.monsterEffectNode.children.length;n++)if(0==this.monsterEffectNode.children[n].opacity){t=this.monsterEffectNode.children[n];break}t||((t=cc.instantiate(this.monsterEffectNode.children[0])).opacity=0,this.monsterEffectNode.addChild(t)),t.setPosition(e),t.opacity=255;var o=t.getComponent(sp.Skeleton);o.setAnimation(0,"animation",!1);var i=o.findAnimation("animation").duration;this.scheduleOnce(function(){cc.tween(t).to(.1*i,{opacity:0}).start()},i)},t.prototype.bornGoldRushFx=function(e){for(var t,n=0;n<this.goldEffetNode.children.length;n++)if(0==this.goldEffetNode.children[n].opacity){t=this.goldEffetNode.children[n];break}t||((t=cc.instantiate(this.goldEffetNode.children[0])).opacity=0,this.goldEffetNode.addChild(t)),t.setPosition(e),t.opacity=255;var o=t.getComponent(sp.Skeleton);o.setAnimation(0,"animation",!1);var i=o.findAnimation("animation").duration;this.scheduleOnce(function(){cc.tween(t).to(.1*i,{opacity:0}).start()},i)},t.prototype.bornClearRushFx=function(e){for(var t,n=0;n<this.clearRushNode.children.length;n++)if(0==this.clearRushNode.children[n].opacity){t=this.clearRushNode.children[n];break}t||((t=cc.instantiate(this.clearRushNode.children[0])).opacity=0,this.clearRushNode.addChild(t)),t.setPosition(e),t.opacity=255;var o=t.getComponent(sp.Skeleton);o.setAnimation(0,"animation",!1);var i=o.findAnimation("animation").duration;this.scheduleOnce(function(){cc.tween(t).to(.1*i,{opacity:0}).start()},i)},t.prototype.effectClear=function(){for(var e=this.effectNode.children.length-1;e>=1;e--)this.effectNode.children[e].destroy();for(e=this.monsterEffectNode.children.length-1;e>=1;e--)this.monsterEffectNode.children[e].destroy();for(e=this.goldEffetNode.children.length-1;e>=1;e--)this.goldEffetNode.children[e].destroy();for(e=this.clearRushNode.children.length-1;e>=1;e--)this.clearRushNode.children[e].destroy()},t.prototype.loadAllBullet=function(e){var t=this;u.default.getBundleData(c.BundleName.Main).bundle.loadDir("Prefabs/Battle/Bullet",cc.Prefab,function(n,o){if(n)console.error("\u5b50\u5f39\u52a0\u8f7d\u9519\u8bef",n);else{t.allBulletPrefabs=o;for(var i=0;i<o.length;i++)o[i].addRef();e&&e(),D.default.isTest&&console.log("\u5b50\u5f39\u52a0\u8f7d\u6210\u529f")}})},t.prototype.getBulletPrefab=function(e){for(var t=0;t<this.allBulletPrefabs.length;t++)if(this.allBulletPrefabs[t].name==e)return this.allBulletPrefabs[t]},t.prototype.bulletClear=function(){this.bulletNode.destroyAllChildren(),this.bulletBackNode.destroyAllChildren()},t.prototype.loadAllSkill=function(e){var t=this;u.default.getBundleData(c.BundleName.Main).bundle.loadDir("Prefabs/Battle/Skill",cc.Prefab,function(n,o){if(n)console.error("\u6280\u80fd\u52a0\u8f7d\u9519\u8bef",n);else{t.allSkillPrefabs=o;for(var i=0;i<o.length;i++)o[i].addRef();e&&e(),D.default.isTest&&console.log("\u6280\u80fd\u52a0\u8f7d\u6210\u529f")}})},t.prototype.getSkillPrefab=function(e){for(var t=0;t<this.allSkillPrefabs.length;t++)if(this.allSkillPrefabs[t].name==e)return this.allSkillPrefabs[t]},t.prototype.skillClear=function(){this.skillNode.destroyAllChildren(),this.skillBackNode.destroyAllChildren()},t.prototype.skillAOE=function(e,t,n,o,i){for(var r=this.getImmediatelyAtckMonster(),a=0;a<r.length;a++)if(e.sub(r[a].getPosition()).magSqr()<=t*t){r[a].getComponent(R.default).hit(n,o);var s=r[a].getPosition();s.x+=m.Tool.randomNumber(-25,25),s.y+=m.Tool.randomNumber(-25,25),this.bornEffect(i,s)}},t.prototype.playWordLabel=function(e,t,n){if(e&&e.isValid){for(var o,i=0;i<this.wordLabelNode.children.length;i++)if(0==this.wordLabelNode.children[i].getComponent(I.default).isActive){o=this.wordLabelNode.children[i];break}o||((o=cc.instantiate(this.wordLabelNode.children[0])).opacity=0,this.wordLabelNode.addChild(o));var r=e.getPosition();r.y+=1.1*e.height,o.getComponent(I.default).show(r,t,n)}},t.prototype.wordLabelClear=function(){for(var e=this.wordLabelNode.children.length-1;e>0;e--)this.wordLabelNode.children[e].destroy()},t.prototype.worldShake_Mini=function(){this.isShaking||(this.isShaking=!0,this.shakeTime=.1,m.Tool.objectShock(this.node,.1,15))},t.prototype.worldShake_Big=function(){this.isShaking||(this.isShaking=!0,this.shakeTime=.2,m.Tool.objectShock(this.node,.2,30))},t.prototype.shakeUpdate=function(e){this.isShake&&(this.shakeTime<=0?(this.isShaking=!1,this.node.x=this.baseX,this.node.y=this.baseY):this.shakeTime-=e)},t.battleSpeed=1,t.isPause=!1,t.monsterHpAxis="1",t.monsterAttackAxis="1",t.monsterGoldAxis="1",t.bossHpAxis="1",t.bossAttackAxis="1",t.bornMosterOffsetX=300,r([j(cc.Node)],t.prototype,"sceneNode",void 0),r([j(cc.Node)],t.prototype,"heroNode",void 0),r([j(cc.Node)],t.prototype,"monsterNode",void 0),r([j(cc.Node)],t.prototype,"bulletBackNode",void 0),r([j(cc.Node)],t.prototype,"bulletNode",void 0),r([j(cc.Node)],t.prototype,"effectNode",void 0),r([j(cc.Node)],t.prototype,"monsterEffectNode",void 0),r([j(cc.Node)],t.prototype,"goldEffetNode",void 0),r([j(cc.Node)],t.prototype,"clearRushNode",void 0),r([j(cc.Node)],t.prototype,"wordLabelNode",void 0),r([j(cc.Node)],t.prototype,"skillNode",void 0),r([j(cc.Node)],t.prototype,"skillBackNode",void 0),r([j(cc.Node)],t.prototype,"partnerBackNode",void 0),r([j(cc.Node)],t.prototype,"partnerFrontNode",void 0),r([j(cc.Node)],t.prototype,"heroPartnerNode",void 0),r([j(cc.Node)],t.prototype,"successNode",void 0),r([j(cc.Node)],t.prototype,"hpBarNode",void 0),r([j(cc.Node)],t.prototype,"heroBornPoint",void 0),r([j(cc.Node)],t.prototype,"monsterBornPoint",void 0),r([j(cc.Node)],t.prototype,"partnerPoints",void 0),r([j(cc.Node)],t.prototype,"heroPartnerPoints",void 0),r([j(cc.Node)],t.prototype,"blackMask",void 0),r([j(cc.Node)],t.prototype,"wind",void 0),r([j(cc.Prefab)],t.prototype,"hpBarPrefab",void 0),r([j(cc.Prefab)],t.prototype,"hpBarBossPrefab",void 0),n=r([N],t)}(cc.Component);n.default=x,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Comp/Bar":"Bar","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BattleData":"BattleData","../../Mgr/BundleMgr":"BundleMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/SoundMgr":"SoundMgr","../../Mgr/StorageMgr":"StorageMgr","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen","../Main_UI":"Main_UI","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/Hero/HeroMgr":"HeroMgr","../Mgr/PartnerMgr":"PartnerMgr","./Battle_HeroRushMgr":"Battle_HeroRushMgr","./Battle_RelicMgr":"Battle_RelicMgr","./Comp/Battle_HpBar":"Battle_HpBar","./Comp/HurtLabel":"HurtLabel","./Comp/UIBossBattleTip":"UIBossBattleTip","./Hero":"Hero","./HeroPartner":"HeroPartner","./Monster":"Monster","./Partner":"Partner","./SceneCrl":"SceneCrl"}],Battle_Fail_Panel:[function(e,t,n){"use strict";cc._RF.push(t,"2bb7eeHkk5C0YPWtD5o2XJF","Battle_Fail_Panel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/SoundMgr"),c=e("../../../Platform/Platform"),u=e("../../../Res/ResPanelOpen"),d=e("../../../Tool/Tool"),h=e("../../Mgr/GuideCore/GuideMgr"),p=e("../BattleMgr"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnUpgrade=null,t.btnGoShop=null,t.btnGoCopy=null,t}return i(t,e),t.prototype.onLoad=function(){this.panel=this.node.getChildByName("panel"),this.closeBtn=this.panel.getChildByName("closeBtn"),d.Tool.addClickEvent(this.closeBtn,this.close,this),d.Tool.addClickEvent(this.btnUpgrade,this.goUpgarde,this),d.Tool.addClickEvent(this.btnGoShop,this.goShop,this),d.Tool.addClickEvent(this.btnGoCopy,this.goCopy,this),s.EventMgr.on(a.EventType.Common_Current_IsInGuide,this.checkInGuide,this)},t.prototype.onEnable=function(){u.default.panelOpen_SmallToBig(this.panel),p.default.instance.playBattleMusic(p.MusicState.fail)},t.prototype.onDisable=function(){l.default.instance.currentMusicKey==a.SoundType.bgm_fail&&(l.default.instance.currentMusicKey="",p.default.instance.playBattleMusic(p.default.instance.nowMusicState))},t.prototype.close=function(){var e=this;u.default.panelClose_BigToSmall(this.panel,function(){e.node.destroy()})},t.prototype.checkInGuide=function(){h.default.instance.isInGuide()&&this.close()},t.prototype.goUpgarde=function(){this.close()},t.prototype.goShop=function(){s.EventMgr.event(a.EventType.Main_UI_Shop_JumpToSummon)},t.prototype.goBless=function(){c.default.instance.showToast("\u6682\u672a\u5f00\u653e")},t.prototype.goCopy=function(){this.close(),s.EventMgr.event(a.EventType.Main_UI_UpdateState,a.MainUIState.Copy)},r([y(cc.Node)],t.prototype,"btnUpgrade",void 0),r([y(cc.Node)],t.prototype,"btnGoShop",void 0),r([y(cc.Node)],t.prototype,"btnGoCopy",void 0),r([g],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/SoundMgr":"SoundMgr","../../../Platform/Platform":"Platform","../../../Res/ResPanelOpen":"ResPanelOpen","../../../Tool/Tool":"Tool","../../Mgr/GuideCore/GuideMgr":"GuideMgr","../BattleMgr":"BattleMgr"}],Battle_HeroRushMgr:[function(e,t,n){"use strict";cc._RF.push(t,"4672bbZS9ZNgpDkGwdbOMKM","Battle_HeroRushMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/ItemMgr"),u=e("../../Tool/Tool"),d=e("../Mgr/MgrRing"),h=e("./BattleMgr"),p=cc._decorator,f=p.ccclass,g=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectHero=[],t.deadCount=0,t.ringLevel=1,t.ringQuality=c.QualityEnum.Common,t.ringPropData=[],t.addAdk="0",t.addHp="0",t.addCD=0,t.addSkillDamage=0,t.addCritcalDamage=0,t.isInHeroRushCopy=!1,t.currPickProps={ring:[],hero:[]},t.awardMsg=[{count:2,msgStr:"\u6212\u6307\u7b49\u7ea7+2"},{count:5,msgStr:"\u6212\u6307\u54c1\u8d28+1"},{count:7,msgStr:"\u6212\u6307\u7b49\u7ea7+2"}],t.heroSelectNeed=[2,5,7],t.heroSelectAward=[{type:"ringLevel",value:2},{type:"ringQuality",value:1},{type:"ringLevel",value:2}],t.isRingProp=!1,t.levelbar=null,t.isOn=!1,t.getRingInfo=null,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this},t.prototype.init=function(e){this.isOn=!0,this.addAdk="0",this.addHp="0",this.addCD=0,this.addSkillDamage=0,this.addCritcalDamage=0,this.selectHero.length=0,this.deadCount=0,this.ringLevel=e,this.ringQuality=d.default.Instance.getMinQuality(),this.ringPropData.length=0,this.currPickProps={ring:[],hero:[]},this.isRingProp=!1},t.prototype.finishSelectHero=function(){for(var e=-1,t=0;t<this.heroSelectNeed.length;t++)this.selectHero.length>=this.heroSelectNeed[t]&&(e=t);if(e>=0){var n=this.heroSelectAward[e];switch(n.type){case"ringLevel":this.ringLevel+=n.value;break;case"ringQuality":this.ringQuality+=n.value}}l.EventMgr.event(a.EventType.Battle_HeroCopy_SelectHero),l.EventMgr.event(a.EventType.Battle_Copy_HeroRush_Select),this.isInHeroRushCopy=!0},t.prototype.getNowSelectHero=function(){for(var e,t=this.deadCount;t<this.selectHero.length;t++){e=this.selectHero[t];break}return e},t.prototype.getNowLiveHero=function(){for(var e=[],t=this.deadCount+1;t<this.selectHero.length;t++)e.push(this.selectHero[t]);return e},t.prototype.heroDead=function(){this.deadCount++,s.default.isTest&&console.log("\u73a9\u5bb6\u6b7b\u4ea1\u6b21\u6570",this.deadCount,this.selectHero),l.EventMgr.event(a.EventType.Battle_HeroRush_HeroDead),this.deadCount>=this.selectHero.length?this.heroRushLevelEnd():h.default.instance.heroRushDeadWait()},t.prototype.heroRushLevelEnd=function(e){if(void 0===e&&(e=!1),this.isOn){this.isOn=!1;var t=h.default.instance.nowHeroRushRound>n.maxRound;t||this.isRingProp&&!e&&(this.currPickProps.ring.pop(),this.ringPropData.pop());var o=d.default.Instance.createRing(this.ringLevel,this.ringQuality,u.Tool.cloneArray_Obj(this.ringPropData));s.default.isTest&&console.log("\u83b7\u5f97\u6212\u6307",o),this.getRingInfo=o;var i=cc.find("Canvas").getChildByName("panel2").getChildByName("Copy_HeroRush_QuitPanel");i&&i.isValid&&i.destroy(),t?h.default.instance.heroRushSuccessEnd():h.default.instance.heroRushFailEnd(e?3:2),this.isInHeroRushCopy=!1}},t.prototype.getHeroRushAddAtk=function(){return this.isInHeroRushCopy?this.addAdk:"0"},t.prototype.getHeroRushAddHp=function(){return this.isInHeroRushCopy?this.addHp:"0"},t.prototype.getHeroRushAddCD=function(){return this.isInHeroRushCopy?this.addCD:0},t.instance=null,t.maxRound=15,n=r([f],t)}(cc.Component));n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Tool/Tool":"Tool","../Mgr/MgrRing":"MgrRing","./BattleMgr":"BattleMgr"}],Battle_HpBar:[function(e,t,n){"use strict";cc._RF.push(t,"55cc8F3eF5DH5iZ/sZbrm5S","Battle_HpBar");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.followNode=null,t.offset=cc.v2(0,0),t}return i(t,e),t.prototype.followUpdate=function(){if(!this.followNode||!this.followNode.isValid)return this.node.opacity=0,void(this.followNode=null);if(0==this.followNode.opacity||0==this.node.opacity)return this.node.opacity=0,void(this.followNode=null);var e=this.followNode.getPosition();e=e.add(this.offset),this.node.setPosition(e)},r([s],t)}(cc.Component));n.default=l,cc._RF.pop()},{}],Battle_RelicMgr:[function(e,t,n){"use strict";cc._RF.push(t,"0c6fePVu2VFiJqDuFLbMaWV","Battle_RelicMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s,l=e("../../../plugin/NumberPlus"),c=e("../../Config/EnumTypes"),u=e("../../Config/GameData"),d=e("../../Mgr/EventMgr"),h=e("../../Mgr/StorageMgr"),p=e("../Mgr/PartnerMgr"),f=e("../Mgr/Relic/RelicData"),g=e("./BattleMgr"),y=e("./Hero"),m=e("./Partner"),v=cc._decorator,_=v.ccclass;v.property,function(e){e[e.chicken=1]="chicken",e[e.mice=2]="mice",e[e.pig=3]="pig",e[e.cow=4]="cow",e[e.snake=5]="snake",e[e.dog=6]="dog"}(a||(a={})),function(e){e[e.Stone_1=101]="Stone_1",e[e.Stone_2=102]="Stone_2",e[e.Stone_3=103]="Stone_3",e[e.Stone_4=104]="Stone_4",e[e.Statue_1=201]="Statue_1",e[e.Statue_2=202]="Statue_2",e[e.Statue_3=203]="Statue_3",e[e.Statue_4=204]="Statue_4",e[e.Bottle_1=301]="Bottle_1",e[e.Bottle_2=302]="Bottle_2",e[e.Bottle_3=303]="Bottle_3",e[e.Bottle_4=304]="Bottle_4",e[e.Ring_1=401]="Ring_1",e[e.Ring_2=402]="Ring_2",e[e.Ring_3=403]="Ring_3",e[e.Ring_4=404]="Ring_4",e[e.Conch_1=501]="Conch_1",e[e.Conch_2=502]="Conch_2",e[e.Conch_3=503]="Conch_3",e[e.Conch_4=504]="Conch_4",e[e.Crystal_1=601]="Crystal_1",e[e.Crystal_2=602]="Crystal_2",e[e.Crystal_3=603]="Crystal_3",e[e.Crystal_4=604]="Crystal_4",e[e.Book_1=701]="Book_1",e[e.Book_2=702]="Book_2",e[e.Book_3=703]="Book_3",e[e.Book_4=704]="Book_4"}(s||(s={}));var b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.equipedRelics=[],t.tagPartnerCount=new Map,t.tagPartnerAttackCount=new Map,t.battleTime=0,t.relic_effect_1_reduce=0,t.relic_effect_2_add=0,t.relic_effect_3_time=0,t.relic_effect_3_isUse=!1,t.relic_effect_4_time=0,t.relic_effect_4_isUse=!1,t.relic_effect_5_count=0,t.relic_effect_6_count=0,t.relic_effect_6_isUse=!1,t.relic_effect_7_add=0,t.relic_effect_9_add=0,t.relic_effect_10_count=0,t.relic_effect_11_add=0,t.relic_effect_12_value=0,t.relic_effect_13_add=0,t.relic_effect_14_add=0,t.relic_effect_15_add=0,t.relic_effect_15_isUse=!1,t.relic_effect_16_reduce=0,t.relic_effect_17_add=0,t.relic_effect_19_count=0,t.relic_effect_19_isUse=!1,t.relic_effect_20_add=0,t.relic_effect_20_isUse=!1,t.relic_effect_21_add=0,t.relic_effect_22_add=0,t.relic_effect_23_add=0,t.relic_effect_24_reduce=0,t.relic_effect_25_isUse=!1,t.relic_effect_26_count=0,t.relic_effect_26_isUse=!1,t.relic_effect_27_isUse=!1,t.relic_effect_28_add=0,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.Instance=this;for(var e=1;e<=u.default.partnerTagMax;e++)this.tagPartnerAttackCount.set(e,0)},t.prototype.start=function(){var e=this;this.scheduleOnce(function(){e.updatePartnerTagGet(),e.relickEquidUpdate(),d.EventMgr.on(c.EventType.Main_UI_Partner_PartnerEquipChange,e.updatePartnerTagGet,e),d.EventMgr.on(c.EventType.Battle_Partner_Attack,e.updatePartnerAttackCount,e),d.EventMgr.on(c.EventType.Main_UI_Relic_Update,e.relickEquidUpdate,e)})},t.prototype.relickEquidUpdate=function(){this.equipedRelics.length=0;var e=h.default.instance.storageData.userRelicData.equippedRelics;if(e)for(var t in e)this.equipedRelics.push(e[t]);this.effectUpdate()},t.prototype.lateUpdate=function(e){this.battleTimeUpdate(e)},t.prototype.updatePartnerTagGet=function(){for(var e=p.default.Instance.getPartnerSlotDomains(),t=1;t<=6;t++)this.tagPartnerCount.set(t,0);for(t=0;t<e.length;t++)if(e[t].getData()){var n=this.tagPartnerCount.get(e[t].getData().getTagInfo().id);this.tagPartnerCount.set(e[t].getData().getTagInfo().id,n+1)}this.effectUpdate()},t.prototype.updatePartnerAttackCount=function(e){this.tagPartnerAttackCount.set(e,this.tagPartnerAttackCount.get(e)+1),this.relic_effect_10_partnerAttackCount(),this.relic_effect_16_partnerAttack()},t.prototype.skillUse=function(){this.relic_effect_8_SkillDo(),this.relic_effect_12_skillDo()},t.prototype.battleInit=function(){this.battleTime=0,this.effectUpdate(),this.relic_effect_18_battleInit()},t.prototype.battleTimeUpdate=function(e){this.battleTime+=e},t.prototype.heroBeHit=function(){this.relic_effect_6_BeHit()},t.prototype.critOver100Cal=function(e){return e},t.prototype.hpCal=function(e){return e},t.prototype.getEffectData=function(){f.default.Instance.getPropsMap().forEach(function(e,t){switch(t){case c.PROP_TYPE.ATK:u.default.relicAddAtk=e;break;case c.PROP_TYPE.HP:u.default.relicAddHp=e}d.EventMgr.event(c.EventType.Battle_Hero_Prop_Update)}),this.relic_effect_1_reduce=f.default.Instance.getData(103)?parseFloat(f.default.Instance.getData(103).effectValue)/100:0,this.relic_effect_2_add=f.default.Instance.getData(101)?parseFloat(f.default.Instance.getData(101).effectValue)/100:0,this.relic_effect_3_time=f.default.Instance.getData(102)?parseFloat(f.default.Instance.getData(102).effectValue):0,this.relic_effect_4_time=f.default.Instance.getData(104)?parseFloat(f.default.Instance.getData(104).effectValue):0,this.relic_effect_5_count=f.default.Instance.getData(201)?parseInt(f.default.Instance.getData(201).effectValue):0,this.relic_effect_6_count=f.default.Instance.getData(202)?parseInt(f.default.Instance.getData(202).effectValue):0,this.relic_effect_7_add=f.default.Instance.getData(203)?parseFloat(f.default.Instance.getData(203).effectValue):0,this.relic_effect_9_add=f.default.Instance.getData(301)?parseFloat(f.default.Instance.getData(301).effectValue):0,this.relic_effect_10_count=f.default.Instance.getData(302)?parseInt(f.default.Instance.getData(302).effectValue):0,this.relic_effect_11_add=f.default.Instance.getData(303)?parseFloat(f.default.Instance.getData(303).effectValue):0,this.relic_effect_12_value=f.default.Instance.getData(304)?parseFloat(f.default.Instance.getData(304).effectValue)/100:0,this.relic_effect_13_add=f.default.Instance.getData(401)?parseFloat(f.default.Instance.getData(401).effectValue):0,this.relic_effect_14_add=f.default.Instance.getData(402)?parseFloat(f.default.Instance.getData(402).effectValue):0,this.relic_effect_15_add=f.default.Instance.getData(403)?parseFloat(f.default.Instance.getData(403).effectValue):0,this.relic_effect_16_reduce=f.default.Instance.getData(404)?parseFloat(f.default.Instance.getData(404).effectValue):0,this.relic_effect_17_add=f.default.Instance.getData(501)?parseFloat(f.default.Instance.getData(501).effectValue):0,this.relic_effect_19_count=f.default.Instance.getData(503)?parseInt(f.default.Instance.getData(503).effectValue):0,this.relic_effect_20_add=f.default.Instance.getData(504)?parseFloat(f.default.Instance.getData(504).effectValue)/100:0,this.relic_effect_21_add=f.default.Instance.getData(601)?parseFloat(f.default.Instance.getData(601).effectValue):0,this.relic_effect_22_add=f.default.Instance.getData(602)?parseFloat(f.default.Instance.getData(602).effectValue):0,this.relic_effect_23_add=f.default.Instance.getData(603)?parseFloat(f.default.Instance.getData(603).effectValue):0,this.relic_effect_24_reduce=f.default.Instance.getData(604)?parseFloat(f.default.Instance.getData(604).effectValue)/100:0,this.relic_effect_26_count=f.default.Instance.getData(702)?parseInt(f.default.Instance.getData(701).effectValue):0,this.relic_effect_28_add=f.default.Instance.getData(704)?parseFloat(f.default.Instance.getData(704).effectValue):0},t.prototype.effectUpdate=function(){this.getEffectData(),this.relic_effect_1(),this.relic_effect_2(),this.relic_effect_3(),this.relic_effect_4(),this.relic_effect_5(),this.relic_effect_6(),this.relic_effect_7(),this.relic_effect_8(),this.relic_effect_9(),this.relic_effect_10(),this.relic_effect_11(),this.relic_effect_12(),this.relic_effect_13(),this.relic_effect_14(),this.relic_effect_15(),this.relic_effect_16(),this.relic_effect_17(),this.relic_effect_18(),this.relic_effect_19(),this.relic_effect_20(),this.relic_effect_21(),this.relic_effect_22(),this.relic_effect_23(),this.relic_effect_24(),this.relic_effect_25(),this.relic_effect_26(),this.relic_effect_27(),this.relic_effect_28(),d.EventMgr.event(c.EventType.Battle_Hero_Prop_Update)},t.prototype.relic_effect_1=function(){-1!=this.equipedRelics.indexOf(s.Stone_3)&&this.tagPartnerCount.get(a.snake)>0?u.default.relicEnemySpeedReduce=this.relic_effect_1_reduce:u.default.relicEnemySpeedReduce=0},t.prototype.relic_effect_2=function(){var e,t=null===(e=g.default.instance.nowHero)||void 0===e?void 0:e.getComponent(y.default);t&&(t.is_skill_21102_relicOn=-1!=this.equipedRelics.indexOf(s.Stone_1))},t.prototype.relic_effect_3=function(){this.relic_effect_3_isUse=-1!=this.equipedRelics.indexOf(s.Stone_2)&&this.tagPartnerCount.get(a.chicken)>0},t.prototype.relic_effect_4=function(){this.relic_effect_4_isUse=-1!=this.equipedRelics.indexOf(s.Stone_4)},t.prototype.relic_effect_5=function(){var e,t=null===(e=g.default.instance.nowHero)||void 0===e?void 0:e.getComponent(y.default);t&&(t.is_skill_21103_relicOn=-1!=this.equipedRelics.indexOf(s.Statue_1))},t.prototype.relic_effect_6=function(){this.relic_effect_6_isUse=-1!=this.equipedRelics.indexOf(s.Statue_2)},t.prototype.relic_effect_6_BeHit=function(){var e;if(this.relic_effect_6_isUse&&this.relic_effect_6_count>0){this.relic_effect_6_count--;var t=null===(e=g.default.instance.nowHero)||void 0===e?void 0:e.getComponent(y.default);if(!t)return;t.skillCDReset()}},t.prototype.relic_effect_7=function(){},t.prototype.relic_effect_7_Check=function(){return-1!=this.equipedRelics.indexOf(s.Statue_3)?this.relic_effect_7_add:0},t.prototype.relic_effect_8=function(){},t.prototype.relic_effect_8_SkillDo=function(){var e;if(-1!=this.equipedRelics.indexOf(s.Statue_4)){var t=null===(e=g.default.instance.nowHero)||void 0===e?void 0:e.getComponent(y.default);t&&t.skill_relic3_do()}},t.prototype.relic_effect_9=function(){},t.prototype.relic_effect_9_Check=function(){return-1!=this.equipedRelics.indexOf(s.Bottle_1)?this.relic_effect_9_add:0},t.prototype.relic_effect_10=function(){},t.prototype.relic_effect_10_partnerAttackCount=function(){var e;if(-1!=this.equipedRelics.indexOf(s.Bottle_2)&&0!=this.relic_effect_10_count&&0!=this.tagPartnerAttackCount.get(a.chicken)&&this.tagPartnerAttackCount.get(a.chicken)%this.relic_effect_10_count==0){var t=null===(e=g.default.instance.nowHero)||void 0===e?void 0:e.getComponent(y.default);t&&t.skill_relic4_do()}},t.prototype.relic_effect_11=function(){u.default.relicAddPartnerAtk=-1!=this.equipedRelics.indexOf(s.Bottle_3)?this.relic_effect_11_add:0},t.prototype.relic_effect_12=function(){},t.prototype.relic_effect_12_skillDo=function(){if(-1!=this.equipedRelics.indexOf(s.Bottle_4))for(var e=g.default.instance.nowPartner,t=0;t<e.length;t++){var n=e[t].getComponent(m.default);n&&n.tag==a.dog&&n.skill_1()}},t.prototype.relic_effect_13=function(){for(var e,t=-1!=this.equipedRelics.indexOf(s.Ring_1)?1.5:1,n=0;n<g.default.instance.nowPartner.length;n++){var o=null===(e=g.default.instance.nowPartner[n])||void 0===e?void 0:e.getComponent(m.default);o&&o.tag==a.chicken&&(o.node.getChildByName("anim").scale=t)}},t.prototype.relic_effect_13_Check=function(){return-1!=this.equipedRelics.indexOf(s.Ring_1)?this.relic_effect_13_add:0},t.prototype.relic_effect_14=function(){},t.prototype.relic_effect_14_Check=function(){return-1!=this.equipedRelics.indexOf(s.Ring_2)&&this.battleTime<8?this.relic_effect_14_add:0},t.prototype.relic_effect_15=function(){this.relic_effect_15_isUse=-1!=this.equipedRelics.indexOf(s.Ring_3)},t.prototype.relic_effect_16=function(){},t.prototype.relic_effect_16_partnerAttack=function(){var e;if(-1!=this.equipedRelics.indexOf(s.Ring_4)){var t=null===(e=g.default.instance.nowHero)||void 0===e?void 0:e.getComponent(y.default);t&&t.skillCDReduce_random(this.relic_effect_16_reduce)}},t.prototype.relic_effect_17=function(){var e,t=null===(e=g.default.instance.nowHero)||void 0===e?void 0:e.getComponent(y.default);t&&(t.node.getChildByName("anim").setScale(-1!=this.equipedRelics.indexOf(s.Conch_1)?1.5:1),u.default.relic17AddHp=l.default.decode(-1!=this.equipedRelics.indexOf(s.Conch_1)?this.relic_effect_17_add:0))},t.prototype.relic_effect_18=function(){},t.prototype.relic_effect_18_battleInit=function(){var e;if(-1!=this.equipedRelics.indexOf(s.Conch_2)){var t=null===(e=g.default.instance.nowHero)||void 0===e?void 0:e.getComponent(y.default);t&&t.skill_relic5_do()}},t.prototype.relic_effect_19=function(){this.relic_effect_19_isUse=-1!=this.equipedRelics.indexOf(s.Conch_3)},t.prototype.relic_effect_20=function(){this.relic_effect_20_isUse=-1!=this.equipedRelics.indexOf(s.Conch_4)},t.prototype.relic_effect_21=function(){u.default.relic21AddAtk=l.default.decode(-1!=this.equipedRelics.indexOf(s.Crystal_1)?this.relic_effect_21_add:0)},t.prototype.relic_effect_22=function(){var e=-1!=this.equipedRelics.indexOf(s.Crystal_2)&&this.tagPartnerCount.get(a.chicken)>=4;u.default.relic22AddAtk=l.default.decode(e?this.relic_effect_22_add:0)},t.prototype.relic_effect_23=function(){u.default.relic23AddHp=l.default.decode(-1!=this.equipedRelics.indexOf(s.Crystal_3)?this.relic_effect_23_add:0)},t.prototype.relic_effect_24=function(){u.default.relic24ReduceDamage=-1!=this.equipedRelics.indexOf(s.Crystal_4)?this.relic_effect_24_reduce:0},t.prototype.relic_effect_25=function(){this.relic_effect_25_isUse=-1!=this.equipedRelics.indexOf(s.Book_1)},t.prototype.relic_effect_26=function(){this.relic_effect_26_isUse=-1!=this.equipedRelics.indexOf(s.Book_2)},t.prototype.relic_effect_27=function(){this.relic_effect_27_isUse=-1!=this.equipedRelics.indexOf(s.Book_3)},t.prototype.relic_effect_28=function(){u.default.relic28AddAtk=l.default.decode(-1!=this.equipedRelics.indexOf(s.Book_4)?this.relic_effect_28_add:0)},t.Instance=null,n=r([_],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../Mgr/PartnerMgr":"PartnerMgr","../Mgr/Relic/RelicData":"RelicData","./BattleMgr":"BattleMgr","./Hero":"Hero","./Partner":"Partner"}],BlessMgr:[function(e,t,n){"use strict";cc._RF.push(t,"b2b71L0f95KubjPujIOQAsm","BlessMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Config/GameData"),a=e("../../Mgr/BaseMgr"),s=e("../../Mgr/ItemMgr"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blessMap=new Map,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.apply(this,t))return!1;for(var o=[],i=r.default.getJsonObject("blessLevel"),a=s.QualityEnum.Common;a<=s.QualityEnum.Exotic;a++){var l=s.QualityToKey[a],c=i[l];if(c){for(var u in o=[],c){var d=c[u];o.push(d)}this.blessMap.set(a,o)}}},t.prototype.getBlessLevelInfo=function(e,t){return this.blessMap.get(e).find(function(e){return e.level==t})},t.limitTime=1200,t}(a.default);n.default=l,cc._RF.pop()},{"../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/ItemMgr":"ItemMgr"}],Btn_BackMain:[function(e,t,n){"use strict";cc._RF.push(t,"7dc38uez9pNIpbUVNj/xuEx","Btn_BackMain");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/BundleMgr"),s=e("../../Tool/Tool"),l=cc._decorator,c=l.ccclass,u=(l.property,l.menu),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){s.Tool.addClickEvent(this.node,this.click,this)},t.prototype.onDisable=function(){this.node.targetOff(this)},t.prototype.click=function(){a.default.goMain()},r([c,u("Btn/Btn_BackMain")],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Mgr/BundleMgr":"BundleMgr","../../Tool/Tool":"Tool"}],Btn_Setting:[function(e,t,n){"use strict";cc._RF.push(t,"d93daSfER1Dprm825Oy1+n2","Btn_Setting");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Tool/Tool"),s=e("../ResPanelOpen"),l=cc._decorator,c=l.ccclass,u=(l.property,l.menu),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){a.Tool.addClickEvent(this.node,this.click,this)},t.prototype.onDisable=function(){this.node.targetOff(this)},t.prototype.click=function(){s.default.show_Common_Pause_Panel(cc.find("Canvas"))},r([c,u("Btn/Btn_Setting")],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Tool/Tool":"Tool","../ResPanelOpen":"ResPanelOpen"}],Bullet_Anim:[function(e,t,n){"use strict";cc._RF.push(t,"8d485N7f8FFZ7SgXVdbiXfJ","Bullet_Anim");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s,l=e("../../../Config/EnumTypes"),c=e("../../../Mgr/BattleData"),u=e("../../../Mgr/EventMgr"),d=e("../../../Mgr/SoundMgr"),h=e("../../../Tool/Tool"),p=e("../BattleMgr"),f=e("../Monster"),g=cc._decorator,y=g.ccclass,m=g.property;(function(e){e[e.line=1]="line",e[e.jump=2]="jump"})(a||(a={})),function(e){e[e.target=0]="target",e[e.bomb=1]="bomb"}(s||(s={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hitType=s.target,t.needCalAngle=!1,t.needOffset=!0,t.needWayRotate=!1,t.hitAnimName="",t.idleAnimName="",t.isShake=!1,t.damage=0,t.target=null,t.targetComp=null,t.speed=600,t.moveType=a.line,t.rangeSqr=0,t.hitEffect="normal_attack",t.fireSound="attack",t.hitSound="",t.isCirtical=!1,t.isThrough=!1,t.hasHurtMonsterId=[],t.isShoot=!1,t.way=null,t.maxDistance=0,t.distance=0,t.upWay=new cc.Vec2(0,1),t.height=0,t.hitPos=null,t.isThroughDo=!1,t.moveSpeed=0,t}return i(t,e),t.prototype.onLoad=function(){var e;e=-1!=this.node.name.indexOf("partner_bullet")?c.default.instance.getBulletInfo("partner_bullet_1"):c.default.instance.getBulletInfo(this.node.name),this.speed=e.speed,this.moveType=e.track,this.hitEffect=e.bomb,this.fireSound=e.fireSound,this.rangeSqr=Math.pow(2*e.range,2),u.EventMgr.on(l.EventType.Battle_Scene_MoveSpeed_Update,this.moveUpdate,this),this.anim=this.node.getComponentInChildren(sp.Skeleton)},t.prototype.shoot=function(e,t,n){var o;if(this.damage=t,this.target=e,this.isCirtical=n,this.anim.setAnimation(0,this.idleAnimName,!0),e&&e.isValid){this.targetComp=this.target.getComponent(f.default);var i=this.target.getPosition();this.needOffset&&(i.y+=50),this.way=i.sub(this.node.getPosition()),this.distance=this.way.mag();var r=Math.abs(this.node.y-i.y),l=Math.sqrt(Math.pow(this.distance,2)-Math.pow(r,2)),c=this.targetComp.speed,u=this.speed,p=Math.pow(c,2)-Math.pow(u,2),g=-2*c,y=Math.pow(r,2)+Math.pow(l,2),m=(-g-Math.sqrt(Math.pow(g,2)-4*p*y))/(2*p);if(o=new cc.Vec2(this.targetComp.getNextPosX(m),i.y),this.way=o.sub(this.node.getPosition()),this.distance=this.way.mag(),this.maxDistance=this.distance,this.way.normalizeSelf(),this.needWayRotate){var v=-h.Tool.getAngle2DWay(this.way,new cc.Vec2(1,0));this.node.children[0].angle=v}this.hitType==s.target&&this.targetComp.preHit(t)}else o=new cc.Vec2(375,100),this.way=o.sub(this.node.getPosition()),this.distance=this.way.mag(),this.maxDistance=this.distance,this.way.normalizeSelf(),this.node.children[0],this.needWayRotate&&(v=-h.Tool.getAngle2DWay(this.way,new cc.Vec2(1,0)),this.node.children[0].angle=v);this.moveType==a.jump&&(this.height=h.Tool.randomNumber(50,100)),this.hitPos=o,""!=this.fireSound&&d.default.instance.PlaySound(this.fireSound),this.isShoot=!0,this.isThrough=!1},t.prototype.shootWay=function(e,t,n){this.damage=t,this.way=e,this.isCirtical=n,d.default.instance.PlaySound(this.fireSound),this.isShoot=!0,this.isThrough=!0,this.isThroughDo=!1,this.isShoot=!0},t.prototype.update=function(e){var t,n=this;if(!p.default.isPause&&this.isShoot){if(this.isThrough){var o=e*this.speed,i=this.way.mul(o);this.node.setPosition(this.node.getPosition().add(i)),this.node.x>200&&this.throughDo(),this.node.x>375&&(this.isShoot=!1,this.node.opacity=0)}else{if(o=e*this.speed,i=this.way.mul(o),this.node.setPosition(this.node.getPosition().add(i)),this.distance-=o,this.distance<=0){if(this.distance=0,this.node.setPosition(this.hitPos),this.hitType==s.target)null===(t=this.targetComp)||void 0===t||t.hit(this.damage,this.isCirtical),this.anim.setAnimation(0,this.hitAnimName,!1);else if(this.hitType==s.bomb){for(var r=p.default.instance.getAliveMonster(),c=0;c<r.length;c++){var h=r[c],g=h.getPosition().sub(this.node.getPosition());if((g=cc.v2(g.x,g.y)).magSqr()<=this.rangeSqr){var y=h.getComponent(f.default);2==y.state||y.isAlreadyDead||y.hit(this.damage,this.isCirtical)}}this.anim.setAnimation(0,this.hitAnimName,!1)}this.isShoot=!1,this.scheduleOnce(function(){n.recycle()},this.anim.findAnimation(this.hitAnimName).duration),""!=this.hitSound&&(d.default.instance.PlaySound(this.hitSound),this.hitSound=""),this.isShake&&u.EventMgr.event(l.EventType.Battle_World_Shake_Mini)}var m=this.node.children[0];if(this.anim.animation==this.hitAnimName)m.angle=0;else if(this.moveType==a.jump){var v=this.maxDistance/2,_=this.height*(1-Math.pow((this.distance-v)/v,2)),b=_-m.y;if(m.y=_,this.needCalAngle){var S=i;S.y+=b,S.normalizeSelf();var M=S.signAngle(this.upWay);m.angle=180*-M/Math.PI+90}}}this.node.x-=e*p.default.battleSpeed*this.moveSpeed}},t.prototype.recycle=function(){cc.tween(this.node).to(.1,{opacity:0}).start()},t.prototype.throughDo=function(){if(!this.isThroughDo){this.isThroughDo=!0;for(var e,t=p.default.instance.getAliveMonster(),n=0;n<t.length;n++)e=t[n].getComponent(f.default),p.default.instance.bornEffect(this.hitEffect,t[n].getPosition()),e.hit(this.damage,this.isCirtical)}},t.prototype.moveUpdate=function(e){this.moveSpeed=e},r([m({type:cc.Enum(s)})],t.prototype,"hitType",void 0),r([m(cc.Boolean)],t.prototype,"needCalAngle",void 0),r([m(cc.Boolean)],t.prototype,"needOffset",void 0),r([m(cc.Boolean)],t.prototype,"needWayRotate",void 0),r([m(cc.String)],t.prototype,"hitAnimName",void 0),r([m(cc.String)],t.prototype,"idleAnimName",void 0),r([m(cc.Boolean)],t.prototype,"isShake",void 0),r([y],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/BattleData":"BattleData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/SoundMgr":"SoundMgr","../../../Tool/Tool":"Tool","../BattleMgr":"BattleMgr","../Monster":"Monster"}],Bullet:[function(e,t,n){"use strict";cc._RF.push(t,"23c02y449FKg7eQDeZWdGjl","Bullet");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s,l=e("../../../Config/EnumTypes"),c=e("../../../Mgr/BattleData"),u=e("../../../Mgr/EventMgr"),d=e("../../../Mgr/SoundMgr"),h=e("../../../Tool/Tool"),p=e("../BattleMgr"),f=e("../Monster"),g=cc._decorator,y=g.ccclass,m=g.property;(function(e){e[e.line=1]="line",e[e.jump=2]="jump"})(a||(a={})),function(e){e[e.target=0]="target",e[e.bomb=1]="bomb"}(s||(s={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hitType=s.target,t.needCalAngle=!1,t.needOffset=!0,t.needWayRotate=!1,t.damage=0,t.target=null,t.targetComp=null,t.speed=600,t.moveType=a.line,t.rangeSqr=0,t.hitEffect="normal_attack",t.fireSound="attack",t.hitSound="",t.isCirtical=!1,t.isThrough=!1,t.hasHurtMonsterId=[],t.isShoot=!1,t.way=null,t.maxDistance=0,t.distance=0,t.upWay=new cc.Vec2(0,1),t.height=0,t.hitPos=null,t.isThroughDo=!1,t.moveSpeed=0,t}return i(t,e),t.prototype.onLoad=function(){var e;e=-1!=this.node.name.indexOf("partner_bullet")?c.default.instance.getBulletInfo("partner_bullet_1"):c.default.instance.getBulletInfo(this.node.name),this.speed=e.speed,this.moveType=e.track,this.hitEffect=e.bomb,this.fireSound=e.fireSound,this.rangeSqr=Math.pow(2*e.range,2),u.EventMgr.on(l.EventType.Battle_Scene_MoveSpeed_Update,this.moveUpdate,this)},t.prototype.shoot=function(e,t,n){var o;if(this.damage=t,this.target=e,this.isCirtical=n,e&&e.isValid){this.targetComp=this.target.getComponent(f.default);var i=this.target.getPosition();this.needOffset&&(i.y+=50),this.way=i.sub(this.node.getPosition()),this.distance=this.way.mag();var r=Math.abs(this.node.y-i.y),l=Math.sqrt(Math.pow(this.distance,2)-Math.pow(r,2)),c=this.targetComp.speed,u=this.speed,p=Math.pow(c,2)-Math.pow(u,2),g=-2*c,y=Math.pow(r,2)+Math.pow(l,2),m=(-g-Math.sqrt(Math.pow(g,2)-4*p*y))/(2*p);if(o=new cc.Vec2(this.targetComp.getNextPosX(m),i.y),this.way=o.sub(this.node.getPosition()),this.distance=this.way.mag(),this.maxDistance=this.distance,this.way.normalizeSelf(),this.needWayRotate){var v=-h.Tool.getAngle2DWay(this.way,new cc.Vec2(1,0));this.node.children[0].angle=v}this.hitType==s.target&&this.targetComp.preHit(t)}else o=new cc.Vec2(375,100),this.way=o.sub(this.node.getPosition()),this.distance=this.way.mag(),this.maxDistance=this.distance,this.way.normalizeSelf();this.moveType==a.jump&&(this.height=h.Tool.randomNumber(50,100)),this.hitPos=o,""!=this.fireSound&&d.default.instance.PlaySound(this.fireSound),this.isShoot=!0,this.isThrough=!1},t.prototype.shootWay=function(e,t,n){this.damage=t,this.way=e,this.isCirtical=n,d.default.instance.PlaySound(this.fireSound),this.isShoot=!0,this.isThrough=!0,this.isThroughDo=!1,this.isShoot=!0},t.prototype.update=function(e){var t;if(!p.default.isPause&&this.isShoot){if(this.isThrough){var n=e*this.speed,o=this.way.mul(n);this.node.setPosition(this.node.getPosition().add(o)),this.node.x>200&&this.throughDo(),this.node.x>375&&(this.isShoot=!1,this.node.opacity=0)}else{if(n=e*this.speed,o=this.way.mul(n),this.node.setPosition(this.node.getPosition().add(o)),this.distance-=n,this.distance<=0){if(this.distance=0,this.node.setPosition(this.hitPos),this.hitType==s.target)null===(t=this.targetComp)||void 0===t||t.hit(this.damage,this.isCirtical),(g=this.hitPos).x+=h.Tool.randomNumber(-25,25),g.y+=h.Tool.randomNumber(-25,25),p.default.instance.bornEffect(this.hitEffect,g);else if(this.hitType==s.bomb){for(var i=p.default.instance.getAliveMonster(),r=0;r<i.length;r++){var l=i[r],c=l.getPosition().sub(this.node.getPosition());if((c=cc.v2(c.x,c.y)).magSqr()<=this.rangeSqr){var u=l.getComponent(f.default);2==u.state||u.isAlreadyDead||u.hit(this.damage,this.isCirtical)}}var g=this.node.getPosition();p.default.instance.bornEffect(this.hitEffect,g)}this.recycle(),""!=this.hitSound&&(d.default.instance.PlaySound(this.hitSound),this.hitSound="")}if(this.moveType==a.jump){var y=this.node.children[0],m=this.maxDistance/2,v=this.height*(1-Math.pow((this.distance-m)/m,2)),_=v-y.y;if(y.y=v,this.needCalAngle){var b=o;b.y+=_,b.normalizeSelf();var S=b.signAngle(this.upWay);y.angle=180*-S/Math.PI+90}}}this.node.x-=e*p.default.battleSpeed*this.moveSpeed}},t.prototype.recycle=function(){this.isShoot=!1,this.node.opacity=0},t.prototype.throughDo=function(){if(!this.isThroughDo){this.isThroughDo=!0;for(var e,t=p.default.instance.getAliveMonster(),n=0;n<t.length;n++)e=t[n].getComponent(f.default),p.default.instance.bornEffect(this.hitEffect,t[n].getPosition()),e.hit(this.damage,this.isCirtical)}},t.prototype.moveUpdate=function(e){this.moveSpeed=e},r([m({type:cc.Enum(s)})],t.prototype,"hitType",void 0),r([m(cc.Boolean)],t.prototype,"needCalAngle",void 0),r([m(cc.Boolean)],t.prototype,"needOffset",void 0),r([m(cc.Boolean)],t.prototype,"needWayRotate",void 0),r([y],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/BattleData":"BattleData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/SoundMgr":"SoundMgr","../../../Tool/Tool":"Tool","../BattleMgr":"BattleMgr","../Monster":"Monster"}],BundleData:[function(e,t,n){"use strict";cc._RF.push(t,"92118vXf8ZAeatx85Py2kzS","BundleData"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Platform/Platform"),i=e("../EnumTypes"),r=e("../GameData"),a=function(){function e(e,t,n){this.bundle=null,this.isLoaded=!1,this.loadAxis=0,this.url="",this.bundleName="",this.isRemote=!1,this.isDownload=!1,this.downloadAxis=.5,this.url=t,this.bundleName=e,this.isRemote=n,this.isLoaded=!1,this.loadAxis=0,e==i.BundleName.Loading&&(this.isLoaded=!0,this.loadAxis=1)}return e.prototype.loadBundle=function(e){var t=this;if(this.isLoaded)return console.warn("\u8d44\u6e90\u5305"+this.bundleName+"\u5df2\u52a0\u8f7d\u5b8c\u6210\uff0c\u65e0\u9700\u91cd\u590d\u52a0\u8f7d"),void(e&&e());var n=(new Date).getTime();r.default.isTest&&console.log("\u5f00\u59cb\u52a0\u8f7d"+this.bundleName+"\u8d44\u6e90\u5305");var i=function(){cc.assetManager.loadBundle(t.url,function(o,i){o?cc.error("\u52a0\u8f7d"+t.bundleName+"\u8d44\u6e90\u5305\u5931\u8d25"):(t.bundle=i,t.loadAxis=1,t.isLoaded=!0,r.default.isTest&&console.log("\u52a0\u8f7d"+t.bundleName+"\u8d44\u6e90\u5305\u6210\u529f,\u8017\u65f6:"+((new Date).getTime()-n)+"ms"),e&&e())})};this.isRemote?i():this.isDownload?i():o.default.instance.loadSubPackage(this.url,function(){t.loadAxis=t.downloadAxis,t.isDownload=!0,i()},function(e){t.loadAxis=.01*e*t.downloadAxis})},e.prototype.preloadBundle=function(){var e=this;this.isRemote||this.isDownload||o.default.instance.loadSubPackage(this.url,function(){e.loadAxis=e.downloadAxis,e.isDownload=!0},function(t){e.loadAxis=.01*t*e.downloadAxis})},e.prototype.releaseBundle=function(){this.isLoaded&&(this.bundle.releaseAll(),this.bundle=null,this.isLoaded=!1,this.loadAxis=0,this.isDownload&&(this.loadAxis=this.downloadAxis))},e.prototype.loadRes=function(e,t,n){var o=this;if(this.bundleName!=i.BundleName.Loading||this.bundle)if(this.isLoaded)this.bundle.load(e,t,n);else{var r=this;this.loadBundle(function(){r.bundle.load(e,t,n)})}else cc.assetManager.loadBundle(i.BundleName.Loading,function(i,r){i&&console.error("\u52a0\u8f7d\u5931\u8d25"),o.bundle=r,o.loadRes(e,t,n)})},e}();n.default=a,cc._RF.pop()},{"../../Platform/Platform":"Platform","../EnumTypes":"EnumTypes","../GameData":"GameData"}],BundleMgr:[function(e,t,n){"use strict";cc._RF.push(t,"de2bfusvwpN87pJDk57khQn","BundleMgr");var o=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../Comp/GameLoading"),r=e("../Config/DataClass/BundleData"),a=e("../Config/EnumTypes"),s=e("../Config/GameData"),l=e("./SoundMgr"),c=cc._decorator,u=c.ccclass,d=(c.property,function(){function e(){}var t;return t=e,e.loadOtherGameBundle_download=function(){for(var e=0;e<this.bundleDatas.length;e++)this.bundleDatas[e].preloadBundle()},e.releaseOtherGameBundle=function(){},e.loadResBundle=function(e){var t=this;this.getBundleData(a.BundleName.Res).loadBundle(function(){l.default.instance.PlayMusic(a.SoundType.bgm_login,!1,.3,function(){l.default.instance.currentMusicKey="",l.default.instance.PlayMusic(a.SoundType.bgm_main,!0)}),t.getBundleData(a.BundleName.Res).bundle.loadDir("Json",cc.JsonAsset,null,function(e,t){e?console.error("Json\u52a0\u8f7d\u5931\u8d25",e):(console.log("Json\u52a0\u8f7d\u5b8c\u6210"),s.default.initJsonData(t))}),e&&e()})},e.loadRes=function(e,t,n){this.getBundleData(a.BundleName.Res).loadRes(e,t,n)},e.loadMainBundle=function(e){this.getBundleData(a.BundleName.Main).loadBundle(e)},e.goMain=function(){var e=this;this.isGoingMain||(this.isGoingMain=!0,i.default.instance.node.active=!0,t.getBundleData(a.BundleName.Main).isLoaded?(i.default.instance.bar.value=0,cc.director.preloadScene(a.SceneName.Main,function(e,t){i.default.instance.bar.value=e/t*.6},function(t){t?console.error("Main\u573a\u666f\u9884\u52a0\u8f7d\u5931\u8d25"):(i.default.instance.bar.value=.6,cc.director.loadScene(a.SceneName.Main,function(){e.isGoingMain=!1,l.default.instance.PlayMusic(a.SoundType.bgm_main)}))})):(this.loadMainBundle(function(){t.goMain()}),this.isGoingMain=!1))},e.loadMainRes=function(e,t,n){this.getBundleData(a.BundleName.Main).loadRes(e,t,n)},e.getBundleData=function(e){for(var t=0;t<this.bundleDatas.length;t++)if(this.bundleDatas[t].bundleName==e)return this.bundleDatas[t];return console.error("\u6ca1\u6709\u627e\u5230\u5bf9\u5e94bundle\u4fe1\u606f"),null},e.isGoingMain=!1,e.bundleDatas=[new r.default(a.BundleName.Loading,a.BundleName.Loading,!1),new r.default(a.BundleName.Res,a.BundleName.Res,!1),new r.default(a.BundleName.Main,a.BundleName.Main,!1),new r.default(a.BundleName.Mine,a.BundleName.Mine,!1),new r.default(a.BundleName.Scene_Black_1,a.BundleName.Scene_Black_1,!1),new r.default(a.BundleName.Scene_Castle_1,a.BundleName.Scene_Castle_1,!1),new r.default(a.BundleName.Scene_Gold_1,a.BundleName.Scene_Gold_1,!1),new r.default(a.BundleName.Scene_Grass_1,a.BundleName.Scene_Grass_1,!1),new r.default(a.BundleName.Scene_Sand_1,a.BundleName.Scene_Sand_1,!1),new r.default(a.BundleName.Scene_cunzhuang,a.BundleName.Scene_cunzhuang,!1)],t=o([u],e)}());n.default=d,cc._RF.pop()},{"../Comp/GameLoading":"GameLoading","../Config/DataClass/BundleData":"BundleData","../Config/EnumTypes":"EnumTypes","../Config/GameData":"GameData","./SoundMgr":"SoundMgr"}],1:[function(e,t,n){"use strict";const o=n;o.bignum=e("bn.js"),o.define=e("./asn1/api").define,o.base=e("./asn1/base"),o.constants=e("./asn1/constants"),o.decoders=e("./asn1/decoders"),o.encoders=e("./asn1/encoders")},{"./asn1/api":2,"./asn1/base":4,"./asn1/constants":8,"./asn1/decoders":10,"./asn1/encoders":13,"bn.js":15}],2:[function(e,t,n){"use strict";const o=e("./encoders"),i=e("./decoders"),r=e("inherits");function a(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}n.define=function(e,t){return new a(e,t)},a.prototype._createNamed=function(e){const t=this.name;function n(e){this._initNamed(e,t)}return r(n,e),n.prototype._initNamed=function(t,n){e.call(this,t,n)},new n(this)},a.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(i[e])),this.decoders[e]},a.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},a.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(o[e])),this.encoders[e]},a.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},{"./decoders":10,"./encoders":13,inherits:138}],3:[function(e,t,n){"use strict";const o=e("inherits"),i=e("../base/reporter").Reporter,r=e("safer-buffer").Buffer;function a(e,t){i.call(this,t),r.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function s(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return s.isEncoderBuffer(e)||(e=new s(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=r.byteLength(e);else{if(!r.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}o(a,i),n.DecoderBuffer=a,a.isDecoderBuffer=function(e){return e instanceof a||"object"==typeof e&&r.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},a.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},a.prototype.restore=function(e){const t=new a(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,i.prototype.restore.call(this,e.reporter),t},a.prototype.isEmpty=function(){return this.offset===this.length},a.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},a.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const n=new a(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},a.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},n.EncoderBuffer=s,s.isEncoderBuffer=function(e){return e instanceof s||"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},s.prototype.join=function(e,t){return e||(e=r.alloc(this.length)),t||(t=0),0===this.length?e:(Array.isArray(this.value)?this.value.forEach(function(n){n.join(e,t),t+=n.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):r.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length),e)}},{"../base/reporter":6,inherits:138,"safer-buffer":183}],4:[function(e,t,n){"use strict";const o=n;o.Reporter=e("./reporter").Reporter,o.DecoderBuffer=e("./buffer").DecoderBuffer,o.EncoderBuffer=e("./buffer").EncoderBuffer,o.Node=e("./node")},{"./buffer":3,"./node":5,"./reporter":6}],5:[function(e,t){"use strict";const n=e("../base/reporter").Reporter,o=e("../base/buffer").EncoderBuffer,i=e("../base/buffer").DecoderBuffer,r=e("minimalistic-assert"),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],s=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function l(e,t,n){const o={};this._baseState=o,o.name=n,o.enc=e,o.parent=t||null,o.children=null,o.tag=null,o.args=null,o.reverseArgs=null,o.choice=null,o.optional=!1,o.any=!1,o.obj=!1,o.use=null,o.useDecoder=null,o.key=null,o.default=null,o.explicit=null,o.implicit=null,o.contains=null,o.parent||(o.children=[],this._wrap())}t.exports=l;const c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){const e=this._baseState,t={};c.forEach(function(n){t[n]=e[n]});const n=new this.constructor(t.parent);return n._baseState=t,n},l.prototype._wrap=function(){const e=this._baseState;s.forEach(function(t){this[t]=function(){const n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}},this)},l.prototype._init=function(e){const t=this._baseState;r(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),r.equal(t.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(e){const t=this._baseState,n=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==n.length&&(r(null===t.children),t.children=n,n.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(r(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach(function(n){n==(0|n)&&(n|=0);const o=e[n];t[o]=n}),t}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(e){l.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),a.forEach(function(e){l.prototype[e]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return r(null===t.tag),t.tag=e,this._useArgs(n),this}}),l.prototype.use=function(e){r(e);const t=this._baseState;return r(null===t.use),t.use=e,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(e){const t=this._baseState;return r(null===t.default),t.default=e,t.optional=!0,this},l.prototype.explicit=function(e){const t=this._baseState;return r(null===t.explicit&&null===t.implicit),t.explicit=e,this},l.prototype.implicit=function(e){const t=this._baseState;return r(null===t.explicit&&null===t.implicit),t.implicit=e,this},l.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},l.prototype.key=function(e){const t=this._baseState;return r(null===t.key),t.key=e,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(e){const t=this._baseState;return r(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},l.prototype.contains=function(e){const t=this._baseState;return r(null===t.use),t.contains=e,this},l.prototype._decode=function(e,t){const n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));let o,r=n.default,a=!0,s=null;if(null!==n.key&&(s=e.enterKey(n.key)),n.optional){let o=null;if(null!==n.explicit?o=n.explicit:null!==n.implicit?o=n.implicit:null!==n.tag&&(o=n.tag),null!==o||n.any){if(a=this._peekTag(e,o,n.any),e.isError(a))return a}else{const o=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),a=!0}catch(l){a=!1}e.restore(o)}}if(n.obj&&a&&(o=e.enterObject()),a){if(null!==n.explicit){const t=this._decodeTag(e,n.explicit);if(e.isError(t))return t;e=t}const o=e.offset;if(null===n.use&&null===n.choice){let t;n.any&&(t=e.save());const o=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(o))return o;n.any?r=e.raw(t):e=o}if(t&&t.track&&null!==n.tag&&t.track(e.path(),o,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),n.any||(r=null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t)),e.isError(r))return r;if(n.any||null!==n.choice||null===n.children||n.children.forEach(function(n){n._decode(e,t)}),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){const o=new i(r);r=this._getUse(n.contains,e._reporterState.obj)._decode(o,t)}}return n.obj&&a&&(r=e.leaveObject(o)),null===n.key||null===r&&!0!==a?null!==s&&e.exitKey(s):e.leaveKey(s,n.key,r),r},l.prototype._decodeGeneric=function(e,t,n){const o=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,o.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&o.args?this._decodeObjid(t,o.args[0],o.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,o.args&&o.args[0],n):null!==o.use?this._getUse(o.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},l.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),r(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},l.prototype._decodeChoice=function(e,t){const n=this._baseState;let o=null,i=!1;return Object.keys(n.choice).some(function(r){const a=e.save(),s=n.choice[r];try{const n=s._decode(e,t);if(e.isError(n))return!1;o={type:r,value:n},i=!0}catch(l){return e.restore(a),!1}return!0},this),i?o:e.error("Choice not matched")},l.prototype._createEncoderBuffer=function(e){return new o(e,this.reporter)},l.prototype._encode=function(e,t,n){const o=this._baseState;if(null!==o.default&&o.default===e)return;const i=this._encodeValue(e,t,n);return void 0===i||this._skipDefault(i,t,n)?void 0:i},l.prototype._encodeValue=function(e,t,o){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new n);let r=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}let a=null,s=!1;if(i.any)r=this._createEncoderBuffer(e);else if(i.choice)r=this._encodeChoice(e,t);else if(i.contains)a=this._getUse(i.contains,o)._encode(e,t),s=!0;else if(i.children)a=i.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");const o=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const i=n._encode(e[n._baseState.key],t,e);return t.leaveKey(o),i},this).filter(function(e){return e}),a=this._createEncoderBuffer(a);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const n=this.clone();n._baseState.implicit=null,a=this._createEncoderBuffer(e.map(function(n){const o=this._baseState;return this._getUse(o.args[0],e)._encode(n,t)},n))}else null!==i.use?r=this._getUse(i.use,o)._encode(e,t):(a=this._encodePrimitive(i.tag,e),s=!0);if(!i.any&&null===i.choice){const e=null!==i.implicit?i.implicit:i.tag,n=null===i.implicit?"universal":"context";null===e?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(r=this._encodeComposite(e,s,n,a))}return null!==i.explicit&&(r=this._encodeComposite(i.explicit,!1,"context",r)),r},l.prototype._encodeChoice=function(e,t){const n=this._baseState,o=n.choice[e.type];return o||r(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),o._encode(e.value,t)},l.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},l.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},l.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},{"../base/buffer":3,"../base/reporter":6,"minimalistic-assert":142}],6:[function(e,t,n){"use strict";const o=e("inherits");function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function r(e,t){this.path=e,this.rethrow(t)}n.Reporter=i,i.prototype.isError=function(e){return e instanceof r},i.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},i.prototype.leaveKey=function(e,t,n){const o=this._reporterState;this.exitKey(e),null!==o.obj&&(o.obj[t]=n)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){const t=this._reporterState,n=t.obj;return t.obj=e,n},i.prototype.error=function(e){let t;const n=this._reporterState,o=e instanceof r;if(t=o?e:new r(n.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return o||n.errors.push(t),t},i.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},o(r,Error),r.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},{inherits:138}],7:[function(e,t,n){"use strict";function o(e){const t={};return Object.keys(e).forEach(function(n){(0|n)==n&&(n|=0);const o=e[n];t[o]=n}),t}n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=o(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=o(n.tag)},{}],8:[function(e,t,n){"use strict";const o=n;o._reverse=function(e){const t={};return Object.keys(e).forEach(function(n){(0|n)==n&&(n|=0);const o=e[n];t[o]=n}),t},o.der=e("./der")},{"./der":7}],9:[function(e,t){"use strict";const n=e("inherits"),o=e("bn.js"),i=e("../base/buffer").DecoderBuffer,r=e("../base/node"),a=e("../constants/der");function s(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){r.call(this,"der",e)}function c(e,t){let n=e.readUInt8(t);if(e.isError(n))return n;const o=a.tagClass[n>>6],i=0==(32&n);if(31==(31&n)){let o=n;for(n=0;128==(128&o);){if(o=e.readUInt8(t),e.isError(o))return o;n<<=7,n|=127&o}}else n&=31;return{cls:o,primitive:i,tag:n,tagStr:a.tag[n]}}function u(e,t,n){let o=e.readUInt8(n);if(e.isError(o))return o;if(!t&&128===o)return null;if(0==(128&o))return o;const i=127&o;if(i>4)return e.error("length octect is too long");o=0;for(let r=0;r<i;r++){o<<=8;const t=e.readUInt8(n);if(e.isError(t))return t;o|=t}return o}t.exports=s,s.prototype.decode=function(e,t){return i.isDecoderBuffer(e)||(e=new i(e,t)),this.tree._decode(e,t)},n(l,r),l.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;const o=e.save(),i=c(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(o),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||n)},l.prototype._decodeTag=function(e,t,n){const o=c(e,'Failed to decode tag of "'+t+'"');if(e.isError(o))return o;let i=u(e,o.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!n&&o.tag!==t&&o.tagStr!==t&&o.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(o.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');const r=e.save(),a=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(a)?a:(i=e.offset-r.offset,e.restore(r),e.skip(i,'Failed to match body of: "'+t+'"'))},l.prototype._skipUntilEnd=function(e,t){for(;;){const n=c(e,t);if(e.isError(n))return n;const o=u(e,n.primitive,t);if(e.isError(o))return o;let i;if(i=n.primitive||null!==o?e.skip(o):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===n.tagStr)break}},l.prototype._decodeList=function(e,t,n,o){const i=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const r=n.decode(e,"der",o);if(e.isError(r)&&t)break;i.push(r)}return i},l.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let n="";for(let e=0;e<t.length/2;e++)n+=String.fromCharCode(t.readUInt16BE(2*e));return n}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},l.prototype._decodeObjid=function(e,t,n){let o;const i=[];let r=0,a=0;for(;!e.isEmpty();)r<<=7,r|=127&(a=e.readUInt8()),0==(128&a)&&(i.push(r),r=0);128&a&&i.push(r);const s=i[0]/40|0,l=i[0]%40;if(o=n?i:[s,l].concat(i.slice(1)),t){let e=t[o.join(" ")];void 0===e&&(e=t[o.join(".")]),void 0!==e&&(o=e)}return o},l.prototype._decodeTime=function(e,t){const n=e.raw().toString();let o,i,r,a,s,l;if("gentime"===t)o=0|n.slice(0,4),i=0|n.slice(4,6),r=0|n.slice(6,8),a=0|n.slice(8,10),s=0|n.slice(10,12),l=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");o=0|n.slice(0,2),i=0|n.slice(2,4),r=0|n.slice(4,6),a=0|n.slice(6,8),s=0|n.slice(8,10),l=0|n.slice(10,12),o=o<70?2e3+o:1900+o}return Date.UTC(o,i-1,r,a,s,l,0)},l.prototype._decodeNull=function(){return null},l.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},l.prototype._decodeInt=function(e,t){const n=e.raw();let i=new o(n);return t&&(i=t[i.toString(10)]||i),i},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},{"../base/buffer":3,"../base/node":5,"../constants/der":7,"bn.js":15,inherits:138}],10:[function(e,t,n){"use strict";const o=n;o.der=e("./der"),o.pem=e("./pem")},{"./der":9,"./pem":11}],11:[function(e,t){"use strict";const n=e("inherits"),o=e("safer-buffer").Buffer,i=e("./der");function r(e){i.call(this,e),this.enc="pem"}n(r,i),t.exports=r,r.prototype.decode=function(e,t){const n=e.toString().split(/[\r\n]+/g),r=t.label.toUpperCase(),a=/^-----(BEGIN|END) ([^-]+)-----$/;let s=-1,l=-1;for(let o=0;o<n.length;o++){const e=n[o].match(a);if(null!==e&&e[2]===r){if(-1!==s){if("END"!==e[1])break;l=o;break}if("BEGIN"!==e[1])break;s=o}}if(-1===s||-1===l)throw new Error("PEM section not found for: "+r);const c=n.slice(s+1,l).join("");c.replace(/[^a-z0-9+/=]+/gi,"");const u=o.from(c,"base64");return i.prototype.decode.call(this,u,t)}},{"./der":9,inherits:138,"safer-buffer":183}],12:[function(e,t){"use strict";const n=e("inherits"),o=e("safer-buffer").Buffer,i=e("../base/node"),r=e("../constants/der");function a(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new s,this.tree._init(e.body)}function s(e){i.call(this,"der",e)}function l(e){return e<10?"0"+e:e}function c(e,t,n,o){let i;if("seqof"===e?e="seq":"setof"===e&&(e="set"),r.tagByName.hasOwnProperty(e))i=r.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return o.error("Unknown tag: "+e);i=e}return i>=31?o.error("Multi-octet tag encoding unsupported"):(t||(i|=32),i|=r.tagClassByName[n||"universal"]<<6)}t.exports=a,a.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},n(s,i),s.prototype._encodeComposite=function(e,t,n,i){const r=c(e,t,n,this.reporter);if(i.length<128){const e=o.alloc(2);return e[0]=r,e[1]=i.length,this._createEncoderBuffer([e,i])}let a=1;for(let o=i.length;o>=256;o>>=8)a++;const s=o.alloc(2+a);s[0]=r,s[1]=128|a;for(let o=1+a,l=i.length;l>0;o--,l>>=8)s[o]=255&l;return this._createEncoderBuffer([s,i])},s.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=o.alloc(2*e.length);for(let n=0;n<e.length;n++)t.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)?this._createEncoderBuffer(e):"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},s.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let i=0;for(let o=0;o<e.length;o++){let t=e[o];for(i++;t>=128;t>>=7)i++}const r=o.alloc(i);let a=r.length-1;for(let o=e.length-1;o>=0;o--){let t=e[o];for(r[a--]=127&t;(t>>=7)>0;)r[a--]=128|127&t}return this._createEncoderBuffer(r)},s.prototype._encodeTime=function(e,t){let n;const o=new Date(e);return"gentime"===t?n=[l(o.getUTCFullYear()),l(o.getUTCMonth()+1),l(o.getUTCDate()),l(o.getUTCHours()),l(o.getUTCMinutes()),l(o.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[l(o.getUTCFullYear()%100),l(o.getUTCMonth()+1),l(o.getUTCDate()),l(o.getUTCHours()),l(o.getUTCMinutes()),l(o.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},s.prototype._encodeNull=function(){return this._createEncoderBuffer("")},s.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!o.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=o.from(t)}if(o.isBuffer(e)){let t=e.length;0===e.length&&t++;const n=o.alloc(t);return e.copy(n),0===e.length&&(n[0]=0),this._createEncoderBuffer(n)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let o=e;o>=256;o>>=8)n++;const i=new Array(n);for(let o=i.length-1;o>=0;o--)i[o]=255&e,e>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(o.from(i))},s.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},s.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},s.prototype._skipDefault=function(e,t,n){const o=this._baseState;let i;if(null===o.default)return!1;const r=e.join();if(void 0===o.defaultBuffer&&(o.defaultBuffer=this._encodeValue(o.default,t,n).join()),r.length!==o.defaultBuffer.length)return!1;for(i=0;i<r.length;i++)if(r[i]!==o.defaultBuffer[i])return!1;return!0}},{"../base/node":5,"../constants/der":7,inherits:138,"safer-buffer":183}],13:[function(e,t,n){"use strict";const o=n;o.der=e("./der"),o.pem=e("./pem")},{"./der":12,"./pem":14}],14:[function(e,t){"use strict";const n=e("inherits"),o=e("./der");function i(e){o.call(this,e),this.enc="pem"}n(i,o),t.exports=i,i.prototype.encode=function(e,t){const n=o.prototype.encode.call(this,e).toString("base64"),i=["-----BEGIN "+t.label+"-----"];for(let o=0;o<n.length;o+=64)i.push(n.slice(o,o+64));return i.push("-----END "+t.label+"-----"),i.join("\n")}},{"./der":12,inherits:138}],15:[function(e,t){(function(t,n){"use strict";function o(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function r(e,t,n){if(r.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var a;"object"==typeof t?t.exports=r:n.BN=r,r.BN=r,r.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:e("buffer").Buffer}catch(E){}function s(e,t){var n=e.charCodeAt(t);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function l(e,t,n){var o=s(e,n);return n-1>=t&&(o|=s(e,n-1)<<4),o}function c(e,t,n,o){for(var i=0,r=Math.min(e.length,n),a=t;a<r;a++){var s=e.charCodeAt(a)-48;i*=o,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}r.isBN=function(e){return e instanceof r||null!==e&&"object"==typeof e&&e.constructor.wordSize===r.wordSize&&Array.isArray(e.words)},r.max=function(e,t){return e.cmp(t)>0?e:t},r.min=function(e,t){return e.cmp(t)<0?e:t},r.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),o(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},r.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(o(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},r.prototype._initArray=function(e,t,n){if(o("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,a,s=0;if("be"===n)for(i=e.length-1,r=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[r]|=a<<s&67108863,this.words[r+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,r++);else if("le"===n)for(i=0,r=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[r]|=a<<s&67108863,this.words[r+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,r++);return this.strip()},r.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var i,r=0,a=0;if("be"===n)for(o=e.length-1;o>=t;o-=2)i=l(e,t,o)<<r,this.words[a]|=67108863&i,r>=18?(r-=18,a+=1,this.words[a]|=i>>>26):r+=8;else for(o=(e.length-t)%2==0?t+1:t;o<e.length;o+=2)i=l(e,t,o)<<r,this.words[a]|=67108863&i,r>=18?(r-=18,a+=1,this.words[a]|=i>>>26):r+=8;this.strip()},r.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var o=0,i=1;i<=67108863;i*=t)o++;o--,i=i/t|0;for(var r=e.length-n,a=r%o,s=Math.min(r,r-a)+n,l=0,u=n;u<s;u+=o)l=c(e,u,u+o,t),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var d=1;for(l=c(e,u,e.length,t),u=0;u<a;u++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},r.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},r.prototype.clone=function(){var e=new r(null);return this.copy(e),e},r.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},r.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},r.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var o=n/26|0,i=n%26;t[n]=(e.words[o]&1<<i)>>>i}return t}function f(e,t,n){n.negative=t.negative^e.negative;var o=e.length+t.length|0;n.length=o,o=o-1|0;var i=0|e.words[0],r=0|t.words[0],a=i*r,s=67108863&a,l=a/67108864|0;n.words[0]=s;for(var c=1;c<o;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=h;p++){var f=c-p|0;u+=(a=(i=0|e.words[f])*(r=0|t.words[p])+d)/67108864|0,d=67108863&a}n.words[c]=0|d,l=0|u}return 0!==l?n.words[c]=0|l:n.length--,n.strip()}r.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,r=0,a=0;a<this.length;a++){var s=this.words[a],l=(16777215&(s<<i|r)).toString(16);n=0!=(r=s>>>24-i&16777215)||a!==this.length-1?u[6-l.length]+l+n:l+n,(i+=2)>=26&&(i-=26,a--)}for(0!==r&&(n=r.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=d[e],p=h[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var g=f.modn(p).toString(e);n=(f=f.idivn(p)).isZero()?g+n:u[c-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}o(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},r.prototype.toJSON=function(){return this.toString(16)},r.prototype.toBuffer=function(e,t){return o(void 0!==a),this.toArrayLike(a,e,t)},r.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},r.prototype.toArrayLike=function(e,t,n){var i=this.byteLength(),r=n||Math.max(1,i);o(i<=r,"byte array longer than desired length"),o(r>0,"Requested array length <= 0"),this.strip();var a,s,l="le"===t,c=new e(r),u=this.clone();if(l){for(s=0;!u.isZero();s++)a=u.andln(255),u.iushrn(8),c[s]=a;for(;s<r;s++)c[s]=0}else{for(s=0;s<r-i;s++)c[s]=0;for(s=0;!u.isZero();s++)a=u.andln(255),u.iushrn(8),c[r-s-1]=a}return c},Math.clz32?r.prototype._countBits=function(e){return 32-Math.clz32(e)}:r.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},r.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},r.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},r.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},r.prototype.ior=function(e){return o(0==(this.negative|e.negative)),this.iuor(e)},r.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},r.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},r.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},r.prototype.iand=function(e){return o(0==(this.negative|e.negative)),this.iuand(e)},r.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},r.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},r.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var o=0;o<n.length;o++)this.words[o]=t.words[o]^n.words[o];if(this!==t)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=t.length,this.strip()},r.prototype.ixor=function(e){return o(0==(this.negative|e.negative)),this.iuxor(e)},r.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},r.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},r.prototype.inotn=function(e){o("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},r.prototype.notn=function(e){return this.clone().inotn(e)},r.prototype.setn=function(e,t){o("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},r.prototype.iadd=function(e){var t,n,o;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,o=e):(n=e,o=this);for(var i=0,r=0;r<o.length;r++)t=(0|n.words[r])+(0|o.words[r])+i,this.words[r]=67108863&t,i=t>>>26;for(;0!==i&&r<n.length;r++)t=(0|n.words[r])+i,this.words[r]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;r<n.length;r++)this.words[r]=n.words[r];return this},r.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},r.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,o,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,o=e):(n=e,o=this);for(var r=0,a=0;a<o.length;a++)r=(t=(0|n.words[a])-(0|o.words[a])+r)>>26,this.words[a]=67108863&t;for(;0!==r&&a<n.length;a++)r=(t=(0|n.words[a])+r)>>26,this.words[a]=67108863&t;if(0===r&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this.strip()},r.prototype.sub=function(e){return this.clone().isub(e)};var g=function(e,t,n){var o,i,r,a=e.words,s=t.words,l=n.words,c=0,u=0|a[0],d=8191&u,h=u>>>13,p=0|a[1],f=8191&p,g=p>>>13,y=0|a[2],m=8191&y,v=y>>>13,_=0|a[3],b=8191&_,S=_>>>13,M=0|a[4],C=8191&M,T=M>>>13,k=0|a[5],I=8191&k,E=k>>>13,w=0|a[6],P=8191&w,R=w>>>13,O=0|a[7],D=8191&O,A=O>>>13,L=0|a[8],B=8191&L,U=L>>>13,N=0|a[9],j=8191&N,x=N>>>13,G=0|s[0],H=8191&G,F=G>>>13,V=0|s[1],q=8191&V,Q=V>>>13,Y=0|s[2],K=8191&Y,W=Y>>>13,z=0|s[3],J=8191&z,X=z>>>13,Z=0|s[4],$=8191&Z,ee=Z>>>13,te=0|s[5],ne=8191&te,oe=te>>>13,ie=0|s[6],re=8191&ie,ae=ie>>>13,se=0|s[7],le=8191&se,ce=se>>>13,ue=0|s[8],de=8191&ue,he=ue>>>13,pe=0|s[9],fe=8191&pe,ge=pe>>>13;n.negative=e.negative^t.negative,n.length=19;var ye=(c+(o=Math.imul(d,H))|0)+((8191&(i=(i=Math.imul(d,F))+Math.imul(h,H)|0))<<13)|0;c=((r=Math.imul(h,F))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,o=Math.imul(f,H),i=(i=Math.imul(f,F))+Math.imul(g,H)|0,r=Math.imul(g,F);var me=(c+(o=o+Math.imul(d,q)|0)|0)+((8191&(i=(i=i+Math.imul(d,Q)|0)+Math.imul(h,q)|0))<<13)|0;c=((r=r+Math.imul(h,Q)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,o=Math.imul(m,H),i=(i=Math.imul(m,F))+Math.imul(v,H)|0,r=Math.imul(v,F),o=o+Math.imul(f,q)|0,i=(i=i+Math.imul(f,Q)|0)+Math.imul(g,q)|0,r=r+Math.imul(g,Q)|0;var ve=(c+(o=o+Math.imul(d,K)|0)|0)+((8191&(i=(i=i+Math.imul(d,W)|0)+Math.imul(h,K)|0))<<13)|0;c=((r=r+Math.imul(h,W)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,o=Math.imul(b,H),i=(i=Math.imul(b,F))+Math.imul(S,H)|0,r=Math.imul(S,F),o=o+Math.imul(m,q)|0,i=(i=i+Math.imul(m,Q)|0)+Math.imul(v,q)|0,r=r+Math.imul(v,Q)|0,o=o+Math.imul(f,K)|0,i=(i=i+Math.imul(f,W)|0)+Math.imul(g,K)|0,r=r+Math.imul(g,W)|0;var _e=(c+(o=o+Math.imul(d,J)|0)|0)+((8191&(i=(i=i+Math.imul(d,X)|0)+Math.imul(h,J)|0))<<13)|0;c=((r=r+Math.imul(h,X)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,o=Math.imul(C,H),i=(i=Math.imul(C,F))+Math.imul(T,H)|0,r=Math.imul(T,F),o=o+Math.imul(b,q)|0,i=(i=i+Math.imul(b,Q)|0)+Math.imul(S,q)|0,r=r+Math.imul(S,Q)|0,o=o+Math.imul(m,K)|0,i=(i=i+Math.imul(m,W)|0)+Math.imul(v,K)|0,r=r+Math.imul(v,W)|0,o=o+Math.imul(f,J)|0,i=(i=i+Math.imul(f,X)|0)+Math.imul(g,J)|0,r=r+Math.imul(g,X)|0;var be=(c+(o=o+Math.imul(d,$)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,$)|0))<<13)|0;c=((r=r+Math.imul(h,ee)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,o=Math.imul(I,H),i=(i=Math.imul(I,F))+Math.imul(E,H)|0,r=Math.imul(E,F),o=o+Math.imul(C,q)|0,i=(i=i+Math.imul(C,Q)|0)+Math.imul(T,q)|0,r=r+Math.imul(T,Q)|0,o=o+Math.imul(b,K)|0,i=(i=i+Math.imul(b,W)|0)+Math.imul(S,K)|0,r=r+Math.imul(S,W)|0,o=o+Math.imul(m,J)|0,i=(i=i+Math.imul(m,X)|0)+Math.imul(v,J)|0,r=r+Math.imul(v,X)|0,o=o+Math.imul(f,$)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(g,$)|0,r=r+Math.imul(g,ee)|0;var Se=(c+(o=o+Math.imul(d,ne)|0)|0)+((8191&(i=(i=i+Math.imul(d,oe)|0)+Math.imul(h,ne)|0))<<13)|0;c=((r=r+Math.imul(h,oe)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,o=Math.imul(P,H),i=(i=Math.imul(P,F))+Math.imul(R,H)|0,r=Math.imul(R,F),o=o+Math.imul(I,q)|0,i=(i=i+Math.imul(I,Q)|0)+Math.imul(E,q)|0,r=r+Math.imul(E,Q)|0,o=o+Math.imul(C,K)|0,i=(i=i+Math.imul(C,W)|0)+Math.imul(T,K)|0,r=r+Math.imul(T,W)|0,o=o+Math.imul(b,J)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(S,J)|0,r=r+Math.imul(S,X)|0,o=o+Math.imul(m,$)|0,i=(i=i+Math.imul(m,ee)|0)+Math.imul(v,$)|0,r=r+Math.imul(v,ee)|0,o=o+Math.imul(f,ne)|0,i=(i=i+Math.imul(f,oe)|0)+Math.imul(g,ne)|0,r=r+Math.imul(g,oe)|0;var Me=(c+(o=o+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ae)|0)+Math.imul(h,re)|0))<<13)|0;c=((r=r+Math.imul(h,ae)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,o=Math.imul(D,H),i=(i=Math.imul(D,F))+Math.imul(A,H)|0,r=Math.imul(A,F),o=o+Math.imul(P,q)|0,i=(i=i+Math.imul(P,Q)|0)+Math.imul(R,q)|0,r=r+Math.imul(R,Q)|0,o=o+Math.imul(I,K)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(E,K)|0,r=r+Math.imul(E,W)|0,o=o+Math.imul(C,J)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(T,J)|0,r=r+Math.imul(T,X)|0,o=o+Math.imul(b,$)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(S,$)|0,r=r+Math.imul(S,ee)|0,o=o+Math.imul(m,ne)|0,i=(i=i+Math.imul(m,oe)|0)+Math.imul(v,ne)|0,r=r+Math.imul(v,oe)|0,o=o+Math.imul(f,re)|0,i=(i=i+Math.imul(f,ae)|0)+Math.imul(g,re)|0,r=r+Math.imul(g,ae)|0;var Ce=(c+(o=o+Math.imul(d,le)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(h,le)|0))<<13)|0;c=((r=r+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,o=Math.imul(B,H),i=(i=Math.imul(B,F))+Math.imul(U,H)|0,r=Math.imul(U,F),o=o+Math.imul(D,q)|0,i=(i=i+Math.imul(D,Q)|0)+Math.imul(A,q)|0,r=r+Math.imul(A,Q)|0,o=o+Math.imul(P,K)|0,i=(i=i+Math.imul(P,W)|0)+Math.imul(R,K)|0,r=r+Math.imul(R,W)|0,o=o+Math.imul(I,J)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(E,J)|0,r=r+Math.imul(E,X)|0,o=o+Math.imul(C,$)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(T,$)|0,r=r+Math.imul(T,ee)|0,o=o+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,oe)|0)+Math.imul(S,ne)|0,r=r+Math.imul(S,oe)|0,o=o+Math.imul(m,re)|0,i=(i=i+Math.imul(m,ae)|0)+Math.imul(v,re)|0,r=r+Math.imul(v,ae)|0,o=o+Math.imul(f,le)|0,i=(i=i+Math.imul(f,ce)|0)+Math.imul(g,le)|0,r=r+Math.imul(g,ce)|0;var Te=(c+(o=o+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((r=r+Math.imul(h,he)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,o=Math.imul(j,H),i=(i=Math.imul(j,F))+Math.imul(x,H)|0,r=Math.imul(x,F),o=o+Math.imul(B,q)|0,i=(i=i+Math.imul(B,Q)|0)+Math.imul(U,q)|0,r=r+Math.imul(U,Q)|0,o=o+Math.imul(D,K)|0,i=(i=i+Math.imul(D,W)|0)+Math.imul(A,K)|0,r=r+Math.imul(A,W)|0,o=o+Math.imul(P,J)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(R,J)|0,r=r+Math.imul(R,X)|0,o=o+Math.imul(I,$)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(E,$)|0,r=r+Math.imul(E,ee)|0,o=o+Math.imul(C,ne)|0,i=(i=i+Math.imul(C,oe)|0)+Math.imul(T,ne)|0,r=r+Math.imul(T,oe)|0,o=o+Math.imul(b,re)|0,i=(i=i+Math.imul(b,ae)|0)+Math.imul(S,re)|0,r=r+Math.imul(S,ae)|0,o=o+Math.imul(m,le)|0,i=(i=i+Math.imul(m,ce)|0)+Math.imul(v,le)|0,r=r+Math.imul(v,ce)|0,o=o+Math.imul(f,de)|0,i=(i=i+Math.imul(f,he)|0)+Math.imul(g,de)|0,r=r+Math.imul(g,he)|0;var ke=(c+(o=o+Math.imul(d,fe)|0)|0)+((8191&(i=(i=i+Math.imul(d,ge)|0)+Math.imul(h,fe)|0))<<13)|0;c=((r=r+Math.imul(h,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,o=Math.imul(j,q),i=(i=Math.imul(j,Q))+Math.imul(x,q)|0,r=Math.imul(x,Q),o=o+Math.imul(B,K)|0,i=(i=i+Math.imul(B,W)|0)+Math.imul(U,K)|0,r=r+Math.imul(U,W)|0,o=o+Math.imul(D,J)|0,i=(i=i+Math.imul(D,X)|0)+Math.imul(A,J)|0,r=r+Math.imul(A,X)|0,o=o+Math.imul(P,$)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(R,$)|0,r=r+Math.imul(R,ee)|0,o=o+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(E,ne)|0,r=r+Math.imul(E,oe)|0,o=o+Math.imul(C,re)|0,i=(i=i+Math.imul(C,ae)|0)+Math.imul(T,re)|0,r=r+Math.imul(T,ae)|0,o=o+Math.imul(b,le)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(S,le)|0,r=r+Math.imul(S,ce)|0,o=o+Math.imul(m,de)|0,i=(i=i+Math.imul(m,he)|0)+Math.imul(v,de)|0,r=r+Math.imul(v,he)|0;var Ie=(c+(o=o+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ge)|0)+Math.imul(g,fe)|0))<<13)|0;c=((r=r+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,o=Math.imul(j,K),i=(i=Math.imul(j,W))+Math.imul(x,K)|0,r=Math.imul(x,W),o=o+Math.imul(B,J)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(U,J)|0,r=r+Math.imul(U,X)|0,o=o+Math.imul(D,$)|0,i=(i=i+Math.imul(D,ee)|0)+Math.imul(A,$)|0,r=r+Math.imul(A,ee)|0,o=o+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,oe)|0)+Math.imul(R,ne)|0,r=r+Math.imul(R,oe)|0,o=o+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ae)|0)+Math.imul(E,re)|0,r=r+Math.imul(E,ae)|0,o=o+Math.imul(C,le)|0,i=(i=i+Math.imul(C,ce)|0)+Math.imul(T,le)|0,r=r+Math.imul(T,ce)|0,o=o+Math.imul(b,de)|0,i=(i=i+Math.imul(b,he)|0)+Math.imul(S,de)|0,r=r+Math.imul(S,he)|0;var Ee=(c+(o=o+Math.imul(m,fe)|0)|0)+((8191&(i=(i=i+Math.imul(m,ge)|0)+Math.imul(v,fe)|0))<<13)|0;c=((r=r+Math.imul(v,ge)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,o=Math.imul(j,J),i=(i=Math.imul(j,X))+Math.imul(x,J)|0,r=Math.imul(x,X),o=o+Math.imul(B,$)|0,i=(i=i+Math.imul(B,ee)|0)+Math.imul(U,$)|0,r=r+Math.imul(U,ee)|0,o=o+Math.imul(D,ne)|0,i=(i=i+Math.imul(D,oe)|0)+Math.imul(A,ne)|0,r=r+Math.imul(A,oe)|0,o=o+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ae)|0)+Math.imul(R,re)|0,r=r+Math.imul(R,ae)|0,o=o+Math.imul(I,le)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(E,le)|0,r=r+Math.imul(E,ce)|0,o=o+Math.imul(C,de)|0,i=(i=i+Math.imul(C,he)|0)+Math.imul(T,de)|0,r=r+Math.imul(T,he)|0;var we=(c+(o=o+Math.imul(b,fe)|0)|0)+((8191&(i=(i=i+Math.imul(b,ge)|0)+Math.imul(S,fe)|0))<<13)|0;c=((r=r+Math.imul(S,ge)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,o=Math.imul(j,$),i=(i=Math.imul(j,ee))+Math.imul(x,$)|0,r=Math.imul(x,ee),o=o+Math.imul(B,ne)|0,i=(i=i+Math.imul(B,oe)|0)+Math.imul(U,ne)|0,r=r+Math.imul(U,oe)|0,o=o+Math.imul(D,re)|0,i=(i=i+Math.imul(D,ae)|0)+Math.imul(A,re)|0,r=r+Math.imul(A,ae)|0,o=o+Math.imul(P,le)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(R,le)|0,r=r+Math.imul(R,ce)|0,o=o+Math.imul(I,de)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(E,de)|0,r=r+Math.imul(E,he)|0;var Pe=(c+(o=o+Math.imul(C,fe)|0)|0)+((8191&(i=(i=i+Math.imul(C,ge)|0)+Math.imul(T,fe)|0))<<13)|0;c=((r=r+Math.imul(T,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,o=Math.imul(j,ne),i=(i=Math.imul(j,oe))+Math.imul(x,ne)|0,r=Math.imul(x,oe),o=o+Math.imul(B,re)|0,i=(i=i+Math.imul(B,ae)|0)+Math.imul(U,re)|0,r=r+Math.imul(U,ae)|0,o=o+Math.imul(D,le)|0,i=(i=i+Math.imul(D,ce)|0)+Math.imul(A,le)|0,r=r+Math.imul(A,ce)|0,o=o+Math.imul(P,de)|0,i=(i=i+Math.imul(P,he)|0)+Math.imul(R,de)|0,r=r+Math.imul(R,he)|0;var Re=(c+(o=o+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ge)|0)+Math.imul(E,fe)|0))<<13)|0;c=((r=r+Math.imul(E,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,o=Math.imul(j,re),i=(i=Math.imul(j,ae))+Math.imul(x,re)|0,r=Math.imul(x,ae),o=o+Math.imul(B,le)|0,i=(i=i+Math.imul(B,ce)|0)+Math.imul(U,le)|0,r=r+Math.imul(U,ce)|0,o=o+Math.imul(D,de)|0,i=(i=i+Math.imul(D,he)|0)+Math.imul(A,de)|0,r=r+Math.imul(A,he)|0;var Oe=(c+(o=o+Math.imul(P,fe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ge)|0)+Math.imul(R,fe)|0))<<13)|0;c=((r=r+Math.imul(R,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,o=Math.imul(j,le),i=(i=Math.imul(j,ce))+Math.imul(x,le)|0,r=Math.imul(x,ce),o=o+Math.imul(B,de)|0,i=(i=i+Math.imul(B,he)|0)+Math.imul(U,de)|0,r=r+Math.imul(U,he)|0;var De=(c+(o=o+Math.imul(D,fe)|0)|0)+((8191&(i=(i=i+Math.imul(D,ge)|0)+Math.imul(A,fe)|0))<<13)|0;c=((r=r+Math.imul(A,ge)|0)+(i>>>13)|0)+(De>>>26)|0,De&=67108863,o=Math.imul(j,de),i=(i=Math.imul(j,he))+Math.imul(x,de)|0,r=Math.imul(x,he);var Ae=(c+(o=o+Math.imul(B,fe)|0)|0)+((8191&(i=(i=i+Math.imul(B,ge)|0)+Math.imul(U,fe)|0))<<13)|0;c=((r=r+Math.imul(U,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863;var Le=(c+(o=Math.imul(j,fe))|0)+((8191&(i=(i=Math.imul(j,ge))+Math.imul(x,fe)|0))<<13)|0;return c=((r=Math.imul(x,ge))+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,l[0]=ye,l[1]=me,l[2]=ve,l[3]=_e,l[4]=be,l[5]=Se,l[6]=Me,l[7]=Ce,l[8]=Te,l[9]=ke,l[10]=Ie,l[11]=Ee,l[12]=we,l[13]=Pe,l[14]=Re,l[15]=Oe,l[16]=De,l[17]=Ae,l[18]=Le,0!==c&&(l[19]=c,n.length++),n};function y(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var o=0,i=0,r=0;r<n.length-1;r++){var a=i;i=0;for(var s=67108863&o,l=Math.min(r,t.length-1),c=Math.max(0,r-e.length+1);c<=l;c++){var u=r-c,d=(0|e.words[u])*(0|t.words[c]),h=67108863&d;s=67108863&(h=h+s|0),i+=(a=(a=a+(d/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}n.words[r]=s,o=a,a=i}return 0!==o?n.words[r]=o:n.length--,n.strip()}function m(e,t,n){return(new v).mulp(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(g=f),r.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?g(this,e,t):n<63?f(this,e,t):n<1024?y(this,e,t):m(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=r.prototype._countBits(e)-1,o=0;o<e;o++)t[o]=this.revBin(o,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var o=0,i=0;i<t;i++)o|=(1&e)<<t-i-1,e>>=1;return o},v.prototype.permute=function(e,t,n,o,i,r){for(var a=0;a<r;a++)o[a]=t[e[a]],i[a]=n[e[a]]},v.prototype.transform=function(e,t,n,o,i,r){this.permute(r,e,t,n,o,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),u=0;u<i;u+=s)for(var d=l,h=c,p=0;p<a;p++){var f=n[u+p],g=o[u+p],y=n[u+p+a],m=o[u+p+a],v=d*y-h*m;m=d*m+h*y,y=v,n[u+p]=f+y,o[u+p]=g+m,n[u+p+a]=f-y,o[u+p+a]=g-m,p!==s&&(v=l*d-c*h,h=l*h+c*d,d=v)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),o=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+o},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var o=0;o<n/2;o++){var i=e[o];e[o]=e[n-o-1],e[n-o-1]=i,i=t[o],t[o]=-t[n-o-1],t[n-o-1]=-i}},v.prototype.normalize13b=function(e,t){for(var n=0,o=0;o<t/2;o++){var i=8192*Math.round(e[2*o+1]/t)+Math.round(e[2*o]/t)+n;e[o]=67108863&i,n=i<67108864?0:i/67108864|0}return e},v.prototype.convert13b=function(e,t,n,i){for(var r=0,a=0;a<t;a++)r+=0|e[a],n[2*a]=8191&r,r>>>=13,n[2*a+1]=8191&r,r>>>=13;for(a=2*t;a<i;++a)n[a]=0;o(0===r),o(0==(-8192&r))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var o=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(o),r=this.stub(o),a=new Array(o),s=new Array(o),l=new Array(o),c=new Array(o),u=new Array(o),d=new Array(o),h=n.words;h.length=o,this.convert13b(e.words,e.length,a,o),this.convert13b(t.words,t.length,c,o),this.transform(a,r,s,l,o,i),this.transform(c,r,u,d,o,i);for(var p=0;p<o;p++){var f=s[p]*u[p]-l[p]*d[p];l[p]=s[p]*d[p]+l[p]*u[p],s[p]=f}return this.conjugate(s,l,o),this.transform(s,l,h,r,o,i),this.conjugate(h,r,o),this.normalize13b(h,o),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},r.prototype.mul=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},r.prototype.mulf=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),m(this,e,t)},r.prototype.imul=function(e){return this.clone().mulTo(e,this)},r.prototype.imuln=function(e){o("number"==typeof e),o(e<67108864);for(var t=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,r=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=r>>>26,this.words[n]=67108863&r}return 0!==t&&(this.words[n]=t,this.length++),this},r.prototype.muln=function(e){return this.clone().imuln(e)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(e){var t=p(e);if(0===t.length)return new r(1);for(var n=this,o=0;o<t.length&&0===t[o];o++,n=n.sqr());if(++o<t.length)for(var i=n.sqr();o<t.length;o++,i=i.sqr())0!==t[o]&&(n=n.mul(i));return n},r.prototype.iushln=function(e){o("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,r=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&r,l=(0|this.words[t])-s<<n;this.words[t]=l|a,a=s>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},r.prototype.ishln=function(e){return o(0===this.negative),this.iushln(e)},r.prototype.iushrn=function(e,t,n){var i;o("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var r=e%26,a=Math.min((e-r)/26,this.length),s=67108863^67108863>>>r<<r,l=n;if(i-=a,i=Math.max(0,i),l){for(var c=0;c<a;c++)l.words[c]=this.words[c];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-r|d>>>r,u=d&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},r.prototype.ishrn=function(e,t,n){return o(0===this.negative),this.iushrn(e,t,n)},r.prototype.shln=function(e){return this.clone().ishln(e)},r.prototype.ushln=function(e){return this.clone().iushln(e)},r.prototype.shrn=function(e){return this.clone().ishrn(e)},r.prototype.ushrn=function(e){return this.clone().iushrn(e)},r.prototype.testn=function(e){o("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n||!(this.words[n]&i))},r.prototype.imaskn=function(e){o("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(o(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},r.prototype.maskn=function(e){return this.clone().imaskn(e)},r.prototype.iaddn=function(e){return o("number"==typeof e),o(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},r.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},r.prototype.isubn=function(e){if(o("number"==typeof e),o(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},r.prototype.addn=function(e){return this.clone().iaddn(e)},r.prototype.subn=function(e){return this.clone().isubn(e)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(e,t,n){var i,r,a=e.length+n;this._expand(a);var s=0;for(i=0;i<e.length;i++){r=(0|this.words[i+n])+s;var l=(0|e.words[i])*t;s=((r-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&r}for(;i<this.length-n;i++)s=(r=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&r;if(0===s)return this.strip();for(o(-1===s),s=0,i=0;i<this.length;i++)s=(r=-(0|this.words[i])+s)>>26,this.words[i]=67108863&r;return this.negative=1,this.strip()},r.prototype._wordDiv=function(e,t){var n=(this.length,e.length),o=this.clone(),i=e,a=0|i.words[i.length-1];0!=(n=26-this._countBits(a))&&(i=i.ushln(n),o.iushln(n),a=0|i.words[i.length-1]);var s,l=o.length-i.length;if("mod"!==t){(s=new r(null)).length=l+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var u=o.clone()._ishlnsubmul(i,1,l);0===u.negative&&(o=u,s&&(s.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|o.words[i.length+d])+(0|o.words[i.length+d-1]);for(h=Math.min(h/a|0,67108863),o._ishlnsubmul(i,h,d);0!==o.negative;)h--,o.negative=0,o._ishlnsubmul(i,1,d),o.isZero()||(o.negative^=1);s&&(s.words[d]=h)}return s&&s.strip(),o.strip(),"div"!==t&&0!==n&&o.iushrn(n),{div:s||null,mod:o}},r.prototype.divmod=function(e,t,n){return o(!e.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new r(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new r(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new r(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,a,s},r.prototype.div=function(e){return this.divmod(e,"div",!1).div},r.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},r.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},r.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,o=e.ushrn(1),i=e.andln(1),r=n.cmp(o);return r<0||1===i&&0===r?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},r.prototype.modn=function(e){o(e<=67108863);for(var t=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(t*n+(0|this.words[i]))%e;return n},r.prototype.idivn=function(e){o(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*t;this.words[n]=i/e|0,t=i%e}return this.strip()},r.prototype.divn=function(e){return this.clone().idivn(e)},r.prototype.egcd=function(e){o(0===e.negative),o(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new r(1),a=new r(0),s=new r(0),l=new r(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(u),a.isub(d)),i.iushrn(1),a.iushrn(1);for(var f=0,g=1;0==(n.words[0]&g)&&f<26;++f,g<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(d)),s.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(s),a.isub(l)):(n.isub(t),s.isub(i),l.isub(a))}return{a:s,b:l,gcd:n.iushln(c)}},r.prototype._invmp=function(e){o(0===e.negative),o(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new r(1),s=new r(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;0==(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var d=0,h=1;0==(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(s)):(n.isub(t),s.isub(a))}return(i=0===t.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(e),i},r.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var o=0;t.isEven()&&n.isEven();o++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var r=t;t=n,n=r}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(o)},r.prototype.invm=function(e){return this.egcd(e).a.umod(e)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(e){return this.words[0]&e},r.prototype.bincn=function(e){o("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var r=i,a=n;0!==r&&a<this.length;a++){var s=0|this.words[a];r=(s+=r)>>>26,s&=67108863,this.words[a]=s}return 0!==r&&(this.words[a]=r,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),o(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},r.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},r.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var o=0|this.words[n],i=0|e.words[n];if(o!==i){o<i?t=-1:o>i&&(t=1);break}}return t},r.prototype.gtn=function(e){return 1===this.cmpn(e)},r.prototype.gt=function(e){return 1===this.cmp(e)},r.prototype.gten=function(e){return this.cmpn(e)>=0},r.prototype.gte=function(e){return this.cmp(e)>=0},r.prototype.ltn=function(e){return-1===this.cmpn(e)},r.prototype.lt=function(e){return-1===this.cmp(e)},r.prototype.lten=function(e){return this.cmpn(e)<=0},r.prototype.lte=function(e){return this.cmp(e)<=0},r.prototype.eqn=function(e){return 0===this.cmpn(e)},r.prototype.eq=function(e){return 0===this.cmp(e)},r.red=function(e){return new k(e)},r.prototype.toRed=function(e){return o(!this.red,"Already a number in reduction context"),o(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},r.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(e){return this.red=e,this},r.prototype.forceRed=function(e){return o(!this.red,"Already a number in reduction context"),this._forceRed(e)},r.prototype.redAdd=function(e){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},r.prototype.redIAdd=function(e){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},r.prototype.redSub=function(e){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},r.prototype.redISub=function(e){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},r.prototype.redShl=function(e){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},r.prototype.redMul=function(e){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},r.prototype.redIMul=function(e){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},r.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(e){return o(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var _={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new r(t,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function S(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function C(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function T(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=r._prime(e);this.m=t.p,this.prime=t}else o(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function I(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new r(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var o=t<this.n?-1:n.ucmp(this.p);return 0===o?(n.words[0]=0,n.length=1):o>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},i(S,b),S.prototype.split=function(e,t){for(var n=Math.min(e.length,9),o=0;o<n;o++)t.words[o]=e.words[o];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,o=10;o<e.length;o++){var r=0|e.words[o];e.words[o-10]=(4194303&r)<<4|i>>>22,i=r}i>>>=22,e.words[o-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},S.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var o=0|e.words[n];t+=977*o,e.words[n]=67108863&t,t=64*o+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(M,b),i(C,b),i(T,b),T.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var o=19*(0|e.words[n])+t,i=67108863&o;o>>>=26,e.words[n]=i,t=o}return 0!==t&&(e.words[e.length++]=t),e},r._prime=function(e){if(_[e])return _[e];var t;if("k256"===e)t=new S;else if("p224"===e)t=new M;else if("p192"===e)t=new C;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new T}return _[e]=t,t},k.prototype._verify1=function(e){o(0===e.negative,"red works only with positives"),o(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){o(0==(e.negative|t.negative),"red works only with positives"),o(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},k.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(o(t%2==1),3===t){var n=this.m.add(new r(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);o(!i.isZero());var s=new r(1).toRed(this),l=s.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new r(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,i),h=this.pow(e,i.addn(1).iushrn(1)),p=this.pow(e,i),f=a;0!==p.cmp(s);){for(var g=p,y=0;0!==g.cmp(s);y++)g=g.redSqr();o(y<f);var m=this.pow(d,new r(1).iushln(f-y-1));h=h.redMul(m),d=m.redSqr(),p=p.redMul(d),f=y}return h},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new r(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new r(1).toRed(this),n[1]=e;for(var o=2;o<n.length;o++)n[o]=this.mul(n[o-1],e);var i=n[0],a=0,s=0,l=t.bitLength()%26;for(0===l&&(l=26),o=t.length-1;o>=0;o--){for(var c=t.words[o],u=l-1;u>=0;u--){var d=c>>u&1;i!==n[0]&&(i=this.sqr(i)),0!==d||0!==a?(a<<=1,a|=d,(4==++s||0===o&&0===u)&&(i=this.mul(i,n[a]),s=0,a=0)):s=0}l=26}return i},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},r.mont=function(e){return new I(e)},i(I,k),I.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},I.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},I.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(o).iushrn(this.shift),r=i;return i.cmp(this.m)>=0?r=i.isub(this.m):i.cmpn(0)<0&&(r=i.iadd(this.m)),r._forceRed(this)},I.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new r(0)._forceRed(this);var n=e.mul(t),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(o).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},I.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}})(void 0===t||t,this)},{buffer:19}],16:[function(e,t,n){"use strict";n.byteLength=function(e){var t=c(e),n=t[0],o=t[1];return 3*(n+o)/4-o},n.toByteArray=function(e){var t,n,o=c(e),a=o[0],s=o[1],l=new r(u(0,a,s)),d=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[d++]=t>>16&255,l[d++]=t>>8&255,l[d++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[d++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[d++]=t>>8&255,l[d++]=255&t),l},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,r=[],a=0,s=n-i;a<s;a+=16383)r.push(d(e,a,a+16383>s?s:a+16383));return 1===i?(t=e[n-1],r.push(o[t>>2]+o[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],r.push(o[t>>10]+o[t>>4&63]+o[t<<2&63]+"=")),r.join("")};for(var o=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)o[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){return 3*(t+n)/4-n}function d(e,t,n){for(var i,r,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(o[(r=i)>>18&63]+o[r>>12&63]+o[r>>6&63]+o[63&r]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],17:[function(e,t){(function(t,n){"use strict";function o(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function r(e,t,n){if(r.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var a;"object"==typeof t?t.exports=r:n.BN=r,r.BN=r,r.wordSize=26;try{a="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:e("buffer").Buffer}catch(R){}function s(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void o(!1,"Invalid character in "+e)}function l(e,t,n){var o=s(e,n);return n-1>=t&&(o|=s(e,n-1)<<4),o}function c(e,t,n,i){for(var r=0,a=0,s=Math.min(e.length,n),l=t;l<s;l++){var c=e.charCodeAt(l)-48;r*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,o(c>=0&&a<i,"Invalid character"),r+=a}return r}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(r.isBN=function(e){return e instanceof r||null!==e&&"object"==typeof e&&e.constructor.wordSize===r.wordSize&&Array.isArray(e.words)},r.max=function(e,t){return e.cmp(t)>0?e:t},r.min=function(e,t){return e.cmp(t)<0?e:t},r.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),o(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},r.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(o(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},r.prototype._initArray=function(e,t,n){if(o("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var r,a,s=0;if("be"===n)for(i=e.length-1,r=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[r]|=a<<s&67108863,this.words[r+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,r++);else if("le"===n)for(i=0,r=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[r]|=a<<s&67108863,this.words[r+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,r++);return this._strip()},r.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var i,r=0,a=0;if("be"===n)for(o=e.length-1;o>=t;o-=2)i=l(e,t,o)<<r,this.words[a]|=67108863&i,r>=18?(r-=18,a+=1,this.words[a]|=i>>>26):r+=8;else for(o=(e.length-t)%2==0?t+1:t;o<e.length;o+=2)i=l(e,t,o)<<r,this.words[a]|=67108863&i,r>=18?(r-=18,a+=1,this.words[a]|=i>>>26):r+=8;this._strip()},r.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var o=0,i=1;i<=67108863;i*=t)o++;o--,i=i/t|0;for(var r=e.length-n,a=r%o,s=Math.min(r,r-a)+n,l=0,u=n;u<s;u+=o)l=c(e,u,u+o,t),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==a){var d=1;for(l=c(e,u,e.length,t),u=0;u<a;u++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this._strip()},r.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},r.prototype._move=function(e){u(e,this)},r.prototype.clone=function(){var e=new r(null);return this.copy(e),e},r.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},r.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(R){r.prototype.inspect=d}else r.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,r=0,a=0;a<this.length;a++){var s=this.words[a],l=(16777215&(s<<i|r)).toString(16);r=s>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),n=0!==r||a!==this.length-1?h[6-l.length]+l+n:l+n}for(0!==r&&(n=r.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=p[e],u=f[e];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var g=d.modrn(u).toString(e);n=(d=d.idivn(u)).isZero()?g+n:h[c-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}o(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&o(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},r.prototype.toJSON=function(){return this.toString(16,2)},a&&(r.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),r.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};var g=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)};function y(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var o=n/26|0,i=n%26;t[n]=e.words[o]>>>i&1}return t}function m(e,t,n){n.negative=t.negative^e.negative;var o=e.length+t.length|0;n.length=o,o=o-1|0;var i=0|e.words[0],r=0|t.words[0],a=i*r,s=67108863&a,l=a/67108864|0;n.words[0]=s;for(var c=1;c<o;c++){for(var u=l>>>26,d=67108863&l,h=Math.min(c,t.length-1),p=Math.max(0,c-e.length+1);p<=h;p++){var f=c-p|0;u+=(a=(i=0|e.words[f])*(r=0|t.words[p])+d)/67108864|0,d=67108863&a}n.words[c]=0|d,l=0|u}return 0!==l?n.words[c]=0|l:n.length--,n._strip()}r.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),r=n||Math.max(1,i);o(i<=r,"byte array longer than desired length"),o(r>0,"Requested array length <= 0");var a=g(e,r);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,i),a},r.prototype._toArrayLikeLE=function(e){for(var t=0,n=0,o=0,i=0;o<this.length;o++){var r=this.words[o]<<i|n;e[t++]=255&r,t<e.length&&(e[t++]=r>>8&255),t<e.length&&(e[t++]=r>>16&255),6===i?(t<e.length&&(e[t++]=r>>24&255),n=0,i=0):(n=r>>>24,i+=2)}if(t<e.length)for(e[t++]=n;t<e.length;)e[t++]=0},r.prototype._toArrayLikeBE=function(e){for(var t=e.length-1,n=0,o=0,i=0;o<this.length;o++){var r=this.words[o]<<i|n;e[t--]=255&r,t>=0&&(e[t--]=r>>8&255),t>=0&&(e[t--]=r>>16&255),6===i?(t>=0&&(e[t--]=r>>24&255),n=0,i=0):(n=r>>>24,i+=2)}if(t>=0)for(e[t--]=n;t>=0;)e[t--]=0},Math.clz32?r.prototype._countBits=function(e){return 32-Math.clz32(e)}:r.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},r.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},r.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},r.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return 0!==this.negative},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},r.prototype.ior=function(e){return o(0==(this.negative|e.negative)),this.iuor(e)},r.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},r.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},r.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},r.prototype.iand=function(e){return o(0==(this.negative|e.negative)),this.iuand(e)},r.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},r.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},r.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var o=0;o<n.length;o++)this.words[o]=t.words[o]^n.words[o];if(this!==t)for(;o<t.length;o++)this.words[o]=t.words[o];return this.length=t.length,this._strip()},r.prototype.ixor=function(e){return o(0==(this.negative|e.negative)),this.iuxor(e)},r.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},r.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},r.prototype.inotn=function(e){o("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},r.prototype.notn=function(e){return this.clone().inotn(e)},r.prototype.setn=function(e,t){o("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},r.prototype.iadd=function(e){var t,n,o;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,o=e):(n=e,o=this);for(var i=0,r=0;r<o.length;r++)t=(0|n.words[r])+(0|o.words[r])+i,this.words[r]=67108863&t,i=t>>>26;for(;0!==i&&r<n.length;r++)t=(0|n.words[r])+i,this.words[r]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;r<n.length;r++)this.words[r]=n.words[r];return this},r.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},r.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,o,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,o=e):(n=e,o=this);for(var r=0,a=0;a<o.length;a++)r=(t=(0|n.words[a])-(0|o.words[a])+r)>>26,this.words[a]=67108863&t;for(;0!==r&&a<n.length;a++)r=(t=(0|n.words[a])+r)>>26,this.words[a]=67108863&t;if(0===r&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(e){return this.clone().isub(e)};var v=function(e,t,n){var o,i,r,a=e.words,s=t.words,l=n.words,c=0,u=0|a[0],d=8191&u,h=u>>>13,p=0|a[1],f=8191&p,g=p>>>13,y=0|a[2],m=8191&y,v=y>>>13,_=0|a[3],b=8191&_,S=_>>>13,M=0|a[4],C=8191&M,T=M>>>13,k=0|a[5],I=8191&k,E=k>>>13,w=0|a[6],P=8191&w,R=w>>>13,O=0|a[7],D=8191&O,A=O>>>13,L=0|a[8],B=8191&L,U=L>>>13,N=0|a[9],j=8191&N,x=N>>>13,G=0|s[0],H=8191&G,F=G>>>13,V=0|s[1],q=8191&V,Q=V>>>13,Y=0|s[2],K=8191&Y,W=Y>>>13,z=0|s[3],J=8191&z,X=z>>>13,Z=0|s[4],$=8191&Z,ee=Z>>>13,te=0|s[5],ne=8191&te,oe=te>>>13,ie=0|s[6],re=8191&ie,ae=ie>>>13,se=0|s[7],le=8191&se,ce=se>>>13,ue=0|s[8],de=8191&ue,he=ue>>>13,pe=0|s[9],fe=8191&pe,ge=pe>>>13;n.negative=e.negative^t.negative,n.length=19;var ye=(c+(o=Math.imul(d,H))|0)+((8191&(i=(i=Math.imul(d,F))+Math.imul(h,H)|0))<<13)|0;c=((r=Math.imul(h,F))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,o=Math.imul(f,H),i=(i=Math.imul(f,F))+Math.imul(g,H)|0,r=Math.imul(g,F);var me=(c+(o=o+Math.imul(d,q)|0)|0)+((8191&(i=(i=i+Math.imul(d,Q)|0)+Math.imul(h,q)|0))<<13)|0;c=((r=r+Math.imul(h,Q)|0)+(i>>>13)|0)+(me>>>26)|0,me&=67108863,o=Math.imul(m,H),i=(i=Math.imul(m,F))+Math.imul(v,H)|0,r=Math.imul(v,F),o=o+Math.imul(f,q)|0,i=(i=i+Math.imul(f,Q)|0)+Math.imul(g,q)|0,r=r+Math.imul(g,Q)|0;var ve=(c+(o=o+Math.imul(d,K)|0)|0)+((8191&(i=(i=i+Math.imul(d,W)|0)+Math.imul(h,K)|0))<<13)|0;c=((r=r+Math.imul(h,W)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,o=Math.imul(b,H),i=(i=Math.imul(b,F))+Math.imul(S,H)|0,r=Math.imul(S,F),o=o+Math.imul(m,q)|0,i=(i=i+Math.imul(m,Q)|0)+Math.imul(v,q)|0,r=r+Math.imul(v,Q)|0,o=o+Math.imul(f,K)|0,i=(i=i+Math.imul(f,W)|0)+Math.imul(g,K)|0,r=r+Math.imul(g,W)|0;var _e=(c+(o=o+Math.imul(d,J)|0)|0)+((8191&(i=(i=i+Math.imul(d,X)|0)+Math.imul(h,J)|0))<<13)|0;c=((r=r+Math.imul(h,X)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,o=Math.imul(C,H),i=(i=Math.imul(C,F))+Math.imul(T,H)|0,r=Math.imul(T,F),o=o+Math.imul(b,q)|0,i=(i=i+Math.imul(b,Q)|0)+Math.imul(S,q)|0,r=r+Math.imul(S,Q)|0,o=o+Math.imul(m,K)|0,i=(i=i+Math.imul(m,W)|0)+Math.imul(v,K)|0,r=r+Math.imul(v,W)|0,o=o+Math.imul(f,J)|0,i=(i=i+Math.imul(f,X)|0)+Math.imul(g,J)|0,r=r+Math.imul(g,X)|0;var be=(c+(o=o+Math.imul(d,$)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,$)|0))<<13)|0;c=((r=r+Math.imul(h,ee)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,o=Math.imul(I,H),i=(i=Math.imul(I,F))+Math.imul(E,H)|0,r=Math.imul(E,F),o=o+Math.imul(C,q)|0,i=(i=i+Math.imul(C,Q)|0)+Math.imul(T,q)|0,r=r+Math.imul(T,Q)|0,o=o+Math.imul(b,K)|0,i=(i=i+Math.imul(b,W)|0)+Math.imul(S,K)|0,r=r+Math.imul(S,W)|0,o=o+Math.imul(m,J)|0,i=(i=i+Math.imul(m,X)|0)+Math.imul(v,J)|0,r=r+Math.imul(v,X)|0,o=o+Math.imul(f,$)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(g,$)|0,r=r+Math.imul(g,ee)|0;var Se=(c+(o=o+Math.imul(d,ne)|0)|0)+((8191&(i=(i=i+Math.imul(d,oe)|0)+Math.imul(h,ne)|0))<<13)|0;c=((r=r+Math.imul(h,oe)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,o=Math.imul(P,H),i=(i=Math.imul(P,F))+Math.imul(R,H)|0,r=Math.imul(R,F),o=o+Math.imul(I,q)|0,i=(i=i+Math.imul(I,Q)|0)+Math.imul(E,q)|0,r=r+Math.imul(E,Q)|0,o=o+Math.imul(C,K)|0,i=(i=i+Math.imul(C,W)|0)+Math.imul(T,K)|0,r=r+Math.imul(T,W)|0,o=o+Math.imul(b,J)|0,i=(i=i+Math.imul(b,X)|0)+Math.imul(S,J)|0,r=r+Math.imul(S,X)|0,o=o+Math.imul(m,$)|0,i=(i=i+Math.imul(m,ee)|0)+Math.imul(v,$)|0,r=r+Math.imul(v,ee)|0,o=o+Math.imul(f,ne)|0,i=(i=i+Math.imul(f,oe)|0)+Math.imul(g,ne)|0,r=r+Math.imul(g,oe)|0;var Me=(c+(o=o+Math.imul(d,re)|0)|0)+((8191&(i=(i=i+Math.imul(d,ae)|0)+Math.imul(h,re)|0))<<13)|0;c=((r=r+Math.imul(h,ae)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,o=Math.imul(D,H),i=(i=Math.imul(D,F))+Math.imul(A,H)|0,r=Math.imul(A,F),o=o+Math.imul(P,q)|0,i=(i=i+Math.imul(P,Q)|0)+Math.imul(R,q)|0,r=r+Math.imul(R,Q)|0,o=o+Math.imul(I,K)|0,i=(i=i+Math.imul(I,W)|0)+Math.imul(E,K)|0,r=r+Math.imul(E,W)|0,o=o+Math.imul(C,J)|0,i=(i=i+Math.imul(C,X)|0)+Math.imul(T,J)|0,r=r+Math.imul(T,X)|0,o=o+Math.imul(b,$)|0,i=(i=i+Math.imul(b,ee)|0)+Math.imul(S,$)|0,r=r+Math.imul(S,ee)|0,o=o+Math.imul(m,ne)|0,i=(i=i+Math.imul(m,oe)|0)+Math.imul(v,ne)|0,r=r+Math.imul(v,oe)|0,o=o+Math.imul(f,re)|0,i=(i=i+Math.imul(f,ae)|0)+Math.imul(g,re)|0,r=r+Math.imul(g,ae)|0;var Ce=(c+(o=o+Math.imul(d,le)|0)|0)+((8191&(i=(i=i+Math.imul(d,ce)|0)+Math.imul(h,le)|0))<<13)|0;c=((r=r+Math.imul(h,ce)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,o=Math.imul(B,H),i=(i=Math.imul(B,F))+Math.imul(U,H)|0,r=Math.imul(U,F),o=o+Math.imul(D,q)|0,i=(i=i+Math.imul(D,Q)|0)+Math.imul(A,q)|0,r=r+Math.imul(A,Q)|0,o=o+Math.imul(P,K)|0,i=(i=i+Math.imul(P,W)|0)+Math.imul(R,K)|0,r=r+Math.imul(R,W)|0,o=o+Math.imul(I,J)|0,i=(i=i+Math.imul(I,X)|0)+Math.imul(E,J)|0,r=r+Math.imul(E,X)|0,o=o+Math.imul(C,$)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(T,$)|0,r=r+Math.imul(T,ee)|0,o=o+Math.imul(b,ne)|0,i=(i=i+Math.imul(b,oe)|0)+Math.imul(S,ne)|0,r=r+Math.imul(S,oe)|0,o=o+Math.imul(m,re)|0,i=(i=i+Math.imul(m,ae)|0)+Math.imul(v,re)|0,r=r+Math.imul(v,ae)|0,o=o+Math.imul(f,le)|0,i=(i=i+Math.imul(f,ce)|0)+Math.imul(g,le)|0,r=r+Math.imul(g,ce)|0;var Te=(c+(o=o+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;c=((r=r+Math.imul(h,he)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,o=Math.imul(j,H),i=(i=Math.imul(j,F))+Math.imul(x,H)|0,r=Math.imul(x,F),o=o+Math.imul(B,q)|0,i=(i=i+Math.imul(B,Q)|0)+Math.imul(U,q)|0,r=r+Math.imul(U,Q)|0,o=o+Math.imul(D,K)|0,i=(i=i+Math.imul(D,W)|0)+Math.imul(A,K)|0,r=r+Math.imul(A,W)|0,o=o+Math.imul(P,J)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(R,J)|0,r=r+Math.imul(R,X)|0,o=o+Math.imul(I,$)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(E,$)|0,r=r+Math.imul(E,ee)|0,o=o+Math.imul(C,ne)|0,i=(i=i+Math.imul(C,oe)|0)+Math.imul(T,ne)|0,r=r+Math.imul(T,oe)|0,o=o+Math.imul(b,re)|0,i=(i=i+Math.imul(b,ae)|0)+Math.imul(S,re)|0,r=r+Math.imul(S,ae)|0,o=o+Math.imul(m,le)|0,i=(i=i+Math.imul(m,ce)|0)+Math.imul(v,le)|0,r=r+Math.imul(v,ce)|0,o=o+Math.imul(f,de)|0,i=(i=i+Math.imul(f,he)|0)+Math.imul(g,de)|0,r=r+Math.imul(g,he)|0;var ke=(c+(o=o+Math.imul(d,fe)|0)|0)+((8191&(i=(i=i+Math.imul(d,ge)|0)+Math.imul(h,fe)|0))<<13)|0;c=((r=r+Math.imul(h,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,o=Math.imul(j,q),i=(i=Math.imul(j,Q))+Math.imul(x,q)|0,r=Math.imul(x,Q),o=o+Math.imul(B,K)|0,i=(i=i+Math.imul(B,W)|0)+Math.imul(U,K)|0,r=r+Math.imul(U,W)|0,o=o+Math.imul(D,J)|0,i=(i=i+Math.imul(D,X)|0)+Math.imul(A,J)|0,r=r+Math.imul(A,X)|0,o=o+Math.imul(P,$)|0,i=(i=i+Math.imul(P,ee)|0)+Math.imul(R,$)|0,r=r+Math.imul(R,ee)|0,o=o+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(E,ne)|0,r=r+Math.imul(E,oe)|0,o=o+Math.imul(C,re)|0,i=(i=i+Math.imul(C,ae)|0)+Math.imul(T,re)|0,r=r+Math.imul(T,ae)|0,o=o+Math.imul(b,le)|0,i=(i=i+Math.imul(b,ce)|0)+Math.imul(S,le)|0,r=r+Math.imul(S,ce)|0,o=o+Math.imul(m,de)|0,i=(i=i+Math.imul(m,he)|0)+Math.imul(v,de)|0,r=r+Math.imul(v,he)|0;var Ie=(c+(o=o+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ge)|0)+Math.imul(g,fe)|0))<<13)|0;c=((r=r+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,o=Math.imul(j,K),i=(i=Math.imul(j,W))+Math.imul(x,K)|0,r=Math.imul(x,W),o=o+Math.imul(B,J)|0,i=(i=i+Math.imul(B,X)|0)+Math.imul(U,J)|0,r=r+Math.imul(U,X)|0,o=o+Math.imul(D,$)|0,i=(i=i+Math.imul(D,ee)|0)+Math.imul(A,$)|0,r=r+Math.imul(A,ee)|0,o=o+Math.imul(P,ne)|0,i=(i=i+Math.imul(P,oe)|0)+Math.imul(R,ne)|0,r=r+Math.imul(R,oe)|0,o=o+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ae)|0)+Math.imul(E,re)|0,r=r+Math.imul(E,ae)|0,o=o+Math.imul(C,le)|0,i=(i=i+Math.imul(C,ce)|0)+Math.imul(T,le)|0,r=r+Math.imul(T,ce)|0,o=o+Math.imul(b,de)|0,i=(i=i+Math.imul(b,he)|0)+Math.imul(S,de)|0,r=r+Math.imul(S,he)|0;var Ee=(c+(o=o+Math.imul(m,fe)|0)|0)+((8191&(i=(i=i+Math.imul(m,ge)|0)+Math.imul(v,fe)|0))<<13)|0;c=((r=r+Math.imul(v,ge)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,o=Math.imul(j,J),i=(i=Math.imul(j,X))+Math.imul(x,J)|0,r=Math.imul(x,X),o=o+Math.imul(B,$)|0,i=(i=i+Math.imul(B,ee)|0)+Math.imul(U,$)|0,r=r+Math.imul(U,ee)|0,o=o+Math.imul(D,ne)|0,i=(i=i+Math.imul(D,oe)|0)+Math.imul(A,ne)|0,r=r+Math.imul(A,oe)|0,o=o+Math.imul(P,re)|0,i=(i=i+Math.imul(P,ae)|0)+Math.imul(R,re)|0,r=r+Math.imul(R,ae)|0,o=o+Math.imul(I,le)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(E,le)|0,r=r+Math.imul(E,ce)|0,o=o+Math.imul(C,de)|0,i=(i=i+Math.imul(C,he)|0)+Math.imul(T,de)|0,r=r+Math.imul(T,he)|0;var we=(c+(o=o+Math.imul(b,fe)|0)|0)+((8191&(i=(i=i+Math.imul(b,ge)|0)+Math.imul(S,fe)|0))<<13)|0;c=((r=r+Math.imul(S,ge)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,o=Math.imul(j,$),i=(i=Math.imul(j,ee))+Math.imul(x,$)|0,r=Math.imul(x,ee),o=o+Math.imul(B,ne)|0,i=(i=i+Math.imul(B,oe)|0)+Math.imul(U,ne)|0,r=r+Math.imul(U,oe)|0,o=o+Math.imul(D,re)|0,i=(i=i+Math.imul(D,ae)|0)+Math.imul(A,re)|0,r=r+Math.imul(A,ae)|0,o=o+Math.imul(P,le)|0,i=(i=i+Math.imul(P,ce)|0)+Math.imul(R,le)|0,r=r+Math.imul(R,ce)|0,o=o+Math.imul(I,de)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(E,de)|0,r=r+Math.imul(E,he)|0;var Pe=(c+(o=o+Math.imul(C,fe)|0)|0)+((8191&(i=(i=i+Math.imul(C,ge)|0)+Math.imul(T,fe)|0))<<13)|0;c=((r=r+Math.imul(T,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,o=Math.imul(j,ne),i=(i=Math.imul(j,oe))+Math.imul(x,ne)|0,r=Math.imul(x,oe),o=o+Math.imul(B,re)|0,i=(i=i+Math.imul(B,ae)|0)+Math.imul(U,re)|0,r=r+Math.imul(U,ae)|0,o=o+Math.imul(D,le)|0,i=(i=i+Math.imul(D,ce)|0)+Math.imul(A,le)|0,r=r+Math.imul(A,ce)|0,o=o+Math.imul(P,de)|0,i=(i=i+Math.imul(P,he)|0)+Math.imul(R,de)|0,r=r+Math.imul(R,he)|0;var Re=(c+(o=o+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ge)|0)+Math.imul(E,fe)|0))<<13)|0;c=((r=r+Math.imul(E,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,o=Math.imul(j,re),i=(i=Math.imul(j,ae))+Math.imul(x,re)|0,r=Math.imul(x,ae),o=o+Math.imul(B,le)|0,i=(i=i+Math.imul(B,ce)|0)+Math.imul(U,le)|0,r=r+Math.imul(U,ce)|0,o=o+Math.imul(D,de)|0,i=(i=i+Math.imul(D,he)|0)+Math.imul(A,de)|0,r=r+Math.imul(A,he)|0;var Oe=(c+(o=o+Math.imul(P,fe)|0)|0)+((8191&(i=(i=i+Math.imul(P,ge)|0)+Math.imul(R,fe)|0))<<13)|0;c=((r=r+Math.imul(R,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,o=Math.imul(j,le),i=(i=Math.imul(j,ce))+Math.imul(x,le)|0,r=Math.imul(x,ce),o=o+Math.imul(B,de)|0,i=(i=i+Math.imul(B,he)|0)+Math.imul(U,de)|0,r=r+Math.imul(U,he)|0;var De=(c+(o=o+Math.imul(D,fe)|0)|0)+((8191&(i=(i=i+Math.imul(D,ge)|0)+Math.imul(A,fe)|0))<<13)|0;c=((r=r+Math.imul(A,ge)|0)+(i>>>13)|0)+(De>>>26)|0,De&=67108863,o=Math.imul(j,de),i=(i=Math.imul(j,he))+Math.imul(x,de)|0,r=Math.imul(x,he);var Ae=(c+(o=o+Math.imul(B,fe)|0)|0)+((8191&(i=(i=i+Math.imul(B,ge)|0)+Math.imul(U,fe)|0))<<13)|0;c=((r=r+Math.imul(U,ge)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863;var Le=(c+(o=Math.imul(j,fe))|0)+((8191&(i=(i=Math.imul(j,ge))+Math.imul(x,fe)|0))<<13)|0;return c=((r=Math.imul(x,ge))+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,l[0]=ye,l[1]=me,l[2]=ve,l[3]=_e,l[4]=be,l[5]=Se,l[6]=Me,l[7]=Ce,l[8]=Te,l[9]=ke,l[10]=Ie,l[11]=Ee,l[12]=we,l[13]=Pe,l[14]=Re,l[15]=Oe,l[16]=De,l[17]=Ae,l[18]=Le,0!==c&&(l[19]=c,n.length++),n};function _(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var o=0,i=0,r=0;r<n.length-1;r++){var a=i;i=0;for(var s=67108863&o,l=Math.min(r,t.length-1),c=Math.max(0,r-e.length+1);c<=l;c++){var u=r-c,d=(0|e.words[u])*(0|t.words[c]),h=67108863&d;s=67108863&(h=h+s|0),i+=(a=(a=a+(d/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}n.words[r]=s,o=a,a=i}return 0!==o?n.words[r]=o:n.length--,n._strip()}function b(e,t,n){return _(e,t,n)}function S(e,t){this.x=e,this.y=t}Math.imul||(v=m),r.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?v(this,e,t):n<63?m(this,e,t):n<1024?_(this,e,t):b(this,e,t)},S.prototype.makeRBT=function(e){for(var t=new Array(e),n=r.prototype._countBits(e)-1,o=0;o<e;o++)t[o]=this.revBin(o,n,e);return t},S.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var o=0,i=0;i<t;i++)o|=(1&e)<<t-i-1,e>>=1;return o},S.prototype.permute=function(e,t,n,o,i,r){for(var a=0;a<r;a++)o[a]=t[e[a]],i[a]=n[e[a]]},S.prototype.transform=function(e,t,n,o,i,r){this.permute(r,e,t,n,o,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),u=0;u<i;u+=s)for(var d=l,h=c,p=0;p<a;p++){var f=n[u+p],g=o[u+p],y=n[u+p+a],m=o[u+p+a],v=d*y-h*m;m=d*m+h*y,y=v,n[u+p]=f+y,o[u+p]=g+m,n[u+p+a]=f-y,o[u+p+a]=g-m,p!==s&&(v=l*d-c*h,h=l*h+c*d,d=v)}},S.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),o=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+o},S.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var o=0;o<n/2;o++){var i=e[o];e[o]=e[n-o-1],e[n-o-1]=i,i=t[o],t[o]=-t[n-o-1],t[n-o-1]=-i}},S.prototype.normalize13b=function(e,t){for(var n=0,o=0;o<t/2;o++){var i=8192*Math.round(e[2*o+1]/t)+Math.round(e[2*o]/t)+n;e[o]=67108863&i,n=i<67108864?0:i/67108864|0}return e},S.prototype.convert13b=function(e,t,n,i){for(var r=0,a=0;a<t;a++)r+=0|e[a],n[2*a]=8191&r,r>>>=13,n[2*a+1]=8191&r,r>>>=13;for(a=2*t;a<i;++a)n[a]=0;o(0===r),o(0==(-8192&r))},S.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},S.prototype.mulp=function(e,t,n){var o=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(o),r=this.stub(o),a=new Array(o),s=new Array(o),l=new Array(o),c=new Array(o),u=new Array(o),d=new Array(o),h=n.words;h.length=o,this.convert13b(e.words,e.length,a,o),this.convert13b(t.words,t.length,c,o),this.transform(a,r,s,l,o,i),this.transform(c,r,u,d,o,i);for(var p=0;p<o;p++){var f=s[p]*u[p]-l[p]*d[p];l[p]=s[p]*d[p]+l[p]*u[p],s[p]=f}return this.conjugate(s,l,o),this.transform(s,l,h,r,o,i),this.conjugate(h,r,o),this.normalize13b(h,o),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},r.prototype.mul=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},r.prototype.mulf=function(e){var t=new r(null);return t.words=new Array(this.length+e.length),b(this,e,t)},r.prototype.imul=function(e){return this.clone().mulTo(e,this)},r.prototype.imuln=function(e){var t=e<0;t&&(e=-e),o("number"==typeof e),o(e<67108864);for(var n=0,i=0;i<this.length;i++){var r=(0|this.words[i])*e,a=(67108863&r)+(67108863&n);n>>=26,n+=r/67108864|0,n+=a>>>26,this.words[i]=67108863&a}return 0!==n&&(this.words[i]=n,this.length++),t?this.ineg():this},r.prototype.muln=function(e){return this.clone().imuln(e)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(e){var t=y(e);if(0===t.length)return new r(1);for(var n=this,o=0;o<t.length&&0===t[o];o++,n=n.sqr());if(++o<t.length)for(var i=n.sqr();o<t.length;o++,i=i.sqr())0!==t[o]&&(n=n.mul(i));return n},r.prototype.iushln=function(e){o("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,r=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&r,l=(0|this.words[t])-s<<n;this.words[t]=l|a,a=s>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},r.prototype.ishln=function(e){return o(0===this.negative),this.iushln(e)},r.prototype.iushrn=function(e,t,n){var i;o("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var r=e%26,a=Math.min((e-r)/26,this.length),s=67108863^67108863>>>r<<r,l=n;if(i-=a,i=Math.max(0,i),l){for(var c=0;c<a;c++)l.words[c]=this.words[c];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var u=0;for(c=this.length-1;c>=0&&(0!==u||c>=i);c--){var d=0|this.words[c];this.words[c]=u<<26-r|d>>>r,u=d&s}return l&&0!==u&&(l.words[l.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(e,t,n){return o(0===this.negative),this.iushrn(e,t,n)},r.prototype.shln=function(e){return this.clone().ishln(e)},r.prototype.ushln=function(e){return this.clone().iushln(e)},r.prototype.shrn=function(e){return this.clone().ishrn(e)},r.prototype.ushrn=function(e){return this.clone().iushrn(e)},r.prototype.testn=function(e){o("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n||!(this.words[n]&i))},r.prototype.imaskn=function(e){o("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(o(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},r.prototype.maskn=function(e){return this.clone().imaskn(e)},r.prototype.iaddn=function(e){return o("number"==typeof e),o(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},r.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},r.prototype.isubn=function(e){if(o("number"==typeof e),o(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},r.prototype.addn=function(e){return this.clone().iaddn(e)},r.prototype.subn=function(e){return this.clone().isubn(e)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(e,t,n){var i,r,a=e.length+n;this._expand(a);var s=0;for(i=0;i<e.length;i++){r=(0|this.words[i+n])+s;var l=(0|e.words[i])*t;s=((r-=67108863&l)>>26)-(l/67108864|0),this.words[i+n]=67108863&r}for(;i<this.length-n;i++)s=(r=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&r;if(0===s)return this._strip();for(o(-1===s),s=0,i=0;i<this.length;i++)s=(r=-(0|this.words[i])+s)>>26,this.words[i]=67108863&r;return this.negative=1,this._strip()},r.prototype._wordDiv=function(e,t){var n=(this.length,e.length),o=this.clone(),i=e,a=0|i.words[i.length-1];0!=(n=26-this._countBits(a))&&(i=i.ushln(n),o.iushln(n),a=0|i.words[i.length-1]);var s,l=o.length-i.length;if("mod"!==t){(s=new r(null)).length=l+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var u=o.clone()._ishlnsubmul(i,1,l);0===u.negative&&(o=u,s&&(s.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|o.words[i.length+d])+(0|o.words[i.length+d-1]);for(h=Math.min(h/a|0,67108863),o._ishlnsubmul(i,h,d);0!==o.negative;)h--,o.negative=0,o._ishlnsubmul(i,1,d),o.isZero()||(o.negative^=1);s&&(s.words[d]=h)}return s&&s._strip(),o._strip(),"div"!==t&&0!==n&&o.iushrn(n),{div:s||null,mod:o}},r.prototype.divmod=function(e,t,n){return o(!e.isZero()),this.isZero()?{div:new r(0),mod:new r(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new r(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new r(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new r(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,a,s},r.prototype.div=function(e){return this.divmod(e,"div",!1).div},r.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},r.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},r.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,o=e.ushrn(1),i=e.andln(1),r=n.cmp(o);return r<0||1===i&&0===r?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},r.prototype.modrn=function(e){var t=e<0;t&&(e=-e),o(e<=67108863);for(var n=(1<<26)%e,i=0,r=this.length-1;r>=0;r--)i=(n*i+(0|this.words[r]))%e;return t?-i:i},r.prototype.modn=function(e){return this.modrn(e)},r.prototype.idivn=function(e){var t=e<0;t&&(e=-e),o(e<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var r=(0|this.words[i])+67108864*n;this.words[i]=r/e|0,n=r%e}return this._strip(),t?this.ineg():this},r.prototype.divn=function(e){return this.clone().idivn(e)},r.prototype.egcd=function(e){o(0===e.negative),o(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new r(1),a=new r(0),s=new r(0),l=new r(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(u),a.isub(d)),i.iushrn(1),a.iushrn(1);for(var f=0,g=1;0==(n.words[0]&g)&&f<26;++f,g<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(u),l.isub(d)),s.iushrn(1),l.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(s),a.isub(l)):(n.isub(t),s.isub(i),l.isub(a))}return{a:s,b:l,gcd:n.iushln(c)}},r.prototype._invmp=function(e){o(0===e.negative),o(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new r(1),s=new r(0),l=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,u=1;0==(t.words[0]&u)&&c<26;++c,u<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var d=0,h=1;0==(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(s)):(n.isub(t),s.isub(a))}return(i=0===t.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(e),i},r.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var o=0;t.isEven()&&n.isEven();o++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var r=t;t=n,n=r}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(o)},r.prototype.invm=function(e){return this.egcd(e).a.umod(e)},r.prototype.isEven=function(){return 0==(1&this.words[0])},r.prototype.isOdd=function(){return 1==(1&this.words[0])},r.prototype.andln=function(e){return this.words[0]&e},r.prototype.bincn=function(e){o("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var r=i,a=n;0!==r&&a<this.length;a++){var s=0|this.words[a];r=(s+=r)>>>26,s&=67108863,this.words[a]=s}return 0!==r&&(this.words[a]=r,this.length++),this},r.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},r.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),o(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},r.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},r.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var o=0|this.words[n],i=0|e.words[n];if(o!==i){o<i?t=-1:o>i&&(t=1);break}}return t},r.prototype.gtn=function(e){return 1===this.cmpn(e)},r.prototype.gt=function(e){return 1===this.cmp(e)},r.prototype.gten=function(e){return this.cmpn(e)>=0},r.prototype.gte=function(e){return this.cmp(e)>=0},r.prototype.ltn=function(e){return-1===this.cmpn(e)},r.prototype.lt=function(e){return-1===this.cmp(e)},r.prototype.lten=function(e){return this.cmpn(e)<=0},r.prototype.lte=function(e){return this.cmp(e)<=0},r.prototype.eqn=function(e){return 0===this.cmpn(e)},r.prototype.eq=function(e){return 0===this.cmp(e)},r.red=function(e){return new w(e)},r.prototype.toRed=function(e){return o(!this.red,"Already a number in reduction context"),o(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},r.prototype.fromRed=function(){return o(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(e){return this.red=e,this},r.prototype.forceRed=function(e){return o(!this.red,"Already a number in reduction context"),this._forceRed(e)},r.prototype.redAdd=function(e){return o(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},r.prototype.redIAdd=function(e){return o(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},r.prototype.redSub=function(e){return o(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},r.prototype.redISub=function(e){return o(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},r.prototype.redShl=function(e){return o(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},r.prototype.redMul=function(e){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},r.prototype.redIMul=function(e){return o(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},r.prototype.redSqr=function(){return o(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return o(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return o(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return o(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return o(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(e){return o(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var M={k256:null,p224:null,p192:null,p25519:null};function C(e,t){this.name=e,this.p=new r(t,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function T(){C.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){C.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function I(){C.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){C.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function w(e){if("string"==typeof e){var t=r._prime(e);this.m=t.p,this.prime=t}else o(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function P(e){w.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}C.prototype._tmp=function(){var e=new r(null);return e.words=new Array(Math.ceil(this.n/13)),e},C.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var o=t<this.n?-1:n.ucmp(this.p);return 0===o?(n.words[0]=0,n.length=1):o>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},C.prototype.split=function(e,t){e.iushrn(this.n,0,t)},C.prototype.imulK=function(e){return e.imul(this.k)},i(T,C),T.prototype.split=function(e,t){for(var n=Math.min(e.length,9),o=0;o<n;o++)t.words[o]=e.words[o];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,o=10;o<e.length;o++){var r=0|e.words[o];e.words[o-10]=(4194303&r)<<4|i>>>22,i=r}i>>>=22,e.words[o-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},T.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var o=0|e.words[n];t+=977*o,e.words[n]=67108863&t,t=64*o+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(k,C),i(I,C),i(E,C),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var o=19*(0|e.words[n])+t,i=67108863&o;o>>>=26,e.words[n]=i,t=o}return 0!==t&&(e.words[e.length++]=t),e},r._prime=function(e){if(M[e])return M[e];var t;if("k256"===e)t=new T;else if("p224"===e)t=new k;else if("p192"===e)t=new I;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return M[e]=t,t},w.prototype._verify1=function(e){o(0===e.negative,"red works only with positives"),o(e.red,"red works only with red numbers")},w.prototype._verify2=function(e,t){o(0==(e.negative|t.negative),"red works only with positives"),o(e.red&&e.red===t.red,"red works only with red numbers")},w.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},w.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},w.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},w.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},w.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},w.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},w.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},w.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},w.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},w.prototype.isqr=function(e){return this.imul(e,e.clone())},w.prototype.sqr=function(e){return this.mul(e,e)},w.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(o(t%2==1),3===t){var n=this.m.add(new r(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);o(!i.isZero());var s=new r(1).toRed(this),l=s.redNeg(),c=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new r(2*u*u).toRed(this);0!==this.pow(u,c).cmp(l);)u.redIAdd(l);for(var d=this.pow(u,i),h=this.pow(e,i.addn(1).iushrn(1)),p=this.pow(e,i),f=a;0!==p.cmp(s);){for(var g=p,y=0;0!==g.cmp(s);y++)g=g.redSqr();o(y<f);var m=this.pow(d,new r(1).iushln(f-y-1));h=h.redMul(m),d=m.redSqr(),p=p.redMul(d),f=y}return h},w.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},w.prototype.pow=function(e,t){if(t.isZero())return new r(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new r(1).toRed(this),n[1]=e;for(var o=2;o<n.length;o++)n[o]=this.mul(n[o-1],e);var i=n[0],a=0,s=0,l=t.bitLength()%26;for(0===l&&(l=26),o=t.length-1;o>=0;o--){for(var c=t.words[o],u=l-1;u>=0;u--){var d=c>>u&1;i!==n[0]&&(i=this.sqr(i)),0!==d||0!==a?(a<<=1,a|=d,(4==++s||0===o&&0===u)&&(i=this.mul(i,n[a]),s=0,a=0)):s=0}l=26}return i},w.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},w.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},r.mont=function(e){return new P(e)},i(P,w),P.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},P.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},P.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(o).iushrn(this.shift),r=i;return i.cmp(this.m)>=0?r=i.isub(this.m):i.cmpn(0)<0&&(r=i.iadd(this.m)),r._forceRed(this)},P.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new r(0)._forceRed(this);var n=e.mul(t),o=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(o).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},P.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}})(void 0===t||t,this)},{buffer:19}],18:[function(e,t){var n;function o(e){this.rand=e}if(t.exports=function(e){return n||(n=new o(null)),n.generate(e)},t.exports.Rand=o,o.prototype.generate=function(e){return this._rand(e)},o.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?o.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?o.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(o.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var i=e("crypto");if("function"!=typeof i.randomBytes)throw new Error("Not supported");o.prototype._rand=function(e){return i.randomBytes(e)}}catch(r){}},{crypto:19}],19:[function(){},{}],20:[function(e,t){var n=e("safe-buffer").Buffer;function o(e){n.isBuffer(e)||(e=n.from(e));for(var t=e.length/4|0,o=new Array(t),i=0;i<t;i++)o[i]=e.readUInt32BE(4*i);return o}function i(e){for(;0<e.length;e++)e[0]=0}function r(e,t,n,o,i){for(var r,a,s,l,c=n[0],u=n[1],d=n[2],h=n[3],p=e[0]^t[0],f=e[1]^t[1],g=e[2]^t[2],y=e[3]^t[3],m=4,v=1;v<i;v++)r=c[p>>>24]^u[f>>>16&255]^d[g>>>8&255]^h[255&y]^t[m++],a=c[f>>>24]^u[g>>>16&255]^d[y>>>8&255]^h[255&p]^t[m++],s=c[g>>>24]^u[y>>>16&255]^d[p>>>8&255]^h[255&f]^t[m++],l=c[y>>>24]^u[p>>>16&255]^d[f>>>8&255]^h[255&g]^t[m++],p=r,f=a,g=s,y=l;return r=(o[p>>>24]<<24|o[f>>>16&255]<<16|o[g>>>8&255]<<8|o[255&y])^t[m++],a=(o[f>>>24]<<24|o[g>>>16&255]<<16|o[y>>>8&255]<<8|o[255&p])^t[m++],s=(o[g>>>24]<<24|o[y>>>16&255]<<16|o[p>>>8&255]<<8|o[255&f])^t[m++],l=(o[y>>>24]<<24|o[p>>>16&255]<<16|o[f>>>8&255]<<8|o[255&g])^t[m++],[r>>>=0,a>>>=0,s>>>=0,l>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],s=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=[],o=[],i=[[],[],[],[]],r=[[],[],[],[]],a=0,s=0,l=0;l<256;++l){var c=s^s<<1^s<<2^s<<3^s<<4;c=c>>>8^255&c^99,n[a]=c,o[c]=a;var u=e[a],d=e[u],h=e[d],p=257*e[c]^16843008*c;i[0][a]=p<<24|p>>>8,i[1][a]=p<<16|p>>>16,i[2][a]=p<<8|p>>>24,i[3][a]=p,p=16843009*h^65537*d^257*u^16843008*a,r[0][c]=p<<24|p>>>8,r[1][c]=p<<16|p>>>16,r[2][c]=p<<8|p>>>24,r[3][c]=p,0===a?a=s=1:(a=u^e[e[e[h^u]]],s^=e[e[s]])}return{SBOX:n,INV_SBOX:o,SUB_MIX:i,INV_SUB_MIX:r}}();function l(e){this._key=o(e),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var e=this._key,t=e.length,n=t+6,o=4*(n+1),i=[],r=0;r<t;r++)i[r]=e[r];for(r=t;r<o;r++){var l=i[r-1];r%t==0?(l=l<<8|l>>>24,l=s.SBOX[l>>>24]<<24|s.SBOX[l>>>16&255]<<16|s.SBOX[l>>>8&255]<<8|s.SBOX[255&l],l^=a[r/t|0]<<24):t>6&&r%t==4&&(l=s.SBOX[l>>>24]<<24|s.SBOX[l>>>16&255]<<16|s.SBOX[l>>>8&255]<<8|s.SBOX[255&l]),i[r]=i[r-t]^l}for(var c=[],u=0;u<o;u++){var d=o-u,h=i[d-(u%4?0:4)];c[u]=u<4||d<=4?h:s.INV_SUB_MIX[0][s.SBOX[h>>>24]]^s.INV_SUB_MIX[1][s.SBOX[h>>>16&255]]^s.INV_SUB_MIX[2][s.SBOX[h>>>8&255]]^s.INV_SUB_MIX[3][s.SBOX[255&h]]}this._nRounds=n,this._keySchedule=i,this._invKeySchedule=c},l.prototype.encryptBlockRaw=function(e){return r(e=o(e),this._keySchedule,s.SUB_MIX,s.SBOX,this._nRounds)},l.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),o=n.allocUnsafe(16);return o.writeUInt32BE(t[0],0),o.writeUInt32BE(t[1],4),o.writeUInt32BE(t[2],8),o.writeUInt32BE(t[3],12),o},l.prototype.decryptBlock=function(e){var t=(e=o(e))[1];e[1]=e[3],e[3]=t;var i=r(e,this._invKeySchedule,s.INV_SUB_MIX,s.INV_SBOX,this._nRounds),a=n.allocUnsafe(16);return a.writeUInt32BE(i[0],0),a.writeUInt32BE(i[3],4),a.writeUInt32BE(i[2],8),a.writeUInt32BE(i[1],12),a},l.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},t.exports.AES=l},{"safe-buffer":182}],21:[function(e,t){var n=e("./aes"),o=e("safe-buffer").Buffer,i=e("cipher-base"),r=e("inherits"),a=e("./ghash"),s=e("buffer-xor"),l=e("./incr32");function c(e,t){var n=0;e.length!==t.length&&n++;for(var o=Math.min(e.length,t.length),i=0;i<o;++i)n+=e[i]^t[i];return n}function u(e,t,n){if(12===t.length)return e._finID=o.concat([t,o.from([0,0,0,1])]),o.concat([t,o.from([0,0,0,2])]);var i=new a(n),r=t.length,s=r%16;i.update(t),s&&(s=16-s,i.update(o.alloc(s,0))),i.update(o.alloc(8,0));var c=8*r,u=o.alloc(8);u.writeUIntBE(c,0,8),i.update(u),e._finID=i.state;var d=o.from(e._finID);return l(d),d}function d(e,t,r,s){i.call(this);var l=o.alloc(4,0);this._cipher=new n.AES(t);var c=this._cipher.encryptBlock(l);this._ghash=new a(c),r=u(this,r,c),this._prev=o.from(r),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}r(d,i),d.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=o.alloc(t,0),this._ghash.update(t))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},d.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=s(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&c(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},d.prototype.getAuthTag=function(){if(this._decrypt||!o.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},d.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},d.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},t.exports=d},{"./aes":20,"./ghash":25,"./incr32":26,"buffer-xor":64,"cipher-base":67,inherits:138,"safe-buffer":182}],22:[function(e,t,n){var o=e("./encrypter"),i=e("./decrypter"),r=e("./modes/list.json");n.createCipher=n.Cipher=o.createCipher,n.createCipheriv=n.Cipheriv=o.createCipheriv,n.createDecipher=n.Decipher=i.createDecipher,n.createDecipheriv=n.Decipheriv=i.createDecipheriv,n.listCiphers=n.getCiphers=function(){return Object.keys(r)}},{"./decrypter":23,"./encrypter":24,"./modes/list.json":34}],23:[function(e,t,n){var o=e("./authCipher"),i=e("safe-buffer").Buffer,r=e("./modes"),a=e("./streamCipher"),s=e("cipher-base"),l=e("./aes"),c=e("evp_bytestokey");function u(e,t,n){s.call(this),this._cache=new d,this._last=void 0,this._cipher=new l.AES(t),this._prev=i.from(n),this._mode=e,this._autopadding=!0}function d(){this.cache=i.allocUnsafe(0)}function h(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");for(var n=-1;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16!==t)return e.slice(0,16-t)}function p(e,t,n){var s=r[e.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=i.from(n)),"GCM"!==s.mode&&n.length!==s.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof t&&(t=i.from(t)),t.length!==s.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===s.type?new a(s.module,t,n,!0):"auth"===s.type?new o(s.module,t,n,!0):new u(s.module,t,n)}e("inherits")(u,s),u.prototype._update=function(e){var t,n;this._cache.add(e);for(var o=[];t=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,t),o.push(n);return i.concat(o)},u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return h(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=i.concat([this.cache,e])},d.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},n.createDecipher=function(e,t){var n=r[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var o=c(t,!1,n.key,n.iv);return p(e,o.key,o.iv)},n.createDecipheriv=p},{"./aes":20,"./authCipher":21,"./modes":33,"./streamCipher":36,"cipher-base":67,evp_bytestokey:105,inherits:138,"safe-buffer":182}],24:[function(e,t,n){var o=e("./modes"),i=e("./authCipher"),r=e("safe-buffer").Buffer,a=e("./streamCipher"),s=e("cipher-base"),l=e("./aes"),c=e("evp_bytestokey");function u(e,t,n){s.call(this),this._cache=new h,this._cipher=new l.AES(t),this._prev=r.from(n),this._mode=e,this._autopadding=!0}e("inherits")(u,s),u.prototype._update=function(e){var t,n;this._cache.add(e);for(var o=[];t=this._cache.get();)n=this._mode.encrypt(this,t),o.push(n);return r.concat(o)};var d=r.alloc(16,16);function h(){this.cache=r.allocUnsafe(0)}function p(e,t,n){var s=o[e.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=r.from(t)),t.length!==s.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof n&&(n=r.from(n)),"GCM"!==s.mode&&n.length!==s.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===s.type?new a(s.module,t,n):"auth"===s.type?new i(s.module,t,n):new u(s.module,t,n)}u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},h.prototype.add=function(e){this.cache=r.concat([this.cache,e])},h.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},h.prototype.flush=function(){for(var e=16-this.cache.length,t=r.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return r.concat([this.cache,t])},n.createCipheriv=p,n.createCipher=function(e,t){var n=o[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=c(t,!1,n.key,n.iv);return p(e,i.key,i.iv)}},{"./aes":20,"./authCipher":21,"./modes":33,"./streamCipher":36,"cipher-base":67,evp_bytestokey:105,inherits:138,"safe-buffer":182}],25:[function(e,t){var n=e("safe-buffer").Buffer,o=n.alloc(16,0);function i(e){var t=n.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function r(e){this.h=e,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}r.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},r.prototype._multiply=function(){for(var e,t,n,o=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],r=[0,0,0,0],a=-1;++a<128;){for(0!=(this.state[~~(a/8)]&1<<7-a%8)&&(r[0]^=o[0],r[1]^=o[1],r[2]^=o[2],r[3]^=o[3]),n=0!=(1&o[3]),t=3;t>0;t--)o[t]=o[t]>>>1|(1&o[t-1])<<31;o[0]=o[0]>>>1,n&&(o[0]=o[0]^225<<24)}this.state=i(r)},r.prototype.update=function(e){var t;for(this.cache=n.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},r.prototype.final=function(e,t){return this.cache.length&&this.ghash(n.concat([this.cache,o],16)),this.ghash(i([0,e,0,t])),this.state},t.exports=r},{"safe-buffer":182}],26:[function(e,t){t.exports=function(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}},{}],27:[function(e,t,n){var o=e("buffer-xor");n.encrypt=function(e,t){var n=o(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},n.decrypt=function(e,t){var n=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return o(i,n)}},{"buffer-xor":64}],28:[function(e,t,n){var o=e("safe-buffer").Buffer,i=e("buffer-xor");function r(e,t,n){var r=t.length,a=i(t,e._cache);return e._cache=e._cache.slice(r),e._prev=o.concat([e._prev,n?t:a]),a}n.encrypt=function(e,t,n){for(var i,a=o.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=o.allocUnsafe(0)),!(e._cache.length<=t.length)){a=o.concat([a,r(e,t,n)]);break}i=e._cache.length,a=o.concat([a,r(e,t.slice(0,i),n)]),t=t.slice(i)}return a}},{"buffer-xor":64,"safe-buffer":182}],29:[function(e,t,n){var o=e("safe-buffer").Buffer;function i(e,t,n){for(var o,i,a=-1,s=0;++a<8;)o=t&1<<7-a?128:0,s+=(128&(i=e._cipher.encryptBlock(e._prev)[0]^o))>>a%8,e._prev=r(e._prev,n?o:i);return s}function r(e,t){var n=e.length,i=-1,r=o.allocUnsafe(e.length);for(e=o.concat([e,o.from([t])]);++i<n;)r[i]=e[i]<<1|e[i+1]>>7;return r}n.encrypt=function(e,t,n){for(var r=t.length,a=o.allocUnsafe(r),s=-1;++s<r;)a[s]=i(e,t[s],n);return a}},{"safe-buffer":182}],30:[function(e,t,n){var o=e("safe-buffer").Buffer;function i(e,t,n){var i=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=o.concat([e._prev.slice(1),o.from([n?t:i])]),i}n.encrypt=function(e,t,n){for(var r=t.length,a=o.allocUnsafe(r),s=-1;++s<r;)a[s]=i(e,t[s],n);return a}},{"safe-buffer":182}],31:[function(e,t,n){var o=e("buffer-xor"),i=e("safe-buffer").Buffer,r=e("../incr32");function a(e){var t=e._cipher.encryptBlockRaw(e._prev);return r(e._prev),t}n.encrypt=function(e,t){var n=Math.ceil(t.length/16),r=e._cache.length;e._cache=i.concat([e._cache,i.allocUnsafe(16*n)]);for(var s=0;s<n;s++){var l=a(e),c=r+16*s;e._cache.writeUInt32BE(l[0],c+0),e._cache.writeUInt32BE(l[1],c+4),e._cache.writeUInt32BE(l[2],c+8),e._cache.writeUInt32BE(l[3],c+12)}var u=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),o(t,u)}},{"../incr32":26,"buffer-xor":64,"safe-buffer":182}],32:[function(e,t,n){n.encrypt=function(e,t){return e._cipher.encryptBlock(t)},n.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},{}],33:[function(e,t){var n={ECB:e("./ecb"),CBC:e("./cbc"),CFB:e("./cfb"),CFB8:e("./cfb8"),CFB1:e("./cfb1"),OFB:e("./ofb"),CTR:e("./ctr"),GCM:e("./ctr")},o=e("./list.json");for(var i in o)o[i].module=n[o[i].mode];t.exports=o},{"./cbc":27,"./cfb":28,"./cfb1":29,"./cfb8":30,"./ctr":31,"./ecb":32,"./list.json":34,"./ofb":35}],34:[function(e,t){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},{}],35:[function(e,t,n){(function(t){var o=e("buffer-xor");function i(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}n.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,i(e)]);var r=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),o(n,r)}}).call(this,e("buffer").Buffer)},{buffer:65,"buffer-xor":64}],36:[function(e,t){var n=e("./aes"),o=e("safe-buffer").Buffer,i=e("cipher-base");function r(e,t,r,a){i.call(this),this._cipher=new n.AES(t),this._prev=o.from(r),this._cache=o.allocUnsafe(0),this._secCache=o.allocUnsafe(0),this._decrypt=a,this._mode=e}e("inherits")(r,i),r.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},r.prototype._final=function(){this._cipher.scrub()},t.exports=r},{"./aes":20,"cipher-base":67,inherits:138,"safe-buffer":182}],37:[function(e,t,n){var o=e("browserify-des"),i=e("browserify-aes/browser"),r=e("browserify-aes/modes"),a=e("browserify-des/modes"),s=e("evp_bytestokey");function l(e,t,n){if(e=e.toLowerCase(),r[e])return i.createCipheriv(e,t,n);if(a[e])return new o({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function c(e,t,n){if(e=e.toLowerCase(),r[e])return i.createDecipheriv(e,t,n);if(a[e])return new o({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}n.createCipher=n.Cipher=function(e,t){var n,o;if(e=e.toLowerCase(),r[e])n=r[e].key,o=r[e].iv;else{if(!a[e])throw new TypeError("invalid suite type");n=8*a[e].key,o=a[e].iv}var i=s(t,!1,n,o);return l(e,i.key,i.iv)},n.createCipheriv=n.Cipheriv=l,n.createDecipher=n.Decipher=function(e,t){var n,o;if(e=e.toLowerCase(),r[e])n=r[e].key,o=r[e].iv;else{if(!a[e])throw new TypeError("invalid suite type");n=8*a[e].key,o=a[e].iv}var i=s(t,!1,n,o);return c(e,i.key,i.iv)},n.createDecipheriv=n.Decipheriv=c,n.listCiphers=n.getCiphers=function(){return Object.keys(a).concat(i.getCiphers())}},{"browserify-aes/browser":22,"browserify-aes/modes":33,"browserify-des":38,"browserify-des/modes":39,evp_bytestokey:105}],38:[function(e,t){var n=e("cipher-base"),o=e("des.js"),i=e("inherits"),r=e("safe-buffer").Buffer,a={"des-ede3-cbc":o.CBC.instantiate(o.EDE),"des-ede3":o.EDE,"des-ede-cbc":o.CBC.instantiate(o.EDE),"des-ede":o.EDE,"des-cbc":o.CBC.instantiate(o.DES),"des-ecb":o.DES};function s(e){n.call(this);var t,o=e.mode.toLowerCase(),i=a[o];t=e.decrypt?"decrypt":"encrypt";var s=e.key;r.isBuffer(s)||(s=r.from(s)),"des-ede"!==o&&"des-ede-cbc"!==o||(s=r.concat([s,s.slice(0,8)]));var l=e.iv;r.isBuffer(l)||(l=r.from(l)),this._des=i.create({key:s,iv:l,type:t})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=s,i(s,n),s.prototype._update=function(e){return r.from(this._des.update(e))},s.prototype._final=function(){return r.from(this._des.final())}},{"cipher-base":67,"des.js":76,inherits:138,"safe-buffer":182}],39:[function(e,t,n){n["des-ecb"]={key:8,iv:0},n["des-cbc"]=n.des={key:8,iv:8},n["des-ede3-cbc"]=n.des3={key:24,iv:8},n["des-ede3"]={key:24,iv:0},n["des-ede-cbc"]={key:16,iv:8},n["des-ede"]={key:16,iv:0}},{}],40:[function(e,t){(function(n){var o=e("bn.js"),i=e("randombytes");function r(e){var t=a(e);return{blinder:t.toRed(o.mont(e.modulus)).redPow(new o(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}function a(e){var t,n=e.modulus.byteLength();do{t=new o(i(n))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function s(e,t){var i=r(t),a=t.modulus.byteLength(),s=new o(e).mul(i.blinder).umod(t.modulus),l=s.toRed(o.mont(t.prime1)),c=s.toRed(o.mont(t.prime2)),u=t.coefficient,d=t.prime1,h=t.prime2,p=l.redPow(t.exponent1).fromRed(),f=c.redPow(t.exponent2).fromRed(),g=p.isub(f).imul(u).umod(d).imul(h);return f.iadd(g).imul(i.unblinder).umod(t.modulus).toArrayLike(n,"be",a)}s.getr=a,t.exports=s}).call(this,e("buffer").Buffer)},{"bn.js":17,buffer:65,randombytes:164}],41:[function(e,t){t.exports=e("./browser/algorithms.json")},{"./browser/algorithms.json":42}],42:[function(e,t){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},{}],43:[function(e,t){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},{}],44:[function(e,t){var n=e("safe-buffer").Buffer,o=e("create-hash"),i=e("readable-stream"),r=e("inherits"),a=e("./sign"),s=e("./verify"),l=e("./algorithms.json");function c(e){i.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=o(t.hash),this._tag=t.id,this._signType=t.sign}function u(e){i.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hash=o(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){return new c(e)}function h(e){return new u(e)}Object.keys(l).forEach(function(e){l[e].id=n.from(l[e].id,"hex"),l[e.toLowerCase()]=l[e]}),r(c,i.Writable),c.prototype._write=function(e,t,n){this._hash.update(e),n()},c.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},c.prototype.sign=function(e,t){this.end();var n=this._hash.digest(),o=a(n,e,this._hashType,this._signType,this._tag);return t?o.toString(t):o},r(u,i.Writable),u.prototype._write=function(e,t,n){this._hash.update(e),n()},u.prototype.update=function(e,t){return"string"==typeof e&&(e=n.from(e,t)),this._hash.update(e),this},u.prototype.verify=function(e,t,o){"string"==typeof t&&(t=n.from(t,o)),this.end();var i=this._hash.digest();return s(t,i,e,this._signType,this._tag)},t.exports={Sign:d,Verify:h,createSign:d,createVerify:h}},{"./algorithms.json":42,"./sign":45,"./verify":46,"create-hash":71,inherits:138,"readable-stream":61,"safe-buffer":62}],45:[function(e,t){var n=e("safe-buffer").Buffer,o=e("create-hmac"),i=e("browserify-rsa"),r=e("elliptic").ec,a=e("bn.js"),s=e("parse-asn1"),l=e("./curves.json");function c(e,t){var o=l[t.curve.join(".")];if(!o)throw new Error("unknown curve "+t.curve.join("."));var i=new r(o).keyFromPrivate(t.privateKey).sign(e);return n.from(i.toDER())}function u(e,t,n){for(var o,i=t.params.priv_key,r=t.params.p,s=t.params.q,l=t.params.g,c=new a(0),u=p(e,s).mod(s),f=!1,m=h(i,s,e,n);!1===f;)c=y(l,o=g(s,m,n),r,s),0===(f=o.invm(s).imul(u.add(i.mul(c))).mod(s)).cmpn(0)&&(f=!1,c=new a(0));return d(c,f)}function d(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e)),128&t[0]&&(t=[0].concat(t));var o=[48,e.length+t.length+4,2,e.length];return o=o.concat(e,[2,t.length],t),n.from(o)}function h(e,t,i,r){if((e=n.from(e.toArray())).length<t.byteLength()){var a=n.alloc(t.byteLength()-e.length);e=n.concat([a,e])}var s=i.length,l=f(i,t),c=n.alloc(s);c.fill(1);var u=n.alloc(s);return u=o(r,u).update(c).update(n.from([0])).update(e).update(l).digest(),c=o(r,u).update(c).digest(),{k:u=o(r,u).update(c).update(n.from([1])).update(e).update(l).digest(),v:c=o(r,u).update(c).digest()}}function p(e,t){var n=new a(e),o=(e.length<<3)-t.bitLength();return o>0&&n.ishrn(o),n}function f(e,t){e=(e=p(e,t)).mod(t);var o=n.from(e.toArray());if(o.length<t.byteLength()){var i=n.alloc(t.byteLength()-o.length);o=n.concat([i,o])}return o}function g(e,t,i){var r,a;do{for(r=n.alloc(0);8*r.length<e.bitLength();)t.v=o(i,t.k).update(t.v).digest(),r=n.concat([r,t.v]);a=p(r,e),t.k=o(i,t.k).update(t.v).update(n.from([0])).digest(),t.v=o(i,t.k).update(t.v).digest()}while(-1!==a.cmp(e));return a}function y(e,t,n,o){return e.toRed(a.mont(n)).redPow(t).fromRed().mod(o)}t.exports=function(e,t,o,r,a){var l=s(t);if(l.curve){if("ecdsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");return c(e,l)}if("dsa"===l.type){if("dsa"!==r)throw new Error("wrong private key type");return u(e,l,o)}if("rsa"!==r&&"ecdsa/rsa"!==r)throw new Error("wrong private key type");e=n.concat([a,e]);for(var d=l.modulus.byteLength(),h=[0,1];e.length+h.length+1<d;)h.push(255);h.push(0);for(var p=-1;++p<e.length;)h.push(e[p]);return i(h,l)},t.exports.getKey=h,t.exports.makeKey=g},{"./curves.json":43,"bn.js":17,"browserify-rsa":40,"create-hmac":73,elliptic:87,"parse-asn1":148,"safe-buffer":62}],46:[function(e,t){var n=e("safe-buffer").Buffer,o=e("bn.js"),i=e("elliptic").ec,r=e("parse-asn1"),a=e("./curves.json");function s(e,t,n){var o=a[n.data.algorithm.curve.join(".")];if(!o)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var r=new i(o),s=n.data.subjectPrivateKey.data;return r.verify(t,e,s)}function l(e,t,n){var i=n.data.p,a=n.data.q,s=n.data.g,l=n.data.pub_key,u=r.signature.decode(e,"der"),d=u.s,h=u.r;c(d,a),c(h,a);var p=o.mont(i),f=d.invm(a);return 0===s.toRed(p).redPow(new o(t).mul(f).mod(a)).fromRed().mul(l.toRed(p).redPow(h.mul(f).mod(a)).fromRed()).mod(i).mod(a).cmp(h)}function c(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}t.exports=function(e,t,i,a,c){var u=r(i);if("ec"===u.type){if("ecdsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong public key type");return s(e,t,u)}if("dsa"===u.type){if("dsa"!==a)throw new Error("wrong public key type");return l(e,t,u)}if("rsa"!==a&&"ecdsa/rsa"!==a)throw new Error("wrong public key type");t=n.concat([c,t]);for(var d=u.modulus.byteLength(),h=[1],p=0;t.length+h.length+2<d;)h.push(255),p++;h.push(0);for(var f=-1;++f<t.length;)h.push(t[f]);h=n.from(h);var g=o.mont(u.modulus);e=(e=new o(e).toRed(g)).redPow(new o(u.publicExponent)),e=n.from(e.fromRed().toArray());var y=p<8?1:0;for(d=Math.min(e.length,h.length),e.length!==h.length&&(y=1),f=-1;++f<d;)y|=e[f]^h[f];return 0===y}},{"./curves.json":43,"bn.js":17,elliptic:87,"parse-asn1":148,"safe-buffer":62}],47:[function(e,t){"use strict";var n={};function o(e,t,o){function i(e,n,o){return"string"==typeof t?t:t(e,n,o)}o||(o=Error);var r=function(e){var t,n;function o(t,n,o){return e.call(this,i(t,n,o))||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o}(o);r.prototype.name=o.name,r.prototype.code=e,n[e]=r}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}function r(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}function a(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}o("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),o("ERR_INVALID_ARG_TYPE",function(e,t,n){var o,s;if("string"==typeof t&&("not ","not "===t.substr(0,"not ".length))?(o="must not be",t=t.replace(/^not /,"")):o="must be",r(e," argument"))s="The ".concat(e," ").concat(o," ").concat(i(t,"type"));else{var l=a(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(l," ").concat(o," ").concat(i(t,"type"))}return s+". Received type ".concat(typeof n)},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n},{}],48:[function(e,t){(function(n){"use strict";var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var i=e("./_stream_readable"),r=e("./_stream_writable");e("inherits")(c,i);for(var a=o(r.prototype),s=0;s<a.length;s++){var l=a[s];c.prototype[l]||(c.prototype[l]=r.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,e("_process"))},{"./_stream_readable":50,"./_stream_writable":52,_process:156,inherits:138}],49:[function(e,t){"use strict";t.exports=o;var n=e("./_stream_transform");function o(e){if(!(this instanceof o))return new o(e);n.call(this,e)}e("inherits")(o,n),o.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":51,inherits:138}],50:[function(e,t){(function(n,o){"use strict";var i;t.exports=E,E.ReadableState=I,e("events").EventEmitter;var r=function(e,t){return e.listeners(t).length},a=e("./internal/streams/stream"),s=e("buffer").Buffer,l=o.Uint8Array||function(){};function c(e){return s.from(e)}var u,d=e("util");u=d&&d.debuglog?d.debuglog("stream"):function(){};var h,p,f,g=e("./internal/streams/buffer_list"),y=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,v=e("../errors").codes,_=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,S=v.ERR_METHOD_NOT_IMPLEMENTED,M=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(E,a);var C=y.errorOrDestroy,T=["error","close","destroy","pause","resume"];function k(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function I(t,n,o){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=n instanceof i),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",o),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=e("string_decoder/").StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function E(t){if(i=i||e("./_stream_duplex"),!(this instanceof E))return new E(t);var n=this instanceof i;this._readableState=new I(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function w(e,t,n,o,i){u("readableAddChunk",t);var r,a=e._readableState;if(null===t)a.reading=!1,L(e,a);else if(i||(r=R(a,t)),r)C(e,r);else if(a.objectMode||t&&t.length>0)if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===s.prototype||(t=c(t)),o)a.endEmitted?C(e,new M):P(e,a,t,!0);else if(a.ended)C(e,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?P(e,a,t,!1):N(e,a)):P(e,a,t,!1)}else o||(a.reading=!1,N(e,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function P(e,t,n,o){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&B(e)),N(e,t)}function R(e,t){var n,o;return o=t,s.isBuffer(o)||o instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new _("chunk",["string","Buffer","Uint8Array"],t)),n}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=y.destroy,E.prototype._undestroy=y.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var n,o=this._readableState;return o.objectMode?n=!0:"string"==typeof e&&((t=t||o.defaultEncoding)!==o.encoding&&(e=s.from(e,t),t=""),n=!0),w(this,e,t,!1,n)},E.prototype.unshift=function(e){return w(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(t){h||(h=e("string_decoder/").StringDecoder);var n=new h(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var o=this._readableState.buffer.head,i="";null!==o;)i+=n.write(o.data),o=o.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var O=1073741824;function D(e){return e>=O?e=O:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=D(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function L(e,t){if(u("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?B(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,U(e)))}}function B(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(U,e))}function U(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,q(e)}function N(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(j,e,t))}function j(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function x(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&r(e,"data")&&(t.flowing=!0,q(e))}}function G(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function H(e){u("readable nexttick read 0"),e.read(0)}function F(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(V,e,t))}function V(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),q(e),t.flowing&&!t.reading&&e.read(0)}function q(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function Q(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function Y(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(K,t,e))}function K(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function W(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}E.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?Y(this):B(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&Y(this),null;var o,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(n,t))),null===(o=e>0?Q(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&Y(this)),null!==o&&this.emit("data",o),o},E.prototype._read=function(){C(this,new S("_read()"))},E.prototype.pipe=function(e,t){var o=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,u("pipe count=%d opts=%j",i.pipesCount,t);var a=t&&!1===t.end||e===n.stdout||e===n.stderr?y:l;function s(t,n){u("onunpipe"),t===o&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",f),e.removeListener("finish",g),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",s),o.removeListener("end",l),o.removeListener("end",y),o.removeListener("data",h),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}function l(){u("onend"),e.end()}i.endEmitted?n.nextTick(a):o.once("end",a),e.on("unpipe",s);var c=x(o);e.on("drain",c);var d=!1;function h(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==W(i.pipes,e))&&!d&&(u("false write response, pause",i.awaitDrain),i.awaitDrain++),o.pause())}function p(t){u("onerror",t),y(),e.removeListener("error",p),0===r(e,"error")&&C(e,t)}function f(){e.removeListener("finish",g),y()}function g(){u("onfinish"),e.removeListener("close",f),y()}function y(){u("unpipe"),o.unpipe(e)}return o.on("data",h),k(e,"error",p),e.once("close",f),e.once("finish",g),e.emit("pipe",o),i.flowing||(u("pipe resume"),o.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var o=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<i;r++)o[r].emit("unpipe",this,{hasUnpiped:!1});return this}var a=W(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},E.prototype.on=function(e,t){var o=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?B(this):i.reading||n.nextTick(H,this))),o},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var o=a.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(G,this),o},E.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(G,this),t},E.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,F(this,e)),e.paused=!1,this},E.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var t=this,n=this._readableState,o=!1;for(var i in e.on("end",function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(o=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var r=0;r<T.length;r++)e.on(T[r],this.emit.bind(this,T[r]));return this._read=function(t){u("wrapped _read",t),o&&(o=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=e("./internal/streams/async_iterator")),p(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=Q,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(t,n){return void 0===f&&(f=e("./internal/streams/from")),f(E,t,n)})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":47,"./_stream_duplex":48,"./internal/streams/async_iterator":53,"./internal/streams/buffer_list":54,"./internal/streams/destroy":55,"./internal/streams/from":57,"./internal/streams/state":59,"./internal/streams/stream":60,_process:156,buffer:65,events:104,inherits:138,"string_decoder/":63,util:19}],51:[function(e,t){"use strict";t.exports=c;var n=e("../errors").codes,o=n.ERR_METHOD_NOT_IMPLEMENTED,i=n.ERR_MULTIPLE_CALLBACK,r=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=n.ERR_TRANSFORM_WITH_LENGTH_0,s=e("./_stream_duplex");function l(e,t){var n=this._transformState;n.transforming=!1;var o=n.writecb;if(null===o)return this.emit("error",new i);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),o(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function c(e){if(!(this instanceof c))return new c(e);s.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(t,n){d(e,t,n)})}function d(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new r;return e.push(null)}e("inherits")(c,s),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new o("_transform()"))},c.prototype._write=function(e,t,n){var o=this._transformState;if(o.writecb=n,o.writechunk=e,o.writeencoding=t,!o.transforming){var i=this._readableState;(o.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},c.prototype._destroy=function(e,t){s.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":47,"./_stream_duplex":48,inherits:138}],52:[function(e,t){(function(n,o){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){V(t,e)}}var r;t.exports=I,I.WritableState=k;var a={deprecate:e("util-deprecate")},s=e("./internal/streams/stream"),l=e("buffer").Buffer,c=o.Uint8Array||function(){};function u(e){return l.from(e)}var d,h=e("./internal/streams/destroy"),p=e("./internal/streams/state").getHighWaterMark,f=e("../errors").codes,g=f.ERR_INVALID_ARG_TYPE,y=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_STREAM_CANNOT_PIPE,_=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,S=f.ERR_STREAM_WRITE_AFTER_END,M=f.ERR_UNKNOWN_ENCODING,C=h.errorOrDestroy;function T(){}function k(t,n,o){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=n instanceof r),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=p(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){L(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function I(t){var n=this instanceof(r=r||e("./_stream_duplex"));if(!n&&!d.call(I,this))return new I(t);this._writableState=new k(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function E(e,t){var o=new S;C(e,o),n.nextTick(t,o)}function w(e,t,o,i){var r;return null===o?r=new b:"string"==typeof o||t.objectMode||(r=new g("chunk",["string","Buffer"],o)),!r||(C(e,r),n.nextTick(i,r),!1)}function P(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}function R(e,t,n,o,i,r){if(!n){var a=P(t,o,i);o!==a&&(n=!0,i="buffer",o=a)}var s=t.objectMode?1:o.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:o,encoding:i,isBuf:n,callback:r,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else O(e,t,!1,s,o,i,r);return l}function O(e,t,n,o,i,r,a){t.writelen=o,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new _("write")):n?e._writev(i,t.onwrite):e._write(i,r,t.onwrite),t.sync=!1}function D(e,t,o,i,r){--t.pendingcb,o?(n.nextTick(r,i),n.nextTick(H,e,t),e._writableState.errorEmitted=!0,C(e,i)):(r(i),e._writableState.errorEmitted=!0,C(e,i),H(e,t))}function A(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function L(e,t){var o=e._writableState,i=o.sync,r=o.writecb;if("function"!=typeof r)throw new m;if(A(o),t)D(e,o,i,t,r);else{var a=j(o)||e.destroyed;a||o.corked||o.bufferProcessing||!o.bufferedRequest||N(e,o),i?n.nextTick(B,e,o,a,r):B(e,o,a,r)}}function B(e,t,n,o){n||U(e,t),t.pendingcb--,o(),H(e,t)}function U(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function N(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var o=t.bufferedRequestCount,r=new Array(o),a=t.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)r[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;r.allBuffers=l,O(e,t,!0,t.length,r,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,d=n.callback;if(O(e,t,!1,t.objectMode?1:c.length,c,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function j(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final(function(n){t.pendingcb--,n&&C(e,n),t.prefinished=!0,e.emit("prefinish"),H(e,t)})}function G(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(x,e,t)))}function H(e,t){var n=j(t);if(n&&(G(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var o=e._readableState;(!o||o.autoDestroy&&o.endEmitted)&&e.destroy()}return n}function F(e,t,o){t.ending=!0,H(e,t),o&&(t.finished?n.nextTick(o):e.once("finish",o)),t.ended=!0,e.writable=!1}function V(e,t,n){var o=e.entry;for(e.entry=null;o;){var i=o.callback;t.pendingcb--,i(n),o=o.next}t.corkedRequestsFree.next=e}e("inherits")(I,s),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===I&&e&&e._writableState instanceof k}})):d=function(e){return e instanceof this},I.prototype.pipe=function(){C(this,new v)},I.prototype.write=function(e,t,n){var o,i=this._writableState,r=!1,a=!i.objectMode&&(o=e,l.isBuffer(o)||o instanceof c);return a&&!l.isBuffer(e)&&(e=u(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=T),i.ending?E(this,n):(a||w(this,i,e,n))&&(i.pendingcb++,r=R(this,i,a,e,t,n)),r},I.prototype.cork=function(){this._writableState.corked++},I.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||N(this,e))},I.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new M(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),I.prototype._write=function(e,t,n){n(new y("_write()"))},I.prototype._writev=null,I.prototype.end=function(e,t,n){var o=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||F(this,o,n),this},Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),I.prototype.destroy=h.destroy,I.prototype._undestroy=h.undestroy,I.prototype._destroy=function(e,t){t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":47,"./_stream_duplex":48,"./internal/streams/destroy":55,"./internal/streams/state":59,"./internal/streams/stream":60,_process:156,buffer:65,inherits:138,"util-deprecate":194}],53:[function(e,t){(function(n){"use strict";var o;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=e("./end-of-stream"),a=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function f(e){var t=e[a];if(null!==t){var n=e[h].read();null!==n&&(e[u]=null,e[a]=null,e[s]=null,t(p(n,!1)))}}function g(e){n.nextTick(f,e)}function y(e,t){return function(n,o){e.then(function(){t[c]?n(p(void 0,!0)):t[d](n,o)},o)}}var m=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((i(o={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise(function(t,o){n.nextTick(function(){e[l]?o(e[l]):t(p(void 0,!0))})});var o,i=this[u];if(i)o=new Promise(y(i,this));else{var r=this[h].read();if(null!==r)return Promise.resolve(p(r,!1));o=new Promise(this[d])}return this[u]=o,o}},Symbol.asyncIterator,function(){return this}),i(o,"return",function(){var e=this;return new Promise(function(t,n){e[h].destroy(null,function(e){e?n(e):t(p(void 0,!0))})})}),o),m);t.exports=function(e){var t,n=Object.create(v,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,d,{value:function(e,t){var o=n[h].read();o?(n[u]=null,n[a]=null,n[s]=null,e(p(o,!1))):(n[a]=e,n[s]=t)},writable:!0}),t));return n[u]=null,r(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[s];return null!==t&&(n[u]=null,n[a]=null,n[s]=null,t(e)),void(n[l]=e)}var o=n[a];null!==o&&(n[u]=null,n[a]=null,n[s]=null,o(p(void 0,!0))),n[c]=!0}),e.on("readable",g.bind(null,n)),n}}).call(this,e("_process"))},{"./end-of-stream":56,_process:156}],54:[function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach(function(t){i(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s=e("buffer").Buffer,l=e("util").inspect,c=l&&l.custom||"inspect";t.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,n,o,i=s.allocUnsafe(e>>>0),r=this.head,a=0;r;)t=r.data,n=i,o=a,s.prototype.copy.call(t,n,o),a+=r.data.length,r=r.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,o=t.data;for(e-=o.length;t=t.next;){var i=t.data,r=e>i.length?i.length:e;if(r===i.length?o+=i:o+=i.slice(0,e),0==(e-=r)){r===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(r));break}++n}return this.length-=n,o}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),n=this.head,o=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,r=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,r),0==(e-=r)){r===i.length?(++o,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(r));break}++o}return this.length-=o,t}},{key:c,value:function(e,t){return l(this,o({},t,{depth:0,customInspect:!1}))}}])&&a(t.prototype,n),e}()},{buffer:65,util:19}],55:[function(e,t){(function(e){"use strict";function n(e,t){i(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,r){var a=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?(r?r(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!r&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(o,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):r?(e.nextTick(o,a),r(t)):e.nextTick(o,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,o=e._writableState;n&&n.autoDestroy||o&&o.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,e("_process"))},{_process:156}],56:[function(e,t){"use strict";var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function o(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];e.apply(this,o)}}}function i(){}function r(e){return e.setHeader&&"function"==typeof e.abort}t.exports=function e(t,a,s){if("function"==typeof a)return e(t,null,a);a||(a={}),s=o(s||i);var l=a.readable||!1!==a.readable&&t.readable,c=a.writable||!1!==a.writable&&t.writable,u=function(){t.writable||h()},d=t._writableState&&t._writableState.finished,h=function(){c=!1,d=!0,l||s.call(t)},p=t._readableState&&t._readableState.endEmitted,f=function(){l=!1,p=!0,c||s.call(t)},g=function(e){s.call(t,e)},y=function(){var e;return l&&!p?(t._readableState&&t._readableState.ended||(e=new n),s.call(t,e)):c&&!d?(t._writableState&&t._writableState.ended||(e=new n),s.call(t,e)):void 0},m=function(){t.req.on("finish",h)};return r(t)?(t.on("complete",h),t.on("abort",y),t.req?m():t.on("request",m)):c&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",f),t.on("finish",h),!1!==a.error&&t.on("error",g),t.on("close",y),function(){t.removeListener("complete",h),t.removeListener("abort",y),t.removeListener("request",m),t.req&&t.req.removeListener("finish",h),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",h),t.removeListener("end",f),t.removeListener("error",g),t.removeListener("close",y)}}},{"../../../errors":47}],57:[function(e,t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],58:[function(e,t){"use strict";var n;function o(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}var i=e("../../../errors").codes,r=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function l(e){return e.setHeader&&"function"==typeof e.abort}function c(t,i,r,s){s=o(s);var c=!1;t.on("close",function(){c=!0}),void 0===n&&(n=e("./end-of-stream")),n(t,{readable:i,writable:r},function(e){if(e)return s(e);c=!0,s()});var u=!1;return function(e){if(!c&&!u)return u=!0,l(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new a("pipe"))}}function u(e){e()}function d(e,t){return e.pipe(t)}function h(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o,i=h(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new r("streams");var a=t.map(function(e,n){var r=n<t.length-1;return c(e,r,n>0,function(e){o||(o=e),e&&a.forEach(u),r||(a.forEach(u),i(o))})});return t.reduce(d)}},{"../../../errors":47,"./end-of-stream":56}],59:[function(e,t){"use strict";var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function o(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}t.exports={getHighWaterMark:function(e,t,i,r){var a=o(t,r,i);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new n(r?i:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}}},{"../../../errors":47}],60:[function(e,t){t.exports=e("events").EventEmitter},{events:104}],61:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":48,"./lib/_stream_passthrough.js":49,"./lib/_stream_readable.js":50,"./lib/_stream_transform.js":51,"./lib/_stream_writable.js":52,"./lib/internal/streams/end-of-stream.js":56,"./lib/internal/streams/pipeline.js":58}],62:[function(e,t,n){var o=e("buffer"),i=o.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=o:(r(o,n),n.Buffer=a),a.prototype=Object.create(i.prototype),r(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=i(e);return void 0!==t?"string"==typeof n?o.fill(t,n):o.fill(t):o.fill(0),o},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:65}],63:[function(e,t,n){"use strict";var o=e("safe-buffer").Buffer,i=o.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function a(e){var t=r(e);if("string"!=typeof t&&(o.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=a(e),this.encoding){case"utf16le":this.text=h,this.end=p,t=4;break;case"utf8":this.fillLast=d,t=4;break;case"base64":this.text=f,this.end=g,t=3;break;default:return this.write=y,void(this.end=m)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(t)}function l(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function c(e,t,n){var o=t.length-1;if(o<n)return 0;var i=l(t[o]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--o<n||-2===i?0:(i=l(t[o]))>=0?(i>0&&(e.lastNeed=i-2),i):--o<n||-2===i?0:(i=l(t[o]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function u(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}function d(e){var t=this.lastTotal-this.lastNeed,n=u(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function h(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var o=n.charCodeAt(n.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function f(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function y(e){return e.toString(this.encoding)}function m(e){return e&&e.length?this.write(e):""}n.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},s.prototype.text=function(e,t){var n=c(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var o=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",t,o)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":62}],64:[function(e,t){(function(e){t.exports=function(t,n){for(var o=Math.min(t.length,n.length),i=new e(o),r=0;r<o;++r)i[r]=t[r]^n[r];return i}}).call(this,e("buffer").Buffer)},{buffer:65}],65:[function(e,t,n){(function(t){"use strict";var o=e("base64-js"),i=e("ieee754"),r=e("isarray");function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return c(this,e,t,n)}function c(e,t,n,o){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?g(e,t,n,o):"string"==typeof t?p(e,t,n):y(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t,n,o){return u(t),t<=0?s(e,t):void 0!==n?"string"==typeof o?s(e,t).fill(n,o):s(e,t).fill(n):s(e,t)}function h(e,t){if(u(t),e=s(e,t<0?0:0|m(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var o=0|v(t,n),i=(e=s(e,o)).write(t,n);return i!==o&&(e=e.slice(0,i)),e}function f(e,t){var n=t.length<0?0:0|m(t.length);e=s(e,n);for(var o=0;o<n;o+=1)e[o]=255&t[o];return e}function g(e,t,n,o){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(o||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===o?new Uint8Array(t):void 0===o?new Uint8Array(t,n):new Uint8Array(t,n,o),l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=f(e,t),e}function y(e,t){if(l.isBuffer(t)){var n=0|m(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(o=t.length)!=o?s(e,0):f(e,t);if("Buffer"===t.type&&r(t.data))return f(e,t.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function m(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function v(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return J(e).length;default:if(o)return K(e).length;t=(""+t).toLowerCase(),o=!0}}function _(e,t,n){var o=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return B(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,n);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function b(e,t,n){var o=e[t];e[t]=e[n],e[n]=o}function S(e,t,n,o,i){if(0===e.length)return-1;if("string"==typeof n?(o=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,o)),l.isBuffer(t))return 0===t.length?-1:M(e,t,n,o,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):M(e,[t],n,o,i);throw new TypeError("val must be string, number or Buffer")}function M(e,t,n,o,i){var r,a=1,s=e.length,l=t.length;if(void 0!==o&&("ucs2"===(o=String(o).toLowerCase())||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(r=n;r<s;r++)if(c(e,r)===c(t,-1===u?0:r-u)){if(-1===u&&(u=r),r-u+1===l)return u*a}else-1!==u&&(r-=r-u),u=-1}else for(n+l>s&&(n=s-l),r=n;r>=0;r--){for(var d=!0,h=0;h<l;h++)if(c(e,r+h)!==c(t,h)){d=!1;break}if(d)return r}return-1}function C(e,t,n,o){n=Number(n)||0;var i=e.length-n;o?(o=Number(o))>i&&(o=i):o=i;var r=t.length;if(r%2!=0)throw new TypeError("Invalid hex string");o>r/2&&(o=r/2);for(var a=0;a<o;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function T(e,t,n,o){return X(K(t,e.length-n),e,n,o)}function k(e,t,n,o){return X(W(t),e,n,o)}function I(e,t,n,o){return k(e,t,n,o)}function E(e,t,n,o){return X(J(t),e,n,o)}function w(e,t,n,o){return X(z(t,e.length-n),e,n,o)}function P(e,t,n){return 0===t&&n===e.length?o.fromByteArray(e):o.fromByteArray(e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var o=[],i=t;i<n;){var r,a,s,l,c=e[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=n)switch(d){case 1:c<128&&(u=c);break;case 2:128==(192&(r=e[i+1]))&&(l=(31&c)<<6|63&r)>127&&(u=l);break;case 3:r=e[i+1],a=e[i+2],128==(192&r)&&128==(192&a)&&(l=(15&c)<<12|(63&r)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:r=e[i+1],a=e[i+2],s=e[i+3],128==(192&r)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&r)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,d=1):u>65535&&(u-=65536,o.push(u>>>10&1023|55296),u=56320|1023&u),o.push(u),i+=d}return D(o)}n.Buffer=l,n.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},n.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return d(null,e,t,n)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,i=0,r=Math.min(n,o);i<r;++i)if(e[i]!==t[i]){n=e[i],o=t[i];break}return n<o?-1:o<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!r(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var o=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(o,i),i+=a.length}return o},l.byteLength=v,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):_.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,o,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===o&&(o=0),void 0===i&&(i=this.length),t<0||n>e.length||o<0||i>this.length)throw new RangeError("out of range index");if(o>=i&&t>=n)return 0;if(o>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var r=(i>>>=0)-(o>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(r,a),c=this.slice(o,i),u=e.slice(t,n),d=0;d<s;++d)if(c[d]!==u[d]){r=c[d],a=u[d];break}return r<a?-1:a<r?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},l.prototype.write=function(e,t,n,o){if(void 0===t)o="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)o=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===o&&(o="utf8")):(o=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var r=!1;;)switch(o){case"hex":return C(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return k(this,e,t,n);case"latin1":case"binary":return I(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(r)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),r=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function D(e){var t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);for(var n="",o=0;o<t;)n+=String.fromCharCode.apply(String,e.slice(o,o+=O));return n}function A(e,t,n){var o="";n=Math.min(e.length,n);for(var i=t;i<n;++i)o+=String.fromCharCode(127&e[i]);return o}function L(e,t,n){var o="";n=Math.min(e.length,n);for(var i=t;i<n;++i)o+=String.fromCharCode(e[i]);return o}function B(e,t,n){var o,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=t;a<n;++a)r+=(o=e[a])<16?"0"+o.toString(16):o.toString(16);return r}function U(e,t,n){for(var o=e.slice(t,n),i="",r=0;r<o.length;r+=2)i+=String.fromCharCode(o[r]+256*o[r+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,n,o,i,r){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<r)throw new RangeError('"value" argument is out of bounds');if(n+o>e.length)throw new RangeError("Index out of range")}function x(e,t,n,o){t<0&&(t=65535+t+1);for(var i=0,r=Math.min(e.length-n,2);i<r;++i)e[n+i]=(t&255<<8*(o?i:1-i))>>>8*(o?i:1-i)}function G(e,t,n,o){t<0&&(t=4294967295+t+1);for(var i=0,r=Math.min(e.length-n,4);i<r;++i)e[n+i]=t>>>8*(o?i:3-i)&255}function H(e,t,n,o){if(n+o>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,o,r){return r||H(e,0,n,4),i.write(e,t,n,o,23,4),n+4}function V(e,t,n,o,r){return r||H(e,0,n,8),i.write(e,t,n,o,52,8),n+8}l.prototype.slice=function(e,t){var n,o=this.length;if((e=~~e)<0?(e+=o)<0&&(e=0):e>o&&(e=o),(t=void 0===t?o:~~t)<0?(t+=o)<0&&(t=0):t>o&&(t=o),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var r=0;r<i;++r)n[r]=this[r+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var o=this[e],i=1,r=0;++r<t&&(i*=256);)o+=this[e+r]*i;return o},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var o=this[e+--t],i=1;t>0&&(i*=256);)o+=this[e+--t]*i;return o},l.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var o=this[e],i=1,r=0;++r<t&&(i*=256);)o+=this[e+r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var o=t,i=1,r=this[e+--o];o>0&&(i*=256);)r+=this[e+--o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,o){e=+e,t|=0,n|=0,o||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,r=0;for(this[t]=255&e;++r<n&&(i*=256);)this[t+r]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,o){e=+e,t|=0,n|=0,o||j(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,r=1;for(this[t+i]=255&e;--i>=0&&(r*=256);)this[t+i]=e/r&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):G(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,o){if(e=+e,t|=0,!o){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var r=0,a=1,s=0;for(this[t]=255&e;++r<n&&(a*=256);)e<0&&0===s&&0!==this[t+r-1]&&(s=1),this[t+r]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,o){if(e=+e,t|=0,!o){var i=Math.pow(2,8*n-1);j(this,e,t,n,i-1,-i)}var r=n-1,a=1,s=0;for(this[t+r]=255&e;--r>=0&&(a*=256);)e<0&&0===s&&0!==this[t+r+1]&&(s=1),this[t+r]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):G(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):G(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return V(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return V(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&o<n&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var i,r=o-n;if(this===e&&n<t&&t<o)for(i=r-1;i>=0;--i)e[i+t]=this[i+n];else if(r<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<r;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+r),t);return r},l.prototype.fill=function(e,t,n,o){if("string"==typeof e){if("string"==typeof t?(o=t,t=0,n=this.length):"string"==typeof n&&(o=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==o&&"string"!=typeof o)throw new TypeError("encoding must be a string");if("string"==typeof o&&!l.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{var a=l.isBuffer(e)?e:K(new l(e,o).toString()),s=a.length;for(r=0;r<n-t;++r)this[r+t]=a[r%s]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function Q(e){if((e=Y(e).replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function Y(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function K(e,t){var n;t=t||1/0;for(var o=e.length,i=null,r=[],a=0;a<o;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&r.push(239,191,189);continue}if(a+1===o){(t-=3)>-1&&r.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&r.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&r.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;r.push(n)}else if(n<2048){if((t-=2)<0)break;r.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;r.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;r.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return r}function W(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function z(e,t){for(var n,o,i,r=[],a=0;a<e.length&&!((t-=2)<0);++a)o=(n=e.charCodeAt(a))>>8,i=n%256,r.push(i),r.push(o);return r}function J(e){return o.toByteArray(Q(e))}function X(e,t,n,o){for(var i=0;i<o&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":16,ieee754:137,isarray:66}],66:[function(e,t){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],67:[function(e,t){var n=e("safe-buffer").Buffer,o=e("stream").Transform,i=e("string_decoder").StringDecoder;function r(e){o.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}e("inherits")(r,o),r.prototype.update=function(e,t,o){"string"==typeof e&&(e=n.from(e,t));var i=this._update(e);return this.hashMode?this:(o&&(i=this._toString(i,o)),i)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},r.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},r.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},r.prototype._transform=function(e,t,n){var o;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(i){o=i}finally{n(o)}},r.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(n){t=n}e(t)},r.prototype._finalOrDigest=function(e){var t=this.__final()||n.alloc(0);return e&&(t=this._toString(t,e,!0)),t},r.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new i(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var o=this._decoder.write(e);return n&&(o+=this._decoder.end()),o},t.exports=r},{inherits:138,"safe-buffer":182,stream:192,string_decoder:193}],68:[function(e,t,n){function o(e){return Object.prototype.toString.call(e)}n.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===o(e)},n.isBoolean=function(e){return"boolean"==typeof e},n.isNull=function(e){return null===e},n.isNullOrUndefined=function(e){return null==e},n.isNumber=function(e){return"number"==typeof e},n.isString=function(e){return"string"==typeof e},n.isSymbol=function(e){return"symbol"==typeof e},n.isUndefined=function(e){return void 0===e},n.isRegExp=function(e){return"[object RegExp]"===o(e)},n.isObject=function(e){return"object"==typeof e&&null!==e},n.isDate=function(e){return"[object Date]"===o(e)},n.isError=function(e){return"[object Error]"===o(e)||e instanceof Error},n.isFunction=function(e){return"function"==typeof e},n.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},n.isBuffer=e("buffer").Buffer.isBuffer},{buffer:65}],69:[function(e,t){(function(n){var o=e("elliptic"),i=e("bn.js");t.exports=function(e){return new a(e)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(e){this.curveType=r[e],this.curveType||(this.curveType={name:e}),this.curve=new o.ec(this.curveType.name),this.keys=void 0}function s(e,t,o){Array.isArray(e)||(e=e.toArray());var i=new n(e);if(o&&i.length<o){var r=new n(o-i.length);r.fill(0),i=n.concat([r,i])}return t?i.toString(t):i}r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1,a.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},a.prototype.computeSecret=function(e,t,o){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),s(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),o,this.curveType.byteLength)},a.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),s(n,e)},a.prototype.getPrivateKey=function(e){return s(this.keys.getPrivate(),e)},a.prototype.setPublicKey=function(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this.keys._importPublic(e),this},a.prototype.setPrivateKey=function(e,t){t=t||"utf8",n.isBuffer(e)||(e=new n(e,t));var o=new i(e);return o=o.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(o),this}}).call(this,e("buffer").Buffer)},{"bn.js":70,buffer:65,elliptic:87}],70:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{buffer:19,dup:15}],71:[function(e,t){"use strict";var n=e("inherits"),o=e("md5.js"),i=e("ripemd160"),r=e("sha.js"),a=e("cipher-base");function s(e){a.call(this,"digest"),this._hash=e}n(s,a),s.prototype._update=function(e){this._hash.update(e)},s.prototype._final=function(){return this._hash.digest()},t.exports=function(e){return"md5"===(e=e.toLowerCase())?new o:"rmd160"===e||"ripemd160"===e?new i:new s(r(e))}},{"cipher-base":67,inherits:138,"md5.js":139,ripemd160:181,"sha.js":185}],72:[function(e,t){var n=e("md5.js");t.exports=function(e){return(new n).update(e).digest()}},{"md5.js":139}],73:[function(e,t){"use strict";var n=e("inherits"),o=e("./legacy"),i=e("cipher-base"),r=e("safe-buffer").Buffer,a=e("create-hash/md5"),s=e("ripemd160"),l=e("sha.js"),c=r.alloc(128);function u(e,t){i.call(this,"digest"),"string"==typeof t&&(t=r.from(t));var n="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>n?t=("rmd160"===e?new s:l(e)).update(t).digest():t.length<n&&(t=r.concat([t,c],n));for(var o=this._ipad=r.allocUnsafe(n),a=this._opad=r.allocUnsafe(n),u=0;u<n;u++)o[u]=54^t[u],a[u]=92^t[u];this._hash="rmd160"===e?new s:l(e),this._hash.update(o)}n(u,i),u.prototype._update=function(e){this._hash.update(e)},u.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new s:l(this._alg)).update(this._opad).update(e).digest()},t.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new u("rmd160",t):"md5"===e?new o(a,t):new u(e,t)}},{"./legacy":74,"cipher-base":67,"create-hash/md5":72,inherits:138,ripemd160:181,"safe-buffer":182,"sha.js":185}],74:[function(e,t){"use strict";var n=e("inherits"),o=e("safe-buffer").Buffer,i=e("cipher-base"),r=o.alloc(128),a=64;function s(e,t){i.call(this,"digest"),"string"==typeof t&&(t=o.from(t)),this._alg=e,this._key=t,t.length>a?t=e(t):t.length<a&&(t=o.concat([t,r],a));for(var n=this._ipad=o.allocUnsafe(a),s=this._opad=o.allocUnsafe(a),l=0;l<a;l++)n[l]=54^t[l],s[l]=92^t[l];this._hash=[n]}n(s,i),s.prototype._update=function(e){this._hash.push(e)},s.prototype._final=function(){var e=this._alg(o.concat(this._hash));return this._alg(o.concat([this._opad,e]))},t.exports=s},{"cipher-base":67,inherits:138,"safe-buffer":182}],75:[function(e,t,n){"use strict";n.randomBytes=n.rng=n.pseudoRandomBytes=n.prng=e("randombytes"),n.createHash=n.Hash=e("create-hash"),n.createHmac=n.Hmac=e("create-hmac");var o=e("browserify-sign/algos"),i=Object.keys(o),r=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);n.getHashes=function(){return r};var a=e("pbkdf2");n.pbkdf2=a.pbkdf2,n.pbkdf2Sync=a.pbkdf2Sync;var s=e("browserify-cipher");n.Cipher=s.Cipher,n.createCipher=s.createCipher,n.Cipheriv=s.Cipheriv,n.createCipheriv=s.createCipheriv,n.Decipher=s.Decipher,n.createDecipher=s.createDecipher,n.Decipheriv=s.Decipheriv,n.createDecipheriv=s.createDecipheriv,n.getCiphers=s.getCiphers,n.listCiphers=s.listCiphers;var l=e("diffie-hellman");n.DiffieHellmanGroup=l.DiffieHellmanGroup,n.createDiffieHellmanGroup=l.createDiffieHellmanGroup,n.getDiffieHellman=l.getDiffieHellman,n.createDiffieHellman=l.createDiffieHellman,n.DiffieHellman=l.DiffieHellman;var c=e("browserify-sign");n.createSign=c.createSign,n.Sign=c.Sign,n.createVerify=c.createVerify,n.Verify=c.Verify,n.createECDH=e("create-ecdh");var u=e("public-encrypt");n.publicEncrypt=u.publicEncrypt,n.privateEncrypt=u.privateEncrypt,n.publicDecrypt=u.publicDecrypt,n.privateDecrypt=u.privateDecrypt;var d=e("randomfill");n.randomFill=d.randomFill,n.randomFillSync=d.randomFillSync,n.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},n.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},{"browserify-cipher":37,"browserify-sign":44,"browserify-sign/algos":41,"create-ecdh":69,"create-hash":71,"create-hmac":73,"diffie-hellman":82,pbkdf2:149,"public-encrypt":157,randombytes:164,randomfill:165}],76:[function(e,t,n){"use strict";n.utils=e("./des/utils"),n.Cipher=e("./des/cipher"),n.DES=e("./des/des"),n.CBC=e("./des/cbc"),n.EDE=e("./des/ede")},{"./des/cbc":77,"./des/cipher":78,"./des/des":79,"./des/ede":80,"./des/utils":81}],77:[function(e,t,n){"use strict";var o=e("minimalistic-assert"),i=e("inherits"),r={};function a(e){o.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}n.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}i(t,e);for(var n=Object.keys(r),o=0;o<n.length;o++){var a=n[o];t.prototype[a]=r[a]}return t.create=function(e){return new t(e)},t},r._cbcInit=function(){var e=new a(this.options.iv);this._cbcState=e},r._update=function(e,t,n,o){var i=this._cbcState,r=this.constructor.super_.prototype,a=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)a[s]^=e[t+s];for(r._update.call(this,a,0,n,o),s=0;s<this.blockSize;s++)a[s]=n[o+s]}else{for(r._update.call(this,e,t,n,o),s=0;s<this.blockSize;s++)n[o+s]^=a[s];for(s=0;s<this.blockSize;s++)a[s]=e[t+s]}}},{inherits:138,"minimalistic-assert":142}],78:[function(e,t){"use strict";var n=e("minimalistic-assert");function o(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=o,o.prototype._init=function(){},o.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},o.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),o=0;o<n;o++)this.buffer[this.bufferOff+o]=e[t+o];return this.bufferOff+=n,n},o.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},o.prototype._updateEncrypt=function(e){var t=0,n=0,o=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(o*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var r=e.length-(e.length-t)%this.blockSize;t<r;t+=this.blockSize)this._update(e,t,i,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},o.prototype._updateDecrypt=function(e){for(var t=0,n=0,o=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(o*this.blockSize);o>0;o--)t+=this._buffer(e,t),n+=this._flushBuffer(i,n);return t+=this._buffer(e,t),i},o.prototype.final=function(e){var t,n;return e&&(t=this.update(e)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},o.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},o.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},o.prototype._unpad=function(e){return e},o.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},{"minimalistic-assert":142}],79:[function(e,t){"use strict";var n=e("minimalistic-assert"),o=e("inherits"),i=e("./utils"),r=e("./cipher");function a(){this.tmp=new Array(2),this.keys=null}function s(e){r.call(this,e);var t=new a;this._desState=t,this.deriveKeys(t,e.key)}o(s,r),t.exports=s,s.create=function(e){return new s(e)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];s.prototype.deriveKeys=function(e,t){e.keys=new Array(32),n.equal(t.length,this.blockSize,"Invalid key length");var o=i.readUInt32BE(t,0),r=i.readUInt32BE(t,4);i.pc1(o,r,e.tmp,0),o=e.tmp[0],r=e.tmp[1];for(var a=0;a<e.keys.length;a+=2){var s=l[a>>>1];o=i.r28shl(o,s),r=i.r28shl(r,s),i.pc2(o,r,e.keys,a)}},s.prototype._update=function(e,t,n,o){var r=this._desState,a=i.readUInt32BE(e,t),s=i.readUInt32BE(e,t+4);i.ip(a,s,r.tmp,0),a=r.tmp[0],s=r.tmp[1],"encrypt"===this.type?this._encrypt(r,a,s,r.tmp,0):this._decrypt(r,a,s,r.tmp,0),a=r.tmp[0],s=r.tmp[1],i.writeUInt32BE(n,a,o),i.writeUInt32BE(n,s,o+4)},s.prototype._pad=function(e,t){for(var n=e.length-t,o=t;o<e.length;o++)e[o]=n;return!0},s.prototype._unpad=function(e){for(var t=e[e.length-1],o=e.length-t;o<e.length;o++)n.equal(e[o],t);return e.slice(0,e.length-t)},s.prototype._encrypt=function(e,t,n,o,r){for(var a=t,s=n,l=0;l<e.keys.length;l+=2){var c=e.keys[l],u=e.keys[l+1];i.expand(s,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var d=i.substitute(c,u),h=s;s=(a^i.permute(d))>>>0,a=h}i.rip(s,a,o,r)},s.prototype._decrypt=function(e,t,n,o,r){for(var a=n,s=t,l=e.keys.length-2;l>=0;l-=2){var c=e.keys[l],u=e.keys[l+1];i.expand(a,e.tmp,0),c^=e.tmp[0],u^=e.tmp[1];var d=i.substitute(c,u),h=a;a=(s^i.permute(d))>>>0,s=h}i.rip(a,s,o,r)}},{"./cipher":78,"./utils":81,inherits:138,"minimalistic-assert":142}],80:[function(e,t){"use strict";var n=e("minimalistic-assert"),o=e("inherits"),i=e("./cipher"),r=e("./des");function a(e,t){n.equal(t.length,24,"Invalid key length");var o=t.slice(0,8),i=t.slice(8,16),a=t.slice(16,24);this.ciphers="encrypt"===e?[r.create({type:"encrypt",key:o}),r.create({type:"decrypt",key:i}),r.create({type:"encrypt",key:a})]:[r.create({type:"decrypt",key:a}),r.create({type:"encrypt",key:i}),r.create({type:"decrypt",key:o})]}function s(e){i.call(this,e);var t=new a(this.type,this.options.key);this._edeState=t}o(s,i),t.exports=s,s.create=function(e){return new s(e)},s.prototype._update=function(e,t,n,o){var i=this._edeState;i.ciphers[0]._update(e,t,n,o),i.ciphers[1]._update(n,o,n,o),i.ciphers[2]._update(n,o,n,o)},s.prototype._pad=r.prototype._pad,s.prototype._unpad=r.prototype._unpad},{"./cipher":78,"./des":79,inherits:138,"minimalistic-assert":142}],81:[function(e,t,n){"use strict";n.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},n.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},n.ip=function(e,t,n,o){for(var i=0,r=0,a=6;a>=0;a-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=e>>>s+a&1}for(a=6;a>=0;a-=2){for(s=1;s<=25;s+=8)r<<=1,r|=t>>>s+a&1;for(s=1;s<=25;s+=8)r<<=1,r|=e>>>s+a&1}n[o+0]=i>>>0,n[o+1]=r>>>0},n.rip=function(e,t,n,o){for(var i=0,r=0,a=0;a<4;a++)for(var s=24;s>=0;s-=8)i<<=1,i|=t>>>s+a&1,i<<=1,i|=e>>>s+a&1;for(a=4;a<8;a++)for(s=24;s>=0;s-=8)r<<=1,r|=t>>>s+a&1,r<<=1,r|=e>>>s+a&1;n[o+0]=i>>>0,n[o+1]=r>>>0},n.pc1=function(e,t,n,o){for(var i=0,r=0,a=7;a>=5;a--){for(var s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+a&1}for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+a&1;for(a=1;a<=3;a++){for(s=0;s<=24;s+=8)r<<=1,r|=t>>s+a&1;for(s=0;s<=24;s+=8)r<<=1,r|=e>>s+a&1}for(s=0;s<=24;s+=8)r<<=1,r|=e>>s+a&1;n[o+0]=i>>>0,n[o+1]=r>>>0},n.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var o=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];n.pc2=function(e,t,n,i){for(var r=0,a=0,s=o.length>>>1,l=0;l<s;l++)r<<=1,r|=e>>>o[l]&1;for(l=s;l<o.length;l++)a<<=1,a|=t>>>o[l]&1;n[i+0]=r>>>0,n[i+1]=a>>>0},n.expand=function(e,t,n){var o=0,i=0;o=(1&e)<<5|e>>>27;for(var r=23;r>=15;r-=4)o<<=6,o|=e>>>r&63;for(r=11;r>=3;r-=4)i|=e>>>r&63,i<<=6;i|=(31&e)<<1|e>>>31,t[n+0]=o>>>0,t[n+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];n.substitute=function(e,t){for(var n=0,o=0;o<4;o++)n<<=4,n|=i[64*o+(e>>>18-6*o&63)];for(o=0;o<4;o++)n<<=4,n|=i[256+64*o+(t>>>18-6*o&63)];return n>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];n.permute=function(e){for(var t=0,n=0;n<r.length;n++)t<<=1,t|=e>>>r[n]&1;return t>>>0},n.padSplit=function(e,t,n){for(var o=e.toString(2);o.length<t;)o="0"+o;for(var i=[],r=0;r<t;r+=n)i.push(o.slice(r,r+n));return i.join(" ")}},{}],82:[function(e,t,n){(function(t){var o=e("./lib/generatePrime"),i=e("./lib/primes.json"),r=e("./lib/dh"),a={binary:!0,hex:!0,base64:!0};n.DiffieHellmanGroup=n.createDiffieHellmanGroup=n.getDiffieHellman=function(e){var n=new t(i[e].prime,"hex"),o=new t(i[e].gen,"hex");return new r(n,o)},n.createDiffieHellman=n.DiffieHellman=function e(n,i,s,l){return t.isBuffer(i)||void 0===a[i]?e(n,"binary",i,s):(i=i||"binary",l=l||"binary",s=s||new t([2]),t.isBuffer(s)||(s=new t(s,l)),"number"==typeof n?new r(o(n,s),s,!0):(t.isBuffer(n)||(n=new t(n,i)),new r(n,s,!0)))}}).call(this,e("buffer").Buffer)},{"./lib/dh":83,"./lib/generatePrime":84,"./lib/primes.json":85,buffer:65}],83:[function(e,t){(function(n){var o=e("bn.js"),i=new(e("miller-rabin")),r=new o(24),a=new o(11),s=new o(10),l=new o(3),c=new o(7),u=e("./generatePrime"),d=e("randombytes");function h(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this._pub=new o(e),this}function p(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this._priv=new o(e),this}t.exports=y;var f={};function g(e,t){var n=t.toString("hex"),o=[n,e.toString(16)].join("_");if(o in f)return f[o];var d,h=0;if(e.isEven()||!u.simpleSieve||!u.fermatTest(e)||!i.test(e))return h+=1,h+="02"===n||"05"===n?8:4,f[o]=h,h;switch(i.test(e.shrn(1))||(h+=2),n){case"02":e.mod(r).cmp(a)&&(h+=8);break;case"05":(d=e.mod(s)).cmp(l)&&d.cmp(c)&&(h+=8);break;default:h+=4}return f[o]=h,h}function y(e,t,n){this.setGenerator(t),this.__prime=new o(e),this._prime=o.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=h,this.setPrivateKey=p):this._primeCode=8}function m(e,t){var o=new n(e.toArray());return t?o.toString(t):o}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=g(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new o(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(e){var t=(e=(e=new o(e)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new n(t.toArray()),r=this.getPrime();if(i.length<r.length){var a=new n(r.length-i.length);a.fill(0),i=n.concat([a,i])}return i},y.prototype.getPublicKey=function(e){return m(this._pub,e)},y.prototype.getPrivateKey=function(e){return m(this._priv,e)},y.prototype.getPrime=function(e){return m(this.__prime,e)},y.prototype.getGenerator=function(e){return m(this._gen,e)},y.prototype.setGenerator=function(e,t){return t=t||"utf8",n.isBuffer(e)||(e=new n(e,t)),this.__gen=e,this._gen=new o(e),this}}).call(this,e("buffer").Buffer)},{"./generatePrime":84,"bn.js":86,buffer:65,"miller-rabin":140,randombytes:164}],84:[function(e,t){var n=e("randombytes");t.exports=m,m.simpleSieve=g,m.fermatTest=y;var o=e("bn.js"),i=new o(24),r=new(e("miller-rabin")),a=new o(1),s=new o(2),l=new o(5),c=(new o(16),new o(8),new o(10)),u=new o(3),d=(new o(7),new o(11)),h=new o(4),p=(new o(12),null);function f(){if(null!==p)return p;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var o=Math.ceil(Math.sqrt(n)),i=0;i<t&&e[i]<=o&&n%e[i]!=0;i++);t!==i&&e[i]<=o||(e[t++]=n)}return p=e,e}function g(e){for(var t=f(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function y(e){var t=o.mont(e);return 0===s.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function m(e,t){if(e<16)return new o(2===t||5===t?[140,123]:[140,39]);var p,f;for(t=new o(t);;){for(p=new o(n(Math.ceil(e/8)));p.bitLength()>e;)p.ishrn(1);if(p.isEven()&&p.iadd(a),p.testn(1)||p.iadd(s),t.cmp(s)){if(!t.cmp(l))for(;p.mod(c).cmp(u);)p.iadd(h)}else for(;p.mod(i).cmp(d);)p.iadd(h);if(g(f=p.shrn(1))&&g(p)&&y(f)&&y(p)&&r.test(f)&&r.test(p))return p}}},{"bn.js":86,"miller-rabin":140,randombytes:164}],85:[function(e,t){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},{}],86:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{buffer:19,dup:15}],87:[function(e,t,n){"use strict";var o=n;o.version=e("../package.json").version,o.utils=e("./elliptic/utils"),o.rand=e("brorand"),o.curve=e("./elliptic/curve"),o.curves=e("./elliptic/curves"),o.ec=e("./elliptic/ec"),o.eddsa=e("./elliptic/eddsa")},{"../package.json":103,"./elliptic/curve":90,"./elliptic/curves":93,"./elliptic/ec":94,"./elliptic/eddsa":97,"./elliptic/utils":101,brorand:18}],88:[function(e,t){"use strict";var n=e("bn.js"),o=e("../utils"),i=o.getNAF,r=o.getJSF,a=o.assert;function s(e,t){this.type=e,this.p=new n(t.p,16),this.red=t.prime?n.red(t.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=t.n&&new n(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var o=this.n&&this.p.div(this.n);!o||o.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}t.exports=s,s.prototype.point=function(){throw new Error("Not implemented")},s.prototype.validate=function(){throw new Error("Not implemented")},s.prototype._fixedNafMul=function(e,t){a(e.precomputed);var n=e._getDoubles(),o=i(t,1,this._bitLength),r=(1<<n.step+1)-(n.step%2==0?2:1);r/=3;var s,l,c=[];for(s=0;s<o.length;s+=n.step){l=0;for(var u=s+n.step-1;u>=s;u--)l=(l<<1)+o[u];c.push(l)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),p=r;p>0;p--){for(s=0;s<c.length;s++)(l=c[s])===p?h=h.mixedAdd(n.points[s]):l===-p&&(h=h.mixedAdd(n.points[s].neg()));d=d.add(h)}return d.toP()},s.prototype._wnafMul=function(e,t){var n=4,o=e._getNAFPoints(n);n=o.wnd;for(var r=o.points,s=i(t,n,this._bitLength),l=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var u=0;c>=0&&0===s[c];c--)u++;if(c>=0&&u++,l=l.dblp(u),c<0)break;var d=s[c];a(0!==d),l="affine"===e.type?d>0?l.mixedAdd(r[d-1>>1]):l.mixedAdd(r[-d-1>>1].neg()):d>0?l.add(r[d-1>>1]):l.add(r[-d-1>>1].neg())}return"affine"===e.type?l.toP():l},s.prototype._wnafMulAdd=function(e,t,n,o,a){var s,l,c,u=this._wnafT1,d=this._wnafT2,h=this._wnafT3,p=0;for(s=0;s<o;s++){var f=(c=t[s])._getNAFPoints(e);u[s]=f.wnd,d[s]=f.points}for(s=o-1;s>=1;s-=2){var g=s-1,y=s;if(1===u[g]&&1===u[y]){var m=[t[g],null,null,t[y]];0===t[g].y.cmp(t[y].y)?(m[1]=t[g].add(t[y]),m[2]=t[g].toJ().mixedAdd(t[y].neg())):0===t[g].y.cmp(t[y].y.redNeg())?(m[1]=t[g].toJ().mixedAdd(t[y]),m[2]=t[g].add(t[y].neg())):(m[1]=t[g].toJ().mixedAdd(t[y]),m[2]=t[g].toJ().mixedAdd(t[y].neg()));var v=[-3,-1,-5,-7,0,7,5,1,3],_=r(n[g],n[y]);for(p=Math.max(_[0].length,p),h[g]=new Array(p),h[y]=new Array(p),l=0;l<p;l++){var b=0|_[0][l],S=0|_[1][l];h[g][l]=v[3*(b+1)+(S+1)],h[y][l]=0,d[g]=m}}else h[g]=i(n[g],u[g],this._bitLength),h[y]=i(n[y],u[y],this._bitLength),p=Math.max(h[g].length,p),p=Math.max(h[y].length,p)}var M=this.jpoint(null,null,null),C=this._wnafT4;for(s=p;s>=0;s--){for(var T=0;s>=0;){var k=!0;for(l=0;l<o;l++)C[l]=0|h[l][s],0!==C[l]&&(k=!1);if(!k)break;T++,s--}if(s>=0&&T++,M=M.dblp(T),s<0)break;for(l=0;l<o;l++){var I=C[l];0!==I&&(I>0?c=d[l][I-1>>1]:I<0&&(c=d[l][-I-1>>1].neg()),M="affine"===c.type?M.mixedAdd(c):M.add(c))}}for(s=0;s<o;s++)d[s]=null;return a?M:M.toP()},s.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},s.prototype.decodePoint=function(e,t){e=o.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?a(e[e.length-1]%2==0):7===e[0]&&a(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return o.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],o=this,i=0;i<t;i+=e){for(var r=0;r<e;r++)o=o.dbl();n.push(o)}return{step:e,points:n}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,o=1===n?null:this.dbl(),i=1;i<n;i++)t[i]=t[i-1].add(o);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},{"../utils":101,"bn.js":102}],89:[function(e,t){"use strict";var n=e("../utils"),o=e("bn.js"),i=e("inherits"),r=e("./base"),a=n.assert;function s(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,r.call(this,"edwards",e),this.a=new o(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new o(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new o(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function l(e,t,n,i,a){r.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new o(t,16),this.y=new o(n,16),this.z=i?new o(i,16):this.curve.one,this.t=a&&new o(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}i(s,r),t.exports=s,s.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},s.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},s.prototype.jpoint=function(e,t,n,o){return this.point(e,t,n,o)},s.prototype.pointFromX=function(e,t){(e=new o(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),i=this.c2.redSub(this.a.redMul(n)),r=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=i.redMul(r.redInvm()),s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var l=s.fromRed().isOdd();return(t&&!l||!t&&l)&&(s=s.redNeg()),this.point(e,s)},s.prototype.pointFromY=function(e,t){(e=new o(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),i=n.redSub(this.c2),r=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=i.redMul(r.redInvm());if(0===a.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var s=a.redSqrt();if(0!==s.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==t&&(s=s.redNeg()),this.point(s,e)},s.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),o=t.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===o.cmp(i)},i(l,r.BasePoint),s.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},s.prototype.point=function(e,t,n,o){return new l(this,e,t,n,o)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var o=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),r=o.redAdd(t),a=r.redSub(n),s=o.redSub(t),l=i.redMul(a),c=r.redMul(s),u=i.redMul(s),d=a.redMul(r);return this.curve.point(l,c,d,u)},l.prototype._projDbl=function(){var e,t,n,o,i,r,a=this.x.redAdd(this.y).redSqr(),s=this.x.redSqr(),l=this.y.redSqr();if(this.curve.twisted){var c=(o=this.curve._mulA(s)).redAdd(l);this.zOne?(e=a.redSub(s).redSub(l).redMul(c.redSub(this.curve.two)),t=c.redMul(o.redSub(l)),n=c.redSqr().redSub(c).redSub(c)):(i=this.z.redSqr(),r=c.redSub(i).redISub(i),e=a.redSub(s).redISub(l).redMul(r),t=c.redMul(o.redSub(l)),n=c.redMul(r))}else o=s.redAdd(l),i=this.curve._mulC(this.z).redSqr(),r=o.redSub(i).redSub(i),e=this.curve._mulC(a.redISub(o)).redMul(r),t=this.curve._mulC(o).redMul(s.redISub(l)),n=o.redMul(r);return this.curve.point(e,t,n)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),o=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),r=n.redSub(t),a=i.redSub(o),s=i.redAdd(o),l=n.redAdd(t),c=r.redMul(a),u=s.redMul(l),d=r.redMul(l),h=a.redMul(s);return this.curve.point(c,u,h,d)},l.prototype._projAdd=function(e){var t,n,o=this.z.redMul(e.z),i=o.redSqr(),r=this.x.redMul(e.x),a=this.y.redMul(e.y),s=this.curve.d.redMul(r).redMul(a),l=i.redSub(s),c=i.redAdd(s),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(r).redISub(a),d=o.redMul(l).redMul(u);return this.curve.twisted?(t=o.redMul(c).redMul(a.redSub(this.curve._mulA(r))),n=l.redMul(c)):(t=o.redMul(c).redMul(a.redSub(r)),n=this.curve._mulC(l).redMul(c)),this.curve.point(d,t,n)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},l.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),o=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(o),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},{"../utils":101,"./base":88,"bn.js":102,inherits:138}],90:[function(e,t,n){"use strict";var o=n;o.base=e("./base"),o.short=e("./short"),o.mont=e("./mont"),o.edwards=e("./edwards")},{"./base":88,"./edwards":89,"./mont":91,"./short":92}],91:[function(e,t){"use strict";var n=e("bn.js"),o=e("inherits"),i=e("./base"),r=e("../utils");function a(e){i.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function s(e,t,o){i.BasePoint.call(this,e,"projective"),null===t&&null===o?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}o(a,i),t.exports=a,a.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),o=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===o.redSqrt().redSqr().cmp(o)},o(s,i.BasePoint),a.prototype.decodePoint=function(e,t){return this.point(r.toArray(e,t),1)},a.prototype.point=function(e,t){return new s(this,e,t)},a.prototype.pointFromJSON=function(e){return s.fromJSON(this,e)},s.prototype.precompute=function(){},s.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},s.fromJSON=function(e,t){return new s(e,t[0],t[1]||e.one)},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},s.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),o=e.redMul(t),i=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(o,i)},s.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),o=this.x.redSub(this.z),i=e.x.redAdd(e.z),r=e.x.redSub(e.z).redMul(n),a=i.redMul(o),s=t.z.redMul(r.redAdd(a).redSqr()),l=t.x.redMul(r.redISub(a).redSqr());return this.curve.point(s,l)},s.prototype.mul=function(e){for(var t=e.clone(),n=this,o=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var r=i.length-1;r>=0;r--)0===i[r]?(n=n.diffAdd(o,this),o=o.dbl()):(o=n.diffAdd(o,this),n=n.dbl());return o},s.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},s.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},s.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},{"../utils":101,"./base":88,"bn.js":102,inherits:138}],92:[function(e,t){"use strict";var n=e("../utils"),o=e("bn.js"),i=e("inherits"),r=e("./base"),a=n.assert;function s(e){r.call(this,"short",e),this.a=new o(e.a,16).toRed(this.red),this.b=new o(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(e,t,n,i){r.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new o(t,16),this.y=new o(n,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function c(e,t,n,i){r.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new o(0)):(this.x=new o(t,16),this.y=new o(n,16),this.z=new o(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}i(s,r),t.exports=s,s.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new o(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)n=new o(e.lambda,16);else{var r=this._getEndoRoots(this.n);0===this.g.mul(r[0]).x.cmp(this.g.x.redMul(t))?n=r[0]:(n=r[1],a(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map(function(e){return{a:new o(e.a,16),b:new o(e.b,16)}}):this._getEndoBasis(n)}}},s.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:o.mont(e),n=new o(2).toRed(t).redInvm(),i=n.redNeg(),r=new o(3).toRed(t).redNeg().redSqrt().redMul(n);return[i.redAdd(r).fromRed(),i.redSub(r).fromRed()]},s.prototype._getEndoBasis=function(e){for(var t,n,i,r,a,s,l,c,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,p=this.n.clone(),f=new o(1),g=new o(0),y=new o(0),m=new o(1),v=0;0!==h.cmpn(0);){var _=p.div(h);c=p.sub(_.mul(h)),u=y.sub(_.mul(f));var b=m.sub(_.mul(g));if(!i&&c.cmp(d)<0)t=l.neg(),n=f,i=c.neg(),r=u;else if(i&&2==++v)break;l=c,p=h,h=c,y=f,f=u,m=g,g=b}a=c.neg(),s=u;var S=i.sqr().add(r.sqr());return a.sqr().add(s.sqr()).cmp(S)>=0&&(a=t,s=n),i.negative&&(i=i.neg(),r=r.neg()),a.negative&&(a=a.neg(),s=s.neg()),[{a:i,b:r},{a:a,b:s}]},s.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],o=t[1],i=o.b.mul(e).divRound(this.n),r=n.b.neg().mul(e).divRound(this.n),a=i.mul(n.a),s=r.mul(o.a),l=i.mul(n.b),c=r.mul(o.b);return{k1:e.sub(a).sub(s),k2:l.add(c).neg()}},s.prototype.pointFromX=function(e,t){(e=new o(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(0!==i.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var r=i.fromRed().isOdd();return(t&&!r||!t&&r)&&(i=i.redNeg()),this.point(e,i)},s.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,o=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(o).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},s.prototype._endoWnafMulAdd=function(e,t,n){for(var o=this._endoWnafT1,i=this._endoWnafT2,r=0;r<e.length;r++){var a=this._endoSplit(t[r]),s=e[r],l=s._getBeta();a.k1.negative&&(a.k1.ineg(),s=s.neg(!0)),a.k2.negative&&(a.k2.ineg(),l=l.neg(!0)),o[2*r]=s,o[2*r+1]=l,i[2*r]=a.k1,i[2*r+1]=a.k2}for(var c=this._wnafMulAdd(1,o,i,2*r,n),u=0;u<2*r;u++)o[u]=null,i[u]=null;return c},i(l,r.BasePoint),s.prototype.point=function(e,t,n){return new l(this,e,t,n)},s.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,o=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(o)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(o)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var o=e.point(t[0],t[1],n);if(!t[2])return o;function i(t){return e.point(t[0],t[1],n)}var r=t[2];return o.precomputed={beta:null,doubles:r.doubles&&{step:r.doubles.step,points:[o].concat(r.doubles.points.map(i))},naf:r.naf&&{wnd:r.naf.wnd,points:[o].concat(r.naf.points.map(i))}},o},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),o=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,o)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),o=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(o),r=i.redSqr().redISub(this.x.redAdd(this.x)),a=i.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,a)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return e=new o(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,n){var o=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(o,i):this.curve._wnafMulAdd(1,o,i,2)},l.prototype.jmulAdd=function(e,t,n){var o=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(o,i,!0):this.curve._wnafMulAdd(1,o,i,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,o=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(o)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(o)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},i(c,r.BasePoint),s.prototype.jpoint=function(e,t,n){return new c(this,e,t,n)},c.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),o=this.y.redMul(t).redMul(e);return this.curve.point(n,o)},c.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},c.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),o=this.x.redMul(t),i=e.x.redMul(n),r=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),s=o.redSub(i),l=r.redSub(a);if(0===s.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),d=o.redMul(c),h=l.redSqr().redIAdd(u).redISub(d).redISub(d),p=l.redMul(d.redISub(h)).redISub(r.redMul(u)),f=this.z.redMul(e.z).redMul(s);return this.curve.jpoint(h,p,f)},c.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,o=e.x.redMul(t),i=this.y,r=e.y.redMul(t).redMul(this.z),a=n.redSub(o),s=i.redSub(r);if(0===a.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),c=l.redMul(a),u=n.redMul(l),d=s.redSqr().redIAdd(c).redISub(u).redISub(u),h=s.redMul(u.redISub(d)).redISub(i.redMul(c)),p=this.z.redMul(a);return this.curve.jpoint(d,h,p)},c.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var o=this.curve.a,i=this.curve.tinv,r=this.x,a=this.y,s=this.z,l=s.redSqr().redSqr(),c=a.redAdd(a);for(t=0;t<e;t++){var u=r.redSqr(),d=c.redSqr(),h=d.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(o.redMul(l)),f=r.redMul(d),g=p.redSqr().redISub(f.redAdd(f)),y=f.redISub(g),m=p.redMul(y);m=m.redIAdd(m).redISub(h);var v=c.redMul(s);t+1<e&&(l=l.redMul(h)),r=g,s=v,c=m}return this.curve.jpoint(r,c.redMul(i),s)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},c.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var o=this.x.redSqr(),i=this.y.redSqr(),r=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(o).redISub(r);a=a.redIAdd(a);var s=o.redAdd(o).redIAdd(o),l=s.redSqr().redISub(a).redISub(a),c=r.redIAdd(r);c=(c=c.redIAdd(c)).redIAdd(c),e=l,t=s.redMul(a.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(u).redISub(h);p=p.redIAdd(p);var f=u.redAdd(u).redIAdd(u),g=f.redSqr(),y=h.redIAdd(h);y=(y=y.redIAdd(y)).redIAdd(y),e=g.redISub(p).redISub(p),t=f.redMul(p.redISub(e)).redISub(y),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},c.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var o=this.x.redSqr(),i=this.y.redSqr(),r=i.redSqr(),a=this.x.redAdd(i).redSqr().redISub(o).redISub(r);a=a.redIAdd(a);var s=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),l=s.redSqr().redISub(a).redISub(a);e=l;var c=r.redIAdd(r);c=(c=c.redIAdd(c)).redIAdd(c),t=s.redMul(a.redISub(l)).redISub(c),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),p=this.x.redSub(u).redMul(this.x.redAdd(u));p=p.redAdd(p).redIAdd(p);var f=h.redIAdd(h),g=(f=f.redIAdd(f)).redAdd(f);e=p.redSqr().redISub(g),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var y=d.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),t=p.redMul(f.redISub(e)).redISub(y)}return this.curve.jpoint(e,t,n)},c.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,o=this.z,i=o.redSqr().redSqr(),r=t.redSqr(),a=n.redSqr(),s=r.redAdd(r).redIAdd(r).redIAdd(e.redMul(i)),l=t.redAdd(t),c=(l=l.redIAdd(l)).redMul(a),u=s.redSqr().redISub(c.redAdd(c)),d=c.redISub(u),h=a.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=s.redMul(d).redISub(h),f=n.redAdd(n).redMul(o);return this.curve.jpoint(u,p,f)},c.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),o=t.redSqr(),i=e.redAdd(e).redIAdd(e),r=i.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(o),s=(a=(a=(a=a.redIAdd(a)).redAdd(a).redIAdd(a)).redISub(r)).redSqr(),l=o.redIAdd(o);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var c=i.redIAdd(a).redSqr().redISub(r).redISub(s).redISub(l),u=t.redMul(c);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(s).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(c.redMul(l.redISub(c)).redISub(a.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=this.z.redAdd(a).redSqr().redISub(n).redISub(s);return this.curve.jpoint(d,h,p)},c.prototype.mul=function(e,t){return e=new o(e,t),this.curve._wnafMul(this,e)},c.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var o=t.redMul(this.z),i=n.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(o)).cmpn(0)},c.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var o=e.clone(),i=this.curve.redN.redMul(t);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},c.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},{"../utils":101,"./base":88,"bn.js":102,inherits:138}],93:[function(e,t,n){"use strict";var o,i=n,r=e("hash.js"),a=e("./curve"),s=e("./utils").assert;function l(e){"short"===e.type?this.curve=new a.short(e):"edwards"===e.type?this.curve=new a.edwards(e):this.curve=new a.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var n=new l(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=l,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:r.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:r.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:r.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:r.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:r.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:r.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{o=e("./precomputed/secp256k1")}catch(u){o=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:r.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})},{"./curve":90,"./precomputed/secp256k1":100,"./utils":101,"hash.js":124}],94:[function(e,t){"use strict";var n=e("bn.js"),o=e("hmac-drbg"),i=e("../utils"),r=e("../curves"),a=e("brorand"),s=i.assert,l=e("./key"),c=e("./signature");function u(e){if(!(this instanceof u))return new u(e);"string"==typeof e&&(s(Object.prototype.hasOwnProperty.call(r,e),"Unknown curve "+e),e=r[e]),e instanceof r.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}t.exports=u,u.prototype.keyPair=function(e){return new l(this,e)},u.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},u.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},u.prototype.genKeyPair=function(e){e||(e={});for(var t=new o({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||a(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),r=this.n.sub(new n(2));;){var s=new n(t.generate(i));if(!(s.cmp(r)>0))return s.iaddn(1),this.keyFromPrivate(s)}},u.prototype._truncateToN=function(e,t){var n=8*e.byteLength()-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},u.prototype.sign=function(e,t,i,r){"object"==typeof i&&(r=i,i=null),r||(r={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new n(e,16));for(var a=this.n.byteLength(),s=t.getPrivate().toArray("be",a),l=e.toArray("be",a),u=new o({hash:this.hash,entropy:s,nonce:l,pers:r.pers,persEnc:r.persEnc||"utf8"}),d=this.n.sub(new n(1)),h=0;;h++){var p=r.k?r.k(h):new n(u.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(d)>=0)){var f=this.g.mul(p);if(!f.isInfinity()){var g=f.getX(),y=g.umod(this.n);if(0!==y.cmpn(0)){var m=p.invm(this.n).mul(y.mul(t.getPrivate()).iadd(e));if(0!==(m=m.umod(this.n)).cmpn(0)){var v=(f.getY().isOdd()?1:0)|(0!==g.cmp(y)?2:0);return r.canonical&&m.cmp(this.nh)>0&&(m=this.n.sub(m),v^=1),new c({r:y,s:m,recoveryParam:v})}}}}}},u.prototype.verify=function(e,t,o,i){e=this._truncateToN(new n(e,16)),o=this.keyFromPublic(o,i);var r=(t=new c(t,"hex")).r,a=t.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0)return!1;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var s,l=a.invm(this.n),u=l.mul(e).umod(this.n),d=l.mul(r).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(u,o.getPublic(),d)).isInfinity()&&s.eqXToP(r):!(s=this.g.mulAdd(u,o.getPublic(),d)).isInfinity()&&0===s.getX().umod(this.n).cmp(r)},u.prototype.recoverPubKey=function(e,t,o,i){s((3&o)===o,"The recovery param is more than two bits"),t=new c(t,i);var r=this.n,a=new n(e),l=t.r,u=t.s,d=1&o,h=o>>1;if(l.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");l=h?this.curve.pointFromX(l.add(this.curve.n),d):this.curve.pointFromX(l,d);var p=t.r.invm(r),f=r.sub(a).mul(p).umod(r),g=u.mul(p).umod(r);return this.g.mulAdd(f,l,g)},u.prototype.getKeyRecoveryParam=function(e,t,n,o){if(null!==(t=new c(t,o)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var r;try{r=this.recoverPubKey(e,t,i)}catch(e){continue}if(r.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},{"../curves":93,"../utils":101,"./key":95,"./signature":96,"bn.js":102,brorand:18,"hmac-drbg":136}],95:[function(e,t){"use strict";var n=e("bn.js"),o=e("../utils").assert;function i(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}t.exports=i,i.fromPublic=function(e,t,n){return t instanceof i?t:new i(e,{pub:t,pubEnc:n})},i.fromPrivate=function(e,t,n){return t instanceof i?t:new i(e,{priv:t,privEnc:n})},i.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},i.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(e,t){this.priv=new n(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?o(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||o(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},i.prototype.derive=function(e){return e.validate()||o(e.validate(),"public point not validated"),e.mul(this.priv).getX()},i.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},i.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},{"../utils":101,"bn.js":102}],96:[function(e,t){"use strict";var n=e("bn.js"),o=e("../utils"),i=o.assert;function r(e,t){if(e instanceof r)return e;this._importDER(e,t)||(i(e.r&&e.s,"Signature without r or s"),this.r=new n(e.r,16),this.s=new n(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function a(){this.place=0}function s(e,t){var n=e[t.place++];if(!(128&n))return n;var o=15&n;if(0===o||o>4)return!1;for(var i=0,r=0,a=t.place;r<o;r++,a++)i<<=8,i|=e[a],i>>>=0;return!(i<=127)&&(t.place=a,i)}function l(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function c(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}t.exports=r,r.prototype._importDER=function(e,t){e=o.toArray(e,t);var i=new a;if(48!==e[i.place++])return!1;var r=s(e,i);if(!1===r)return!1;if(r+i.place!==e.length)return!1;if(2!==e[i.place++])return!1;var l=s(e,i);if(!1===l)return!1;var c=e.slice(i.place,l+i.place);if(i.place+=l,2!==e[i.place++])return!1;var u=s(e,i);if(!1===u)return!1;if(e.length!==u+i.place)return!1;var d=e.slice(i.place,u+i.place);if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new n(c),this.s=new n(d),this.recoveryParam=null,!0},r.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=l(t),n=l(n);!(n[0]||128&n[1]);)n=n.slice(1);var i=[2];c(i,t.length),(i=i.concat(t)).push(2),c(i,n.length);var r=i.concat(n),a=[48];return c(a,r.length),a=a.concat(r),o.encode(a,e)}},{"../utils":101,"bn.js":102}],97:[function(e,t){"use strict";var n=e("hash.js"),o=e("../curves"),i=e("../utils"),r=i.assert,a=i.parseBytes,s=e("./key"),l=e("./signature");function c(e){if(r("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof c))return new c(e);e=o[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=n.sha512}t.exports=c,c.prototype.sign=function(e,t){e=a(e);var n=this.keyFromSecret(t),o=this.hashInt(n.messagePrefix(),e),i=this.g.mul(o),r=this.encodePoint(i),s=this.hashInt(r,n.pubBytes(),e).mul(n.priv()),l=o.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:l,Rencoded:r})},c.prototype.verify=function(e,t,n){e=a(e),t=this.makeSignature(t);var o=this.keyFromPublic(n),i=this.hashInt(t.Rencoded(),o.pubBytes(),e),r=this.g.mul(t.S());return t.R().add(o.pub().mul(i)).eq(r)},c.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return i.intFromLE(e.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(e){return s.fromPublic(this,e)},c.prototype.keyFromSecret=function(e){return s.fromSecret(this,e)},c.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},c.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},c.prototype.decodePoint=function(e){var t=(e=i.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),o=0!=(128&e[t]),r=i.intFromLE(n);return this.curve.pointFromY(r,o)},c.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(e){return i.intFromLE(e)},c.prototype.isPoint=function(e){return e instanceof this.pointClass}},{"../curves":93,"../utils":101,"./key":98,"./signature":99,"hash.js":124}],98:[function(e,t){"use strict";var n=e("../utils"),o=n.assert,i=n.parseBytes,r=n.cachedProperty;function a(e,t){this.eddsa=e,this._secret=i(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=i(t.pub)}a.fromPublic=function(e,t){return t instanceof a?t:new a(e,{pub:t})},a.fromSecret=function(e,t){return t instanceof a?t:new a(e,{secret:t})},a.prototype.secret=function(){return this._secret},r(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),r(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),r(a,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,o=t.slice(0,e.encodingLength);return o[0]&=248,o[n]&=127,o[n]|=64,o}),r(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),r(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),r(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(e){return o(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},a.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},a.prototype.getSecret=function(e){return o(this._secret,"KeyPair is public only"),n.encode(this.secret(),e)},a.prototype.getPublic=function(e){return n.encode(this.pubBytes(),e)},t.exports=a},{"../utils":101}],99:[function(e,t){"use strict";var n=e("bn.js"),o=e("../utils"),i=o.assert,r=o.cachedProperty,a=o.parseBytes;function s(e,t){this.eddsa=e,"object"!=typeof t&&(t=a(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),i(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof n&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}r(s,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),r(s,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),r(s,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),r(s,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),s.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},s.prototype.toHex=function(){return o.encode(this.toBytes(),"hex").toUpperCase()},t.exports=s},{"../utils":101,"bn.js":102}],100:[function(e,t){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},{}],101:[function(e,t,n){"use strict";var o=n,i=e("bn.js"),r=e("minimalistic-assert"),a=e("minimalistic-crypto-utils");o.assert=r,o.toArray=a.toArray,o.zero2=a.zero2,o.toHex=a.toHex,o.encode=a.encode,o.getNAF=function(e,t,n){var o=new Array(Math.max(e.bitLength(),n)+1);o.fill(0);for(var i=1<<t+1,r=e.clone(),a=0;a<o.length;a++){var s,l=r.andln(i-1);r.isOdd()?(s=l>(i>>1)-1?(i>>1)-l:l,r.isubn(s)):s=0,o[a]=s,r.iushrn(1)}return o},o.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var o,i=0,r=0;e.cmpn(-i)>0||t.cmpn(-r)>0;){var a,s,l=e.andln(3)+i&3,c=t.andln(3)+r&3;3===l&&(l=-1),3===c&&(c=-1),a=0==(1&l)?0:3!=(o=e.andln(7)+i&7)&&5!==o||2!==c?l:-l,n[0].push(a),s=0==(1&c)?0:3!=(o=t.andln(7)+r&7)&&5!==o||2!==l?c:-c,n[1].push(s),2*i===a+1&&(i=1-i),2*r===s+1&&(r=1-r),e.iushrn(1),t.iushrn(1)}return n},o.cachedProperty=function(e,t,n){var o="_"+t;e.prototype[t]=function(){return void 0!==this[o]?this[o]:this[o]=n.call(this)}},o.parseBytes=function(e){return"string"==typeof e?o.toArray(e,"hex"):e},o.intFromLE=function(e){return new i(e,"hex","le")}},{"bn.js":102,"minimalistic-assert":142,"minimalistic-crypto-utils":143}],102:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{buffer:19,dup:15}],103:[function(e,t){t.exports={_from:"elliptic@^6.5.3",_id:"elliptic@6.5.4",_inBundle:!1,_integrity:"sha512-iLhC6ULemrljPZb+QutR5TQGB+pdW6KGD5RSegS+8sorOZT+rdQFbsQFJgvN3eRqNALqJer4oQ16YvJHlU8hzQ==",_location:"/elliptic",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"elliptic@^6.5.3",name:"elliptic",escapedName:"elliptic",rawSpec:"^6.5.3",saveSpec:null,fetchSpec:"^6.5.3"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmmirror.com/elliptic/-/elliptic-6.5.4.tgz",_shasum:"da37cebd31e79a1367e941b592ed1fbebd58abbb",_spec:"elliptic@^6.5.3",_where:"C:\\Users\\nantas\\fireball-x\\fireball_2.4.10\\dist\\resources\\app\\node_modules\\browserify-sign",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},bundleDependencies:!1,dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},deprecated:!1,description:"EC cryptography",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.5.4"}},{}],104:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"object"==typeof e&&null!==e}function r(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(r(n=this._events[e]))return!1;if(o(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(c=n.slice()).length,l=0;l<a;l++)c[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=r(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){if(!o(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},n.prototype.removeListener=function(e,t){var n,r,a,s;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=(n=this._events[e]).length,r=-1,n===t||o(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(o(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],105:[function(e,t){var n=e("safe-buffer").Buffer,o=e("md5.js");t.exports=function(e,t,i,r){if(n.isBuffer(e)||(e=n.from(e,"binary")),t&&(n.isBuffer(t)||(t=n.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var a=i/8,s=n.alloc(a),l=n.alloc(r||0),c=n.alloc(0);a>0||r>0;){var u=new o;u.update(c),u.update(e),t&&u.update(t),c=u.digest();var d=0;if(a>0){var h=s.length-a;d=Math.min(a,c.length),c.copy(s,h,0,d),a-=d}if(d<c.length&&r>0){var p=l.length-r,f=Math.min(r,c.length-d);c.copy(l,p,d,d+f),r-=f}}return c.fill(0),{key:s,iv:l}}},{"md5.js":139,"safe-buffer":182}],106:[function(e,t){"use strict";var n=e("safe-buffer").Buffer,o=e("readable-stream").Transform;function i(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}function r(e){o.call(this),this._block=n.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}e("inherits")(r,o),r.prototype._transform=function(e,t,n){var o=null;try{this.update(e,t)}catch(i){o=i}n(o)},r.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(n){t=n}e(t)},r.prototype.update=function(e,t){if(i(e,"Data"),this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=n.from(e,t));for(var o=this._block,r=0;this._blockOffset+e.length-r>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)o[a++]=e[r++];this._update(),this._blockOffset=0}for(;r<e.length;)o[this._blockOffset++]=e[r++];for(var s=0,l=8*e.length;l>0;++s)this._length[s]+=l,(l=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*l);return this},r.prototype._update=function(){throw new Error("_update is not implemented")},r.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},r.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=r},{inherits:138,"readable-stream":121,"safe-buffer":122}],107:[function(e,t,n){arguments[4][47][0].apply(n,arguments)},{dup:47}],108:[function(e,t,n){arguments[4][48][0].apply(n,arguments)},{"./_stream_readable":110,"./_stream_writable":112,_process:156,dup:48,inherits:138}],109:[function(e,t,n){arguments[4][49][0].apply(n,arguments)},{"./_stream_transform":111,dup:49,inherits:138}],110:[function(e,t,n){arguments[4][50][0].apply(n,arguments)},{"../errors":107,"./_stream_duplex":108,"./internal/streams/async_iterator":113,"./internal/streams/buffer_list":114,"./internal/streams/destroy":115,"./internal/streams/from":117,"./internal/streams/state":119,"./internal/streams/stream":120,_process:156,buffer:65,dup:50,events:104,inherits:138,"string_decoder/":123,util:19}],111:[function(e,t,n){arguments[4][51][0].apply(n,arguments)},{"../errors":107,"./_stream_duplex":108,dup:51,inherits:138}],112:[function(e,t,n){arguments[4][52][0].apply(n,arguments)},{"../errors":107,"./_stream_duplex":108,"./internal/streams/destroy":115,"./internal/streams/state":119,"./internal/streams/stream":120,_process:156,buffer:65,dup:52,inherits:138,"util-deprecate":194}],113:[function(e,t,n){arguments[4][53][0].apply(n,arguments)},{"./end-of-stream":116,_process:156,dup:53}],114:[function(e,t,n){arguments[4][54][0].apply(n,arguments)},{buffer:65,dup:54,util:19}],115:[function(e,t,n){arguments[4][55][0].apply(n,arguments)},{_process:156,dup:55}],116:[function(e,t,n){arguments[4][56][0].apply(n,arguments)},{"../../../errors":107,dup:56}],117:[function(e,t,n){arguments[4][57][0].apply(n,arguments)},{dup:57}],118:[function(e,t,n){arguments[4][58][0].apply(n,arguments)},{"../../../errors":107,"./end-of-stream":116,dup:58}],119:[function(e,t,n){arguments[4][59][0].apply(n,arguments)},{"../../../errors":107,dup:59}],120:[function(e,t,n){arguments[4][60][0].apply(n,arguments)},{dup:60,events:104}],121:[function(e,t,n){arguments[4][61][0].apply(n,arguments)},{"./lib/_stream_duplex.js":108,"./lib/_stream_passthrough.js":109,"./lib/_stream_readable.js":110,"./lib/_stream_transform.js":111,"./lib/_stream_writable.js":112,"./lib/internal/streams/end-of-stream.js":116,"./lib/internal/streams/pipeline.js":118,dup:61}],122:[function(e,t,n){arguments[4][62][0].apply(n,arguments)},{buffer:65,dup:62}],123:[function(e,t,n){arguments[4][63][0].apply(n,arguments)},{dup:63,"safe-buffer":122}],124:[function(e,t,n){var o=n;o.utils=e("./hash/utils"),o.common=e("./hash/common"),o.sha=e("./hash/sha"),o.ripemd=e("./hash/ripemd"),o.hmac=e("./hash/hmac"),o.sha1=o.sha.sha1,o.sha256=o.sha.sha256,o.sha224=o.sha.sha224,o.sha384=o.sha.sha384,o.sha512=o.sha.sha512,o.ripemd160=o.ripemd.ripemd160},{"./hash/common":125,"./hash/hmac":126,"./hash/ripemd":127,"./hash/sha":128,"./hash/utils":135}],125:[function(e,t,n){"use strict";var o=e("./utils"),i=e("minimalistic-assert");function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}n.BlockHash=r,r.prototype.update=function(e,t){if(e=o.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=o.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},r.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},r.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,o=new Array(n+this.padLength);o[0]=128;for(var i=1;i<n;i++)o[i]=0;if(e<<=3,"big"===this.endian){for(var r=8;r<this.padLength;r++)o[i++]=0;o[i++]=0,o[i++]=0,o[i++]=0,o[i++]=0,o[i++]=e>>>24&255,o[i++]=e>>>16&255,o[i++]=e>>>8&255,o[i++]=255&e}else for(o[i++]=255&e,o[i++]=e>>>8&255,o[i++]=e>>>16&255,o[i++]=e>>>24&255,o[i++]=0,o[i++]=0,o[i++]=0,o[i++]=0,r=8;r<this.padLength;r++)o[i++]=0;return o}},{"./utils":135,"minimalistic-assert":142}],126:[function(e,t){"use strict";var n=e("./utils"),o=e("minimalistic-assert");function i(e,t,o){if(!(this instanceof i))return new i(e,t,o);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(t,o))}t.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),o(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},{"./utils":135,"minimalistic-assert":142}],127:[function(e,t,n){"use strict";var o=e("./utils"),i=e("./common"),r=o.rotl32,a=o.sum32,s=o.sum32_3,l=o.sum32_4,c=i.BlockHash;function u(){if(!(this instanceof u))return new u;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,n,o){return e<=15?t^n^o:e<=31?t&n|~t&o:e<=47?(t|~n)^o:e<=63?t&o|n&~o:t^(n|~o)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function p(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}o.inherits(u,c),n.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var n=this.h[0],o=this.h[1],i=this.h[2],c=this.h[3],u=this.h[4],v=n,_=o,b=i,S=c,M=u,C=0;C<80;C++){var T=a(r(l(n,d(C,o,i,c),e[f[C]+t],h(C)),y[C]),u);n=u,u=c,c=r(i,10),i=o,o=T,T=a(r(l(v,d(79-C,_,b,S),e[g[C]+t],p(C)),m[C]),M),v=M,M=S,S=r(b,10),b=_,_=T}T=s(this.h[1],i,S),this.h[1]=s(this.h[2],c,M),this.h[2]=s(this.h[3],u,v),this.h[3]=s(this.h[4],n,_),this.h[4]=s(this.h[0],o,b),this.h[0]=T},u.prototype._digest=function(e){return"hex"===e?o.toHex32(this.h,"little"):o.split32(this.h,"little")};var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],g=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},{"./common":125,"./utils":135}],128:[function(e,t,n){"use strict";n.sha1=e("./sha/1"),n.sha224=e("./sha/224"),n.sha256=e("./sha/256"),n.sha384=e("./sha/384"),n.sha512=e("./sha/512")},{"./sha/1":129,"./sha/224":130,"./sha/256":131,"./sha/384":132,"./sha/512":133}],129:[function(e,t){"use strict";var n=e("../utils"),o=e("../common"),i=e("./common"),r=n.rotl32,a=n.sum32,s=n.sum32_5,l=i.ft_1,c=o.BlockHash,u=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}n.inherits(d,c),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(e,t){for(var n=this.W,o=0;o<16;o++)n[o]=e[t+o];for(;o<n.length;o++)n[o]=r(n[o-3]^n[o-8]^n[o-14]^n[o-16],1);var i=this.h[0],c=this.h[1],d=this.h[2],h=this.h[3],p=this.h[4];for(o=0;o<n.length;o++){var f=~~(o/20),g=s(r(i,5),l(f,c,d,h),p,n[o],u[f]);p=h,h=d,d=r(c,30),c=i,i=g}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],c),this.h[2]=a(this.h[2],d),this.h[3]=a(this.h[3],h),this.h[4]=a(this.h[4],p)},d.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":125,"../utils":135,"./common":134}],130:[function(e,t){"use strict";var n=e("../utils"),o=e("./256");function i(){if(!(this instanceof i))return new i;o.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}n.inherits(i,o),t.exports=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")}},{"../utils":135,"./256":131}],131:[function(e,t){"use strict";var n=e("../utils"),o=e("../common"),i=e("./common"),r=e("minimalistic-assert"),a=n.sum32,s=n.sum32_4,l=n.sum32_5,c=i.ch32,u=i.maj32,d=i.s0_256,h=i.s1_256,p=i.g0_256,f=i.g1_256,g=o.BlockHash,y=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=y,this.W=new Array(64)}n.inherits(m,g),t.exports=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(e,t){for(var n=this.W,o=0;o<16;o++)n[o]=e[t+o];for(;o<n.length;o++)n[o]=s(f(n[o-2]),n[o-7],p(n[o-15]),n[o-16]);var i=this.h[0],g=this.h[1],y=this.h[2],m=this.h[3],v=this.h[4],_=this.h[5],b=this.h[6],S=this.h[7];for(r(this.k.length===n.length),o=0;o<n.length;o++){var M=l(S,h(v),c(v,_,b),this.k[o],n[o]),C=a(d(i),u(i,g,y));S=b,b=_,_=v,v=a(m,M),m=y,y=g,g=i,i=a(M,C)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],g),this.h[2]=a(this.h[2],y),this.h[3]=a(this.h[3],m),this.h[4]=a(this.h[4],v),this.h[5]=a(this.h[5],_),this.h[6]=a(this.h[6],b),this.h[7]=a(this.h[7],S)},m.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":125,"../utils":135,"./common":134,"minimalistic-assert":142}],132:[function(e,t){"use strict";var n=e("../utils"),o=e("./512");function i(){if(!(this instanceof i))return new i;o.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}n.inherits(i,o),t.exports=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")}},{"../utils":135,"./512":133}],133:[function(e,t){"use strict";var n=e("../utils"),o=e("../common"),i=e("minimalistic-assert"),r=n.rotr64_hi,a=n.rotr64_lo,s=n.shr64_hi,l=n.shr64_lo,c=n.sum64,u=n.sum64_hi,d=n.sum64_lo,h=n.sum64_4_hi,p=n.sum64_4_lo,f=n.sum64_5_hi,g=n.sum64_5_lo,y=o.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;y.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}function _(e,t,n,o,i){var r=e&n^~e&i;return r<0&&(r+=4294967296),r}function b(e,t,n,o,i,r){var a=t&o^~t&r;return a<0&&(a+=4294967296),a}function S(e,t,n,o,i){var r=e&n^e&i^n&i;return r<0&&(r+=4294967296),r}function M(e,t,n,o,i,r){var a=t&o^t&r^o&r;return a<0&&(a+=4294967296),a}function C(e,t){var n=r(e,t,28)^r(t,e,2)^r(t,e,7);return n<0&&(n+=4294967296),n}function T(e,t){var n=a(e,t,28)^a(t,e,2)^a(t,e,7);return n<0&&(n+=4294967296),n}function k(e,t){var n=a(e,t,14)^a(e,t,18)^a(t,e,9);return n<0&&(n+=4294967296),n}function I(e,t){var n=r(e,t,1)^r(e,t,8)^s(e,t,7);return n<0&&(n+=4294967296),n}function E(e,t){var n=a(e,t,1)^a(e,t,8)^l(e,t,7);return n<0&&(n+=4294967296),n}function w(e,t){var n=a(e,t,19)^a(t,e,29)^l(e,t,6);return n<0&&(n+=4294967296),n}n.inherits(v,y),t.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var n=this.W,o=0;o<32;o++)n[o]=e[t+o];for(;o<n.length;o+=2){var i=(y=n[o-4],m=n[o-3],v=void 0,(v=r(y,m,19)^r(m,y,29)^s(y,m,6))<0&&(v+=4294967296),v),a=w(n[o-4],n[o-3]),l=n[o-14],c=n[o-13],u=I(n[o-30],n[o-29]),d=E(n[o-30],n[o-29]),f=n[o-32],g=n[o-31];n[o]=h(i,a,l,c,u,d,f,g),n[o+1]=p(i,a,l,c,u,d,f,g)}var y,m,v},v.prototype._update=function(e,t){this._prepareBlock(e,t);var n,o,a,s=this.W,l=this.h[0],h=this.h[1],p=this.h[2],y=this.h[3],m=this.h[4],v=this.h[5],I=this.h[6],E=this.h[7],w=this.h[8],P=this.h[9],R=this.h[10],O=this.h[11],D=this.h[12],A=this.h[13],L=this.h[14],B=this.h[15];i(this.k.length===s.length);for(var U=0;U<s.length;U+=2){var N=L,j=B,x=(a=void 0,(a=r(n=w,o=P,14)^r(n,o,18)^r(o,n,9))<0&&(a+=4294967296),a),G=k(w,P),H=_(w,0,R,0,D),F=b(0,P,0,O,0,A),V=this.k[U],q=this.k[U+1],Q=s[U],Y=s[U+1],K=f(N,j,x,G,H,F,V,q,Q,Y),W=g(N,j,x,G,H,F,V,q,Q,Y);N=C(l,h),j=T(l,h),x=S(l,0,p,0,m),G=M(0,h,0,y,0,v);var z=u(N,j,x,G),J=d(N,j,x,G);L=D,B=A,D=R,A=O,R=w,O=P,w=u(I,E,K,W),P=d(E,E,K,W),I=m,E=v,m=p,v=y,p=l,y=h,l=u(K,W,z,J),h=d(K,W,z,J)}c(this.h,0,l,h),c(this.h,2,p,y),c(this.h,4,m,v),c(this.h,6,I,E),c(this.h,8,w,P),c(this.h,10,R,O),c(this.h,12,D,A),c(this.h,14,L,B)},v.prototype._digest=function(e){return"hex"===e?n.toHex32(this.h,"big"):n.split32(this.h,"big")}},{"../common":125,"../utils":135,"minimalistic-assert":142}],134:[function(e,t,n){"use strict";var o=e("../utils").rotr32;function i(e,t,n){return e&t^~e&n}function r(e,t,n){return e&t^e&n^t&n}function a(e,t,n){return e^t^n}n.ft_1=function(e,t,n,o){return 0===e?i(t,n,o):1===e||3===e?a(t,n,o):2===e?r(t,n,o):void 0},n.ch32=i,n.maj32=r,n.p32=a,n.s0_256=function(e){return o(e,2)^o(e,13)^o(e,22)},n.s1_256=function(e){return o(e,6)^o(e,11)^o(e,25)},n.g0_256=function(e){return o(e,7)^o(e,18)^e>>>3},n.g1_256=function(e){return o(e,17)^o(e,19)^e>>>10}},{"../utils":135}],135:[function(e,t,n){"use strict";var o=e("minimalistic-assert"),i=e("inherits");function r(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function a(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function s(e){return 1===e.length?"0"+e:e}function l(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}n.inherits=i,n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var o=0,i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?n[o++]=a:a<2048?(n[o++]=a>>6|192,n[o++]=63&a|128):r(e,i)?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++i)),n[o++]=a>>18|240,n[o++]=a>>12&63|128,n[o++]=a>>6&63|128,n[o++]=63&a|128):(n[o++]=a>>12|224,n[o++]=a>>6&63|128,n[o++]=63&a|128)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},n.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=s(e[n].toString(16));return t},n.htonl=a,n.toHex32=function(e,t){for(var n="",o=0;o<e.length;o++){var i=e[o];"little"===t&&(i=a(i)),n+=l(i.toString(16))}return n},n.zero2=s,n.zero8=l,n.join32=function(e,t,n,i){var r=n-t;o(r%4==0);for(var a=new Array(r/4),s=0,l=t;s<a.length;s++,l+=4){var c;c="big"===i?e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],a[s]=c>>>0}return a},n.split32=function(e,t){for(var n=new Array(4*e.length),o=0,i=0;o<e.length;o++,i+=4){var r=e[o];"big"===t?(n[i]=r>>>24,n[i+1]=r>>>16&255,n[i+2]=r>>>8&255,n[i+3]=255&r):(n[i+3]=r>>>24,n[i+2]=r>>>16&255,n[i+1]=r>>>8&255,n[i]=255&r)}return n},n.rotr32=function(e,t){return e>>>t|e<<32-t},n.rotl32=function(e,t){return e<<t|e>>>32-t},n.sum32=function(e,t){return e+t>>>0},n.sum32_3=function(e,t,n){return e+t+n>>>0},n.sum32_4=function(e,t,n,o){return e+t+n+o>>>0},n.sum32_5=function(e,t,n,o,i){return e+t+n+o+i>>>0},n.sum64=function(e,t,n,o){var i=e[t],r=o+e[t+1]>>>0,a=(r<o?1:0)+n+i;e[t]=a>>>0,e[t+1]=r},n.sum64_hi=function(e,t,n,o){return(t+o>>>0<t?1:0)+e+n>>>0},n.sum64_lo=function(e,t,n,o){return t+o>>>0},n.sum64_4_hi=function(e,t,n,o,i,r,a,s){var l=0,c=t;return l+=(c=c+o>>>0)<t?1:0,l+=(c=c+r>>>0)<r?1:0,e+n+i+a+(l+=(c=c+s>>>0)<s?1:0)>>>0},n.sum64_4_lo=function(e,t,n,o,i,r,a,s){return t+o+r+s>>>0},n.sum64_5_hi=function(e,t,n,o,i,r,a,s,l,c){var u=0,d=t;return u+=(d=d+o>>>0)<t?1:0,u+=(d=d+r>>>0)<r?1:0,u+=(d=d+s>>>0)<s?1:0,e+n+i+a+l+(u+=(d=d+c>>>0)<c?1:0)>>>0},n.sum64_5_lo=function(e,t,n,o,i,r,a,s,l,c){return t+o+r+s+c>>>0},n.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},n.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},n.shr64_hi=function(e,t,n){return e>>>n},n.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},{inherits:138,"minimalistic-assert":142}],136:[function(e,t){"use strict";var n=e("hash.js"),o=e("minimalistic-crypto-utils"),i=e("minimalistic-assert");function r(e){if(!(this instanceof r))return new r(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=o.toArray(e.entropy,e.entropyEnc||"hex"),n=o.toArray(e.nonce,e.nonceEnc||"hex"),a=o.toArray(e.pers,e.persEnc||"hex");i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,a)}t.exports=r,r.prototype._init=function(e,t,n){var o=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656},r.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},r.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},r.prototype.reseed=function(e,t,n,r){"string"!=typeof t&&(r=n,n=t,t=null),e=o.toArray(e,t),n=o.toArray(n,r),i(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},r.prototype.generate=function(e,t,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(i=n,n=t,t=null),n&&(n=o.toArray(n,i||"hex"),this._update(n));for(var r=[];r.length<e;)this.V=this._hmac().update(this.V).digest(),r=r.concat(this.V);var a=r.slice(0,e);return this._update(n),this._reseed++,o.encode(a,t)}},{"hash.js":124,"minimalistic-assert":142,"minimalistic-crypto-utils":143}],137:[function(e,t,n){n.read=function(e,t,n,o,i){var r,a,s=8*i-o-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,p=e[t+d];for(d+=h,r=p&(1<<-u)-1,p>>=-u,u+=s;u>0;r=256*r+e[t+d],d+=h,u-=8);for(a=r&(1<<-u)-1,r>>=-u,u+=o;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===r)r=1-c;else{if(r===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,o),r-=c}return(p?-1:1)*a*Math.pow(2,r-o)},n.write=function(e,t,n,o,i,r){var a,s,l,c=8*r-i-1,u=(1<<c)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=o?0:r-1,f=o?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=f,a/=256,c-=8);e[n+p-f]|=128*g}},{}],138:[function(e,t){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],139:[function(e,t){"use strict";var n=e("inherits"),o=e("hash-base"),i=e("safe-buffer").Buffer,r=new Array(16);function a(){o.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function s(e,t){return e<<t|e>>>32-t}function l(e,t,n,o,i,r,a){return s(e+(t&n|~t&o)+i+r|0,a)+t|0}function c(e,t,n,o,i,r,a){return s(e+(t&o|n&~o)+i+r|0,a)+t|0}function u(e,t,n,o,i,r,a){return s(e+(t^n^o)+i+r|0,a)+t|0}function d(e,t,n,o,i,r,a){return s(e+(n^(t|~o))+i+r|0,a)+t|0}n(a,o),a.prototype._update=function(){for(var e=r,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,o=this._b,i=this._c,a=this._d;n=l(n,o,i,a,e[0],3614090360,7),a=l(a,n,o,i,e[1],3905402710,12),i=l(i,a,n,o,e[2],606105819,17),o=l(o,i,a,n,e[3],3250441966,22),n=l(n,o,i,a,e[4],4118548399,7),a=l(a,n,o,i,e[5],1200080426,12),i=l(i,a,n,o,e[6],2821735955,17),o=l(o,i,a,n,e[7],4249261313,22),n=l(n,o,i,a,e[8],1770035416,7),a=l(a,n,o,i,e[9],2336552879,12),i=l(i,a,n,o,e[10],4294925233,17),o=l(o,i,a,n,e[11],2304563134,22),n=l(n,o,i,a,e[12],1804603682,7),a=l(a,n,o,i,e[13],4254626195,12),i=l(i,a,n,o,e[14],2792965006,17),n=c(n,o=l(o,i,a,n,e[15],1236535329,22),i,a,e[1],4129170786,5),a=c(a,n,o,i,e[6],3225465664,9),i=c(i,a,n,o,e[11],643717713,14),o=c(o,i,a,n,e[0],3921069994,20),n=c(n,o,i,a,e[5],3593408605,5),a=c(a,n,o,i,e[10],38016083,9),i=c(i,a,n,o,e[15],3634488961,14),o=c(o,i,a,n,e[4],3889429448,20),n=c(n,o,i,a,e[9],568446438,5),a=c(a,n,o,i,e[14],3275163606,9),i=c(i,a,n,o,e[3],4107603335,14),o=c(o,i,a,n,e[8],1163531501,20),n=c(n,o,i,a,e[13],2850285829,5),a=c(a,n,o,i,e[2],4243563512,9),i=c(i,a,n,o,e[7],1735328473,14),n=u(n,o=c(o,i,a,n,e[12],2368359562,20),i,a,e[5],4294588738,4),a=u(a,n,o,i,e[8],2272392833,11),i=u(i,a,n,o,e[11],1839030562,16),o=u(o,i,a,n,e[14],4259657740,23),n=u(n,o,i,a,e[1],2763975236,4),a=u(a,n,o,i,e[4],1272893353,11),i=u(i,a,n,o,e[7],4139469664,16),o=u(o,i,a,n,e[10],3200236656,23),n=u(n,o,i,a,e[13],681279174,4),a=u(a,n,o,i,e[0],3936430074,11),i=u(i,a,n,o,e[3],3572445317,16),o=u(o,i,a,n,e[6],76029189,23),n=u(n,o,i,a,e[9],3654602809,4),a=u(a,n,o,i,e[12],3873151461,11),i=u(i,a,n,o,e[15],530742520,16),n=d(n,o=u(o,i,a,n,e[2],3299628645,23),i,a,e[0],4096336452,6),a=d(a,n,o,i,e[7],1126891415,10),i=d(i,a,n,o,e[14],2878612391,15),o=d(o,i,a,n,e[5],4237533241,21),n=d(n,o,i,a,e[12],1700485571,6),a=d(a,n,o,i,e[3],2399980690,10),i=d(i,a,n,o,e[10],4293915773,15),o=d(o,i,a,n,e[1],2240044497,21),n=d(n,o,i,a,e[8],1873313359,6),a=d(a,n,o,i,e[15],4264355552,10),i=d(i,a,n,o,e[6],2734768916,15),o=d(o,i,a,n,e[13],1309151649,21),n=d(n,o,i,a,e[4],4149444226,6),a=d(a,n,o,i,e[11],3174756917,10),i=d(i,a,n,o,e[2],718787259,15),o=d(o,i,a,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+o|0,this._c=this._c+i|0,this._d=this._d+a|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=i.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},t.exports=a},{"hash-base":106,inherits:138,"safe-buffer":182}],140:[function(e,t){var n=e("bn.js"),o=e("brorand");function i(e){this.rand=e||new o.Rand}t.exports=i,i.create=function(e){return new i(e)},i.prototype._randbelow=function(e){var t=e.bitLength(),o=Math.ceil(t/8);do{var i=new n(this.rand.generate(o))}while(i.cmp(e)>=0);return i},i.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},i.prototype.test=function(e,t,o){var i=e.bitLength(),r=n.mont(e),a=new n(1).toRed(r);t||(t=Math.max(1,i/48|0));for(var s=e.subn(1),l=0;!s.testn(l);l++);for(var c=e.shrn(l),u=s.toRed(r);t>0;t--){var d=this._randrange(new n(2),s);o&&o(d);var h=d.toRed(r).redPow(c);if(0!==h.cmp(a)&&0!==h.cmp(u)){for(var p=1;p<l;p++){if(0===(h=h.redSqr()).cmp(a))return!1;if(0===h.cmp(u))break}if(p===l)return!1}}return!0},i.prototype.getDivisor=function(e,t){var o=e.bitLength(),i=n.mont(e),r=new n(1).toRed(i);t||(t=Math.max(1,o/48|0));for(var a=e.subn(1),s=0;!a.testn(s);s++);for(var l=e.shrn(s),c=a.toRed(i);t>0;t--){var u=this._randrange(new n(2),a),d=e.gcd(u);if(0!==d.cmpn(1))return d;var h=u.toRed(i).redPow(l);if(0!==h.cmp(r)&&0!==h.cmp(c)){for(var p=1;p<s;p++){if(0===(h=h.redSqr()).cmp(r))return h.fromRed().subn(1).gcd(e);if(0===h.cmp(c))break}if(p===s)return(h=h.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},{"bn.js":141,brorand:18}],141:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{buffer:19,dup:15}],142:[function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}t.exports=n,n.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},{}],143:[function(e,t,n){"use strict";var o=n;function i(e){return 1===e.length?"0"+e:e}function r(e){for(var t="",n=0;n<e.length;n++)t+=i(e[n].toString(16));return t}o.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var o=0;o<e.length;o++)n[o]=0|e[o];return n}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),o=0;o<e.length;o+=2)n.push(parseInt(e[o]+e[o+1],16));else for(o=0;o<e.length;o++){var i=e.charCodeAt(o),r=i>>8,a=255&i;r?n.push(r,a):n.push(a)}return n},o.zero2=i,o.toHex=r,o.encode=function(e,t){return"hex"===t?r(e):e}},{}],144:[function(e,t){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},{}],145:[function(e,t,n){"use strict";var o=e("asn1.js");n.certificate=e("./certificate");var i=o.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});n.RSAPrivateKey=i;var r=o.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});n.RSAPublicKey=r;var a=o.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});n.PublicKey=a;var s=o.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),l=o.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});n.PrivateKey=l;var c=o.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});n.EncryptedPrivateKey=c;var u=o.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});n.DSAPrivateKey=u,n.DSAparam=o.define("DSAparam",function(){this.int()});var d=o.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(h),this.key("publicKey").optional().explicit(1).bitstr())});n.ECPrivateKey=d;var h=o.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});n.signature=o.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},{"./certificate":146,"asn1.js":1}],146:[function(e,t){"use strict";var n=e("asn1.js"),o=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),i=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),r=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(r),this.key("subjectPublicKey").bitstr())}),s=n.define("RelativeDistinguishedName",function(){this.setof(i)}),l=n.define("RDNSequence",function(){this.seqof(s)}),c=n.define("Name",function(){this.choice({rdnSequence:this.use(l)})}),u=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(o),this.key("notAfter").use(o))}),d=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),h=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(r),this.key("issuer").use(c),this.key("validity").use(u),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())}),p=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(h),this.key("signatureAlgorithm").use(r),this.key("signatureValue").bitstr())});t.exports=p},{"asn1.js":1}],147:[function(e,t){var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,o=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,r=e("evp_bytestokey"),a=e("browserify-aes"),s=e("safe-buffer").Buffer;t.exports=function(e,t){var l,c=e.toString(),u=c.match(n);if(u){var d="aes"+u[1],h=s.from(u[2],"hex"),p=s.from(u[3].replace(/[\r\n]/g,""),"base64"),f=r(t,h.slice(0,8),parseInt(u[1],10)).key,g=[],y=a.createDecipheriv(d,f,h);g.push(y.update(p)),g.push(y.final()),l=s.concat(g)}else{var m=c.match(i);l=s.from(m[2].replace(/[\r\n]/g,""),"base64")}return{tag:c.match(o)[1],data:l}}},{"browserify-aes":22,evp_bytestokey:105,"safe-buffer":182}],148:[function(e,t){var n=e("./asn1"),o=e("./aesid.json"),i=e("./fixProc"),r=e("browserify-aes"),a=e("pbkdf2"),s=e("safe-buffer").Buffer;function l(e){var t;"object"!=typeof e||s.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=s.from(e));var o,r,a=i(e,t),l=a.tag,u=a.data;switch(l){case"CERTIFICATE":r=n.certificate.decode(u,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(r||(r=n.PublicKey.decode(u,"der")),o=r.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(r.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return r.subjectPrivateKey=r.subjectPublicKey,{type:"ec",data:r};case"1.2.840.10040.4.1":return r.algorithm.params.pub_key=n.DSAparam.decode(r.subjectPublicKey.data,"der"),{type:"dsa",data:r.algorithm.params};default:throw new Error("unknown key id "+o)}case"ENCRYPTED PRIVATE KEY":u=c(u=n.EncryptedPrivateKey.decode(u,"der"),t);case"PRIVATE KEY":switch(o=(r=n.PrivateKey.decode(u,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(r.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:r.algorithm.curve,privateKey:n.ECPrivateKey.decode(r.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return r.algorithm.params.priv_key=n.DSAparam.decode(r.subjectPrivateKey,"der"),{type:"dsa",params:r.algorithm.params};default:throw new Error("unknown key id "+o)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(u,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(u,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(u,"der")};case"EC PRIVATE KEY":return{curve:(u=n.ECPrivateKey.decode(u,"der")).parameters.value,privateKey:u.privateKey};default:throw new Error("unknown key type "+l)}}function c(e,t){var n=e.algorithm.decrypt.kde.kdeparams.salt,i=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),l=o[e.algorithm.decrypt.cipher.algo.join(".")],c=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,d=parseInt(l.split("-")[1],10)/8,h=a.pbkdf2Sync(t,n,i,d,"sha1"),p=r.createDecipheriv(l,h,c),f=[];return f.push(p.update(u)),f.push(p.final()),s.concat(f)}t.exports=l,l.signature=n.signature},{"./aesid.json":144,"./asn1":145,"./fixProc":147,"browserify-aes":22,pbkdf2:149,"safe-buffer":182}],149:[function(e,t,n){n.pbkdf2=e("./lib/async"),n.pbkdf2Sync=e("./lib/sync")},{"./lib/async":150,"./lib/sync":153}],150:[function(e,t){(function(n){var o,i,r=e("safe-buffer").Buffer,a=e("./precondition"),s=e("./default-encoding"),l=e("./sync"),c=e("./to-buffer"),u=n.crypto&&n.crypto.subtle,d={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},h=[];function p(e){if(n.process&&!n.process.browser)return Promise.resolve(!1);if(!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(void 0!==h[e])return h[e];var t=g(o=o||r.alloc(8),o,10,128,e).then(function(){return!0}).catch(function(){return!1});return h[e]=t,t}function f(){return i||(i=n.process&&n.process.nextTick?n.process.nextTick:n.queueMicrotask?n.queueMicrotask:n.setImmediate?n.setImmediate:n.setTimeout)}function g(e,t,n,o,i){return u.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return u.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:i}},e,o<<3)}).then(function(e){return r.from(e)})}function y(e,t){e.then(function(e){f()(function(){t(null,e)})},function(e){f()(function(){t(e)})})}t.exports=function(e,t,o,i,r,u){"function"==typeof r&&(u=r,r=void 0);var h=d[(r=r||"sha1").toLowerCase()];if(h&&"function"==typeof n.Promise){if(a(o,i),e=c(e,s,"Password"),t=c(t,s,"Salt"),"function"!=typeof u)throw new Error("No callback provided to pbkdf2");y(p(h).then(function(n){return n?g(e,t,o,i,h):l(e,t,o,i,r)}),u)}else f()(function(){var n;try{n=l(e,t,o,i,r)}catch(a){return u(a)}u(null,n)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-encoding":151,"./precondition":152,"./sync":153,"./to-buffer":154,"safe-buffer":182}],151:[function(e,t){(function(e,n){var o;o=n.process&&n.process.browser?"utf-8":n.process&&n.process.version?parseInt(e.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",t.exports=o}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:156}],152:[function(e,t){var n=Math.pow(2,30)-1;t.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>n||t!=t)throw new TypeError("Bad key length")}},{}],153:[function(e,t){var n=e("create-hash/md5"),o=e("ripemd160"),i=e("sha.js"),r=e("safe-buffer").Buffer,a=e("./precondition"),s=e("./default-encoding"),l=e("./to-buffer"),c=r.alloc(128),u={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function d(e,t,n){var o=h(e),i="sha512"===e||"sha384"===e?128:64;t.length>i?t=o(t):t.length<i&&(t=r.concat([t,c],i));for(var a=r.allocUnsafe(i+u[e]),s=r.allocUnsafe(i+u[e]),l=0;l<i;l++)a[l]=54^t[l],s[l]=92^t[l];var d=r.allocUnsafe(i+n+4);a.copy(d,0,0,i),this.ipad1=d,this.ipad2=a,this.opad=s,this.alg=e,this.blocksize=i,this.hash=o,this.size=u[e]}function h(e){return"rmd160"===e||"ripemd160"===e?function(e){return(new o).update(e).digest()}:"md5"===e?n:function(t){return i(e).update(t).digest()}}d.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(e,t,n,o,i){a(n,o);var c=new d(i=i||"sha1",e=l(e,s,"Password"),(t=l(t,s,"Salt")).length),h=r.allocUnsafe(o),p=r.allocUnsafe(t.length+4);t.copy(p,0,0,t.length);for(var f=0,g=u[i],y=Math.ceil(o/g),m=1;m<=y;m++){p.writeUInt32BE(m,t.length);for(var v=c.run(p,c.ipad1),_=v,b=1;b<n;b++){_=c.run(_,c.ipad2);for(var S=0;S<g;S++)v[S]^=_[S]}v.copy(h,f),f+=g}return h}},{"./default-encoding":151,"./precondition":152,"./to-buffer":154,"create-hash/md5":72,ripemd160:181,"safe-buffer":182,"sha.js":185}],154:[function(e,t){var n=e("safe-buffer").Buffer;t.exports=function(e,t,o){if(n.isBuffer(e))return e;if("string"==typeof e)return n.from(e,t);if(ArrayBuffer.isView(e))return n.from(e.buffer);throw new TypeError(o+" must be a string, a Buffer, a typed array or a DataView")}},{"safe-buffer":182}],155:[function(e,t){(function(e){"use strict";void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,o,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var r,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,o)});case 4:return e.nextTick(function(){t.call(null,n,o,i)});default:for(r=new Array(s-1),a=0;a<r.length;)r[a++]=arguments[a];return e.nextTick(function(){t.apply(null,r)})}}}:t.exports=e}).call(this,e("_process"))},{_process:156}],156:[function(e,t){var n,o,i=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function l(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}})();var c,u=[],d=!1,h=-1;function p(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!d){var e=s(p);d=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,d=!1,l(e)}}function g(e,t){this.fun=e,this.array=t}function y(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new g(e,t)),1!==u.length||d||s(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(){return[]},i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],157:[function(e,t,n){n.publicEncrypt=e("./publicEncrypt"),n.privateDecrypt=e("./privateDecrypt"),n.privateEncrypt=function(e,t){return n.publicEncrypt(e,t,!0)},n.publicDecrypt=function(e,t){return n.privateDecrypt(e,t,!0)}},{"./privateDecrypt":160,"./publicEncrypt":161}],158:[function(e,t){var n=e("create-hash"),o=e("safe-buffer").Buffer;function i(e){var t=o.allocUnsafe(4);return t.writeUInt32BE(e,0),t}t.exports=function(e,t){for(var r,a=o.alloc(0),s=0;a.length<t;)r=i(s++),a=o.concat([a,n("sha1").update(e).update(r).digest()]);return a.slice(0,t)}},{"create-hash":71,"safe-buffer":182}],159:[function(e,t,n){arguments[4][15][0].apply(n,arguments)},{buffer:19,dup:15}],160:[function(e,t){var n=e("parse-asn1"),o=e("./mgf"),i=e("./xor"),r=e("bn.js"),a=e("browserify-rsa"),s=e("create-hash"),l=e("./withPublic"),c=e("safe-buffer").Buffer;function u(e,t){var n=e.modulus.byteLength(),r=s("sha1").update(c.alloc(0)).digest(),a=r.length;if(0!==t[0])throw new Error("decryption error");var l=t.slice(1,a+1),u=t.slice(a+1),d=i(l,o(u,a)),p=i(u,o(d,n-a-1));if(h(r,p.slice(0,a)))throw new Error("decryption error");for(var f=a;0===p[f];)f++;if(1!==p[f++])throw new Error("decryption error");return p.slice(f)}function d(e,t,n){for(var o=t.slice(0,2),i=2,r=0;0!==t[i++];)if(i>=t.length){r++;break}var a=t.slice(2,i-1);if(("0002"!==o.toString("hex")&&!n||"0001"!==o.toString("hex")&&n)&&r++,a.length<8&&r++,r)throw new Error("decryption error");return t.slice(i)}function h(e,t){e=c.from(e),t=c.from(t);var n=0,o=e.length;e.length!==t.length&&(n++,o=Math.min(e.length,t.length));for(var i=-1;++i<o;)n+=e[i]^t[i];return n}t.exports=function(e,t,o){var i;i=e.padding?e.padding:o?1:4;var s,h=n(e),p=h.modulus.byteLength();if(t.length>p||new r(t).cmp(h.modulus)>=0)throw new Error("decryption error");s=o?l(new r(t),h):a(t,h);var f=c.alloc(p-s.length);if(s=c.concat([f,s],p),4===i)return u(h,s);if(1===i)return d(0,s,o);if(3===i)return s;throw new Error("unknown padding")}},{"./mgf":158,"./withPublic":162,"./xor":163,"bn.js":159,"browserify-rsa":40,"create-hash":71,"parse-asn1":148,"safe-buffer":182}],161:[function(e,t){var n=e("parse-asn1"),o=e("randombytes"),i=e("create-hash"),r=e("./mgf"),a=e("./xor"),s=e("bn.js"),l=e("./withPublic"),c=e("browserify-rsa"),u=e("safe-buffer").Buffer;function d(e,t){var n=e.modulus.byteLength(),l=t.length,c=i("sha1").update(u.alloc(0)).digest(),d=c.length,h=2*d;if(l>n-h-2)throw new Error("message too long");var p=u.alloc(n-l-h-2),f=n-d-1,g=o(d),y=a(u.concat([c,p,u.alloc(1,1),t],f),r(g,f)),m=a(g,r(y,d));return new s(u.concat([u.alloc(1),m,y],n))}function h(e,t,n){var o,i=t.length,r=e.modulus.byteLength();if(i>r-11)throw new Error("message too long");return o=n?u.alloc(r-i-3,255):p(r-i-3),new s(u.concat([u.from([0,n?1:2]),o,u.alloc(1),t],r))}function p(e){for(var t,n=u.allocUnsafe(e),i=0,r=o(2*e),a=0;i<e;)a===r.length&&(r=o(2*e),a=0),(t=r[a++])&&(n[i++]=t);return n}t.exports=function(e,t,o){var i;i=e.padding?e.padding:o?1:4;var r,a=n(e);if(4===i)r=d(a,t);else if(1===i)r=h(a,t,o);else{if(3!==i)throw new Error("unknown padding");if((r=new s(t)).cmp(a.modulus)>=0)throw new Error("data too long for modulus")}return o?c(r,a):l(r,a)}},{"./mgf":158,"./withPublic":162,"./xor":163,"bn.js":159,"browserify-rsa":40,"create-hash":71,"parse-asn1":148,randombytes:164,"safe-buffer":182}],162:[function(e,t){var n=e("bn.js"),o=e("safe-buffer").Buffer;t.exports=function(e,t){return o.from(e.toRed(n.mont(t.modulus)).redPow(new n(t.publicExponent)).fromRed().toArray())}},{"bn.js":159,"safe-buffer":182}],163:[function(e,t){t.exports=function(e,t){for(var n=e.length,o=-1;++o<n;)e[o]^=t[o];return e}},{}],164:[function(e,t){(function(n,o){"use strict";var i=e("safe-buffer").Buffer,r=o.crypto||o.msCrypto;r&&r.getRandomValues?t.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var o=i.allocUnsafe(e);if(e>0)if(e>65536)for(var a=0;a<e;a+=65536)r.getRandomValues(o.slice(a,a+65536));else r.getRandomValues(o);return"function"==typeof t?n.nextTick(function(){t(null,o)}):o}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:156,"safe-buffer":182}],165:[function(e,t,n){(function(t,o){"use strict";function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var r=e("safe-buffer"),a=e("randombytes"),s=r.Buffer,l=r.kMaxLength,c=o.crypto||o.msCrypto,u=Math.pow(2,32)-1;function d(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>u||e<0)throw new TypeError("offset must be a uint32");if(e>l||e>t)throw new RangeError("offset out of range")}function h(e,t,n){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>u||e<0)throw new TypeError("size must be a uint32");if(e+t>n||e>l)throw new RangeError("buffer too small")}function p(e,n,o,i){if(t.browser){var r=e.buffer,s=new Uint8Array(r,n,o);return c.getRandomValues(s),i?void t.nextTick(function(){i(null,e)}):e}if(!i)return a(o).copy(e,n),e;a(o,function(t,o){if(t)return i(t);o.copy(e,n),i(null,e)})}c&&c.getRandomValues||!t.browser?(n.randomFill=function(e,t,n,i){if(!(s.isBuffer(e)||e instanceof o.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)i=t,t=0,n=e.length;else if("function"==typeof n)i=n,n=e.length-t;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return d(t,e.length),h(n,t,e.length),p(e,t,n,i)},n.randomFillSync=function(e,t,n){if(void 0===t&&(t=0),!(s.isBuffer(e)||e instanceof o.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return d(t,e.length),void 0===n&&(n=e.length-t),h(n,t,e.length),p(e,t,n)}):(n.randomFill=i,n.randomFillSync=i)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:156,randombytes:164,"safe-buffer":182}],166:[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":167}],167:[function(e,t){"use strict";var n=e("process-nextick-args"),o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=u;var i=Object.create(e("core-util-is"));i.inherits=e("inherits");var r=e("./_stream_readable"),a=e("./_stream_writable");i.inherits(u,r);for(var s=o(a.prototype),l=0;l<s.length;l++){var c=s[l];u.prototype[c]||(u.prototype[c]=a.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);r.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),u.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},{"./_stream_readable":169,"./_stream_writable":171,"core-util-is":68,inherits:138,"process-nextick-args":155}],168:[function(e,t){"use strict";t.exports=i;var n=e("./_stream_transform"),o=Object.create(e("core-util-is"));function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}o.inherits=e("inherits"),o.inherits(i,n),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":170,"core-util-is":68,inherits:138}],169:[function(e,t){(function(n,o){"use strict";var i=e("process-nextick-args");t.exports=S;var r,a=e("isarray");S.ReadableState=b,e("events").EventEmitter;var s=function(e,t){return e.listeners(t).length},l=e("./internal/streams/stream"),c=e("safe-buffer").Buffer,u=o.Uint8Array||function(){};function d(e){return c.from(e)}var h=Object.create(e("core-util-is"));h.inherits=e("inherits");var p=e("util"),f=void 0;f=p&&p.debuglog?p.debuglog("stream"):function(){};var g,y=e("./internal/streams/BufferList"),m=e("./internal/streams/destroy");h.inherits(S,l);var v=["error","close","destroy","pause","resume"];function _(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?a(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function b(t,n){t=t||{};var o=n instanceof(r=r||e("./_stream_duplex"));this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(g||(g=e("string_decoder/").StringDecoder),this.decoder=new g(t.encoding),this.encoding=t.encoding)}function S(t){if(r=r||e("./_stream_duplex"),!(this instanceof S))return new S(t);this._readableState=new b(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),l.call(this)}function M(e,t,n,o,i){var r,a=e._readableState;return null===t?(a.reading=!1,P(e,a)):(i||(r=T(a,t)),r?e.emit("error",r):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===c.prototype||(t=d(t)),o?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):C(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(t=a.decoder.write(t),a.objectMode||0!==t.length?C(e,a,t,!1):D(e,a)):C(e,a,t,!1))):o||(a.reading=!1)),k(a)}function C(e,t,n,o){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,o?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&R(e)),D(e,t)}function T(e,t){var n,o;return o=t,c.isBuffer(o)||o instanceof u||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function k(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(S.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=m.destroy,S.prototype._undestroy=m.undestroy,S.prototype._destroy=function(e,t){this.push(null),t(e)},S.prototype.push=function(e,t){var n,o=this._readableState;return o.objectMode?n=!0:"string"==typeof e&&((t=t||o.defaultEncoding)!==o.encoding&&(e=c.from(e,t),t=""),n=!0),M(this,e,t,!1,n)},S.prototype.unshift=function(e){return M(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){return g||(g=e("string_decoder/").StringDecoder),this._readableState.decoder=new g(t),this._readableState.encoding=t,this};var I=8388608;function E(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function w(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=E(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,R(e)}}function R(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(O,e):O(e))}function O(e){f("emit readable"),e.emit("readable"),j(e)}function D(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(A,e,t))}function A(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function L(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,j(e))}}function B(e){f("readable nexttick read 0"),e.read(0)}function U(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(N,e,t))}function N(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function x(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=G(e,t.buffer,t.decoder),n);var n}function G(e,t,n){var o;return e<t.head.data.length?(o=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):o=e===t.head.data.length?t.shift():n?H(e,t):F(e,t),o}function H(e,t){var n=t.head,o=1,i=n.data;for(e-=i.length;n=n.next;){var r=n.data,a=e>r.length?r.length:e;if(a===r.length?i+=r:i+=r.slice(0,e),0==(e-=a)){a===r.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=r.slice(a));break}++o}return t.length-=o,i}function F(e,t){var n=c.allocUnsafe(e),o=t.head,i=1;for(o.data.copy(n),e-=o.data.length;o=o.next;){var r=o.data,a=e>r.length?r.length:e;if(r.copy(n,n.length-e,0,a),0==(e-=a)){a===r.length?(++i,o.next?t.head=o.next:t.head=t.tail=null):(t.head=o,o.data=r.slice(a));break}++i}return t.length-=i,n}function V(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(q,t,e))}function q(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Q(e,t){for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?V(this):R(this),null;if(0===(e=w(e,t))&&t.ended)return 0===t.length&&V(this),null;var o,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=w(n,t))),null===(o=e>0?x(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&V(this)),null!==o&&this.emit("data",o),o},S.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},S.prototype.pipe=function(e,t){var o=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,f("pipe count=%d opts=%j",r.pipesCount,t);var a=t&&!1===t.end||e===n.stdout||e===n.stderr?v:c;function l(t,n){f("onunpipe"),t===o&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),e.removeListener("close",y),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",g),e.removeListener("unpipe",l),o.removeListener("end",c),o.removeListener("end",v),o.removeListener("data",p),d=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){f("onend"),e.end()}r.endEmitted?i.nextTick(a):o.once("end",a),e.on("unpipe",l);var u=L(o);e.on("drain",u);var d=!1;var h=!1;function p(t){f("ondata"),h=!1,!1!==e.write(t)||h||((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==Q(r.pipes,e))&&!d&&(f("false write response, pause",o._readableState.awaitDrain),o._readableState.awaitDrain++,h=!0),o.pause())}function g(t){f("onerror",t),v(),e.removeListener("error",g),0===s(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",m),v()}function m(){f("onfinish"),e.removeListener("close",y),v()}function v(){f("unpipe"),o.unpipe(e)}return o.on("data",p),_(e,"error",g),e.once("close",y),e.once("finish",m),e.emit("pipe",o),r.flowing||(f("pipe resume"),o.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var o=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<i;r++)o[r].emit("unpipe",this,n);return this}var a=Q(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},S.prototype.on=function(e,t){var n=l.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var o=this._readableState;o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.emittedReadable=!1,o.reading?o.length&&R(this):i.nextTick(B,this))}return n},S.prototype.addListener=S.prototype.on,S.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,U(this,e)),this},S.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},S.prototype.wrap=function(e){var t=this,n=this._readableState,o=!1;for(var i in e.on("end",function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(o=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var r=0;r<v.length;r++)e.on(v[r],this.emit.bind(this,v[r]));return this._read=function(t){f("wrapped _read",t),o&&(o=!1,e.resume())},this},Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),S._fromList=x}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":167,"./internal/streams/BufferList":172,"./internal/streams/destroy":173,"./internal/streams/stream":174,_process:156,"core-util-is":68,events:104,inherits:138,isarray:175,"process-nextick-args":155,"safe-buffer":182,"string_decoder/":176,util:19}],170:[function(e,t){"use strict";t.exports=r;var n=e("./_stream_duplex"),o=Object.create(e("core-util-is"));function i(e,t){var n=this._transformState;n.transforming=!1;var o=n.writecb;if(!o)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),o(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function r(e){if(!(this instanceof r))return new r(e);n.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",a)}function a(){var e=this;"function"==typeof this._flush?this._flush(function(t,n){s(e,t,n)}):s(this,null,null)}function s(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o.inherits=e("inherits"),o.inherits(r,n),r.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},r.prototype._transform=function(){throw new Error("_transform() is not implemented")},r.prototype._write=function(e,t,n){var o=this._transformState;if(o.writecb=n,o.writechunk=e,o.writeencoding=t,!o.transforming){var i=this._readableState;(o.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},r.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},r.prototype._destroy=function(e,t){var o=this;n.prototype._destroy.call(this,e,function(e){t(e),o.emit("close")})}},{"./_stream_duplex":167,"core-util-is":68,inherits:138}],171:[function(e,t){(function(n,o){"use strict";var i=e("process-nextick-args");function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){B(t,e)}}t.exports=v;var a,s=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:i.nextTick;v.WritableState=m;var l=Object.create(e("core-util-is"));l.inherits=e("inherits");var c={deprecate:e("util-deprecate")},u=e("./internal/streams/stream"),d=e("safe-buffer").Buffer,h=o.Uint8Array||function(){};function p(e){return d.from(e)}var f,g=e("./internal/streams/destroy");function y(){}function m(t,n){a=a||e("./_stream_duplex"),t=t||{};var o=n instanceof a;this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,s=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:o&&(s||0===s)?s:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){I(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function v(t){if(a=a||e("./_stream_duplex"),!(f.call(v,this)||this instanceof a))return new v(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),u.call(this)}function _(e,t){var n=new Error("write after end");e.emit("error",n),i.nextTick(t,n)}function b(e,t,n,o){var r=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),i.nextTick(o,a),r=!1),r}function S(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=d.from(t,n)),t}function M(e,t,n,o,i,r){if(!n){var a=S(t,o,i);o!==a&&(n=!0,i="buffer",o=a)}var s=t.objectMode?1:o.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest={chunk:o,encoding:i,isBuf:n,callback:r,next:null},c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,s,o,i,r);return l}function C(e,t,n,o,i,r,a){t.writelen=o,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,r,t.onwrite),t.sync=!1}function T(e,t,n,o,r){--t.pendingcb,n?(i.nextTick(r,o),i.nextTick(A,e,t),e._writableState.errorEmitted=!0,e.emit("error",o)):(r(o),e._writableState.errorEmitted=!0,e.emit("error",o),A(e,t))}function k(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function I(e,t){var n=e._writableState,o=n.sync,i=n.writecb;if(k(n),t)T(e,n,o,t,i);else{var r=R(n);r||n.corked||n.bufferProcessing||!n.bufferedRequest||P(e,n),o?s(E,e,n,r,i):E(e,n,r,i)}}function E(e,t,n,o){n||w(e,t),t.pendingcb--,o(),A(e,t)}function w(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function P(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var o=t.bufferedRequestCount,i=new Array(o),a=t.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)i[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;i.allBuffers=l,C(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,d=n.callback;if(C(e,t,!1,t.objectMode?1:c.length,c,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),A(e,t)})}function D(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(O,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function A(e,t){var n=R(t);return n&&(D(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function L(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function B(e,t,n){var o=e.entry;for(e.entry=null;o;){var i=o.callback;t.pendingcb--,i(n),o=o.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}l.inherits(v,u),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===v&&e&&e._writableState instanceof m}})):f=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var o,i=this._writableState,r=!1,a=!i.objectMode&&(o=e,d.isBuffer(o)||o instanceof h);return a&&!d.isBuffer(e)&&(e=p(e)),"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=y),i.ended?_(this,n):(a||b(this,i,e,n))&&(i.pendingcb++,r=M(this,i,a,e,t,n)),r},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||P(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var o=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||o.finished||L(this,o,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":167,"./internal/streams/destroy":173,"./internal/streams/stream":174,_process:156,"core-util-is":68,inherits:138,"process-nextick-args":155,"safe-buffer":182,"util-deprecate":194}],172:[function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=e("safe-buffer").Buffer,i=e("util");t.exports=function(){function e(){n(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i=o.allocUnsafe(e>>>0),r=this.head,a=0;r;)t=i,n=a,r.data.copy(t,n),a+=r.data.length,r=r.next;return i},e}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},{"safe-buffer":182,util:19}],173:[function(e,t){"use strict";var n=e("process-nextick-args");function o(e,t){e.emit("error",t)}t.exports={destroy:function(e,t){var i=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return r||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||n.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(n.nextTick(o,i,e),i._writableState&&(i._writableState.errorEmitted=!0)):t&&t(e)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":155}],174:[function(e,t,n){arguments[4][60][0].apply(n,arguments)},{dup:60,events:104}],175:[function(e,t,n){arguments[4][66][0].apply(n,arguments)},{dup:66}],176:[function(e,t,n){arguments[4][63][0].apply(n,arguments)},{dup:63,"safe-buffer":182}],177:[function(e,t){t.exports=e("./readable").PassThrough},{"./readable":178}],178:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":167,"./lib/_stream_passthrough.js":168,"./lib/_stream_readable.js":169,"./lib/_stream_transform.js":170,"./lib/_stream_writable.js":171}],179:[function(e,t){t.exports=e("./readable").Transform},{"./readable":178}],180:[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":171}],181:[function(e,t){"use strict";var n=e("buffer").Buffer,o=e("inherits"),i=e("hash-base"),r=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],s=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],u=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0];function h(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(e,t){return e<<t|e>>>32-t}function f(e,t,n,o,i,r,a,s){return p(e+(t^n^o)+r+a|0,s)+i|0}function g(e,t,n,o,i,r,a,s){return p(e+(t&n|~t&o)+r+a|0,s)+i|0}function y(e,t,n,o,i,r,a,s){return p(e+((t|~n)^o)+r+a|0,s)+i|0}function m(e,t,n,o,i,r,a,s){return p(e+(t&o|n&~o)+r+a|0,s)+i|0}function v(e,t,n,o,i,r,a,s){return p(e+(t^(n|~o))+r+a|0,s)+i|0}o(h,i),h.prototype._update=function(){for(var e=r,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var n=0|this._a,o=0|this._b,i=0|this._c,h=0|this._d,_=0|this._e,b=0|this._a,S=0|this._b,M=0|this._c,C=0|this._d,T=0|this._e,k=0;k<80;k+=1){var I,E;k<16?(I=f(n,o,i,h,_,e[a[k]],u[0],l[k]),E=v(b,S,M,C,T,e[s[k]],d[0],c[k])):k<32?(I=g(n,o,i,h,_,e[a[k]],u[1],l[k]),E=m(b,S,M,C,T,e[s[k]],d[1],c[k])):k<48?(I=y(n,o,i,h,_,e[a[k]],u[2],l[k]),E=y(b,S,M,C,T,e[s[k]],d[2],c[k])):k<64?(I=m(n,o,i,h,_,e[a[k]],u[3],l[k]),E=g(b,S,M,C,T,e[s[k]],d[3],c[k])):(I=v(n,o,i,h,_,e[a[k]],u[4],l[k]),E=f(b,S,M,C,T,e[s[k]],d[4],c[k])),n=_,_=h,h=p(i,10),i=o,o=I,b=T,T=C,C=p(M,10),M=S,S=E}var w=this._b+i+C|0;this._b=this._c+h+T|0,this._c=this._d+_+b|0,this._d=this._e+n+S|0,this._e=this._a+o+M|0,this._a=w},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=n.alloc?n.alloc(20):new n(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},t.exports=h},{buffer:65,"hash-base":106,inherits:138}],182:[function(e,t,n){var o=e("buffer"),i=o.Buffer;function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=o:(r(o,n),n.Buffer=a),r(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=i(e);return void 0!==t?"string"==typeof n?o.fill(t,n):o.fill(t):o.fill(0),o},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:65}],183:[function(e,t){(function(n){"use strict";var o,i=e("buffer"),r=i.Buffer,a={};for(o in i)i.hasOwnProperty(o)&&"SlowBuffer"!==o&&"Buffer"!==o&&(a[o]=i[o]);var s=a.Buffer={};for(o in r)r.hasOwnProperty(o)&&"allocUnsafe"!==o&&"allocUnsafeSlow"!==o&&(s[o]=r[o]);if(a.Buffer.prototype=r.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return r(e,t,n)}),s.alloc||(s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var o=r(e);return t&&0!==t.length?"string"==typeof n?o.fill(t,n):o.fill(t):o.fill(0),o}),!a.kStringMaxLength)try{a.kStringMaxLength=n.binding("buffer").kStringMaxLength}catch(l){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),t.exports=a}).call(this,e("_process"))},{_process:156,buffer:65}],184:[function(e,t){var n=e("safe-buffer").Buffer;function o(e,t){this._block=n.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}o.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=n.from(e,t));for(var o=this._block,i=this._blockSize,r=e.length,a=this._len,s=0;s<r;){for(var l=a%i,c=Math.min(r-s,i-l),u=0;u<c;u++)o[l+u]=e[s+u];s+=c,(a+=c)%i==0&&this._update(o)}return this._len+=r,this},o.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var o=(4294967295&n)>>>0,i=(n-o)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(o,this._blockSize-4)}this._update(this._block);var r=this._hash();return e?r.toString(e):r},o.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=o},{"safe-buffer":182}],185:[function(e,t,n){(n=t.exports=function(e){e=e.toLowerCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t}).sha=e("./sha"),n.sha1=e("./sha1"),n.sha224=e("./sha224"),n.sha256=e("./sha256"),n.sha384=e("./sha384"),n.sha512=e("./sha512")},{"./sha":186,"./sha1":187,"./sha224":188,"./sha256":189,"./sha384":190,"./sha512":191}],186:[function(e,t){var n=e("inherits"),o=e("./hash"),i=e("safe-buffer").Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function s(){this.init(),this._w=a,o.call(this,64,56)}function l(e){return e<<30|e>>>2}function c(e,t,n,o){return 0===e?t&n|~t&o:2===e?t&n|t&o|n&o:t^n^o}n(s,o),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(e){for(var t,n=this._w,o=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,u=0|this._e,d=0;d<16;++d)n[d]=e.readInt32BE(4*d);for(;d<80;++d)n[d]=n[d-3]^n[d-8]^n[d-14]^n[d-16];for(var h=0;h<80;++h){var p=~~(h/20),f=0|((t=o)<<5|t>>>27)+c(p,i,a,s)+u+n[h]+r[p];u=s,s=a,a=l(i),i=o,o=f}this._a=o+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},s.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=s},{"./hash":184,inherits:138,"safe-buffer":182}],187:[function(e,t){var n=e("inherits"),o=e("./hash"),i=e("safe-buffer").Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function s(){this.init(),this._w=a,o.call(this,64,56)}function l(e){return e<<5|e>>>27}function c(e){return e<<30|e>>>2}function u(e,t,n,o){return 0===e?t&n|~t&o:2===e?t&n|t&o|n&o:t^n^o}n(s,o),s.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},s.prototype._update=function(e){for(var t,n=this._w,o=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,d=0|this._e,h=0;h<16;++h)n[h]=e.readInt32BE(4*h);for(;h<80;++h)n[h]=(t=n[h-3]^n[h-8]^n[h-14]^n[h-16])<<1|t>>>31;for(var p=0;p<80;++p){var f=~~(p/20),g=l(o)+u(f,i,a,s)+d+n[p]+r[f]|0;d=s,s=a,a=c(i),i=o,o=g}this._a=o+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=d+this._e|0},s.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},t.exports=s},{"./hash":184,inherits:138,"safe-buffer":182}],188:[function(e,t){var n=e("inherits"),o=e("./sha256"),i=e("./hash"),r=e("safe-buffer").Buffer,a=new Array(64);function s(){this.init(),this._w=a,i.call(this,64,56)}n(s,o),s.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},s.prototype._hash=function(){var e=r.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=s},{"./hash":184,"./sha256":189,inherits:138,"safe-buffer":182}],189:[function(e,t){var n=e("inherits"),o=e("./hash"),i=e("safe-buffer").Buffer,r=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function s(){this.init(),this._w=a,o.call(this,64,56)}function l(e,t,n){return n^e&(t^n)}function c(e,t,n){return e&t|n&(e|t)}function u(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function d(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function h(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}n(s,o),s.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},s.prototype._update=function(e){for(var t,n=this._w,o=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,p=0|this._e,f=0|this._f,g=0|this._g,y=0|this._h,m=0;m<16;++m)n[m]=e.readInt32BE(4*m);for(;m<64;++m)n[m]=0|(((t=n[m-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[m-7]+h(n[m-15])+n[m-16];for(var v=0;v<64;++v){var _=y+d(p)+l(p,f,g)+r[v]+n[v]|0,b=u(o)+c(o,i,a)|0;y=g,g=f,f=p,p=s+_|0,s=a,a=i,i=o,o=_+b|0}this._a=o+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=p+this._e|0,this._f=f+this._f|0,this._g=g+this._g|0,this._h=y+this._h|0},s.prototype._hash=function(){var e=i.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=s},{"./hash":184,inherits:138,"safe-buffer":182}],190:[function(e,t){var n=e("inherits"),o=e("./sha512"),i=e("./hash"),r=e("safe-buffer").Buffer,a=new Array(160);function s(){this.init(),this._w=a,i.call(this,128,112)}n(s,o),s.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},s.prototype._hash=function(){var e=r.allocUnsafe(48);function t(t,n,o){e.writeInt32BE(t,o),e.writeInt32BE(n,o+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},t.exports=s},{"./hash":184,"./sha512":191,inherits:138,"safe-buffer":182}],191:[function(e,t){var n=e("inherits"),o=e("./hash"),i=e("safe-buffer").Buffer,r=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function s(){this.init(),this._w=a,o.call(this,128,112)}function l(e,t,n){return n^e&(t^n)}function c(e,t,n){return e&t|n&(e|t)}function u(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function d(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function h(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function f(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function y(e,t){return e>>>0<t>>>0?1:0}n(s,o),s.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},s.prototype._update=function(e){for(var t=this._w,n=0|this._ah,o=0|this._bh,i=0|this._ch,a=0|this._dh,s=0|this._eh,m=0|this._fh,v=0|this._gh,_=0|this._hh,b=0|this._al,S=0|this._bl,M=0|this._cl,C=0|this._dl,T=0|this._el,k=0|this._fl,I=0|this._gl,E=0|this._hl,w=0;w<32;w+=2)t[w]=e.readInt32BE(4*w),t[w+1]=e.readInt32BE(4*w+4);for(;w<160;w+=2){var P=t[w-30],R=t[w-30+1],O=h(P,R),D=p(R,P),A=f(P=t[w-4],R=t[w-4+1]),L=g(R,P),B=t[w-14],U=t[w-14+1],N=t[w-32],j=t[w-32+1],x=D+U|0,G=O+B+y(x,D)|0;G=(G=G+A+y(x=x+L|0,L)|0)+N+y(x=x+j|0,j)|0,t[w]=G,t[w+1]=x}for(var H=0;H<160;H+=2){G=t[H],x=t[H+1];var F=c(n,o,i),V=c(b,S,M),q=u(n,b),Q=u(b,n),Y=d(s,T),K=d(T,s),W=r[H],z=r[H+1],J=l(s,m,v),X=l(T,k,I),Z=E+K|0,$=_+Y+y(Z,E)|0;$=($=($=$+J+y(Z=Z+X|0,X)|0)+W+y(Z=Z+z|0,z)|0)+G+y(Z=Z+x|0,x)|0;var ee=Q+V|0,te=q+F+y(ee,Q)|0;_=v,E=I,v=m,I=k,m=s,k=T,s=a+$+y(T=C+Z|0,C)|0,a=i,C=M,i=o,M=S,o=n,S=b,n=$+te+y(b=Z+ee|0,Z)|0}this._al=this._al+b|0,this._bl=this._bl+S|0,this._cl=this._cl+M|0,this._dl=this._dl+C|0,this._el=this._el+T|0,this._fl=this._fl+k|0,this._gl=this._gl+I|0,this._hl=this._hl+E|0,this._ah=this._ah+n+y(this._al,b)|0,this._bh=this._bh+o+y(this._bl,S)|0,this._ch=this._ch+i+y(this._cl,M)|0,this._dh=this._dh+a+y(this._dl,C)|0,this._eh=this._eh+s+y(this._el,T)|0,this._fh=this._fh+m+y(this._fl,k)|0,this._gh=this._gh+v+y(this._gl,I)|0,this._hh=this._hh+_+y(this._hl,E)|0},s.prototype._hash=function(){var e=i.allocUnsafe(64);function t(t,n,o){e.writeInt32BE(t,o),e.writeInt32BE(n,o+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},t.exports=s},{"./hash":184,inherits:138,"safe-buffer":182}],192:[function(e,t){t.exports=o;var n=e("events").EventEmitter;function o(){n.call(this)}e("inherits")(o,n),o.Readable=e("readable-stream/readable.js"),o.Writable=e("readable-stream/writable.js"),o.Duplex=e("readable-stream/duplex.js"),o.Transform=e("readable-stream/transform.js"),o.PassThrough=e("readable-stream/passthrough.js"),o.Stream=o,o.prototype.pipe=function(e,t){var o=this;function i(t){e.writable&&!1===e.write(t)&&o.pause&&o.pause()}function r(){o.readable&&o.resume&&o.resume()}o.on("data",i),e.on("drain",r),e._isStdio||t&&!1===t.end||(o.on("end",s),o.on("close",l));var a=!1;function s(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){if(u(),0===n.listenerCount(this,"error"))throw e}function u(){o.removeListener("data",i),e.removeListener("drain",r),o.removeListener("end",s),o.removeListener("close",l),o.removeListener("error",c),e.removeListener("error",c),o.removeListener("end",u),o.removeListener("close",u),e.removeListener("close",u)}return o.on("error",c),e.on("error",c),o.on("end",u),o.on("close",u),e.on("close",u),e.emit("pipe",o),e}},{events:104,inherits:138,"readable-stream/duplex.js":166,"readable-stream/passthrough.js":177,"readable-stream/readable.js":178,"readable-stream/transform.js":179,"readable-stream/writable.js":180}],193:[function(e,t,n){var o=e("buffer").Buffer,i=o.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(e){if(e&&!i(e))throw new Error("Unknown encoding: "+e)}var a=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=l;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=c;break;default:return void(this.write=s)}this.charBuffer=new o(6),this.charReceived=0,this.charLength=0};function s(e){return e.toString(this.encoding)}function l(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function c(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}a.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((o=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&o<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var o,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(o=t.charCodeAt(i))>=55296&&o<=56319){var r=this.surrogateSize;return this.charLength+=r,this.charReceived+=r,this.charBuffer.copy(this.charBuffer,r,0,r),e.copy(this.charBuffer,0,0,r),t.substring(0,i)}return t},a.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},a.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,o=this.charBuffer,i=this.encoding;t+=o.slice(0,n).toString(i)}return t}},{buffer:65}],194:[function(e,t){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(o){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var o=!1;return function(){if(!o){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),o=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],CfgInfo:[function(e,t,n){"use strict";cc._RF.push(t,"e86f56ri8pIO4oEhHSzH99F","CfgInfo"),Object.defineProperty(n,"__esModule",{value:!0}),n.RingInfoData=void 0;n.RingInfoData=function(){this.propData=[]},cc._RF.pop()},{}],ChestPanel:[function(e,t,n){"use strict";cc._RF.push(t,"e82927lxaZOJYXWG5+PvPxD","ChestPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/StorageMgr"),u=e("../../Mgr/TimeMgr"),d=e("../../Tool/Tool"),h=e("../Main_PanelOpen"),p=e("../Main_UI"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chestBox=null,t._chestType=0,t._isInShowChest=!1,t._tempBoxY=null,t._currDisSkillCdTime=0,t._tempTime=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.startTimeShow(),d.Tool.addClickEvent(this.chestBox,this.handleTouchChestBox,this),this.judeSkillCd()},t.prototype.startTimeShow=function(){var e=this;c.default.instance.storageData.flightChestCount>=10||this.scheduleOnce(function(){e.beforeShowChest()},300)},t.prototype.beforeShowChest=function(){var e=this;p.default.instance.uiState!=a.MainUIState.InCopy&&p.default.instance.uiState!=a.MainUIState.InHeroCopy?this.showChest():this.scheduleOnce(function(){e.beforeShowChest()},10)},t.prototype.showChest=function(){var e=this;this._isInShowChest=!0,this._chestType=d.Tool.randomInt(1,this._currDisSkillCdTime>0?2:3),1==this._chestType&&parseInt(c.default.instance.storageData.stage.split("_")[0])<=3&&(this._chestType=2),this.chestBox.children.some(function(t,n){t.active=n==e._chestType-1});var t=this.node.width/2-this.chestBox.width/2,n=t;t=-t,this.chestBox.x=430,null===this._tempBoxY?this._tempBoxY=this.chestBox.y:this.chestBox.y=this._tempBoxY,this.chestBox.active=!0,cc.tween(this.chestBox).to(3,{y:this._tempBoxY+50}).to(3,{y:this._tempBoxY-50}).union().repeatForever().start(),cc.tween(this.chestBox).to(15,{x:t}).to(15,{x:n}).union().repeat(2).to(3,{x:430}).call(function(){e._isInShowChest=!1,e.chestBox.active=!1,e.startTimeShow()}).start()},t.prototype.handleTouchChestBox=function(){h.default.showChestPanel({type:this._chestType,fun:this.judeSkillCd.bind(this)}),this.chestBox.stopAllActions(),this.chestBox.active=!1,this._isInShowChest=!1,this.startTimeShow()},t.prototype.judeSkillCd=function(){if(null!=c.default.instance.storageData.chestSkillCdTime){var e=u.default.instance.getNowTime()-c.default.instance.storageData.chestSkillCdTime;e=Math.floor(e/1e3),this._currDisSkillCdTime=e<600?600-e:0,this.changeSkillCdNum()}},t.prototype.changeSkillCdNum=function(){this._currDisSkillCdTime<=0?s.default.chestCD=0:s.default.chestCD=40,l.EventMgr.event(a.EventType.Battle_Hero_Prop_Update)},t.prototype.judeResumeChestBox=function(){var e=this;p.default.instance.uiState!=a.MainUIState.InCopy&&p.default.instance.uiState!=a.MainUIState.InHeroCopy?(this._isInShowChest=!0,this.chestBox.active=!0,this.chestBox.resumeAllActions()):this.scheduleOnce(function(){return e.judeResumeChestBox()},1)},t.prototype.update=function(e){this._currDisSkillCdTime>0&&(this._tempTime+=e,this._tempTime>=1&&(this._tempTime=0,this._currDisSkillCdTime-=1,this._currDisSkillCdTime<=0&&this.changeSkillCdNum())),!this._isInShowChest||p.default.instance.uiState!=a.MainUIState.InCopy&&p.default.instance.uiState!=a.MainUIState.InHeroCopy||(this._isInShowChest=!1,this.chestBox.pauseAllActions(),this.chestBox.active=!1,this.judeResumeChestBox())},r([y(cc.Node)],t.prototype,"chestBox",void 0),r([g],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen","../Main_UI":"Main_UI"}],ChildActiveWeakGuide:[function(e,t,n){"use strict";cc._RF.push(t,"cfd56eC+s9NsY39ArEpOp9n","ChildActiveWeakGuide");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Quest/QuestChain"),s=e("../GuideMgr"),l=e("./WeakGuide"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkNode=null,t.weakGuideType=l.WeakGuideType.ChildActive,t.toTop=!1,t.bottomValue=150,t.topValue=0,t.childHeight=320,t.spaceY=50,t.yValue=t.childHeight+t.spaceY,t}return i(t,e),t.prototype.start=function(){},t.prototype.update=function(){this.check()},t.prototype.check=function(){if(a.default.Instance.chainQuestId>s.GUIDE_END)this.hide();else{for(var e=!1,t=1,n=0;n<this.checkNode.childrenCount;n++){var o=this.node.getContentSize().height-this.bottomValue-this.topValue,i=this.checkNode.children[n].getChildByName("Button");if(i){var r=null==i?null:i.getComponent(l.default);r&&r.GetIsShow()&&(n/3>0&&(t=Math.floor(n/3)+1),this.checkNode.y>this.yValue*t-this.bottomValue?(e=!0,this.toTop=!0):this.yValue*t<=this.checkNode.y+o?e=!1:(e=!0,this.toTop=!1))}}e?this.show():this.hide()}},t.prototype.doAction=function(){var e=-300,t=200;this.toTop&&(e=-200,t=-200);var n=this;cc.tween(this.guideNode).sequence(cc.callFunc(function(){n.guideNode&&n.guideNode.setPosition(0,e,0)}),cc.moveBy(1,0,t),cc.callFunc(function(){n.guideNode&&n.guideNode.setPosition(0,e,0)})).repeatForever().start()},r([d(cc.Node)],t.prototype,"checkNode",void 0),r([u],t)}(l.default);n.default=h,cc._RF.pop()},{"../../Quest/QuestChain":"QuestChain","../GuideMgr":"GuideMgr","./WeakGuide":"WeakGuide"}],ClearRushBoss:[function(e,t,n){"use strict";cc._RF.push(t,"d616e9cwvhL3bY6AKazXE8T","ClearRushBoss");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s,l=e("../../../../plugin/NumberPlus"),c=e("../../../Config/EnumTypes"),u=e("../../../Config/GameData"),d=e("../../../Mgr/EventMgr"),h=e("../../../Mgr/StorageMgr"),p=e("../BattleMgr"),f=e("../Monster"),g=cc._decorator,y=g.ccclass;g.property,function(e){e.attack="stand_by",e.dead="stand_by",e.run="stand_by",e.shortHit="be_hit",e.longHit="be_hit"}(a||(a={})),function(e){e[e.move=0]="move",e[e.attack=1]="attack",e[e.dead=2]="dead"}(s||(s={}));var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initValue=function(){e.prototype.initValue.call(this),this.node.x=this.node.x+75},t.prototype.hit=function(e,t){var n,o=this;if(this.isActive){if(p.default.instance.playWordLabel(null===(n=this.hpBar)||void 0===n?void 0:n.node,e,t),this.nowHp=l.default.sub(this.nowHp,e),l.default.compare(0,this.nowHp)||this.isAlreadyDead)return this.nowHp="0",this.dead(),void this.updateHpBar();if(this.updateHpBar(),!this.isPlayHittingAnim){this.isPlayHittingAnim=!0,this.isHitting=!0;var i=this.anim.findAnimation(a.shortHit).duration/p.default.battleSpeed;this.unschedule(this.hitEnd),this.scheduleOnce(this.hitEnd,i),this.scheduleOnce(function(){o.isPlayHittingAnim=!1},i)}}},t.prototype.dead=function(){if(0!=this.isActive&&this.nowState!=s.dead){this.nowState=s.dead,d.EventMgr.event(c.EventType.Battle_Monster_Dead),d.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.DefeatEnemy);var e=l.default.mul(this.gold,u.default.heroCoinAddCal()),t="0"!=this.gold?2:this.gold;d.EventMgr.event(c.EventType.Common_Coin_Add,t,this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),function(){h.default.instance.addCoin(e)}),this.recyle(),p.default.instance.bornClearRushFx(this.node.getPosition())}},t.prototype.animUpdate=function(){var e;switch(this.nowState){case s.move:this.isHitting||(e=a.run,this.anim.timeScale=p.default.battleSpeed);break;case s.attack:if(this.isPlayingAtkAnim){e=a.attack;var t=p.default.battleSpeed*this.fre;this.anim.timeScale=t>1?t:1,this.isPlayingAtkAnim=!1}break;case s.dead:e=a.dead,this.anim.timeScale=p.default.battleSpeed}if(this.isPlayHittingAnim&&this.nowState!=s.dead&&(this.isPlayHittingAnim=!1,e=a.shortHit,this.anim.timeScale=p.default.battleSpeed),(this.anim.animation==a.shortHit||this.anim.animation==a.attack||this.anim.animation!=e)&&e){var n=e==a.run;"stand_by"==e&&(e="standby"),-1!=["stand_by","be_hit"].indexOf(e)&&this.anim.setAnimation(0,e,n)}},r([y],t)}(f.default);n.default=m,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../BattleMgr":"BattleMgr","../Monster":"Monster"}],ClickCommand:[function(e,t,n){"use strict";cc._RF.push(t,"bffcbUJs65FL66IjsyagwB1","ClickCommand");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../Tool/UIUtil"),a=e("../GuideMgr"),s=function(e){function t(t){var n=e.call(this)||this;return n._pressed=!1,n._node=null,n._pressed=!1,n._node=a.default.instance.getGuideNode(Number(t)),null==n._node&&cc.error("node is null"),n}return i(t,e),t.prototype.onTouchStart=function(e){r.default.isTouchInNodeRect(this._node,e.getLocation())&&(this._pressed=!0,e.currentTarget=this._node,e.target=this._node,this._node.dispatchEvent(e))},t.prototype.onTouchMove=function(){},t.prototype.onTouchCancel=function(){this._pressed=!1},t.prototype.onTouchEnd=function(e){this._pressed&&r.default.isTouchInNodeRect(this._node,e.getLocation())&&(e.currentTarget=this._node,e.target=this._node,this._node.dispatchEvent(e)),this._pressed=!1},t}(e("./GuideCommand").default);n.default=s,cc._RF.pop()},{"../../../../Tool/UIUtil":"UIUtil","../GuideMgr":"GuideMgr","./GuideCommand":"GuideCommand"}],ClickInRegion:[function(e,t,n){"use strict";cc._RF.push(t,"01156Z+2TJBdKnX4q8b4b32","ClickInRegion");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Event/CustomEventTarget"),a=e("../Event/GlobalEventTarget"),s=e("../GuideEnums"),l=e("../GuideMgr"),c=function(e){function t(t){var n=e.call(this)||this;return n._node=null,n._node=l.default.instance.getGuideNode(Number(t)),null==n._node&&cc.error("node is null"),a.GlobalEventTarget.on(s.GuideVerifactionEvent.CLICK_IN_REGIN,n.onClickInRegin,n),n}return i(t,e),t.prototype.onClickInRegin=function(e){this._node==e&&this.success()},t.prototype.onSuccess=function(){r.default.removeTargetAllEventTargets(this)},t.prototype.destroy=function(){r.default.removeTargetAllEventTargets(this)},t}(e("./GuideVerification").GuideVerification);n.default=c,cc._RF.pop()},{"../Event/CustomEventTarget":"CustomEventTarget","../Event/GlobalEventTarget":"GlobalEventTarget","../GuideEnums":"GuideEnums","../GuideMgr":"GuideMgr","./GuideVerification":"GuideVerification"}],CoinComp:[function(e,t,n){"use strict";cc._RF.push(t,"5ca05MOOjBIgqP0icOu0Qoy","CoinComp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/FlyItemMgr"),u=e("../../Mgr/StorageMgr"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this,c.default.targetMap[s.ASSET_TYPE.Coin]=this.node},t.prototype.onEnable=function(){this.showUpdate(),l.EventMgr.on(s.EventType.Common_Coin_Update,this.showUpdate,this)},t.prototype.onDisable=function(){l.EventMgr.clearTarget(this)},t.prototype.showUpdate=function(){this.label.string=a.default.format(u.default.instance.storageData.coin)},r([p(cc.Label)],t.prototype,"label",void 0),n=r([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/FlyItemMgr":"FlyItemMgr","../../Mgr/StorageMgr":"StorageMgr"}],CollectionData:[function(e,t,n){"use strict";cc._RF.push(t,"305bdD4LbBJtLOLxrcnl4DS","CollectionData"),Object.defineProperty(n,"__esModule",{value:!0}),n.LocalCollectionInfo=void 0;var o=e("../../../../plugin/NumberPlus"),i=e("../../../Config/EnumTypes"),r=e("../../../Mgr/EventMgr"),a=e("../../../Mgr/StorageMgr"),s=e("./MgrCollection");n.LocalCollectionInfo=function(){};var l=function(){function e(){this.items={},this.props={},this.propMap=new Map,this.canLevelUpItems=[]}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.save=function(){var e={};myGlobalThis.each(this.items,function(t){e[t.id]=t.lv}),a.default.instance.saveUserCollectionData(e)},Object.defineProperty(e.prototype,"userCollectionData",{get:function(){return a.default.instance.storageData.userCollectionData},enumerable:!1,configurable:!0}),e.prototype.load=function(){var e=this,t={};myGlobalThis.isEmpty(this.userCollectionData)||myGlobalThis.each(this.userCollectionData,function(n,o){var i=myGlobalThis.parseInt(o);t[i]=e.createData(i,n,0)}),this.items=t,r.EventMgr.on(i.GlobalEvent.CollectionUnlock,this.reGetCanLevelUp,this)},e.prototype.calProp=function(){this.propMap.clear();var e=this;myGlobalThis.each(this.props,function(t){e.propMap.set(t.propType,Number(t.value))}),r.EventMgr.event(i.EventType.Main_UI_Collection_CalProp)},e.prototype.init=function(){var e=this;this.props={},myGlobalThis.each(this.items,function(t){var n=e.getPropObj(t.prop);n.value=o.default.add(n.value,t.propAddation)}),this.reGetCanLevelUp()},e.prototype.createData=function(e,t,n){var o=s.default.Instance.get(e),i=o.type;return{id:e,lv:t,ids:o.ids,unlockLv:n,prop:o.prop,type:i,propAddation:""+t*o.addBaseValue}},e.prototype.reCalcPropType=function(e){var t="0";myGlobalThis.each(this.items,function(n){n.prop==e&&(t=o.default.add(t,n.propAddation))}),this.getPropObj(e).value=t,this.calProp()},e.prototype.getPropObj=function(e){var t=this.props[e];return myGlobalThis.isNil(t)&&(t=this.props[e]={propType:e,value:"0"}),t},e.prototype.activeProps=function(){this.calProp()},e.prototype.getData=function(e){return this.items[e]},e.prototype.getLvupEnableItems=function(e){return this.canLevelUpItems.filter(function(t){return t.type==e})},e.prototype.unlock=function(e,t){var n=this.getData(e);myGlobalThis.isNil(n)?this.items[e]=this.createData(e,0,t):n.unlockLv=t,this.save()},e.prototype.lvup=function(e){var t=this.getData(e);if(myGlobalThis.isNil(t))return!1;if(0==t.unlockLv||t.lv==t.unlockLv)return!1;t.lv=t.unlockLv;var n=s.default.Instance.get(e);t.propAddation=""+t.lv*n.addBaseValue,this.reCalcPropType(n.prop),this.save();var o=this.canLevelUpItems.indexOf(t);return this.canLevelUpItems.splice(o,1),!0},e.prototype.hasCanLevelUp=function(e){return void 0===e&&(e=i.COLLECTION_TYPE.None),e!=i.COLLECTION_TYPE.None?this.canLevelUpItems.find(function(t){return t.type==e}):this.canLevelUpItems.length>0},e.prototype.reGetCanLevelUp=function(){for(var e in this.canLevelUpItems=[],this.items){var t=this.items[e];t.lv<t.unlockLv&&this.canLevelUpItems.push(t)}},e.prototype.calcAdditionValue=function(e,t){return""+t*s.default.Instance.get(e).addBaseValue},e.prototype.getPropMap=function(){return this.propMap},e}();n.default=l,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","./MgrCollection":"MgrCollection"}],CommonCandidateItem:[function(e,t,n){"use strict";cc._RF.push(t,"d02edo2WwlDcZww7PK19+MI","CommonCandidateItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Tool/Tool"),s=e("../CommonUI/IUIItem"),l=cc._decorator.ccclass,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=0,t}return i(t,e),t.prototype.setUpValue=function(e){this.setQuality(e.getQuality()),this.setIcon(e.getIcon()),this.setLevel(e.getCurLevel()),this.setProgress(e.getCurCount(),e.getNextLevelCostCount())},t.prototype.shake=function(){a.Tool.objectShake(this.node,.4,20)},t.prototype.update=function(e){this.time+=e,this.time>=3&&(this.shake(),this.time=0)},r([l],t)}(s.default);n.default=c,cc._RF.pop()},{"../../Tool/Tool":"Tool","../CommonUI/IUIItem":"IUIItem"}],CommonToggle:[function(e,t,n){"use strict";cc._RF.push(t,"1a0e2gXoH9KvYKL3/IGIPB7","CommonToggle");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.normalNode=null,t.selectedNode=null,t.lockNode=null,t.normalColor=cc.color().fromHEX("#b2bfce"),t.lockColor=cc.color().fromHEX("#868686"),t.selectedColor=cc.color().fromHEX("#ffffff"),t.underLine=null,t}return i(t,e),t.prototype.onLoad=function(){this.node.on("toggle",this.onToggle,this)},t.prototype.onToggle=function(e){this.lockNode&&this.lockNode.active||(this.normalNode&&(this.normalNode.active=!e.isChecked),this.selectedNode&&(this.selectedNode.active=e.isChecked))},t.prototype.setLock=function(e){this.lockNode&&(this.lockNode.active=e)},r([l(cc.Label)],t.prototype,"nameLabel",void 0),r([l(cc.Node)],t.prototype,"normalNode",void 0),r([l(cc.Node)],t.prototype,"selectedNode",void 0),r([l(cc.Node)],t.prototype,"lockNode",void 0),r([s],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],Common_Pause:[function(e,t,n){"use strict";cc._RF.push(t,"7793400IOJFB7xVI6o44mUd","Common_Pause");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/SoundMgr"),c=e("../../Mgr/StorageMgr"),u=e("../../Platform/Platform"),d=e("../../Tool/Tool"),h=e("../ResPanelOpen"),p=cc._decorator,f=p.ccclass,g=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.root=null,t.panel=null,t.closeBtns=[],t.shareBtn=null,t.musicSwitchBtn=null,t.soundSwitchBtn=null,t.vibrateSwitchBtn=null,t.stageLabel=null,t}return i(t,e),t.prototype.onLoad=function(){this.root=this.node,this.panel=this.root.getChildByName("panel"),this.closeBtns=d.Tool.findAllNodeHasName(this.panel,"closeBtn");var e=this.panel;this.musicSwitchBtn=d.Tool.findNodeByName(e,"muiscSwitchBtn"),this.soundSwitchBtn=d.Tool.findNodeByName(e,"soundSwitchBtn"),this.vibrateSwitchBtn=d.Tool.findNodeByName(e,"vibrateSwitchBtn"),this.stageLabel=d.Tool.findNodeByName(e,"stageLabel").getComponent(cc.Label),this.updateShow(0,!0)},t.prototype.onEnable=function(){s.EventMgr.event(a.EventType.Common_Pause_Event),this.openCb()},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.start=function(){for(var e=0;e<this.closeBtns.length;e++)d.Tool.addClickEvent(this.closeBtns[e],this.closeCb,this);d.Tool.addClickEvent(this.musicSwitchBtn,this.musicSwitchCb,this,[],!0,!1),d.Tool.addClickEvent(this.soundSwitchBtn,this.soundSwitchCb,this,[],!0,!1),d.Tool.addClickEvent(this.vibrateSwitchBtn,this.vibrateSwitchCb,this,[],!0,!1)},t.prototype.update=function(e){this.updateShow(e)},t.prototype.updateShow=function(e,t){for(var n=[cc.audioEngine.getMusicVolume(),l.default.IsMute?0:1,u.default.instance.isVibrate?1:0],o=[this.musicSwitchBtn,this.soundSwitchBtn,this.vibrateSwitchBtn],i=0;i<3;i++){var r=45+85*n[i],a=75+100*n[i],s=o[i].getChildByName("green"),c=s.getChildByName("circle"),d=r-c.x,h=a-s.width;t||(d>255*e?d=255*e:d<255*-e&&(d=255*-e),h>300*e?h=300*e:h<300*-e&&(h=300*-e)),c.x+=d,s.width+=h}},t.prototype.closeCb=function(){var e=this.panel,t=this;h.default.panelClose_TopToBottom(e,function(){t.node.destroy(),s.EventMgr.event(a.EventType.Common_Resume_Event)})},t.prototype.openCb=function(){var e=this.panel;h.default.panelOpen_TopToBottom(e,function(){})},t.prototype.shareCb=function(){u.default.instance.share()},t.prototype.musicSwitchCb=function(){cc.audioEngine.getMusicVolume()>0?(cc.audioEngine.setMusicVolume(0),c.default.instance.setIsMusicOn(!1)):(cc.audioEngine.setMusicVolume(1),c.default.instance.setIsMusicOn(!0))},t.prototype.soundSwitchCb=function(){l.default.IsMute=!l.default.IsMute,c.default.instance.setIsSoundOn(!l.default.IsMute)},t.prototype.vibrateSwitchCb=function(){u.default.instance.isVibrate=!u.default.instance.isVibrate,c.default.instance.setIsVibrateOn(u.default.instance.isVibrate)},r([f],t)}(cc.Component));n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/SoundMgr":"SoundMgr","../../Mgr/StorageMgr":"StorageMgr","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../ResPanelOpen":"ResPanelOpen"}],Common_SignPanel:[function(e,t,n){"use strict";cc._RF.push(t,"129f4f/R41Cj5JhYTRnn5U7","Common_SignPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/StorageMgr"),s=e("../../Platform/Platform"),l=e("../../Tool/Tool"),c=e("../ResPanelOpen"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.awradIcon=null,t.dayItems=[],t.sureBtn=null,t.videoBtn=null,t.closeBtn=null,t.rewardKeyCountList=["1","1","1","2","2","2","3"],t}return i(t,e),t.prototype.onLoad=function(){for(var e=this.node.getChildByName("panel"),t=e.getChildByName("layout"),n=0;n<t.children.length;n++)this.dayItems.push(t.children[n]);this.dayItems.push(e.getChildByName("day7")),this.sureBtn=e.getChildByName("sureBtn"),this.videoBtn=e.getChildByName("videoBtn"),this.closeBtn=e.getChildByName("closeBtn")},t.prototype.start=function(){l.Tool.addClickEvent(this.sureBtn,this.normalGetReward,this),l.Tool.addClickEvent(this.videoBtn,this.videoGetReward,this),l.Tool.addClickEvent(this.closeBtn,this.close,this)},t.prototype.onEnable=function(){this.updatePanel();var e=this.node.getChildByName("panel");c.default.panelOpen_SmallToBig(e)},t.prototype.updatePanel=function(){for(var e=a.default.instance.storageData.realSignDay,t=a.default.instance.storageData.targetSignDay,n=0;n<this.dayItems.length;n++){var o=this.dayItems[n].getChildByName("today"),i=this.dayItems[n].getChildByName("get"),r=this.dayItems[n].getChildByName("countLabel").getComponent(cc.Label);this.dayItems[n].getChildByName("light").color=n==t-1?new cc.Color(255,255,0,255):new cc.Color(255,255,255,255),i.active=n<=e-1,o.active=n==t-1,r.string="x"+this.rewardKeyCountList[n]}},t.prototype.close=function(){var e=this.node.getChildByName("panel"),t=this;c.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},t.prototype.normalGetReward=function(){this.getReward(!1)},t.prototype.videoGetReward=function(){var e=this;a.default.instance.storageData.realSignDay>=a.default.instance.storageData.targetSignDay?s.default.instance.showToast("\u4eca\u65e5\u5df2\u7b7e\u5230"):s.default.instance.showVideo(function(){e.getReward(!0)},function(){})},t.prototype.getReward=function(){var e=a.default.instance.storageData.realSignDay;if(e>=a.default.instance.storageData.targetSignDay)s.default.instance.showToast("\u4eca\u65e5\u5df2\u7b7e\u5230");else{var t=e;e++,parseInt(this.rewardKeyCountList[t]),cc.find("Canvas"),a.default.instance.setRealSignDay(e),this.close()}},r([d],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../Mgr/StorageMgr":"StorageMgr","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../ResPanelOpen":"ResPanelOpen"}],Copy_BossRuhKeyComp:[function(e,t,n){"use strict";cc._RF.push(t,"3338bfq1odAfZ5ibslPXogS","Copy_BossRuhKeyComp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/StorageMgr"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.countLabel=this.node.getChildByName("count").getComponent(cc.Label),this.video=this.node.getChildByName("video"),this.key=this.node.getChildByName("key"),l.EventMgr.on(a.EventType.Common_BossRushKey_Update,this.updateBossRushKeyNum,this)},t.prototype.onEnable=function(){this.updateBossRushKeyNum()},t.prototype.updateBossRushKeyNum=function(){c.default.instance.storageData.bossRushKey>0?(this.countLabel.string=c.default.instance.storageData.bossRushKey.toString()+"/"+s.default.bossRushKeyMax.toString(),this.video.opacity=0,this.key.opacity=255):(this.video.opacity=255,this.key.opacity=0,this.countLabel.string=c.default.instance.storageData.bossRushKeyVideo.toString()+"/"+s.default.bossRushKeyMax.toString())},r([d],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr"}],Copy_BossRushItem:[function(e,t,n){"use strict";cc._RF.push(t,"6b3d6tW+kFKL4LWWeTRmgPo","Copy_BossRushItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Tool/Tool"),s=e("../Main_PanelOpen"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){a.Tool.addClickEvent(this.node,this.enterBossRush,this)},t.prototype.onEnable=function(){},t.prototype.enterBossRush=function(){s.default.showCopySelectPanel("bossRush")},r([c],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],Copy_ClearRushItem:[function(e,t,n){"use strict";cc._RF.push(t,"93d099N0LFDhJFvo3x/A2iN","Copy_ClearRushItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Tool/Tool"),s=e("../Main_PanelOpen"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){a.Tool.addClickEvent(this.node,this.goClearRush,this)},t.prototype.onEnable=function(){},t.prototype.goClearRush=function(){s.default.showCopySelectPanel("clearRush")},r([c],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],Copy_ClearRushKeyComp:[function(e,t,n){"use strict";cc._RF.push(t,"53897A5wSpEZauZGaw65Rax","Copy_ClearRushKeyComp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/StorageMgr"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.countLabel=this.node.getChildByName("count").getComponent(cc.Label),this.video=this.node.getChildByName("video"),this.key=this.node.getChildByName("key"),l.EventMgr.on(a.EventType.Common_ClearRushKey_Update,this.updateClearRushKeyNum,this)},t.prototype.onEnable=function(){this.updateClearRushKeyNum()},t.prototype.updateClearRushKeyNum=function(){c.default.instance.storageData.clearRushKey>0?(this.countLabel.string=c.default.instance.storageData.clearRushKey.toString()+"/"+s.default.clearRushKeyMax.toString(),this.video.opacity=0,this.key.opacity=255):(this.video.opacity=255,this.key.opacity=0,this.countLabel.string=c.default.instance.storageData.clearRushKeyVideo.toString()+"/"+s.default.clearRushKeyMax.toString())},r([d],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr"}],Copy_GoldRushItem:[function(e,t,n){"use strict";cc._RF.push(t,"a9fcfLLgzRGdZNxrq5PJKsp","Copy_GoldRushItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Tool/Tool"),s=e("../Main_PanelOpen"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){a.Tool.addClickEvent(this.node,this.enterGoldRush,this)},t.prototype.enterGoldRush=function(){s.default.showCopySelectPanel("goldRush")},r([c],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],Copy_GoldRushKeyComp:[function(e,t,n){"use strict";cc._RF.push(t,"80586YUsPBJpKe0uDfBBU3Q","Copy_GoldRushKeyComp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/StorageMgr"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.countLabel=this.node.getChildByName("count").getComponent(cc.Label),this.video=this.node.getChildByName("video"),this.key=this.node.getChildByName("key"),l.EventMgr.on(a.EventType.Common_GoldRushKey_Update,this.updateGoldRushKeyNum,this)},t.prototype.onEnable=function(){this.updateGoldRushKeyNum()},t.prototype.updateGoldRushKeyNum=function(){c.default.instance.storageData.goldRushKey>0?(this.countLabel.string=c.default.instance.storageData.goldRushKey.toString()+"/"+s.default.goldRushKeyMax.toString(),this.video.opacity=0,this.key.opacity=255):(this.video.opacity=255,this.key.opacity=0,this.countLabel.string=c.default.instance.storageData.goldRushKeyVideo.toString()+"/"+s.default.goldRushKeyMax.toString())},r([d],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr"}],Copy_HelpBtn:[function(e,t,n){"use strict";cc._RF.push(t,"55107Xhlq1FEpdW3q8YmSYN","Copy_HelpBtn");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/LanguageMgr"),s=e("../../Tool/Tool"),l=e("../Main_PanelOpen"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title="",t.word="",t}return i(t,e),t.prototype.onLoad=function(){s.Tool.addClickEvent(this.node,this.onHelpBtnClick,this)},t.prototype.onHelpBtnClick=function(){var e=a.default.Instance.getLanguage(this.word);""==e&&(e=this.word);var t=a.default.Instance.getLanguage(this.title);""==t&&(t=this.title),l.default.showCopyHelpPanel(t,e)},r([d(cc.String)],t.prototype,"title",void 0),r([d(cc.String)],t.prototype,"word",void 0),r([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],Copy_HelpPanel:[function(e,t,n){"use strict";cc._RF.push(t,"2897ccP7dJP1qm6slGJFppu","Copy_HelpPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Res/ResPanelOpen"),s=e("../../Tool/Tool"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.titleLabel=null,t.btnClose=null,t}return i(t,e),t.prototype.onLoad=function(){this.panel=this.node.getChildByName("panel"),s.Tool.addClickEvent(this.btnClose,this.onCloseBtnClick,this)},t.prototype.init=function(e,t){this.titleLabel.string=e,this.label.string=t},t.prototype.onEnable=function(){a.default.panelOpen_SmallToBig(this.panel)},t.prototype.onCloseBtnClick=function(){var e=this;a.default.panelClose_BigToSmall(this.panel,function(){e.node.destroy()})},r([u(cc.Label)],t.prototype,"label",void 0),r([u(cc.Label)],t.prototype,"titleLabel",void 0),r([u(cc.Node)],t.prototype,"btnClose",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool"}],Copy_HeroItem:[function(e,t,n){"use strict";cc._RF.push(t,"9ed1dBfValGM7pn4uIk5d2D","Copy_HeroItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/ItemMgr"),l=e("../../../Mgr/LanguageMgr"),c=e("../../../Mgr/StorageMgr"),u=e("../../../Tool/Tool"),d=e("../../Mgr/Hero/HeroMgr"),h=e("./Copy_HeroRush_HeroSelect"),p=cc._decorator,f=p.ccclass,g=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selfId=null,t.selfInfos=null,t.selfStorageMsg=null,t._mainNode=null,t._isDown=!1,t._unLockMask=null,t}return i(t,e),t.prototype.onLoad=function(){this._mainNode=this.node.getChildByName("main"),this._unLockMask=this._mainNode.getChildByName("unLockMask"),this.initSelfMsg(),this.initTouch()},t.prototype.start=function(){},t.prototype.initSelfMsg=function(){var e=this;c.default.instance.storageData.heroStorageInfos.some(function(t){if(t.id==e.selfId)return e.selfStorageMsg=t,!0}),this.selfInfos=d.default.Instance.getHeroInfo(this.selfId),u.Tool.setSprite(this._mainNode.getChildByName("heroImg").getComponent(cc.Sprite),a.BundleName.Main,s.default.Instance.getHeroIcon(this.selfInfos.icon)),this._mainNode.getChildByName("nameLab").getComponent(cc.Label).string=l.default.Instance.getLanguage(this.selfInfos.name),this._mainNode.getChildByName("levelLab").getComponent(cc.Label).string="lv."+(null!=this.selfStorageMsg?this.selfStorageMsg.level:1),u.Tool.setSprite(this._mainNode.getChildByName("levelIcon").getComponent(cc.Sprite),a.BundleName.Main,s.default.Instance.getHeroGrade(this.selfInfos.grade)),this._unLockMask.active=null==this.selfStorageMsg,this.judeShowConfigLab()},t.prototype.initTouch=function(){var e=this;u.Tool.addClickEvent(this.node,function(){e._unLockMask.active||e.selfId==c.default.instance.storageData.usingHeroId||(h.default.instance.handlePickHero(e.selfId),e.judeShowConfigLab())},this)},t.prototype.judeShowConfigLab=function(e){void 0===e&&(e=null),this._isDown=null===e?-1!=h.default.instance.currPickHeroIds.indexOf(this.selfId)||this.selfId==c.default.instance.storageData.usingHeroId:e,this._mainNode.getChildByName("configLab").active=this._isDown},r([f],t)}(cc.Component));n.default=g,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/ItemMgr":"ItemMgr","../../../Mgr/LanguageMgr":"LanguageMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Tool/Tool":"Tool","../../Mgr/Hero/HeroMgr":"HeroMgr","./Copy_HeroRush_HeroSelect":"Copy_HeroRush_HeroSelect"}],Copy_HeroRushItem:[function(e,t,n){"use strict";cc._RF.push(t,"dfbdcq6ni1Lr6FFgjNYhzhF","Copy_HeroRushItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Tool/Tool"),s=e("../Main_PanelOpen"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){a.Tool.addClickEvent(this.node,this.goHeroRush,this)},t.prototype.onEnable=function(){},t.prototype.goHeroRush=function(){s.default.showCopySelectPanel("heroRush")},r([c],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],Copy_HeroRushKeyComp:[function(e,t,n){"use strict";cc._RF.push(t,"30400zyhV1Lf6U/ZpEP6cUX","Copy_HeroRushKeyComp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/StorageMgr"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.countLabel=this.node.getChildByName("count").getComponent(cc.Label),this.video=this.node.getChildByName("video"),this.key=this.node.getChildByName("key"),l.EventMgr.on(a.EventType.Common_HeroRushKey_Update,this.updateHeroRushKeyNum,this)},t.prototype.onEnable=function(){this.updateHeroRushKeyNum()},t.prototype.updateHeroRushKeyNum=function(){c.default.instance.storageData.heroRushKey>0?(this.countLabel.string=c.default.instance.storageData.heroRushKey.toString()+"/"+s.default.heroRushKeyMax.toString(),this.video.opacity=0,this.key.opacity=255):(this.video.opacity=255,this.key.opacity=0,this.countLabel.string=c.default.instance.storageData.heroRushKeyVideo.toString()+"/"+s.default.heroRushKeyMax.toString())},r([d],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr"}],Copy_HeroRush_HeroSelect:[function(e,t,n){"use strict";cc._RF.push(t,"743259DeQZFg44VyEm+W38/","Copy_HeroRush_HeroSelect");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../../Config/EnumTypes"),c=e("../../../Config/GameData"),u=e("../../../Mgr/BundleMgr"),d=e("../../../Mgr/EventMgr"),h=e("../../../Mgr/ItemMgr"),p=e("../../../Mgr/StorageMgr"),f=e("../../../Tool/Tool"),g=e("../../Battle/Battle_HeroRushMgr"),y=e("../../Mgr/GuideCore/GuideEnums"),m=e("../../Mgr/GuideCore/GuideMgr"),v=e("../../Mgr/Hero/HeroMgr"),_=e("../../Mgr/MgrRing"),b=e("./Copy_HeroItem"),S=cc._decorator,M=S.ccclass,C=S.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enterBtn=null,t.closeBtn=null,t.downHeroContent=null,t.pickHeroContent=null,t.countBar=null,t.awardPar=null,t._currPickDownIndex=1,t.currPickHeroIds=[],t._currShowMsgIndex=-1,t}var n;return i(t,e),n=t,Object.defineProperty(t.prototype,"awardMsg",{get:function(){return g.default.instance.awardMsg},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){n.instance=this,this.panel=this.node.getChildByName("panel"),f.Tool.addClickEvent(this.enterBtn,this.onEnterBtnClick,this),f.Tool.addClickEvent(this.closeBtn,this.onCloseBtnClick,this),this.initDownHeroContent()},t.prototype.onEnable=function(){m.default.instance.isCompleteSpecialGuide(y.SpecialGuideEnum.TouchLegionRushSelectHero)||(m.default.instance.checkSpecial(y.SpecialGuideEnum.TouchLegionRushSelectHero),m.default.instance.completeSpecialGuide(y.SpecialGuideEnum.TouchLegionRushSelectHero),d.EventMgr.event(l.GlobalEvent.ShowMask,!1))},t.prototype.initDownHeroContent=function(){return a(this,void 0,void 0,function(){var e,t,n,o,i,r=this;return s(this,function(a){switch(a.label){case 0:return[4,new Promise(function(e){return u.default.getBundleData(l.BundleName.Main).loadRes("Prefabs/Copy/HeroRush/other/heroDownItem",cc.Prefab,function(t,n){return e(n)})})];case 1:for(e=a.sent(),this.currPickHeroIds=[p.default.instance.storageData.usingHeroId],p.default.instance.storageData.heroRushPickHeroIds.some(function(e){e!=p.default.instance.storageData.usingHeroId&&null!=e&&r.currPickHeroIds.push(e)}),t=this.currPickHeroIds.length,n=function(n){var i=cc.instantiate(e);o.downHeroContent.addChild(i),n>=t&&o.currPickHeroIds.push(null),i.getChildByName("heroImg").on(cc.Node.EventType.TOUCH_END,function(){r.handleDownHeroTouch(n)})},o=this,i=1;i<9;i++)n(i);return f.Tool.setSprite(this.downHeroContent.children[0].getChildByName("heroImg").getComponent(cc.Sprite),l.BundleName.Main,h.default.Instance.getHeroIcon(v.default.Instance.getHeroInfo(p.default.instance.storageData.usingHeroId).icon)),this.downHeroContent.children[0].getChildByName("heroImg").active=!0,this.awardMsg.some(function(e,t){r.awardPar.getChildByName("award_"+(t+1)).getChildByName("label").getComponent(cc.Label).string=e.count.toString(),r.awardPar.getChildByName("award_"+(t+1)).x=595/9*(e.count-1)+595/9/2,f.Tool.addClickEvent(r.awardPar.getChildByName("award_"+(t+1)),function(){r.showAwardMsgBox(t)},r)}),this._currPickDownIndex=t>=9?8:t,this.initPickHeroContent(),this.changeDownItemLight(),[2]}})})},t.prototype.initPickHeroContent=function(){return a(this,void 0,void 0,function(){var e,t,n,o,i;return s(this,function(r){switch(r.label){case 0:return[4,new Promise(function(e){return u.default.getBundleData(l.BundleName.Main).loadRes("Prefabs/Copy/HeroRush/other/heroItem",cc.Prefab,function(t,n){return e(n)})})];case 1:for(e=r.sent(),t=v.default.Instance.getAllHeroId(),n=0;n<t.length;n++)(o=cc.instantiate(e)).getComponent(b.default).selfId=t[n],this.pickHeroContent.addChild(o),-1!=(i=this.currPickHeroIds.indexOf(t[n]))&&0!=i&&(f.Tool.setSprite(this.downHeroContent.children[i].getChildByName("heroImg").getComponent(cc.Sprite),l.BundleName.Main,h.default.Instance.getHeroIcon(v.default.Instance.getHeroInfo(t[n]).icon)),this.handleShowDownHero(!0,i));return[2]}})})},t.prototype.changeDownItemLight=function(){var e=this;this.downHeroContent.children.some(function(t,n){n>0&&(t.getChildByName("blackLight").active=null==e.currPickHeroIds[n]&&n!=e._currPickDownIndex,t.getChildByName("blueLight").active=null!=e.currPickHeroIds[n]&&n!=e._currPickDownIndex,t.getChildByName("pickLight").active=n==e._currPickDownIndex)}),this.changeCountBarWight(),p.default.instance.changeHeroRushPickHeroIds(this.currPickHeroIds)},t.prototype.handleDownHeroTouch=function(e){null!=this.currPickHeroIds[e]&&(this.checkoutDowmHero(this.currPickHeroIds[e]),this.currPickHeroIds[e]=null,this.handleShowDownHero(!1,e),this._currPickDownIndex=this.currPickHeroIds.indexOf(null),this.changeDownItemLight())},t.prototype.handlePickHero=function(e){var t=this.currPickHeroIds.indexOf(e);-1!=t?(this.currPickHeroIds[t]=null,this.handleShowDownHero(!1,t),this._currPickDownIndex=this.currPickHeroIds.indexOf(null)):(t=this._currPickDownIndex,null!=this.currPickHeroIds[t]&&this.checkoutDowmHero(this.currPickHeroIds[t]),this.currPickHeroIds[t]=e,f.Tool.setSprite(this.downHeroContent.children[t].getChildByName("heroImg").getComponent(cc.Sprite),l.BundleName.Main,h.default.Instance.getHeroIcon(v.default.Instance.getHeroInfo(e).icon)),this.handleShowDownHero(!0,t),-1!=this.currPickHeroIds.indexOf(null)&&(this._currPickDownIndex=this.currPickHeroIds.indexOf(null))),this.changeDownItemLight()},t.prototype.handleShowDownHero=function(e,t){this.downHeroContent.children[t].getChildByName("heroImg").active=e,this.downHeroContent.children[t].getChildByName("notHero").active=!e,e||(this.downHeroContent.children[t].getChildByName("heroImg").getComponent(cc.Sprite).spriteFrame=null)},t.prototype.checkoutDowmHero=function(e){this.pickHeroContent.children.some(function(t){if(t.getComponent(b.default).selfId==e)return t.getComponent(b.default).judeShowConfigLab(!1),!0})},t.prototype.changeCountBarWight=function(){var e=this,t=0;this.currPickHeroIds.forEach(function(e){null!=e&&(t+=1)}),this.countBar.width=t*(595/9),this.awardMsg.some(function(n,o){e.awardPar.getChildByName("award_"+(o+1)).getChildByName("has").active=t>=n.count,e.awardPar.getChildByName("award_"+(o+1)).getChildByName("not").active=t<n.count})},t.prototype.showAwardMsgBox=function(e){this._currShowMsgIndex!=e?(this._currShowMsgIndex=e,this.awardPar.getChildByName("msgBox").getChildByName("label").getComponent(cc.Label).string=this.awardMsg[e].msgStr,this.awardPar.getChildByName("msgBox").x=this.awardPar.getChildByName("award_"+(e+1)).x,this.awardPar.getChildByName("msgBox").active=!0):(this._currShowMsgIndex=-1,this.awardPar.getChildByName("msgBox").active=!1)},t.prototype.onCloseBtnClick=function(){this.node.destroy()},t.prototype.onEnterBtnClick=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return[4,_.default.Instance.canCreateRing(!0)];case 1:if(!t.sent())return[2];for(e=0;e<=this.currPickHeroIds.length;e++)null!=this.currPickHeroIds[e]&&g.default.instance.selectHero.push(this.currPickHeroIds[e]);return c.default.isTest&&console.log("\u9009\u62e9\u82f1\u96c4\u961f\u4f0d",g.default.instance.selectHero),g.default.instance.finishSelectHero(),this.node.destroy(),[2]}})})},t.instance=null,r([C(cc.Node)],t.prototype,"enterBtn",void 0),r([C(cc.Node)],t.prototype,"closeBtn",void 0),r([C(cc.Node)],t.prototype,"downHeroContent",void 0),r([C(cc.Node)],t.prototype,"pickHeroContent",void 0),r([C(cc.Node)],t.prototype,"countBar",void 0),r([C(cc.Node)],t.prototype,"awardPar",void 0),n=r([M],t)}(cc.Component);n.default=T,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/BundleMgr":"BundleMgr","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/ItemMgr":"ItemMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Tool/Tool":"Tool","../../Battle/Battle_HeroRushMgr":"Battle_HeroRushMgr","../../Mgr/GuideCore/GuideEnums":"GuideEnums","../../Mgr/GuideCore/GuideMgr":"GuideMgr","../../Mgr/Hero/HeroMgr":"HeroMgr","../../Mgr/MgrRing":"MgrRing","./Copy_HeroItem":"Copy_HeroItem"}],Copy_HeroRush_QuitPanel:[function(e,t,n){"use strict";cc._RF.push(t,"2baaaBsQ5NNJZUVoQh+RPr6","Copy_HeroRush_QuitPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Res/ResPanelOpen"),s=e("../../../Tool/Tool"),l=e("../../Battle/Battle_HeroRushMgr"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cancelBtn=null,t.quitBtn=null,t.panel=null,t.otherPanel=null,t.isQuit=!1,t}return i(t,e),t.prototype.onLoad=function(){s.Tool.addClickEvent(this.cancelBtn,this.onCancelBtnClick,this),s.Tool.addClickEvent(this.quitBtn,this.onQuitBtnClick,this)},t.prototype.onEnable=function(){a.default.panelOpen_SmallToBig(this.panel)},t.prototype.onCancelBtnClick=function(){var e=this;a.default.panelClose_BigToSmall(this.panel,function(){e.node.destroy()})},t.prototype.onQuitBtnClick=function(){var e=this;a.default.panelClose_BigToSmall(this.panel,function(){e.otherPanel&&e.otherPanel.destroy(),e.node.destroy(),l.default.instance.heroRushLevelEnd(e.isQuit)})},r([d(cc.Node)],t.prototype,"cancelBtn",void 0),r([d(cc.Node)],t.prototype,"quitBtn",void 0),r([d(cc.Node)],t.prototype,"panel",void 0),r([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Res/ResPanelOpen":"ResPanelOpen","../../../Tool/Tool":"Tool","../../Battle/Battle_HeroRushMgr":"Battle_HeroRushMgr"}],Copy_HeroRush_Result:[function(e,t,n){"use strict";cc._RF.push(t,"7562fwwVuJODYcYBJ3+6ZnS","Copy_HeroRush_Result");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/ItemMgr"),l=e("../../../Mgr/LanguageMgr"),c=e("../../../Mgr/SoundMgr"),u=e("../../../Res/ResPanelOpen"),d=e("../../../Tool/Tool"),h=e("../../Battle/BattleMgr"),p=e("../../Battle/Battle_HeroRushMgr"),f=e("../../Mgr/GuideCore/GuideEnums"),g=e("../../Mgr/GuideCore/GuideMgr"),y=e("../../Mgr/MgrRing"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeBtn=null,t.msgLab=null,t.ringLevelImg=null,t.ringIcon=null,t.nameLabel=null,t.panel=null,t.ringBox=null,t.resultTitle=null,t.resultMsg=null,t.circleImgs=[],t}return i(t,e),t.prototype.onLoad=function(){this.panel=this.node.getChildByName("panel"),this.ringBox=this.panel.getChildByName("ringBox"),this.resultTitle=this.panel.getChildByName("title"),d.Tool.addClickEvent(this.closeBtn,this.onCloseBtnClick,this)},t.prototype.init=function(e){this.resultMsg=e,this.initShow(),u.default.panelOpen_SmallToBig(this.panel),1==this.resultMsg.type?h.default.instance.playBattleMusic(h.MusicState.vitory):h.default.instance.playBattleMusic(h.MusicState.fail),g.default.instance.checkSpecial(f.SpecialGuideEnum.TouchLegionRushReward)},t.prototype.onDisable=function(){1==this.resultMsg.type?(c.default.instance.currentMusicKey==a.SoundType.bgm_vitory&&(c.default.instance.currentMusicKey="",h.default.instance.playBattleMusic(h.default.instance.nowMusicState)),g.default.instance.completeSpecialGuide(f.SpecialGuideEnum.TouchLegionRushReward),g.default.instance.completeSpecialGuide(f.SpecialGuideEnum.TouchLegionRushReward2),g.default.instance.checkSpecial(f.SpecialGuideEnum.TouchHeroButton5)):(c.default.instance.currentMusicKey==a.SoundType.bgm_fail&&(c.default.instance.currentMusicKey="",h.default.instance.playBattleMusic(h.default.instance.nowMusicState)),g.default.instance.completeSpecialGuide(f.SpecialGuideEnum.TouchLegionRushReward),g.default.instance.completeSpecialGuide(f.SpecialGuideEnum.TouchLegionRushReward2),g.default.instance.checkSpecial(f.SpecialGuideEnum.TouchHeroButton5))},t.prototype.initShow=function(){var e=this;this.resultTitle.getChildByName("success").active=1==this.resultMsg.type,this.resultTitle.getChildByName("loss").active=2==this.resultMsg.type,this.resultTitle.getChildByName("close").active=3==this.resultMsg.type,d.Tool.setSprite(this.ringLevelImg,a.BundleName.Main,s.default.Instance.getHeroGrade(p.default.instance.ringQuality)),d.Tool.setSprite(this.ringBox.getComponent(cc.Sprite),a.BundleName.Main,s.default.Instance.getQualityIcon(p.default.instance.ringQuality)),this.nameLabel.string=l.default.Instance.getLanguage(y.default.Instance.get(p.default.instance.getRingInfo.originId).name),d.Tool.setSprite(this.ringIcon,a.BundleName.Main,"Textures/Equipment/"+y.default.Instance.get(p.default.instance.getRingInfo.originId).icon,function(){}),this.resultMsg.props.some(function(t){10001!=t.propType&&(e.msgLab.string+=t.propName.split("-")[1]+t.value+"%\n")}),this.resultMsg.barNode.y=0,this.resultMsg.barNode.getChildByName("pointPar").children.some(function(t){"currPoint"!=t.name?t.getComponent(cc.Sprite).spriteFrame="15"==t.name?e.circleImgs[2]:e.circleImgs[0]:(t.getComponent(cc.Sprite).spriteFrame=e.circleImgs[1],t.children[0].getComponent(cc.Sprite).spriteFrame=e.circleImgs[3])}),h.default.instance.nowHeroRushRound>p.default.maxRound&&(this.resultMsg.barNode.getChildByName("pointPar").getChildByName("currPoint").active=!1,this.resultMsg.barNode.getChildByName("pointPar").getChildByName(p.default.maxRound.toString()).active=!0,this.resultMsg.barNode.getChildByName("labPar").getChildByName(p.default.maxRound.toString()).color=(new cc.Color).fromHEX("#727A8F")),this.panel.getChildByName("bar").addChild(this.resultMsg.barNode)},t.prototype.onCloseBtnClick=function(){var e=this;u.default.panelClose_BigToSmall(this.panel,function(){e.node.destroy()})},r([_(cc.Node)],t.prototype,"closeBtn",void 0),r([_(cc.Label)],t.prototype,"msgLab",void 0),r([_(cc.Sprite)],t.prototype,"ringLevelImg",void 0),r([_(cc.Sprite)],t.prototype,"ringIcon",void 0),r([_(cc.Label)],t.prototype,"nameLabel",void 0),r([_([cc.SpriteFrame])],t.prototype,"circleImgs",void 0),r([v],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/ItemMgr":"ItemMgr","../../../Mgr/LanguageMgr":"LanguageMgr","../../../Mgr/SoundMgr":"SoundMgr","../../../Res/ResPanelOpen":"ResPanelOpen","../../../Tool/Tool":"Tool","../../Battle/BattleMgr":"BattleMgr","../../Battle/Battle_HeroRushMgr":"Battle_HeroRushMgr","../../Mgr/GuideCore/GuideEnums":"GuideEnums","../../Mgr/GuideCore/GuideMgr":"GuideMgr","../../Mgr/MgrRing":"MgrRing"}],Copy_HeroRush_Select:[function(e,t,n){"use strict";cc._RF.push(t,"ff889h+4fdID7oD9WPF0tDU","Copy_HeroRush_Select");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../../Config/EnumTypes"),c=e("../../../Mgr/BattleData"),u=e("../../../Mgr/EventMgr"),d=e("../../../Platform/Platform"),h=e("../../../Tool/Tool"),p=e("../../Battle/BattleMgr"),f=e("../../Battle/Battle_HeroRushMgr"),g=e("../../Mgr/MgrRing"),y=e("../../../Mgr/ItemMgr"),m=e("../../Mgr/Hero/HeroMgr"),v=e("../../../Mgr/StorageMgr"),_=e("../../Mgr/GuideCore/GuideMgr"),b=e("../../Mgr/GuideCore/GuideEnums"),S=e("../../Mgr/GuideCore/WeakGuide/LogionSelectWeakGuide"),M=e("../../Main_PanelOpen"),C=e("../../../Config/GameData"),T=cc._decorator,k=T.ccclass,I=T.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enterBtn=null,t.closeBtn=null,t.refreshBtn=null,t.pickLevel=null,t.barPar=null,t._currCopyGrade=1,t._copyGradeConfig=null,t._copyPropConfig=null,t._currLevel=11,t._levelRandomIds={},t._currPickMsg=[],t._currPickProp=[],t._currPickIndex=null,t._boosLevels=[1,5,10,15],t._bossKeys=["floor1","floor5","floor10","floor15"],t._commonKeys=["floor2-4","floor6-9","floor11-14"],t.propPanel=null,t.propPanelBtn=null,t.refreshCount=1,t.specialProp=[10001,10002,10003,10004,10005,10006],t._isNodeInitPropMsgLab=!1,t._scrollViewHeight=360,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this._currLevel=p.default.instance.nowHeroRushRound,C.default.isTest&&console.log("\u5f53\u524d\u5173\u5361",this._currLevel),this.panel=this.node.getChildByName("panel"),this.propPanel=this.node.getChildByName("propPanel"),this.propPanelBtn=this.propPanel.getChildByName("btn"),this._currLevel>f.default.maxRound?f.default.instance.heroRushLevelEnd():(h.Tool.addClickEvent(this.enterBtn,this.onEnterBtnClick,this),h.Tool.addClickEvent(this.closeBtn,this.onCloseBtnClick,this),h.Tool.addClickEvent(this.refreshBtn,this.onRefreshClick,this),h.Tool.addClickEvent(this.panel.getChildByName("btn_ring"),function(){e.openPropPanel(!0)},this,null,!0,!1),h.Tool.addClickEvent(this.propPanelBtn,this.onPropPanelBtnClick,this),this._copyGradeConfig=c.default.instance.getHeroRushInfo(this._currCopyGrade),this._copyPropConfig=c.default.instance.getAllHeroRushPropInfos(),this.initLevelRandomIds(),this.initLevelPickItem(),this.pickLevel.children.some(function(t,n){h.Tool.addClickEvent(t,function(){return e.handleTouchLevelItem(n)},e)}),this.initLevelBar(),h.Tool.setSprite(this.panel.getChildByName("levelImg").getComponent(cc.Sprite),l.BundleName.Main,y.default.Instance.getHeroGrade(f.default.instance.ringQuality)))},t.prototype.start=function(){f.default.instance.isRingProp&&this.openPropPanel(!0)},t.prototype.onEnable=function(){var e;_.default.instance.isCompleteSpecialGuide(b.SpecialGuideEnum.TouchLegionRushSelectProp)||(null===(e=this.node.getComponentInChildren(S.default))||void 0===e||e.show(),_.default.instance.checkSpecial(b.SpecialGuideEnum.TouchLegionRushSelectProp),_.default.instance.completeSpecialGuide(b.SpecialGuideEnum.TouchLegionRushSelectProp),u.EventMgr.event(l.GlobalEvent.ShowMask,!1))},t.prototype.initLevelRandomIds=function(){var e=this;this._bossKeys.forEach(function(t){e._levelRandomIds[t.split("floor")[1]]=[e._copyGradeConfig[t]]});var t=[];this._commonKeys.forEach(function(n,o){t[o]=[],e._copyGradeConfig[n].split(",").forEach(function(e){for(var n=e.split("~"),i=parseInt(n[0]);i<=parseInt(n[1]);i++)t[o].push(i)})}),this._levelRandomIds["2_4"]=t[0],this._levelRandomIds["6_9"]=t[1],this._levelRandomIds["11_14"]=t[2]},t.prototype.initLevelPickItem=function(){var e=this,t=1,n=[];for(var o in this._levelRandomIds){var i=o.split("_");if(!(2==i.length&&(this._currLevel<parseInt(i[0])||this._currLevel>parseInt(i[1]))||1==i.length&&(this._currLevel<parseInt(i[0])||this._currLevel>parseInt(i[0])))){t=(n=h.Tool.cloneArray_normal(this._levelRandomIds[o])).length<=1?1:3;break}}this._currPickMsg=[];for(var r=0;r<t;r++){var a=h.Tool.takeRandomInArray(n);this._currPickMsg.push(c.default.instance.getHeroRushRandInfo(a))}this._currPickProp=[];var s=[];for(r=0;r<this._copyPropConfig.length;r++)10001==this._copyPropConfig[r].propType&&f.default.instance.ringQuality>=g.default.Instance.getMaxQuality()||s.push(r);this._currPickMsg.some(function(t){var n=e._copyPropConfig[h.Tool.takeRandomInArray(s)],o=Object(null);o.id=n.id,o.type=n.type,o.propName=n.propName,o.propType=n.propType;var i=t.quality>1?[n.midValue,n.highValue]:[n.lowValue,n.midValue];o.value=h.Tool.randomInt(i[0],i[1]),e._currPickProp.push(o)}),this.pickLevel.children.some(function(t,n){t.active=!1,e._currPickMsg[n]&&e.changePickItemMsg(t,e._currPickMsg[n],e._currPickProp[n])})},t.prototype.changePickItemMsg=function(e,t,n){var o=e.getChildByName("titleNode");o.getChildByName("label").getComponent(cc.Label).string=t.name,o.getChildByName("icon").active=t.quality>1,o.getChildByName("label").color=(new cc.Color).fromHEX(t.quality>1?"#85b9fa":"#38AEAA"),e.getChildByName("back_2").active=t.quality>1,e.getChildByName("back_1").active=t.quality<=1,e.getChildByName("titleName").color=(new cc.Color).fromHEX(n.type>1?"#57abc6":"#f4da42"),e.getChildByName("titleName").getComponent(cc.Label).string=n.type>1?"\u5f3a\u5316\u5c0f\u8001\u864e":"\u589e\u5f3a\u5956\u52b1";var i=n.propName.split("-")[1];10001!=n.propType&&(i=i+n.value+"%",n.type<=1&&(i+="(\u6212\u6307\u5c5e\u6027)")),e.getChildByName("msgLab").getComponent(cc.Label).string=i,e.active=!0},t.prototype.handleTouchLevelItem=function(e){this._currPickIndex!=e&&(null!=this._currPickIndex?this.pickLevel.children[this._currPickIndex].getChildByName("pick").active=!1:this.enterBtn.getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL),this._currPickIndex=e,this.pickLevel.children[this._currPickIndex].getChildByName("pick").active=!0)},t.prototype.initLevelBar=function(){var e=this,t=!1;this._boosLevels.forEach(function(n){if(e._currLevel==n)return t=!0,!0}),this.barPar.getChildByName("pointPar").children.some(function(t,n){n<15&&(t.active=n<e._currLevel-1)});var n=this.barPar.getChildByName("pointPar").children[this._currLevel-1].position;this.barPar.getChildByName("line").width=n.x;var o=this.barPar.getChildByName("pointPar").getChildByName("currPoint");o.position=n,o.setContentSize(t?35:20,t?35:20),o.getChildByName("boosIcon").active=t&&15==this._currLevel,this.barPar.getChildByName("labPar").children.some(function(t){t.color=(new cc.Color).fromHEX(Number(t.name)<e._currLevel?"#fbfd71":Number(t.name)==e._currLevel?"#e7d4f6":"#727A8F")})},t.prototype.handleJudeProp=function(){var e=this._currPickProp[this._currPickIndex];e.type>1?f.default.instance.currPickProps.hero.push(e):f.default.instance.currPickProps.ring.push(e);var t=!1;if(this.specialProp.some(function(n){if(n==e.propType)return t=!0,!0}),t)switch(e.propType){case 10001:f.default.instance.ringQuality+=1;break;case 10002:f.default.instance.addAdk+=e.value;break;case 10003:f.default.instance.addHp+=e.value;break;case 10004:f.default.instance.addCD+=e.value;break;case 10005:f.default.instance.addSkillDamage+=e.value;break;case 10006:f.default.instance.addCritcalDamage+=e.value}else{var n={propId:e.propType,value:e.value};f.default.instance.ringPropData.push(n)}f.default.instance.isRingProp=e.type<=1,e.type>1?(C.default.isTest&&console.log("\u52a0\u597d\u4e86\u7684",f.default.instance.currPickProps.hero),this.openPropPanel(!1)):this.handleGameStart()},t.prototype.openPropPanel=function(e){var t=this;if(void 0===e&&(e=!0),this.propPanelBtn.getChildByName("label").active=e,this.propPanelBtn.getChildByName("atkIcon").active=!e,this.propPanel.opacity=0,this.propPanel.active=!0,cc.tween(this.propPanel).to(.3,{opacity:255}).start(),!this._isNodeInitPropMsgLab||!e){this._isNodeInitPropMsgLab||(h.Tool.setSprite(h.Tool.findNodeByName(this.propPanel.getChildByName("heroScrollView"),"img").getComponent(cc.Sprite),l.BundleName.Main,y.default.Instance.getHeroIcon(m.default.Instance.getHeroInfo(v.default.instance.storageData.usingHeroId).icon)),h.Tool.setSprite(h.Tool.findNodeByName(this.propPanel.getChildByName("ringScrollView"),"levelImg").getComponent(cc.Sprite),l.BundleName.Main,y.default.Instance.getHeroGrade(f.default.instance.ringQuality))),this._isNodeInitPropMsgLab=!0;var n=h.Tool.findNodeByName(this.propPanel.getChildByName("ringScrollView"),"propMsg").getComponent(cc.Label),o=h.Tool.findNodeByName(this.propPanel.getChildByName("heroScrollView"),"propMsg").getComponent(cc.Label),i=h.Tool.findNodeByName(this.propPanel.getChildByName("ringScrollView"),"newLab"),r=h.Tool.findNodeByName(this.propPanel.getChildByName("heroScrollView"),"newLab");n.string="",f.default.instance.currPickProps.ring.some(function(e,o){10001!=e.propType&&(o>=f.default.instance.currPickProps.ring.length-1&&f.default.instance.isRingProp?(i.getChildByName("layout").getChildByName("titleLab").getComponent(cc.Label).string=e.propName.split("-")[1]+e.value+"%",r.active=!1,i.active=!0,t.scheduleOnce(function(){t._scrollViewHeight<n.node.parent.height&&(n.node.parent.y=n.node.parent.height-t._scrollViewHeight+t._scrollViewHeight/2)},.1)):n.string+=e.propName.split("-")[1]+e.value+"%\n")}),o.string="",f.default.instance.currPickProps.hero.some(function(n,a){a>=f.default.instance.currPickProps.hero.length-1&&!e?(r.getChildByName("layout").getChildByName("titleLab").getComponent(cc.Label).string=n.propName.split("-")[1]+n.value+"%",i.active=!1,r.active=!0,t.scheduleOnce(function(){t._scrollViewHeight<o.node.parent.height&&(o.node.parent.y=o.node.parent.height-t._scrollViewHeight+t._scrollViewHeight/2)},.1)):o.string+=n.propName.split("-")[1]+n.value+"%\n"})}},t.prototype.closePropPanel=function(){var e=this;cc.tween(this.propPanel).to(.3,{opacity:0}).call(function(){e.propPanel.active=!1}).start()},t.prototype.onPropPanelBtnClick=function(){this.propPanelBtn.getChildByName("label").active?this.closePropPanel():this.handleGameStart()},t.prototype.handleGameStart=function(){u.EventMgr.event(l.EventType.Battle_Copy_HeroRush_In,f.default.instance.getNowSelectHero(),this._currPickMsg[this._currPickIndex].id),this.node.destroy()},t.prototype.onCloseBtnClick=function(){M.default.showHeroRushQuitPanel(this.node,!0)},t.prototype.onEnterBtnClick=function(){null!=this._currPickIndex&&this.handleJudeProp()},t.prototype.onRefreshClick=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this.refreshCount<=0?[2]:[4,new Promise(function(e){return d.default.instance.showVideo(function(){return e(!0)},function(){return e(!1)})})];case 1:return e.sent()?(this.initLevelPickItem(),this.refreshCount--,this.refreshCount<=0&&this.refreshBtn.getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY),this._currPickIndex=null,this.enterBtn.getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY),this.pickLevel.children.some(function(e){e.getChildByName("pick").active=!1}),[2]):[2]}})})},t.prototype.onDisable=function(){f.default.instance.levelbar=cc.instantiate(this.barPar)},r([I(cc.Node)],t.prototype,"enterBtn",void 0),r([I(cc.Node)],t.prototype,"closeBtn",void 0),r([I(cc.Node)],t.prototype,"refreshBtn",void 0),r([I(cc.Node)],t.prototype,"pickLevel",void 0),r([I(cc.Node)],t.prototype,"barPar",void 0),r([k],t)}(cc.Component);n.default=E,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/BattleData":"BattleData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/ItemMgr":"ItemMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Platform/Platform":"Platform","../../../Tool/Tool":"Tool","../../Battle/BattleMgr":"BattleMgr","../../Battle/Battle_HeroRushMgr":"Battle_HeroRushMgr","../../Main_PanelOpen":"Main_PanelOpen","../../Mgr/GuideCore/GuideEnums":"GuideEnums","../../Mgr/GuideCore/GuideMgr":"GuideMgr","../../Mgr/GuideCore/WeakGuide/LogionSelectWeakGuide":"LogionSelectWeakGuide","../../Mgr/Hero/HeroMgr":"HeroMgr","../../Mgr/MgrRing":"MgrRing"}],Copy_InHeroCopy_Panel:[function(e,t,n){"use strict";cc._RF.push(t,"27e07REDnBIKJ34m3nfDvoL","Copy_InHeroCopy_Panel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Tool/Tool"),c=e("../../Battle/Battle_HeroRushMgr"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t}return i(t,e),t.prototype.onLoad=function(){s.EventMgr.on(a.EventType.Battle_HeroCopy_SelectHero,this.refreshNowHero,this),s.EventMgr.on(a.EventType.Battle_HeroRush_HeroDead,this.refresAliveState,this)},t.prototype.onEnable=function(){this.refreshNowHero()},t.prototype.refreshNowHero=function(){for(var e=c.default.instance.selectHero,t=0;t<this.layout.children.length;t++){var n=this.layout.children[t];if(n.active=t<e.length,n.active){var o=n.getChildByName("icon"),i="Textures/Hero/icon_"+e[t];l.Tool.setSprite(o.getComponent(cc.Sprite),a.BundleName.Main,i)}}this.refresAliveState()},t.prototype.refresAliveState=function(){for(var e=c.default.instance.deadCount,t=0;t<this.layout.children.length;t++){var n=this.layout.children[t],o=n.getChildByName("close"),i=n.getChildByName("icon");o.active=t<e,i.color=o.active?new cc.Color(125,125,125):new cc.Color(255,255,255)}},r([h(cc.Node)],t.prototype,"layout",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Tool/Tool":"Tool","../../Battle/Battle_HeroRushMgr":"Battle_HeroRushMgr"}],Copy_RewardPanel:[function(e,t,n){"use strict";cc._RF.push(t,"513f7B7lhpP4ZL4+NJDGNEK","Copy_RewardPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/SoundMgr"),c=e("../../Config/EnumTypes"),u=e("../../Mgr/EventMgr"),d=e("../../Mgr/StorageMgr"),h=e("../../Res/ResPanelOpen"),p=e("../../Res/comp/AwardShowComp"),f=e("../../Res/comp/CoinComp"),g=e("../../Res/comp/DiamondComp"),y=e("../../Tool/Tool"),m=e("../Battle/BattleMgr"),v=e("../Main_PanelOpen"),_=e("../Mgr/GuideCore/GuideEnums"),b=e("../Mgr/GuideCore/GuideMgr"),S=cc._decorator,M=S.ccclass,C=S.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.diamondSpriteFrame=null,t.goldSpriteFrame=null,t.forkSpriteFrame=null,t.iconSprite=null,t.valueLabel=null,t}return i(t,e),t.prototype.onLoad=function(){this.panel=this.node.getChildByName("panel"),this.closeBtn=this.panel.getChildByName("closeBtn"),y.Tool.addClickEvent(this.closeBtn,this.close,this)},t.prototype.onEnable=function(){h.default.panelOpen_SmallToBig(this.panel),u.EventMgr.on(c.EventType.Common_Current_IsInGuide,this.checkIsInGuide,this)},t.prototype.init=function(e,t,n){switch(this.type=e,this.count=t,this.copyType=n,this.type){case"diamond":this.iconSprite.node.scale=1,this.iconSprite.spriteFrame=this.diamondSpriteFrame,this.valueLabel.string=t.toString();break;case"gold":this.iconSprite.node.scale=1,this.iconSprite.spriteFrame=this.goldSpriteFrame,this.valueLabel.string=a.default.format(t);break;case"fork":this.iconSprite.node.scale=1,this.iconSprite.spriteFrame=this.forkSpriteFrame,this.valueLabel.string=a.default.format(t),b.default.instance.checkSpecial(_.SpecialGuideEnum.TouchCaveRushReward)}m.default.instance.playBattleMusic(m.MusicState.vitory)},t.prototype.checkIsInGuide=function(){b.default.instance.isInGuide()&&"fork"!=this.type&&this.close()},t.prototype.close=function(){var e,t,n=this,o=cc.find("Canvas").getChildByName("panel3");switch(this.type){case"diamond":e=o.convertToNodeSpaceAR(g.default.instance.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),t=this.count,y.Tool.getItemEffect(p.default.instance.diamondPrefab,10,cc.Vec2.ZERO,e,o,function(){d.default.instance.addDiamond(t)});break;case"gold":e=o.convertToNodeSpaceAR(f.default.instance.node.convertToWorldSpaceAR(cc.Vec2.ZERO)),t=this.count,y.Tool.getItemEffect(p.default.instance.coinPrefab,10,cc.Vec2.ZERO,e,o,function(){d.default.instance.addCoin(t)});break;case"fork":e=new cc.Vec2(-400,1e3),t=this.count,y.Tool.getItemEffect(p.default.instance.forkPrefab,10,cc.Vec2.ZERO,e,o,function(){d.default.instance.addFork(t)}),b.default.instance.checkSpecial(_.SpecialGuideEnum.TouchHeroButton4)}h.default.panelClose_BigToSmall(this.panel,function(){n.node.destroy(),b.default.instance.isInGuide()||v.default.showCopySelectPanel(n.copyType)}),l.default.instance.currentMusicKey==s.SoundType.bgm_vitory&&(l.default.instance.currentMusicKey="",m.default.instance.playBattleMusic(m.default.instance.nowMusicState))},r([C(cc.SpriteFrame)],t.prototype,"diamondSpriteFrame",void 0),r([C(cc.SpriteFrame)],t.prototype,"goldSpriteFrame",void 0),r([C(cc.SpriteFrame)],t.prototype,"forkSpriteFrame",void 0),r([C(cc.Sprite)],t.prototype,"iconSprite",void 0),r([C(cc.Label)],t.prototype,"valueLabel",void 0),r([M],t)}(cc.Component);n.default=T,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/SoundMgr":"SoundMgr","../../Mgr/StorageMgr":"StorageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Res/comp/AwardShowComp":"AwardShowComp","../../Res/comp/CoinComp":"CoinComp","../../Res/comp/DiamondComp":"DiamondComp","../../Tool/Tool":"Tool","../Battle/BattleMgr":"BattleMgr","../Main_PanelOpen":"Main_PanelOpen","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr"}],Copy_SelectPanel:[function(e,t,n){"use strict";cc._RF.push(t,"adb83ALiE1OzJHOs2E0EN1G","Copy_SelectPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Config/GameData"),c=e("../../Mgr/EventMgr"),u=e("../../Mgr/LanguageMgr"),d=e("../../Mgr/StorageMgr"),h=e("../../Platform/Platform"),p=e("../../Res/ResPanelOpen"),f=e("../../Tool/Tool"),g=e("../Mgr/GuideCore/GuideEnums"),y=e("../Mgr/GuideCore/GuideMgr"),m=e("./Copy_BossRuhKeyComp"),v=e("./Copy_ClearRushKeyComp"),_=e("./Copy_GoldRushKeyComp"),b=e("./Copy_HelpBtn"),S=e("./Copy_HeroRushKeyComp"),M=cc._decorator,C=M.ccclass,T=M.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showSpriteFrame=[],t.awardTitleSpriteFrame=[],t.awradIconSpriteFrame=[],t.keySpriteFrame=[],t.showSprite=null,t.awardTitleSprite=null,t.awardIconSprite=null,t.keySprite=null,t.btnSub=null,t.btnAdd=null,t.btnSub2=null,t.btnAdd2=null,t.btnEnter=null,t.btnHelp=null,t.keyNode=null,t.rewardLabel=null,t.difficultyLabel=null,t.titleLabel=null,t}return i(t,e),t.prototype.onLoad=function(){this.panel=this.node.getChildByName("panel"),this.closeBtn=this.panel.getChildByName("closeBtn"),f.Tool.addClickEvent(this.closeBtn,this.close,this),f.Tool.addClickEvent(this.btnSub,this.btnSubClick,this),f.Tool.addClickEvent(this.btnAdd,this.btnAddClick,this),f.Tool.addClickEvent(this.btnEnter,this.enter,this)},t.prototype.init=function(e){switch(l.default.isTest&&console.log(e),this.nowType=e,e){case"bossRush":this.nowSelectDifficulty=d.default.instance.storageData.bossRushMaxDifficulty,this.keyNode.addComponent(m.default),this.keySprite.spriteFrame=this.keySpriteFrame[0],this.showSprite.spriteFrame=this.showSpriteFrame[0],this.awardTitleSprite.spriteFrame=this.awardTitleSpriteFrame[0],this.awardIconSprite.spriteFrame=this.awradIconSpriteFrame[0],this.titleLabel.string="\u9996\u9886\u526f\u672c",this.btnHelp.title="\u9996\u9886\u526f\u672c",this.btnHelp.word="desc_bossRush";break;case"goldRush":this.nowSelectDifficulty=d.default.instance.storageData.goldRushMaxDifficulty,this.keyNode.addComponent(_.default),this.keySprite.spriteFrame=this.keySpriteFrame[1],this.showSprite.spriteFrame=this.showSpriteFrame[1],this.awardTitleSprite.spriteFrame=this.awardTitleSpriteFrame[1],this.awardIconSprite.spriteFrame=this.awradIconSpriteFrame[1],this.titleLabel.string="\u91d1\u5e01\u526f\u672c",this.btnHelp.title="\u91d1\u5e01\u526f\u672c",this.btnHelp.word="desc_goldRush";break;case"clearRush":this.nowSelectDifficulty=d.default.instance.storageData.clearRushMaxDifficulty,this.keyNode.addComponent(v.default),this.keySprite.spriteFrame=this.keySpriteFrame[2],this.showSprite.spriteFrame=this.showSpriteFrame[2],this.awardTitleSprite.spriteFrame=this.awardTitleSpriteFrame[2],this.awardIconSprite.spriteFrame=this.awradIconSpriteFrame[2],this.titleLabel.string=u.default.Instance.getLanguage("clearRushTitle"),this.btnHelp.title="clearRushTitle",this.btnHelp.word="clearRushDesc";break;case"heroRush":this.nowSelectDifficulty=d.default.instance.storageData.heroRushMaxDifficulty,this.keyNode.addComponent(S.default),this.keySprite.spriteFrame=this.keySpriteFrame[3],this.showSprite.spriteFrame=this.showSpriteFrame[3],this.awardTitleSprite.spriteFrame=this.awardTitleSpriteFrame[3],this.awardIconSprite.spriteFrame=this.awradIconSpriteFrame[3],this.titleLabel.string=u.default.Instance.getLanguage("heroRushTitle"),this.btnHelp.title="heroRushTitle",this.btnHelp.word="heroRushDesc"}this.updatePanel()},t.prototype.onEnable=function(){p.default.panelOpen_TopToBottom(this.panel,function(){c.EventMgr.event(s.EventType.Common_TeachCopy_NextStep,3)}),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchBossEnterButton),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchCoinEnterButton),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchCaveRushEnterButton),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchEnterLegionRushButton)},t.prototype.btnSubClick=function(){this.nowSelectDifficulty--,this.nowSelectDifficulty<1&&(this.nowSelectDifficulty=1),this.updatePanel()},t.prototype.btnAddClick=function(){var e;switch(this.nowSelectDifficulty++,this.nowType){case"bossRush":e=d.default.instance.storageData.bossRushMaxDifficulty;break;case"goldRush":e=d.default.instance.storageData.goldRushMaxDifficulty;break;case"clearRush":e=d.default.instance.storageData.clearRushMaxDifficulty;break;case"heroRush":e=d.default.instance.storageData.heroRushMaxDifficulty}this.nowSelectDifficulty>e&&(this.nowSelectDifficulty=e),this.updatePanel()},t.prototype.updatePanel=function(){switch(this.nowType){case"bossRush":this.rewardLabel.string=a.default.format(l.default.bossRushRewardCal(this.nowSelectDifficulty.toString())),this.btnAdd.active=this.nowSelectDifficulty<d.default.instance.storageData.bossRushMaxDifficulty;break;case"goldRush":this.rewardLabel.string=a.default.format(l.default.goldRushRewardCal(this.nowSelectDifficulty.toString())),this.btnAdd.active=this.nowSelectDifficulty<d.default.instance.storageData.goldRushMaxDifficulty;break;case"clearRush":this.rewardLabel.string=a.default.format(l.default.clearRushRewardCal(this.nowSelectDifficulty.toString())),this.btnAdd.active=this.nowSelectDifficulty<d.default.instance.storageData.clearRushMaxDifficulty;break;case"heroRush":this.rewardLabel.string="\u6212\u6307Lv."+this.nowSelectDifficulty,this.btnAdd.active=this.nowSelectDifficulty<d.default.instance.storageData.heroRushMaxDifficulty}this.difficultyLabel.string=this.nowSelectDifficulty.toString(),this.btnSub.active=this.nowSelectDifficulty>1,this.btnSub2.active=!this.btnSub.active,this.btnAdd2.active=!this.btnAdd.active},t.prototype.enter=function(){var e=this;switch(this.nowType){case"bossRush":if(d.default.instance.storageData.bossRushKey<=0&&d.default.instance.storageData.bossRushKeyVideo<=0)return void h.default.instance.showToast("\u94a5\u5319\u4e0d\u8db3");if(d.default.instance.storageData.bossRushKey>0)return l.default.isTest&&console.log("\u8fdb\u5165BossRush"),c.EventMgr.event(s.EventType.Battle_Copy_BossRush_In,this.nowSelectDifficulty.toString()),c.EventMgr.event(s.EventType.Common_TeachCopy_NextStep,4),void this.close();d.default.instance.storageData.bossRushKeyVideo>0&&h.default.instance.showVideo(function(){l.default.isTest&&console.log("\u8fdb\u5165BossRush"),c.EventMgr.event(s.EventType.Battle_Copy_BossRush_In,e.nowSelectDifficulty.toString()),c.EventMgr.event(s.EventType.Common_TeachCopy_NextStep,4),e.close()},function(){});break;case"goldRush":if(d.default.instance.storageData.goldRushKey<=0&&d.default.instance.storageData.goldRushKeyVideo<=0)return void h.default.instance.showToast("\u94a5\u5319\u4e0d\u8db3");d.default.instance.storageData.goldRushKey>0?(l.default.isTest&&console.log("\u8fdb\u5165GoldRush"),c.EventMgr.event(s.EventType.Battle_Copy_GoldRush_In,this.nowSelectDifficulty.toString()),this.close()):d.default.instance.storageData.goldRushKeyVideo>0&&h.default.instance.showVideo(function(){l.default.isTest&&console.log("\u8fdb\u5165GoldRush"),c.EventMgr.event(s.EventType.Battle_Copy_GoldRush_In,e.nowSelectDifficulty.toString()),e.close()},function(){});break;case"clearRush":if(d.default.instance.storageData.clearRushKey<=0&&d.default.instance.storageData.clearRushKeyVideo<=0)return void h.default.instance.showToast("\u94a5\u5319\u4e0d\u8db3");d.default.instance.storageData.clearRushKey>0?(l.default.isTest&&console.log("\u8fdb\u5165ClearRush"),c.EventMgr.event(s.EventType.Battle_Copy_ClearRush_In,this.nowSelectDifficulty.toString()),this.close()):d.default.instance.storageData.clearRushKeyVideo>0&&h.default.instance.showVideo(function(){l.default.isTest&&console.log("\u8fdb\u5165ClearRush"),c.EventMgr.event(s.EventType.Battle_Copy_ClearRush_In,e.nowSelectDifficulty.toString()),e.close()},function(){});break;case"heroRush":if(d.default.instance.storageData.heroRushKey<=0&&d.default.instance.storageData.heroRushKeyVideo<=0)return void h.default.instance.showToast("\u94a5\u5319\u4e0d\u8db3");d.default.instance.storageData.heroRushKey>0?(l.default.isTest&&console.log("\u8fdb\u5165HeroRush"),c.EventMgr.event(s.EventType.Battle_Copy_HeroRush_HeroSelect,this.nowSelectDifficulty.toString()),this.close()):d.default.instance.storageData.heroRushKeyVideo>0&&h.default.instance.showVideo(function(){l.default.isTest&&console.log("\u8fdb\u5165HeroRush"),c.EventMgr.event(s.EventType.Battle_Copy_HeroRush_HeroSelect,e.nowSelectDifficulty.toString()),e.close()},function(){})}},t.prototype.close=function(){var e=this;p.default.panelClose_TopToBottom(this.panel,function(){e.node.destroy()})},r([T([cc.SpriteFrame])],t.prototype,"showSpriteFrame",void 0),r([T([cc.SpriteFrame])],t.prototype,"awardTitleSpriteFrame",void 0),r([T([cc.SpriteFrame])],t.prototype,"awradIconSpriteFrame",void 0),r([T([cc.SpriteFrame])],t.prototype,"keySpriteFrame",void 0),r([T(cc.Sprite)],t.prototype,"showSprite",void 0),r([T(cc.Sprite)],t.prototype,"awardTitleSprite",void 0),r([T(cc.Sprite)],t.prototype,"awardIconSprite",void 0),r([T(cc.Sprite)],t.prototype,"keySprite",void 0),r([T(cc.Node)],t.prototype,"btnSub",void 0),r([T(cc.Node)],t.prototype,"btnAdd",void 0),r([T(cc.Node)],t.prototype,"btnSub2",void 0),r([T(cc.Node)],t.prototype,"btnAdd2",void 0),r([T(cc.Node)],t.prototype,"btnEnter",void 0),r([T(b.default)],t.prototype,"btnHelp",void 0),r([T(cc.Node)],t.prototype,"keyNode",void 0),r([T(cc.Label)],t.prototype,"rewardLabel",void 0),r([T(cc.Label)],t.prototype,"difficultyLabel",void 0),r([T(cc.Label)],t.prototype,"titleLabel",void 0),r([C],t)}(cc.Component);n.default=k,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/StorageMgr":"StorageMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","./Copy_BossRuhKeyComp":"Copy_BossRuhKeyComp","./Copy_ClearRushKeyComp":"Copy_ClearRushKeyComp","./Copy_GoldRushKeyComp":"Copy_GoldRushKeyComp","./Copy_HelpBtn":"Copy_HelpBtn","./Copy_HeroRushKeyComp":"Copy_HeroRushKeyComp"}],CustomEventTarget:[function(e,t,n){"use strict";cc._RF.push(t,"e819fv/F9JCvLDrr3mCcjRE","CustomEventTarget"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this._events={}}return e.prototype.on=function(t,n,o,i){void 0===i&&(i=0),this._events[t]=this._events[t]||[];var r=this._events[t];r.push({callback:n,target:o,priority:i}),r.sort(function(e,t){return e.priority-t.priority});var a=e.findTargetInfo(o);a?-1==a.eventTargets.indexOf(this)&&a.eventTargets.push(this):e.s_targetsInfo.push({target:o,eventTargets:[this]})},e.prototype.onMutil=function(t,n,o,i){void 0===i&&(i=0);for(var r=0;r<t.length;r++){var a=t[r];this._events[a]=this._events[a]||[];var s=this._events[a];s.push({callback:n,target:o,priority:i}),s.sort(function(e,t){return e.priority-t.priority})}var l=e.findTargetInfo(o);l?-1==l.eventTargets.indexOf(this)&&l.eventTargets.push(this):e.s_targetsInfo.push({target:o,eventTargets:[this]})},e.prototype.targetOff=function(e){for(var t in this._events)for(var n=this._events[t],o=0;o<n.length;o++)n[o].target===e&&(n.splice(o,1),o--)},e.prototype.off=function(e,t,n){var o=this._events[e];if(o)for(var i=0;i<o.length;i++){var r=o[i];r.target===n&&t===r.callback&&(o.splice(i,1),i--)}},e.prototype.emit=function(e,t,n,o,i,r){var a=this._events[e];if(a)for(var s=0;s<a.length;s++){var l=a[s];l.callback.call(l.target,t,n,o,i,r)}},e.findTargetInfo=function(e){for(var t=0;t<this.s_targetsInfo.length;t++)if(this.s_targetsInfo[t].target===e)return this.s_targetsInfo[t]},e.removeTargetAllEventTargets=function(e){var t=this.findTargetInfo(e);if(t){for(var n=0;n<t.eventTargets.length;n++)t.eventTargets[n].targetOff(t.target);var o=this.s_targetsInfo.indexOf(t);this.s_targetsInfo.splice(o,1)}},e.removeAllEventTargets=function(){for(var e=0;e<this.s_targetsInfo.length;e++)for(var t=this.s_targetsInfo[e],n=0;n<t.eventTargets.length;n++)t.eventTargets[n].targetOff(t.target);this.s_targetsInfo=[]},e.s_targetsInfo=[],e}();n.default=o,cc._RF.pop()},{}],CustomProgress:[function(e,t,n){"use strict";cc._RF.push(t,"0fc06vAjFpMdKrF8s5Y/z1+","CustomProgress");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/LanguageMgr"),s=cc._decorator,l=s.ccclass,c=s.property,u=s.requireComponent,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progressText=null,t.barCompleteSpriteFrame=null,t._progress=null,t._progressNormalSpriteFrame=null,t}return i(t,e),t.prototype.onLoad=function(){this._progressNormalSpriteFrame=this.node.getComponent(cc.ProgressBar).barSprite.spriteFrame,this._progress=this.node.getComponentInChildren(cc.Sprite),this._progress.type=cc.Sprite.Type.FILLED},t.prototype.setProgress=function(e,t,n){void 0===n&&(n="MaxLevel"),this._progress.fillRange=e/t,this.progressText&&(this.progressText.string=e<t?e+"/"+t:a.default.Instance.getLanguage(n)),e>=t&&this.barCompleteSpriteFrame?this._progress.spriteFrame=this.barCompleteSpriteFrame:e<t&&this._progress.spriteFrame!=this._progressNormalSpriteFrame&&(this._progress.spriteFrame=this._progressNormalSpriteFrame)},t.prototype.setProgressWithoutText=function(e,t){this._progress.fillRange=e/t,e>=t&&this.barCompleteSpriteFrame?this._progress.spriteFrame=this.barCompleteSpriteFrame:e<t&&this._progress.spriteFrame!=this._progressNormalSpriteFrame&&(this._progress.spriteFrame=this._progressNormalSpriteFrame)},t.prototype.setProgressText=function(e){this.progressText&&(this.progressText.string=e)},r([c({type:cc.Label,displayName:"\u8fdb\u5ea6\u6761\u6587\u672c",tooltip:"\u8fdb\u5ea6\u6761\u6587\u672c",visible:!0})],t.prototype,"progressText",void 0),r([c({type:cc.SpriteFrame,displayName:"\u8fdb\u5ea6\u6761\u5b8c\u6210\u65f6\u7684\u56fe\u7247",tooltip:"\u8fdb\u5ea6\u6761\u5b8c\u6210\u65f6\u7684\u56fe\u7247",visible:!0})],t.prototype,"barCompleteSpriteFrame",void 0),r([l,u(cc.ProgressBar)],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Mgr/LanguageMgr":"LanguageMgr"}],DayUpdateLabel_Hour:[function(e,t,n){"use strict";cc._RF.push(t,"449bfsNZJJCEZV6d7G9VyCy","DayUpdateLabel_Hour");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/TimeMgr"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeLabel=null,t}return i(t,e),t.prototype.onEnable=function(){s.EventMgr.on(a.EventType.Common_TimeUpdate,this.updateHour,this),this.updateHour({time:l.default.instance.time,day:l.default.instance.day,hour:l.default.instance.hour,minute:l.default.instance.minute,second:l.default.instance.second})},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.updateHour=function(e){var t=24-e.hour;this.timeLabel.string=t>0?"\u5269\u4f59\u65f6\u95f4\uff1a"+t+"\u5c0f\u65f6":"\u5269\u4f59\u65f6\u95f4\uff1a\u4e0d\u8db3\u4e00\u4e2a\u5c0f\u65f6"},r([d(cc.Label)],t.prototype,"timeLabel",void 0),r([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/TimeMgr":"TimeMgr"}],DestroyAuto:[function(e,t,n){"use strict";cc._RF.push(t,"705e6ZsGjFIqoa1Rbk8dBEU","DestroyAuto");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=a.property,c=a.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.destroyTime=3,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.scheduleOnce(function(){e.node.destroy()},this.destroyTime)},r([l(cc.Float)],t.prototype,"destroyTime",void 0),r([s,c("Mod/DestroyAuto")],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],DiamondComp:[function(e,t,n){"use strict";cc._RF.push(t,"e0cfdfQSoBN+JSqeOFJH3yL","DiamondComp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/FlyItemMgr"),c=e("../../Mgr/StorageMgr"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}var n;return i(t,e),n=t,t.prototype.onEnable=function(){n.instance=this,this.showUpdate(),s.EventMgr.on(a.EventType.Common_Dimond_Update,this.showUpdate,this),s.EventMgr.on(a.GlobalEvent.AssetItemChange+a.ASSET_TYPE.Diamond,this.showUpdate,this),l.default.targetMap[a.ASSET_TYPE.Diamond]=this.node},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.showUpdate=function(){this.label.string=c.default.instance.storageData.diamond.toString()},r([h(cc.Label)],t.prototype,"label",void 0),n=r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/FlyItemMgr":"FlyItemMgr","../../Mgr/StorageMgr":"StorageMgr"}],Domain:[function(e,t,n){"use strict";cc._RF.push(t,"5b111i5PUBKS5NTafs4vbn5","Domain"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../utils/Event"),i=function(){function e(){this.onDataChangeEvent=new o.default}return e.prototype.setData=function(e,t){void 0===t&&(t=!0),this._data=e,t&&this.emitChange()},e.prototype.getData=function(){return this._data},e.prototype.addListener=function(e,t){this.onDataChangeEvent.addListener(e,t)},e.prototype.removeListener=function(e,t){this.onDataChangeEvent.removeListener(e,t)},e.prototype.emitChange=function(){this.onDataChangeEvent.invoke(this)},e.prototype.removeAllListener=function(){this.onDataChangeEvent.removeAllListener()},e}();n.default=i,cc._RF.pop()},{"../utils/Event":"Event"}],EnumTypes:[function(e,t,n){"use strict";cc._RF.push(t,"1e8fcdb4r9AApELFQt1s2p0","EnumTypes"),Object.defineProperty(n,"__esModule",{value:!0}),n.UnlockType=n.GlobalEvent=n.ToggleShopType=n.SHOP_GOODS_TYPE=n.SHOP_TRIGGER_ID=n.SHOP_TYPE=n.UNLOCKSYS_ID=n.UnlockSysType=n.PROP_PERCENT_TYPE=n.COLLECTION_TYPE=n.SpriteState=n.AD_TYPE=n.ITEM_TYPE=n.WeekRewardState=n.ASSET_TYPE=n.CYCLE_TYPE=n.QUEST_STATUS=n.QUEST_VALUE_UPDATE_TYPE=n.QUEST_TYPE=n.QUEST_ACTIVE_ID=n.eShopSummonPrice=n.eSUMMONTYPE=n.ePartSlot=n.eModeStatus=n.PROP_TYPE=n.MineRewardType=n.MineType=n.eEquipDomainStatus=n.eSkillSlot=n.StrengthenType=n.EquipmentType=n.MonsterType=n.MainPage=n.MainUIState=n.SceneName=n.BundleName=n.SoundType=n.EventType=void 0,function(e){e.Platform_Hide_Do="Platform_Hide_Do",e.Platform_Wake_Do="Platform_Wake_Do",e.Language_Update="Language_Update",e.Common_TimeUpdate="Common_TimeUpdate",e.Common_GuideHand_Destroy="Common_GuideHand_Destroy",e.Common_Coin_Update="Common_Coin_Update",e.Common_Dimond_Update="Common_Dimond_Update",e.Common_Coin_Add="Common_Coin_Add",e.Common_Diamond_Add="Common_Diamond_Add",e.Common_Pause_Event="Common_Pause_Event",e.Common_Resume_Event="Common_Resume_Event",e.Common_BossRushKey_Update="Common_BossRushKey_Update",e.Common_GoldRushKey_Update="Common_GoldRushKey_Update",e.Common_ClearRushKey_Update="Common_ClearRushKey_Update",e.Common_HeroRushKey_Update="Common_HeroRushKey_Update",e.Common_UnlockType_Update="Common_UnlockType_Update",e.Common_Quest_Complete="Common_Quest_Complete",e.Common_TeachSummon_NextStep="Common_TeachSummon_NextStep",e.Common_TeachGear_NextStep="Common_TeachGear_NextStep",e.Common_TeachSkill_NextStep="Common_TeachSkill_NextStep",e.Common_TeachPartner_NextStep="Common_TeachPartner_NextStep",e.Common_TeachCopy_NextStep="Common_TeachCopy_NextStep",e.Common_Current_IsInGuide="Common_Current_IsInGuide",e.Battle_SpeedUp_Switch="Battle_SpeedUp_Switch",e.Battle_SpeedNormal_Switch="Battle_SpeedNormal_Switch",e.Battle_Hero_Dead="Battle_Hero_Dead",e.Battle_Monster_Dead="Battle_Monster_Dead",e.Battle_Hero_Prop_Update="Battle_Hero_Prop_Update",e.Battle_Hero_Prop_Upgrade="Battle_Hero_Prop_Upgrade",e.Battle_Scene_MoveSpeed_Update="Battle_Scene_MoveSpeed_Update",e.Battle_Go_Boss="Battle_Go_Boss",e.Battle_Update_Stage="Battle_Update_Stage",e.Battle_State_Switch="Battle_State_Switch",e.Battle_Round_Update="Battle_Round_Update",e.Battle_Boss_Time_Update="Battle_Boss_Time_Update",e.Battle_Skill_Use="Battle_Skill_Use",e.Battle_SkillState_Update="Battle_SkillState_Update",e.Battle_Skill_SwitchAutoSkill="Battle_Skill_SwitchAutoSkill",e.Battle_Hero_bulletRandom="Battle_Hero_bulletToTarget",e.Battle_Copy_BossRush_In="Battle_Copy_BossRush_In",e.Battle_Copy_GoldRush_In="Battle_Copy_GoldRush_In",e.Battle_Copy_ClearRush_In="Battle_Copy_ClearRush_In",e.Battle_Copy_HeroRush_HeroSelect="Battle_Copy_HeroRush_HeroSelect",e.Battle_Copy_HeroRush_Select="Battle_Copy_HeroRush_Select",e.Battle_Copy_HeroRush_In="Battle_Copy_HeroRush_In",e.Battle_Restart_Normal="Battle_Restart_Normal",e.Battle_CopyInfo_Update="Battle_CopyInfo_Update",e.Battle_Skill_26103_End="Battle_Skill_26103_End",e.Battle_Partner_Reload="Battle_Partner_Reload",e.Battle_World_Shake_Mini="Battle_World_Shake_Mini",e.Battle_World_Shake_Large="Battle_World_Shake_Large",e.Battle_Partner_Attack="Battle_Partner_Attack",e.Battle_HeroCopy_SelectHero="Battle_HeroCopy_SelectHero",e.Battle_HeroRush_HeroDead="Battle_HeroRush_HeroDead",e.Props_GearChange_Event="Props_GearChange_Event",e.Props_SkillChange_Event="Props_SkillChange_Event",e.Props_PartnerChange_Event="Props_PartnerChange_Event",e.Main_UI_UpdateState="Main_UI_UpdateState",e.Main_UI_CombatUpdate="Main_UI_CombatUpdate",e.Main_UI_QuestInitComplete="Main_UI_QuestInitComplete",e.Main_UI_RouletteUpdate="Main_UI_RouletteUpdate",e.Main_UI_Gear_ChangeWeapon="Main_UI_Gear_ChangeWeapon",e.Main_UI_Gear_ChangeArmor="Main_UI_Gear_ChangeArmor",e.Main_UI_Gear_EquipmentChange="Main_UI_Gear_EquipmentChange",e.Main_UI_Gear_EquipmentStrengthen="Main_UI_Gear_EquipmentStrengthen",e.Main_UI_Gear_EquipmentStrengthens="Main_UI_Gear_EquipmentStrengthens",e.Main_UI_Gear_EquipmentBestRedPoint="Main_UI_Gear_EquipmentBestRedPoint",e.Main_UI_Skill_SkillItemChange="Main_UI_Skill_SkillItemChange",e.Main_UI_Skill_SkillItemLevelUp="Main_UI_Skill_SkillItemLevelUp",e.Main_UI_Skill_SkillItemAllLevelUp="Main_UI_Skill_SkillItemAllLevelUp",e.Main_UI_Skill_SkillModeChange="Main_UI_Skill_SkillModeChange",e.Main_UI_Skill_SkillEquipChange="Main_UI_Skill_SkillEuipChange",e.Main_UI_Skill_SkillAdd="Main_UI_Skill_SkillAdd",e.Main_UI_Partner_PartnerItemChange="Main_UI_Partner_PartnerItemChange",e.Main_UI_Partner_PartnerItemLevelUp="Main_UI_Partner_PartnerItemLevelUp",e.Main_UI_Partner_PartnerItemAllLevelUp="Main_UI_Partner_PartnerItemAllLevelUp",e.Main_UI_Partner_PartnerEquipChange="Main_UI_Partner_PartnerEquipChange",e.Main_UI_Partner_PartnerModeChange="Main_UI_Partner_PartnerModeChange",e.Main_UI_Shop_SummonExpChange="Main_UI_Shop_SummonExpChange",e.Main_UI_Shop_SummonLevelChange="Main_UI_Shop_SummonLevelChange",e.Main_UI_Shop_Summon="Main_UI_Shop_Summon",e.Main_UI_Shop_JumpToSummon="Main_UI_Shop_JumpToSummon",e.QuestCommit="QuestCommit",e.QuestBatchCommit="QuestBatchCommit",e.Main_UI_Hero_CloseSelectView="Main_UI_Hero_CloseSelectView",e.Main_UI_Relic_CalProp="Main_UI_Relic_CalProp",e.Main_UI_Relic_Update="Main_UI_Relic_Update",e.Main_UI_Collection_CalProp="Main_UI_Collection_CalProp",e.TestForAddGear="TestForAddGear",e.TestForAddSkill="TestForAddSkill",e.TestForAddPartner="TestForAddPartner",e.Mine_Cube_Update="Mine_Cube_Update",e.Mine_Shovel_Update="Mine_Shovel_Update",e.Mine_Boom_Update="Mine_Boom_Update",e.Mine_Drill_Update="Mine_Drill_Update",e.Mine_DrillAdCount_Update="Mine_DrillAdCount_Update",e.Mine_BoomAdCount_Update="Mine_BoomAdCount_Update",e.Mine_ShovelAdCount_Update="Mine_ShovelAdCount_Update",e.Research_Buff_Update="Research_Buff_Update",e.Mine_Depth_Move_Complete="Mine_Depth_Move_Complete",e.Research_RedPoint="Research_RedPoint",e.Main_UI_SevenChallenge_Unlock="Main_UI_SevenChallenge_Unlock",e.Common_RouletteCount_Update="Common_RouletteCount_Update",e.Main_UI_Mail_RedPoint="Main_UI_Mail_RedPoint"}(n.EventType||(n.EventType={})),function(e){e.bgm_fail="bgm_fail",e.bgm_vitory="bgm_vitory",e.bgm_boss="bgm_boss",e.bgm_copy="bgm_copy",e.bgm_login="bgm_login",e.bgm_main="bgm_main",e.button="button_common1",e.GearLevelUp="levelup_gear"}(n.SoundType||(n.SoundType={})),function(e){e.Loading="Bundle1_Loading",e.Res="Bundle2_Res",e.Main="Bundle3_Main",e.Scene_Black_1="Scene_black_1",e.Scene_Castle_1="Scene_castle_1",e.Scene_Gold_1="Scene_gold_1",e.Scene_Grass_1="Scene_grass_1",e.Scene_Sand_1="Scene_sand_1",e.Scene_cunzhuang="Scene_cunzhuang",e.Mine="Bundle5_Mine"}(n.BundleName||(n.BundleName={})),function(e){e.Loading="Loading",e.Main="Main",e.Mine="Mine"}(n.SceneName||(n.SceneName={})),function(e){e.UserProp="userProp",e.Role="role",e.Partner="partner",e.Copy="copy",e.Mine="mine",e.Shop="shop",e.InCopy="inCopy",e.InHeroCopy="inHeroCopy"}(n.MainUIState||(n.MainUIState={})),function(e){e[e.Role=0]="Role",e[e.Partner=1]="Partner",e[e.Copy=2]="Copy",e[e.Mine=3]="Mine",e[e.Shop=4]="Shop"}(n.MainPage||(n.MainPage={})),(n.MonsterType||(n.MonsterType={})).monster_1="monster_1",function(e){e[e.Weapon=1]="Weapon",e[e.Armor=2]="Armor",e[e.Ring=3]="Ring",e[e.Toy=4]="Toy"}(n.EquipmentType||(n.EquipmentType={})),function(e){e[e.Gear=1]="Gear",e[e.Skill=2]="Skill",e[e.Partner=3]="Partner"}(n.StrengthenType||(n.StrengthenType={})),function(e){e[e.Skill1=0]="Skill1",e[e.Skill2=1]="Skill2",e[e.Skill3=2]="Skill3",e[e.Skill4=3]="Skill4",e[e.Skill5=4]="Skill5",e[e.Skill6=5]="Skill6",e[e.Max=6]="Max"}(n.eSkillSlot||(n.eSkillSlot={})),function(e){e[e.Full=0]="Full",e[e.Success=1]="Success"}(n.eEquipDomainStatus||(n.eEquipDomainStatus={})),function(e){e[e.Empty=0]="Empty",e[e.Brick=1]="Brick",e[e.Rock=2]="Rock",e[e.Crack=3]="Crack"}(n.MineType||(n.MineType={})),function(e){e[e.None=0]="None",e[e.SilverStone=1]="SilverStone",e[e.BrownStone=2]="BrownStone",e[e.Hammer=3]="Hammer",e[e.Box=4]="Box",e[e.Diamond=5]="Diamond",e[e.Crystal=6]="Crystal",e[e.Drill=7]="Drill",e[e.Bomb=8]="Bomb"}(n.MineRewardType||(n.MineRewardType={})),function(e){e[e.NONE=0]="NONE",e[e.ATK=1]="ATK",e[e.HP=2]="HP",e[e.HPRecovery=3]="HPRecovery",e[e.ASPD=4]="ASPD",e[e.CriticalHitChance=5]="CriticalHitChance",e[e.CriticalHitDamage=6]="CriticalHitDamage",e[e.DoubleShot=7]="DoubleShot",e[e.TripleShot=8]="TripleShot",e[e.MoveSpeed=9]="MoveSpeed",e[e.CoinAdd=10]="CoinAdd",e[e.SkillHurtAdd=11]="SkillHurtAdd",e[e.PartnerAspd=12]="PartnerAspd",e[e.BossDamageAmount=13]="BossDamageAmount",e[e.SkillCd=14]="SkillCd",e[e.BlessCoins=15]="BlessCoins",e[e.BlessAtk=16]="BlessAtk",e[e.BlessSkill=17]="BlessSkill",e[e.HeroExpAdd=18]="HeroExpAdd",e[e.NormalAtk=19]="NormalAtk",e[e.HPRecoveryRate=20]="HPRecoveryRate",e[e.PartnerAspdRelic2=21]="PartnerAspdRelic2",e[e.PartnerAtkRelic3=22]="PartnerAtkRelic3",e[e.PartnerAtk=23]="PartnerAtk",e[e.PartnerAspdRelic12=24]="PartnerAspdRelic12",e[e.BaseAtk=50]="BaseAtk",e[e.BaseHP=51]="BaseHP",e[e.AddAtk=52]="AddAtk",e[e.PickaxSpeed=100]="PickaxSpeed",e[e.PickaxMax=101]="PickaxMax",e[e.CubeAdd=102]="CubeAdd",e[e.ResearchSpeedAdd=103]="ResearchSpeedAdd",e[e.BuffAspd=201]="BuffAspd",e[e.EnemyDamagePercent=1100]="EnemyDamagePercent",e[e.Dodge=1101]="Dodge"}(n.PROP_TYPE||(n.PROP_TYPE={})),function(e){e[e.Normal=1]="Normal",e[e.SelectSlot=2]="SelectSlot"}(n.eModeStatus||(n.eModeStatus={})),function(e){e[e.Slot1=0]="Slot1",e[e.Slot2=1]="Slot2",e[e.Slot3=2]="Slot3",e[e.Slot4=3]="Slot4",e[e.Slot5=4]="Slot5",e[e.Max=5]="Max"}(n.ePartSlot||(n.ePartSlot={})),function(e){e[e.Skill=1]="Skill",e[e.Partner=2]="Partner",e[e.Gear=3]="Gear",e[e.Weapon=4]="Weapon",e[e.Armor=5]="Armor"}(n.eSUMMONTYPE||(n.eSUMMONTYPE={})),function(e){e[e.SUMMON_PRICE_NORMAL=500]="SUMMON_PRICE_NORMAL",e[e.SUMMON_PRICE_FULL=1500]="SUMMON_PRICE_FULL"}(n.eShopSummonPrice||(n.eShopSummonPrice={})),function(e){e[e.DefeatEnemy=1]="DefeatEnemy",e[e.ClearStage=2]="ClearStage",e[e.ClearBoss=3]="ClearBoss",e[e.ClearGold=4]="ClearGold",e[e.Summon=5]="Summon",e[e.SummonGear=6]="SummonGear",e[e.SummonSkill=7]="SummonSkill",e[e.SummonPartner=8]="SummonPartner",e[e.WatchAds=9]="WatchAds",e[e.DailyQuest=10]="DailyQuest",e[e.EnhanceAtk=11]="EnhanceAtk",e[e.EnhanceHp=12]="EnhanceHp",e[e.EnhanceHPRecovery=13]="EnhanceHPRecovery",e[e.EnhanceAspd=14]="EnhanceAspd",e[e.EnhanceCriticalHitChance=15]="EnhanceCriticalHitChance",e[e.EnhanceCriticalHitDamage=16]="EnhanceCriticalHitDamage",e[e.EnhanceDouble=17]="EnhanceDouble",e[e.EnhanceTriple=18]="EnhanceTriple",e[e.EnhanceSkill=19]="EnhanceSkill",e[e.EnhanceGear=20]="EnhanceGear",e[e.EnhancePartner=21]="EnhancePartner",e[e.MineDig=22]="MineDig",e[e.MineResearch=23]="MineResearch",e[e.UserLogin=24]="UserLogin",e[e.ObtainReceive=25]="ObtainReceive",e[e.ClearVillageRaid=26]="ClearVillageRaid",e[e.ClearDwarvenKing=27]="ClearDwarvenKing",e[e.MineUseDrill=28]="MineUseDrill",e[e.MineUseBomb=29]="MineUseBomb",e[e.MineUsePickax=30]="MineUsePickax",e[e.ReceiveChest=31]="ReceiveChest",e[e.ReceiveBless=32]="ReceiveBless",e[e.HeroLvup=33]="HeroLvup",e[e.ClearClearRush=34]="ClearClearRush",e[e.GetRelic=35]="GetRelic",e[e.EnhanceRelic=36]="EnhanceRelic",e[e.ClearHeroRush=37]="ClearHeroRush"}(n.QUEST_ACTIVE_ID||(n.QUEST_ACTIVE_ID={})),function(e){e[e.Daily=1]="Daily",e[e.Chain=2]="Chain",e[e.Pass=3]="Pass",e[e.SevenChallenge=4]="SevenChallenge"}(n.QUEST_TYPE||(n.QUEST_TYPE={})),function(e){e[e.Count=1]="Count",e[e.Set=2]="Set"}(n.QUEST_VALUE_UPDATE_TYPE||(n.QUEST_VALUE_UPDATE_TYPE={})),function(e){e[e.Close=0]="Close",e[e.Job=1]="Job",e[e.InAD=2]="InAD",e[e.Complete=3]="Complete",e[e.Finish=4]="Finish"}(n.QUEST_STATUS||(n.QUEST_STATUS={})),function(e){e[e.None=0]="None",e[e.Daily=1]="Daily",e[e.Weekly=2]="Weekly",e[e.Month=3]="Month",e[e.Forever=4]="Forever"}(n.CYCLE_TYPE||(n.CYCLE_TYPE={})),function(e){e[e.Cash=0]="Cash",e[e.Coin=1]="Coin",e[e.Diamond=2]="Diamond",e[e.SlimeExp=3]="SlimeExp",e[e.BossRushKey=4]="BossRushKey",e[e.GoldRushKey=5]="GoldRushKey",e[e.CaveRushKey=6]="CaveRushKey",e[e.DwarvenKing=7]="DwarvenKing",e[e.HeroLegion=8]="HeroLegion",e[e.Sp=10]="Sp",e[e.Tailt=11]="Tailt",e[e.Fork=12]="Fork",e[e.RingChip=20]="RingChip",e[e.Ad=99]="Ad",e[e.MineCube=100]="MineCube",e[e.MinePickax=101]="MinePickax",e[e.MineDrill=102]="MineDrill",e[e.MineBomb=103]="MineBomb",e[e.PassExp=1e3]="PassExp",e[e.SummonBox=2e3]="SummonBox",e[e.SummonBoxBig=2001]="SummonBoxBig",e[e.SummonBoxSuper=2002]="SummonBoxSuper",e[e.Equip=10002]="Equip",e[e.Skill=10003]="Skill",e[e.Hero=10004]="Hero",e[e.Partner=10005]="Partner"}(n.ASSET_TYPE||(n.ASSET_TYPE={})),function(e){e[e.NotComplete=0]="NotComplete",e[e.Complete=1]="Complete",e[e.Received=2]="Received"}(n.WeekRewardState||(n.WeekRewardState={})),function(e){e[e.Asset=1]="Asset",e[e.Gear=2]="Gear",e[e.Skill=3]="Skill",e[e.Hero=4]="Hero",e[e.Partner=5]="Partner"}(n.ITEM_TYPE||(n.ITEM_TYPE={})),function(e){e[e.Pickax=0]="Pickax",e[e.Drill=1]="Drill",e[e.Bomb=2]="Bomb",e[e.Tailt=3]="Tailt",e[e.Exp=4]="Exp"}(n.AD_TYPE||(n.AD_TYPE={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.GRAY=1]="GRAY"}(n.SpriteState||(n.SpriteState={})),function(e){e[e.Gear=1]="Gear",e[e.Skill=2]="Skill",e[e.Partner=3]="Partner",e[e.None=4]="None"}(n.COLLECTION_TYPE||(n.COLLECTION_TYPE={})),function(e){e[e.Percent=1]="Percent",e[e.Value=2]="Value"}(n.PROP_PERCENT_TYPE||(n.PROP_PERCENT_TYPE={})),function(e){e[e.None=0]="None",e[e.Level=1]="Level",e[e.MineDeep=2]="MineDeep",e[e.Task=3]="Task",e[e.DoubleShot=4]="DoubleShot",e[e.TripleShot=5]="TripleShot"}(n.UnlockSysType||(n.UnlockSysType={})),function(e){e[e.None=0]="None",e[e.Mine=101]="Mine",e[e.BossRush=201]="BossRush",e[e.GoldRush=202]="GoldRush",e[e.Relices=203]="Relices",e[e.Trait=204]="Trait",e[e.HeroRush=205]="HeroRush",e[e.Shop=300]="Shop",e[e.Equip=301]="Equip",e[e.Partner=401]="Partner",e[e.PartnerCol2=402]="PartnerCol2",e[e.PartnerCol3=403]="PartnerCol3",e[e.PartnerCol4=404]="PartnerCol4",e[e.PartnerCol5=405]="PartnerCol5",e[e.Skill=501]="Skill",e[e.SkillCol2=502]="SkillCol2",e[e.SkillCol3=503]="SkillCol3",e[e.SkillCol4=504]="SkillCol4",e[e.SkillCol5=505]="SkillCol5",e[e.SkillCol6=506]="SkillCol6",e[e.Hero=601]="Hero",e[e.Mastery=602]="Mastery",e[e.Atlas=701]="Atlas",e[e.Wheel=702]="Wheel",e[e.Sign=703]="Sign",e[e.Pass=704]="Pass",e[e.Task=705]="Task",e[e.Hangup=706]="Hangup",e[e.Bless=707]="Bless",e[e.FlyChest=708]="FlyChest",e[e.DoubleShotAtribute=801]="DoubleShotAtribute",e[e.TripleShotAtribute=802]="TripleShotAtribute",e[e.SevenChallenge=901]="SevenChallenge"}(n.UNLOCKSYS_ID||(n.UNLOCKSYS_ID={})),function(e){e[e.Pass=0]="Pass",e[e.Package=1]="Package",e[e.Daily=2]="Daily",e[e.Weekly=3]="Weekly",e[e.Currency=4]="Currency"}(n.SHOP_TYPE||(n.SHOP_TYPE={})),function(e){e[e.None=0]="None",e[e.Level=1]="Level",e[e.Login=2]="Login",e[e.StartDate=3]="StartDate",e[e.CloseDate=4]="CloseDate",e[e.PayLower=5]="PayLower",e[e.PayUpper=6]="PayUpper",e[e.Sys=7]="Sys",e[e.Hero=8]="Hero",e[e.Pass=9]="Pass",e[e.Interval=10]="Interval"}(n.SHOP_TRIGGER_ID||(n.SHOP_TRIGGER_ID={})),function(e){e[e.Asset=1]="Asset",e[e.Gear=2]="Gear",e[e.Skill=3]="Skill",e[e.Partner=4]="Partner",e[e.Slime=5]="Slime",e[e.RmAd=6]="RmAd",e[e.AutoBlessing=7]="AutoBlessing"}(n.SHOP_GOODS_TYPE||(n.SHOP_GOODS_TYPE={})),function(e){e[e.Summon=0]="Summon",e[e.Package=1]="Package",e[e.LimitedShop=2]="LimitedShop",e[e.Currency=3]="Currency"}(n.ToggleShopType||(n.ToggleShopType={})),n.GlobalEvent={GamePause:"game-pause",GameResume:"game-resume",TouchScreen:"global-touch-screen",LaunchSceneBefore:"launch-scene-before",CloseAllView:"close-all-view",WorldInitComplete:"game-world-init-complete",Restart:"restart",LoginSuccess:"login-success",LoginFailed:"login-failed",LoginOut:"logout",EnterGame:"enter-game",ChangeGameMode:"change-game-mode",RedDotRefresh:"red-dot-refresh",AssetItemChange:"asset-item-change",ChangeLevelWave:"change-level-wave",ChangeLevelToBoss:"change-level-to-boss",ChangeLevel:"change-level",RestartLevel:"restart-level",SwitchGameMode:"switch-gameMode",BossRushLevelChangeWave:"boss-rush-level-changewave",CaveRushLevelChangeWave:"cave-rush-level-changewave",ChangeMenu:"change-menu",HeroHpChange:"user-hero-hp-change",HeroMaxHpChange:"user-hero-max-hp-change",HeroExpChange:"user-hero-exp-change",HeroUnlockProp:"user-hero-unlock-prop",HeroUnlockSkill:"user-hero-unlock-skill",HeroLevelChange:"user-hero-level-change",HeroTotalLevelChange:"user-hero-total-level-change",HeroCriticalDamageChange:"user-hero-critical-damage-change",HeroCriticalChanceChange:"user-hero-critical-chance-change",UserPropValueChange:"user-prop-change",PropChange:"prop-change",PropValueChange:"prop-value-change",RouletteSendReward:"roulette-send-reward",ChangeBattleHero:"user-change-battle-hero",HeroUnlock:"user-hero-unlock",ChangeHeroSkill:"user-change-hero-skill",EquipWeaponChange:"user-equip-weapon-change",EquipArmorChange:"user-equip-armor-change",EquipRingChange:"user-equip-ring-change",GearOwnedChange:"user-equip-weapon-own-change",GearLevelUp:"user-gear-level-up",GearLevelUpAll:"user-gear-level-up-all",SummonSuccess:"summon-success",SummonExpChange:"summon-exp-change",SummonLevelChange:"summon-level-change",PartnerOwnedChange:"partner-owned-change",PartnerLevelUp:"partner-level-up",PartnerLevelUpAll:"partner-level-up-all",PartnerEquipedChange:"partner-equiped-change",PartnerOpenUIEquipSelectSlot:"partner-open-ui-equip-select-slot",SkillOwnedChange:"skill-owned-change",SkillLevelUp:"skill-level-up",SkillLevelUpAll:"skill-level-up-all",SkillEquipedChange:"skill-equiped-change",SkillOpenUIEquipSelectSlot:"skill-open-ui-equip-select-slot",ReleaseSkill:"skill-release",BossLevelUnlockDifficulty:"boss-level-unlock-new-difficulty",GoldRushBossHurt:"gold-rush-boss-hurt",MineResearchStartUpgrading:"mine-research-upgrading",MineResearchDone:"mine-research-done",MineResearchComplete:"mine-research-complete",MineResearchUnlock:"mine-research-unlock",QuestCommit:"quest-commit",QuestBatchCommit:"quest-batch-commit",ChainQuestStatusChange:"chain-quest-progress-change",ChainQuestProgressChange:"chain-quest-progress-change",MasteryUnlock:"mastery-unlock",MasteryLvChange:"mastery-lvup",DailyQuestStatusChange:"daily-quest-status-change",DailyQuestComplete:"daily-quest-complete",DailyQuestProgressChange:"daily-quest-progress-change",DailyQuestReset:"quest-daily-reset",PassQuestReset:"quest-pass-reset",PassActivePremium:"pass-active-premium",PassReceivedPremium:"pass-received-premium",PassReceivedNormal:"pass-received-normal",PassReceivedExtral:"pass-received-extral",PassQuestProgress:"pass-quest-progress-change",PassQuestComplete:"pass-quest-complete",PassQuestReceived:"pass-quest-received",PassExpChange:"pass-exp-change",PassLevelChange:"pass-level-change",PassExtralExpChange:"pass-extra-exp-change",RouletteCountChange:"roulette-count-change",CollectionUnlock:"collection-unlock",CollectionLvup:"collection-lvup",ObtainRewardUpdate:"obtain-reward-reward-change",ObtainIdleReceived:"obtain-idle-reward-received",ObtainBonusReceived:"obtain-bonus-reward-received",ShopPurchaseSuccess:"shop-purchase-success",CloseWeekView:"close-weekView",BlessTakeEffect:"bless-take-effect",UnlockValueChange:"unlock-change",UnlockMine:"unlock-mine",UnlockBossRush:"unlock-boss",UnlockGoldRush:"unlock-goldrush",UnlockDwarvenKingRush:"unlock-dwarvenKing",UnlockDrop:"unlock-drop",UnlockFeatures:"unlock-features",UnlockHeroRush:"unlock-herorush",UnlockShop:"unlock-shop",UnlockEquip:"unlock-equip",UnlockPartner:"unlock-partner",UnlockPartnerCol2:"unlock-partnercol2",UnlockPartnerCol3:"unlock-partnercol3",UnlockPartnerCol4:"unlock-partnercol4",UnlockPartnerCol5:"unlock-partnercol5",UnlockSkill:"unlock-skill",UnlockSkillCol2:"unlock-skillcol2",UnlockSkillCol3:"unlock-skillcol3",UnlockSkillCol4:"unlock-skillcol4",UnlockSkillCol5:"unlock-skillcol5",UnlockSkillCol6:"unlock-skillcol6",UnlockHero:"unlock-hero",UnlockTrait:"unlock-trait",UnlockMastery:"unlock-mastery",UnlockRelices:"unlock-relices",UnlockAtlas:"unlock-atlas",UnlockWheel:"unlock-wheel",UnlockSign:"unlock-sign",UnlockPass:"unlock-pass",UnlockTask:"unlock-task",UnlockHungup:"unlock-huangup",UnlockBless:"unlock-bless",UnlockFlyChest:"UnlockFlyChest",UnlockDoubleShotAtribute:"unlock-doubleshot-atribute",UnlockTripleShotAtribute:"unlock-tripleshot-atribute",UnlockSevenChallenge:"unlock-seven-chanllenge",ShowPageView:"show-page-view",ClosePageView:"close-page-view",EquipGearItem:"equip-gear-item",GuideScrollToFirst:"guide-scroll-to-first",DwarvenKingBossHurt:"dwarvenking-boss-hurt",AtkChange:"warvenking-atkchange",GuideScrollToLast:"guide-scroll-to-last",CloseMineView:"close-mine-view",CloseAllMineView:"close-all-mine-view",ShopWeekRefresh:"shop-week-refresh",ShopDailyefresh:"shop-daily-refresh",TraitSlotLockStatusChange:"trait-slot-lock-status-change",DwarvenkingComplete:"dwarvenking-complete",BattleStart:"battle-start",BattleComplete:"battle-complete",ShowBattleChest:"show-battle-chest",BattleChestObtained:"battle-chest-obtained",BossGuide:"boos-guide",BossTip:"boos-tip",SevenChallengeQuestStatusChange:"sevenChallenge-quest-status-change",SevenChallengeQuestProgressChange:"sevenChallenge-quest-progress-change",SevenChallengeQuestProgress:"seven-Challenge-quest-progress-change",SevenChallengeChangeTab:"seven-Challenge-change-tab",FreshMail:"fresh-mail",ShowMask:"show-mask",GuideTextShow:"guide-text-show",RelicEquipedChange:"relic-equiped-change",RelicLvup:"relic-lvup",FreshRingInfoView:"fresh-ring-info-view",FreshRingView:"fresh-ring-view",RemoveRing:"remove-ring",EquipRing:"equip-ring",SelectRing:"select-ring",UpdateSelectView:"update-select-view",ChangeMemberToLeader:"ChangeMemberToLeader"},function(e){e[e.shop=0]="shop",e[e.summonGear=1]="summonGear",e[e.skill=3]="skill",e[e.skillSlot2=4]="skillSlot2",e[e.skillSlot3=5]="skillSlot3",e[e.skillSlot4=6]="skillSlot4",e[e.skillSlot5=7]="skillSlot5",e[e.skillSlot6=8]="skillSlot6",e[e.partner=10]="partner",e[e.partnerSlot2=11]="partnerSlot2",e[e.partnerSlot3=12]="partnerSlot3",e[e.partnerSlot4=13]="partnerSlot4",e[e.partnerSlot5=14]="partnerSlot5",e[e.partnerSlot6=15]="partnerSlot6",e[e.dailyQuest=16]="dailyQuest",e[e.copy=17]="copy",e[e.bossRush=18]="bossRush",e[e.goldRush=19]="goldRush",e[e.mine=20]="mine",e[e.sign=21]="sign",e[e.roulette=22]="roulette",e[e.collection=23]="collection",e[e.clearRush=24]="clearRush",e[e.Hero=26]="Hero",e[e.Mastery=27]="Mastery",e[e.SevenChallenge=28]="SevenChallenge",e[e.HeroRush=29]="HeroRush",e[e.bless=30]="bless",e[e.placeChest=31]="placeChest",e[e.Trait=32]="Trait",e[e.Pass=33]="Pass",e[e.FlyChest=34]="FlyChest",e[e.DoubleShotAtribute=35]="DoubleShotAtribute",e[e.TripleShotAtribute=36]="TripleShotAtribute",e[e.None=999]="None"}(n.UnlockType||(n.UnlockType={})),cc._RF.pop()},{}],EquipmentMgr:[function(e,t,n){"use strict";cc._RF.push(t,"6b11dJN6bJLEJ1qUqF+Ibea","EquipmentMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../plugin/NumberPlus"),a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/ItemMgr"),u=e("../../Mgr/RandomHelper"),d=e("../../Mgr/StorageMgr"),h=e("../Domains/Gear/GearListDomain"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._weaponListDomain=new h.default,t._armorListDomain=new h.default,t.gearLevelMap=new Map,t.maxLevelMap=new Map,t.gearInfos=[],t._bestWeaponId=0,t._bestArmorId=0,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BestWeaponId",{get:function(){return this._bestWeaponId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BestArmorId",{get:function(){return this._bestArmorId},enumerable:!1,configurable:!0}),t.prototype.hasBestGear=function(){return this.BestArmorId>0&&this.BestArmorId!=d.default.instance.storageData.equippedArmorId||this.BestWeaponId>0&&this.BestWeaponId!=d.default.instance.storageData.equippedWeaponId},t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;this.initGearLevel(),this.initGear(),this.test()},t.prototype.initGear=function(){var e=s.default.getJsonObject("gear");for(var n in this.gearInfos=[],e){var o=e[n];for(var i in o){var r=o[i];this.gearInfos.push(r),r.type==a.EquipmentType.Weapon?this._weaponListDomain.addEquipment(r):this._armorListDomain.addEquipment(r)}}this._weaponListDomain.getDomains().sort(this._sort),this._armorListDomain.getDomains().sort(this._sort),this.reGetBestGearId(),l.EventMgr.on(a.EventType.Props_GearChange_Event,this.updateGearAdd,this),l.EventMgr.on(a.EventType.TestForAddGear,function(){t.Instance.getGearInfos().forEach(function(e){t.Instance.addEquipment(e.id,u.default.randomNum(30,100))})},this)},t.prototype.reGetBestGearId=function(){var e=this,t=0;this._weaponListDomain.getData().forEach(function(n){if(!n.isLock()){var o=r.default.decode(n.getEquippedValue());parseInt(o)>=t&&(t=o,e._bestWeaponId=n.getId())}}),t=0,this._armorListDomain.getData().forEach(function(n){if(!n.isLock()){var o=r.default.decode(n.getEquippedValue());parseInt(o)>=t&&(t=o,e._bestArmorId=n.getId())}});var n=d.default.instance.storageData;n.equippedWeaponId==this.BestWeaponId&&(this._bestWeaponId=0),n.equippedArmorId==this.BestArmorId&&(this._bestArmorId=0),l.EventMgr.event(a.EventType.Main_UI_Gear_EquipmentBestRedPoint,this.BestWeaponId,this.BestArmorId)},t.prototype.initGearLevel=function(){this.gearLevelMap.clear(),this.maxLevelMap.clear();for(var e=[],t=0,n=s.default.getJsonObject("gearLevel"),o=null,i=c.QualityEnum.Common;i<=c.QualityEnum.Exotic;i++)if(o=n[c.QualityToKey[i]]){for(var r in e=[],t=0,o){var a=o[r];e.push(a),t<a.level&&(t=a.level)}this.maxLevelMap.set(i,t),this.gearLevelMap.set(i,e)}},t.prototype.updateGearAdd=function(){s.default.gearAddAtk=this.getGearAddAtk(),s.default.gearAddHp=this.getGearAddHp(),this.reGetBestGearId()},t.prototype.getGearAddAtk=function(){return this.getAllWeaponProp()},t.prototype.getGearAddHp=function(){return this.getAllArmorProp()},t.prototype.getWeaponDomains=function(){return this._weaponListDomain.getDomains()},t.prototype.getArmorDomains=function(){return this._armorListDomain.getDomains()},t.prototype.getWeaponCanLevelUp=function(){for(var e=this.getWeaponDomains(),t=0;t<e.length;t++)if(e[t].canLevelUp())return!0;return!1},t.prototype.getArmorCanLevelUp=function(){for(var e=this.getArmorDomains(),t=0;t<e.length;t++)if(e[t].canLevelUp())return!0;return!1},t.prototype.getGearCanLevelUp=function(){return this.getWeaponCanLevelUp()||this.getArmorCanLevelUp()},t.prototype.getGearInfo=function(e){return this.gearInfos.find(function(t){return t.id==e})},t.prototype.getGearInfos=function(){return this.gearInfos},t.prototype.isNew=function(e){var t=d.default.instance.storageData.gearStorageInfos.find(function(t){return t.id==e});return!Boolean(t)},t.prototype.getQualityGears=function(e){return this.gearInfos.filter(function(t){return t.quality==e})},t.prototype.getGearsWithQuality=function(e,t){return this.gearInfos.filter(function(n){return n.type==e&&n.quality==t})},t.prototype.getCurWeaponDomain=function(){return this.getWeaponDomains().find(function(e){return e.getId()==d.default.instance.storageData.equippedWeaponId})},t.prototype.getCurArmorDomain=function(){return this.getArmorDomains().find(function(e){return e.getId()==d.default.instance.storageData.equippedArmorId})},t.prototype.getGearLevelInfo=function(e,t){return this.gearLevelMap.get(e)[t-1]},t.prototype.getGearLevelInfos=function(e){return this.gearLevelMap.get(e)},t.prototype.getMaxLevel=function(e){return this.maxLevelMap.get(e)},t.prototype.getAdditionEquippedProp=function(e,t){var n=r.default.decode(t.getEquippedValue()),o=n,i=null;return e==a.EquipmentType.Weapon?i=this.getCurWeaponDomain():e==a.EquipmentType.Armor&&(i=this.getCurArmorDomain()),i&&(o=n-r.default.decode(i.getEquippedValue())),o},t.prototype.getEquippedWeaponProp=function(){var e=this.getCurWeaponDomain();return e?e.getEquippedValue():"0"},t.prototype.getEquippedArmorProp=function(){var e=this.getCurArmorDomain();return e?e.getEquippedValue():"0"},t.prototype.getAllWeaponOwnedProp=function(){return myGlobalThis.reduce(this.getWeaponDomains(),function(e,t){if(t.getEquipmentType()==a.EquipmentType.Weapon&&!t.isLock()){var n=t.getOwnValue();return r.default.add(r.default.decode(n),e)}return e},"0")},t.prototype.getAllArmorOwnedProp=function(){return myGlobalThis.reduce(this.getArmorDomains(),function(e,t){if(t.getEquipmentType()==a.EquipmentType.Armor&&!t.isLock()){var n=t.getOwnValue();return r.default.add(r.default.decode(n),e)}return e},"0")},t.prototype.getAllArmorProp=function(){var e=this.getAllArmorOwnedProp(),t=this.getEquippedArmorProp(),n=r.default.decode(e),o=r.default.decode(t);return r.default.add(n,o)},t.prototype.getAllWeaponProp=function(){var e=this.getAllWeaponOwnedProp(),t=this.getEquippedWeaponProp(),n=r.default.decode(e),o=r.default.decode(t);return r.default.add(n,o)},t.prototype.addEquipment=function(e,t){var n=this.getWeaponDomains().find(function(t){return t.getId()==e});n||(n=this.getArmorDomains().find(function(t){return t.getId()==e})),n.addCount(t),d.default.instance.addEquipment(e,t)},t.prototype.addEquipments=function(e){for(var t=this,n=new Map,o=0;o<e.length;o++){var i=e[o];n.has(i)||n.set(o,0),n.set(i,n.get(i)+1)}n.forEach(function(e,n){var o=t.getWeaponDomains().find(function(e){return e.getId()==n});o||(o=t.getArmorDomains().find(function(e){return e.getId()==n})),o.addCount(e)}),d.default.instance.addEquipments(n)},t.prototype.levelUp=function(e,t){var n;if(e==a.EquipmentType.Weapon?n=this.getWeaponDomains():e==a.EquipmentType.Armor&&(n=this.getArmorDomains()),t){var o=n.find(function(e){return e.getId()==t}),i=o.levelUp();d.default.instance.strengthenEquipment(o);var r={id:i.id,prev:i.prev,curr:i.curr};return l.EventMgr.event(a.GlobalEvent.GearLevelUp,r),[i]}var s=[],c=[],u=[];return n.forEach(function(e){var t=e.levelUp();t&&(s.push(t),c.push(e),u.push({id:t.id,prev:t.prev,curr:t.curr}))}),c.length>0&&d.default.instance.strengthenEquipments(c),u.length>0&&l.EventMgr.event(a.GlobalEvent.GearLevelUpAll,e,u),s},t.prototype.equippedGear=function(e){var t;e.getEquipmentType()==a.EquipmentType.Weapon?(t=this.getCurWeaponDomain(),d.default.instance.changeWeapon(e)):e.getEquipmentType()==a.EquipmentType.Armor&&(t=this.getCurArmorDomain(),d.default.instance.changeArmor(e)),null==t||t.emitChange()},t.prototype._sort=function(e,t){return e.getQuality()>t.getQuality()?1:e.getQuality()==t.getQuality()&&e.getId()>t.getQuality()?1:-1},t.prototype.getData=function(e){return d.default.instance.storageData.gearStorageInfos.find(function(t){return t.id==e})},t.prototype.getOwnedCount=function(){return d.default.instance.storageData.gearStorageInfos.length},t.prototype.getMaxOwnGear=function(e){return e==a.EquipmentType.Weapon?this.BestWeaponId:e==a.EquipmentType.Armor?this.BestArmorId:-1},t.prototype.test=function(){},t}(e("../../Mgr/BaseMgr").default);n.default=p,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/RandomHelper":"RandomHelper","../../Mgr/StorageMgr":"StorageMgr","../Domains/Gear/GearListDomain":"GearListDomain"}],EventMgr:[function(e,t,n){"use strict";cc._RF.push(t,"81dc2y22blBeJaNVsj+80oK","EventMgr"),Object.defineProperty(n,"__esModule",{value:!0}),n.EventMgr=void 0;var o=function(){function e(){}return e.event=function(e,t,n,o,i,r){cc.director.emit(e,t,n,o,i,r)},e.on=function(e,t,n){cc.director.on(e,t,n)},e.off=function(e,t,n){cc.director.off(e,t,n)},e.clearTarget=function(e){cc.director.removeAll(e)},e}();n.EventMgr=o,cc._RF.pop()},{}],Event:[function(e,t,n){"use strict";cc._RF.push(t,"7014csELzlAo58heAIWRbHf","Event");var o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),i=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,i++)o[i]=r[a];return o};Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){this._eventTable=[]}return e.prototype.addListener=function(e,t){this.removeListener(e,t),this._eventTable.push({func:e,domain:t})},e.prototype.removeListener=function(e,t){this._eventTable=this._eventTable.filter(function(n){return!(n.func==e&&n.domain==t)})},e.prototype.removeAllListener=function(){this._eventTable=[]},e.prototype.invoke=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._eventTable.forEach(function(t){var n,i;t&&(t.domain?(n=t.func).apply.apply(n,o([t.domain],e)):(i=t.func).apply.apply(i,e))})},e}();n.default=i,cc._RF.pop()},{}],ExtraRewardData:[function(e,t,n){"use strict";cc._RF.push(t,"e36e9CEmBlMgbe3PKo1uvhR","ExtraRewardData");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.ExtraRewardData=void 0;var r=e("../../Config/GameData"),a=e("../../Mgr/BaseMgr"),s=e("../../Mgr/StorageMgr"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._extraRewardData={},t.cfg={},t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;var o=r.default.getJsonObject("extraReward");for(var i in o){var a=o[i];for(var s in a){var l=a[s];this.cfg[l.id]=l}}myGlobalThis.each(this.cfg,function(e){if(e.ids=[],e.nums=[],e.reward.includes(","))(t=e.reward.split(",")).forEach(function(t){var n=splitValue(t,"|");e.ids.push(n[0]),e.nums.push(n[1])});else{var t=splitValue(e.reward,"|");e.ids.push(t[0]),e.nums.push(t[1])}delete e.reward}),this.load()},t.prototype.get=function(e){return this.cfg[e]},t.prototype.getMaxQuestNum=function(){return this.cfg[Object.keys(this.cfg).length].number},t.prototype.save=function(){var e={};myGlobalThis.each(this._extraRewardData,function(t){e[t.id]={id:t.id,status:t.status}}),s.default.instance.saveUserExtraRewardData(e)},t.prototype.load=function(){var e=this;this._extraRewardData={};var t=s.default.instance.storageData.userExtraRewardData;myGlobalThis.isEmpty(t)||myGlobalThis.each(t,function(t){var n=t.id,o=t.status;e._extraRewardData[n]={id:n,status:o}})},t.prototype.createData=function(e,t){return t||(t=0),{id:e,status:t}},t.prototype.getData=function(e){return myGlobalThis.isNil(this._extraRewardData[e])&&(this._extraRewardData[e]=this.createData(e)),this._extraRewardData[e]},t.prototype.setStatus=function(e,t){this.getData(e).status=t,this.save()},t._instance=null,t}(a.default);n.ExtraRewardData=l,cc._RF.pop()},{"../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/StorageMgr":"StorageMgr"}],FitTop:[function(e,t,n){"use strict";cc._RF.push(t,"42735qORRFFpasj6v9MnjFi","FitTop");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Global"),s=cc._decorator,l=s.ccclass,c=s.property,u=s.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offsetY=0,t.statusHeight=0,t.oriY=0,t}return i(t,e),t.prototype.onLoad=function(){this.oriY=this.node.y,a.default.isDev()||(this.statusHeight=wx.getSystemInfoSync().statusBarHeight,this.statusHeight=this.statusHeight>20?this.statusHeight:0,console.log(">>>>>> FitTop: ",this.statusHeight))},t.prototype.onEnable=function(){this.node.y=this.oriY+this.offsetY-this.statusHeight},r([c()],t.prototype,"offsetY",void 0),r([l,u("Component/FitTop")],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Global":"Global"}],FlyItemMgr:[function(e,t,n){"use strict";cc._RF.push(t,"fc594nUnchESrZOVs3nJRpO","FlyItemMgr");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Config/EnumTypes"),a=e("../Main/Mgr/AssetsMgr"),s=e("../Tool/Tool"),l=e("./BundleMgr"),c=e("./EventMgr"),u=function(){function e(){}return e.get=function(e){return e==r.ASSET_TYPE.Coin?this.coinPool.size()>0?this.coinPool.get():cc.instantiate(this.flyItemMap[r.ASSET_TYPE.Coin]):this.otherAssetPool.size()>0?this.otherAssetPool.get():cc.instantiate(this.flyItemMap[r.ASSET_TYPE.Diamond])},e.put=function(e,t){e==r.ASSET_TYPE.Coin?this.coinPool.put(t):this.otherAssetPool.put(t)},e.addFlyItem=function(e,t){this.FlyItem(e,t)},e.FlyItem=function(e,t){return o(this,void 0,void 0,function(){var n,o,u,d,h,p,f,g,y,m=this;return i(this,function(v){switch(v.label){case 0:if(n=a.default.Instance.getIcon(e),o=this.targetMap.Other,e!=r.ASSET_TYPE.Coin&&e!=r.ASSET_TYPE.Diamond||(o=this.targetMap[e]),!o)return console.warn("\u98de\u5165\u76ee\u6807\u70b9\u4e0d\u5b58\u5728 assetId=["+e+"]"),[2];u=cc.find("Canvas").getChildByName("panel3"),d=s.Tool.convertToNodeSpaceAR(u,o),h=s.Tool.convertToNodeSpaceAR(u,t),p=10,f=function(t){var o,a,f,y;return i(this,function(i){switch(i.label){case 0:return o=g.get(e),e==r.ASSET_TYPE.Coin?[3,2]:(a=o.getComponent(cc.Sprite),[4,new Promise(function(e){l.default.getBundleData(r.BundleName.Main).loadRes(n,cc.SpriteFrame,function(t,o){if(t)return console.error(n+" \u52a0\u8f7d\u5f02\u5e38",t),void e(null);o.addRef(),e(o)})})]);case 1:a.spriteFrame=i.sent(),i.label=2;case 2:return u.addChild(o),o.setPosition(h),f=.3+.1*Math.random()-.05,y=new cc.Vec3(h.x+s.Tool.randomNumber(-75,75),h.y+s.Tool.randomNumber(-75,75),0),cc.tween(o).to(f,{x:y.x,y:y.y}).delay(.05).to(.4,{x:d.x,y:d.y}).call(function(){m.put(e,o),t==p-1&&c.EventMgr.event(r.GlobalEvent.AssetItemChange+e)}).start(),[2]}})},g=this,y=0,v.label=1;case 1:return y<p?[5,f(y)]:[3,4];case 2:v.sent(),v.label=3;case 3:return y++,[3,1];case 4:return[2]}})})},e.flyItemMap={},e.targetMap={},e.otherAssetPool=new cc.NodePool,e.coinPool=new cc.NodePool,e}();n.default=u,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","../Main/Mgr/AssetsMgr":"AssetsMgr","../Tool/Tool":"Tool","./BundleMgr":"BundleMgr","./EventMgr":"EventMgr"}],Fontclip:[function(e,t,n){"use strict";cc._RF.push(t,"1acc2idIgpH4LdOKwPtNPCK","Fontclip");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.Fontclip=void 0;var a=cc._decorator,s=a.ccclass,l=a.property,c=a.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value="0123456789.:",t._sheet="0123456789.:",t._spaceX=0,t._isCenter=!1,t.spriteFrame=null,t}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.change()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sheet",{get:function(){return this._sheet},set:function(e){this._sheet=e,this.change()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spaceX",{get:function(){return this._spaceX},set:function(e){this._spaceX=e,this.change()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCenter",{get:function(){return this._isCenter},set:function(e){this._isCenter=e,this.change()},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){this.change()},t.prototype.start=function(){this.change()},t.prototype.change=function(){for(var e=0;e<this.node.children.length;e++)this.node.children[e].destroy();var t=Array.from(this.value),n=Array.from(this.sheet),o=this.spriteFrame.getRect().width,i=this.spriteFrame.getRect().height,r=o/n.length,a=0;for(this.isCenter&&(a=-(t.length-1)*r/2),e=0;e<t.length;e++){var s=new cc.Node(t[e]),l=s.addComponent(cc.Sprite);this.node.addChild(s),l.spriteFrame=this.spriteFrame.clone();var c=n.indexOf(t[e]);l.spriteFrame.setRect(new cc.Rect(r*c,0,r,i)),s.width=r,s.height=i,s.setPosition(new cc.Vec2(a+e*r+this._spaceX*e,0))}},r([l({visible:!0,displayName:"value"})],t.prototype,"value",null),r([l({visible:!1,serializable:!0})],t.prototype,"_value",void 0),r([l({visible:!0,displayName:"sheet"})],t.prototype,"sheet",null),r([l({visible:!1,serializable:!0})],t.prototype,"_sheet",void 0),r([l({visible:!0,displayName:"spaceX"})],t.prototype,"spaceX",null),r([l({visible:!1,serializable:!0})],t.prototype,"_spaceX",void 0),r([l],t.prototype,"isCenter",null),r([l({visible:!1,serializable:!0})],t.prototype,"_isCenter",void 0),r([l(cc.SpriteFrame)],t.prototype,"spriteFrame",void 0),r([s,c("Comp/Fontclip")],t)}(cc.Component);n.Fontclip=u,cc._RF.pop()},{}],GameData:[function(e,t,n){"use strict";cc._RF.push(t,"43cfc1D1ddAlJPAzGpd2aqd","GameData"),Object.defineProperty(n,"__esModule",{value:!0}),n.TrackEventKey=void 0;var o=e("../../plugin/NumberPlus"),i=e("../Main/Battle/Battle_HeroRushMgr"),r=e("../Main/Battle/Battle_RelicMgr"),a=e("../Main/Mgr/Hero/HeroMgr"),s=e("../Mgr/BattleData"),l=e("../Mgr/EventMgr"),c=e("../Mgr/StorageMgr"),u=e("../Platform/Platform"),d=e("./DataClass/PropData"),h=e("./EnumTypes"),p=function(){function e(){}return e.testStorageChange=function(){e.isTest&&cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(e.keyCode){case cc.macro.KEY.f1:console.log("f1\u6d4b\u8bd5\u6309\u4e0b,\u52a0\u901f\u5f00\u5173"),l.EventMgr.event(h.EventType.Battle_SpeedUp_Switch);break;case cc.macro.KEY.f2:break;case cc.macro.KEY.f3:console.log("\u6218\u573a\u9707\u52a8"),l.EventMgr.event(h.EventType.Battle_World_Shake_Mini);break;case cc.macro.KEY.f4:console.log(">> \u6dfb\u52a0\u94bb\u77f3\uff1a100000"),c.default.instance.addDiamond(1e5);break;case cc.macro.KEY.f7:console.log(">> \u6dfb\u52a0\u88c5\u5907"),l.EventMgr.event(h.EventType.TestForAddGear);break;case cc.macro.KEY.f8:console.log(">> \u6dfb\u52a0\u6280\u80fd"),l.EventMgr.event(h.EventType.TestForAddSkill);break;case cc.macro.KEY.f9:console.log(">> \u6dfb\u52a0\u62cd\u6863\uff1a"),l.EventMgr.event(h.EventType.TestForAddPartner);break;case cc.macro.KEY.num1:console.log("num1\u6d4b\u8bd5\u6309\u4e0b,\u4f7f\u7528\u6280\u80fd21101"),l.EventMgr.event(h.EventType.Battle_Skill_Use,"21101");break;case cc.macro.KEY.num2:console.log("num2\u6d4b\u8bd5\u6309\u4e0b,\u4f7f\u7528\u6280\u80fd21102"),l.EventMgr.event(h.EventType.Battle_Skill_Use,"21102");break;case cc.macro.KEY.num3:console.log("num3\u6d4b\u8bd5\u6309\u4e0b,\u4f7f\u7528\u6280\u80fd21103"),l.EventMgr.event(h.EventType.Battle_Skill_Use,"21103");break;case cc.macro.KEY.num4:console.log("num4\u6d4b\u8bd5\u6309\u4e0b,\u4f7f\u7528\u6280\u80fd22101"),l.EventMgr.event(h.EventType.Battle_Skill_Use,"22101");break;case cc.macro.KEY.num5:console.log("num5\u6d4b\u8bd5\u6309\u4e0b,\u4f7f\u7528\u6280\u80fd22102"),l.EventMgr.event(h.EventType.Battle_Skill_Use,"22102");break;case cc.macro.KEY.num6:a.default.Instance.unlock(41102)}},this)},e.getJsonObject=function(e){return this.jsonObjectMap.get(e)},e.initJsonData=function(e){this.jsonData=e;for(var t=0;t<this.jsonData.length;t++)this.jsonObjectMap.set(this.jsonData[t].name,this.jsonData[t].json)},e.heroAtkCal=function(){var t=d.default.instance.calAtk(c.default.instance.storageData.atkLevel).value;t=o.default.add(t,this.collectionAddBaseAtk);var n=o.default.add(1,o.default.div(this.gearAddAtk,100)),a=o.default.add(1,o.default.div(this.skillAddAtk,100)),s=o.default.add(1,o.default.div(this.partnerAddAtk,100)),l=o.default.add(1,o.default.div(this.heroBuffAddAtk,100)),u=o.default.decode(1+this.researchMgr.getAtkAddition()),h=o.default.add(1,o.default.div(o.default.decode(e.getBlessAtkAdd()),100)),p=o.default.add(1,o.default.div(this.collectionAddAtk,100)),f=o.default.add(1,o.default.div(this.masteryAddAtk,100)),g=o.default.add(1,o.default.div(this.relicAddAtk,100)),y=o.default.add(1,o.default.div(this.relic21AddAtk,100)),m=o.default.add(1,o.default.div(this.relic22AddAtk,100)),v=o.default.add(1,o.default.div(this.relic28AddAtk,100)),_=o.default.add(1,o.default.div(i.default.instance.getHeroRushAddAtk(),100)),b=o.default.add(1,o.default.div(this.ringAddAtk,100)),S=o.default.mul(1,n);S=o.default.mul(S,a),S=o.default.mul(S,s),S=o.default.mul(S,l),S=o.default.mul(S,u),S=o.default.mul(S,h),S=o.default.mul(S,p),S=o.default.mul(S,f),S=o.default.mul(S,g),S=o.default.mul(S,y),S=o.default.mul(S,m),S=o.default.mul(S,v),S=o.default.mul(S,_),S=o.default.mul(S,b);var M=o.default.mul(t,S);return r.default.Instance.relic_effect_27_isUse&&this.heroCriticalChanceCal()>1&&(M=o.default.mul(M,this.heroCriticalChanceCal())),r.default.Instance.relic_effect_25_isUse&&(M=o.default.add(M,this.heroHpCal())),M},e.heroHpCal=function(){var t=d.default.instance.calHp(c.default.instance.storageData.hpLevel).value;t=o.default.add(t,this.collectionAddBaseHp);var n=o.default.add(1,o.default.div(this.gearAddHp,100)),r=o.default.decode(1+this.researchMgr.getHpAddition()),a=o.default.add(1,o.default.div(this.heroBuffAddHp,100)),s=o.default.add(1,o.default.div(this.collectionAddHp,100)),l=o.default.add(1,o.default.div(o.default.decode(e.getBlessHpAdd()),100)),u=o.default.add(1,o.default.div(this.masteryAddHp,100)),h=o.default.add(1,o.default.div(this.relicAddHp,100)),p=o.default.add(1,o.default.div(this.relic17AddHp,100)),f=o.default.add(1,o.default.div(this.relic23AddHp,100)),g=o.default.add(1,o.default.div(i.default.instance.getHeroRushAddHp(),100)),y=o.default.add(1,o.default.div(this.ringAddHp,100)),m=o.default.mul(t,n);return m=o.default.mul(m,r),m=o.default.mul(m,a),m=o.default.mul(m,s),m=o.default.mul(m,l),m=o.default.mul(m,u),m=o.default.mul(m,h),m=o.default.mul(m,p),m=o.default.mul(m,f),m=o.default.mul(m,g),o.default.mul(m,y)},e.heroHpRecoveryCal=function(){var t=d.default.instance.calHpRecovery(c.default.instance.storageData.hpRecoveryLevel).value,n=o.default.decode(1+this.researchMgr.getHpRecoveryAddition()),r=o.default.add(1,o.default.div(this.gearAddHp,100)),a=o.default.decode(1+this.researchMgr.getHpAddition()),s=o.default.add(1,o.default.div(this.heroBuffAddHp,100)),l=o.default.add(1,o.default.div(this.collectionAddHp,100)),u=o.default.add(1,o.default.div(o.default.decode(e.getBlessHpAdd()),100)),h=o.default.add(1,o.default.div(this.masteryAddHp,100)),p=o.default.add(1,o.default.div(this.relicAddHp,100)),f=o.default.add(1,o.default.div(this.relic17AddHp,100)),g=o.default.add(1,o.default.div(this.relic23AddHp,100)),y=o.default.add(1,o.default.div(i.default.instance.getHeroRushAddHp(),100)),m=o.default.mul(t,r);return m=o.default.mul(m,a),m=o.default.mul(m,n),m=o.default.mul(m,s),m=o.default.mul(m,l),m=o.default.mul(m,u),m=o.default.mul(m,h),m=o.default.mul(m,p),m=o.default.mul(m,f),m=o.default.mul(m,g),o.default.mul(m,y)},e.heroAspdCal=function(){var e=d.default.instance.calAspd(c.default.instance.storageData.aspdLevel).value,t=o.default.add(1,o.default.div(this.collectionAddAspd,100)),n=o.default.mul(e,t);return o.default.add(n,r.default.Instance.relic_effect_14_Check())},e.heroCriticalChanceCal=function(){return d.default.instance.calCriticalChance(c.default.instance.storageData.criticalChanceLevel).value/100},e.heroCriticalDamageCal=function(){return(d.default.instance.calCriticalDamage(c.default.instance.storageData.criticalDamageLevel).value+this.collectionAddCriticalDamage+this.ringAddCriticalDamage+i.default.instance.addCritcalDamage)/100},e.heroDoubleShotCal=function(){return d.default.instance.calDoubleShot(c.default.instance.storageData.doubleShot).value/100},e.heroTripleShotCal=function(){return d.default.instance.calTripleShot(c.default.instance.storageData.tripleShot).value/100},e.heroCombatCal=function(){var e=this.heroHpCal(),t=this.heroAtkCal(),n=this.heroAspdCal(),i=this.heroCriticalChanceCal(),r=this.heroCriticalDamageCal(),a=this.heroDoubleShotCal(),s=this.heroTripleShotCal(),l=this.heroSkillDamageCal(),c=this.heroBossDamageCal(),u=o.default.mul(t,n),d=o.default.mul(i,o.default.sub(r,1));d=o.default.add(1,d);var h=o.default.add(100,o.default.add(a,s));return h=o.default.div(h,100),h=o.default.add(h,o.default.mul(o.default.sub(l,1),100)),u=o.default.mul(u,d),u=o.default.mul(u,h),u=o.default.mul(u,c),o.default.add(e,u)},e.heroCoinAddCal=function(){var t=o.default.add(1,this.heroAddCoinValue),n=o.default.add(1,o.default.div(o.default.decode(e.getBlessGoldAdd()),100)),i=o.default.div(this.masteryAddCoinValue,100),r=o.default.div(this.ringAddCoinValue,100),a=o.default.add(t,i);return a=o.default.add(a,r),o.default.mul(a,n)},e.heroSkillDamageCal=function(){var e=o.default.add(1,this.heroSkillDamageValue);return e=o.default.mul(e,o.default.add(1,this.ringSkillDamageAdd)),o.default.mul(e,o.default.add(1,o.default.div(i.default.instance.addSkillDamage,100)))},e.heroBossDamageCal=function(){return(100+this.collectionAddBossDamage+this.ringAddBossDamage)/100},e.heroPartnerAspdCal=function(){return(100+this.collectionAddPartnerAspd+this.masteryAddPartnerAspd+this.relickAddPartnerAspd)/100},e.heroPartnerAtkCal=function(){return(100+this.relicAddPartnerAtk+this.ringAddPartnerAtk)/100},e.heroCDReduceCal=function(){return(i.default.instance.getHeroRushAddCD()+e.getBlessCdDuce()+this.ringCDReduce)/100},e.heroDodgeCal=function(){return(0+this.masteryAddDodge+this.ringAddDodge)/100},e.normalDamageAddCal=function(){return(100+this.masteryAddDamage)/100},e.getHeroMoveSpeedCal=function(){return this.moveSpeedAdd},e.getShovelUpperLimitAddition=function(){return this.researchMgr.getShovelUpperLimitAddition()},e.getShovelRecoveryAddition=function(){return this.researchMgr.getShovelRecoveryAddition()},e.getResearchSpeedAddition=function(){return this.researchMgr.getResearchSpeedAddition()},e.getMineCubeAddition=function(){return this.researchMgr.getMineCubeAddition()},e.enemySpeedCal=function(){return 1*(1-this.relicEnemySpeedReduce)},e.enemyDamageReduceCal=function(){return 1*(1-this.relic24ReduceDamage)},e.getBlessAtkAdd=function(){return c.default.instance.storageData.videoVipAdditions[0]+this.blessAtk},e.getBlessGoldAdd=function(){return this.blessGold},e.getBlessHpAdd=function(){return c.default.instance.storageData.videoVipAdditions[1]},e.getBlessCdDuce=function(){return this.blessCD+this.chestCD},e.bossRushRewardCal=function(e){return 500+10*(parseInt(e)-1)},e.goldRushRewardCal=function(e){var t=s.default.instance.getGoldRushInfo(e).reward;return o.default.decode(t)},e.clearRushRewardCal=function(e){var t=s.default.instance.getClearRushInfo(e).reward;return o.default.decode(t)},e.trackEvent=function(t){window.wx&&window.wx.uma&&e.isFirst&&window.wx.uma.trackEvent(t),this.isTest&&console.log("\u53cb\u76df\u6253\u70b9",t)},e.startPhyics=function(){cc.director.getCollisionManager().enabled=!0;var e=cc.director.getPhysicsManager();e.enabled=!0,this.isTest&&console.log("\u7269\u7406\u5df2\u7ecf\u5f00\u542f"),e.enabledAccumulator=!0,e.FIXED_TIME_STEP=1/60,e.VELOCITY_ITERATIONS=10,e.POSITION_ITERATIONS=10},e.uploadDataToServer=function(){u.default.instance.isGetInfo},e.isClearStorage=!1,e.isTest=!1,e.isFirst=!1,e.bossRushKeyMax=2,e.goldRushKeyMax=2,e.clearRushKeyMax=2,e.heroRushKeyMax=1,e.partnerTagMax=6,e.hammerRecoverTime=6e5,e.jsonObjectMap=new Map,e.heroSkillDamageValue="0",e.gearAddAtk="0",e.skillAddAtk="0",e.partnerAddAtk="0",e.heroBuffAddAtk="0",e.collectionAddAtk="0",e.collectionAddBaseAtk="0",e.masteryAddAtk="0",e.relicAddAtk="0",e.relic21AddAtk="0",e.relic22AddAtk="0",e.relic28AddAtk="0",e.ringAddAtk="0",e.gearAddHp="0",e.heroBuffAddHp="0",e.collectionAddHp="0",e.collectionAddBaseHp="0",e.masteryAddHp="0",e.relicAddHp="0",e.relic17AddHp="0",e.relic23AddHp="0",e.ringAddHp="0",e.collectionAddAspd="0",e.collectionAddCriticalDamage=0,e.ringAddCriticalDamage=0,e.heroAddCoinValue="0",e.masteryAddCoinValue="0",e.ringAddCoinValue="0",e.ringSkillDamageAdd="0",e.collectionAddBossDamage=0,e.ringAddBossDamage=0,e.collectionAddPartnerAspd=0,e.masteryAddPartnerAspd=0,e.relickAddPartnerAspd=0,e.relicAddPartnerAtk=0,e.ringAddPartnerAtk=0,e.ringCDReduce=0,e.masteryAddDodge=0,e.ringAddDodge=0,e.masteryAddDamage=0,e.moveSpeedAdd=0,e.researchMgr=null,e.relicEnemySpeedReduce=0,e.relic24ReduceDamage=0,e.blessAtk=0,e.blessGold=0,e.blessCD=0,e.chestCD=0,e}();n.default=p;var f=function(){function e(){}return e.key={"\u6b63\u5728\u52a0\u8f7d":"01","\u52a0\u8f7d\u5b8c\u6210":"02","\u8fdb\u5165\u4e3b\u754c\u9762":"03","\u5f15\u5bfc\u4efb\u52a11\u5b8c\u6210":"04","\u5f15\u5bfc\u5f3a\u5316\u653b\u51fb":"05","\u5f15\u5bfc\u5f3a\u5316\u653b\u51fb\u4efb\u52a12\u5b8c\u6210":"06","\u5f15\u5bfc\u5f3a\u5316\u751f\u547d":"07","\u5f15\u5bfc\u5f3a\u5316\u751f\u547d\u4efb\u52a13\u5b8c\u6210":"08","\u5f15\u5bfc\u901a\u51731-1\u4efb\u52a14\u5b8c\u6210":"09","\u5f15\u5bfc\u53ec\u5524\u88c5\u5907":"10","\u5f15\u5bfc\u53ec\u5524\u88c5\u5907\u4efb\u52a15\u5b8c\u6210":"11","\u901a\u51731-2":"12","\u901a\u51731-3":"13","\u901a\u51731-4":"14","\u901a\u51731-5":"15","\u901a\u51731-6":"16","\u901a\u51731-7":"17","\u901a\u51731-8":"18","\u901a\u51731-9":"19","\u901a\u51731-10":"20","\u795d\u798f-\u91d1\u5e01\u52a0\u6210":"21","\u795d\u798f-\u653b\u51fb\u52a0\u6210":"22","\u795d\u798f-\u6280\u80fd\u51b7\u5374":"23","\u98d8\u7bb1":"24","\u6302\u673a\u989d\u5916\u5956\u52b1":"25","\u52a0\u901f\u6218\u6597":"26","\u8f6c\u76d8":"27","\u6bcf\u65e5\u4efb\u52a1\u5e7f\u544a\u5956\u52b1":"28","\u9996\u9886\u526f\u672c\u5e7f\u544a\u94a5\u5319":"29","\u91d1\u5e01\u526f\u672c\u5e7f\u544a\u94a5\u5319":"30","\u6751\u5e84\u526f\u672c\u5e7f\u544a\u94a5\u5319":"31","\u7a81\u88ad\u526f\u672c\u5e7f\u544a\u94a5\u5319":"32","\u77ff\u5c71\u9504\u5934\u5e7f\u544a":"33","\u77ff\u5c71\u70b8\u9e21\u5e7f\u544a":"34","\u77ff\u5c71\u94bb\u5934\u5e7f\u544a":"35","\u7814\u7a76\u6240\u52a0\u901f\u5e7f\u544a":"36","\u53ec\u5524\u88c5\u5907\u5e7f\u544a":"37","\u53ec\u5524\u6280\u80fd\u5e7f\u544a":"38","\u53ec\u5524\u5ba0\u7269\u5e7f\u544a":"39","\u526f\u672c\u793c\u5305\u5e7f\u544a":"40","\u70b8\u9e21\u793c\u5305\u5e7f\u544a":"41","\u94bb\u5934\u793c\u5305\u5e7f\u544a":"42","\u90ae\u7bb1\u9886\u53d6\u514d\u8d39\u94bb\u77f3":"43","\u90ae\u7bb1\u9886\u53d6\u5e7f\u544a\u94bb\u77f3":"44","\u901a\u51732-5":"45","\u901a\u51732-10":"46","\u901a\u51733-10":"47","\u901a\u51734-10":"48","\u901a\u51735-10":"49","\u901a\u51737-5\u4ee5\u4e0a":"50","\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u62101~10":"51","\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621011~20":"52","\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621021~30":"53","\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621031~40":"54","\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621041~50":"55","\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621051~60":"56","\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621061~70":"57","\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621071~80":"58","\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621081~90":"59","\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621091~\u4ee5\u4e0a":"60"},e}();n.TrackEventKey=f,cc._RF.pop()},{"../../plugin/NumberPlus":"NumberPlus","../Main/Battle/Battle_HeroRushMgr":"Battle_HeroRushMgr","../Main/Battle/Battle_RelicMgr":"Battle_RelicMgr","../Main/Mgr/Hero/HeroMgr":"HeroMgr","../Mgr/BattleData":"BattleData","../Mgr/EventMgr":"EventMgr","../Mgr/StorageMgr":"StorageMgr","../Platform/Platform":"Platform","./DataClass/PropData":"PropData","./EnumTypes":"EnumTypes"}],GameLoading:[function(e,t,n){"use strict";cc._RF.push(t,"8d1eb5+LR5HuaUudgq9EE/9","GameLoading");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Bar"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bar=null,t.root=null,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this,this.root=this.node.getChildByName("root")},r([c(a.default)],t.prototype,"bar",void 0),n=r([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./Bar":"Bar"}],GearDetailView:[function(e,t,n){"use strict";cc._RF.push(t,"685097UFi9Cq7HQ4JSoWg7+","GearDetailView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/ItemMgr"),u=e("../../Platform/Platform"),d=e("../../Tool/Tool"),h=e("../CommonUI/IDetailView"),p=e("../Main_PanelOpen"),f=e("../Mgr/EquipmentMgr"),g=e("../Mgr/GuideCore/GuideEnums"),y=e("../Mgr/GuideCore/GuideMgr"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.propArrow=null,t.equippedLabel=null,t.equipRedPointNode=null,t.additionNode=null,t.additionLabel=null,t.equipmentType=s.EquipmentType.Weapon,t}return i(t,e),t.prototype.start=function(){d.Tool.addClickEvent(this.btnEquip,this._equipEquipment,this),d.Tool.addClickEvent(this.btnStrengthen,this._strengthen,this),l.EventMgr.on(s.GlobalEvent.GearLevelUpAll,this.onLevelUpAll,this)},t.prototype.handleEquipmentInfo=function(e){this.selectDomain!=e&&(this.selectDomain=e,this._refreshUI(this.selectDomain))},t.prototype._refreshUI=function(e){this.setQuality(e.getQuality()),this.setIcon(e.getIcon()),this.setName(e.getName()),this.setQualityName(e.getQuality(),e.getQualityName()),this.setLevel(e.getCurLevel()||1),this.setProgress(e.getCurCount(),e.getNextLevelCostCount()),this.setOwn(a.default.format(e.getOwnValue())),this.setStrengthenRedPoint(e.canLevelUp()),this.equippedLabel.string="+"+a.default.format(e.getEquippedValue())+"%",this.equipRedPointNode.active=e.isBestEquipment(),this.btnEquip.getComponentInChildren(cc.Sprite).setState(e.isLock()||e.isEquipped()?cc.Sprite.State.GRAY:cc.Sprite.State.NORMAL),this.btnStrengthen.getComponentInChildren(cc.Sprite).setState(e.canLevelUp()?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY),this.refreshDiff(e)},t.prototype.refreshDiff=function(e){var t=f.default.Instance.getAdditionEquippedProp(this.equipmentType,this.selectDomain);this.additionNode.active=0!=t&&!e.isEquipped(),this.additionLabel.string=a.default.format(t)+"%",this.additionLabel.node.color=t>0?cc.Color.GREEN:cc.color().fromHEX("#df1aff"),d.Tool.setSprite(this.propArrow,s.BundleName.Main,c.Common_ICON_PATH+(t>0?"icon_arrow_up":"icon_arrow_down"))},t.prototype._equipEquipment=function(){this.selectDomain&&(this.selectDomain.isLock()?u.default.instance.showToast("\u88c5\u5907\u672a\u89e3\u9501"):(f.default.Instance.equippedGear(this.selectDomain),this.equipRedPointNode.active=this.selectDomain.isBestEquipment(),this.refreshDiff(this.selectDomain),this.btnEquip.getComponentInChildren(cc.Sprite).setState(cc.Sprite.State.GRAY),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchClosEquipWeaponButton),l.EventMgr.event(s.GlobalEvent.EquipGearItem)))},t.prototype._strengthen=function(){if(this.selectDomain)if(this.selectDomain.canLevelUp()){var e=f.default.Instance.levelUp(this.selectDomain.getEquipmentType(),this.selectDomain.getId());this._refreshUI(this.selectDomain),p.default.showStrengthWindow({type:s.StrengthenType.Gear,results:e})}else u.default.instance.showToast("\u6240\u9700\u88c5\u5907\u6570\u91cf\u4e0d\u8db3")},t.prototype.onLevelUpAll=function(){this._refreshUI(this.selectDomain)},r([_(cc.Sprite)],t.prototype,"propArrow",void 0),r([_(cc.Label)],t.prototype,"equippedLabel",void 0),r([_(cc.Node)],t.prototype,"equipRedPointNode",void 0),r([_(cc.Node)],t.prototype,"additionNode",void 0),r([_(cc.Label)],t.prototype,"additionLabel",void 0),r([_({type:cc.Enum(s.EquipmentType)})],t.prototype,"equipmentType",void 0),r([v],t)}(h.default);n.default=b,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../CommonUI/IDetailView":"IDetailView","../Main_PanelOpen":"Main_PanelOpen","../Mgr/EquipmentMgr":"EquipmentMgr","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr"}],GearDomain:[function(e,t,n){"use strict";cc._RF.push(t,"cd92003jmFC7rUqpNuNrrRc","GearDomain");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../plugin/NumberPlus"),a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/ItemMgr"),l=e("../../../Mgr/LanguageMgr"),c=e("../../../Mgr/StorageMgr"),u=e("../../Mgr/EquipmentMgr"),d=function(e){function t(t,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i=e.call(this)||this;return i._level=1,i._curCount=0,i._gearInfo=t,i._level=n,i._curCount=o,i}return i(t,e),t.prototype.getId=function(){return this._gearInfo.id},t.prototype.getGearInfo=function(){return this._gearInfo},t.prototype.getCurLevel=function(){return this._level},t.prototype.getCurCount=function(){return this._curCount},t.prototype.getNextLevelCostCount=function(){return this.getCurLevel()>=u.default.Instance.getMaxLevel(this.getQuality())?-1:u.default.Instance.getGearLevelInfo(this.getQuality(),this.getCurLevel()||1).cost},t.prototype.getName=function(){return l.default.Instance.getLanguage(this._gearInfo.name)},t.prototype.getEquipmentType=function(){return this._gearInfo.type},t.prototype.getIcon=function(){return s.default.Instance.getEquipmentIcon(this._gearInfo.icon)},t.prototype.getQuality=function(){return this._gearInfo.quality},t.prototype.getQualityName=function(){return s.default.Instance.getQualityName(this.getQuality())},t.prototype.getQualityIcon=function(){return s.default.Instance.getQualityIcon(this.getQuality())},t.prototype.isLock=function(){return 0==this._curCount&&0==this._level},t.prototype.canLevelUp=function(){return this.getCurLevel()<u.default.Instance.getMaxLevel(this.getQuality())&&this.getCurCount()>=this.getNextLevelCostCount()},t.prototype.isEquipped=function(){return this.getEquipmentType()==a.EquipmentType.Weapon?c.default.instance.storageData.equippedWeaponId==this.getId():c.default.instance.storageData.equippedArmorId==this.getId()},t.prototype.getOwnValue=function(){return u.default.Instance.getGearLevelInfo(this.getQuality(),this.getCurLevel()||1).owned},t.prototype.getEquippedValue=function(){var e=this._gearInfo.equip,t=this._gearInfo.equipUP,n=this.getCurLevel()||1,o=r.default.decode(e),i=r.default.decode(t);return r.default.add(o,r.default.mul(n-1,i))},t.prototype.isBestEquipment=function(){return this.getEquipmentType()==a.EquipmentType.Weapon?this.getId()==u.default.Instance.BestWeaponId:this.getEquipmentType()==a.EquipmentType.Armor&&this.getId()==u.default.Instance.BestArmorId},t.prototype.addCount=function(e){this._curCount+=e,this._level<=0&&(this._level=1)},t.prototype.levelUp=function(){if(!this.canLevelUp())return null;for(var e=this.getCurCount(),t=this._level,n=u.default.Instance.getMaxLevel(this.getQuality());this._curCount-=this.getNextLevelCostCount(),this._level++,!(this._level>=n);){var o=this.getNextLevelCostCount();if(o<=0||this._curCount<o)break}var i=this._curCount-e;return this.emitChange(),{id:this.getId(),prev:t,curr:this._level,cost:i,quality:this.getQuality()}},t}(e("../Domain").default);n.default=d,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Mgr/ItemMgr":"ItemMgr","../../../Mgr/LanguageMgr":"LanguageMgr","../../../Mgr/StorageMgr":"StorageMgr","../../Mgr/EquipmentMgr":"EquipmentMgr","../Domain":"Domain"}],GearListDomain:[function(e,t,n){"use strict";cc._RF.push(t,"3f4c6/tYP9LhpFRgR9jLGus","GearListDomain");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Mgr/StorageMgr"),a=e("../Domain"),s=e("./GearDomain"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._domains=[],t}return i(t,e),t.prototype.getId=function(){},t.prototype.addEquipment=function(e){var t=r.default.instance.storageData.gearStorageInfos.find(function(t){return t.id==e.id}),n=new s.default(e,null==t?void 0:t.level,null==t?void 0:t.count);this._domains.push(n),this.setData(this._domains)},t.prototype.getDomains=function(){return this._domains},t}(a.default);n.default=l,cc._RF.pop()},{"../../../Mgr/StorageMgr":"StorageMgr","../Domain":"Domain","./GearDomain":"GearDomain"}],GearListItem:[function(e,t,n){"use strict";cc._RF.push(t,"0559aPfBFNACrCBsNkjC8SZ","GearListItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/StorageMgr"),c=e("../../Tool/Tool"),u=e("../CommonUI/IUIItem"),d=e("../Mgr/GuideCore/GuideEnums"),h=e("../Mgr/GuideCore/GuideMgr"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.redPointNode=null,t.maxNode=null,t}return i(t,e),t.prototype.setUpValue=function(e,t,n){this._domain=e,this._domain.addListener(this._refreshUI,this),this.node.parent=t,this._clickCallBack=n,c.Tool.addClickEvent(this.node,this._onClickItem,this),this._refreshUI(),this.checkMark(),s.EventMgr.on(a.EventType.Main_UI_Gear_EquipmentBestRedPoint,this.refreshRedPoint,this)},t.prototype._onClickItem=function(){this._clickCallBack&&this._clickCallBack(this._domain),h.default.instance.checkSpecial(d.SpecialGuideEnum.TouchEquipWeaponButton),h.default.instance.checkSpecial(d.SpecialGuideEnum.TouchEquipArmorButton)},t.prototype._refreshUI=function(){this.setIcon(this._domain.getIcon()),this.setQuality(this._domain.getQuality()),this.setArrow(this._domain.canLevelUp()),this.setEquipped(this._domain.isEquipped()),this.setLock(this._domain.isLock()),this.setLevel(this._domain.getCurLevel()),this.setProgress(this._domain.getCurCount(),this._domain.getNextLevelCostCount()),this.levelLabel.node.active=!this._domain.isLock(),this.refreshRedPoint(),this.progressLabel.node.active=this._domain.getNextLevelCostCount()>0,this.maxNode.active=this._domain.getNextLevelCostCount()<=0},t.prototype.refreshRedPoint=function(){this.redPointNode.active=this._domain.isBestEquipment()},t.prototype.checkMark=function(){l.default.instance.storageData.equippedWeaponId!=this._domain.getId()&&l.default.instance.storageData.equippedArmorId!=this._domain.getId()||(this.node.getComponent(cc.Toggle).check(),this._onClickItem())},t.prototype.onDestroy=function(){this._domain.removeListener(this._refreshUI,this)},r([g(cc.Node)],t.prototype,"redPointNode",void 0),r([g(cc.Node)],t.prototype,"maxNode",void 0),r([f],t)}(u.default);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Tool/Tool":"Tool","../CommonUI/IUIItem":"IUIItem","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr"}],GearPanelEntrance:[function(e,t,n){"use strict";cc._RF.push(t,"de6b4K5aspEJLKzOPHhFhac","GearPanelEntrance");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/ItemMgr"),c=e("../../Platform/Platform"),u=e("../../Tool/Tool"),d=e("../Main_PanelOpen"),h=e("../Mgr/EquipmentMgr"),p=e("../Mgr/MgrRing"),f=e("../Mgr/Unlock/MgrUnlock"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.qualityIcon=null,t.icon=null,t.levelLabel=null,t.lockedNode=null,t.typeNode=null,t.strengthenLabel=null,t.typeSpriteFrame=null,t.unlockFrame=null,t.equipmentType=a.EquipmentType.Weapon,t}return i(t,e),t.prototype.onEnable=function(){this.levelLabel.node.active=!1;var e=f.default.Instance.isUnlock(a.UnlockType.summonGear);this.equipmentType==a.EquipmentType.Weapon?(this.lockedNode.active=!e,this.typeNode.active=e,this.qualityIcon.node.active=e,this.refreshUI(h.default.Instance.getCurWeaponDomain()),s.EventMgr.on(a.EventType.Main_UI_Gear_ChangeWeapon,this.refreshUI,this)):this.equipmentType==a.EquipmentType.Armor?(this.lockedNode.active=!e,this.typeNode.active=e,this.qualityIcon.node.active=e,this.refreshUI(h.default.Instance.getCurArmorDomain()),s.EventMgr.on(a.EventType.Main_UI_Gear_ChangeArmor,this.refreshUI,this)):this.equipmentType==a.EquipmentType.Ring?(e=f.default.Instance.isUnlock(a.UnlockType.HeroRush),this.lockedNode.active=!e,this.typeNode.active=e,this.qualityIcon.node.active=e,s.EventMgr.on(a.GlobalEvent.EquipRing,this.onFreshGearView,this),this.onFreshGearView()):(this.lockedNode.active=!0,this.typeNode.active=!1,this.qualityIcon.node.active=!1),u.Tool.addClickEvent(this.node,this._onClickNode,this,null,!0,!1),s.EventMgr.on(a.EventType.Main_UI_Gear_EquipmentStrengthen,this.onSingleLevelUp,this),s.EventMgr.on(a.EventType.Main_UI_Gear_EquipmentStrengthens,this.onLevelUPAll,this)},t.prototype.onFreshGearView=function(){var e=p.default.Instance.getEquipRingId();this.freshView(e)},t.prototype.freshView=function(e){if(-1==e)this.qualityIcon.spriteFrame=this.unlockFrame,this.icon.spriteFrame=this.typeSpriteFrame,this.levelLabel.string="",this.strengthenLabel.string="";else{var t=p.default.Instance.getRingData(e),n=p.default.Instance.get(t.originId).icon;u.Tool.setSprite(this.qualityIcon,a.BundleName.Main,l.default.Instance.getQualityIcon(t.quality)),u.Tool.setSprite(this.icon,a.BundleName.Main,l.default.Instance.getEquipmentIcon(n)),this.levelLabel.string="LV"+t.ringLevel.toString(),this.strengthenLabel.string=0==t.strengthenLv?"":"+"+t.strengthenLv.toString()}},t.prototype._onClickNode=function(){this.lockedNode.active?c.default.instance.showToast("\u656c\u8bf7\u671f\u5f85"):this.equipmentType==a.EquipmentType.Weapon?d.default.show_Main_GearWeapon_Panel():this.equipmentType==a.EquipmentType.Armor?d.default.show_Main_GearArmor_Panel():this.equipmentType==a.EquipmentType.Ring&&d.default.showRingDetailView()},t.prototype.refreshUI=function(e){e&&this._curDomain!=e&&(this._curDomain=e,this._refreshUI(this._curDomain))},t.prototype._refreshUI=function(e){e&&(u.Tool.setSprite(this.qualityIcon,a.BundleName.Main,e.getQualityIcon()),u.Tool.setSprite(this.icon,a.BundleName.Main,e.getIcon()),this.levelLabel.string="LV"+(e.getCurLevel()||1),this.typeNode.active=!0)},t.prototype.onSingleLevelUp=function(e){this._curDomain==e&&this._refreshUI(this._curDomain)},t.prototype.onLevelUPAll=function(){this._refreshUI(this._curDomain)},t.prototype.onDestroy=function(){s.EventMgr.off(a.EventType.Main_UI_Gear_ChangeWeapon,this.refreshUI,this),s.EventMgr.off(a.EventType.Main_UI_Gear_ChangeWeapon,this.refreshUI,this)},r([m(cc.Sprite)],t.prototype,"qualityIcon",void 0),r([m(cc.Sprite)],t.prototype,"icon",void 0),r([m(cc.Label)],t.prototype,"levelLabel",void 0),r([m(cc.Node)],t.prototype,"lockedNode",void 0),r([m(cc.Node)],t.prototype,"typeNode",void 0),r([m(cc.Label)],t.prototype,"strengthenLabel",void 0),r([m(cc.SpriteFrame)],t.prototype,"typeSpriteFrame",void 0),r([m(cc.SpriteFrame)],t.prototype,"unlockFrame",void 0),r([m({type:cc.Enum(a.EquipmentType)})],t.prototype,"equipmentType",void 0),r([y],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen","../Mgr/EquipmentMgr":"EquipmentMgr","../Mgr/MgrRing":"MgrRing","../Mgr/Unlock/MgrUnlock":"MgrUnlock"}],GearStorageInfo:[function(e,t,n){"use strict";cc._RF.push(t,"dd85almVQ9LrqJft+NfUhJZ","GearStorageInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(e("./BaseStorageInfo").default);n.default=r,cc._RF.pop()},{"./BaseStorageInfo":"BaseStorageInfo"}],GearWindow:[function(e,t,n){"use strict";cc._RF.push(t,"ef547Os8DNFy5HXk8BoNXQA","GearWindow");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../../Mgr/StorageMgr"),d=e("../../Platform/Platform"),h=e("../../Res/ResPanelOpen"),p=e("../../Tool/Tool"),f=e("../CommonUI/AsyncQueue"),g=e("../CommonUI/UIItemPool"),y=e("../Main_PanelOpen"),m=e("../Mgr/EquipmentMgr"),v=e("../Mgr/GuideCore/GuideEnums"),_=e("../Mgr/GuideCore/GuideMgr"),b=e("../Mgr/GuideCore/GuideTouch"),S=e("./GearDetailView"),M=e("./GearListItem"),C=cc._decorator,T=C.ccclass,k=C.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gearType=s.EquipmentType.Armor,t.itemTool=null,t.parentNode=null,t.allOwnLabel=null,t.gearDetailView=null,t.btnShop=null,t.btnUpAll=null,t.upAllRedPoint=null,t.btnClose=null,t.resultAsync=null,t.isSetGearTeach=!1,t}return i(t,e),t.prototype.onLoad=function(){this._playResults(),l.EventMgr.on(s.GlobalEvent.GearLevelUp,this.refreshOwnValue,this),l.EventMgr.on(s.GlobalEvent.GearLevelUpAll,this.refreshOwnValue,this),this.refreshUpAllRedPoint()},t.prototype.refreshOwnValue=function(){this.gearType==s.EquipmentType.Armor?this.allOwnLabel.string=c.default.Instance.getLanguage("HP")+"+"+a.default.format(m.default.Instance.getAllArmorOwnedProp())+"%":this.allOwnLabel.string=c.default.Instance.getLanguage("ATK")+"+"+a.default.format(m.default.Instance.getAllWeaponOwnedProp())+"%"},t.prototype._playResults=function(){var e,t=this;this.resultAsync=new f.default;for(var n=function(n,o){var i=e[n];t.resultAsync.push(function(e){var n=t.createItem(i,t.parentNode);n.node.opacity=0,n.node.stopAllActions(),cc.tween(n.node).to(.1,{opacity:255}).start(),t.scheduleOnce(e),o&&(_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchWeaponItem),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchArmorItem))})},o=(e=this.gearType==s.EquipmentType.Armor?m.default.Instance.getArmorDomains():m.default.Instance.getWeaponDomains()).length-1,i=0;i<e.length;i++)n(i,i==o);this.resultAsync.play(),u.default.instance.storageData.equippedArmorId<=0&&this.gearType==s.EquipmentType.Armor?this._handleEquipmentInfo(e[0]):u.default.instance.storageData.equippedWeaponId<=0&&this.gearType==s.EquipmentType.Weapon&&this._handleEquipmentInfo(e[0]),p.Tool.addClickEvent(this.btnClose,this.close,this),p.Tool.addClickEvent(this.btnShop,this.gotoShop,this),p.Tool.addClickEvent(this.btnUpAll,this.lvUpAll,this),this.btnUpAll.getComponentInChildren(cc.Sprite).setState(e.some(function(e){return e.canLevelUp()})?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY)},t.prototype.createItem=function(e,t){var n=this.itemTool.get();n.parent=t,n.stopAllActions();var o=n.getComponent(M.default);return o.setUpValue(e,t,this._handleEquipmentInfo.bind(this)),m.default.Instance.getMaxOwnGear(this.gearType)!=e.getId()||n.getComponent(b.default)||(n.addComponent(b.default).setId(v.SpecialGuideEnum.TouchWeaponItem),n.addComponent(b.default).setId(v.SpecialGuideEnum.TouchArmorItem)),o},t.prototype.onEnable=function(){var e=this,t=this.node.getChildByName("panel");h.default.panelOpen_SmallToBig(t,function(){e.gearType==s.EquipmentType.Weapon?l.EventMgr.event(s.EventType.Common_TeachGear_NextStep,3):l.EventMgr.event(s.EventType.Common_TeachGear_NextStep,7)}),this.refreshOwnValue(),l.EventMgr.on(s.GlobalEvent.GearLevelUp,this.refreshUpAllRedPoint,this),l.EventMgr.on(s.GlobalEvent.GearLevelUpAll,this.refreshUpAllRedPoint,this)},t.prototype.refreshUpAllRedPoint=function(){this.gearType==s.EquipmentType.Armor?this.upAllRedPoint.active=m.default.Instance.getArmorCanLevelUp():this.gearType==s.EquipmentType.Weapon&&(this.upAllRedPoint.active=m.default.Instance.getWeaponCanLevelUp())},t.prototype._handleEquipmentInfo=function(e){this.gearDetailView.handleEquipmentInfo(e)},t.prototype.gotoShop=function(){l.EventMgr.event(s.EventType.Main_UI_Shop_JumpToSummon)},t.prototype.lvUpAll=function(){var e=m.default.Instance.levelUp(this.gearType);if(e.length<=0)d.default.instance.showToast("\u65e0\u53ef\u5f3a\u5316\u7684\u9632\u5177");else{y.default.showStrengthWindow({type:s.StrengthenType.Gear,results:e});var t;t=this.gearType==s.EquipmentType.Armor?m.default.Instance.getArmorCanLevelUp():m.default.Instance.getWeaponCanLevelUp(),this.btnUpAll.getComponentInChildren(cc.Sprite).setState(t?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY)}},t.prototype.close=function(){var e=this.node.getChildByName("panel"),t=this;h.default.panelClose_BigToSmall(e,function(){t.node.destroy(),l.EventMgr.event(s.EventType.Common_TeachGear_NextStep,6),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchArmorView)})},r([k({type:cc.Enum(s.EquipmentType)})],t.prototype,"gearType",void 0),r([k(g.default)],t.prototype,"itemTool",void 0),r([k(cc.Node)],t.prototype,"parentNode",void 0),r([k(cc.Label)],t.prototype,"allOwnLabel",void 0),r([k(S.default)],t.prototype,"gearDetailView",void 0),r([k(cc.Node)],t.prototype,"btnShop",void 0),r([k(cc.Node)],t.prototype,"btnUpAll",void 0),r([k(cc.Node)],t.prototype,"upAllRedPoint",void 0),r([k(cc.Node)],t.prototype,"btnClose",void 0),r([T],t)}(cc.Component);n.default=I,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/StorageMgr":"StorageMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/AsyncQueue":"AsyncQueue","../CommonUI/UIItemPool":"UIItemPool","../Main_PanelOpen":"Main_PanelOpen","../Mgr/EquipmentMgr":"EquipmentMgr","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/GuideCore/GuideTouch":"GuideTouch","./GearDetailView":"GearDetailView","./GearListItem":"GearListItem"}],GlobalEventTarget:[function(e,t,n){"use strict";cc._RF.push(t,"ffea8UCHpJLBYYqOhkt/x53","GlobalEventTarget"),Object.defineProperty(n,"__esModule",{value:!0}),n.GlobalEventTarget=void 0;var o=e("./CustomEventTarget");n.GlobalEventTarget=new o.default,cc._RF.pop()},{"./CustomEventTarget":"CustomEventTarget"}],Global:[function(e,t,n){"use strict";cc._RF.push(t,"98b18LaBlFMlodB9i+eGMH7","Global"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.init=function(){},e.isDev=function(){return!1},e.isBrowser=function(){return cc.sys.isBrowser},e.isMobile=function(){return cc.sys.isMobile},e.isAndroid=function(){return cc.sys.os==cc.sys.OS_ANDROID},e.isIOS=function(){return cc.sys.os==cc.sys.OS_IOS},e.isWeChatMiniGame=function(){return cc.sys.platform==cc.sys.WECHAT_GAME},e}();n.default=o,cc._RF.pop()},{}],GoldRushBoss:[function(e,t,n){"use strict";cc._RF.push(t,"c2dd7OFjqpLuJA1gjcDSzzL","GoldRushBoss");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s,l=e("../../../../plugin/NumberPlus"),c=e("../../../Config/EnumTypes"),u=e("../../../Config/GameData"),d=e("../../../Mgr/EventMgr"),h=e("../../../Mgr/StorageMgr"),p=e("../BattleMgr"),f=e("../Monster"),g=cc._decorator,y=g.ccclass;g.property,function(e){e.attack="play",e.dead="be_hit",e.run="run",e.shortHit="be_hit",e.longHit="be_hit"}(a||(a={})),function(e){e[e.move=0]="move",e[e.attack=1]="attack",e[e.dead=2]="dead"}(s||(s={}));var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.initValue=function(){this.nowHp=this.maxHp,this.rangeOffset=this.anim.node.width*this.node.scaleX*.5,this.stopX=p.default.instance.nowHero.x+this.range+this.rangeOffset,this.isPlayHittingAnim=!1,this.isAlreadyDead=!1,this.isPlayingAtkAnim=!1,this.speed=-25},t.prototype.hit=function(e,t){var n,o=this;if(this.isActive){if(p.default.instance.playWordLabel(null===(n=this.hpBar)||void 0===n?void 0:n.node,e,t),this.nowHp=l.default.sub(this.nowHp,e),l.default.compare(0,this.nowHp)||this.isAlreadyDead)return this.nowHp="0",this.dead(),void this.updateHpBar();if(this.updateHpBar(),!this.isPlayHittingAnim){this.isPlayHittingAnim=!0,this.isHitting=!0,p.default.instance.bornGoldRushFx(this.node.getPosition());var i=this.anim.findAnimation(a.shortHit).duration/p.default.battleSpeed;this.unschedule(this.hitEnd),this.scheduleOnce(this.hitEnd,i),this.scheduleOnce(function(){o.isPlayHittingAnim=!1},i)}}},t.prototype.dead=function(){if(0!=this.isActive&&this.nowState!=s.dead){this.nowState=s.dead,d.EventMgr.event(c.EventType.Battle_Monster_Dead),d.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.DefeatEnemy);var e=l.default.mul(this.gold,u.default.heroCoinAddCal()),t="0"!=this.gold?2:this.gold;d.EventMgr.event(c.EventType.Common_Coin_Add,t,this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),function(){h.default.instance.addCoin(e)}),this.scheduleOnce(this.recyle,this.anim.findAnimation(a.dead).duration/p.default.battleSpeed),p.default.instance.bornMonsterDieFx(this.node.getPosition())}},r([y],t)}(f.default);n.default=m,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../BattleMgr":"BattleMgr","../Monster":"Monster"}],GuideCfg:[function(e,t,n){"use strict";cc._RF.push(t,"3f7d8xcwPJKdquHHhMCIu5W","GuideCfg");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Config/GameData"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cfg={},t._newCfg=[],t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.apply(this,t))return!1;var o=r.default.getJsonObject("guide");for(var i in o){var a=o[i];for(var s in a){var l=a[s],c=l.command.split("|"),u=l.verification.split("|"),d=l.conditions.split("|"),h=l.precondition.split("|"),p=l.postCondition.split("|"),f=a[s];f.isStrict=1==l.isStrict,f.command={type:parseInt(c[0]),args:[parseInt(c[1])]},f.verification={type:parseInt(u[0]),args:[parseInt(u[1])]},f.conditions=[],f.conditions.push({type:parseInt(d[0]),args:[parseInt(d[1])]}),f.precondition={type:parseInt(h[0]),args:[parseInt(h[1])]},f.postCondition={type:parseInt(p[0]),args:[parseInt(p[1])]},f.parentFullPath="App",this._cfg[f.id]=f,this._newCfg.push(f)}}},t.prototype.get=function(e){return this._cfg[e]},t.prototype.getCfg=function(){return this._newCfg},t}(e("../../../Mgr/BaseMgr").default);n.default=a,cc._RF.pop()},{"../../../Config/GameData":"GameData","../../../Mgr/BaseMgr":"BaseMgr"}],GuideCommadFactroy:[function(e,t,n){"use strict";cc._RF.push(t,"6434f+DX3JAgJ5QsmlSFu13","GuideCommadFactroy"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../GuideEnums"),i=e("./ClickCommand"),r=function(){function e(){}return e.create=function(e,t){return e===o.GuideCommandType.CLICK?new i.default(t[0]):null},e}();n.default=r,cc._RF.pop()},{"../GuideEnums":"GuideEnums","./ClickCommand":"ClickCommand"}],GuideCommand:[function(e,t,n){"use strict";cc._RF.push(t,"d3357+qg+hDbZI7PV1ckOc6","GuideCommand"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.onTouchStart=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.onTouchMove=function(){},e.prototype.onTouchEnd=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.onTouchCancel=function(){},e}();n.default=o,cc._RF.pop()},{}],GuideConditionFactroy:[function(e,t,n){"use strict";cc._RF.push(t,"0a567PFv0xKhrzFlP8adixs","GuideConditionFactroy"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../GuideEnums"),i=e("./IsExistActiveProductId"),r=e("./IsExistBlankCoordinate"),a=e("./IsExistOneActiveProduct"),s=e("./IsFirstDead"),l=e("./IsPlayerCanLevelUp"),c=e("./NodeVisible"),u=e("./TaskCanFinish"),d=e("./UnlockCustoms"),h=e("./UnlockSystem"),p=e("./isExsitOneActiveCreator"),f=function(){function e(){}return e.create=function(e,t){return e===o.GuideConditionType.NODE_VISIBLE?new c.default(t):e===o.GuideConditionType.Task_CAN_FINISH?new u.default(t):e===o.GuideConditionType.FIRST_DEAD?new s.default:e===o.GuideConditionType.UNLOCK_SYSTEM?new h.default(t[0]):e===o.GuideConditionType.UNLOCK_CUSTOMS?new d.default:e===o.GuideConditionType.IS_EXIST_ONE_ACTIVE_PRODUCT?new a.default:e===o.GuideConditionType.IS_EXIST_ACTIVE_PRODUCT?new i.default(t[0]):e===o.GuideConditionType.IS_EXIST_BLANK_COORDINATE?new r.default:e===o.GuideConditionType.IS_EXIST_ONE_ACTIVE_CREATOR_COORDINATE?new p.default:e===o.GuideConditionType.IS_PLAYER_CAN_LEVEL_UP?new l.default:null},e}();n.default=f,cc._RF.pop()},{"../GuideEnums":"GuideEnums","./IsExistActiveProductId":"IsExistActiveProductId","./IsExistBlankCoordinate":"IsExistBlankCoordinate","./IsExistOneActiveProduct":"IsExistOneActiveProduct","./IsFirstDead":"IsFirstDead","./IsPlayerCanLevelUp":"IsPlayerCanLevelUp","./NodeVisible":"NodeVisible","./TaskCanFinish":"TaskCanFinish","./UnlockCustoms":"UnlockCustoms","./UnlockSystem":"UnlockSystem","./isExsitOneActiveCreator":"isExsitOneActiveCreator"}],GuideCondition:[function(e,t,n){"use strict";cc._RF.push(t,"bea58sh1edDQYLVr69glKij","GuideCondition"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.isSuccess=function(){return!0},e}();n.default=o,cc._RF.pop()},{}],GuideEnums:[function(e,t,n){"use strict";cc._RF.push(t,"7c4036SY+RACpAewyZXnYKn","GuideEnums"),Object.defineProperty(n,"__esModule",{value:!0}),n.SpecialGuideEnum=n.GuideEvent=n.GuideCommandType=n.GuideVerifactionEvent=n.GuideVerifactionType=n.GuideConditionType=void 0,function(e){e[e.NODE_VISIBLE=0]="NODE_VISIBLE",e[e.Task_CAN_FINISH=1]="Task_CAN_FINISH",e[e.FIRST_DEAD=2]="FIRST_DEAD",e[e.UNLOCK_SYSTEM=3]="UNLOCK_SYSTEM",e[e.UNLOCK_CUSTOMS=4]="UNLOCK_CUSTOMS",e[e.IS_EXIST_ONE_ACTIVE_PRODUCT=5]="IS_EXIST_ONE_ACTIVE_PRODUCT",e[e.IS_EXIST_ACTIVE_PRODUCT=6]="IS_EXIST_ACTIVE_PRODUCT",e[e.IS_EXIST_BLANK_COORDINATE=7]="IS_EXIST_BLANK_COORDINATE",e[e.IS_EXIST_ONE_ACTIVE_CREATOR_COORDINATE=8]="IS_EXIST_ONE_ACTIVE_CREATOR_COORDINATE",e[e.IS_PLAYER_CAN_LEVEL_UP=9]="IS_PLAYER_CAN_LEVEL_UP"}(n.GuideConditionType||(n.GuideConditionType={})),function(e){e[e.CLICK_IN_REGIN=0]="CLICK_IN_REGIN",e[e.DRAG_IN_REGIN=1]="DRAG_IN_REGIN",e[e.POP_VIEW_OPEN=2]="POP_VIEW_OPEN",e[e.NET_REQUEST_SUCCESS=3]="NET_REQUEST_SUCCESS"}(n.GuideVerifactionType||(n.GuideVerifactionType={})),function(e){e.CLICK_IN_REGIN="CLICK_IN_REGIN",e.DRAG_IN_REGIN="DRAG_IN_REGIN"}(n.GuideVerifactionEvent||(n.GuideVerifactionEvent={})),function(e){e[e.CLICK=0]="CLICK",e[e.DRAG=1]="DRAG"}(n.GuideCommandType||(n.GuideCommandType={})),function(e){e.TASK_VERIFICTION_FAILED="GUIDE_EVENT_TASK_VERIFICTION_FAILED",e.TASK_ACTIVE="GUIDE_EVENT_TASK_ACTIVE",e.TASK_DEACTIVE="GUIDE_EVENT_TASK_DEACTIVE",e.STEP_SUCCESS="GUIDE_EVENT_STEP_SUCCESS",e.END="GUIDE_EVENT_END",e.COMPLETE_SPECIAL_GUIDE="COMPLETE_SPECIAL_GUIDE",e.COMPLETE_NORMAL_GUIDE="COMPLETE_NORMAL_GUIDE"}(n.GuideEvent||(n.GuideEvent={})),function(e){e[e.None=0]="None",e[e.TouchMine=202]="TouchMine",e[e.TouchMineItem=203]="TouchMineItem",e[e.TouchShopSummonSkill=302]="TouchShopSummonSkill",e[e.TouchSkillButton=303]="TouchSkillButton",e[e.CloseSkillView=304]="CloseSkillView",e[e.TouchHeroButton=305]="TouchHeroButton",e[e.TouchUpgradeSkillButton=306]="TouchUpgradeSkillButton",e[e.TouchSkillItem=307]="TouchSkillItem",e[e.TouchEquipSkillButton=308]="TouchEquipSkillButton",e[e.TouchCloseSkillView=309]="TouchCloseSkillView",e[e.TouchAutoSkillButton=310]="TouchAutoSkillButton",e[e.TouchShopSummonGear=402]="TouchShopSummonGear",e[e.TouchGearButton=403]="TouchGearButton",e[e.CloseGearView=404]="CloseGearView",e[e.TouchHeroButton2=405]="TouchHeroButton2",e[e.TouchUpgradeGearButton=406]="TouchUpgradeGearButton",e[e.TouchWeaponView=407]="TouchWeaponView",e[e.TouchWeaponItem=408]="TouchWeaponItem",e[e.TouchEquipWeaponButton=409]="TouchEquipWeaponButton",e[e.TouchClosEquipWeaponButton=410]="TouchClosEquipWeaponButton",e[e.TouchArmorView=411]="TouchArmorView",e[e.TouchArmorItem=412]="TouchArmorItem",e[e.TouchEquipArmorButton=413]="TouchEquipArmorButton",e[e.TouchShopSummonPartner=502]="TouchShopSummonPartner",e[e.TouchPartnerButton=503]="TouchPartnerButton",e[e.ClosePartnerView=504]="ClosePartnerView",e[e.TouchUpgradePartnerButton=505]="TouchUpgradePartnerButton",e[e.TouchPartnerItem=506]="TouchPartnerItem",e[e.TouchEquipPartnerButton=507]="TouchEquipPartnerButton",e[e.TouchBossButton=602]="TouchBossButton",e[e.TouchBossEnterButton=603]="TouchBossEnterButton",e[e.TouchBattleButton=701]="TouchBattleButton",e[e.TouchCoinButton=702]="TouchCoinButton",e[e.TouchCoinEnterButton=703]="TouchCoinEnterButton",e[e.TouchTraitToggle=802]="TouchTraitToggle",e[e.TouchChangButton=803]="TouchChangButton",e[e.TouchBattleButton2=804]="TouchBattleButton2",e[e.TouchSnowButton=805]="TouchSnowButton",e[e.TouchSearchButton=901]="TouchSearchButton",e[e.TouchUpgradeMineButton=902]="TouchUpgradeMineButton",e[e.TouchHeroButton3=1001]="TouchHeroButton3",e[e.TouchUpgradeHeroToggle=1002]="TouchUpgradeHeroToggle",e[e.TouchChangeHero=1003]="TouchChangeHero",e[e.TouchUpgradeHeroButton=1004]="TouchUpgradeHeroButton",e[e.TouchCloseHeroView=1005]="TouchCloseHeroView",e[e.TouchMasteryButton=1006]="TouchMasteryButton",e[e.TouchUpgradeMastery=1007]="TouchUpgradeMastery",e[e.TouchCaveRushButton=1102]="TouchCaveRushButton",e[e.TouchCaveRushEnterButton=1103]="TouchCaveRushEnterButton",e[e.TouchCaveRushReward=1200]="TouchCaveRushReward",e[e.TouchHeroButton4=1201]="TouchHeroButton4",e[e.TouchRelicToggle=1202]="TouchRelicToggle",e[e.TouchSearchRelicButton=1203]="TouchSearchRelicButton",e[e.TouchAnyWhere=1204]="TouchAnyWhere",e[e.TouchRelicIcon=1205]="TouchRelicIcon",e[e.TouchRelicItem=1206]="TouchRelicItem",e[e.TouchRelicEquipButton=1207]="TouchRelicEquipButton",e[e.TouchLegionRushButton=1302]="TouchLegionRushButton",e[e.TouchEnterLegionRushButton=1303]="TouchEnterLegionRushButton",e[e.TouchLegionRushReward=1401]="TouchLegionRushReward",e[e.TouchLegionRushReward2=1402]="TouchLegionRushReward2",e[e.TouchHeroButton5=1403]="TouchHeroButton5",e[e.TouchHeroToggle=1404]="TouchHeroToggle",e[e.TouchRingButton=1405]="TouchRingButton",e[e.TouchRingItem=1406]="TouchRingItem",e[e.TouchRingEquipButton=1407]="TouchRingEquipButton",e[e.TouchSignAnyWhere=1500]="TouchSignAnyWhere",e[e.TouchLegionRushSelectHero=1600]="TouchLegionRushSelectHero",e[e.TouchLegionRushSelectProp=1700]="TouchLegionRushSelectProp",e[e.SkillSlotUnlock2=502e3]="SkillSlotUnlock2",e[e.SkillSlotUnlock3=503e3]="SkillSlotUnlock3",e[e.SkillSlotUnlock4=504e3]="SkillSlotUnlock4",e[e.SkillSlotUnlock5=505e3]="SkillSlotUnlock5",e[e.SkillSlotUnlock6=506e3]="SkillSlotUnlock6"}(n.SpecialGuideEnum||(n.SpecialGuideEnum={})),cc._RF.pop()},{}],GuideFinger:[function(e,t,n){"use strict";cc._RF.push(t,"d2364gN6SJKz6ZLcPAJLyjB","GuideFinger");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Tool/UIUtil"),s=e("./GuideMgr"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.circle=null,t._curTaskId=0,t}return i(t,e),t.prototype.init=function(e,t){this._curTaskId=t,this._command=e,this.resetUI(),this.updateNodesInfo(),this.refreshUI(),this.onNodePosChange()},t.prototype.updateNodesInfo=function(){this._nodes=[],this._nodePos=[];var e=this._command.args[0],t=s.default.instance.getGuideNode(e);this._nodes.push(t),this._nodePos.push(a.default.convertToNodeSpaceAR(this._nodes[0],cc.v2(0,0),this.node.parent))},t.prototype.resetUI=function(){this.node.scale=1,this.node.stopAllActions(),this.icon.active=!1,this.icon.angle=0,this.icon.scale=1,this.icon.stopAllActions(),this.circle.active=!1,this.circle.scale=1,this.circle.opacity=255,this.circle.stopAllActions()},t.prototype.refreshUI=function(){this.icon.active=!0},t.prototype.updateScaleAndAngel=function(e){e.y<0-cc.winSize.height/2+200?(this.node.scaleY=1,this.node.scaleY=-1,this.node.y=120):(this.node.scaleY=1,this.node.scaleY=1,this.node.y=-120)},t.prototype.onNodePosChange=function(){var e=this;this.updateScaleAndAngel(this._nodePos[0]),this.node.stopAllActions(),cc.tween(this.node).sequence(cc.moveTo(.3,this._nodePos[0]),cc.callFunc(function(){1204!=e._curTaskId&&(e.circle.active=!0),cc.tween(e.icon).sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1),cc.callFunc(function(){})).repeatForever().start(),cc.tween(e.circle).sequence(cc.spawn(cc.scaleTo(1,1.2),cc.fadeOut(1)),cc.callFunc(function(){e.circle.scale=1,e.circle.opacity=255})).repeatForever().start()})).start()},t.prototype.update=function(){var e=a.default.convertToNodeSpaceAR(this._nodes[0],cc.v2(0,0),this.node.parent);e.equals(this._nodePos[0])||(this._nodePos[0]=e,this.onNodePosChange())},r([u(cc.Node)],t.prototype,"icon",void 0),r([u(cc.Node)],t.prototype,"circle",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Tool/UIUtil":"UIUtil","./GuideMgr":"GuideMgr"}],GuideHand:[function(e,t,n){"use strict";cc._RF.push(t,"ca9dbn7u6hLraUadrS675NW","GuideHand");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){s.EventMgr.on(a.EventType.Common_GuideHand_Destroy,this.guideHandDestroy,this)},t.prototype.guideHandDestroy=function(){this.node.destroy()},r([c],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr"}],GuideMask:[function(e,t,n){"use strict";cc._RF.push(t,"9f63eFH+v1P54FJuGUQxYje","GuideMask");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Tool/UIUtil"),s=e("../GuideCore/GuideEnums"),l=e("../GuideCore/GuideMgr"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.init=function(e){this._command=e,this.updateNodesInfo(),this.refresh()},t.prototype.updateNodesInfo=function(){this._nodes=[],this._nodePos=[];for(var e=0;e<this._command.args.length;e++){var t=Number(this._command.args[0]),n=l.default.instance.getGuideNode(t);this._nodes.push(n),this._nodePos.push(a.default.convertToNodeSpaceAR(this._nodes[e],cc.v2(0,0),this.node))}},t.prototype.refresh=function(){var e=this.getComponent(cc.Mask)._graphics;if(e.clear(),this._command.type===s.GuideCommandType.CLICK||this._command.type===s.GuideCommandType.DRAG){for(var t=0;t<this._nodePos.length;t++){var n=this._nodes[t].width,o=this._nodes[t].height;e.rect(this._nodePos[t].x-n/2,this._nodePos[t].y-o/2,n,o)}e.fill()}},t.prototype.update=function(){var e=a.default.convertToNodeSpaceAR(this._nodes[0],cc.v2(0,0),this.node.parent);e.equals(this._nodePos[0])||(this._nodePos[0]=e,this.refresh()),e.equals(this._nodePos[0])||(this._nodePos[0]=e,this.refresh())},r([u],t)}(cc.Component));n.default=d,cc._RF.pop()},{"../../../Tool/UIUtil":"UIUtil","../GuideCore/GuideEnums":"GuideEnums","../GuideCore/GuideMgr":"GuideMgr"}],GuideMgr:[function(e,t,n){"use strict";cc._RF.push(t,"988a1wRj0tJCb5WmIf+Adj3","GuideMgr");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.GUIDE_END=void 0;var r=e("../../../Config/EnumTypes"),a=e("./GuideTaskMgr"),s=e("./GuideUI"),l=e("../../../Mgr/EventMgr"),c=e("../../../Mgr/StorageMgr"),u=e("./GuideCfg"),d=e("./GuideEnums"),h=e("../../../Tool/Tool"),p=e("./GuideTextCfg"),f=e("../../Main_UI"),g=e("../../Battle/BattleMgr"),y=e("./Event/GlobalEventTarget"),m=e("../../Main_PanelOpen"),v=e("../../../Config/GameData");n.GUIDE_END=20050;var _=function(){function e(){this.touchNodePool=[],this.checkSpecialId=-1,this._isInGuide=!1,this.preconditionGuide=[],this._curSpecialId=-1,this._config={},this._guideData={},this._mainGuideTypes=[0],this._extraGuideTypes=[1],this._taskMgr=new a.default,this._isEnd=!1,this._maskNode=null}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fingerGuideNode",{get:function(){return this._fingerGuide},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inGuide",{set:function(e){this._isInGuide=e,l.EventMgr.event(r.EventType.Common_Current_IsInGuide,e)},enumerable:!1,configurable:!0}),e.prototype.GetGuide=function(){return c.default.instance.storageData.guideData},e.prototype.SetGuide=function(e){this._guideData=e,c.default.instance.saveGuideData(e)},e.prototype.addGuideNode=function(e,t){for(var n=0;n<this.touchNodePool.length;n++)if(this.touchNodePool[n].id==e)return void(this.touchNodePool[n].guideNode=t);this.touchNodePool.push({id:e,guideNode:t})},e.prototype.getGuideNode=function(e){for(var t=0;t<this.touchNodePool.length;t++)if(this.touchNodePool[t].id==e)return this.touchNodePool[t].guideNode;return cc.error("Guide node is null:"+e),null},e.prototype.removeGuideNode=function(){},e.prototype.init=function(e,t,n,o){this._guideData=this.GetGuide(),this.readConfig(u.default.Instance.getCfg()),this.initGuideData(),this.checkEnd(),this.updateGuideData(),this.createTasks(),this.checkEnd(),this.createUI(e,t,n,o),this.checkLastSpecial(),l.EventMgr.on(r.GlobalEvent.ShowMask,this.onShowMask,this)},e.prototype.createUI=function(e,t,n,o){var i=cc.find("App");this._fingerGuide=e;var r=cc.instantiate(t);this._guideUI=r.getComponent(s.default),i.addChild(this._guideUI.node),this._guideUI.node.active=!1,this._maskNode=cc.instantiate(n),i.addChild(this._maskNode),this._maskNode.active=!1,this.guideTextUINode=cc.instantiate(o),i.addChild(this.guideTextUINode),this.guideTextUINode.active=!1},e.prototype.onShowMask=function(e){this._maskNode.active=e},e.prototype.completeSpecialGuide=function(e){this.addSpecialGuide(e)},e.prototype.checkLastSpecial=function(){var e=c.default.instance.storageData.lastGuideId;if(!(-1==e||this.isLastSpecial(e)&&this.isCompleteSpecialGuide(e))){for(var t=this._config[1],n=0,o=0;o<t.length;o++)if(t[o][0].id==e){n=this.isCompleteSpecialGuide(e)?t[o][0].recoverStep:t[o][0].id%100==1?t[o][0].recoverStep:t[o-1][0].recoverStep;var i=this.getSpecialConfig(n);if(null!=i){var r=i.precondition;if(0==r.type&&-1!=r.args[0])for(var a=0;a<r.args.length;a++)this.preconditionGuide.push(r.args[a])}break}0!=n&&(this.recoverSpecialData(n),this.checkSpecialId=n)}},e.prototype.reportGuideFinish=function(){},e.prototype.recoverSpecialData=function(e){var t=Math.floor(e/100),n=[],o=c.default.instance.storageData.specialGuideData;o.length>0&&(n=o);for(var i=this._config[1],r=0;r<i.length;r++){var a=i[r][0].id;Math.floor(a/100)==t&&(a>=e?-1!=n.indexOf(a)&&n.splice(n.indexOf(a),1):-1==n.indexOf(a)&&n.push(a))}c.default.instance.saveSpecialGuideData(n)},e.prototype.startCheckLastSpecial=function(){-1!=this.checkSpecialId&&(this.preconditionGuide.length>0?(this.checkPreCondition(this.preconditionGuide[0]),this.preconditionGuide.splice(0,1)):this.checkSpecial(this.checkSpecialId))},e.prototype.isLastSpecial=function(e){for(var t=Math.floor(e/100),n=this._config[1],o=0;o<n.length;o++){var i=n[o][0].id;if(Math.floor(i/100)==t&&i>e)return!1}return!0},e.prototype.isCompleteGuide=function(e){return this._guideData[0].stage>e},e.prototype.readConfig=function(e){var t=this;e.forEach(function(e){t._config[e.type]=t._config[e.type]||[],t._config[e.type][e.stage]=t._config[e.type][e.stage]||[],t._config[e.type][e.stage][e.step]=e})},e.prototype.initGuideData=function(){for(var e in this._guideData=this._guideData||{},this._config)this._guideData[e]=this._guideData[e]||{stage:0,step:0}},e.prototype.updateGuideData=function(){if(!this._isEnd){for(var e in this._config){var t=this._config[e],n=this._guideData[e];n.stage>=t.length?(n.stage=t.length,n.step=0):n.step>=t[n.stage].length&&(n.stage+=1,n.step=0)}this.recoverStep()}},e.prototype.recoverStep=function(){for(var e in this._guideData){var t=this._config[e],n=this._guideData[e];n.stage>=t.length||(-1==t[n.stage][n.step].recoverStep?(n.stage+=1,n.step=0):n.step=0)}},e.prototype.createTasks=function(){for(var e in this._config)for(var t=this._config[e],n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)this._taskMgr.addTask(parseInt(e),n,o,t[n][o])},e.prototype.checkEnd=function(){var e=!0,t=this._config[0];this._guideData[0].stage<t.length&&(e=!1),!this._isEnd&&e&&y.GlobalEventTarget.emit(d.GuideEvent.END),this._isEnd=e},e.prototype.addSpecialGuide=function(e){var t=[],n=c.default.instance.storageData.specialGuideData;n.length>0?t=n:c.default.instance.saveSpecialGuideData(t),-1==t.indexOf(e)&&(t.push(e),c.default.instance.saveSpecialGuideData(t))},e.prototype.checkNormalGuide=function(){},e.prototype.stopSpecialGuide=function(){y.GlobalEventTarget.emit(d.GuideEvent.TASK_DEACTIVE,this._curTask),this.inGuide=!1,l.EventMgr.event(d.GuideEvent.COMPLETE_SPECIAL_GUIDE),this.stopGuide(),l.EventMgr.event(r.GlobalEvent.ShowMask,!1),c.default.instance.saveLastGuideId(-1)},e.prototype.nextStep=function(e){if(null==e&&(e=!1),2==this._curTask.type)return this.inGuide=!1,void(0==this.preconditionGuide.length&&(h.Tool.wait(.03),this.startCheckLastSpecial()));if(1!=this._curTask.type){this.stopGuide();var t=this.getNormalConfig(this._curTask.id).postCondition;if(!e&&1==t.type&&-1!=t.args[0]){this.inGuide=!0;var n=p.default.Instance.get(t.args[0]);return l.EventMgr.event(r.GlobalEvent.GuideTextShow,!1,0,n),void y.GlobalEventTarget.emit(d.GuideEvent.TASK_DEACTIVE,this._curTask)}this.reportGuideFinish(this._curTask.id),this._guideData[this._curTask.type].step+=1,this._guideData[this._curTask.type].step>=this._taskMgr.getStepLength(this._curTask.type,this._curTask.stage)&&(this._guideData[this._curTask.type].stage+=1,this._guideData[this._curTask.type].step=0),this.save(),this.checkEnd(),this.isEnd()&&y.GlobalEventTarget.emit(d.GuideEvent.COMPLETE_NORMAL_GUIDE),y.GlobalEventTarget.emit(d.GuideEvent.STEP_SUCCESS,{Type:this._curTask.type,Stage:this._curTask.stage,Step:this._curTask.step}),this.inGuide=!1,this._curTask=null,this.check()}else{if(this.addSpecialGuide(this._curTask.id),y.GlobalEventTarget.emit(d.GuideEvent.TASK_DEACTIVE,this._curTask),this.inGuide=!1,t=this.getSpecialConfig(this._curTask.id).postCondition,!e&&1==t.type&&-1!=t.args[0])return this._isInGuide=!0,n=p.default.Instance.get(t.args[0]),l.EventMgr.event(r.GlobalEvent.GuideTextShow,!1,1,n),void y.GlobalEventTarget.emit(d.GuideEvent.TASK_DEACTIVE,this._curTask);this.isLastSpecial(this._curTask.id)?(l.EventMgr.event(d.GuideEvent.COMPLETE_SPECIAL_GUIDE),this.stopGuide(),l.EventMgr.event(r.GlobalEvent.ShowMask,!1)):l.EventMgr.event(r.GlobalEvent.ShowMask,!0)}},e.prototype.isEnd=function(){return this._isEnd},e.prototype.check=function(t){if(null==t&&(t=!1),!e.skipGuide&&!this.isEnd()){var n=this.getNewTask();if(!t&&n){var o=this.getNormalConfig(n.id).precondition;if(1==o.type&&-1!=o.args[0]){f.default.instance.closeAll(),g.default.instance.pause(),this.inGuide=!0;var i=p.default.Instance.get(Number(o.args[0]));return void l.EventMgr.event(r.GlobalEvent.GuideTextShow,!0,0,i)}}this._curTask&&this._curTask!=n&&(y.GlobalEventTarget.emit(d.GuideEvent.TASK_DEACTIVE,this._curTask),this.inGuide=!1,this.recoverStep()),this._curTask=n,this._curTask&&this._curTask.isTrigger()&&(this.startGuide(),v.default.isTest&&console.log(">>>> this is Check:",this._curTask.id,this._curTask.text),y.GlobalEventTarget.emit(d.GuideEvent.TASK_ACTIVE,this._curTask),this.inGuide=!0,f.default.instance.closeAll())}},e.prototype.startGuide=function(){1==this._curTask.id?g.default.instance.pause():2==this._curTask.id&&(l.EventMgr.event(r.GlobalEvent.GuideScrollToFirst),g.default.instance.pause()),1!=this._curTask.type&&2!=this._curTask.type||g.default.instance.pause()},e.prototype.stopGuide=function(){null!=this._curTask?(1==this._curTask.id?g.default.instance.resume():2==this._curTask.id&&g.default.instance.resume(),1!=this._curTask.type&&2!=this._curTask.type||g.default.instance.resume()):g.default.instance.resume()},e.prototype.isInGuide=function(){return this._isInGuide},e.prototype.checkPreCondition=function(t){if(!e.skipGuide){var n=this.getPreconditionConfig(t);null!=n&&(this._curTask=this._taskMgr.getTask(2,n.stage,n.step),this._curTask&&(y.GlobalEventTarget.emit(d.GuideEvent.TASK_ACTIVE,this._curTask),v.default.isTest&&console.log(">>> this is checkPreCondition"),this.inGuide=!0))}},e.prototype.checkSpecial=function(t,n){return o(this,void 0,void 0,function(){var o,a,s;return i(this,function(i){switch(i.label){case 0:if(null==n&&(n=!1),e.skipGuide)return[3,2];if(o=this.getSpecialConfig(t),!n){if(this.isCompleteSpecialGuide(t))return[2];if(this.isLockSpecialGuide(t))return[2];if(null==o)return[2];if(1==o.type&&c.default.instance.saveLastGuideId(t),1==(a=o.precondition).type&&-1!=a.args[0])return this.inGuide=!0,s=p.default.Instance.get(a.args[0]),l.EventMgr.event(r.GlobalEvent.GuideTextShow,!0,1,s),this._curSpecialId=t,[2]}return-1==t&&(t=this._curSpecialId,o=this.getSpecialConfig(t)),this._curTask=this._taskMgr.getTask(1,o.stage,o.step),this._curTask?[4,this.startSpecialGuide(this._curTask.id)]:[3,2];case 1:i.sent(),v.default.isTest&&console.log(">> this is checkSpecial:",this._curTask.id,this._curTask.text),y.GlobalEventTarget.emit(d.GuideEvent.TASK_ACTIVE,this._curTask),this.inGuide=!0,this.startGuide(),l.EventMgr.event(r.GlobalEvent.ShowMask,!1),i.label=2;case 2:return[2]}})})},e.prototype.startSpecialGuide=function(e){return o(this,void 0,void 0,function(){return i(this,function(){if(e==d.SpecialGuideEnum.TouchBattleButton)f.default.instance.setNormal();else if(e==d.SpecialGuideEnum.TouchSnowButton);else{if(e==d.SpecialGuideEnum.TouchSearchButton)return l.EventMgr.event(r.GlobalEvent.CloseMineView),[2,new Promise(function(e){cc.find("Canvas").getChildByName("panel1").getChildByName("Main_MinePanel")?e(null):m.default.show_Main_Mine_Panel(function(){e(null)})})];if(e==d.SpecialGuideEnum.TouchHeroButton3)l.EventMgr.event(r.GlobalEvent.CloseAllMineView);else if(e==d.SpecialGuideEnum.TouchCaveRushButton);else if(e==d.SpecialGuideEnum.TouchLegionRushButton);else if(e==d.SpecialGuideEnum.TouchMasteryButton)return[2,new Promise(function(e){cc.find("Canvas").getChildByName("panel1").getChildByName("Main_RolePanel")?e(null):m.default.show_Main_Role_Panel(!1,function(){e(null)})})]}return[2]})})},e.prototype.getNormalConfig=function(e){for(var t=this._config[0],n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)if(t[n][o].id==e)return t[n][o];return null},e.prototype.getSpecialConfig=function(e){for(var t=this._config[1],n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)if(t[n][o].id==e)return t[n][o];return null},e.prototype.getPreconditionConfig=function(e){for(var t=this._config[2],n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)if(t[n][o].id==e)return t[n][o];return null},e.prototype.isLockSpecialGuide=function(e){for(var t=this._config[1],n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)if(t[n][o].id==e)return 0!=t[n][o].lockId&&!this.isCompleteSpecialGuide(t[n][o].lockId);return!1},e.prototype.getSpecialGuideEnum=function(e,t){for(var n=d.SpecialGuideEnum.None,o=this._config[1],i=0;i<o.length;i++)for(var r=0;r<o[i].length;r++){var a=o[i][r].conditions[0];if(a.type==e&&a.args[0]==t)return o[i][r].id}return n},e.prototype.isCompleteSpecialGuide=function(e){var t=[],n=c.default.instance.storageData.specialGuideData;return null!=n?t=n:c.default.instance.saveSpecialGuideData(t),-1!=t.indexOf(e)},e.prototype.getNewTask=function(){for(var e=this._mainGuideTypes,t=0;t<e.length;t++){var n=e[t],o=this._guideData[n],i=o.stage,r=o.step,a=this._taskMgr.getTask(n,i,r);if(a&&a.isTrigger())return a}return null},e.prototype.isMainGuideEnd=function(){for(var e=0;e<this._mainGuideTypes.length;e++){var t=this._mainGuideTypes[e];return!(this._guideData[t].stage<this._taskMgr.getStageLength(t))}},e.prototype.getCurTask=function(){return this._curTask},e.prototype.getTaskMgr=function(){return this._taskMgr},e.prototype.setGuideData=function(e,t,n){this._guideData[e].stage=t,this._guideData[e].step=n,this.save(),this.checkEnd(),this.check()},e.prototype.skipAll=function(){var e=this._mainGuideTypes;e=e.concat(this._extraGuideTypes);for(var t=0;t<e.length;t++){var n=e[t];this._guideData[n].stage=this._taskMgr.getStageLength(n),this._guideData[n].step=0}this.checkEnd();var o=this._taskMgr.getTasks(),i=[];myGlobalThis.each(o,function(e){myGlobalThis.each(e,function(e){myGlobalThis.each(e,function(e){i.push(e.id)})})}),c.default.instance.saveSpecialGuideData(i),this.save()},e.prototype.save=function(){this.SetGuide(this._guideData)},e.skipGuide=!1,e}();n.default=_,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Tool/Tool":"Tool","../../Battle/BattleMgr":"BattleMgr","../../Main_PanelOpen":"Main_PanelOpen","../../Main_UI":"Main_UI","./Event/GlobalEventTarget":"GlobalEventTarget","./GuideCfg":"GuideCfg","./GuideEnums":"GuideEnums","./GuideTaskMgr":"GuideTaskMgr","./GuideTextCfg":"GuideTextCfg","./GuideUI":"GuideUI"}],GuideNode:[function(e,t,n){"use strict";cc._RF.push(t,"dcaefvo+6FGto9NeT09iIr+","GuideNode");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./MgrGuide"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id="",t}return i(t,e),t.prototype.onLoad=function(){a.default.guideNode.set(this.id,this.node)},r([c],t.prototype,"id",void 0),r([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"./MgrGuide":"MgrGuide"}],GuideTaskMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ffc9bJod6ZK6oh87/H6WNj9","GuideTaskMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./GuideTask"),i=function(){function e(){this._tasks={}}return e.prototype.addTask=function(e,t,n,i){this._tasks[e]=this._tasks[e]||[],this._tasks[e][t]=this._tasks[e][t]||[],this._tasks[e][t][n]=new o.default(i)},e.prototype.getTask=function(e,t,n){return this.getStageLength(e)<=t?null:this._tasks[e][t][n]},e.prototype.getStage=function(e,t){return this._tasks[e]&&this._tasks[e][t]},e.prototype.getStageLength=function(e){return this._tasks[e].length},e.prototype.getStepLength=function(e,t){return this._tasks[e][t].length},e.prototype.getTasks=function(){return this._tasks},e}();n.default=i,cc._RF.pop()},{"./GuideTask":"GuideTask"}],GuideTask:[function(e,t,n){"use strict";cc._RF.push(t,"40c5eNr13JA97Oq2Jm2heZ/","GuideTask"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./condition/GuideConditionFactroy"),i=function(){function e(e){this._id=e.id,this._type=e.type,this._stage=e.stage,this._step=e.step,this._isStrict=e.isStrict,this._findeNodePosDelayTime=e.findNodePosDelayTime,this._recoverStep=e.recoverStep,this._text=e.text,this._parentFullPath=e.parentFullPath,this._command=e.command,this._verification=e.verification,this._conditions=e.conditions,this._extraConditions=[]}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stage",{get:function(){return this._stage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isStrict",{get:function(){return this._isStrict},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"findeNodePosDelayTime",{get:function(){return this._findeNodePosDelayTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recoverStep",{get:function(){return this._recoverStep},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this._command},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verification",{get:function(){return this._verification},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conditions",{get:function(){return this._conditions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentFullPath",{get:function(){return this._parentFullPath},enumerable:!1,configurable:!0}),e.prototype.isTrigger=function(){if(this.conditions.length<1&&this._extraConditions.length<1)return!0;for(var e,t,n=[],i=0;i<this._conditions.length;i++)e=this._conditions[i],t=o.default.create(e.type,e.args),n.push(t);for(i=0;i<this._extraConditions.length;i++)e=this._extraConditions[i],t=o.default.create(e.type,e.args),n.push(t);for(i=0;i<n.length;i++)if(!n[i].isSuccess())return!1;return!0},e.prototype.setVerification=function(e,t){this._verification={type:e,args:t}},e.prototype.setCommand=function(e,t){this._command={type:e,args:t}},e.prototype.setExtraConditions=function(e){this._extraConditions=e},e}();n.default=i,cc._RF.pop()},{"./condition/GuideConditionFactroy":"GuideConditionFactroy"}],GuideTextCfg:[function(e,t,n){"use strict";cc._RF.push(t,"83160LZ+JtOQK3HGy7z3rJo","GuideTextCfg");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Config/GameData"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._cfg={},t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;var o=r.default.getJsonObject("guideText");for(var i in o){var a=o[i];this._cfg[a.id]=a}},t.prototype.get=function(e){return this._cfg[e]},t.prototype.getCfg=function(){return this._cfg},t._instance=null,t}(e("../../../Mgr/BaseMgr").default);n.default=a,cc._RF.pop()},{"../../../Config/GameData":"GameData","../../../Mgr/BaseMgr":"BaseMgr"}],GuideTextDialog:[function(e,t,n){"use strict";cc._RF.push(t,"4d137sUUSRK8KF8wlpyG2rR","GuideTextDialog");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Mgr/LanguageMgr"),s=e("../../../Tool/UIUtil"),l=e("./GuideEnums"),c=e("./GuideMgr"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text=null,t.textLabel=null,t}return i(t,e),t.prototype.init=function(e){""!=e.text?(this._text=a.default.Instance.getLanguage(e.text),this._command=e.command,this.initNodes(),this.refresh()):this.node.active=!1},t.prototype.initNodes=function(){if(this._nodes=[],this._command.type===l.GuideCommandType.CLICK||this._command.type===l.GuideCommandType.DRAG)for(var e=0;e<this._command.args.length;e++){var t=Number(this._command.args[0]),n=c.default.instance.getGuideNode(t);this._nodes.push(n)}},t.prototype.refresh=function(){this.textLabel.string=this._text,this.text.getComponent(cc.Layout).updateLayout(),this.node.getComponent(cc.Layout).updateLayout(),this.updatePos()},t.prototype.updatePos=function(){if(this._command.type===l.GuideCommandType.CLICK){var e=s.default.convertToNodeSpaceAR(this._nodes[0],cc.v2(0,0),this.node.parent);if(!this._nodePos||!e.equals(this._nodePos)){var t;t=e.y>=cc.winSize.height/2-350?e.y-200:e.y+250,this.node.setPosition(0,t),this._nodePos=e}}},t.prototype.update=function(){this.updatePos()},r([h(cc.Node)],t.prototype,"text",void 0),r([h(cc.Label)],t.prototype,"textLabel",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Mgr/LanguageMgr":"LanguageMgr","../../../Tool/UIUtil":"UIUtil","./GuideEnums":"GuideEnums","./GuideMgr":"GuideMgr"}],GuideTextUI:[function(e,t,n){"use strict";cc._RF.push(t,"5514d/ThylNKoeq4wF4LoqW","GuideTextUI");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/LanguageMgr"),c=e("../../Battle/BattleMgr"),u=e("./GuideMgr"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textLabel=null,t._cfg=null,t._index=0,t._isPre=!0,t}return i(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.freshText,this),s.EventMgr.on(a.GlobalEvent.GuideTextShow,this.showText,this)},t.prototype.showText=function(e,t,n){this._index=0,c.default.instance.pause(),this._cfg=n,this._guideType=t,this._isPre=e,this.node.active=!0,this.freshText()},t.prototype.freshText=function(){this._index>=this._cfg.text.length?(this.node.active=!1,c.default.instance.resume(),0==this._guideType?this._isPre?u.default.instance.check(!0):u.default.instance.nextStep(!0):1==this._guideType&&(this._isPre?u.default.instance.checkSpecial(-1,!1):u.default.instance.nextStep(!0))):(this.textLabel.string=l.default.Instance.getLanguage(this._cfg.text[this._index]),this.textLabel.node.parent.getComponent(cc.Layout).updateLayout(),this.node.getChildByName("textDialog").getComponent(cc.Layout).updateLayout(),this._index++)},r([p(cc.Label)],t.prototype,"textLabel",void 0),r([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/LanguageMgr":"LanguageMgr","../../Battle/BattleMgr":"BattleMgr","./GuideMgr":"GuideMgr"}],GuideTouch:[function(e,t,n){"use strict";cc._RF.push(t,"a71b5gOvndOspKJsgJnY7dO","GuideTouch");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Event/GlobalEventTarget"),s=e("./GuideEnums"),l=e("./GuideMgr"),c=cc._decorator,u=c.ccclass,d=c.property,h=c.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=0,t}return i(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.TouchGuide,this),0!=this.id&&this.addGuideNode(this.id)},t.prototype.setId=function(e){this.addGuideNode(e)},t.prototype.addGuideNode=function(e){l.default.instance.addGuideNode(e,this.node)},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){l.default.instance.removeGuideNode(this.id)},t.prototype.TouchGuide=function(){a.GlobalEventTarget.emit(s.GuideVerifactionEvent.CLICK_IN_REGIN,this.node,this.id)},r([d(cc.Integer)],t.prototype,"id",void 0),r([u,h("Guide/GuideTouch")],t)}(cc.Component);n.default=p,cc._RF.pop()},{"./Event/GlobalEventTarget":"GlobalEventTarget","./GuideEnums":"GuideEnums","./GuideMgr":"GuideMgr"}],GuideUI:[function(e,t,n){"use strict";cc._RF.push(t,"27936NgaY5Eg4xXluv7/J6v","GuideUI");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Tool/UIUtil"),s=e("../../CommonUI/BaseUI"),l=e("../Guide/GuideMask"),c=e("./Command/GuideCommadFactroy"),u=e("./Event/GlobalEventTarget"),d=e("./GuideEnums"),h=e("./GuideFinger"),p=e("./GuideTextDialog"),f=e("./Verification/GuideVerificationFactory"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(e){function t(){var t=e.call(this)||this;return t.mask=null,t.textDialog=null,t.finger=null,t.mask=null,t.textDialog=null,t.finger=null,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),a.default.updateNodeWidget(this.node),this.registerSimpleTouchEvents()},t.prototype.registerEvents=function(){u.GlobalEventTarget.on(d.GuideEvent.TASK_ACTIVE,this.onTaskActive,this),u.GlobalEventTarget.on(d.GuideEvent.TASK_DEACTIVE,this.onTaskDeActive,this),u.GlobalEventTarget.on(d.GuideEvent.STEP_SUCCESS,this.onStepSuccess,this),u.GlobalEventTarget.on(d.GuideEvent.END,this.onEnd,this)},t.prototype.onTaskActive=function(e){this._curTask=e,this.resetUI(),this.node.active=!0,this.node.zIndex=cc.find(this._curTask.parentFullPath).zIndex+1,this.finger.node.active=!0,this.finger.init(this._curTask.command,this._curTask.id),this._curTask.isStrict&&(this.mask.node.active=!0,this.mask.init(this._curTask.command)),this._curTask.text&&(this.textDialog.init(this._curTask),this.textDialog.node.active=!0),this.initCommand(),this.initVerification(),this._curTask&&this.reportGuideStart(this._curTask.id)},t.prototype.reportGuideStart=function(){},t.prototype.reportGuideFinish=function(){},t.prototype.onTaskDeActive=function(){this.clearVerification(),this.resetUI(),this._curTask=null,this.node.active=!1},t.prototype.onStepSuccess=function(){this.resetUI(),this._curTask=null,this.node.active=!1},t.prototype.onEnd=function(){this._curTask=null,this.node.active=!1},t.prototype.resetUI=function(){this.finger.node.active=!1,this.mask.node.active=!1,this.textDialog.node.active=!1},t.prototype.initCommand=function(){this._command=c.default.create(this._curTask.command.type,this._curTask.command.args)},t.prototype.initVerification=function(){this.clearVerification(),this._verification=f.default.create(this._curTask.verification.type,this._curTask.verification.args)},t.prototype.clearVerification=function(){this._verification&&(this._verification.destroy(),this._verification=null)},t.prototype.onTouchStart=function(e){var t=this.node;this._curTask.isStrict?this._command.onTouchStart(e):t._touchListener.setSwallowTouches(!1)},t.prototype.onTouchMove=function(e){var t=this.node;this._curTask.isStrict?this._command.onTouchMove(e):t._touchListener.setSwallowTouches(!1)},t.prototype.onTouchEnd=function(e){var t=this.node;this._curTask.isStrict?this._command.onTouchEnd(e):t._touchListener.setSwallowTouches(!1)},t.prototype.onTouchCancel=function(e){var t=this.node;this._curTask.isStrict?this._command.onTouchCancel(e):t._touchListener.setSwallowTouches(!1)},r([m(l.default)],t.prototype,"mask",void 0),r([m(p.default)],t.prototype,"textDialog",void 0),r([m(h.default)],t.prototype,"finger",void 0),r([y],t)}(s.default);n.default=v,cc._RF.pop()},{"../../../Tool/UIUtil":"UIUtil","../../CommonUI/BaseUI":"BaseUI","../Guide/GuideMask":"GuideMask","./Command/GuideCommadFactroy":"GuideCommadFactroy","./Event/GlobalEventTarget":"GlobalEventTarget","./GuideEnums":"GuideEnums","./GuideFinger":"GuideFinger","./GuideTextDialog":"GuideTextDialog","./Verification/GuideVerificationFactory":"GuideVerificationFactory"}],GuideUnlockMask:[function(e,t,n){"use strict";cc._RF.push(t,"75b73IbwaBIjazfeMUAHr8a","GuideUnlockMask");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Tool/UIUtil"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.init=function(e){this._node=e,this.updateNodesInfo(),this.refresh()},t.prototype.updateNodesInfo=function(){this._nodePos=a.default.convertToNodeSpaceAR(this._node,cc.v2(0,0),this.node)},t.prototype.refresh=function(){var e=this.getComponent(cc.Mask)._graphics;if(e){e.clear();var t=this._node.width,n=this._node.height;e.rect(this._nodePos.x-t/2,this._nodePos.y-n/2,t,n),e.fill()}},t.prototype.update=function(){if(this.node){var e=a.default.convertToNodeSpaceAR(this._node,cc.v2(0,0),this.node.parent);e.equals(this._nodePos)||(this._nodePos=e,this.refresh())}},r([l],t)}(cc.Component));n.default=c,cc._RF.pop()},{"../../../Tool/UIUtil":"UIUtil"}],GuideUnlock:[function(e,t,n){"use strict";cc._RF.push(t,"01104gbMqVKFoKPZjazgviJ","GuideUnlock");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../Guide/GuideUnlockMask"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._mask=null,t}return i(t,e),t.prototype.start=function(){s.EventMgr.on(a.EventType.Common_Current_IsInGuide,this.resetUI,this)},Object.defineProperty(t.prototype,"mask",{get:function(){return this._mask||(this._mask=this.node.getComponentInChildren(l.default)),this._mask},enumerable:!1,configurable:!0}),t.prototype.init=function(e){this.mask.node.active=!0,this.mask.init(e)},t.prototype.resetUI=function(){this.mask&&(this.mask.node.active=!1)},r([u],t)}(cc.Component));n.default=d,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../Guide/GuideUnlockMask":"GuideUnlockMask"}],GuideVerificationFactory:[function(e,t,n){"use strict";cc._RF.push(t,"cbbdb0fyzRGUpcZcE57QSPC","GuideVerificationFactory"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../GuideEnums"),i=e("./ClickInRegion"),r=function(){function e(){}return e.create=function(e,t){return e==o.GuideVerifactionType.CLICK_IN_REGIN?new i.default(t[0]):null},e}();n.default=r,cc._RF.pop()},{"../GuideEnums":"GuideEnums","./ClickInRegion":"ClickInRegion"}],GuideVerification:[function(e,t,n){"use strict";cc._RF.push(t,"bcc91agCoJE1rTvXjn+SHFM","GuideVerification"),Object.defineProperty(n,"__esModule",{value:!0}),n.GuideVerification=void 0;var o=e("../GuideMgr"),i=function(){function e(){}return e.prototype.success=function(){this.onSuccess(),o.default.instance.nextStep()},e.prototype.onSuccess=function(){},e.prototype.destroy=function(){},e}();n.GuideVerification=i,cc._RF.pop()},{"../GuideMgr":"GuideMgr"}],HeroMgr:[function(e,t,n){"use strict";cc._RF.push(t,"ec53cWNGfxIPaZTEpDb3ET5","HeroMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.INITIAL_EXP=n.DEFAULT_HERO_ID=n.HERO_EXP_AD_NUMBER=n.HERO_EXP_AD_GET_NUMBER=void 0;var r=e("../../../../plugin/NumberPlus"),a=e("../../../Config/EnumTypes"),s=e("../../../Config/GameData"),l=e("../../../Config/HeroStorageInfo"),c=e("../../../Mgr/BaseMgr"),u=e("../../../Mgr/EventMgr"),d=e("../../../Mgr/LanguageMgr"),h=e("../../../Mgr/StorageMgr"),p=e("../../../Platform/Platform"),f=e("../../Main_PanelOpen"),g=e("../AssetsMgr"),y=e("../Mastery/MgrMastery"),m=e("../SkillMgr"),v=e("../Unlock/MgrUnlock");n.HERO_EXP_AD_GET_NUMBER=10,n.HERO_EXP_AD_NUMBER=2,n.DEFAULT_HERO_ID=41101,n.INITIAL_EXP=50;var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.heroInfos=[],t.levelMap=new Map,t.heroInfoMap=new Map,t._totalLevel=0,t.ownMap=new Map,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalLevel",{get:function(){return this._totalLevel},set:function(e){this._totalLevel!=e&&(this._totalLevel=e,u.EventMgr.event(a.GlobalEvent.HeroTotalLevelChange,this._totalLevel))},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];if(!e.prototype.initJson.call(this,t))return!1;var i=s.default.getJsonObject("hero"),r=[],a=[],l=[],c=this;for(var u in i){var d=i[u];myGlobalThis.each(d,function(e){r=splitValue(e.props),a=splitValue(e.propValues),l=splitValue(e.unlockPropLvs);var t=e;t.props=r,t.propValues=a,t.unlockPropLvs=l,c.heroInfos.push(t),c.heroInfoMap.set(t.id,t);var n=c.getData(e.id);n&&(c.totalLevel+=n.level)})}for(var u in i=s.default.getJsonObject("heroLevelExp")){var h=i[u];for(var p in h){var f=h[p];this.levelMap.set(f.level,f.exp)}}this.unlock(n.DEFAULT_HERO_ID),this.calAllOwnMap()},t.prototype.calAllOwnMap=function(){var e=this;this.ownMap.clear(),this.getAllData().forEach(function(t){t.propAdds.forEach(function(t){e.calSinglePropOwn(t)})}),s.default.isTest&&console.log("\u8ba1\u7b97\u82f1\u96c4\u62e5\u6709\u6548\u679c\u603b\u548c\uff1a",this.ownMap)},t.prototype.onNewPropOwn=function(e){this.calSinglePropOwn(e),s.default.isTest&&console.log("\u65b0\u62e5\u6709\u6548\u679c\u89e3\u9501\u540e\uff1a",this.ownMap)},t.prototype.calSinglePropOwn=function(e){this.ownMap.has(e.propType)||this.ownMap.set(e.propType,0),this.ownMap.set(e.propType,this.ownMap.get(e.propType)+e.propValue)},t.prototype.getOwnMap=function(){return this.ownMap},t.prototype.getHeroInfo=function(e){return this.heroInfoMap.get(e)},t.prototype.getAllHeroId=function(){return this.heroInfos.map(function(e){return e.id})},t.prototype.getHeroInfos=function(){return this.heroInfos},t.prototype.getExp=function(e){return this.levelMap.get(e)},t.prototype.getMaxLv=function(){return this.levelMap.size},t.prototype.getBattleId=function(){return h.default.instance.storageData.usingHeroId},t.prototype.getNowSkill=function(e){var n=e||h.default.instance.storageData.usingHeroId,o=this.getHeroInfo(n),i=t.Instance.getData(h.default.instance.storageData.usingHeroId).level,r=o.skillId;return i>=o.skillUnlockLv?r:-1},t.prototype.getData=function(e){return h.default.instance.storageData.heroStorageInfos.find(function(t){return t.id==e})},t.prototype.getAllData=function(){return h.default.instance.storageData.heroStorageInfos},t.prototype.unlock=function(e){return this.getData(e)?(cc.warn("\u5df2\u7ecf\u62e5\u6709\u8be5\u89d2\u8272"),!1):(this.totalLevel++,h.default.instance.unlockHero(e),u.EventMgr.event(a.GlobalEvent.HeroUnlock,e),h.default.instance.storageData.heroStorageInfos.length>1&&!v.default.Instance.isUnlock(a.UnlockType.Hero)&&h.default.instance.unlockPart(a.UnlockType.Hero),!0)},t.prototype.equip=function(e){var t=this.getData(e);return myGlobalThis.isNil(t)?(console.warn("\u672a\u62e5\u6709\u8be5\u89d2\u8272"),!1):this.getBattleId()!=e&&(h.default.instance.equipHero(e),!0)},t.prototype.tryUnlockProp=function(e,t){for(var n=this.getHeroInfo(e),o=this.getData(e),i=n.props,r=n.unlockPropLvs,a=n.propValues,s=o.propAdds,c=0;c<r.length;c++)if(t==r[c]){var u=i[c],d=a[c],h=new l.PropItem;return h.propType=u,h.propValue=d,s.push(h),this.onNewPropOwn(h),{prop:u,value:d}}return null},t.prototype.tryUnlockSkill=function(e,t){var n=this.getHeroInfo(e);return t==n.skillUnlockLv?(m.default.Instance.heroSkillId=n.skillId,n.skillId):null},t.prototype.addExp=function(e,t){var n=this.getData(e);if(n){var o=this.getHeroInfo(e);if(n.level>=o.maxLevel)console.error("\u5df2\u7ecf\u8fbe\u5230\u6700\u5927\u7b49\u7ea7"+e);else{var i=this.getExp(n.level);n.curExp+=t;var r=!1,s=!1;if(n.curExp>=i){for(;;){n.curExp-=i,n.level++,this.totalLevel++,u.EventMgr.event(a.GlobalEvent.QuestCommit,a.QUEST_ACTIVE_ID.HeroLvup,this.totalLevel),h.default.instance.addSp(1);var l=this.tryUnlockProp(e,n.level),c=this.tryUnlockSkill(e,n.level);if(l&&(f.default.ShowHeroUnlockPop({heroId:e,unlock:l}),u.EventMgr.event(a.GlobalEvent.HeroUnlockProp,e,l)),c&&(f.default.ShowHeroUnlockPop({heroId:e,unlock:c}),u.EventMgr.event(a.GlobalEvent.HeroUnlockSkill,e,c)),n.level==o.maxLevel){n.curExp=i;break}if(i=this.getExp(n.level),n.curExp<i)break}r=!0}else s=!0;h.default.instance.refreshHeroInfo(n),r?u.EventMgr.event(a.GlobalEvent.HeroLevelChange,e):s&&u.EventMgr.event(a.GlobalEvent.HeroExpChange,e)}}else console.error("\u8fd8\u6ca1\u89e3\u9501\uff1a"+e)},t.prototype.calcPropAddation=function(e){var t=this.getHeroInfo(e),n="0";return myGlobalThis.each(t.props,function(e){n=r.default.add(n,e)}),n},t.prototype.calcHeroExp=function(e){var t=parseInt(y.default.Instance.getPropValue(a.PROP_TYPE.HeroExpAdd));return e+Math.floor(e*t/100)},t.prototype.enhance=function(e){var t=this.getData(e),o=this.getMaxLv(),i=h.default.instance.storageData.slimeExp;if(i<1)return p.default.instance.showToast(d.default.Instance.getLanguage("Not enough Experience Shard")),!1;if(t.level<o&&i>0){g.default.Instance.addItem(a.ASSET_TYPE.SlimeExp,1,-1,!0);var r=this.calcHeroExp(n.INITIAL_EXP,e);return this.addExp(e,r),!0}return!1},t.prototype.lvupEnableHeros=function(){var e=h.default.instance.storageData.slimeExp;if(e<=0)return[];for(var t=[],o=this.getMaxLv(),i=h.default.instance.storageData.heroStorageInfos,r=0;r<i.length;r++){var a=i[r],s=a.id,l=a.level,c=a.curExp;if(l<o){var u=this.getExp(l);c+this.calcHeroExp(n.INITIAL_EXP,s)*e>=u&&t.push(s)}}return t},t.prototype.canGetAdExp=function(){return 1==h.default.instance.storageData.hasDigSlimeExp},t}(c.default);n.default=_,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Config/HeroStorageInfo":"HeroStorageInfo","../../../Mgr/BaseMgr":"BaseMgr","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/LanguageMgr":"LanguageMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Platform/Platform":"Platform","../../Main_PanelOpen":"Main_PanelOpen","../AssetsMgr":"AssetsMgr","../Mastery/MgrMastery":"MgrMastery","../SkillMgr":"SkillMgr","../Unlock/MgrUnlock":"MgrUnlock"}],HeroPartner:[function(e,t,n){"use strict";cc._RF.push(t,"87513zR7jZPgqP9tK7WZItM","HeroPartner");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s,l=e("../../Config/EnumTypes"),c=e("../../Mgr/EventMgr"),u=e("../../Tool/Tool"),d=e("./BattleMgr"),h=e("./Bullet/Bullet"),p=e("./Hero"),f=cc._decorator,g=f.ccclass;f.property,function(e){e.attack="play",e.run="run",e.standby="standby"}(a||(a={})),function(e){e[e.idle=0]="idle",e[e.move=1]="move",e[e.attack=2]="attack"}(s||(s={}));var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletName="partner_bullet_1",t.nowState=s.idle,t.fre=1,t.atk="0",t.id=0,t.order=0,t.isPlayAtkAnim=!1,t.attackTarget=null,t.attackCD=0,t}return i(t,e),t.prototype.init=function(e,t,n,o){this.id=e,this.bulletName=t,this.fre=o,this.atk=n},t.prototype.onLoad=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.firePos=this.node.getChildByName("firePos"),this.idle(),c.EventMgr.on(l.EventType.Battle_Scene_MoveSpeed_Update,this.moveUpdate,this)},t.prototype.idle=function(){this.nowState=s.idle},t.prototype.run=function(){this.nowState=s.move},t.prototype.moveUpdate=function(e){0==e?this.idle():this.run()},t.prototype.attack=function(){if(!(this.attackCD>0)){this.nowState=s.attack,this.isPlayAtkAnim=!0;var e=this.anim.findAnimation(a.attack).duration/d.default.battleSpeed;this.scheduleOnce(this.attackDo,.5*e),this.scheduleOnce(this.attackEnd,e),this.attackCD=e/this.fre}},t.prototype.attackDo=function(){this.bulletShoot_target(this.atk,this.attackTarget)},t.prototype.attackEnd=function(){this.idle()},t.prototype.update=function(e){if(this.nowState==s.idle&&this.attackCD<=0){var t=d.default.instance.getAliveMonster();0!=t.length&&(this.attackTarget=t[u.Tool.randomInt(0,t.length-1)],5!=d.default.instance.nowHero.getComponent(p.default).nowState&&this.attack())}this.attackCD-=e,this.animUpdate()},t.prototype.animUpdate=function(){var e;switch(this.nowState){case s.idle:e=a.standby,this.anim.timeScale=d.default.battleSpeed;break;case s.move:e=a.run,this.anim.timeScale=d.default.battleSpeed;break;case s.attack:this.isPlayAtkAnim&&(e=a.attack,this.anim.timeScale=d.default.battleSpeed,this.isPlayAtkAnim=!1)}this.anim.animation!=e&&e&&this.anim.setAnimation(0,e,!0)},t.prototype.bulletShoot_target=function(e,t){if(this.node.isValid){for(var n,o=0;o<d.default.instance.bulletNode.children.length;o++)0==d.default.instance.bulletNode.children[o].opacity&&d.default.instance.bulletNode.children[o].name==this.bulletName&&(n=d.default.instance.bulletNode.children[o]);n||((n=cc.instantiate(d.default.instance.getBulletPrefab(this.bulletName))).opacity=0,d.default.instance.bulletNode.addChild(n)),n.setPosition(this.firePos.getPosition().add(this.node.getPosition())),n.opacity=255,n.getComponent(h.default).shoot(t,e,!1)}},r([g],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Tool/Tool":"Tool","./BattleMgr":"BattleMgr","./Bullet/Bullet":"Bullet","./Hero":"Hero"}],HeroStorageInfo:[function(e,t,n){"use strict";cc._RF.push(t,"702309GNzRNjquARp7rBohU","HeroStorageInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.PropItem=void 0;var r=e("./BaseStorageInfo");n.PropItem=function(){};var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curExp=0,t.propAdds=[],t}return i(t,e),t}(r.default);n.default=a,cc._RF.pop()},{"./BaseStorageInfo":"BaseStorageInfo"}],Hero_Skill:[function(e,t,n){"use strict";cc._RF.push(t,"b416cmlEGpFf6xt0eMP+tp/","Hero_Skill"),Object.defineProperty(n,"__esModule",{value:!0}),n.SkillType=void 0;var o,i=e("../../../../plugin/NumberPlus"),r=e("../../../Config/EnumTypes"),a=e("../../../Config/GameData"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/StorageMgr"),c=e("../../Mgr/SkillMgr"),u=e("../BattleMgr");(function(e){e[e.targetBullet=0]="targetBullet",e[e.throughBullet=1]="throughBullet",e[e.buff=2]="buff",e[e.aoe=3]="aoe"})(o=n.SkillType||(n.SkillType={}));var d=function(){function e(e){this.isUsing=!1,this.id=e,this.data=a.default.getJsonObject("skill")[e.toString()],this.maxCD=this.data.cd,this.nowCD=this.maxCD,this.type=this.data.bulletType}return e.prototype.do=function(){if(-1!=l.default.instance.storageData.usingSkillIds.indexOf(this.id)&&!(this.nowCD>0))switch(this.nowCD=this.maxCD,this.type){case o.targetBullet:s.EventMgr.event(r.EventType.Battle_Hero_bulletRandom,"bullet_skill_"+this.id.toString(),i.default.mul(a.default.heroAtkCal(),i.default.add(this.data.baseValue,i.default.mul(c.default.Instance.getSkillDomain(this.id).getCurLevel()-1,this.data.upValue))),this.data.tiggerCnt);break;case o.buff:case o.aoe:break;default:console.warn("\u4f4d\u7f6e\u6280\u80fd\u7c7b\u578b",this.type)}},e.prototype.update=function(e){this.nowCD>0?this.nowCD-=e*u.default.battleSpeed:1==l.default.instance.storageData.autoUseSkill&&this.do(),s.EventMgr.event(r.EventType.Battle_SkillState_Update,{skillId:this.id,cd:this.nowCD,maxCD:this.maxCD,isUsing:this.isUsing})},e}();n.default=d,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../../Mgr/SkillMgr":"SkillMgr","../BattleMgr":"BattleMgr"}],Hero:[function(e,t,n){"use strict";cc._RF.push(t,"cf4e5xtsIhAtbhxmqOEjCWa","Hero");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s,l=e("../../../plugin/NumberPlus"),c=e("../../Config/EnumTypes"),u=e("../../Config/GameData"),d=e("../../Mgr/EventMgr"),h=e("../../Mgr/SoundMgr"),p=e("../../Mgr/StorageMgr"),f=e("../../Tool/Tool"),g=e("../Mgr/SkillMgr"),y=e("./BattleMgr"),m=e("./Battle_RelicMgr"),v=e("./Bullet/Bullet"),_=e("./Bullet/Bullet_Anim"),b=e("./Monster"),S=e("./Skill/Skill"),M=e("./Skill/Skill_26103"),C=cc._decorator,T=C.ccclass;C.property,function(e){e.attack="play",e.dead="dead",e.run="run",e.shortHit="be_hit",e.longHit="be_hit",e.standby="standby",e.run_to_standby="run",e.standby_to_run="run"}(a||(a={})),function(e){e[e.idle=0]="idle",e[e.moveIn=1]="moveIn",e[e.move=2]="move",e[e.moveOut=3]="moveOut",e[e.attack=4]="attack",e[e.dead=5]="dead"}(s||(s={}));var k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletName="bullet_hero_1",t.bulletPrefab=null,t.anim=null,t.firePos=null,t.hpBar=null,t.speed=100,t.maxHp="100",t.fre=1,t.hpRecovery="0",t.nowHp="100",t.nowState=s.attack,t.isActive=!1,t.isHitting=!1,t.loopAnim=[a.run,a.attack,a.standby],t.isPlayingAtkAnim=!1,t.attackCD=0,t.attackDamage=0,t.isAttackCiritcal=!1,t.hpRecoveryCD=0,t.isAutoSkill=!1,t.skillFreMulAxis=1,t.skill_21101_CD=0,t.skill_21101_MaxCD=0,t.is_skill_21101_on=!1,t.skill_21102_CD=0,t.skill_21102_MaxCD=0,t.is_skill_21102_on=!1,t.is_skill_21102_relicOn=!1,t.skill_21103_CD=0,t.skill_21103_MaxCD=0,t.is_skill_21103_on=!1,t.is_skill_21103_relicOn=!1,t.skill_22101_CD=0,t.skill_22101_MaxCD=0,t.is_skill_22101_on=!1,t.skill_22102_CD=0,t.skill_22102_MaxCD=0,t.is_skill_22102_on=!1,t.skill_22103_CD=0,t.skill_22103_MaxCD=0,t.is_skill_22103_on=!1,t.skill_23101_CD=0,t.skill_23101_MaxCD=0,t.is_skill_23101_on=!1,t.skill_23102_CD=0,t.skill_23102_MaxCD=0,t.is_skill_23102_on=!1,t.skill_23103_CD=0,t.skill_23103_MaxCD=0,t.is_skill_23103_on=!1,t.skill_24101_CD=0,t.skill_24101_MaxCD=0,t.is_skill_24101_on=!1,t.skill_24102_CD=0,t.skill_24102_MaxCD=0,t.is_skill_24102_on=!1,t.skill_24103_CD=0,t.skill_24103_MaxCD=0,t.is_skill_24103_on=!1,t.skill_25101_CD=0,t.skill_25101_MaxCD=0,t.is_skill_25101_on=!1,t.skill_25102_CD=0,t.skill_25102_MaxCD=0,t.is_skill_25102_on=!1,t.skill_25103_CD=0,t.skill_25103_MaxCD=0,t.is_skill_25103_on=!1,t.skill_26101_CD=0,t.skill_26101_MaxCD=0,t.is_skill_26101_on=!1,t.skill_26102_CD=0,t.skill_26102_MaxCD=0,t.is_skill_26102_on=!1,t.skill_26103_CD=0,t.skill_26103_MaxCD=0,t.is_skill_26103_on=!1,t.skill_1001_CD=0,t.skill_1001_MaxCD=0,t.is_skill_1001_on=!1,t.skill_1002_CD=0,t.skill_1002_MaxCD=0,t.is_skill_1002_on=!1,t.skill_1003_CD=0,t.skill_1003_MaxCD=0,t.is_skill_1003_on=!1,t.skill_1004_CD=0,t.skill_1004_MaxCD=0,t.is_skill_1004_on=!1,t.skill_1005_CD=0,t.skill_1005_MaxCD=0,t.is_skill_1005_on=!1,t.skill_1006_CD=0,t.skill_1006_MaxCD=0,t.is_skill_1006_on=!1,t.skill_1007_CD=0,t.skill_1007_MaxCD=0,t.is_skill_1007_on=!1,t.skill_relic1_CD=0,t.skill_relic1_MaxCD=0,t.skill_relic2_CD=0,t.skill_relic2_MaxCD=0,t.is_skill_relic5_on=!1,t.skill_relic6_CD=0,t.skill_relic6_MaxCD=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},t.prototype.init=function(){this.isActive=!0,this.firePos=this.node.getChildByName("firePos"),this.animInit(),this.initSkill(),this.hpBar=y.default.instance.bornHpBar(this.node,this.anim.node.height+15,.8/this.node.scaleX),this.updateHpBar(),d.EventMgr.on(c.EventType.Battle_Hero_Prop_Update,this.playerDataUpdate,this),this.playerDataUpdate()},t.prototype.update=function(e){if(this.isActive&&!y.default.isPause){switch(this.skillUpdate(e),this.hpRecoveryUpdate(e),this.nowState){case s.idle:this.idleUpdate(e);break;case s.attack:this.attackUpdate(e);break;case s.dead:}this.animUpdate()}},t.prototype.idleUpdate=function(e){this.attackCD-=e,this.attackCD<=0&&(this.attackTarget=this.searchClosetTarget(),this.attackTarget&&(this.nowState=s.attack))},t.prototype.playerDataUpdate=function(){var e=u.default.heroAspdCal(),t=this.anim.findAnimation(a.attack).duration,n=.5/e;this.fre=t/n,this.hpRecovery=u.default.heroHpRecoveryCal();var o=l.default.sub(u.default.heroHpCal(),this.maxHp);"0"!=o&&(this.maxHp=u.default.heroHpCal(),this.nowHp=l.default.add(this.nowHp,o),this.updateHpBar())},t.prototype.dead=function(){this.nowState=s.dead,this.scheduleOnce(function(){d.EventMgr.event(c.EventType.Battle_Hero_Dead)},this.anim.findAnimation(a.dead).duration/y.default.battleSpeed+2)},t.prototype.revive=function(){this.isActive=!0,this.firePos=this.node.getChildByName("firePos"),this.animInit(),this.isHitting=!1,this.nowState=s.idle,this.nowHp=this.maxHp,this.updateHpBar()},t.prototype.attack=function(){this.nowState=s.attack},t.prototype.hit=function(e){var t,n=this;if(this.nowState!=s.dead)if(f.Tool.randomInt(0,100)<=u.default.heroDodgeCal())u.default.isTest&&console.log("\u89e6\u53d1\u95ea\u907f");else{if(y.default.instance.playWordLabel(null===(t=this.hpBar)||void 0===t?void 0:t.node,e,!1),this.nowHp=l.default.sub(this.nowHp,e),l.default.compare("0",this.nowHp))return this.nowHp="0",this.dead(),void this.updateHpBar();this.updateHpBar(),this.isHitting||(this.isHitting=!0,this.scheduleOnce(function(){n.isHitting=!1},this.anim.findAnimation(a.shortHit).duration/y.default.battleSpeed),m.default.Instance.heroBeHit())}},t.prototype.idle=function(){this.nowState=s.idle},t.prototype.move=function(){this.nowState=s.move},t.prototype.animInit=function(){var e=this;this.anim||(this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim.setCompleteListener(function(){e.animEnd()}))},t.prototype.animUpdate=function(){var e;switch(this.nowState){case s.idle:e=a.standby,this.anim.timeScale=y.default.battleSpeed;break;case s.move:e=a.run,this.anim.timeScale=y.default.battleSpeed;break;case s.attack:if(this.isPlayingAtkAnim){e=a.attack;var t=y.default.battleSpeed*this.fre*this.skillFreMulAxis;this.anim.timeScale=t>1?t:1,this.isPlayingAtkAnim=!1}break;case s.dead:e=a.dead,this.anim.timeScale=y.default.battleSpeed}if(this.isHitting&&this.nowState!=s.dead&&(this.nowState==s.attack&&(this.isHitting=!1),e=a.shortHit,this.anim.timeScale=y.default.battleSpeed),this.anim.animation!=e&&e){var n=-1!=this.loopAnim.indexOf(e);this.anim.setAnimation(0,e,n)}},t.prototype.animEnd=function(){switch(this.nowState){case s.move:case s.attack:case s.dead:}},t.prototype.attackUpdate=function(e){this.attackCD-=e,this.attackCD<=0&&(this.attackTarget=this.searchClosetTarget(),this.attackTarget?this.goAttack():this.nowState=s.idle)},t.prototype.goAttack=function(){if(this.isActive){this.attackDamage=u.default.heroAtkCal(),this.isAttackCiritcal=f.Tool.percent(u.default.heroCriticalChanceCal()),this.isAttackCiritcal&&(this.attackDamage=l.default.mul(this.attackDamage,u.default.heroCriticalDamageCal())),this.attackDamage=l.default.mul(this.attackDamage,u.default.normalDamageAddCal());var e=y.default.battleSpeed*this.fre*this.skillFreMulAxis;this.attackCD=this.anim.findAnimation(a.attack).duration/e;var t=e>=1?this.attackCD:this.anim.findAnimation(a.attack).duration;this.scheduleOnce(this.doAttack,.5*t),e<1&&this.scheduleOnce(this.attackEnd,t),this.isPlayingAtkAnim=!0}},t.prototype.doAttack=function(){var e=this,t=1;f.Tool.percent(u.default.heroDoubleShotCal())&&(t=2),f.Tool.percent(u.default.heroTripleShotCal())&&(t=3);for(var n=0;n<t;n++)this.scheduleOnce(function(){e.bulletShoot_target(e.bulletName,e.attackDamage,e.isAttackCiritcal,e.attackTarget)},.1*n/y.default.battleSpeed)},t.prototype.attackEnd=function(){this.nowState=s.idle},t.prototype.searchAliveMonster_Bullet=function(){return y.default.instance.getBulletAtckMonster()},t.prototype.searchAliveMonster_Skill=function(){return y.default.instance.getImmediatelyAtckMonster()},t.prototype.searchClosetTarget=function(){for(var e,t=this.searchAliveMonster_Bullet(),n=999,o=0;o<t.length;o++)t[o].x<n&&(n=t[o].x,e=t[o]);return e},t.prototype.searchCanAtkTarget=function(){return f.Tool.getRandomInArray(this.searchAliveMonster_Skill())},t.prototype.hpRecoveryUpdate=function(e){this.nowState!=s.dead&&(this.hpRecoveryCD-=e*y.default.battleSpeed,this.hpRecoveryCD<=0&&(this.hpRecoveryCD=1,this.nowHp=l.default.add(this.nowHp,this.hpRecovery),l.default.compare(this.nowHp,this.maxHp)&&(this.nowHp=this.maxHp),this.updateHpBar()))},t.prototype.hpRecoverMax=function(){this.nowHp=this.maxHp,this.updateHpBar()},t.prototype.updateHpBar=function(){var e;if(this.hpBar){var t=parseFloat(l.default.div(this.nowHp,this.maxHp));if(!t)return this.hpBar.node.opacity=0,void(this.hpBar=null);this.hpBar.value=t;var n=this.hpBar.node.getChildByName("barBg");this.barTween&&this.barTween.stop(),this.barTween=cc.tween(n).to(.75/y.default.battleSpeed,{width:120*this.hpBar.value}).start();var o=null===(e=this.hpBar.node.getChildByName("label"))||void 0===e?void 0:e.getComponent(cc.Label);o&&(o.string=l.default.format(this.nowHp,2)),this.hpBar.node.opacity=0==this.hpBar.value||this.nowState==s.dead?0:255}},t.prototype.initSkill=function(){this.skill_21101_init(),this.skill_21102_init(),this.skill_21103_init(),this.skill_22101_init(),this.skill_22102_init(),this.skill_22103_init(),this.skill_23101_init(),this.skill_23102_init(),this.skill_23103_init(),this.skill_24101_init(),this.skill_24102_init(),this.skill_24103_init(),this.skill_25101_init(),this.skill_25102_init(),this.skill_25103_init(),this.skill_26101_init(),this.skill_26102_init(),this.skill_26103_init(),this.skill_1001_init(),this.skill_1002_init(),this.skill_1003_init(),this.skill_1004_init(),this.skill_1005_init(),this.skill_1006_init(),this.skill_1007_init(),this.skill_relic1_init(),this.skill_relic2_init(),this.skill_relic6_init(),this.updateAutoSkill(),d.EventMgr.on(c.EventType.Battle_Skill_Use,this.doSkill,this),d.EventMgr.on(c.EventType.Battle_Skill_SwitchAutoSkill,this.updateAutoSkill,this),d.EventMgr.on(c.EventType.Battle_Hero_bulletRandom,this.bulletShoot_random,this)},t.prototype.skillUpdate=function(e){this.skillPropChange(),e*=1+u.default.heroCDReduceCal(),this.skill_21101_Update(e),this.skill_21102_Update(e),this.skill_21103_Update(e),this.skill_22101_Update(e),this.skill_22102_Update(e),this.skill_22103_Update(e),this.skill_23101_Update(e),this.skill_23102_Update(e),this.skill_23103_Update(e),this.skill_24101_Update(e),this.skill_24102_Update(e),this.skill_24103_Update(e),this.skill_25101_Update(e),this.skill_25102_Update(e),this.skill_25103_Update(e),this.skill_26101_Update(e),this.skill_26102_Update(e),this.skill_26103_Update(e),this.skill_1001_Update(e),this.skill_1002_Update(e),this.skill_1003_Update(e),this.skill_1004_Update(e),this.skill_1005_Update(e),this.skill_1006_Update(e),this.skill_1007_Update(e),this.skill_relic1_Update(e),this.skill_relic2_Update(e),this.skill_relic6_Update(e)},t.prototype.skillCDReset=function(){this.skill_21101_CD=0,this.skill_21102_CD=0,this.skill_21103_CD=0,this.skill_22101_CD=0,this.skill_22102_CD=0,this.skill_22103_CD=0,this.skill_23101_CD=0,this.skill_23102_CD=0,this.skill_23103_CD=0,this.skill_24101_CD=0,this.skill_24102_CD=0,this.skill_24103_CD=0,this.skill_25101_CD=0,this.skill_25102_CD=0,this.skill_25103_CD=0,this.skill_26101_CD=0,this.skill_26102_CD=0,this.skill_26103_CD=0,this.skill_1001_CD=0,this.skill_1002_CD=0,this.skill_1003_CD=0,this.skill_1004_CD=0,this.skill_1005_CD=0,this.skill_1006_CD=0,this.skill_1007_CD=0,this.skill_relic1_CD=0,this.skill_relic2_CD=0,this.skill_relic6_CD=0},t.prototype.skillCDReduce_random=function(e){for(var t=[],n=0;n<p.default.instance.storageData.usingSkillIds.length;n++)if(p.default.instance.storageData.usingSkillIds[n]>0){var o,i=this["skill_"+(o=p.default.instance.storageData.usingSkillIds[n]).toString()+"_CD"];i&&i>0&&t.push(o)}t.length>0&&(this["skill_"+(o=f.Tool.getRandomInArray(t)).toString()+"_CD"]-=e)},t.prototype.doSkill=function(e){if(this.nowState!=s.dead&&(this.nowState==s.idle||this.nowState==s.attack)&&!(e>1e4&&-1==p.default.instance.storageData.usingSkillIds.indexOf(e)&&-1==e.toString().indexOf("relic")||this["is_skill_"+e.toString()+"_on"]||this["skill_"+e.toString()+"_CD"]&&this["skill_"+e.toString()+"_CD"]>0)){switch(e){case 21101:this.skill_21101_do();break;case 21102:this.skill_21102_do();break;case 21103:this.skill_21103_do();break;case 22101:this.skill_22101_do();break;case 22102:this.skill_22102_do();break;case 22103:this.skill_22103_do();break;case 23101:this.skill_23101_do();break;case 23102:this.skill_23102_do();break;case 23103:this.skill_23103_do();break;case 24101:this.skill_24101_do();break;case 24102:this.skill_24102_do();break;case 24103:this.skill_24103_do();break;case 25101:this.skill_25101_do();break;case 25102:this.skill_25102_do();break;case 25103:this.skill_25103_do();break;case 26101:this.skill_26101_do();break;case 26102:this.skill_26102_do();break;case 26103:this.skill_26103_do();break;case 1001:this.skill_1001_do();break;case 1002:this.skill_1002_do();break;case 1003:this.skill_1003_do();break;case 1004:this.skill_1004_do();break;case 1005:this.skill_1005_do();break;case 1006:this.skill_1006_do();break;case 1007:this.skill_1007_do();break;default:console.warn("\u4f7f\u7528\u672a\u77e5\u7c7b\u578b\u6280\u80fd",e)}m.default.Instance.skillUse(e)}},t.prototype.updateAutoSkill=function(){this.isAutoSkill=1==p.default.instance.storageData.autoUseSkill},t.prototype.skillPropChange=function(){if(this.skillFreMulAxis=1,this.is_skill_22101_on){var e=g.default.Instance.getSkillDomain(22101).getCurLevel()-1,t=l.default.add(this.skill_22101_data.baseValue,l.default.mul(e,this.skill_22101_data.upValue));this.skillFreMulAxis=parseFloat(l.default.mul(this.skillFreMulAxis,t)),u.default.relickAddPartnerAspd=m.default.Instance.relic_effect_7_Check()}else u.default.relickAddPartnerAspd=0},t.prototype.bulletShoot_target=function(e,t,n,o){if(this.nowState!=s.dead&&this.attackTarget){for(var i,r=0;r<y.default.instance.bulletNode.children.length;r++)0==y.default.instance.bulletNode.children[r].opacity&&y.default.instance.bulletNode.children[r].name==e&&(i=y.default.instance.bulletNode.children[r]);i||((i=cc.instantiate(y.default.instance.getBulletPrefab(e))).opacity=0,y.default.instance.bulletNode.addChild(i)),i.setPosition(f.Tool.convertToNodeSpaceAR(this.node.parent,this.firePos)),i.opacity=255,i.getComponent(v.default).shoot(o,t,n)}},t.prototype.bulletShoot_target_anim=function(e,t,n,o){if(this.nowState!=s.dead&&this.attackTarget){for(var i,r=0;r<y.default.instance.bulletNode.children.length;r++)0==y.default.instance.bulletNode.children[r].opacity&&y.default.instance.bulletNode.children[r].name==e&&(i=y.default.instance.bulletNode.children[r]);i||((i=cc.instantiate(y.default.instance.getBulletPrefab(e))).opacity=0,y.default.instance.bulletNode.addChild(i)),i.setPosition(f.Tool.convertToNodeSpaceAR(this.node.parent,this.firePos)),i.opacity=255,i.getComponent(_.default).shoot(o,t,n)}},t.prototype.aoeSkillBorn=function(e,t,n,o,i,r){var a;void 0===r&&(r=!1),this.nowState!=s.dead&&((a=r?this.skillPrefabBorn_back(e):this.skillPrefabBorn(e)).setPosition(t),a.opacity=255,a.getComponent(S.default).born(n,o,i))},t.prototype.effectSkillBorn=function(e,t,n){if(this.nowState!=s.dead){var o=this.skillPrefabBorn_back(e);o.setPosition(t),o.opacity=255,o.getComponent(S.default).existTime(n)}},t.prototype.skillPrefabBorn=function(e){for(var t,n=0;n<y.default.instance.skillNode.children.length;n++)0==y.default.instance.skillNode.children[n].opacity&&y.default.instance.skillNode.children[n].name==e&&(t=y.default.instance.skillNode.children[n]);return t||((t=cc.instantiate(y.default.instance.getSkillPrefab(e))).opacity=0,y.default.instance.skillNode.addChild(t)),t},t.prototype.skillPrefabBorn_back=function(e){for(var t,n=0;n<y.default.instance.skillBackNode.children.length;n++)0==y.default.instance.skillBackNode.children[n].opacity&&y.default.instance.skillBackNode.children[n].name==e&&(t=y.default.instance.skillBackNode.children[n]);return t||((t=cc.instantiate(y.default.instance.getSkillPrefab(e))).opacity=0,y.default.instance.skillBackNode.addChild(t)),t},t.prototype.bulletShoot_random=function(e,t,n){var o,i=this;u.default.isTest&&console.log(e,t,n);for(var r=0;r<n;r++)this.scheduleOnce(function(){var n;n=(o=f.Tool.percent(u.default.heroCriticalChanceCal()))?l.default.mul(t,u.default.heroCriticalDamageCal()):t;var r=i.searchAliveMonster_Bullet(),a=f.Tool.getRandomInArray(r);i.bulletShoot_target(e,n,o,a)},.25*r/y.default.battleSpeed)},t.prototype.skill_21101_init=function(){this.skill_21101_data=g.default.Instance.getSkillInfo(21101),this.skill_21101_MaxCD=this.skill_21101_data.cd,this.skill_21101_CD=0},t.prototype.skill_21101_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||-1==p.default.instance.storageData.usingSkillIds.indexOf(21101)||this.skill_21101_CD>0||0==this.searchAliveMonster_Bullet().length)){this.skill_21101_CD=this.skill_21101_MaxCD;var t,n=this.skill_21101_data.tiggerCnt,o=u.default.heroAtkCal(),i=g.default.Instance.getSkillDomain(21101).getCurLevel()-1,r=l.default.add(this.skill_21101_data.baseValue,l.default.mul(i,this.skill_21101_data.upValue));r=l.default.div(r,100),o=l.default.mul(o,r),o=l.default.mul(o,u.default.heroSkillDamageCal()),m.default.Instance.relic_effect_15_isUse&&(n+=2,o=l.default.mul(o,m.default.Instance.relic_effect_15_add));for(var a=0;a<n;a++)this.scheduleOnce(function(){var n;n=(t=f.Tool.percent(u.default.heroCriticalChanceCal()))?l.default.mul(o,u.default.heroCriticalDamageCal()):o;var i=e.searchAliveMonster_Bullet(),r=f.Tool.getRandomInArray(i);e.bulletShoot_target("bullet_skill_21101",n,t,r)},.25*a/y.default.battleSpeed);var c=this.skill_21101_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_21101_Update=function(e){this.skill_21101_CD>0?this.skill_21101_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(21101),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:21101,cd:this.skill_21101_CD,maxCD:this.skill_21101_MaxCD,isUsing:this.is_skill_21101_on})},t.prototype.skill_21102_init=function(){this.skill_21102_data=g.default.Instance.getSkillInfo(21102),this.skill_21102_MaxCD=this.skill_21102_data.cd,this.skill_21102_CD=0},t.prototype.skill_21102_do=function(){var e=this;if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(21102)&&!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_21102_CD>0||0==this.searchAliveMonster_Bullet().length)){this.skill_21102_CD=this.skill_21102_MaxCD;var t=this.skill_21102_data.tiggerCnt,n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(21102).getCurLevel()-1,i=l.default.add(this.skill_21102_data.baseValue,l.default.mul(o,this.skill_21102_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i),n=l.default.mul(n,u.default.heroSkillDamageCal());var r=f.Tool.percent(u.default.heroCriticalChanceCal());this.is_skill_21102_relicOn&&(t+=1,n=l.default.mul(n,1+m.default.Instance.relic_effect_2_add));for(var a=0;a<t;a++)this.scheduleOnce(function(){var t;t=r?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var o=e.searchAliveMonster_Bullet(),i=f.Tool.getRandomInArray(o);e.bulletShoot_target("bullet_skill_21102",t,r,i)},.25*a/y.default.battleSpeed);var c=this.skill_21102_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_21102_Update=function(e){this.skill_21102_CD>0?this.skill_21102_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(21102),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:21102,cd:this.skill_21102_CD,maxCD:this.skill_21102_MaxCD,isUsing:this.is_skill_21102_on})},t.prototype.skill_21103_init=function(){this.skill_21103_data=g.default.Instance.getSkillInfo(21103),this.skill_21103_MaxCD=this.skill_21103_data.cd,this.skill_21103_CD=0},t.prototype.skill_21103_do=function(){var e=this;if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(21103)&&(this.nowState==s.idle||this.nowState==s.attack)&&!(this.is_skill_21103_on||this.skill_21103_CD>0)){var t=this.searchAliveMonster_Skill(),n=f.Tool.getRandomInArray(t);if(n){this.skill_21103_CD=this.skill_21103_MaxCD;var o=u.default.heroAtkCal(),i=g.default.Instance.getSkillDomain(21103).getCurLevel()-1,r=l.default.add(this.skill_21102_data.baseValue,l.default.mul(i,this.skill_21102_data.upValue));r=l.default.div(r,100),o=l.default.mul(o,r);var a,c=f.Tool.percent(u.default.heroCriticalChanceCal());a=c?l.default.mul(o,u.default.heroCriticalDamageCal()):o;var d=this.skill_21103_data.range,y=1;this.is_skill_21103_relicOn&&(y+=m.default.Instance.relic_effect_5_count);for(var v=0;v<y;v++)this.scheduleOnce(function(){e.aoeSkillBorn("skill_21103",n.getPosition(),a,c,d)},v);var _=this.skill_21103_data.fireSound;_&&""!=_&&h.default.instance.PlaySound(_)}}},t.prototype.skill_21103_Update=function(e){this.skill_21103_CD>0?this.skill_21103_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(21103),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:21103,cd:this.skill_21103_CD,maxCD:this.skill_21103_MaxCD,isUsing:this.is_skill_21103_on})},t.prototype.skill_22101_init=function(){this.skill_22101_data=g.default.Instance.getSkillInfo(22101),this.skill_22101_MaxCD=this.skill_22101_data.cd,this.skill_22101_CD=0},t.prototype.skill_22101_do=function(){var e=this;if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(22101)&&(this.nowState==s.idle||this.nowState==s.attack)&&!(this.skill_22101_CD>0||this.is_skill_22101_on)){var t=this.skill_22101_data.duration/y.default.battleSpeed;this.effectSkillBorn("skill_22101",this.node.getPosition(),t),this.scheduleOnce(function(){e.is_skill_22101_on=!1},t),this.skill_22101_CD=this.skill_22101_MaxCD,this.is_skill_22101_on=!0}},t.prototype.skill_22101_Update=function(e){this.skill_22101_CD>0&&!this.is_skill_22101_on?this.skill_22101_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(22101),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:22101,cd:this.skill_22101_CD,maxCD:this.skill_22101_MaxCD,isUsing:this.is_skill_22101_on})},t.prototype.skill_22102_init=function(){this.skill_22102_data=g.default.Instance.getSkillInfo(22102),this.skill_22102_MaxCD=this.skill_22102_data.cd,this.skill_22102_CD=0},t.prototype.skill_22102_do=function(){var e=this;if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(22102)&&!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_22102_CD>0||0==this.searchAliveMonster_Skill().length)){this.skill_22102_CD=this.skill_22102_MaxCD;var t=this.skill_22102_data.tiggerCnt,n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(22102).getCurLevel()-1,i=l.default.add(this.skill_22102_data.baseValue,l.default.mul(o,this.skill_22102_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i),n=l.default.mul(n,u.default.heroSkillDamageCal());for(var r=f.Tool.percent(u.default.heroCriticalChanceCal()),a=0;a<t;a++)this.scheduleOnce(function(){var t;t=r?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var o=e.searchAliveMonster_Bullet(),i=f.Tool.getRandomInArray(o);e.bulletShoot_target("bullet_skill_22102",t,r,i)},.25*a/y.default.battleSpeed);var c=this.skill_22102_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_22102_Update=function(e){this.skill_22102_CD>0?this.skill_22102_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(22102),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:22102,cd:this.skill_22102_CD,maxCD:this.skill_22102_MaxCD,isUsing:this.is_skill_22102_on})},t.prototype.skill_22103_init=function(){this.skill_22103_data=g.default.Instance.getSkillInfo(22103),this.skill_22103_MaxCD=this.skill_22103_data.cd,this.skill_22103_CD=0},t.prototype.skill_22103_do=function(){if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(22103)&&!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_22103_CD>0)){var e=this.searchAliveMonster_Skill(),t=f.Tool.getRandomInArray(e);if(t){this.skill_22103_CD=this.skill_22103_MaxCD;var n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(22103).getCurLevel()-1,i=l.default.add(this.skill_21103_data.baseValue,l.default.mul(o,this.skill_21103_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i);var r,a=f.Tool.percent(u.default.heroCriticalChanceCal());r=a?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var c=this.skill_22103_data.range,d=t.getPosition();this.aoeSkillBorn("skill_22103",d,r,a,c);var y=this.skill_22103_data.fireSound;y&&""!=y&&h.default.instance.PlaySound(y)}}},t.prototype.skill_22103_Update=function(e){this.skill_22103_CD>0?this.skill_22103_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(22103),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:22103,cd:this.skill_22103_CD,maxCD:this.skill_22103_MaxCD,isUsing:this.is_skill_22103_on})},t.prototype.skill_23101_init=function(){this.skill_23101_data=g.default.Instance.getSkillInfo(23101),this.skill_23101_MaxCD=this.skill_23101_data.cd,this.skill_23101_CD=0},t.prototype.skill_23101_do=function(){if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(23101)&&!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_23101_CD>0)){var e=this.searchAliveMonster_Skill(),t=f.Tool.getRandomInArray(e);if(t){this.skill_23101_CD=this.skill_23101_MaxCD;var n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(23101).getCurLevel()-1,i=l.default.add(this.skill_21102_data.baseValue,l.default.mul(o,this.skill_21102_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i);var r,a=f.Tool.percent(u.default.heroCriticalChanceCal());r=a?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var c=this.skill_23101_data.range;this.aoeSkillBorn("skill_23101",t.getPosition(),r,a,c);var d=this.skill_23101_data.fireSound;d&&""!=d&&h.default.instance.PlaySound(d)}}},t.prototype.skill_23101_Update=function(e){this.skill_23101_CD>0?this.skill_23101_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(23101),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:23101,cd:this.skill_23101_CD,maxCD:this.skill_23101_MaxCD,isUsing:this.is_skill_23101_on})},t.prototype.skill_23102_init=function(){this.skill_23102_data=g.default.Instance.getSkillInfo(23102),this.skill_23102_MaxCD=this.skill_23102_data.cd,this.skill_23102_CD=0},t.prototype.skill_23102_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||-1==p.default.instance.storageData.usingSkillIds.indexOf(23102)||this.skill_23102_CD>0)){this.skill_23102_CD=this.skill_23102_MaxCD,this.skill_23102_data.duration;var t=this.skill_23102_data.tiggerCnt,n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(23102).getCurLevel()-1,i=l.default.add(this.skill_23102_data.baseValue,l.default.mul(o,this.skill_23102_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i);var r=this.skillPrefabBorn("skill_23102"),a=this.node.getPosition();a.x-=75,r.setPosition(a);var c=f.Tool.percent(u.default.heroCriticalChanceCal()),d=r.getComponent(S.default);d.attackCount=t,d.damage=c?l.default.mul(n,u.default.heroCriticalDamageCal()):n,d.isCiritcal=c,d.bornAfter(),this.is_skill_23102_on=!0,this.scheduleOnce(function(){e.is_skill_23102_on=!1},d.getFinishTime());var y=this.skill_23102_data.fireSound;y&&""!=y&&h.default.instance.PlaySound(y)}},t.prototype.skill_23102_Update=function(e){this.skill_23102_CD>0&&!this.is_skill_23102_on?this.skill_23102_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(23102),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:23102,cd:this.skill_23102_CD,maxCD:this.skill_23102_MaxCD,isUsing:this.is_skill_23102_on})},t.prototype.skill_23103_init=function(){this.skill_23103_data=g.default.Instance.getSkillInfo(23103),this.skill_23103_MaxCD=this.skill_23103_data.cd,this.skill_23103_CD=0},t.prototype.skill_23103_do=function(){var e=this;if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(23103)&&(this.nowState==s.idle||this.nowState==s.attack)&&!(this.is_skill_23103_on||this.skill_23103_CD>0)){this.skill_23103_CD=this.skill_23103_MaxCD;var t=this.skill_23103_data.tiggerCnt,n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(23103).getCurLevel()-1,i=l.default.add(this.skill_23103_data.baseValue,l.default.mul(o,this.skill_23103_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i),n=l.default.mul(n,u.default.heroSkillDamageCal());for(var r=f.Tool.percent(u.default.heroCriticalChanceCal()),a=0;a<t;a++)this.scheduleOnce(function(){var t;t=r?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var o=e.searchAliveMonster_Bullet(),i=f.Tool.getRandomInArray(o);e.bulletShoot_target_skill_23103("bullet_skill_23103",t,r,i)},.5*a/y.default.battleSpeed);this.is_skill_23103_on=!0,this.scheduleOnce(function(){e.is_skill_23103_on=!1},.5*t/y.default.battleSpeed);var c=this.skill_23103_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_23103_Update=function(e){this.skill_23103_CD>0&&!this.is_skill_23103_on?this.skill_23103_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(23103),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:23103,cd:this.skill_23103_CD,maxCD:this.skill_23103_MaxCD,isUsing:this.is_skill_23103_on})},t.prototype.bulletShoot_target_skill_23103=function(e,t,n,o){if((this.nowState==s.idle||this.nowState==s.attack)&&this.attackTarget){for(var i,r,a=0;a<y.default.instance.bulletBackNode.children.length;a++)0==y.default.instance.bulletBackNode.children[a].opacity&&y.default.instance.bulletBackNode.children[a].name==e&&(i=y.default.instance.bulletBackNode.children[a]);i||((i=cc.instantiate(y.default.instance.getBulletPrefab(e))).opacity=0,y.default.instance.bulletBackNode.addChild(i)),(r=new cc.Vec2(0,f.Tool.randomInt(50,150))).x=-380,i.setPosition(r),i.opacity=255;var l=i.getComponent(v.default),c="mogu"+f.Tool.randomInt(1,3)+"_run";i.getChildByName("anim").getComponent(sp.Skeleton).setAnimation(0,c,!0),l.hitSound="skill_24102",l.shoot(o,t,n)}},t.prototype.skill_24101_init=function(){this.skill_24101_data=g.default.Instance.getSkillInfo(24101),this.skill_24101_MaxCD=this.skill_24101_data.cd,this.skill_24101_CD=0},t.prototype.skill_24101_do=function(){var e=this;if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(24101)&&!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_24101_CD>0)){this.skill_24101_CD=this.skill_24101_MaxCD;var t=this.skill_24101_data.tiggerCnt,n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(24101).getCurLevel()-1,i=l.default.add(this.skill_24101_data.baseValue,l.default.mul(o,this.skill_24101_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i);var r=this.skill_22103_data.range;m.default.Instance.relic_effect_19_isUse&&(t+=m.default.Instance.relic_effect_19_count);for(var a=0;a<t;a++)this.scheduleOnce(function(){var t,o=f.Tool.percent(u.default.heroCriticalChanceCal()),i=cc.v2(f.Tool.randomNumber(-50,350),f.Tool.randomNumber(20,180));t=o?l.default.mul(n,u.default.heroCriticalDamageCal()):n,e.aoeSkillBorn("skill_24101",i,t,o,r)},.5*a/y.default.battleSpeed);this.is_skill_24101_on=!0,this.scheduleOnce(function(){e.is_skill_24101_on=!1},.5*t/y.default.battleSpeed);var c=this.skill_24101_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_24101_Update=function(e){this.skill_24101_CD>0&&!this.is_skill_24101_on?this.skill_24101_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(24101),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:24101,cd:this.skill_24101_CD,maxCD:this.skill_24101_MaxCD,isUsing:this.is_skill_24101_on})},t.prototype.skill_24102_init=function(){this.skill_24102_data=g.default.Instance.getSkillInfo(24102),this.skill_24102_MaxCD=this.skill_24102_data.cd,this.skill_24102_CD=0},t.prototype.skill_24102_do=function(){if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(24102)&&!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_24102_CD>0||0==this.searchAliveMonster_Skill().length)){this.skill_24102_CD=this.skill_24102_MaxCD;var e=u.default.heroAtkCal(),t=g.default.Instance.getSkillDomain(24102).getCurLevel()-1,n=l.default.add(this.skill_24102_data.baseValue,l.default.mul(t,this.skill_24102_data.upValue));n=l.default.div(n,100),e=l.default.mul(e,n),e=l.default.mul(e,u.default.heroSkillDamageCal());var o,i=f.Tool.percent(u.default.heroCriticalChanceCal());o=i?l.default.mul(e,u.default.heroCriticalDamageCal()):e;var r=this.searchAliveMonster_Bullet(),a=f.Tool.getRandomInArray(r);this.bulletShoot_target_anim("bullet_skill_24102",o,i,a)}},t.prototype.skill_24102_Update=function(e){this.skill_24102_CD>0?this.skill_24102_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(24102),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:24102,cd:this.skill_24102_CD,maxCD:this.skill_24102_MaxCD,isUsing:this.is_skill_24102_on})},t.prototype.skill_24103_init=function(){this.skill_24103_data=g.default.Instance.getSkillInfo(24103),this.skill_24103_MaxCD=this.skill_24103_data.cd,this.skill_24103_CD=0},t.prototype.skill_24103_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||-1==p.default.instance.storageData.usingSkillIds.indexOf(24103)||this.skill_24103_CD>0)){this.skill_24103_CD=this.skill_24103_MaxCD,this.skill_24103_data.duration,this.skill_24103_data.tiggerCnt;var t=u.default.heroAtkCal(),n=g.default.Instance.getSkillDomain(24103).getCurLevel()-1,o=l.default.add(this.skill_24103_data.baseValue,l.default.mul(n,this.skill_24103_data.upValue));o=l.default.div(o,100),t=l.default.mul(t,o);var i=this.skillPrefabBorn("skill_24103_1"),r=new cc.Vec2(0,250);i.setPosition(r),i.getComponent(S.default).bornAfter(),this.is_skill_24103_on=!0,this.scheduleOnce(function(){e.is_skill_24103_on=!1},2);for(var a=function(n){c.scheduleOnce(function(){var o=e.skillPrefabBorn("skill_24103_2"),i=o.getComponent(S.default),r=f.Tool.percent(u.default.heroCriticalChanceCal()),a=r?l.default.mul(t,u.default.heroCriticalDamageCal()):t;i.born(a,r,e.skill_22103_data.range),o.setPosition(40+110*n,100)},1.1+.275*n)},c=this,d=0;d<3;d++)a(d);var y=this.skill_24103_data.fireSound;y&&""!=y&&h.default.instance.PlaySound(y)}},t.prototype.skill_24103_Update=function(e){this.skill_24103_CD>0&&!this.is_skill_24103_on?this.skill_24103_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(24103),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:24103,cd:this.skill_24103_CD,maxCD:this.skill_24103_MaxCD,isUsing:this.is_skill_24103_on})},t.prototype.skill_25101_init=function(){this.skill_25101_data=g.default.Instance.getSkillInfo(25101),this.skill_25101_MaxCD=this.skill_25101_data.cd,this.skill_25101_CD=0},t.prototype.skill_25101_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||-1==p.default.instance.storageData.usingSkillIds.indexOf(25101)||this.skill_25101_CD>0)){this.skill_25101_CD=this.skill_25101_MaxCD;var t=this.skill_25101_data.duration,n=(this.skill_25101_data.tiggerCnt,u.default.heroAtkCal()),o=g.default.Instance.getSkillDomain(25101).getCurLevel()-1,i=l.default.add(this.skill_25101_data.baseValue,l.default.mul(o,this.skill_25101_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i);var r,a=f.Tool.percent(u.default.heroCriticalChanceCal());r=a?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var c=this.skill_25101_data.range;this.is_skill_25101_on=!0,this.scheduleOnce(function(){e.is_skill_25101_on=!1},t);for(var d=0;d<5;d++)this.scheduleOnce(function(){var t,n=e.searchAliveMonster_Bullet(),o=f.Tool.getRandomInArray(n);o?(t=o.getPosition()).y-=75:t=new cc.Vec2(f.Tool.randomNumber(-50,350),f.Tool.randomNumber(25,175)),e.aoeSkillBorn("skill_25101",t,r,a,c,!0)},3*d)}},t.prototype.skill_25101_Update=function(e){this.skill_25101_CD>0&&!this.is_skill_25101_on?this.skill_25101_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(25101),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:25101,cd:this.skill_25101_CD,maxCD:this.skill_25101_MaxCD,isUsing:this.is_skill_25101_on})},t.prototype.skill_25102_init=function(){this.skill_25102_data=g.default.Instance.getSkillInfo(25102),this.skill_25102_MaxCD=this.skill_25102_data.cd,this.skill_25102_CD=0},t.prototype.skill_25102_do=function(){if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(25102)&&!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_25102_CD>0)){this.skill_25102_CD=this.skill_25102_MaxCD;var e=u.default.heroAtkCal(),t=g.default.Instance.getSkillDomain(25102).getCurLevel()-1,n=l.default.add(this.skill_25102_data.baseValue,l.default.mul(t,this.skill_25102_data.upValue));n=l.default.div(n,100),e=l.default.mul(e,n);var o,i=f.Tool.percent(u.default.heroCriticalChanceCal());o=i?l.default.mul(e,u.default.heroCriticalDamageCal()):e;var r=this.skill_25102_data.range;m.default.Instance.relic_effect_20_isUse&&(o=l.default.mul(o,1+m.default.Instance.relic_effect_20_add));var a=this.node.getPosition();this.aoeSkillBorn("skill_25102",a,l.default.div(o,3),i,r)}},t.prototype.skill_25102_Update=function(e){this.skill_25102_CD>0?this.skill_25102_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(25102),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:25102,cd:this.skill_25102_CD,maxCD:this.skill_25102_MaxCD,isUsing:this.is_skill_25102_on})},t.prototype.skill_25103_init=function(){this.skill_25103_data=g.default.Instance.getSkillInfo(25103),this.skill_25103_MaxCD=this.skill_25103_data.cd,this.skill_25103_CD=0},t.prototype.skill_25103_do=function(){if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(25103)&&!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_25103_CD>0)){this.skill_25103_CD=this.skill_25103_MaxCD;var e=u.default.heroAtkCal(),t=g.default.Instance.getSkillDomain(25103).getCurLevel()-1,n=l.default.add(this.skill_25103_data.baseValue,l.default.mul(t,this.skill_25103_data.upValue));n=l.default.div(n,100),e=l.default.mul(e,n);var o,i=f.Tool.percent(u.default.heroCriticalChanceCal());o=i?l.default.mul(e,u.default.heroCriticalDamageCal()):e;var r,a=this.skill_25103_data.range;r=new cc.Vec2(175,100),this.aoeSkillBorn("skill_25103",r,o,i,a,!0);var c=this.skill_24103_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_25103_Update=function(e){this.skill_25103_CD>0?this.skill_25103_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(25103),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:25103,cd:this.skill_25103_CD,maxCD:this.skill_25103_MaxCD,isUsing:this.is_skill_25103_on})},t.prototype.skill_26101_init=function(){this.skill_26101_data=g.default.Instance.getSkillInfo(26101),this.skill_26101_MaxCD=this.skill_26101_data.cd,this.skill_26101_CD=0},t.prototype.skill_26101_do=function(){if(!(this.nowState!=s.idle&&this.nowState!=s.attack||-1==p.default.instance.storageData.usingSkillIds.indexOf(26101)||this.skill_26101_CD>0)){this.skill_26101_CD=this.skill_26101_MaxCD,this.skill_26101_data.duration;var e=this.skill_26101_data.tiggerCnt,t=u.default.heroAtkCal(),n=g.default.Instance.getSkillDomain(26101).getCurLevel()-1,o=l.default.add(this.skill_26101_data.baseValue,l.default.mul(n,this.skill_26101_data.upValue));o=l.default.div(o,100),t=l.default.mul(t,o);var i=f.Tool.percent(u.default.heroCriticalChanceCal()),r=i?l.default.mul(t,u.default.heroCriticalDamageCal()):t,a=this.skillPrefabBorn("skill_26101"),c=this.node.getPosition();c.x=0,a.setPosition(c);var d=a.getComponent(S.default);d.attackCount=e,d.damage=r,d.isCiritcal=i,d.bornAfter();var y=this.skill_26101_data.fireSound;y&&""!=y&&h.default.instance.PlaySound(y)}},t.prototype.skill_26101_Update=function(e){this.skill_26101_CD>0&&!this.is_skill_26101_on?this.skill_26101_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(26101),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:26101,cd:this.skill_26101_CD,maxCD:this.skill_26101_MaxCD,isUsing:this.is_skill_26101_on})},t.prototype.skill_26102_init=function(){this.skill_26102_data=g.default.Instance.getSkillInfo(26102),this.skill_26102_MaxCD=this.skill_26102_data.cd,this.skill_26102_CD=0},t.prototype.skill_26102_do=function(){if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(26102)&&!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_26102_CD>0)){this.skill_26102_CD=this.skill_26102_MaxCD;var e=u.default.heroAtkCal(),t=g.default.Instance.getSkillDomain(26102).getCurLevel()-1,n=l.default.add(this.skill_26102_data.baseValue,l.default.mul(t,this.skill_26102_data.upValue));n=l.default.div(n,100),e=l.default.mul(e,n);var o,i=f.Tool.percent(u.default.heroCriticalChanceCal());o=i?l.default.mul(e,u.default.heroCriticalDamageCal()):e;var r,a=this.skill_26102_data.range;r=new cc.Vec2(175,100),this.aoeSkillBorn("skill_26102",r,o,i,a,!0);var c=this.skill_24103_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_26102_Update=function(e){this.skill_26102_CD>0?this.skill_26102_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(26102),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:26102,cd:this.skill_26102_CD,maxCD:this.skill_26102_MaxCD,isUsing:this.is_skill_26102_on})},t.prototype.skill_26103_init=function(){var e=this;this.skill_26103_data=g.default.Instance.getSkillInfo(26103),this.skill_26103_MaxCD=this.skill_26103_data.cd,this.skill_26103_CD=0,d.EventMgr.on(c.EventType.Battle_Skill_26103_End,function(){e.is_skill_26103_on=!1},this)},t.prototype.skill_26103_do=function(){if(-1!=p.default.instance.storageData.usingSkillIds.indexOf(26103)&&(this.nowState==s.idle||this.nowState==s.attack)&&!(this.skill_26103_CD>0||this.is_skill_26103_on)){this.is_skill_26103_on=!0,this.skill_26103_CD=this.skill_26103_MaxCD;var e=this.skillPrefabBorn("skill_26103"),t=this.node.getPosition();t.x+=100,t.y+=300,e.setPosition(t);var n=e.getComponent(M.default),o=this.skill_26103_data.tiggerCnt,i=u.default.heroAtkCal(),r=g.default.Instance.getSkillDomain(26103).getCurLevel()-1,a=l.default.add(this.skill_26103_data.baseValue,l.default.mul(r,this.skill_26103_data.upValue));a=l.default.div(a,100),i=l.default.mul(i,a),i=l.default.mul(i,u.default.heroSkillDamageCal()),n.init(i,o)}},t.prototype.skill_26103_Update=function(e){this.skill_26103_CD>0&&!this.is_skill_26103_on?this.skill_26103_CD-=e*y.default.battleSpeed:this.isAutoSkill&&this.doSkill(26103),d.EventMgr.event(c.EventType.Battle_SkillState_Update,{skillId:26103,cd:this.skill_26103_CD,maxCD:this.skill_26103_MaxCD,isUsing:this.is_skill_26103_on})},t.prototype.skill_1001_init=function(){this.skill_1001_data=g.default.Instance.getSkillInfo(1001),this.skill_1001_MaxCD=this.skill_1001_data.cd,this.skill_1001_CD=0},t.prototype.skill_1001_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_1001_CD>0||0==this.searchAliveMonster_Bullet().length)){this.skill_1001_CD=this.skill_1001_MaxCD;var t,n=this.skill_1001_data.tiggerCnt,o=u.default.heroAtkCal(),i=this.skill_1001_data.baseValue;i=l.default.div(i,100),o=l.default.mul(o,i),o=l.default.mul(o,u.default.heroSkillDamageCal());for(var r=0;r<n;r++)this.scheduleOnce(function(){var n;n=(t=f.Tool.percent(u.default.heroCriticalChanceCal()))?l.default.mul(o,u.default.heroCriticalDamageCal()):o;var i=e.searchAliveMonster_Bullet(),r=f.Tool.getRandomInArray(i);e.bulletShoot_target("bullet_skill_1001",n,t,r)},.25*r/y.default.battleSpeed);var a=this.skill_1001_data.fireSound;a&&""!=a&&h.default.instance.PlaySound(a)}},t.prototype.skill_1001_Update=function(e){this.skill_1001_CD>0?this.skill_1001_CD-=e*y.default.battleSpeed:1001==y.default.instance.nowHeroSkill&&this.doSkill(1001)},t.prototype.skill_1002_init=function(){this.skill_1002_data=g.default.Instance.getSkillInfo(1002),this.skill_1002_MaxCD=this.skill_1002_data.cd,this.skill_1002_CD=0},t.prototype.skill_1002_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_1002_CD>0||0==this.searchAliveMonster_Bullet().length)){this.skill_1002_CD=this.skill_1002_MaxCD;var t,n=this.skill_1002_data.tiggerCnt,o=u.default.heroAtkCal(),i=this.skill_1002_data.baseValue;i=l.default.div(i,100),o=l.default.mul(o,i),o=l.default.mul(o,u.default.heroSkillDamageCal());for(var r=0;r<n;r++)this.scheduleOnce(function(){var n;n=(t=f.Tool.percent(u.default.heroCriticalChanceCal()))?l.default.mul(o,u.default.heroCriticalDamageCal()):o;var i=e.searchAliveMonster_Bullet(),r=f.Tool.getRandomInArray(i);e.bulletShoot_target("bullet_skill_1002",n,t,r)},.25*r/y.default.battleSpeed);var a=this.skill_1002_data.fireSound;a&&""!=a&&h.default.instance.PlaySound(a)}},t.prototype.skill_1002_Update=function(e){this.skill_1002_CD>0?this.skill_1002_CD-=e*y.default.battleSpeed:1002==y.default.instance.nowHeroSkill&&this.doSkill(1002)},t.prototype.skill_1003_init=function(){this.skill_1003_data=g.default.Instance.getSkillInfo(1003),this.skill_1003_MaxCD=this.skill_1003_data.cd,this.skill_1003_CD=0},t.prototype.skill_1003_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_1003_CD>0||0==this.searchAliveMonster_Bullet().length)){this.skill_1003_CD=this.skill_1003_MaxCD;var t,n=this.skill_1003_data.tiggerCnt,o=u.default.heroAtkCal(),i=this.skill_1003_data.baseValue;i=l.default.div(i,100),o=l.default.mul(o,i),o=l.default.mul(o,u.default.heroSkillDamageCal());for(var r=0;r<n;r++)this.scheduleOnce(function(){var n;n=(t=f.Tool.percent(u.default.heroCriticalChanceCal()))?l.default.mul(o,u.default.heroCriticalDamageCal()):o;var i=e.searchAliveMonster_Bullet(),r=f.Tool.getRandomInArray(i);e.bulletShoot_target("bullet_skill_1003",n,t,r)},.25*r/y.default.battleSpeed);var a=this.skill_1003_data.fireSound;a&&""!=a&&h.default.instance.PlaySound(a)}},t.prototype.skill_1003_Update=function(e){this.skill_1003_CD>0?this.skill_1003_CD-=e*y.default.battleSpeed:1003==y.default.instance.nowHeroSkill&&this.doSkill(1003)},t.prototype.skill_1004_init=function(){this.skill_1004_data=g.default.Instance.getSkillInfo(1004),this.skill_1004_MaxCD=this.skill_1004_data.cd,this.skill_1004_CD=0},t.prototype.skill_1004_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_1004_CD>0||0==this.searchAliveMonster_Bullet().length)){this.skill_1004_CD=this.skill_1004_MaxCD;var t,n=this.skill_1004_data.tiggerCnt,o=u.default.heroAtkCal(),i=this.skill_1004_data.baseValue;i=l.default.div(i,100),o=l.default.mul(o,i),o=l.default.mul(o,u.default.heroSkillDamageCal());for(var r=0;r<n;r++)this.scheduleOnce(function(){var n;n=(t=f.Tool.percent(u.default.heroCriticalChanceCal()))?l.default.mul(o,u.default.heroCriticalDamageCal()):o;var i=e.searchAliveMonster_Bullet(),r=f.Tool.getRandomInArray(i);e.bulletShoot_target("bullet_skill_1004",n,t,r)},.25*r/y.default.battleSpeed);var a=this.skill_1004_data.fireSound;a&&""!=a&&h.default.instance.PlaySound(a)}},t.prototype.skill_1004_Update=function(e){this.skill_1004_CD>0?this.skill_1004_CD-=e*y.default.battleSpeed:1004==y.default.instance.nowHeroSkill&&this.doSkill(1004)},t.prototype.skill_1005_init=function(){this.skill_1005_data=g.default.Instance.getSkillInfo(1005),this.skill_1005_MaxCD=this.skill_1005_data.cd,this.skill_1005_CD=0},t.prototype.skill_1005_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_1005_CD>0)){this.skill_1005_CD=this.skill_1005_MaxCD;var t=this.skill_23103_data.tiggerCnt,n=u.default.heroAtkCal(),o=this.skill_1005_data.baseValue;o=l.default.div(o,100),n=l.default.mul(n,o),n=l.default.mul(n,u.default.heroSkillDamageCal());for(var i=f.Tool.percent(u.default.heroCriticalChanceCal()),r=0;r<t;r++)this.scheduleOnce(function(){var t;t=i?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var o=e.searchAliveMonster_Bullet(),r=f.Tool.getRandomInArray(o);e.bulletShoot_target_skill_23103("bullet_skill_23103",t,i,r)},.5*r/y.default.battleSpeed)}},t.prototype.skill_1005_Update=function(e){this.skill_1005_CD>0?this.skill_1005_CD-=e*y.default.battleSpeed:1005==y.default.instance.nowHeroSkill&&this.doSkill(1005)},t.prototype.skill_1006_init=function(){this.skill_1006_data=g.default.Instance.getSkillInfo(1006),this.skill_1006_MaxCD=this.skill_1006_data.cd,this.skill_1006_CD=0},t.prototype.skill_1006_do=function(){if(!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_1006_CD>0||0==this.searchAliveMonster_Bullet().length)){this.skill_1006_CD=this.skill_1006_MaxCD,this.skill_1006_data.tiggerCnt;var e,t=u.default.heroAtkCal(),n=this.skill_1006_data.baseValue;n=l.default.div(n,100),t=l.default.mul(t,n);var o=f.Tool.percent(u.default.heroCriticalChanceCal());e=o?l.default.mul(t,u.default.heroCriticalDamageCal()):t;var i=this.skill_1006_data.range,r=this.node.getPosition();r.x=200,this.aoeSkillBorn("skill_1006",r,e,o,i);var a=this.skill_1006_data.fireSound;a&&""!=a&&h.default.instance.PlaySound(a)}},t.prototype.skill_1006_Update=function(e){this.skill_1006_CD>0?this.skill_1006_CD-=e*y.default.battleSpeed:1006==y.default.instance.nowHeroSkill&&this.doSkill(1006)},t.prototype.skill_1007_init=function(){this.skill_1007_data=g.default.Instance.getSkillInfo(1007),this.skill_1007_MaxCD=this.skill_1007_data.cd,this.skill_1007_CD=0},t.prototype.skill_1007_do=function(){if(!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_1007_CD>0)){var e=this.searchClosetTarget();if(e&&!(e.x>250)){this.skill_1007_CD=this.skill_1007_MaxCD,this.skill_1007_data.tiggerCnt;var t,n=u.default.heroAtkCal(),o=this.skill_1007_data.baseValue;o=l.default.div(o,100),n=l.default.mul(n,o);var i=f.Tool.percent(u.default.heroCriticalChanceCal());t=i?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var r=this.skill_1007_data.range,a=this.node.getPosition();a.x+=178.749,a.y+=45,this.aoeSkillBorn("skill_1007",a,t,i,r);var c=this.skill_1007_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}}},t.prototype.skill_1007_Update=function(e){this.skill_1007_CD>0?this.skill_1007_CD-=e*y.default.battleSpeed:1007==y.default.instance.nowHeroSkill&&this.doSkill(1007)},t.prototype.skill_relic1_init=function(){this.skill_relic1_MaxCD=m.default.Instance.relic_effect_4_time,this.skill_relic1_CD=0},t.prototype.skill_relic1_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_relic1_CD>0||0==this.searchAliveMonster_Bullet().length)){this.skill_relic1_MaxCD=m.default.Instance.relic_effect_4_time,this.skill_relic1_CD=this.skill_relic1_MaxCD;var t,n=this.skill_21101_data.tiggerCnt,o=u.default.heroAtkCal(),i=g.default.Instance.getSkillDomain(21101).getCurLevel()-1,r=l.default.add(this.skill_21101_data.baseValue,l.default.mul(i,this.skill_21101_data.upValue));r=l.default.div(r,100),o=l.default.mul(o,r),o=l.default.mul(o,u.default.heroSkillDamageCal());for(var a=0;a<n;a++)this.scheduleOnce(function(){var n;n=(t=f.Tool.percent(u.default.heroCriticalChanceCal()))?l.default.mul(o,u.default.heroCriticalDamageCal()):o;var i=e.searchAliveMonster_Bullet(),r=f.Tool.getRandomInArray(i);e.bulletShoot_target("bullet_skill_21101",n,t,r)},.25*a/y.default.battleSpeed);var c=this.skill_21101_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_relic1_Update=function(e){this.skill_relic1_CD>0?this.skill_relic1_CD-=e*y.default.battleSpeed:m.default.Instance.relic_effect_4_isUse&&this.skill_relic1_do()},t.prototype.skill_relic2_init=function(){this.skill_relic2_MaxCD=m.default.Instance.relic_effect_3_time,this.skill_relic2_CD=0},t.prototype.skill_relic2_do=function(){var e=this;if(!(this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_relic2_CD>0||0==this.searchAliveMonster_Bullet().length)){this.skill_relic2_MaxCD=m.default.Instance.relic_effect_3_time,this.skill_relic2_CD=this.skill_relic2_MaxCD;var t=this.skill_22102_data.tiggerCnt,n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(22102).getCurLevel()-1,i=l.default.add(this.skill_22102_data.baseValue,l.default.mul(o,this.skill_22102_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i),n=l.default.mul(n,u.default.heroSkillDamageCal());for(var r=f.Tool.percent(u.default.heroCriticalChanceCal()),a=0;a<t;a++)this.scheduleOnce(function(){var t;t=r?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var o=e.searchAliveMonster_Bullet(),i=f.Tool.getRandomInArray(o);e.bulletShoot_target("bullet_skill_22102",t,r,i)},.25*a/y.default.battleSpeed);var c=this.skill_22102_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_relic2_Update=function(e){this.skill_relic2_CD>0?this.skill_relic2_CD-=e*y.default.battleSpeed:m.default.Instance.relic_effect_3_isUse&&this.skill_relic2_do()},t.prototype.skill_relic3_do=function(){if(this.nowState==s.idle||this.nowState==s.attack){var e=this.searchAliveMonster_Bullet(),t=f.Tool.getRandomInArray(e);if(t){var n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(22103).getCurLevel()-1,i=l.default.add(this.skill_21103_data.baseValue,l.default.mul(o,this.skill_21103_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i);var r,a=f.Tool.percent(u.default.heroCriticalChanceCal());r=a?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var c=this.skill_22103_data.range,d=t.getPosition();d.y-=50,this.aoeSkillBorn("skill_22103",d,r,a,c);var p=this.skill_22103_data.fireSound;p&&""!=p&&h.default.instance.PlaySound(p)}}},t.prototype.skill_relic4_do=function(){var e=this;if((this.nowState==s.idle||this.nowState==s.attack)&&0!=this.searchAliveMonster_Bullet().length){var t=this.skill_22102_data.tiggerCnt,n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(22102).getCurLevel()-1,i=l.default.add(this.skill_22102_data.baseValue,l.default.mul(o,this.skill_22102_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i),n=l.default.mul(n,u.default.heroSkillDamageCal());for(var r=f.Tool.percent(u.default.heroCriticalChanceCal()),a=0;a<t;a++)this.scheduleOnce(function(){var t;t=r?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var o=e.searchAliveMonster_Bullet(),i=f.Tool.getRandomInArray(o);e.bulletShoot_target("bullet_skill_22102",t,r,i)},.25*a/y.default.battleSpeed);var c=this.skill_22102_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_relic5_do=function(){var e=this;if(this.nowState==s.idle||this.nowState==s.attack){var t=this.skill_23103_data.tiggerCnt,n=u.default.heroAtkCal(),o=g.default.Instance.getSkillDomain(23103).getCurLevel()-1,i=l.default.add(this.skill_23103_data.baseValue,l.default.mul(o,this.skill_23103_data.upValue));i=l.default.div(i,100),n=l.default.mul(n,i),n=l.default.mul(n,u.default.heroSkillDamageCal());for(var r=f.Tool.percent(u.default.heroCriticalChanceCal()),a=0;a<t;a++)this.scheduleOnce(function(){var t;t=r?l.default.mul(n,u.default.heroCriticalDamageCal()):n;var o=e.searchAliveMonster_Bullet(),i=f.Tool.getRandomInArray(o);e.bulletShoot_target_skill_23103("bullet_skill_23103",t,r,i)},.5*a/y.default.battleSpeed);var c=this.skill_23103_data.fireSound;c&&""!=c&&h.default.instance.PlaySound(c)}},t.prototype.skill_relic6_init=function(){this.skill_relic6_MaxCD=m.default.Instance.relic_effect_26_count,this.skill_relic6_CD=0},t.prototype.skill_relic6_do=function(){this.nowState!=s.idle&&this.nowState!=s.attack||this.skill_relic6_CD>0||0!=this.searchAliveMonster_Bullet().length&&(this.skill_relic6_MaxCD=m.default.Instance.relic_effect_26_count,this.skill_relic6_CD=this.skill_relic6_MaxCD,f.Tool.halfPercent()?this.skill_relic6_do_1():this.skill_relic6_do_2())},t.prototype.skill_relic6_do_1=function(){var e=this,t=(this.skill_26101_data.duration,this.skill_26101_data.tiggerCnt,u.default.heroAtkCal()),n=g.default.Instance.getSkillDomain(26101).getCurLevel()-1,o=l.default.add(this.skill_26101_data.baseValue,l.default.mul(n,this.skill_26101_data.upValue));o=l.default.div(o,100),t=l.default.mul(t,o);for(var i=function(n){var o="lianqie";switch(n){case 1:o+="2";break;case 2:o+="3"}r.scheduleOnce(function(){var n=e.searchClosetTarget();if(n){var i=n.getComponent(b.default),r=f.Tool.percent(u.default.heroCriticalChanceCal()),a=r?l.default.mul(t,u.default.heroCriticalDamageCal()):t;i.hit(a,r),y.default.instance.bornEffect(o,n.getPosition())}},.5+.5*n)},r=this,a=0;a<3;a++)i(a);var s=this.skill_26101_data.fireSound;s&&""!=s&&h.default.instance.PlaySound(s)},t.prototype.skill_relic6_do_2=function(){var e=u.default.heroAtkCal(),t=g.default.Instance.getSkillDomain(26102).getCurLevel()-1,n=l.default.add(this.skill_26102_data.baseValue,l.default.mul(t,this.skill_26102_data.upValue));n=l.default.div(n,100),e=l.default.mul(e,n);var o,i=f.Tool.percent(u.default.heroCriticalChanceCal());o=i?l.default.mul(e,u.default.heroCriticalDamageCal()):e;var r,a=this.skill_26102_data.range;r=new cc.Vec2(175,100),this.aoeSkillBorn("skill_26102",r,o,i,a,!0);var s=this.skill_24103_data.fireSound;s&&""!=s&&h.default.instance.PlaySound(s)},t.prototype.skill_relic6_Update=function(e){this.skill_relic6_CD>0?this.skill_relic6_CD-=e*y.default.battleSpeed:m.default.Instance.relic_effect_26_isUse&&this.skill_relic6_do()},r([T],t)}(cc.Component);n.default=k,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/SoundMgr":"SoundMgr","../../Mgr/StorageMgr":"StorageMgr","../../Tool/Tool":"Tool","../Mgr/SkillMgr":"SkillMgr","./BattleMgr":"BattleMgr","./Battle_RelicMgr":"Battle_RelicMgr","./Bullet/Bullet":"Bullet","./Bullet/Bullet_Anim":"Bullet_Anim","./Monster":"Monster","./Skill/Skill":"Skill","./Skill/Skill_26103":"Skill_26103"}],HttpMgr:[function(e,t,n){"use strict";cc._RF.push(t,"08c88PUSuhD0ozhSeyZzF0s","HttpMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../plugin/Secrect"),i=e("../Config/GameData"),r=e("../Config/ResearchStorageInfo"),a=e("../Global"),s=e("./StorageMgr"),l=e("../Config/EnumTypes"),c=e("./EventMgr"),u=null,d=function(){function e(){this._defaultType=e.HttpTypes.GET}return e.ins=function(){return null==this._instance&&(this._instance=new e),this._instance},e.prototype.LoginGame=function(t,n){switch(e.httpS2cKey=this.getReqKey("s2c_key")||"",i.default.isTest&&console.log(cc.sys.platform,cc.sys.WECHAT_GAME),cc.sys.platform){case cc.sys.WECHAT_GAME:window.wx.login({success:function(t){if(t.code){var o=t.code;e.ins().send(e.httpApi.LOGIN,{wx_code:o},function(t){e.httpUser=t.res.User,n&&n(t)},function(){n&&n()},"POST",function(){n&&n()},function(){n&&n({})})}}});break;case cc.sys.BYTEDANCE_GAME:default:n&&n()}},e.prototype.GetUser=function(t,n){var r=this;if(!e.httpUser.userId)return t&&t();e.ins().send(e.httpApi.USER,{userId:e.httpUser.userId},function(n){if(n.isSucc){var a=Number(e.httpS2cKey),l=Number(n.res.s2c_key);o.default.init();var c="object"==typeof n.res.data?n.res.data:JSON.parse(o.default.decrypt(n.res.data));if(a>l||a<l&&(s.default.instance.storageData.lastUploadTime<c.lastUploadTime||s.default.instance.storageData.lastUploadTime>c.lastUploadTime)){if(i.default.isTest&&console.log("pyqTest************\u4f7f\u7528\u4e91\u5b58\u6863*******"),c){for(var d=Object.keys(c),h=0;h<d.length;h++){var p=d[h];if("object"==typeof s.default.instance.storageData[p]){if("string"==typeof c[p]){var f=JSON.parse(c[p]);if("researchData"==p&&f.length>0&&"string"==typeof f[0]){var g=r.getResearchStorageInfoKeys();f=r.modifyData(f,!0,g)}s.default.instance.storageData[p]=f}}else"number"==typeof s.default.instance.storageData[p]?s.default.instance.storageData[p]=c[p]||0:s.default.instance.storageData[p]=c[p]}s.default.instance.storageData.userName=e.httpUser.nickname,s.default.instance.storageData.userId=e.httpUser.userId,s.default.instance.SaveAllStorge()}}else s.default.instance.cloudSave();e.httpS2cKey=n.res.s2c_key,e.ins().setReqKey("s2c_key",e.httpS2cKey)}t&&t(n),u&&clearInterval(u),u=setInterval(function(){s.default.instance&&s.default.instance.cloudSave()},6e4)},function(e){n&&n(e)},"POST")},e.prototype.UPUser=function(t,n,i){if(!e.httpUser.userId)return n&&n();t.researchData&&t.researchData.length&&(t.researchData=this.modifyData(t.researchData)),delete t.userId,delete t.userName;var r=o.default.encrypt(JSON.stringify(t));e.ins().send(e.httpApi.UPUSER,{userId:e.httpUser.userId,data:r},function(t){n&&n(t),t.isSucc?(e.httpS2cKey=t.res.s2c_key,e.ins().setReqKey("s2c_key",e.httpS2cKey),e.red_tips=t.res.red_tips,c.EventMgr.event(l.EventType.Main_UI_Mail_RedPoint,e.red_tips.email)):window.wx&&window.wx.showModal({title:"\u63d0\u793a",content:t.err.message,success:function(e){e.confirm?window.wx.restartMiniProgram():e.cancel}})},function(e){i&&i(e)},"POST")},e.prototype.GetTime=function(t,n){e.ins().send(e.httpApi.GETTIME,{},function(n){t&&t(n),n.isSucc&&n.res.time&&(e.severTime=n.res.time,e.clientTime=(new Date).getTime(),i.default.isTest&&console.log("pyq====>\u83b7\u53d6\u670d\u52a1\u5668\u65f6\u95f4:",globalThisMoment(new Date(e.severTime)).format("YYYY-MM-DD HH:mm:ss"),new Date(e.severTime).getHours()))},function(e){n&&n(e)},"POST")},e.prototype.GetMailList=function(t,n){if(!e.httpUser.userId)return t&&t();e.ins().send(e.httpApi.GETMAILLIST,{userId:e.httpUser.userId},function(e){t&&t(e)},function(e){n&&n(e)},"POST")},e.prototype.GetMailReward=function(t,n,o){if(!e.httpUser.userId)return n&&n();e.ins().send(e.httpApi.GETMAILREWARD,{userId:e.httpUser.userId,emailId:t},function(e){n&&n(e)},function(e){o&&o(e)},"POST")},e.prototype.modifyData=function(e,t,n,o){void 0===o&&(o="-");var i=[];if(t)for(var r=function(t){var r=e[t];if(r&&"string"==typeof r){var a=r.split(o),s={};n.filter(function(e,t){var n=a[t];"false"==n||"true"==n?n=JSON.parse(n):!isNaN(parseFloat(n))&&isFinite(n)&&(n=Number(n)),s[e]=n}),i[i.length]=s}else i[i.length]=r},a=0;a<e.length;a++)r(a);else{var s=function(t){var n=e[t];if(n&&"object"==typeof n){var r=Object.keys(n),a="";r.filter(function(e,t){a+=n[e]+(t<r.length-1?o:"")}),i[i.length]=a}else i[i.length]=n};for(a=0;a<e.length;a++)s(a)}return i},e.prototype.send=function(t,n,o,r,a,s,l){a||(a=this._defaultType);var c=e.httpUrl,u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState&&200==u.status){var e=u.responseText;try{var t=JSON.parse(e);i.default.isTest&&console.log("pyqTest*******","@HTTP: ",c,cc.sys.isNative?JSON.stringify(n):n),i.default.isTest&&console.log("pyqTest*******",a+": respone:",cc.sys.isNative?e:t),o&&o(t)}catch(s){i.default.isTest&&console.log("pyqTest*******","\u6570\u636e\u89e3\u6790\u5931\u8d25",s,"-----------------: respone:",e),r&&r({error:-99999,msg:"\u6570\u636e\u5f02\u5e38"}),console.error(s)}}else 4===u.readyState&&(e=u.responseText,i.default.isTest&&console.log("pyqTest*******",c+a+" status:"+u.status,e),r&&r(e&&JSON.parse(e)))},u.ontimeout=function(){console.error("ontimeout"),s&&s({msg:"\u8fde\u63a5\u670d\u52a1\u5668\u5f02\u5e38"})}.bind(this),u.onerror=function(e){console.error(e,u),l&&l({msg:"\u670d\u52a1\u5668\u5f02\u5e38"})}.bind(this),a==e.HttpTypes.GET?c=this.getHttpGetURL(t,n):c+=t,u.open(a,c,!0),cc.sys.isNative&&u.setRequestHeader("Accept-Encoding","gzip,deflate"),a!=e.HttpTypes.GET&&u.setRequestHeader("Content-Type","application/json; charset=utf-8"),u.send(a==e.HttpTypes.GET?null:JSON.stringify(n))},e.prototype.getHttpGetURL=function(t,n){var o=e.httpUrl+t+"?";if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(o=o+i+"="+n[i]+"&");return o.substring(0,o.length-1)},e.prototype.setReqKey=function(e,t){a.default.isDev()||(e=o.default.encrypt(e),t=o.default.encrypt(t)),localStorage.setItem(e,t)},e.prototype.getReqKey=function(e){if(!myGlobalThis.isEmpty(e)){a.default.isDev()||(e=o.default.encrypt(e));var t=localStorage.getItem(e);if(t)return a.default.isDev()||(t=o.default.decrypt(t)),t}},e.prototype.getResearchStorageInfoKeys=function(){var e=new r.default;e.id=0,e.level=0,e.maxLevel=0,e.time=0,e.isLevelUp=!1;var t=Object.keys(e);return e=null,t},e.HttpTypes={GET:"GET",POST:"POST"},e.httpUrl="https://zhuantou.gz.myskytree.com:9002/",e.httpUser={},e.red_tips={email:0},e.httpS2cKey="",e.httpApi={LOGIN:"Login",USER:"User",UPUSER:"UpUser",GETTIME:"GetTime",GETMAILLIST:"EmailArray",GETMAILREWARD:"GetEmail"},e._instance=null,e}();n.default=d,cc._RF.pop()},{"../../plugin/Secrect":"Secrect","../Config/EnumTypes":"EnumTypes","../Config/GameData":"GameData","../Config/ResearchStorageInfo":"ResearchStorageInfo","../Global":"Global","./EventMgr":"EventMgr","./StorageMgr":"StorageMgr"}],HurtLabel:[function(e,t,n){"use strict";cc._RF.push(t,"c2d73etG5NMrbBVZNwpOR19","HurtLabel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../../plugin/NumberPlus"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.redFont=null,t.yellowFont=null,t.isActive=!1,t}return i(t,e),t.prototype.onLoad=function(){this.tween=cc.tween(this.node),this.label=this.node.getComponent(cc.Label)},t.prototype.show=function(e,t,n){var o=this;this.isActive=!0,this.tween.stop(),this.node.setPosition(e),this.node.opacity=255,this.scheduleOnce(function(){o.label.string=a.default.format(t,2),o.label.font=n?o.redFont:o.yellowFont}),this.node.scale=0,cc.tween(this.node).to(.1,{scale:this.node.scale=n?1.2:1,y:this.node.y},{easing:"bounceOut"}).delay(.1).to(.5,{opacity:0,y:this.node.y+100}).call(function(){o.isActive=!1,o.node.opacity=0}).start()},t.prototype.update=function(){},r([c(cc.Font)],t.prototype,"redFont",void 0),r([c(cc.Font)],t.prototype,"yellowFont",void 0),r([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus"}],IDetailView:[function(e,t,n){"use strict";cc._RF.push(t,"0ef59WKLU1NVr4rqPs7oiRv","IDetailView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/ItemMgr"),s=e("../../Tool/Tool"),l=e("./IUIItem"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.qualityLabel=null,t.ownedLabel=null,t.btnEquip=null,t.btnStrengthen=null,t.strengthenRedPointNode=null,t.btnClose=null,t}return i(t,e),t.prototype.onEnable=function(){s.Tool.addClickEvent(this.btnClose,this.closeWindow,this),s.Tool.addClickEvent(this.btnEquip,this.onClickBtnEquip,this),s.Tool.addClickEvent(this.btnStrengthen,this.onClickBtnStrengthen,this)},t.prototype.setName=function(e){this.nameLabel.string=e},t.prototype.setQualityName=function(e,t){this.qualityLabel.string=t,this.qualityLabel.node.color=cc.color().fromHEX(a.default.Instance.getQualityColor(e))},t.prototype.setOwn=function(e){this.ownedLabel.string="+"+e+"%"},t.prototype.setStrengthenRedPoint=function(e){void 0===e&&(e=!1),this.strengthenRedPointNode.active=e},t.prototype.closeWindow=function(){},t.prototype.onClickBtnEquip=function(){},t.prototype.onClickBtnStrengthen=function(){},r([d(cc.Label)],t.prototype,"nameLabel",void 0),r([d(cc.Label)],t.prototype,"qualityLabel",void 0),r([d(cc.Label)],t.prototype,"ownedLabel",void 0),r([d(cc.Node)],t.prototype,"btnEquip",void 0),r([d(cc.Node)],t.prototype,"btnStrengthen",void 0),r([d(cc.Node)],t.prototype,"strengthenRedPointNode",void 0),r([d(cc.Node)],t.prototype,"btnClose",void 0),r([u],t)}(l.default);n.default=h,cc._RF.pop()},{"../../Mgr/ItemMgr":"ItemMgr","../../Tool/Tool":"Tool","./IUIItem":"IUIItem"}],IQuestProxy:[function(e,t,n){"use strict";cc._RF.push(t,"0dde3N6JPhE26+Ci41DcB4Y","IQuestProxy"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../Config/EnumTypes"),i=e("../../../Mgr/EventMgr"),r=e("../../../Mgr/FlyItemMgr"),a=e("../AssetsMgr"),s=e("../MgrQuest"),l=function(){function e(){this._questDatas={},this.actionQuests={},this.delegate=null,this.saveKey=""}return Object.defineProperty(e.prototype,"questDatas",{get:function(){return this._questDatas},enumerable:!1,configurable:!0}),e.prototype.saveData=function(){var e={};myGlobalThis.each(this.questDatas,function(t){e[t.id]={id:t.id,cur:t.cur,status:t.status}}),localStorage.setItem(this.saveKey,JSON.stringify(e))},e.prototype.addActiveQuestId=function(e,t){var n=this.actionQuests[e]||[];-1==n.indexOf(t)&&(n.push(t),this.actionQuests[e]=n)},e.prototype.removeActiveQuestId=function(e,t){var n=this.actionQuests[e];if(n&&0!=n.length){var o=n.indexOf(t);o>=0&&n.splice(o,1)}},e.prototype.getActiveQuests=function(e){return this.actionQuests[e]||[]},e.prototype.createDataWithMemo=function(e){var t=e.id,n=s.default.Instance.getQuestInfo(t),i={id:t,activeId:n.activeId,upType:n.updateType,max:n.max,cur:e.cur,status:e.status};return i.status==o.QUEST_STATUS.Job&&i.cur>=i.max?n.ad?i.status=o.QUEST_STATUS.InAD:i.status=o.QUEST_STATUS.Complete:i.status!=o.QUEST_STATUS.InAD||n.ad||(i.status=o.QUEST_STATUS.Complete),this.addActiveQuestId(n.activeId,t),i},e.prototype.getInitValue=function(e){return e.updateType==o.QUEST_VALUE_UPDATE_TYPE.Count?0:this.delegate.getSysValue(e.activeId)},e.prototype.createData=function(e,t,n){0===n&&(n=!1);var o=this.getInitValue(e);return this.addActiveQuestId(e.activeId,e.id),{id:e.id,cur:o,max:e.max,status:t,ad:n,activeId:e.activeId,upType:e.updateType}},e.prototype.addQuest=function(e){var t=s.default.Instance.getQuestInfo(e),n=this.createData(t,o.QUEST_STATUS.Job,t.ad);this.questDatas[n.id]=n,t.updateType==o.QUEST_VALUE_UPDATE_TYPE.Set&&this.onProgress(n),this.saveData()},e.prototype.removeQuest=function(e){var t=this;if(Array.isArray(e))e.forEach(function(e){var n=t.getData(e);t.removeActiveQuestId(n.activeId,e),delete t.questDatas[e]});else{var n=this.getData(e);this.removeActiveQuestId(n.activeId,e),delete this.questDatas[e]}this.saveData()},e.prototype.reset=function(e,t){t||(t=o.QUEST_STATUS.Job);var n=s.default.Instance.getQuestInfo(e.id),i=this.getInitValue(n);e.cur=i,e.status=t,this.addActiveQuestId(e.activeId,e.id)},e.prototype.getData=function(e){return this.questDatas[e]},e.prototype.getReceiveEnable=function(e){return this.getData(e).status==o.QUEST_STATUS.Complete},e.prototype.getReceiveEnableCount=function(){var e=this.questDatas,t=0;return myGlobalThis.each(e,function(e){e.status==o.QUEST_STATUS.Complete&&t++,e.status==o.QUEST_STATUS.Complete&&t++}),t},e.prototype.getReceiveAdEnableCount=function(){var e=this.questDatas,t=0;return myGlobalThis.each(e,function(e){e.status==o.QUEST_STATUS.InAD&&t++}),t},e.prototype.commit=function(e,t){var n=this,i=myGlobalThis.clone(this.getActiveQuests(e));myGlobalThis.each(i,function(r){var a=n.getData(r);a?a.status>=o.QUEST_STATUS.Job&&(a.upType==o.QUEST_VALUE_UPDATE_TYPE.Count?a.cur+=t:a.cur=n.delegate.getSysValue(a.activeId),n.onProgress(a)):console.error(r,e,i)}),this.saveData()},e.prototype.receive=function(e,t){var n=this.getData(e);if(myGlobalThis.isNil(n))return console.warn("\u4e0d\u5b58\u5728\u6b63\u5728\u8fdb\u884c\u4e2d\u7684"+e+"\u4efb\u52a1"),!1;if(n.id!=e)return console.warn("\u4efb\u52a1\u9519\u8bef\uff0c\u9886\u53d6"+e+"\u548c\u5b58\u6863"+n.id+"\u4e0d\u4e00\u81f4"),!1;if(n.status!=o.QUEST_STATUS.Complete)return console.warn("\u4efb\u52a1\u72b6\u6001\u672a\u8fbe\u5230\u5b8c\u6210 "+e+" status:"+o.QUEST_STATUS[n.status]),!1;var r=s.default.Instance.getQuestInfo(e);return this.judgeReceive(r,n)?(n.status=o.QUEST_STATUS.Finish,i.EventMgr.event(o.EventType.Common_Quest_Complete,n.id),this.sendReward(r,t),this.received(e),this.saveData(),this.removeActiveQuestId(n.activeId,e),!0):(console.warn("\u4efb\u52a1\u672a\u8fbe\u5230\u9886\u53d6\u6761\u4ef6 "+e),!1)},e.prototype.judgeReceive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!0},e.prototype.onProgress=function(){},e.prototype.sendReward=function(e,t){var n=e.asset,o=e.count;a.default.Instance.addItem(n,o),r.default.addFlyItem(n,t)},e.prototype.received=function(){},e}();n.default=l,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/FlyItemMgr":"FlyItemMgr","../AssetsMgr":"AssetsMgr","../MgrQuest":"MgrQuest"}],ISummonResultView:[function(e,t,n){"use strict";cc._RF.push(t,"50479juhuNPjqC8qOqX+vJG","ISummonResultView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../CommonUI/AsyncQueue"),c=e("../CommonUI/UIItemPool"),u=e("../Mgr/EquipmentMgr"),d=e("../Mgr/PartnerMgr"),h=e("../Mgr/SkillMgr"),p=e("./UISummonResultItem"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.scrollView=null,t.results=[],t.items=[],t.type=null,t.resultAsync=null,t.layoutOriginWidth=0,t.layoutOriginHeight=0,t}return i(t,e),t.prototype.clear=function(){e.prototype.clear.call(this),this.results.length=0,this.items.length=0,null!=this.resultAsync&&this.resultAsync.clear()},t.prototype.onLoad=function(){this.layoutOriginWidth=this.layout.node.width,this.layoutOriginHeight=this.layout.node.height},t.prototype.onEnable=function(){this.playResults()},t.prototype.onDisable=function(){this.unscheduleAllCallbacks(),this.clear()},t.prototype.playResults=function(){var e=this;this.layout.type=cc.Layout.Type.HORIZONTAL,this.layout.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.layout.node.height=this.layoutOriginHeight,this.resultAsync=new l.default;for(var t=0,n=function(n){var o=n,i=Math.floor(n/5),r=t;e.resultAsync.push(function(n){var a=e.createItem(e.results[o]);e.items.push(a),a.node.scale=1.2,cc.tween(a.node).to(.1,{scale:1}).start(),o<5?a.node.y=0:5==o?(e.layout.node.width=e.layoutOriginWidth,e.layout.type=cc.Layout.Type.GRID):25==o&&(e.scrollView.enabled=!0),e.layout.enabled=!0,e.layout.updateLayout(),e.layout.enabled=!1,e.scrollView.content.height=Math.max(e.layoutOriginHeight,e.layout.node.height),i!=r&&(t=i,e.scrollView.scrollToBottom(0)),e.scheduleOnce(n,.018)})},o=0;o<this.results.length;o++)n(o);this.resultAsync.play()},t.prototype.addItem=function(e,t,n,o,i){var r=this.get();r.parent=this.layout.node,r.stopAllActions();var a=r.getComponent(p.default);return a.setQuality(e),a.setIcon(t),a.setType(o,i),a},t.prototype.getCfg=function(e,t){switch(e){case a.eSUMMONTYPE.Gear:case a.eSUMMONTYPE.Weapon:case a.eSUMMONTYPE.Armor:return this.getGearCfgInfo(t);case a.eSUMMONTYPE.Partner:return this.getPartnerCfgInfo(t);case a.eSUMMONTYPE.Skill:return this.getSkillCfgInfo(t)}},t.prototype.getGearCfgInfo=function(e){var t=u.default.Instance.getGearInfo(e);return{quality:t.quality,icon:s.default.Instance.getEquipmentIcon(t.icon),name:t.name,gearType:t.type}},t.prototype.getPartnerCfgInfo=function(e){var t=d.default.Instance.getPartnerInfo(e);return{quality:t.quality,icon:s.default.Instance.getPartnerIcon(t.icon),name:t.name}},t.prototype.getSkillCfgInfo=function(e){var t=h.default.Instance.getSkillInfo(e);return{quality:t.quality,icon:s.default.Instance.getSkillIcon(t.icon),name:t.name}},t.prototype.createItem=function(e){var t=this.getCfg(this.type,e.id);return this.addItem(t.quality,t.icon,t.name,e.id,this.type)},r([y(cc.Layout)],t.prototype,"layout",void 0),r([y(cc.ScrollView)],t.prototype,"scrollView",void 0),r([g],t)}(c.default);n.default=m,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../CommonUI/AsyncQueue":"AsyncQueue","../CommonUI/UIItemPool":"UIItemPool","../Mgr/EquipmentMgr":"EquipmentMgr","../Mgr/PartnerMgr":"PartnerMgr","../Mgr/SkillMgr":"SkillMgr","./UISummonResultItem":"UISummonResultItem"}],IUIItem:[function(e,t,n){"use strict";cc._RF.push(t,"44119jJ6KhOgL821hidyrWm","IUIItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Tool/Tool"),u=e("./UIItemPool"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.qualitySprite=null,t.iconSprite=null,t.lockedNode=null,t.equippedNode=null,t.lvUpArrow=null,t.levelLabel=null,t.progressLabel=null,t.progressBar=null,t.progressNormalBar=null,t.progressFullBar=null,t.arrowY=0,t.arrowScale=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.setQuality=function(e,t){c.Tool.setSprite(this.qualitySprite,a.BundleName.Main,t||s.default.Instance.getQualityIcon(e))},t.prototype.setIcon=function(e){e?c.Tool.setSprite(this.iconSprite,a.BundleName.Main,e):this.iconSprite.spriteFrame=null},t.prototype.setLevel=function(e){this.levelLabel.string="LV"+(e||1)},t.prototype.setProgress=function(e,t){if(t<=0)return this.progressBar.progress=1,void(this.progressLabel.string=l.default.Instance.getLanguage("MaxLevel"));this.progressBar.progress=Math.min(1,e/t),this.progressLabel.string=e+"/"+t,this.progressFullBar&&this.progressNormalBar&&(this.progressFullBar.width=this.progressNormalBar.width,this.progressFullBar.active=t<=e,this.progressNormalBar.active=t>e)},t.prototype.setArrow=function(e){var t,n;void 0===e&&(e=!1),0==this.arrowY&&(this.arrowY=(null===(t=this.lvUpArrow)||void 0===t?void 0:t.y)||0),0==this.arrowScale&&(this.arrowScale=(null===(n=this.lvUpArrow)||void 0===n?void 0:n.scale)||1),this.lvUpArrow.active=e,this.lvUpArrow.y=this.arrowY,this.lvUpArrow.scale=this.arrowScale,this.lvUpArrow.stopAllActions(),e&&cc.tween(this.lvUpArrow).parallel(cc.tween().by(.3,{y:10}).by(.3,{y:-10}),cc.tween().by(.15,{scaleY:-.2,scaleX:.4},{easing:cc.easing.cubicInOut}).by(.1,{scaleY:.2,scaleX:-.4}).delay(.35)).repeatForever().start()},t.prototype.setLock=function(e){void 0===e&&(e=!0),this.lockedNode.active=e},t.prototype.setEquipped=function(e){void 0===e&&(e=!1),this.equippedNode.active=e},r([p(cc.Sprite)],t.prototype,"qualitySprite",void 0),r([p(cc.Sprite)],t.prototype,"iconSprite",void 0),r([p(cc.Node)],t.prototype,"lockedNode",void 0),r([p(cc.Node)],t.prototype,"equippedNode",void 0),r([p(cc.Node)],t.prototype,"lvUpArrow",void 0),r([p(cc.Label)],t.prototype,"levelLabel",void 0),r([p(cc.Label)],t.prototype,"progressLabel",void 0),r([p(cc.ProgressBar)],t.prototype,"progressBar",void 0),r([p(cc.Node)],t.prototype,"progressNormalBar",void 0),r([p(cc.Node)],t.prototype,"progressFullBar",void 0),r([h],t)}(u.default);n.default=f,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","./UIItemPool":"UIItemPool"}],IUIShopListItem:[function(e,t,n){"use strict";cc._RF.push(t,"d21acSkuXZHcIAOYiyNjuY6","IUIShopListItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../Config/EnumTypes"),c=e("../../Config/GameData"),u=e("../../Tool/Tool"),d=e("../CommonUI/UIItemPool"),h=e("../Mgr/AssetsMgr"),p=e("../Mgr/MgrShop"),f=e("./UIShopSymbolItem"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.symbolLayout=null,t.nameLabel=null,t.priceLabel=null,t.priceIcon=null,t.btnPay=null,t.shopId=0,t.shopSymbols=[],t.priceIconOriSize=null,t}return i(t,e),t.prototype.refresh=function(){},t.prototype.onLoad=function(){u.Tool.addClickEvent(this.btnPay,this.onClickPay,this,null,!0,!0,.5),this.priceIconOriSize=this.priceIcon.node.getContentSize()},t.prototype.setCfg=function(e){this.shopId!=e&&(this.shopId=e,this.onChangeShopId())},t.prototype.onChangeShopId=function(){this.clear();var e=p.default.Instance.get(this.shopId);this.createSymbols(e.goods),this.refresh()},t.prototype.createSymbols=function(e){var t=this;myGlobalThis.each(e,function(e){var n=t.get();n.parent=t.symbolLayout.node;var o=n.getComponent(f.default);o.setItemInfo(e),t.shopSymbols.push(o)})},t.prototype.setPrice=function(e,t,n){0===n&&(n=0),e==l.ASSET_TYPE.Cash?(this.priceLabel.string="$"+t.toFixed(2),this.priceIcon.node.active=!1):e==l.ASSET_TYPE.Ad?(this.priceIcon.node.active=!0,this.setPriceIcon(e),this.priceLabel.string="("+n+"/"+t+")"):(this.priceIcon.node.active=!0,this.setPriceIcon(e))},t.prototype.setPriceIcon=function(e){u.Tool.setSprite(this.priceIcon,l.BundleName.Main,h.default.Instance.getIcon(e))},t.prototype.setName=function(e){this.nameLabel.string=e},t.prototype.onClickPay=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,p.default.Instance.requestBuy(this.shopId,this.symbolLayout)];case 1:return e.sent(),this.refresh(),this.judeTrackEvent(),[2]}})})},t.prototype.judeTrackEvent=function(){switch(this.shopId){case 2002:c.default.trackEvent(c.TrackEventKey.key["\u526f\u672c\u793c\u5305\u5e7f\u544a"]);break;case 2003:c.default.trackEvent(c.TrackEventKey.key["\u70b8\u9e21\u793c\u5305\u5e7f\u544a"]);break;case 2004:c.default.trackEvent(c.TrackEventKey.key["\u94bb\u5934\u793c\u5305\u5e7f\u544a"])}},r([m(cc.Layout)],t.prototype,"symbolLayout",void 0),r([m(cc.Label)],t.prototype,"nameLabel",void 0),r([m(cc.Label)],t.prototype,"priceLabel",void 0),r([m(cc.Sprite)],t.prototype,"priceIcon",void 0),r([m(cc.Node)],t.prototype,"btnPay",void 0),r([y],t)}(d.default);n.default=v,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Tool/Tool":"Tool","../CommonUI/UIItemPool":"UIItemPool","../Mgr/AssetsMgr":"AssetsMgr","../Mgr/MgrShop":"MgrShop","./UIShopSymbolItem":"UIShopSymbolItem"}],IUIShopListView:[function(e,t,n){"use strict";cc._RF.push(t,"dbfd62Lv2RI1ahJ2/EN3qmP","IUIShopListView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/AssetPool"),s=e("./IUIShopListItem"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.created=!1,t.items=[],t.delegate=null,t}return i(t,e),t.prototype.getShopCfgs=function(){},t.prototype.clear=function(){this.created=!1,myGlobalThis.each(this.items,function(e){return a.default.Instance.put(e)}),this.items.length=0},t.prototype.createItems=function(){var e=this;if(!this.created){this.created=!0;var t=this.getShopCfgs();t=myGlobalThis.sortBy(t,function(e){return e.priority}),myGlobalThis.each(t,function(t){e.createItem(t)})}},t.prototype.createItem=function(e){var t=this.delegate.getPrefabItem(e.resPrefab);if(t){var n=cc.instantiate(t);this.onLoaded(n,e)}},t.prototype.onLoaded=function(e,t){var n=e.getComponent(s.default);n.setCfg(t.id),e.parent=this.layout.node,this.items.push(n)},r([u(cc.Layout)],t.prototype,"layout",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Mgr/AssetPool":"AssetPool","./IUIShopListItem":"IUIShopListItem"}],InfoPopView:[function(e,t,n){"use strict";cc._RF.push(t,"4e24dxxPxBFVoDj+CJOHDG2","InfoPopView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/GameData"),s=e("../../Res/ResPanelOpen"),l=e("../../Tool/Tool"),c=e("../Main_PanelOpen"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnSetting=null,t.btnMail=null,t.btnEle=null,t.btnArrow=null,t}return i(t,e),t.prototype.onLoad=function(){this.btnEle.active=a.default.isTest,l.Tool.addClickEvent(this.btnSetting,this.onClickSetting,this),l.Tool.addClickEvent(this.btnMail,this.onClickMail,this),l.Tool.addClickEvent(this.btnEle,this.onClickEle,this),l.Tool.addClickEvent(this.btnArrow,this.onClose,this),this.node.getChildByName("background").on(cc.Node.EventType.TOUCH_START,this.onClose,this),this.setMailRedPoint()},t.prototype.setTarget=function(){},t.prototype.onEnable=function(){},t.prototype.onClickSetting=function(){c.default.showSettingView(),this.node.destroy()},t.prototype.onClickMail=function(){c.default.showEmailPanel(),this.node.destroy()},t.prototype.onClickEle=function(){c.default.showTestPanel(),this.node.destroy()},t.prototype.onClose=function(){var e=this,t=this.node.getChildByName("base");s.default.panelClose_BigToSmall(t,function(){e.node.destroy()})},t.prototype.setMailRedPoint=function(){this.btnMail.getChildByName("redpoint").opacity=0},r([h(cc.Node)],t.prototype,"btnSetting",void 0),r([h(cc.Node)],t.prototype,"btnMail",void 0),r([h(cc.Node)],t.prototype,"btnEle",void 0),r([h(cc.Node)],t.prototype,"btnArrow",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Config/GameData":"GameData","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],IsExistActiveProductId:[function(e,t,n){"use strict";cc._RF.push(t,"2aff1u+q3VKW651MWOsj04g","IsExistActiveProductId");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(t){var n=e.call(this)||this;return n._productId=t,n}return i(t,e),t.prototype.isSuccess=function(){return!0},t}(e("./GuideCondition").default);n.default=r,cc._RF.pop()},{"./GuideCondition":"GuideCondition"}],IsExistBlankCoordinate:[function(e,t,n){"use strict";cc._RF.push(t,"5e9847Hzw9PIKM+n0BWfr+o","IsExistBlankCoordinate");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.isSuccess=function(){return!0},t}(e("./GuideCondition").default);n.default=r,cc._RF.pop()},{"./GuideCondition":"GuideCondition"}],IsExistOneActiveProduct:[function(e,t,n){"use strict";cc._RF.push(t,"f5ee3GWRTVDpL+C+3yPORJ6","IsExistOneActiveProduct");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.isSuccess=function(){return!0},t}(e("./GuideCondition").default);n.default=r,cc._RF.pop()},{"./GuideCondition":"GuideCondition"}],IsFirstDead:[function(e,t,n){"use strict";cc._RF.push(t,"62938kt0xFCYYdVAQ9ZVUSM","IsFirstDead");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.isSuccess=function(){return!0},t}(e("./GuideCondition").default);n.default=r,cc._RF.pop()},{"./GuideCondition":"GuideCondition"}],IsPlayerCanLevelUp:[function(e,t,n){"use strict";cc._RF.push(t,"8e234f2smxAG5O/C06beqtO","IsPlayerCanLevelUp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.isSuccess=function(){return!0},t}(e("./GuideCondition").default);n.default=r,cc._RF.pop()},{"./GuideCondition":"GuideCondition"}],ItemInfo:[function(e,t,n){"use strict";cc._RF.push(t,"d1ff8LVQAJNAYhkVWsGdgLM","ItemInfo"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Mgr/AssetsMgr");n.default=function(e,t,n){this.count=0,this.id=0,this.isGray=!1,this.isGray=!1,this.id=e,this.count=t,this.assetType=n;var i=o.default.Instance.getInfo(e);this.itemType=i.type},cc._RF.pop()},{"../Mgr/AssetsMgr":"AssetsMgr"}],ItemMgr:[function(e,t,n){"use strict";var o;cc._RF.push(t,"6d847aVg6JFjq/f6UzBt3sY","ItemMgr"),Object.defineProperty(n,"__esModule",{value:!0}),n.QualityToKey=n.QualityEnum=n.QUALITY_GRADE_ICON=n.RELIC_TYPE_NAME=n.DIFFICULTY_NAME=n.QUALITY_NAME=n.QUALITY_COLOR=n.QUALITY_SPRITE_FRAME=n.Common_ICON_PATH=n.RELIC_ICON_PATH=n.Res_ICON_PATH=n.SPINEPATH=n.MASTERYICONPATH=n.PROPICONPATH=n.PARTNERICONPATH=n.HEROICONPATH=n.SKILLICONPATH=n.EQUIPMENTICONPATH=n.COLOR_GREEN=n.COLOR_GRAY=n.COLOR_WHITE=n.COLOR_RED=void 0;var i=e("./LanguageMgr");n.COLOR_RED=cc.Color.RED,n.COLOR_WHITE=cc.Color.WHITE,n.COLOR_GRAY=cc.Color.GRAY,n.COLOR_GREEN=cc.Color.GREEN,n.EQUIPMENTICONPATH="Textures/Equipment/",n.SKILLICONPATH="Textures/Skill/",n.HEROICONPATH="Textures/Hero/",n.PARTNERICONPATH="Textures/Partner/",n.PROPICONPATH="Textures/Prop/",n.MASTERYICONPATH="Textures/Mastery/",n.SPINEPATH="Spines/hero/",n.Res_ICON_PATH="Textures/Res/",n.RELIC_ICON_PATH="Textures/Relic/",n.Common_ICON_PATH="Textures/Common/",n.QUALITY_SPRITE_FRAME=["item_empty","item_quality_1","item_quality_2","item_quality_3","item_quality_4","item_quality_5","item_quality_6","item_quality_7","item_quality_8"],n.QUALITY_COLOR=["FFFFFF","8b8374","725b43","166c23","2969b8","9316a3","c25418","d9fcfe","b9360f"],n.QUALITY_NAME=["","Common","Uncommon","Rare","Epic","Legendary","Mythic","Exotic"],n.DIFFICULTY_NAME=["","normal","hard","nightmare","hell","purgatory"],n.RELIC_TYPE_NAME=["","relic_type_1","relic_type_2","relic_type_3","relic_type_4","relic_type_5","relic_type_6","relic_type_7"],n.QUALITY_GRADE_ICON=["","quality_F","quality_E","quality_D","quality_C","quality_B","quality_A","quality_S","quality_SS"],function(e){e[e.Common=1]="Common",e[e.Uncommon=2]="Uncommon",e[e.Rare=3]="Rare",e[e.Epic=4]="Epic",e[e.Legendary=5]="Legendary",e[e.Mythic=6]="Mythic",e[e.Exotic=7]="Exotic"}(n.QualityEnum||(n.QualityEnum={})),n.QualityToKey=((o={})[1]="main",o[2]="two",o[3]="three",o[4]="four",o[5]="five",o[6]="six",o[7]="seven",o[8]="eight",o);var r=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.getEquipmentIcon=function(e){return n.EQUIPMENTICONPATH+e},e.prototype.getSkillIcon=function(e){return n.SKILLICONPATH+e},e.prototype.getPartnerIcon=function(e){return n.PARTNERICONPATH+e},e.prototype.getQualityIcon=function(e){return n.Common_ICON_PATH+n.QUALITY_SPRITE_FRAME[e]},e.prototype.getQualityColor=function(e){return n.QUALITY_COLOR[e]},e.prototype.getQualityName=function(e){return i.default.Instance.getLanguage(n.QUALITY_NAME[e])},e.prototype.getResIcon=function(e){return n.Res_ICON_PATH+e},e.prototype.getHeroIcon=function(e){return n.HEROICONPATH+e},e.prototype.getPropIcon=function(e){return n.PROPICONPATH+e},e.prototype.getMasteryIcon=function(e){return n.MASTERYICONPATH+e},e.prototype.getHeroSpinePath=function(e){return n.SPINEPATH+e},e.prototype.getRelicIcon=function(e){return n.RELIC_ICON_PATH+e},e.prototype.getHeroGrade=function(e){return this.getGradeIcon(e)},e.prototype.getGradeIcon=function(e){return n.Common_ICON_PATH+n.QUALITY_GRADE_ICON[e]},e}();n.default=r,cc._RF.pop()},{"./LanguageMgr":"LanguageMgr"}],ItemPool:[function(e,t,n){"use strict";cc._RF.push(t,"65a978X0ndN+phUHosZ7iIq","ItemPool"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e){this.prefab=null,this._pool=new cc.NodePool,this._nodes=[],this.prefab=e}return e.prototype.clear=function(){var e=this;this._nodes.forEach(function(t){e._pool.put(t)}),this._nodes=[]},e.prototype.get=function(){var e;return e=this._pool.size()>0?this._pool.get():cc.instantiate(this.prefab),this._nodes.push(e),e},e.prototype.put=function(e){e instanceof cc.Component&&(e=e.node);var t=this._nodes.indexOf(e);t>=0&&this._nodes.splice(t,1),this._pool.put(e)},e.prototype.onDestroy=function(){this._pool.clear(),this._pool=null,this._nodes=[]},e}();n.default=o,cc._RF.pop()},{}],LanguageData:[function(e,t,n){"use strict";cc._RF.push(t,"2cf21MWZKtM3YJZamoPE84x","LanguageData");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Scripts/Config/EnumTypes"),s=e("../Scripts/Mgr/EventMgr"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.json=null,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.data=this.json.json},t.setLanguage=function(e){n.nowLanguage=e,s.EventMgr.event(a.EventType.Language_Update)},t.getString=function(e){for(var t=0;t<n.data.length;t++)if(n.data[t].key==e)return n.data[t][n.nowLanguage]},t.nowLanguage="zh_CN",r([u(cc.JsonAsset)],t.prototype,"json",void 0),n=r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Scripts/Config/EnumTypes":"EnumTypes","../Scripts/Mgr/EventMgr":"EventMgr"}],LanguageLabel:[function(e,t,n){"use strict";cc._RF.push(t,"ec6c9CRWfRKtbKfEJATpqHM","LanguageLabel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.LangLabelParamsItem=void 0;var a=e("../Scripts/Config/EnumTypes"),s=e("../Scripts/Mgr/EventMgr"),l=e("../Scripts/Mgr/LanguageMgr"),c=cc._decorator,u=c.ccclass,d=c.property,h=c.menu,p=function(){function e(){this.key="",this.value=""}return r([d()],e.prototype,"key",void 0),r([d()],e.prototype,"value",void 0),r([u("LangLabelParamsItem")],e)}();n.LangLabelParamsItem=p;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._params=[],t._dataID="",t}return i(t,e),Object.defineProperty(t.prototype,"params",{get:function(){return this._params||[]},set:function(e){this._params=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataID",{get:function(){return this._dataID||""},set:function(e){this._dataID=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"string",{get:function(){var e=l.default.Instance.getLanguage(this.dataID);return e?this._params.length>0&&this._params.forEach(function(t){e=e.replace("%{"+t.key+"}",t.value)}):(console.warn("\u591a\u8bed\u8a00\u7ec4\u4ef6 ["+this.node.name+"] \u672a\u627e\u5230\u8bed\u8a00\u6807\u8bc6 , uuid=["+this.node.uuid+"]"),e=this.dataID),e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.getComponent(cc.Label)||this.getComponent(cc.RichText)||console.error("\u591a\u8bed\u8a00\u7ec4\u4ef6 ["+this.node.name+"] \u4e0d\u5b58\u5728\u6587\u672c\u7ec4\u4ef6\uff0cuuid=["+this.node.uuid+"]")},t.prototype.onEnable=function(){this.updateLabel(),s.EventMgr.on(a.EventType.Language_Update,this.updateLabel,this)},t.prototype.setVars=function(e,t){for(var n=!1,o=0;o<this._params.length;o++){var i=this._params[o];i.key===e&&(i.value=t,n=!0)}if(!n){var r=new p;r.key=e,r.value=t,this._params.push(r)}this.updateLabel()},t.prototype.updateLabel=function(){if(this._dataID){var e=this.getComponent(cc.Label)||this.getComponent(cc.RichText);e?e.string=this.string:console.error("\u591a\u8bed\u8a00\u7ec4\u4ef6 ["+this.node.name+"] \u4e0d\u5b58\u5728\u6587\u672c\u7ec4\u4ef6\uff0cuuid=["+this.node.uuid+"]")}},r([d({type:p,displayName:"params"})],t.prototype,"_params",void 0),r([d({type:p,displayName:"params"})],t.prototype,"params",null),r([d({serializable:!0})],t.prototype,"_dataID",void 0),r([d({type:cc.String,serializable:!0})],t.prototype,"dataID",null),r([u,h("Language/LanguageLabel")],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../Scripts/Config/EnumTypes":"EnumTypes","../Scripts/Mgr/EventMgr":"EventMgr","../Scripts/Mgr/LanguageMgr":"LanguageMgr"}],LanguageMgr:[function(e,t,n){"use strict";cc._RF.push(t,"d99dd6gB1dOuabDaOqUEZUN","LanguageMgr"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Config/EnumTypes"),i=e("./BundleMgr"),r=function(){function e(){this.languageMap=new Map}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.initLanguage=function(e){this.initJsonObject(e.json),i.default.getBundleData(o.BundleName.Loading)},e.prototype.initJsonObject=function(e){for(var t in this.languageMap.clear(),e){var n=e[t];this.languageMap.set(n.key,n.value)}},e.prototype.getLanguage=function(e){return this.languageMap.has(e)?this.languageMap.get(e):(console.warn("\u591a\u8bed\u8a00 ["+e+"] \u4e0d\u5b58\u5728"),"")},e}();n.default=r,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","./BundleMgr":"BundleMgr"}],Loading:[function(e,t,n){"use strict";cc._RF.push(t,"39805owwhZIX4PPkUY7TYQz","Loading");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Platform/Platform"),s=e("./Platform/PlatForm_wx"),l=e("./Config/EnumTypes"),c=e("./Mgr/BundleMgr"),u=e("./Mgr/SoundMgr"),d=e("./Mgr/StorageMgr"),h=e("./Mgr/TimeMgr"),p=e("./Comp/GameLoading"),f=e("./Mgr/LanguageMgr"),g=e("./Global"),y=e("../plugin/Secrect"),m=e("./Platform/PlatForm_tt"),v=e("./Main/App/App"),_=e("./Config/GameData"),b=cc._decorator,S=b.ccclass,M=b.property;window.myGlobalThis=globalThis._,window.globalThisMoment=globalThis.moment,window.splitValue=function(e,t){void 0===t&&(t=",");var n=[];return e&&e.split(t).forEach(function(e){n.push(parseInt(e))}),n},g.default.init(),y.default.init(),cc.Sprite.prototype.setState=function(e){this.setMaterial(0,cc.MaterialVariant.getBuiltinMaterial(e==cc.Sprite.State.NORMAL?"2d-sprite":"2d-gray-sprite"))};var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unDestroyNode=null,t.languageAsset=null,t.timeCount=0,t.firstBundle=l.BundleName.Main,t.firstScene=l.SceneName.Main,t.isResLoaded=!1,t.resLoadingWeight=1,t.fisrtBundleWeight=2,t.firstSceneWeight=2,t.levelWeight=1,t}return i(t,e),t.prototype.onEnable=function(){if(!v.default.instance){var e=new cc.Node("App");e.parent=cc.director.getScene().parent,e.addComponent("App");var t=e.addComponent(cc.Widget);t.isAlignTop=t.isAlignBottom=t.isAlignLeft=t.isAlignRight=!0,t.top=t.bottom=t.left=t.right=0,cc.game.addPersistRootNode(e)}_.default.trackEvent(_.TrackEventKey.key["\u6b63\u5728\u52a0\u8f7d"])},t.prototype.start=function(){var e=this;switch(cc.macro.ENABLE_MULTI_TOUCH=!1,this.bar=p.default.instance.bar,_.default.startPhyics(),cc.game.addPersistRootNode(this.unDestroyNode),cc.sys.platform){case cc.sys.WECHAT_GAME:this.unDestroyNode.addComponent(s.default);break;case cc.sys.BYTEDANCE_GAME:this.unDestroyNode.addComponent(m.default);break;default:this.unDestroyNode.addComponent(a.default)}f.default.Instance.initLanguage(this.languageAsset),this.unDestroyNode.addComponent(d.default),this.unDestroyNode.addComponent(u.default),this.unDestroyNode.addComponent(h.default),this.firstBundle=l.BundleName.Main,this.firstScene=l.SceneName.Main,h.default.instance.timeInit(),c.default.loadResBundle(function(){e.isResLoaded=!0}),d.default.instance.storageData.isFirst&&(_.default.isFirst=!0,d.default.instance.storageData.isFirst=!1,d.default.instance.writeStorage(d.default.instance.storageName.isFirst,d.default.instance.storageData.isFirst),this.scheduleOnce(this.timeCountUpdate,60)),this.schedule(this.updateProgress_1)},t.prototype.timeCountUpdate=function(){var e=this;this.timeCount++,_.default.trackEvent("time_"+this.timeCount.toString()),this.timeCount<15&&this.scheduleOnce(function(){e.scheduleOnce(e.timeCountUpdate,60)})},t.prototype.totalWeight=function(){return this.resLoadingWeight+this.fisrtBundleWeight+this.firstSceneWeight+this.levelWeight},t.prototype.updateProgress_1=function(){var e=0;this.isResLoaded&&(e+=this.resLoadingWeight/this.totalWeight()),this.bar.value=e,this.isResLoaded&&(this.unschedule(this.updateProgress_1),this.startLoadBundle())},t.prototype.startLoadBundle=function(){var e=this;switch(this.firstBundle){default:console.warn("\u9996\u5305\u52a0\u8f7d\u7c7b\u578b\u9519\u8bef\uff0c\u9ed8\u8ba4\u8d70Menu\u8def\u7ebf");case l.BundleName.Main:c.default.getBundleData(l.BundleName.Main).loadBundle(function(){e.startLoadScene(),_.default.trackEvent(_.TrackEventKey.key["\u52a0\u8f7d\u5b8c\u6210"])}),this.schedule(this.updateProgress_2)}},t.prototype.updateProgress_2=function(){var e=0;switch(e+=this.resLoadingWeight/this.totalWeight(),this.firstBundle){default:case l.BundleName.Main:var t=c.default.getBundleData(l.BundleName.Main).loadAxis;e+=this.fisrtBundleWeight/this.totalWeight()*t}this.bar.value=e},t.prototype.startLoadScene=function(){var e=this;this.unschedule(this.updateProgress_2),cc.director.preloadScene(this.firstScene,function(t,n){e.updateProgress_3(t/n)},function(){e.updateProgress_3(1),cc.director.loadScene(e.firstScene,function(){a.default.instance.initAd()})})},t.prototype.updateProgress_3=function(e){var t=0;t+=(this.resLoadingWeight+this.fisrtBundleWeight)/this.totalWeight(),t+=this.firstSceneWeight/this.totalWeight()*e,this.bar.value=t},r([M(cc.Node)],t.prototype,"unDestroyNode",void 0),r([M(cc.JsonAsset)],t.prototype,"languageAsset",void 0),r([S],t)}(cc.Component);n.default=C,cc._RF.pop()},{"../plugin/Secrect":"Secrect","./Comp/GameLoading":"GameLoading","./Config/EnumTypes":"EnumTypes","./Config/GameData":"GameData","./Global":"Global","./Main/App/App":"App","./Mgr/BundleMgr":"BundleMgr","./Mgr/LanguageMgr":"LanguageMgr","./Mgr/SoundMgr":"SoundMgr","./Mgr/StorageMgr":"StorageMgr","./Mgr/TimeMgr":"TimeMgr","./Platform/PlatForm_tt":"PlatForm_tt","./Platform/PlatForm_wx":"PlatForm_wx","./Platform/Platform":"Platform"}],LockItemTipComp:[function(e,t,n){"use strict";cc._RF.push(t,"da665u33tBNxpQBLBs4rDz/","LockItemTipComp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Platform/Platform"),l=e("../../Tool/Tool"),c=e("../UnlockTip/UnlockTipMgr"),u=cc._decorator,d=u.ccclass,h=u.property,p=u.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unlockLabel=null,t.unlockSysId=a.UNLOCKSYS_ID.None,t.tip="",t}return i(t,e),t.prototype.start=function(){this.tip=c.default.Instance.getUnlockTip(this.unlockSysId),this.unlockLabel&&(this.unlockLabel.string=this.tip),l.Tool.addClickEvent(this.node,this.showUnlockTip,this,null,!1,!1)},t.prototype.showUnlockTip=function(){this.unlockSysId!=a.UNLOCKSYS_ID.None&&(this.unlockSysId!=a.UNLOCKSYS_ID.Trait?s.default.instance.showToast(this.tip):s.default.instance.showToast("\u656c\u8bf7\u671f\u5f85"))},r([h(cc.Label)],t.prototype,"unlockLabel",void 0),r([h({type:cc.Enum(a.UNLOCKSYS_ID)})],t.prototype,"unlockSysId",void 0),r([d,p("Component/LockItemTipComp")],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../UnlockTip/UnlockTipMgr":"UnlockTipMgr"}],LockItem:[function(e,t,n){"use strict";cc._RF.push(t,"c71a6lDdghOC7OP/8Q0IV21","LockItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("./MgrUnlock"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unlockType=a.UnlockType.summonGear,t}return i(t,e),t.prototype.onLoad=function(){this.check()||s.EventMgr.on(a.EventType.Common_UnlockType_Update,this.check,this)},t.prototype.check=function(){return!!l.default.Instance.isUnlock(this.unlockType)&&(this.node.active=!1,!0)},r([d({type:cc.Enum(a.UnlockType)})],t.prototype,"unlockType",void 0),r([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","./MgrUnlock":"MgrUnlock"}],LockShow:[function(e,t,n){"use strict";cc._RF.push(t,"e72844KTYJMLYjrejkMfo75","LockShow");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("./MgrUnlock"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unlockType=a.UnlockType.summonGear,t.target=null,t}return i(t,e),t.prototype.onLoad=function(){this.target||(this.target=this.node),this.check()||s.EventMgr.on(a.EventType.Common_UnlockType_Update,this.check,this)},t.prototype.check=function(){return l.default.Instance.isUnlock(this.unlockType)?(this.target.active=!0,!0):(this.target.active=!1,!1)},r([d({type:cc.Enum(a.UnlockType)})],t.prototype,"unlockType",void 0),r([d(cc.Node)],t.prototype,"target",void 0),r([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","./MgrUnlock":"MgrUnlock"}],LogionSelectWeakGuide:[function(e,t,n){"use strict";cc._RF.push(t,"9a0c3tnwZdK179JZNYi3cI4","LogionSelectWeakGuide");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./WeakGuide"),s=cc._decorator,l=s.ccclass,c=s.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weakGuideType=a.WeakGuideType.LegionSelect,t}return i(t,e),t.prototype.onEnable=function(){},t.prototype.doAction=function(){cc.tween(this.guideNode.getChildByName("finger")).sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1)).repeatForever().start()},r([l,c("weakGuide/LogionSelectWeakGuide")],t)}(a.default);n.default=u,cc._RF.pop()},{"./WeakGuide":"WeakGuide"}],MIneTipPanel_1:[function(e,t,n){"use strict";cc._RF.push(t,"5f628wj3WBEfJO/8dL6/SrJ","MIneTipPanel_1");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnSure=null,t}return i(t,e),t.prototype.start=function(){a.Tool.addClickEvent(this.btnSure,this.onBtnSureClick,this)},t.prototype.onBtnSureClick=function(){this.node.destroy()},r([c(cc.Node)],t.prototype,"btnSure",void 0),r([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Tool/Tool":"Tool"}],MIneTipPanel:[function(e,t,n){"use strict";cc._RF.push(t,"02f83Zt0/5Mr5kf+lWPLTiA","MIneTipPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Bundle1_Loading/Scripts/Main/Main_PanelOpen"),s=e("../../../Bundle1_Loading/Scripts/Res/ResPanelOpen"),l=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnNext=null,t}return i(t,e),t.prototype.onLoad=function(){this.panel=this.node.getChildByName("panel"),l.Tool.addClickEvent(this.btnNext,this.onBtnNextClick,this)},t.prototype.onEnable=function(){s.default.panelOpen_SmallToBig(this.panel)},t.prototype.onBtnNextClick=function(){var e=this;s.default.panelClose_BigToSmall(this.panel,function(){a.default.showMineTipPanel("MineTips_1"),e.node.destroy()})},r([d(cc.Node)],t.prototype,"btnNext",void 0),r([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Main/Main_PanelOpen":"Main_PanelOpen","../../../Bundle1_Loading/Scripts/Res/ResPanelOpen":"ResPanelOpen","../../../Bundle1_Loading/Scripts/Tool/Tool":"Tool"}],Main_BlessPanel:[function(e,t,n){"use strict";cc._RF.push(t,"4e9bakpJE9Mw7RT5LRzvdF8","Main_BlessPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../Config/EnumTypes"),c=e("../../Config/GameData"),u=e("../../Mgr/EventMgr"),d=e("../../Mgr/StorageMgr"),h=e("../../Mgr/TimeMgr"),p=e("../../Mgr/VideoVipMgr"),f=e("../../Platform/Platform"),g=e("../../Res/ResPanelOpen"),y=e("../../Tool/Tool"),m=e("../Mgr/BlessMgr"),v=cc._decorator,_=v.ccclass,b=v.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.panel=null,t.content=null,t.vipBox=null,t.vipMsgMain=null,t.startFun=null,t.judeBtnRedFun=null,t._tempTime=0,t}return i(t,e),t.prototype.onLoad=function(){var e=this;y.Tool.addClickEvent(this.btnClose,this.onCloseBtnClick,this),this.content.children.some(function(t,n){y.Tool.addClickEvent(t.getChildByName("getBtn"),function(){e.handleGet(n)},e)}),y.Tool.addClickEvent(this.vipMsgMain.getChildByName("closeBtn"),this.closeVipMsg,this),y.Tool.addClickEvent(this.vipBox,this.openVipMsg,this)},t.prototype.onEnable=function(){this.changeItemMsg(),g.default.panelOpen_SmallToBig(this.panel),this.changeVipMsg()},t.prototype.onCloseBtnClick=function(){var e=this;this.judeBtnRedFun&&this.judeBtnRedFun(),g.default.panelClose_BigToSmall(this.panel,function(){e.node.destroy()})},t.prototype.changeItemMsg=function(){var e=this;this.content.children.some(function(t,n){var o=m.default.Instance.getBlessLevelInfo(n+1,d.default.instance.storageData.blessLevels[n]).addition;if(t.getChildByName("valueLab").getComponent(cc.Label).string=o+"%",t.getChildByName("levelLab").getComponent(cc.Label).string=d.default.instance.storageData.blessLevels[n]+"",d.default.instance.storageData.blessLevels[n]>=30)t.getChildByName("barLab").getComponent(cc.Label).string="MAX",t.getChildByName("bar").getComponent(cc.Sprite).fillRange=1;else{var i=m.default.Instance.getBlessLevelInfo(n+1,d.default.instance.storageData.blessLevels[n]).exp,r=d.default.instance.storageData.blessExps[n];t.getChildByName("barLab").getComponent(cc.Label).string=r+"/"+i,t.getChildByName("bar").getComponent(cc.Sprite).fillRange=r/i}var a=e.getDisTime(n);t.getChildByName("getBtn").active=0===a,t.getChildByName("getBtn").getChildByName("get_notVideo").active=d.default.instance.storageData.blessLevels[n]<=1&&d.default.instance.storageData.blessExps[n]<=0,t.getChildByName("timeBack").active=!t.getChildByName("getBtn").active,e.changeTimeBack(n)})},t.prototype.changeTimeBack=function(e){var t=this.getDisTime(e);this.content.children[e].getChildByName("timeBack").getChildByName("label").getComponent(cc.Label).string=h.default.instance.TimeFormat_M(Math.ceil(1e3*t)),this.content.children[e].getChildByName("timeBack").active&&t<=0&&this.changeItemMsg()},t.prototype.getDisTime=function(e){var t=h.default.instance.getNowTime(),n=0;if(0!=d.default.instance.storageData.blessTimes[e]){var o=m.default.limitTime-(t-d.default.instance.storageData.blessTimes[e])/1e3;o>0&&(n=Math.ceil(o))}return n},t.prototype.handleGet=function(e){return a(this,void 0,void 0,function(){var t,n,o,i;return s(this,function(r){switch(r.label){case 0:return this.content.children[e].getChildByName("getBtn").getChildByName("get_notVideo").active?[3,3]:[3,1];case 1:return[4,new Promise(function(e){return f.default.instance.showVideo(function(){return e(!0)},function(){return e(!1)})})];case 2:if(!r.sent())return[2];r.label=3;case 3:switch((t=d.default.instance.storageData.blessTimes)[e]=h.default.instance.getNowTime(),d.default.instance.changeBlessTimes(t),n=d.default.instance.storageData.blessExps,d.default.instance.storageData.blessLevels[e]<30&&(n[e]+=1,o=m.default.Instance.getBlessLevelInfo(e+1,d.default.instance.storageData.blessLevels[e]).exp,n[e]>=o&&(n[e]=0,(i=d.default.instance.storageData.blessLevels)[e]+=1,d.default.instance.changeBlessLevels(i))),d.default.instance.changeBlessExps(n),this.changeItemMsg(),this.startFun&&this.startFun(),this.changeVipMsg(),u.EventMgr.event(l.GlobalEvent.QuestCommit,l.QUEST_ACTIVE_ID.ReceiveBless),e){case 0:c.default.trackEvent(c.TrackEventKey.key["\u795d\u798f-\u91d1\u5e01\u52a0\u6210"]);break;case 1:c.default.trackEvent(c.TrackEventKey.key["\u795d\u798f-\u653b\u51fb\u52a0\u6210"]),u.EventMgr.event(l.EventType.Battle_Hero_Prop_Update);break;case 2:c.default.trackEvent(c.TrackEventKey.key["\u795d\u798f-\u6280\u80fd\u51b7\u5374"]),u.EventMgr.event(l.EventType.Battle_Hero_Prop_Update)}return[2]}})})},t.prototype.changeVipMsg=function(){var e=p.default.instance.getInfos(),t=0,n=10;e.some(function(o,i){o.videoSum>0&&d.default.instance.storageData.videoSum>=o.videoSum&&(t=i+1,e[i+1].videoSum>0&&(n=e[i+1].videoSum))}),this.vipBox.getChildByName("vipLevel").getComponent(cc.Label).string="VIP "+t,this.vipBox.getChildByName("atkValueLab").getComponent(cc.Label).string="+"+d.default.instance.storageData.videoVipAdditions[0]+"%",this.vipBox.getChildByName("hpValueLab").getComponent(cc.Label).string="+"+d.default.instance.storageData.videoVipAdditions[1]+"%",this.vipMsgMain.getChildByName("vipLevel").getComponent(cc.Label).string="VIP "+t,this.vipMsgMain.getChildByName("atkValueLab").getComponent(cc.Label).string="+"+d.default.instance.storageData.videoVipAdditions[0]+"%",this.vipMsgMain.getChildByName("hpValueLab").getComponent(cc.Label).string="+"+d.default.instance.storageData.videoVipAdditions[1]+"%",this.vipMsgMain.getChildByName("barLab").getComponent(cc.Label).string=d.default.instance.storageData.videoSum+"/"+n;var o=d.default.instance.storageData.videoSum/n;o=o>1?1:o,this.vipMsgMain.getChildByName("bar").getComponent(cc.Sprite).fillRange=o},t.prototype.openVipMsg=function(){this.vipMsgMain.scale=0,this.vipMsgMain.parent.active=!0,cc.tween(this.vipMsgMain).to(.3,{scale:1.1}).to(.1,{scale:1}).start()},t.prototype.closeVipMsg=function(){var e=this;cc.tween(this.vipMsgMain).to(.3,{scale:0}).call(function(){e.vipMsgMain.parent.active=!1}).start()},t.prototype.update=function(e){var t=this;this._tempTime+=e,this._tempTime>=1&&(this._tempTime=0,this.content.children.some(function(e,n){e.getChildByName("timeBack").active&&t.changeTimeBack(n)}))},r([b(cc.Node)],t.prototype,"btnClose",void 0),r([b(cc.Node)],t.prototype,"panel",void 0),r([b(cc.Node)],t.prototype,"content",void 0),r([b(cc.Node)],t.prototype,"vipBox",void 0),r([b(cc.Node)],t.prototype,"vipMsgMain",void 0),r([_],t)}(cc.Component);n.default=S,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Mgr/VideoVipMgr":"VideoVipMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Mgr/BlessMgr":"BlessMgr"}],Main_BtnBless:[function(e,t,n){"use strict";cc._RF.push(t,"a2bd7nx1xxDRp26UfV+cbx0","Main_BtnBless");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.BlessNative=void 0;var a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/StorageMgr"),u=e("../../Mgr/TimeMgr"),d=e("../../Tool/Tool"),h=e("../Main_PanelOpen"),p=e("../Mgr/BlessMgr"),f=cc._decorator,g=f.ccclass,y=(f.property,function(){function e(){}return e.gold=0,e.atk=0,e.cd=0,e}());n.BlessNative=y;var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._atkIcon=null,t._cdIcon=null,t._goldIcon=null,t.disTimes=[0,0,0],t}return i(t,e),t.prototype.onLoad=function(){d.Tool.addClickEvent(this.node,this.onClick,this),this._atkIcon=this.node.getChildByName("atk"),this._cdIcon=this.node.getChildByName("cd"),this._goldIcon=this.node.getChildByName("gold"),this.schedule(this.initDisTimes,1)},t.prototype.onEnable=function(){this.initDisTimes(),this.judeShowRedPoint()},t.prototype.onClick=function(){h.default.showBlessPanel({fun_1:this.initDisTimes.bind(this),fun_2:this.judeShowRedPoint.bind(this)})},t.prototype.initDisTimes=function(){var e=this,t=c.default.instance.storageData.blessTimes,n=u.default.instance.getNowTime();t.some(function(t,o){if(0!=t){var i=p.default.limitTime-(n-t)/1e3;e.disTimes[o]=i<=0?0:Math.ceil(i)}}),this.changeBlessNative()},t.prototype.changeBlessNative=function(){var e=this;this.disTimes.some(function(t,n){if(t>0)switch(n){case 0:y.gold=p.default.Instance.getBlessLevelInfo(n+1,c.default.instance.storageData.blessLevels[n]).addition;break;case 1:y.atk=p.default.Instance.getBlessLevelInfo(n+1,c.default.instance.storageData.blessLevels[n]).addition;break;case 2:y.cd=p.default.Instance.getBlessLevelInfo(n+1,c.default.instance.storageData.blessLevels[n]).addition}else switch(n){case 0:y.gold=0;break;case 1:y.atk=0;break;case 2:y.cd=0}e._atkIcon.getChildByName("open").active=y.atk>0,e._atkIcon.getChildByName("close").active=y.atk<=0,e._cdIcon.getChildByName("open").active=y.cd>0,e._cdIcon.getChildByName("close").active=y.cd<=0,e._goldIcon.getChildByName("open").active=y.gold>0,e._goldIcon.getChildByName("close").active=y.gold<=0,s.default.blessGold=y.gold,s.default.blessAtk=y.atk,s.default.blessCD=y.cd}),l.EventMgr.event(a.EventType.Battle_Hero_Prop_Update)},t.prototype.judeShowRedPoint=function(){var e=!1;c.default.instance.storageData.blessLevels.some(function(t,n){if(t<=1&&c.default.instance.storageData.blessExps[n]<=0)return e=!0,!0}),this.node.getChildByName("redpoint").active=e},r([g],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen","../Mgr/BlessMgr":"BlessMgr"}],Main_BtnExitHeroCopy:[function(e,t,n){"use strict";cc._RF.push(t,"4050fpGwSpJmqZcgG9+GPx3","Main_BtnExitHeroCopy");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Tool/Tool"),s=e("../Main_PanelOpen"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){a.Tool.addClickEvent(this.node,this.onClick,this)},t.prototype.onClick=function(){s.default.showHeroRushQuitPanel(null,!1)},r([c],t)}(cc.Component));n.default=u,cc._RF.pop()},{"../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],Main_BtnPlaceAward:[function(e,t,n){"use strict";cc._RF.push(t,"7dc1b4L7x9NaJlmbD1UgHcF","Main_BtnPlaceAward");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/StorageMgr"),s=e("../../Mgr/TimeMgr"),l=e("../../Tool/Tool"),c=e("../Main_PanelOpen"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnImg=null,t._timeSum=0,t._tempTime=0,t}return i(t,e),t.prototype.onLoad=function(){l.Tool.addClickEvent(this.node,this.onClick,this),this.initTimeSum()},t.prototype.onClick=function(){var e=this._timeSum;e>43200&&(e=43200),c.default.showPlaceAwardPanel(e,this.initTimeSum.bind(this))},t.prototype.initTimeSum=function(){if(null===a.default.instance.storageData.placeAwardTime)a.default.instance.changePlaceAwardTime(s.default.instance.getNowTime());else{var e=(s.default.instance.getNowTime()-a.default.instance.storageData.placeAwardTime)/1e3;this._timeSum=Math.floor(e)}this.judeShowBtn()},t.prototype.judeShowBtn=function(){this._timeSum>600?this.btnImg.active||(this.btnImg.active=!0,this.node.height=85):this.btnImg.active&&(this.btnImg.active=!1,this.node.height=0)},t.prototype.update=function(e){this._tempTime+=e,this._tempTime>=1&&(this._tempTime=0,this._timeSum+=1,this.judeShowBtn())},r([h(cc.Node)],t.prototype,"btnImg",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],Main_BtnRestart:[function(e,t,n){"use strict";cc._RF.push(t,"eee3c1+PpVFx7ZFmt9adLCg","Main_BtnRestart");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Tool/Tool"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){l.Tool.addClickEvent(this.node,this.onClick,this)},t.prototype.onClick=function(){s.EventMgr.event(a.EventType.Battle_Restart_Normal)},r([u],t)}(cc.Component));n.default=d,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Tool/Tool":"Tool"}],Main_BtnRoulette:[function(e,t,n){"use strict";cc._RF.push(t,"70c8fMhhntADqrZbe7Wp3l7","Main_BtnRoulette");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/StorageMgr"),c=e("../../Tool/Tool"),u=e("../Main_PanelOpen"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.redPoint=null,t.videoIcon=null,t}return i(t,e),t.prototype.onLoad=function(){c.Tool.addClickEvent(this.node,this.click,this),this.changeIcon(),s.EventMgr.on(a.EventType.Common_RouletteCount_Update,this.onRouletteCountUpdate,this),this.onRouletteCountUpdate()},t.prototype.click=function(){l.default.instance.storageData.rouletteCount<=0||u.default.showRoulettePanel(this.changeIcon.bind(this))},t.prototype.changeIcon=function(){this.redPoint.active=l.default.instance.storageData.rouletteCount>=5,this.videoIcon.active=l.default.instance.storageData.rouletteCount<5&&l.default.instance.storageData.rouletteCount>0},t.prototype.onRouletteCountUpdate=function(){this.node.opacity=l.default.instance.storageData.rouletteCount>0?255:0},r([p(cc.Node)],t.prototype,"redPoint",void 0),r([p(cc.Node)],t.prototype,"videoIcon",void 0),r([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],Main_BtnSpeedUp:[function(e,t,n){"use strict";cc._RF.push(t,"89d24AMBa5LyoWAXe97KpY5","Main_BtnSpeedUp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/StorageMgr"),c=e("../../Mgr/TimeMgr"),u=e("../../Tool/Tool"),d=e("../Main_PanelOpen"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeLab=null,t._currResidueTime=0,t._tempTime=0,t}return i(t,e),t.prototype.onLoad=function(){u.Tool.addClickEvent(this.node,this.click,this),this._currResidueTime=0,this.changeSpeedStartShow()},t.prototype.click=function(){this._currResidueTime>0||d.default.showSpeedUpPanel(this.changeSpeedStartShow.bind(this))},t.prototype.changeSpeedStartShow=function(){var e=l.default.instance.storageData.speedUpStartTime,t=0;if(null!=e){var n=c.default.instance.getNowTime();(t=(t=Math.floor(900-(n-e)/1e3))<0?0:t)>0&&s.EventMgr.event(a.EventType.Battle_SpeedUp_Switch)}this._currResidueTime=t,this.changeTimeLab()},t.prototype.changeTimeLab=function(){this.timeLab.string=this._currResidueTime>0?c.default.instance.TimeFormat_M(1e3*this._currResidueTime):"\u52a0\u901f"},t.prototype.update=function(e){this._currResidueTime>0&&(this._tempTime+=e,this._tempTime>=1&&(this._currResidueTime-=1,this._tempTime=0,this.changeTimeLab(),this._currResidueTime<=0&&s.EventMgr.event(a.EventType.Battle_SpeedNormal_Switch)))},r([f(cc.Label)],t.prototype,"timeLab",void 0),r([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],Main_ChestPanel:[function(e,t,n){"use strict";cc._RF.push(t,"06359NZSjZIyaA3aFEJVTCh","Main_ChestPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../../plugin/NumberPlus"),c=e("../../Config/EnumTypes"),u=e("../../Config/GameData"),d=e("../../Mgr/BattleData"),h=e("../../Mgr/EventMgr"),p=e("../../Mgr/StorageMgr"),f=e("../../Mgr/TimeMgr"),g=e("../../Platform/Platform"),y=e("../../Res/ResPanelOpen"),m=e("../../Res/comp/AwardShowComp"),v=e("../../Res/comp/CoinComp"),_=e("../../Res/comp/DiamondComp"),b=e("../../Tool/Tool"),S=cc._decorator,M=S.ccclass,C=S.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.panel=null,t.btnStart=null,t.countLab=null,t.currChestType=0,t._getCount=0,t.judeSkillCdFun=null,t}return i(t,e),t.prototype.onLoad=function(){b.Tool.addClickEvent(this.btnClose,this.onCloseBtnClick,this),b.Tool.addClickEvent(this.btnStart,this.onStartBtnClick,this)},t.prototype.init=function(e){var t=this;this.currChestType=e.type,this.judeSkillCdFun=e.fun;var n="\u6536\u770b\u5e7f\u544a\uff0c\u9886\u53d6\u5956\u52b1\uff01";switch(3==this.currChestType&&(n="\u6536\u770b\u5e7f\u544a\uff0c\u83b7\u5f97\u7cbe\u7075\u795d\u798f\uff0c\n\u51cf\u5c1140%\u51b7\u5374\u65f6\u95f4\u5e76\u6301\u7eed10\u5206\u949f\uff01"),this.panel.getChildByName("imgPar").children.some(function(e,n){e.active=n==t.currChestType-1}),this.panel.getChildByName("countPar").getChildByName("icon").children.some(function(e,n){e.active=n==t.currChestType-1}),this.currChestType){case 1:this._getCount=200*l.default.decode(d.default.instance.getLevelInfo(parseInt(p.default.instance.storageData.stage.split("_",1)[0])).obtain),this.countLab.string=l.default.format(this._getCount,2);break;case 2:this.countLab.string="400";break;case 3:this.countLab.string="10min"}this.panel.getChildByName("msgLab").getComponent(cc.Label).string=n,y.default.panelOpen_SmallToBig(this.panel)},t.prototype.onStartBtnClick=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(n){switch(n.label){case 0:return[4,new Promise(function(e){return g.default.instance.showVideo(function(){return e(!0)},function(){return e(!1)})})];case 1:if(!n.sent())return[2];switch(e=cc.find("Canvas").getChildByName("panel3"),t=null,this.currChestType){case 1:t=b.Tool.convertToNodeSpaceAR(e,v.default.instance.label.node),b.Tool.getItemEffect(m.default.instance.coinPrefab,10,e.getPosition(),t,e),p.default.instance.addCoin(this._getCount),h.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.ReceiveChest);break;case 2:t=b.Tool.convertToNodeSpaceAR(e,_.default.instance.label.node),b.Tool.getItemEffect(m.default.instance.diamondPrefab,10,e.getPosition(),t,e),p.default.instance.addDiamond(400),h.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.ReceiveChest);break;case 3:p.default.instance.changeChestSkillCdTime(f.default.instance.getNowTime()),this.judeSkillCdFun&&this.judeSkillCdFun(),h.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.ReceiveChest)}return p.default.instance.changeFlightChestCount(1),this.onCloseBtnClick(),u.default.trackEvent(u.TrackEventKey.key["\u98d8\u7bb1"]),[2]}})})},t.prototype.onCloseBtnClick=function(){var e=this;y.default.panelClose_BigToSmall(this.panel,function(){e.node.destroy()})},r([C(cc.Node)],t.prototype,"btnClose",void 0),r([C(cc.Node)],t.prototype,"panel",void 0),r([C(cc.Node)],t.prototype,"btnStart",void 0),r([C(cc.Label)],t.prototype,"countLab",void 0),r([M],t)}(cc.Component);n.default=T,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BattleData":"BattleData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Res/comp/AwardShowComp":"AwardShowComp","../../Res/comp/CoinComp":"CoinComp","../../Res/comp/DiamondComp":"DiamondComp","../../Tool/Tool":"Tool"}],Main_CombatToast:[function(e,t,n){"use strict";cc._RF.push(t,"a3929989g1DV48gQvQrb1KX","Main_CombatToast");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../../plugin/NumberPlus"),s=e("../../../Config/EnumTypes"),l=e("../../../Config/GameData"),c=e("../../../Mgr/EventMgr"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.totalLabel=null,t.plusLabel=null,t.changeLabel=null,t.nowValue="",t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this;var e=this.node.getChildByName("layout");this.totalLabel=e.getChildByName("totalLabel").getComponent(cc.Label),this.plusLabel=e.getChildByName("plusLabel").getComponent(cc.Label),this.changeLabel=e.getChildByName("changeLabel").getComponent(cc.Label)},t.prototype.init=function(){this.tween=cc.tween(this.node),this.combatUpdate(!0),c.EventMgr.on(s.EventType.Battle_Hero_Prop_Update,this.combatUpdate,this)},t.prototype.combatUpdate=function(e){if(e)return this.node.opacity=0,this.nowValue=l.default.heroCombatCal(),void(this.totalLabel.string=a.default.format(this.nowValue,2));this.updateCal()},t.prototype.updateCal=function(){var e=l.default.heroCombatCal(),t=a.default.sub(a.default.decode(e),a.default.decode(this.nowValue));if(!(Math.abs(t)<=1)){this.nowValue=e,this.totalLabel.string=a.default.format(this.nowValue,2);var n=!a.default.compare(0,t);this.plusLabel.string=n?"+":"-";var o=a.default.format(t,2);this.changeLabel.string=o,this.changeLabel.node.color=n?cc.Color.GREEN:cc.Color.RED,this.node.opacity=255,this.tween.stop(),this.tween.delay(1).to(1,{opacity:0},{easing:"sineOut"}).start(),a.default.compare(t,0)&&c.EventMgr.event(s.EventType.Battle_Hero_Prop_Upgrade)}},t.instance=null,n=r([d],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/EventMgr":"EventMgr"}],Main_CopyInfo:[function(e,t,n){"use strict";cc._RF.push(t,"88da17UN0xP34sZxhTVHkA8","Main_CopyInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.timeLabel=null,t.timeLabel2=null,t}return i(t,e),t.prototype.onLoad=function(){s.EventMgr.on(a.EventType.Battle_CopyInfo_Update,this.updateInfo,this),this.timeLabel2.node.opacity=0},t.prototype.updateInfo=function(e,t,n){if(this.node.opacity=e?255:0,e){this.titleLabel.string=t;var o;o=n>60?"0"+Math.floor(n/60).toString()+":"+(n%60).toString():60==n?"01:00":n>=10?"00:"+n.toString():"00:0"+n.toString(),this.timeLabel.string=o,this.timeLabel2.string=o,this.titleLabel.string=t}},r([u(cc.Label)],t.prototype,"titleLabel",void 0),r([u(cc.Label)],t.prototype,"timeLabel",void 0),r([u(cc.Label)],t.prototype,"timeLabel2",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr"}],Main_EmailPanel:[function(e,t,n){"use strict";cc._RF.push(t,"60932Y/FOBBo7hur42YzDU6","Main_EmailPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/TimeMgr"),c=e("../../Platform/Platform"),u=e("../../Res/ResPanelOpen"),d=e("../../Tool/Tool"),h=e("../Mgr/AssetsMgr"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.panel=null,t.content=null,t.receiveAll=null,t.email_empty=null,t.receiveEmailNodes=[],t}return i(t,e),t.prototype.onLoad=function(){d.Tool.addClickEvent(this.btnClose,this.onCloseBtnClick,this),this.receiveAllEmail(),this.getAllEmail()},t.prototype.onDestroy=function(){this.receiveEmailNodes=null},t.prototype.receiveAllEmail=function(){var e=this;this.content.children.forEach(function(t){t&&e.receiveEmailNode(t)})},t.prototype.receiveEmailNode=function(e){e.getChildByName("getBtn").off("click"),e.getChildByName("icon").children[0].opacity=0,e.getChildByName("title").getComponent(cc.Label).string="",e.getChildByName("timeout").getComponent(cc.Label).string="",e.getChildByName("rewardItem").getChildByName("title").getComponent(cc.Label).string="",e.getChildByName("rewardItem").getChildByName("icon").getComponent(cc.Sprite).spriteFrame=null,this.receiveEmailNodes.push(e),e.removeFromParent()},t.prototype.getAllEmail=function(){},t.prototype.createEmailNode=function(e,t){var n=this,o=e.timeOut-t,i=null;(i=this.receiveEmailNodes.length>0?this.receiveEmailNodes.pop():cc.instantiate(this.content.children[0])).emailid=e.emailid,i.active=!0,i.parent=this.content,i.getChildByName("title").getComponent(cc.Label).string=e.title,i.getChildByName("timeout").getComponent(cc.Label).string="\u5c06\u5728"+l.default.instance.TimeFormat_HM(o)+"\u540e\u8fc7\u671f";var r=e.reward.split(" | ");i.getChildByName("rewardItem").getChildByName("title").getComponent(cc.Label).string=r[2];var u=i.getChildByName("rewardItem").getChildByName("icon").getComponent(cc.Sprite);u.spriteFrame=null,d.Tool.setSprite(u,a.BundleName.Main,h.default.Instance.getIcon(parseInt(r[1]))),i.getChildByName("getBtn").children[0].opacity=1==e.receive?0:255,i.getChildByName("getBtn").children[1].opacity=2==e.receive?0:255,i.getChildByName("getBtn").off("click"),d.Tool.addClickEvent(i.getChildByName("getBtn"),function(){2==e.receive?c.default.instance.showVideo(function(){n.receiveEmail(e.emailid,r,i),s.default.trackEvent(s.TrackEventKey.key["\u90ae\u7bb1\u9886\u53d6\u5e7f\u544a\u94bb\u77f3"])},function(){}):(n.receiveEmail(e.emailid,r,i),s.default.trackEvent(s.TrackEventKey.key["\u90ae\u7bb1\u9886\u53d6\u514d\u8d39\u94bb\u77f3"]))},this)},t.prototype.receiveEmail=function(){},t.prototype.receiveEmailArrary=function(e){var t=this;if(e&&e.length>0){var n=l.default.instance.getNowTime(),o=e.filter(function(e){if(e.timeOut-n>0&&0==e.isReceive&&1==e.receive)return!0});o&&o.length>0?o.forEach(function(e){var o;if(e.timeOut-n>0&&0==e.isReceive&&1==e.receive){var i=e.reward.split(" | ");t.receiveEmail(e.emailid,i,null!==(o=t.content.children.find(function(t){return t.emailid==e.emailid}))&&void 0!==o?o:t.node)}}):c.default.instance.showToast("\u6ca1\u6709\u53ef\u9886\u53d6\u7684\u90ae\u4ef6")}else c.default.instance.showToast("\u6ca1\u6709\u53ef\u9886\u53d6\u7684\u90ae\u4ef6")},t.prototype.onCloseBtnClick=function(){var e=this;u.default.panelClose_BigToSmall(this.panel,function(){e.node.destroy()})},r([g(cc.Node)],t.prototype,"btnClose",void 0),r([g(cc.Node)],t.prototype,"panel",void 0),r([g(cc.Node)],t.prototype,"content",void 0),r([g(cc.Node)],t.prototype,"receiveAll",void 0),r([g(cc.Node)],t.prototype,"email_empty",void 0),r([f],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/TimeMgr":"TimeMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Mgr/AssetsMgr":"AssetsMgr"}],Main_Menu:[function(e,t,n){"use strict";cc._RF.push(t,"2fa6aIxwcdFBIA9bYUhLzJp","Main_Menu");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Config/EnumTypes"),s=e("../Mgr/EventMgr"),l=e("../Mgr/FlyItemMgr"),c=e("../Tool/Tool"),u=e("./Main_UI"),d=e("./Mgr/GuideCore/GuideEnums"),h=e("./Mgr/GuideCore/GuideMgr"),p=e("./Mgr/PartnerMgr"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bottom_layout=null,t.nowBtnState=[!1,!1,!1,!1,!1],t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){this.bottomBtnInit(),n.instance=this},t.prototype.menuShow=function(){u.default.instance.getInCopy()&&(this.nowBtnState[2]=!1,this.btnUpdate()),this.node.opacity=u.default.instance.getInCopy()?0:255},t.prototype.panelShow=function(e){switch(e){case 0:s.EventMgr.event(a.EventType.Main_UI_UpdateState,a.MainUIState.Role);break;case 1:s.EventMgr.event(a.EventType.Main_UI_UpdateState,a.MainUIState.Partner);break;case 2:s.EventMgr.event(a.EventType.Main_UI_UpdateState,a.MainUIState.Copy);break;case 3:s.EventMgr.event(a.EventType.Main_UI_UpdateState,a.MainUIState.Mine);break;case 4:s.EventMgr.event(a.EventType.Main_UI_UpdateState,a.MainUIState.Shop)}},t.prototype.bottomBtnInit=function(){for(var e=0;e<this.bottom_layout.children.length;e++){var t=this.bottom_layout.children[e];c.Tool.addClickEvent(t,this.onBottomClick,this,[e],!0,!1)}l.default.targetMap.Other=this.bottom_layout.children[2]},t.prototype.onBottomClick=function(e){if(!u.default.instance.getInCopy()){for(var t=e[0],n=!1,o=0;o<this.nowBtnState.length;o++)o==t?(this.nowBtnState[o]=!this.nowBtnState[o],n=this.nowBtnState[o]):this.nowBtnState[o]=!1;this.btnUpdate(),n?this.panelShow(t):(s.EventMgr.event(a.EventType.Main_UI_UpdateState,a.MainUIState.UserProp),this.scheduleOnce(function(){h.default.instance.checkSpecial(d.SpecialGuideEnum.TouchAutoSkillButton)})),1==t&&p.default.Instance.getOwnedCount()<=0&&(h.default.instance.isCompleteSpecialGuide(d.SpecialGuideEnum.TouchPartnerItem)||(h.default.instance.completeSpecialGuide(d.SpecialGuideEnum.TouchUpgradePartnerButton),h.default.instance.completeSpecialGuide(d.SpecialGuideEnum.TouchPartnerItem),h.default.instance.completeSpecialGuide(d.SpecialGuideEnum.TouchEquipPartnerButton),h.default.instance.stopSpecialGuide()))}},t.prototype.btnUpdate=function(){for(var e=0;e<this.nowBtnState.length;e++){var t=this.bottom_layout.children[e],n=t.getChildByName("common"),o=t.getChildByName("checkmark"),i=this.nowBtnState[e];o.active=i,n.active=!i}},r([y(cc.Node)],t.prototype,"bottom_layout",void 0),n=r([g],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","../Mgr/EventMgr":"EventMgr","../Mgr/FlyItemMgr":"FlyItemMgr","../Tool/Tool":"Tool","./Main_UI":"Main_UI","./Mgr/GuideCore/GuideEnums":"GuideEnums","./Mgr/GuideCore/GuideMgr":"GuideMgr","./Mgr/PartnerMgr":"PartnerMgr"}],Main_MinePanel:[function(e,t,n){"use strict";cc._RF.push(t,"bb43dTkDZtOaqFiDii0H9qc","Main_MinePanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../../plugin/NumberPlus"),s=e("../../../Config/EnumTypes"),l=e("../../../Mgr/EventMgr"),c=e("../../../Mgr/StorageMgr"),u=e("../../../Res/ResPanelOpen"),d=e("../../../Tool/Tool"),h=e("../../Main_PanelOpen"),p=e("../GuideCore/GuideEnums"),f=e("../GuideCore/GuideMgr"),g=e("./MineBtnRedPoint"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_goMine=null,t.closeBtn=null,t.btn_Research=null,t.coinCount=null,t.diamondCount=null,t.mineCubeCount=null,t.mineShovelCount=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this.node.getChildByName("panel");this.closeBtn=e.getChildByName("closeBtn"),this.coinCount.string=a.default.format(c.default.instance.storageData.coin).toString(),this.diamondCount.string=a.default.format(c.default.instance.storageData.diamond).toString(),this.mineShovelCount.string="*"+a.default.format(c.default.instance.storageData.mineHammer),this.mineCubeCount.string="*"+a.default.format(c.default.instance.storageData.mineCube),l.EventMgr.on(s.EventType.Common_Coin_Update,this.refreshCoin,this),l.EventMgr.on(s.EventType.Common_Dimond_Update,this.refreshDiamond,this),l.EventMgr.on(s.EventType.Mine_Cube_Update,this.refreshCube,this),l.EventMgr.on(s.EventType.Mine_Shovel_Update,this.refreshShovel,this),l.EventMgr.on(s.EventType.Research_RedPoint,this.judeShowRedPoint,this),this.refreshShovel()},t.prototype.start=function(){d.Tool.addClickEvent(this.closeBtn,this.close,this),d.Tool.addClickEvent(this.btn_goMine,this.goMine,this),d.Tool.addClickEvent(this.btn_Research,this.openResearch,this)},t.prototype.onEnable=function(){var e=this.node.getChildByName("panel");u.default.panelOpen_TopToBottom(e),this.judeShowRedPoint(),f.default.instance.checkSpecial(p.SpecialGuideEnum.TouchMine)},t.prototype.refreshCoin=function(){this.coinCount.string=a.default.format(c.default.instance.storageData.coin)},t.prototype.refreshDiamond=function(){this.diamondCount.string=c.default.instance.storageData.diamond.toString()},t.prototype.refreshCube=function(){this.mineCubeCount.string=a.default.format(c.default.instance.storageData.mineCube)},t.prototype.refreshShovel=function(){this.mineShovelCount.string=a.default.format(c.default.instance.storageData.mineHammer),this.mineShovelCount.node.parent.getChildByName("videoIcon").active=c.default.instance.storageData.mineHammer<=0&&c.default.instance.storageData.shovelAdCount<2},t.prototype.close=function(){var e=this.node.getChildByName("panel"),t=this;u.default.panelClose_TopToBottom(e,function(){l.EventMgr.event(s.EventType.Main_UI_UpdateState,s.MainUIState.UserProp),t.node.destroy()})},t.prototype.goMine=function(){h.default.showMinePanel()},t.prototype.openResearch=function(){h.default.showResearchPanel()},t.prototype.judeShowRedPoint=function(){var e=g.default.instance.judeShowRedPoint(!0);this.btn_Research.getChildByName("redpoint").active=e.hasRed,null!=e.jsTime&&(this.unschedule(this.judeShowRedPoint),this.scheduleOnce(this.judeShowRedPoint,e.jsTime))},r([v(cc.Node)],t.prototype,"btn_goMine",void 0),r([v(cc.Node)],t.prototype,"btn_Research",void 0),r([v(cc.Label)],t.prototype,"coinCount",void 0),r([v(cc.Label)],t.prototype,"diamondCount",void 0),r([v(cc.Label)],t.prototype,"mineCubeCount",void 0),r([v(cc.Label)],t.prototype,"mineShovelCount",void 0),r([m],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Res/ResPanelOpen":"ResPanelOpen","../../../Tool/Tool":"Tool","../../Main_PanelOpen":"Main_PanelOpen","../GuideCore/GuideEnums":"GuideEnums","../GuideCore/GuideMgr":"GuideMgr","./MineBtnRedPoint":"MineBtnRedPoint"}],Main_PanelOpen:[function(e,t,n){"use strict";cc._RF.push(t,"bce36sBSgVMtKDPOKLstUbZ","Main_PanelOpen");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../Comp/GameLoading"),c=e("../Config/EnumTypes"),u=e("../Mgr/BundleMgr"),d=e("../Mgr/TimeMgr"),h=e("./AddUI/Main_BlessPanel"),p=e("./AddUI/Main_ChestPanel"),f=e("./AddUI/Main_PlaceAwardPanel"),g=e("./AddUI/Main_RoulettePanel"),y=e("./AddUI/Main_SpeedUpPanel"),m=e("./AddUI/UIComplete"),v=e("./CommonUI/StrengthenResultWindow"),_=e("./Copy/Copy_HelpPanel"),b=e("./Copy/Copy_RewardPanel"),S=e("./Copy/Copy_SelectPanel"),M=e("./Copy/HeroRush/Copy_HeroRush_QuitPanel"),C=e("./Copy/HeroRush/Copy_HeroRush_Result"),T=e("./Main_UI"),k=e("./Mgr/GuideCore/GuideMgr"),I=e("./Partner/PartnerDetailWindow"),E=e("./Partner/UIPartnerTagsView"),w=e("./Role/Main_RolePanel"),P=e("./Shop/ShopSummonResultWindow"),R=e("./Shop/SummonLvUpTip"),O=e("./uiHero/UIHeroUnlockProp"),D=e("./uiRelic/UIRelicDetailView"),A=e("./uiRelic/UIRelicFindResult"),L=e("./uiSevenChallenge/UIDayRewardView"),B=e("./uiSign/SignWindow"),U=e("./uiSkill/SkillDetailWindow"),N=e("./Battle/BattleMgr"),j=e("./CommonUI/InfoPopView"),x=cc._decorator,G=x.ccclass,H=(x.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.panelResClear=function(){for(var e=this.panelRes.length-1;e>=0;e--)this.panelRes[e].decRef();this.panelRes.length=0},t.loadWindow=function(e,t,n){return void 0===n&&(n=c.BundleName.Main),a(this,void 0,Promise,function(){var o=this;return s(this,function(){return[2,new Promise(function(i){var r=cc.find(e);if(!r)return console.error("root ["+e+"] \u4e0d\u5b58\u5728"),void i(null);var a=t;if(t.includes("/")){var s=t.split("/");a=s[s.length-1]}var l=r.getChildByName(a);if(l)return console.warn("["+t+"] \u754c\u9762\u5df2\u7ecf\u5c55\u793a\u4e86"),void i(l);u.default.getBundleData(n).loadRes(t,cc.Prefab,function(e,n){if(e)console.error("["+t+"]\u754c\u9762\u52a0\u8f7d\u5931\u8d25:"+e);else{n.addRef(),o.panelRes.push(n);var a=cc.instantiate(n);r.addChild(a),i(a)}})})]})})},t.show_Main_Partner_Panel=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.loadWindow("Canvas/panel1","Prefabs/Partner/Main_PartnerPanel")];case 1:return t.sent()?(e&&e(),[2]):[2]}})})},t.show_Main_Role_Panel=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel1","Prefabs/Role/Main_RolePanel")];case 1:return n.sent()?(k.default.instance.isInGuide()?w.default.nowBottomBtnState=w.rolePanel_BottomBtnState.Role:e&&(w.default.nowBottomBtnState=e),t&&t(),[2]):[2]}})})},t.show_Main_Mine_Panel=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.loadWindow("Canvas/panel1","Prefabs/Mine/Main_MinePanel")];case 1:return t.sent()?(e&&e(),[2]):[2]}})})},t.show_Main_Shop_Panel=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.loadWindow("Canvas/panel1","Prefabs/Shop/Main_ShopPanel")];case 1:return t.sent()?(e&&e(),[2]):[2]}})})},t.show_Main_GearWeapon_Panel=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Gear/Main_GearWeaponPanel")];case 1:return t.sent()?(e&&e(),[2]):[2]}})})},t.show_Main_GearArmor_Panel=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Gear/Main_GearArmorPanel")];case 1:return t.sent()?(e&&e(),[2]):[2]}})})},t.showStrengthWindow=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Common/StrengthResultWindow")];case 1:return(t=n.sent())?(t.getComponent(v.default).setUpValue(e),[2]):[2]}})})},t.showSkillDetailWindow=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/SkillUI/UISkillDetailView")];case 1:return(t=n.sent())?(t.getComponent(U.default).setUpValue(e),[2]):[2]}})})},t.showShopSummonWindow=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Shop/SummonResultWindow")];case 1:return(t=n.sent())?(t.getComponent(P.default).reuse(e),[2]):[2]}})})},t.showPartnerDetailWindow=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Partner/UIPartnerDetailView")];case 1:return(t=n.sent())?(t.getComponent(I.default).setUpValue(e),[2]):[2]}})})},t.showCopyRewardPanel=function(e,t,n,o){return a(this,void 0,void 0,function(){var i;return s(this,function(r){switch(r.label){case 0:return[4,this.loadWindow("Canvas/panel3","Prefabs/Copy/Copy_RewardPanel")];case 1:return(i=r.sent())?(i.getComponent(b.default).init(e,t,n),o&&o(),[2]):[2]}})})},t.showSummonLvUpWindow=function(e,t,n){return a(this,void 0,void 0,function(){var o;return s(this,function(i){switch(i.label){case 0:return[4,this.loadWindow("Canvas/panel3","Prefabs/Shop/UISummonLvUpTip")];case 1:return(o=i.sent())?(o.getComponent(R.default).setLevel(e,t,n),[2]):[2]}})})},t.showCopyHelpPanel=function(e,t,n){return a(this,void 0,void 0,function(){var o;return s(this,function(i){switch(i.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Copy/Copy_HelpPanel")];case 1:return(o=i.sent())?(o.getComponent(_.default).init(e,t),n&&n(),[2]):[2]}})})},t.showBattleFailPanel=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return k.default.instance.isInGuide()?[2]:T.default.instance.uiState!=c.MainUIState.UserProp&&T.default.instance.uiState!=c.MainUIState.Copy?[2]:[4,this.loadWindow("Canvas/panel2","Prefabs/Battle/Panel/Battle_Fail_Panel")];case 1:return t.sent()?(e&&e(),[2]):[2]}})})},t.showMinePanel=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return l.default.instance.root.active=!0,l.default.instance.bar.value=0,[4,this.loadWindow("Canvas/panel2","Mine_Panel",c.BundleName.Mine)];case 1:return t.sent()?(l.default.instance.bar.value=1,d.default.instance.scheduleOnce(function(){l.default.instance.root.active=!1}),e&&e(),[2]):[2]}})})},t.showResearchPanel=function(e){return a(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return l.default.instance.root.active=!0,l.default.instance.bar.value=0,[4,this.loadWindow("Canvas/panel2","Research/UIMineResearch",c.BundleName.Mine)];case 1:return t.sent()?(l.default.instance.bar.value=1,d.default.instance.scheduleOnce(function(){l.default.instance.root.active=!1}),e&&e(),[2]):[2]}})})},t.show_Week_Sign_Panel=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel3","Prefabs/Sign/WeekRewardView")];case 1:return(t=n.sent())?(t.getComponent(B.default).setCloseCallback(e),[2]):[2]}})})},t.ShowHeroListWindow=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Hero/UIHeroListView")];case 1:return e.sent(),[2]}})})},t.ShowHeroUnlockPop=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel3","Prefabs/Hero/UIHeroUnlockProp")];case 1:return(t=n.sent())?(t.getComponent(O.default).reuse(e),[2]):[2]}})})},t.showResearchCompletePanel=function(e,t,n,o){return a(this,void 0,void 0,function(){var i;return s(this,function(r){switch(r.label){case 0:return[4,this.loadWindow("Canvas/panel2","Research/UIComplete",c.BundleName.Mine)];case 1:return(i=r.sent())?(i.getComponent(m.default).setData(e,t,n),o&&o(),[2]):[2]}})})},t.ShowDailyQuestWindow=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/DailyQuest/UIDailyQuestView")];case 1:return e.sent(),[2]}})})},t.ShowRelicCollectionWindow=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Relic/UIRelicCollectionView")];case 1:return e.sent(),[2]}})})},t.ShowRelicResultWindow=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Relic/UIRelicFindResult")];case 1:return(t=n.sent())?(t.getComponent(A.default).reuse(e),[2]):[2]}})})},t.ShowRelicDetailWindow=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Relic/UIRelicDetailView")];case 1:return(t=n.sent())?(t.getComponent(D.default).reuse(e),[2]):[2]}})})},t.ShowCollectionWindow=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Collection/UICollectionView")];case 1:return e.sent(),[2]}})})},t.showMineTipPanel=function(e,t){return a(this,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2",e,c.BundleName.Mine)];case 1:return n.sent()?(t&&t(),[2]):[2]}})})},t.showCopySelectPanel=function(e,t){return a(this,void 0,void 0,function(){var n;return s(this,function(o){switch(o.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Copy/Copy_SelectPanel")];case 1:return(n=o.sent())?(n.getComponent(S.default).init(e),t&&t(),[2]):[2]}})})},t.showRoulettePanel=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/AddUI/Main_RoulettePanel")];case 1:return(t=n.sent())?(t.getComponent(g.default).init(e),[2]):[2]}})})},t.showSpeedUpPanel=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/AddUI/Main_SpeedUpPanel")];case 1:return(t=n.sent())?(t.getComponent(y.default).successFun=e,[2]):[2]}})})},t.showBlessPanel=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/AddUI/Main_BlessPanel")];case 1:return(t=n.sent())?(t.getComponent(h.default).startFun=e.fun_1,t.getComponent(h.default).judeBtnRedFun=e.fun_2,[2]):[2]}})})},t.showPlaceAwardPanel=function(e,t){return a(this,void 0,void 0,function(){var n;return s(this,function(o){switch(o.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/AddUI/Main_PlaceAwardPanel")];case 1:return(n=o.sent())?(n.getComponent(f.default).init(e,t),[2]):[2]}})})},t.showTestPanel=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/AddUI/TestPanel")];case 1:return e.sent(),[2]}})})},t.showEmailPanel=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/AddUI/Main_EmailPanel")];case 1:return e.sent(),[2]}})})},t.showChestPanel=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/AddUI/Main_ChestPanel")];case 1:return(t=n.sent())?(t.getComponent(p.default).init(e),[2]):[2]}})})},t.showPartnerTagsView=function(e,t){return a(this,void 0,void 0,function(){var n;return s(this,function(o){switch(o.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Partner/UIPartnerTagsView")];case 1:return(n=o.sent())?(n.getComponent(E.default).setFlag(e,t),[2]):[2]}})})},t.showSevenChallengeView=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/SevenChallenge/UISevenChallengeView")];case 1:return e.sent(),[2]}})})},t.showDayRewardView=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/SevenChallenge/UIDayRewardView")];case 1:return(t=n.sent())?(t.getComponent(L.default).setResult(e),[2]):[2]}})})},t.showRingDetailView=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Ring/UIRingDetailView")];case 1:return e.sent(),[2]}})})},t.showRingBreakView=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Ring/UIRingBreakView")];case 1:return e.sent(),[2]}})})},t.showHeroRushHeroSelectView=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Copy/HeroRush/Copy_HeroRush_HeroSelect")];case 1:return e.sent(),[2]}})})},t.showHeroRushLevelSelectView=function(){return a(this,void 0,void 0,function(){var e,t;return s(this,function(n){switch(n.label){case 0:return(e=cc.find("Canvas/panel2/Copy_HeroRush_QuitPanel"))&&e.destroy(),[4,this.loadWindow("Canvas/panel2","Prefabs/Copy/HeroRush/Copy_HeroRush_Select")];case 1:return(t=n.sent())&&5!=N.default.instance.nowStageState?(t.destroy(),[2]):[2]}})})},t.showHeroRushResultPanel=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel3","Prefabs/Copy/HeroRush/Copy_HeroRush_Result")];case 1:return(t=n.sent())?(t.getComponent(C.default).init(e),[2]):[2]}})})},t.showHeroRushQuitPanel=function(e,t){return a(this,void 0,void 0,function(){var n;return s(this,function(o){switch(o.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Copy/HeroRush/Copy_HeroRush_QuitPanel")];case 1:return(n=o.sent())?(n.getComponent(M.default).otherPanel=e,n.getComponent(M.default).isQuit=t,[2]):[2]}})})},t.showPopView=function(e){return a(this,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.loadWindow("Canvas/panel3","Prefabs/Common/InfoPopView")];case 1:return(t=n.sent())?(t.getComponent(j.default).setTarget(e),[2]):[2]}})})},t.showSettingView=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this.loadWindow("Canvas/panel2","Prefabs/Setting/SettingView")];case 1:return e.sent(),[2]}})})},t.panelRes=[],r([G],t)}(cc.Component));n.default=H,cc._RF.pop()},{"../Comp/GameLoading":"GameLoading","../Config/EnumTypes":"EnumTypes","../Mgr/BundleMgr":"BundleMgr","../Mgr/TimeMgr":"TimeMgr","./AddUI/Main_BlessPanel":"Main_BlessPanel","./AddUI/Main_ChestPanel":"Main_ChestPanel","./AddUI/Main_PlaceAwardPanel":"Main_PlaceAwardPanel","./AddUI/Main_RoulettePanel":"Main_RoulettePanel","./AddUI/Main_SpeedUpPanel":"Main_SpeedUpPanel","./AddUI/UIComplete":"UIComplete","./Battle/BattleMgr":"BattleMgr","./CommonUI/InfoPopView":"InfoPopView","./CommonUI/StrengthenResultWindow":"StrengthenResultWindow","./Copy/Copy_HelpPanel":"Copy_HelpPanel","./Copy/Copy_RewardPanel":"Copy_RewardPanel","./Copy/Copy_SelectPanel":"Copy_SelectPanel","./Copy/HeroRush/Copy_HeroRush_QuitPanel":"Copy_HeroRush_QuitPanel","./Copy/HeroRush/Copy_HeroRush_Result":"Copy_HeroRush_Result","./Main_UI":"Main_UI","./Mgr/GuideCore/GuideMgr":"GuideMgr","./Partner/PartnerDetailWindow":"PartnerDetailWindow","./Partner/UIPartnerTagsView":"UIPartnerTagsView","./Role/Main_RolePanel":"Main_RolePanel","./Shop/ShopSummonResultWindow":"ShopSummonResultWindow","./Shop/SummonLvUpTip":"SummonLvUpTip","./uiHero/UIHeroUnlockProp":"UIHeroUnlockProp","./uiRelic/UIRelicDetailView":"UIRelicDetailView","./uiRelic/UIRelicFindResult":"UIRelicFindResult","./uiSevenChallenge/UIDayRewardView":"UIDayRewardView","./uiSign/SignWindow":"SignWindow","./uiSkill/SkillDetailWindow":"SkillDetailWindow"}],Main_PartnerPanel:[function(e,t,n){"use strict";cc._RF.push(t,"dfe0fuiGJVHmq6XPaeQXNmh","Main_PartnerPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../../Platform/Platform"),d=e("../../Res/ResPanelOpen"),h=e("../../Tool/Tool"),p=e("../CommonUI/AsyncQueue"),f=e("../CommonUI/UIItemPool"),g=e("../Main_PanelOpen"),y=e("../Mgr/Guide/MgrGuide"),m=e("../Mgr/GuideCore/GuideEnums"),v=e("../Mgr/GuideCore/GuideMgr"),_=e("../Mgr/GuideCore/GuideTouch"),b=e("../Mgr/PartnerMgr"),S=e("../uiSkill/CommonCandidateItem"),M=e("./PartnerListItem"),C=e("./PartnerSlotItem"),T=cc._decorator,k=T.ccclass,I=T.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.slotItems=[],t.candidateItem=null,t.parentNode=null,t.scrollViewNode=null,t.itemPool=null,t.btnUpAll=null,t.upAllRedPoint=null,t.closeBtn=null,t.ownedLabel=null,t.resultAsync=null,t.isSetTeachPartner=!1,t}return i(t,e),t.prototype.onLoad=function(){for(var e=s.ePartSlot.Slot1;e<s.ePartSlot.Max;e++)this.slotItems[e].setUpValue(b.default.Instance.getPartnerSlotDomain(e));this.checkSlot(!1),this._playResults(),this.refreshLvUpRedPoint(),this.refreshOwnLabel(),h.Tool.addClickEvent(this.btnUpAll,this.lvUpAll,this),h.Tool.addClickEvent(this.candidateItem.node.parent,this.onClickCandidateParent,this,null,!0,!1),h.Tool.addClickEvent(this.closeBtn,this.close,this)},t.prototype._playResults=function(){var e=this;this.resultAsync=new p.default;for(var t=b.default.Instance.getPartDomains(),n=b.default.Instance.getMaxOwnId(),o=function(o,i){var r=t[o];e.resultAsync.push(function(t){var o=e.createItem(r,e.parentNode,n);o.node.opacity=0,o.node.stopAllActions(),cc.tween(o.node).to(.1,{opacity:255}).start(),e.scheduleOnce(t),i&&v.default.instance.checkSpecial(m.SpecialGuideEnum.TouchPartnerItem)})},i=t.length-1,r=0;r<t.length;r++)o(r,r==i);this.resultAsync.play()},t.prototype.createItem=function(e,t,n){var o=this.itemPool.get();o.parent=t,o.stopAllActions();var i=o.getComponent(M.default);return i.setUpValue(e,t),this.isSetTeachPartner||e.isLock()||(this.isSetTeachPartner=!0,this.scheduleOnce(function(){y.default.guideNode.set("partnerItem",o),l.EventMgr.event(s.EventType.Common_TeachPartner_NextStep,2)})),e.getId()==n&&o.addComponent(_.default).setId(m.SpecialGuideEnum.TouchPartnerItem),i},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");d.default.panelOpen_TopToBottom(e),b.default.Instance.modeStatus=s.eModeStatus.Normal,this.changeUIMode(null),l.EventMgr.on(s.EventType.Main_UI_Partner_PartnerModeChange,this.changeUIMode,this),this.checkSlot(!0)},t.prototype.onDisable=function(){l.EventMgr.event(s.EventType.Battle_Partner_Reload),l.EventMgr.off(s.EventType.Main_UI_Partner_PartnerModeChange,this.changeUIMode,this)},t.prototype.close=function(){var e=this.node.getChildByName("base"),t=this;d.default.panelClose_TopToBottom(e,function(){l.EventMgr.event(s.EventType.Main_UI_UpdateState,s.MainUIState.UserProp),t.node.destroy()})},t.prototype.refreshLvUpRedPoint=function(){var e=b.default.Instance.hasCanLevelUp();this.upAllRedPoint.active=e,this.btnUpAll.getComponentInChildren(cc.Sprite).setState(e?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY)},t.prototype.onClickCandidateParent=function(){b.default.Instance.modeStatus=s.eModeStatus.Normal,this.changeUIMode(null)},t.prototype.lvUpAll=function(){if(b.default.Instance.hasCanLevelUp()){var e=b.default.Instance.levelUp();g.default.showStrengthWindow({type:s.StrengthenType.Partner,results:e}),this.refreshLvUpRedPoint()}else u.default.instance.showToast("\u65e0\u53ef\u5f3a\u5316\u6280\u80fd")},t.prototype.changeUIMode=function(e){if(b.default.Instance.modeStatus==s.eModeStatus.Normal)return this.candidateItem.node.parent.active=!1,this.scrollViewNode.active=!0,void this.slotItems.forEach(function(e){return e.hideFinger()});this.candidateItem.node.parent.active=!0,this.scrollViewNode.active=!1,this.candidateItem.setUpValue(e),this.slotItems.forEach(function(e){return e.showFinger()})},t.prototype.refreshOwnLabel=function(){this.ownedLabel.string=c.default.Instance.getLanguage("ATK")+" +"+a.default.format(b.default.Instance.getOwnedValue())+"%"},t.prototype.checkSlot=function(e){void 0===e&&(e=!1);for(var t=b.default.Instance.getUnlockSlotIds(),n=0;n<t.length;n++){var o=t[n];this.checkUnlockSkillSlot(o,e)}},t.prototype.checkUnlockSkillSlot=function(e,t){void 0===t&&(t=!0);var n=this.slotItems[b.default.Instance.convertPartnerSysIdToSlotIndex(e)];n&&(n.setLock(!0),n.setEmpty(!1),n.setRedPoint(!1),t&&n.playUnlockAni())},r([I([C.default])],t.prototype,"slotItems",void 0),r([I(S.default)],t.prototype,"candidateItem",void 0),r([I(cc.Node)],t.prototype,"parentNode",void 0),r([I(cc.Node)],t.prototype,"scrollViewNode",void 0),r([I(f.default)],t.prototype,"itemPool",void 0),r([I(cc.Node)],t.prototype,"btnUpAll",void 0),r([I(cc.Node)],t.prototype,"upAllRedPoint",void 0),r([I(cc.Node)],t.prototype,"closeBtn",void 0),r([I(cc.Label)],t.prototype,"ownedLabel",void 0),r([k],t)}(cc.Component);n.default=E,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/AsyncQueue":"AsyncQueue","../CommonUI/UIItemPool":"UIItemPool","../Main_PanelOpen":"Main_PanelOpen","../Mgr/Guide/MgrGuide":"MgrGuide","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/GuideCore/GuideTouch":"GuideTouch","../Mgr/PartnerMgr":"PartnerMgr","../uiSkill/CommonCandidateItem":"CommonCandidateItem","./PartnerListItem":"PartnerListItem","./PartnerSlotItem":"PartnerSlotItem"}],Main_PlaceAwardPanel:[function(e,t,n){"use strict";cc._RF.push(t,"0e80c899HNExoY6WTE+GnzX","Main_PlaceAwardPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../../plugin/NumberPlus"),c=e("../../Config/EnumTypes"),u=e("../../Config/GameData"),d=e("../../Mgr/BattleData"),h=e("../../Mgr/EventMgr"),p=e("../../Mgr/ItemMgr"),f=e("../../Mgr/StorageMgr"),g=e("../../Mgr/TimeMgr"),y=e("../../Platform/Platform"),m=e("../../Res/ResPanelOpen"),v=e("../../Res/comp/AwardShowComp"),_=e("../../Res/comp/CoinComp"),b=e("../../Tool/Tool"),S=e("../CommonUI/UIItemPool"),M=e("../Mgr/EquipmentMgr"),C=e("../Shop/UISummonResultItem"),T=cc._decorator,k=T.ccclass,I=T.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panel=null,t._continueBtn=null,t._otherAwardGetBtn=null,t._otherAwardBtn=null,t._otherAwardPanel=null,t.goldLab=null,t.other_goldLab=null,t.otherBtnLab=null,t.timeLab=null,t.award_mLab=null,t.content=null,t.other_content=null,t.awardTimeSum=0,t.currLevelMsg=null,t._getGoldNum=0,t._equip_awardMsg={},t._other_equip_awardMsg=null,t.changeHomeBtnStateFun=null,t.currDucTime=0,t.canGetOtherAward=!1,t._otherAwardCoin=0,t._tempTime=0,t}return i(t,e),t.prototype.onLoad=function(){this._continueBtn=this.panel.getChildByName("continueBtn"),this._otherAwardBtn=this.panel.getChildByName("otherAwardBtn"),this._otherAwardPanel=this.node.getChildByName("otherAwardPanel"),this._otherAwardGetBtn=this._otherAwardPanel.getChildByName("continueBtn"),b.Tool.addClickEvent(this._continueBtn,this.onContinueBtnClick,this),b.Tool.addClickEvent(this._otherAwardBtn,this.onOtherAwardBtnClick,this),b.Tool.addClickEvent(this._otherAwardPanel.getChildByName("closeBtn"),this.onCloseOtherPanelAward,this),b.Tool.addClickEvent(this._otherAwardGetBtn,this.onGetOtherAwardBtnClick,this)},t.prototype.init=function(e,t){this.awardTimeSum=e,this.changeHomeBtnStateFun=t,this._equip_awardMsg={},this.currLevelMsg=d.default.instance.getLevelInfo(parseInt(f.default.instance.storageData.stage.split("_",1)[0]));var n=Math.floor(this.awardTimeSum/60);this.timeLab.string=n+"",this._getGoldNum=l.default.decode(this.currLevelMsg.obtain)*n,this.goldLab.string=l.default.format(this._getGoldNum,2),this.award_mLab.string=l.default.format(l.default.format(l.default.decode(this.currLevelMsg.obtain)),2)+"/M",this._equip_awardMsg=this.addEquipItem(n,this.content),m.default.panelOpen_SmallToBig(this.panel),this.judeOtherBtnState()},t.prototype.addEquipItem=function(e,t){for(var n=Math.ceil(e/10),o=0,i=0;i<n;i++)b.Tool.percent(this.currLevelMsg.obtainGearRate/100)&&o++;var r=[];for(i=0;i<this.currLevelMsg.obtainWidget.length;i++)for(var a=this.currLevelMsg.obtainWidget[i],s=0;s<a.weight;s++)r.push(a.id.toString());var l={};for(i=0;i<o;i++){var c=b.Tool.getRandomInArray(r);l[c]?l[c]+=1:l[c]=1}for(var u in l){var d=this.get();d.parent=t,d.stopAllActions();var h=d.getComponent(C.default),f=M.default.Instance.getGearInfo(Number(u));h.setQuality(f.quality),h.setIcon(p.default.Instance.getEquipmentIcon(f.icon)),h.setType(f.id,3),h.playGlow(f.quality),d.getChildByName("label").getComponent(cc.Label).string=l[u]+""}return l},t.prototype.judeOtherBtnState=function(){if(null===f.default.instance.storageData.getOtherAwardTime)this.otherBtnLab.string="\u83b7\u5f97\u989d\u5916\u5956\u52b1",this.canGetOtherAward=!0,this._otherAwardBtn.getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL);else{var e=g.default.instance.getNowTime()-f.default.instance.storageData.getOtherAwardTime;(e/=1e3)>=3600?(this.otherBtnLab.string="\u83b7\u5f97\u989d\u5916\u5956\u52b1",this.canGetOtherAward=!0,this._otherAwardBtn.getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL)):(this.currDucTime=Math.floor(3600-e),this.otherBtnLab.string=Math.ceil(this.currDucTime/60)+"\u5206\u949f\n\u4e0b\u6b21\u989d\u5916\u5956\u52b1",this.canGetOtherAward=!1,this._otherAwardBtn.getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL))}},t.prototype.onCloseBtnClick=function(){var e=this;m.default.panelClose_BigToSmall(this.panel,function(){e.node.destroy()})},t.prototype.onContinueBtnClick=function(){var e=cc.find("Canvas").getChildByName("panel3"),t=b.Tool.convertToNodeSpaceAR(e,_.default.instance.label.node);for(var n in b.Tool.getItemEffect(v.default.instance.coinPrefab,10,e.getPosition(),t,e),f.default.instance.addCoin(this._getGoldNum),this._equip_awardMsg){var o=M.default.Instance.getGearInfo(Number(n));M.default.Instance.addEquipment(o.id,this._equip_awardMsg[n])}f.default.instance.changePlaceAwardTime(g.default.instance.getNowTime()),this.changeHomeBtnStateFun&&this.changeHomeBtnStateFun(),this.onCloseBtnClick(),h.EventMgr.event(c.GlobalEvent.ObtainIdleReceived),h.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.ObtainReceive)},t.prototype.onOtherAwardBtnClick=function(){this.canGetOtherAward&&(this._otherAwardPanel.active=!0,null===this._other_equip_awardMsg&&(this._other_equip_awardMsg=this.addEquipItem(360,this.other_content)),this._otherAwardCoin=360*l.default.decode(this.currLevelMsg.obtain),this.other_goldLab.string=l.default.format(this._otherAwardCoin,2),m.default.panelOpen_SmallToBig(this._otherAwardPanel))},t.prototype.onGetOtherAwardBtnClick=function(){return a(this,void 0,void 0,function(){var e,t,n,o;return s(this,function(i){switch(i.label){case 0:return[4,new Promise(function(e){return y.default.instance.showVideo(function(){return e(!0)},function(){return e(!1)})})];case 1:if(!i.sent())return[2];for(n in e=cc.find("Canvas").getChildByName("panel3"),t=b.Tool.convertToNodeSpaceAR(e,_.default.instance.label.node),b.Tool.getItemEffect(v.default.instance.coinPrefab,10,e.getPosition(),t,e),f.default.instance.addCoin(this._otherAwardCoin),this._other_equip_awardMsg)o=M.default.Instance.getGearInfo(Number(n)),M.default.Instance.addEquipment(o.id,this._equip_awardMsg[n]);return f.default.instance.changeOtherAwardTime(g.default.instance.getNowTime()),this.judeOtherBtnState(),this.onCloseOtherPanelAward(),h.EventMgr.event(c.GlobalEvent.ObtainIdleReceived),u.default.trackEvent(u.TrackEventKey.key["\u6302\u673a\u989d\u5916\u5956\u52b1"]),[2]}})})},t.prototype.onCloseOtherPanelAward=function(){var e=this;m.default.panelClose_BigToSmall(this._otherAwardPanel,function(){e._otherAwardPanel.active=!1})},t.prototype.update=function(e){this._tempTime+=e,this._tempTime>=1&&(this._tempTime=0,this.currDucTime>0&&(this.currDucTime--,this.otherBtnLab.string=Math.ceil(this.currDucTime/60)+"\u5206\u949f\n\u4e0b\u6b21\u989d\u5916\u5956\u52b1",this.currDucTime<=0&&this.judeOtherBtnState()))},r([I(cc.Node)],t.prototype,"panel",void 0),r([I(cc.Label)],t.prototype,"goldLab",void 0),r([I(cc.Label)],t.prototype,"other_goldLab",void 0),r([I(cc.Label)],t.prototype,"otherBtnLab",void 0),r([I(cc.Label)],t.prototype,"timeLab",void 0),r([I(cc.Label)],t.prototype,"award_mLab",void 0),r([I(cc.Node)],t.prototype,"content",void 0),r([I(cc.Node)],t.prototype,"other_content",void 0),r([k],t)}(S.default);n.default=E,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BattleData":"BattleData","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Res/comp/AwardShowComp":"AwardShowComp","../../Res/comp/CoinComp":"CoinComp","../../Tool/Tool":"Tool","../CommonUI/UIItemPool":"UIItemPool","../Mgr/EquipmentMgr":"EquipmentMgr","../Shop/UISummonResultItem":"UISummonResultItem"}],Main_RolePanel:[function(e,t,n){"use strict";cc._RF.push(t,"75342A0u7JIp6u6RYT8zCYK","Main_RolePanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.rolePanel_BottomBtnState=void 0;var a,s,l=e("../../../plugin/NumberPlus"),c=e("../../Config/EnumTypes"),u=e("../../Config/GameData"),d=e("../../Mgr/EventMgr"),h=e("../../Mgr/LanguageMgr"),p=e("../../Mgr/StorageMgr"),f=e("../../Res/ResPanelOpen"),g=e("../../Tool/Tool"),y=e("../Main_PanelOpen"),m=e("../Mgr/EquipmentMgr"),v=e("../Mgr/GuideCore/GuideEnums"),_=e("../Mgr/GuideCore/GuideMgr"),b=e("../Mgr/Hero/HeroMgr"),S=e("../Mgr/Relic/RelicData"),M=e("../Mgr/SkillMgr"),C=e("../Mgr/Unlock/MgrUnlock"),T=e("../uiHero/UIHeroLevelPropPop"),k=e("../uiHero/UIHeroLevelProps"),I=e("../uiHero/UIHeroSkillInfo"),E=e("./UserToggle"),w=cc._decorator,P=w.ccclass,R=w.property;(function(e){e[e.Role=0]="Role",e[e.Skill=1]="Skill",e[e.Relic=2]="Relic",e[e.Master=3]="Master",e[e.Peculiarity=4]="Peculiarity"})(a=n.rolePanel_BottomBtnState||(n.rolePanel_BottomBtnState={})),function(e){e[e.SkillInfo=0]="SkillInfo",e[e.PropInfo=1]="PropInfo"}(s||(s={}));var O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bottomBtnNode=null,t.heroPanel=null,t.skillPanel=null,t.relicPanel=null,t.masterPanel=null,t.peculiarityPanel=null,t.infoContent=null,t.btnChangeInfo=null,t.btnHeroChange=null,t.skillInfo=null,t.levelProps=null,t.propInfoNode=null,t.closeBtn=null,t.curInfoType=s.SkillInfo,t.userToggles=[],t.nameKey=["atk","hp","hpRecovery","attackSpeed","criticalChance","criticalDamage","Coin Add","Skill Effect","Skill CD","Boss Damage Amount","partner_aspd","Shovel_Recovery","Research_CD_Add","digMineAdd","Movement Speed","dodge","normalAtkAdd"],t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){var e=this.node.getChildByName("panel");this.closeBtn=e.getChildByName("closeBtn"),this.userToggles=this.bottomBtnNode.getComponentsInChildren(E.default)},t.prototype.start=function(){g.Tool.addClickEvent(this.closeBtn,this.close,this),g.Tool.addClickEvent(this.btnHeroChange,this.onClickBtnHeroChange,this),g.Tool.addClickEvent(this.btnChangeInfo,this.onClickChangeInfo,this),this.bottomBtnInit(),this.propInit(),this.updateProp(),d.EventMgr.on(c.EventType.Battle_Hero_Prop_Update,this.updateProp,this),d.EventMgr.on(c.GlobalEvent.ChangeBattleHero,this.refreshSkillInfo,this),d.EventMgr.on(c.GlobalEvent.HeroLevelChange,this.refreshSkillInfo,this);var e=C.default.Instance.isUnlock(c.UnlockType.Hero);this.btnHeroChange.getChildByName("normal").getComponent(cc.Sprite).setState(e?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY),this.btnHeroChange.getChildByName("lock").active=!e},t.prototype.onEnable=function(){this.curInfoType=s.SkillInfo;var e=this.node.getChildByName("panel");f.default.panelOpen_TopToBottom(e,function(){d.EventMgr.event(c.EventType.Common_TeachGear_NextStep,2),d.EventMgr.event(c.EventType.Common_TeachSkill_NextStep,2)}),this.refreshInfoNode(),this.refreshSkillInfo(),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchUpgradeGearButton),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchUpgradeSkillButton),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchTraitToggle),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchRelicToggle),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchHeroToggle),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchUpgradeHeroToggle)},t.prototype.refreshInfoNode=function(){this.skillInfo.node.active=this.curInfoType==s.SkillInfo,this.propInfoNode.active=this.curInfoType==s.PropInfo},t.prototype.close=function(){var e=this.node.getChildByName("panel"),t=this;f.default.panelClose_BottomToTop(e,function(){d.EventMgr.event(c.EventType.Main_UI_UpdateState,c.MainUIState.UserProp),t.node.destroy()})},t.prototype.onDestroy=function(){T.default.destroyComp()},t.prototype.propInit=function(){for(var e=this.infoContent.children[0],t=1;t<this.nameKey.length;t++){var n=cc.instantiate(e);this.infoContent.addChild(n)}},t.prototype.updateProp=function(){for(var e=[l.default.format(l.default.decode(u.default.heroAtkCal()),2),l.default.format(l.default.decode(u.default.heroHpCal()),2),l.default.format(u.default.heroHpRecoveryCal(),2),l.default.format(u.default.heroAspdCal(),2),l.default.format(100*u.default.heroCriticalChanceCal(),2)+"%",l.default.format(100*u.default.heroCriticalDamageCal(),2)+"%",l.default.format(l.default.mul(l.default.sub(u.default.heroCoinAddCal(),1),100),2)+"%",l.default.format(l.default.mul(l.default.sub(u.default.heroSkillDamageCal(),1),100),2)+"%",l.default.format(l.default.mul(l.default.sub(u.default.heroCDReduceCal(),-1),100),2)+"%",l.default.format(l.default.mul(l.default.sub(u.default.heroBossDamageCal(),1),100),2)+"%",l.default.format(l.default.mul(l.default.sub(u.default.heroPartnerAspdCal(),1),100),2)+"%",l.default.format(100*u.default.getShovelRecoveryAddition(),2)+"%",l.default.format(100*u.default.getShovelRecoveryAddition(),2)+"%",l.default.format(100*u.default.getMineCubeAddition(),2)+"%",l.default.format(100*u.default.getHeroMoveSpeedCal(),2)+"%",l.default.format(100*u.default.heroDodgeCal(),2)+"%",l.default.format(100*(u.default.normalDamageAddCal()-1),2)+"%"],t=0;t<this.infoContent.children.length;t++){var n=this.infoContent.children[t],o=g.Tool.findNodeByName(n,"value");g.Tool.findNodeByName(n,"name").getComponent(cc.Label).string=h.default.Instance.getLanguage(this.nameKey[t]),o.getComponent(cc.Label).string=e[t]}},t.prototype.onPageToIdx=function(e){0==e?(_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchWeaponView),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchChangeHero),m.default.Instance.getOwnedCount()<=0&&_.default.instance.isCompleteSpecialGuide(v.SpecialGuideEnum.TouchUpgradeGearButton)&&!_.default.instance.isCompleteSpecialGuide(v.SpecialGuideEnum.TouchWeaponItem)&&(_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchUpgradeGearButton),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchWeaponView),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchWeaponItem),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchEquipWeaponButton),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchClosEquipWeaponButton),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchArmorView),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchArmorItem),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchEquipArmorButton),_.default.instance.stopSpecialGuide()),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchRingButton)):4==e?_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchChangButton):3==e?_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchUpgradeMastery):2==e?_.default.instance.isCompleteSpecialGuide(v.SpecialGuideEnum.TouchCaveRushReward)&&p.default.instance.storageData.fork<=0?(_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchRelicToggle),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchSearchRelicButton),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchAnyWhere),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchRelicIcon),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchRelicItem),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchRelicEquipButton),_.default.instance.stopSpecialGuide()):0==S.default.Instance.getRelicCount()?_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchSearchRelicButton):(_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchSearchRelicButton),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchAnyWhere),_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchRelicIcon)):1==e&&M.default.Instance.getOwnedCount()<=0&&(_.default.instance.isCompleteGuide(v.SpecialGuideEnum.TouchSkillItem)||(_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchUpgradeSkillButton),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchSkillItem),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchEquipSkillButton),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchCloseSkillView),_.default.instance.completeSpecialGuide(v.SpecialGuideEnum.TouchAutoSkillButton),_.default.instance.stopSpecialGuide()))},t.prototype.bottomBtnInit=function(){this.updateBottomBtnState();for(var e=0;e<this.bottomBtnNode.children.length;e++){var t=this.bottomBtnNode.children[e];g.Tool.addClickEvent(t,this.bottomBtnClick,this,[e],!0,!1)}var n=C.default.Instance.isUnlock(c.UnlockType.skill);this.bottomBtnNode.children[a.Skill].getChildByName("lock").active=!n,n=C.default.Instance.isUnlock(c.UnlockType.Mastery),this.bottomBtnNode.children[a.Master].getChildByName("lock").active=!n},t.prototype.bottomBtnClick=function(e){n.nowBottomBtnState=e[0],this.updateBottomBtnState()},t.prototype.updateBottomBtnState=function(){for(var e=[this.heroPanel,this.skillPanel,this.relicPanel,this.masterPanel,this.peculiarityPanel],t=0;t<this.bottomBtnNode.children.length;t++)this.bottomBtnNode.children[t].getChildByName("checkmark").active=t==n.nowBottomBtnState,e[t].active=t==n.nowBottomBtnState,this.userToggles[t].setToggleCheck(t==n.nowBottomBtnState);this.onPageToIdx(n.nowBottomBtnState)},t.prototype.onClickBtnHeroChange=function(){y.default.ShowHeroListWindow()},t.prototype.onClickChangeInfo=function(){this.curInfoType=this.curInfoType==s.SkillInfo?s.PropInfo:s.SkillInfo,this.refreshInfoNode()},t.prototype.refreshSkillInfo=function(){var e=b.default.Instance.getBattleId(),t=b.default.Instance.getHeroInfo(e),n=b.default.Instance.getData(e),o=(null==n?0:n.level)||0;this.skillInfo.setSkill(t.skillId),this.skillInfo.setState(o,t.skillUnlockLv),this.levelProps.setProps(o,t.props,t.propValues,t.unlockPropLvs)},t.nowBottomBtnState=a.Role,r([R(cc.Node)],t.prototype,"bottomBtnNode",void 0),r([R(cc.Node)],t.prototype,"heroPanel",void 0),r([R(cc.Node)],t.prototype,"skillPanel",void 0),r([R(cc.Node)],t.prototype,"relicPanel",void 0),r([R(cc.Node)],t.prototype,"masterPanel",void 0),r([R(cc.Node)],t.prototype,"peculiarityPanel",void 0),r([R(cc.Node)],t.prototype,"infoContent",void 0),r([R(cc.Node)],t.prototype,"btnChangeInfo",void 0),r([R(cc.Node)],t.prototype,"btnHeroChange",void 0),r([R(I.default)],t.prototype,"skillInfo",void 0),r([R(k.default)],t.prototype,"levelProps",void 0),r([R(cc.Node)],t.prototype,"propInfoNode",void 0),n=r([P],t)}(cc.Component);n.default=O,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/StorageMgr":"StorageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen","../Mgr/EquipmentMgr":"EquipmentMgr","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/Hero/HeroMgr":"HeroMgr","../Mgr/Relic/RelicData":"RelicData","../Mgr/SkillMgr":"SkillMgr","../Mgr/Unlock/MgrUnlock":"MgrUnlock","../uiHero/UIHeroLevelPropPop":"UIHeroLevelPropPop","../uiHero/UIHeroLevelProps":"UIHeroLevelProps","../uiHero/UIHeroSkillInfo":"UIHeroSkillInfo","./UserToggle":"UserToggle"}],Main_RoulettePanel:[function(e,t,n){"use strict";cc._RF.push(t,"39c02XHI+xMNr0Ksya2dmrr","Main_RoulettePanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../Config/EnumTypes"),c=e("../../Mgr/BundleMgr"),u=e("../../Config/GameData"),d=e("../../Mgr/EventMgr"),h=e("../../Mgr/StorageMgr"),p=e("../../Mgr/TimeMgr"),f=e("../../Platform/Platform"),g=e("../../Res/ResPanelOpen"),y=e("../../Res/comp/AwardShowComp"),m=e("../../Res/comp/DiamondComp"),v=e("../../Tool/Tool"),_=e("../Mgr/RouletteMgr"),b=cc._decorator,S=b.ccclass,M=b.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.panel=null,t.main=null,t.content=null,t.btnStart=null,t.videoIcon=null,t.hintLab=null,t.rouletteSpine=null,t._currResidueTime=0,t._getAwardMsg=null,t._awardPopup=null,t.changeIconFun=null,t._tempTime=0,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.init=function(e){var t=this;if(this.changeIconFun=e,this.rouletteSpine.animation="",v.Tool.addClickEvent(this.btnClose,this.onCloseBtnClick,this),v.Tool.addClickEvent(this.btnStart,this.onStartBtnClick,this),this._awardPopup=this.node.getChildByName("awardPopup"),v.Tool.addClickEvent(this._awardPopup.getChildByName("ok_btn"),function(){cc.tween(t._awardPopup).to(.3,{scale:0}).call(function(){return t._awardPopup.active=!1}).start()},this),this.initRouletteItems(),d.EventMgr.on(l.EventType.Main_UI_RouletteUpdate,this.changeShowStartBtn,this),g.default.panelOpen_SmallToBig(this.panel),h.default.instance.storageData.rouletteLastTime){var n=p.default.instance.getNowTime()-h.default.instance.storageData.rouletteLastTime;n=Math.ceil(n/1e3),h.default.instance.changeRouletteResidueTime(-n)}this._currResidueTime=0,this.changeShowStartBtn()},t.prototype.initRouletteItems=function(){return a(this,void 0,void 0,function(){var e,t,n,o,i,r;return s(this,function(a){switch(a.label){case 0:return[4,new Promise(function(e){return c.default.getBundleData(l.BundleName.Main).loadRes("Prefabs/AddUI/other/rouletteItem",cc.Prefab,function(t,n){return e(n)})})];case 1:for(e=a.sent(),t=_.default.Instance.getInfos(),n=t.length,o=function(o){var r=t[o],a=cc.instantiate(e);i.content.addChild(a),a.angle=o*(360/n),a.getComponentInChildren(cc.Label).string="x"+r.count,i.getItemSpriteFarme(r.asset).then(function(e){a.getComponentInChildren(cc.Sprite).spriteFrame=e})},i=this,r=0;r<t.length;r++)o(r);return[2]}})})},t.prototype.getItemSpriteFarme=function(e){return a(this,void 0,Promise,function(){var t;return s(this,function(n){switch(n.label){case 0:switch(t="Res/icon_jewel",e){case l.ASSET_TYPE.BossRushKey:t="Res/icon_ticket_01";break;case l.ASSET_TYPE.GoldRushKey:t="Res/icon_ticket_02";break;case l.ASSET_TYPE.CaveRushKey:t="Res/icon_ticket_03"}return[4,new Promise(function(e){return c.default.getBundleData(l.BundleName.Main).loadRes("Textures/"+t,cc.SpriteFrame,function(t,n){return e(n)})})];case 1:return[2,n.sent()]}})})},t.prototype.onStartBtnClick=function(){return a(this,void 0,void 0,function(){var e,t,n,o=this;return s(this,function(i){switch(i.label){case 0:return h.default.instance.storageData.rouletteCount<=0?[2]:h.default.instance.storageData.rouletteResidueTime>0?[2]:h.default.instance.storageData.rouletteCount<5?[4,new Promise(function(e){return f.default.instance.showVideo(function(){return e(!0)},function(){return e(!1)})})]:[3,2];case 1:if(!i.sent())return[2];u.default.trackEvent(u.TrackEventKey.key["\u8f6c\u76d8"]),i.label=2;case 2:return h.default.instance.changeRouletteCount(-1),h.default.instance.storageData.rouletteCount>=1&&h.default.instance.changeRouletteResidueTime(300,!0),e=_.default.Instance.getInfos(),t=v.Tool.randomInt(0,e.length-1),n=-1800-t*(360/e.length)-this.main.angle,this.rouletteSpine.animation="animation",cc.tween(this.main).by(3,{angle:n},{easing:"quadOut"}).call(function(){o.rouletteSpine.animation="",o.main.angle=-t*(360/e.length),o.handleGetAward(),o.openAward(o.content.children[t].getChildByName("img").getComponent(cc.Sprite).spriteFrame,e[t].count)}).start(),this.changeShowStartBtn(),this._getAwardMsg=e[t],this.changeIconFun&&this.changeIconFun(),[2]}})})},t.prototype.changeShowStartBtn=function(){var e=h.default.instance.storageData.rouletteCount,t=h.default.instance.storageData.rouletteResidueTime;this.videoIcon.active=0!=e&&e<5&&t<=0,this.btnStart.getChildByName("redpoint").active=e>=5,this.btnStart.getComponent(cc.Sprite).setState(t<=0&&e>0?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY),t<=0?this.hintLab.string="(\u5269\u4f59\u6b21\u6570\uff1a"+e+"\u6b21)":this.changeHint(),this._currResidueTime=t},t.prototype.changeHint=function(){this.hintLab.string=p.default.instance.TimeFormat(1e3*this._currResidueTime)},t.prototype.onCloseBtnClick=function(){var e=this;g.default.panelClose_BigToSmall(this.panel,function(){e.node.destroy()})},t.prototype.openAward=function(e,t){this._awardPopup.scale=0,this._awardPopup.getChildByName("iconImg").getComponent(cc.Sprite).spriteFrame=e,this._awardPopup.getChildByName("countLab").getComponent(cc.Label).string="X"+t,this._awardPopup.active=!0,cc.tween(this._awardPopup).to(.3,{scale:1.1},{easing:"quadIn"}).to(.1,{scale:1},{easing:"quadIn"}).start()},t.prototype.handleGetAward=function(){if(null!=this._getAwardMsg){var e=this._getAwardMsg.count;switch(this._getAwardMsg.asset){case l.ASSET_TYPE.Diamond:h.default.instance.addDiamond(e);var t=cc.find("Canvas").getChildByName("panel3"),n=v.Tool.convertToNodeSpaceAR(t,m.default.instance.label.node);v.Tool.getItemEffect(y.default.instance.diamondPrefab,10,t.getPosition(),n,t);break;case l.ASSET_TYPE.BossRushKey:h.default.instance.addBossRushKey(e);break;case l.ASSET_TYPE.GoldRushKey:h.default.instance.addGoldRushKey(e);break;case l.ASSET_TYPE.CaveRushKey:h.default.instance.addClearRushKey(e)}this._getAwardMsg.asset!=l.ASSET_TYPE.Diamond&&f.default.instance.showToast("\u83b7\u5f97\u5956\u52b1!"),this._getAwardMsg=null}},t.prototype.onDisable=function(){h.default.instance.changeRouletteLastTime(p.default.instance.getNowTime()),h.default.instance.changeRouletteResidueTime(this._currResidueTime,!0),this.handleGetAward()},t.prototype.update=function(e){this._currResidueTime>0&&(this._tempTime+=e,this._tempTime>=1&&(this._currResidueTime-=1,this._tempTime=0,this.changeHint(),this._currResidueTime<=0&&(h.default.instance.changeRouletteResidueTime(this._currResidueTime,!0),this.changeShowStartBtn())))},r([M(cc.Node)],t.prototype,"btnClose",void 0),r([M(cc.Node)],t.prototype,"panel",void 0),r([M(cc.Node)],t.prototype,"main",void 0),r([M(cc.Node)],t.prototype,"content",void 0),r([M(cc.Node)],t.prototype,"btnStart",void 0),r([M(cc.Node)],t.prototype,"videoIcon",void 0),r([M(cc.Label)],t.prototype,"hintLab",void 0),r([M(sp.Skeleton)],t.prototype,"rouletteSpine",void 0),r([S],t)}(cc.Component);n.default=C,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BundleMgr":"BundleMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Res/comp/AwardShowComp":"AwardShowComp","../../Res/comp/DiamondComp":"DiamondComp","../../Tool/Tool":"Tool","../Mgr/RouletteMgr":"RouletteMgr"}],Main_ShopPanel:[function(e,t,n){"use strict";cc._RF.push(t,"fd1adamN/FHLbXJkDvIoVDO","Main_ShopPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Res/ResPanelOpen"),c=e("../../Tool/Tool"),u=e("../CommonUI/ToggleToPage"),d=e("../Mgr/GuideCore/GuideEnums"),h=e("../Mgr/GuideCore/GuideMgr"),p=e("../Mgr/MgrShop"),f=e("./ShopToggle"),g=e("./UISummonRateWindow"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleContainer=null,t.toggleToPage=null,t.selectType=null,t.defaultToggleId=a.ToggleShopType.Summon,t.closeBtn=null,t.shopToggles=[],t}return i(t,e),t.prototype.onLoad=function(){var e=this,t=this.node.getChildByName("panel");this.closeBtn=t.getChildByName("closeBtn"),this.shopToggles=this.node.getComponentsInChildren(f.default),this.shopToggles.forEach(function(t){t.delegate=e})},t.prototype.start=function(){c.Tool.addClickEvent(this.closeBtn,this.close,this)},t.prototype.onEnable=function(){var e=this;this.toggleToPage.setDefaultCheckedIdx(this.defaultToggleId);var t=this.node.getChildByName("panel");l.default.panelOpen_TopToBottom(t,function(){s.EventMgr.event(a.EventType.Common_TeachSummon_NextStep,2),e.checkGuide()}),this.onToggle()},t.prototype.close=function(){var e=this.node.getChildByName("panel"),t=this;l.default.panelClose_TopToBottom(e,function(){s.EventMgr.event(a.EventType.Main_UI_UpdateState,a.MainUIState.UserProp),t.node.destroy(),s.EventMgr.event(a.EventType.Common_TeachSummon_NextStep,5)})},t.prototype.reuse=function(e){if(myGlobalThis.isNil(e)){var t=p.default.Instance.getFreeEnable();this.defaultToggleId=t?a.ToggleShopType.Summon:0}else this.defaultToggleId=e},t.prototype.checkGuide=function(){this.scheduleOnce(function(){h.default.instance.checkSpecial(d.SpecialGuideEnum.TouchShopSummonSkill),h.default.instance.checkSpecial(d.SpecialGuideEnum.TouchShopSummonGear),h.default.instance.checkSpecial(d.SpecialGuideEnum.TouchShopSummonPartner)},.2)},t.prototype.onToggle=function(){this.shopToggles.forEach(function(e){e.refreshValue()})},t.prototype.onDestroy=function(){g.default.destroyComp()},r([v(cc.ToggleContainer)],t.prototype,"toggleContainer",void 0),r([v(u.default)],t.prototype,"toggleToPage",void 0),r([m],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/ToggleToPage":"ToggleToPage","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/MgrShop":"MgrShop","./ShopToggle":"ShopToggle","./UISummonRateWindow":"UISummonRateWindow"}],Main_SkillSlots:[function(e,t,n){"use strict";cc._RF.push(t,"6c1e2F38gZB8Z7diWX+YJnl","Main_SkillSlots");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Config/GameData"),l=e("../../../Mgr/BundleMgr"),c=e("../../../Mgr/EventMgr"),u=e("../../../Mgr/StorageMgr"),d=e("../../../Tool/Tool"),h=e("../../Main_Menu"),p=e("../../Main_UI"),f=e("../../Mgr/Unlock/MgrUnlock"),g=e("../../Toast/Toast"),y=cc._decorator,m=y.ccclass,v=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnAuto=null,t.btnSlots=[],t}return i(t,e),t.prototype.onLoad=function(){this.btnAuto=this.node.getChildByName("btnAuto");for(var e=1;e<=6;e++)this.btnSlots.push(this.node.getChildByName("btnSlot"+e.toString()));for(d.Tool.addClickEvent(this.btnAuto,this.switchAuto,this),e=0;e<this.btnSlots.length;e++)d.Tool.addClickEvent(this.btnSlots[e],this.clickSlot,this,[e]);this.refreshSkillSlots(),c.EventMgr.on(a.EventType.Battle_SkillState_Update,this.updateSkillSlotsCD,this),c.EventMgr.on(a.EventType.Battle_Skill_SwitchAutoSkill,this.refreshSkillSlots,this),c.EventMgr.on(a.EventType.Main_UI_Skill_SkillEquipChange,this.refreshSkillSlots,this),c.EventMgr.on(a.EventType.Common_UnlockType_Update,this.refreshSkillSlots,this)},t.prototype.switchAuto=function(){s.default.isTest&&console.log("\u5207\u6362\u81ea\u52a8\u91ca\u653e\u6280\u80fd"),u.default.instance.switchAutoSkill()},t.prototype.clickSlot=function(e){var t=e[0];s.default.isTest&&console.log("\u70b9\u51fb\u6280\u80fd\u69fd",t);var n=u.default.instance.storageData.usingSkillIds;if(0==n[t]&&p.default.instance.uiState!=a.MainUIState.InCopy&&p.default.instance.uiState!=a.MainUIState.InHeroCopy)return p.default.instance.getInCopy()?void g.default.tip("\u526f\u672c\u5185\u65e0\u6cd5\u8c03\u6574\u6280\u80fd"):(s.default.isTest&&console.log("\u6253\u5f00\u6280\u80fd\u9009\u62e9\u754c\u9762"),c.EventMgr.event(a.EventType.Main_UI_UpdateState,a.MainUIState.Role,1),h.default.instance.nowBtnState=[!0,!1,!1,!1,!1],void h.default.instance.btnUpdate());c.EventMgr.event(a.EventType.Battle_Skill_Use,n[t])},t.prototype.refreshSkillSlots=function(){var e=u.default.instance.storageData.usingSkillIds,t=1==u.default.instance.storageData.autoUseSkill;this.btnAuto.getChildByName("on").active=t,this.btnAuto.getChildByName("off").active=!t;for(var n=0;n<e.length;n++){var o=this.btnSlots[n],i=(o.getChildByName("lock"),o.getChildByName("Background")),r=i.getChildByName("icon"),s=i.getChildByName("empty"),l=i.getChildByName("cd"),c=i.getChildByName("duration");i.active=!0,r.active=!1,s.active=!1,l.active=!1,c.active=!1;var d=a.UnlockType.skill+n;f.default.Instance.isUnlock(d)&&(0!=e[n]?(r.active=!0,this.setSkillIcon(r.getComponent(cc.Sprite),e[n]),l.active=!0,c.active=!0,l.getComponent(cc.Sprite).fillRange=0,c.getComponent(cc.Sprite).fillRange=1):s.active=!0)}},t.prototype.updateSkillSlotsCD=function(e){for(var t=u.default.instance.storageData.usingSkillIds,n=e.skillId,o=e.cd,i=e.maxCD,r=e.isUsing,a=0;a<t.length;a++)if(t[a]==n){var s=this.btnSlots[a].getChildByName("Background"),l=s.getChildByName("cd"),c=s.getChildByName("duration"),d=o/i;d=d<0?0:d,l.getComponent(cc.Sprite).fillRange=r?0:d,c.opacity=r?255:0;break}},t.prototype.setSkillIcon=function(e,t){t<=0||l.default.getBundleData(a.BundleName.Main).loadRes("Textures/Skill/icon_"+t.toString(),cc.SpriteFrame,function(t,n){t?console.log(t):(n.addRef(),e.spriteFrame=n)})},r([m],t)}(cc.Component));n.default=v,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/BundleMgr":"BundleMgr","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Tool/Tool":"Tool","../../Main_Menu":"Main_Menu","../../Main_UI":"Main_UI","../../Mgr/Unlock/MgrUnlock":"MgrUnlock","../../Toast/Toast":"Toast"}],Main_SpeedUpPanel:[function(e,t,n){"use strict";cc._RF.push(t,"71af3Ov9TxN7LL85YOJwfxa","Main_SpeedUpPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../Config/EnumTypes"),c=e("../../Config/GameData"),u=e("../../Mgr/EventMgr"),d=e("../../Mgr/StorageMgr"),h=e("../../Mgr/TimeMgr"),p=e("../../Platform/Platform"),f=e("../../Res/ResPanelOpen"),g=e("../../Tool/Tool"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.panel=null,t.btnStart=null,t.successFun=null,t}return i(t,e),t.prototype.onLoad=function(){g.Tool.addClickEvent(this.btnClose,this.onCloseBtnClick,this),g.Tool.addClickEvent(this.btnStart,this.onStartBtnClick,this)},t.prototype.onEnable=function(){f.default.panelOpen_SmallToBig(this.panel)},t.prototype.onStartBtnClick=function(){return a(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){return p.default.instance.showVideo(function(){return e(!0)},function(){return e(!1)})})];case 1:return e.sent()?(d.default.instance.changeSpeedUpStartTime(h.default.instance.getNowTime()),u.EventMgr.event(l.EventType.Battle_SpeedUp_Switch),this.successFun&&this.successFun(),this.onCloseBtnClick(),c.default.trackEvent(c.TrackEventKey.key["\u52a0\u901f\u6218\u6597"]),[2]):[2]}})})},t.prototype.onCloseBtnClick=function(){var e=this;f.default.panelClose_BigToSmall(this.panel,function(){e.node.destroy()})},r([v(cc.Node)],t.prototype,"btnClose",void 0),r([v(cc.Node)],t.prototype,"panel",void 0),r([v(cc.Node)],t.prototype,"btnStart",void 0),r([m],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool"}],Main_StageComp:[function(e,t,n){"use strict";cc._RF.push(t,"5a8d1nmD0hJ/qlYNGnYq0j9","Main_StageComp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Comp/Bar"),s=e("../../../Config/EnumTypes"),l=e("../../../Mgr/EventMgr"),c=e("../../../Mgr/ItemMgr"),u=e("../../../Mgr/LanguageMgr"),d=e("../../../Tool/Tool"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.difficultLabel=null,t.stageLabel=null,t.loop=null,t.levelProgress=null,t.timeProgress=null,t.goToBoss=null,t.questNode=null,t.left=null,t.right=null,t.talk=null,t.levelProgressValue=[.055,.29,.53,.76,1],t}return i(t,e),t.prototype.onLoad=function(){d.Tool.addClickEvent(this.goToBoss,this.clickGoToBoss,this,null,!0,!0,5),l.EventMgr.on(s.EventType.Battle_State_Switch,this.goSwitch,this),l.EventMgr.on(s.EventType.Battle_Update_Stage,this.updateStage,this),l.EventMgr.on(s.EventType.Battle_Round_Update,this.updateRoundProgress,this),l.EventMgr.on(s.EventType.Battle_Boss_Time_Update,this.updateTimeProgress,this)},t.prototype.clickGoToBoss=function(){l.EventMgr.event(s.EventType.Battle_Go_Boss),this.levelProgress.active=!1,this.loop.active=!1,this.goToBoss.active=!1},t.prototype.goSwitch=function(e){switch(e){case 0:this.goNormal();break;case 1:this.goBoss();break;case 2:this.goLoop();break;case 3:this.show();break;case 4:this.hide()}},t.prototype.show=function(){this.node.opacity=255,this.questNode.opacity=255},t.prototype.hide=function(){this.node.opacity=0,this.questNode.opacity=0},t.prototype.goNormal=function(){this.levelProgress.active=!0,this.loop.active=!1,this.goToBoss.active=!1,this.timeProgress.active=!1},t.prototype.goLoop=function(){this.levelProgress.active=!1,this.loop.active=!0,this.goToBoss.active=!0,this.timeProgress.active=!1},t.prototype.goBoss=function(){this.levelProgress.active=!1,this.loop.active=!1,this.goToBoss.active=!1,this.timeProgress.active=!0},t.prototype.updateStage=function(e,t){this.talk.active=!1,this.difficultLabel.node.getComponent(cc.Label).string=u.default.Instance.getLanguage(c.DIFFICULTY_NAME[e]),this.stageLabel.string=t},t.prototype.updateRoundProgress=function(e){cc.tween(this.levelProgress.getComponent(a.default)).to(1,{value:this.levelProgressValue[e]}).start()},t.prototype.updateTimeProgress=function(e){this.timeProgress.getChildByName("bar").width=244*e},r([f(cc.Label)],t.prototype,"difficultLabel",void 0),r([f(cc.Label)],t.prototype,"stageLabel",void 0),r([f(cc.Node)],t.prototype,"loop",void 0),r([f(cc.Node)],t.prototype,"levelProgress",void 0),r([f(cc.Node)],t.prototype,"timeProgress",void 0),r([f(cc.Node)],t.prototype,"goToBoss",void 0),r([f(cc.Node)],t.prototype,"questNode",void 0),r([f(cc.Node)],t.prototype,"left",void 0),r([f(cc.Node)],t.prototype,"right",void 0),r([f(cc.Node)],t.prototype,"talk",void 0),r([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../Comp/Bar":"Bar","../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/ItemMgr":"ItemMgr","../../../Mgr/LanguageMgr":"LanguageMgr","../../../Tool/Tool":"Tool"}],Main_UI:[function(e,t,n){"use strict";cc._RF.push(t,"d406dJgOhVNpJSsHhF3AYvQ","Main_UI");var o,i,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../Config/EnumTypes"),l=e("../Mgr/EventMgr"),c=e("../Mgr/LanguageMgr"),u=e("../Tool/Tool"),d=e("./Main_Menu"),h=e("./Main_PanelOpen"),p=e("./Mgr/GuideCore/GuideEnums"),f=e("./Mgr/GuideCore/GuideMgr"),g=e("./Mgr/GuideCore/GuideTouch"),y=e("./Mgr/GuideCore/WeakGuide/TaskCompleteWeakGuide"),m=e("./Mgr/Hero/HeroMgr"),v=e("./Mgr/MgrSevenChallenge"),_=e("./Mgr/Quest/QuestSevenChallenge"),b=e("./Mgr/Unlock/MgrUnlock"),S=cc._decorator,M=S.ccclass,C=S.property,T=((i={})[s.MainPage.Role]=s.MainUIState.Role,i[s.MainPage.Partner]=s.MainUIState.Partner,i[s.MainPage.Copy]=s.MainUIState.Copy,i[s.MainPage.Mine]=s.MainUIState.Mine,i[s.MainPage.Shop]=s.MainUIState.Shop,i),k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.userProp=null,t.copyProp=null,t.inCopyProp=null,t.inHeroCopyProp=null,t.questNode=null,t.dailyQuestNode=null,t.btnCollection=null,t.btnSevenChallenge=null,t.left=null,t.right=null,t.topBlock=null,t.btnRoulette=null,t.btnBless=null,t.btnPlaceChest=null,t.uiState=null,t}var n;return r(t,e),n=t,t.prototype.onLoad=function(){n.instance=this,this.updateState(s.MainUIState.UserProp),this._onQuestInitComplete(),l.EventMgr.on(s.EventType.Main_UI_Shop_JumpToSummon,this.jumpToShopSummon,this),l.EventMgr.on(s.EventType.Common_UnlockType_Update,this.checkUnlock,this),l.EventMgr.on(s.GlobalEvent.UnlockSevenChallenge,this.refreshSevenChallengeUnlockState,this),u.Tool.addClickEvent(this.dailyQuestNode,this.onClickDailyQuest,this),u.Tool.addClickEvent(this.btnCollection,this.onClickCollection,this),u.Tool.addClickEvent(this.btnSevenChallenge,this.onClickSevenChallenge,this),this.refreshSevenChallengeUnlockState(),this.questNode.getComponent(y.default)||this.questNode.addComponent(y.default),this.questNode.getComponent(g.default)||this.questNode.addComponent(g.default).setId(100),b.default.Instance.isUnlock(s.UnlockType.Hero)&&!f.default.instance.isCompleteSpecialGuide(p.SpecialGuideEnum.TouchHeroButton3)&&m.default.Instance.lvupEnableHeros().length>0&&f.default.instance.checkSpecial(p.SpecialGuideEnum.TouchHeroButton3)},t.prototype.onEnable=function(){l.EventMgr.on(s.EventType.Main_UI_UpdateState,this.updateState,this)},t.prototype.updateState=function(e,t){var n=this;if(this.uiState!=e){var o=cc.find("Canvas").getChildByName("panel1"),i=cc.find("Canvas").getChildByName("panel2"),r=function(e){for(var t=e.children.length-1;t>=0;t--)e.children[t].destroy()};r(o),r(i),e!=s.MainUIState.InHeroCopy&&h.default.panelResClear(),this.uiState=e;var a=function(){n.userProp.active=!1,n.copyProp.active=!1,n.inCopyProp.active=!1,n.inHeroCopyProp.active=!1},u=this.getInCopy();switch(this.left.opacity=u?0:255,this.right.opacity=u?0:255,this.topBlock.active=u,e){case s.MainUIState.InCopy:a(),this.inCopyProp.active=!0,t&&(this.inCopyProp.getChildByName("desc").getComponent(cc.Label).string=c.default.Instance.getLanguage(t));break;case s.MainUIState.InHeroCopy:a(),this.inHeroCopyProp.active=!0;break;case s.MainUIState.Role:h.default.show_Main_Role_Panel(t,function(){a()});break;case s.MainUIState.Partner:h.default.show_Main_Partner_Panel(function(){a()});break;case s.MainUIState.Copy:this.copyProp.active=!0,this.userProp.active=!1,this.inCopyProp.active=!1,l.EventMgr.event(s.EventType.Common_TeachCopy_NextStep,2);break;case s.MainUIState.Mine:h.default.show_Main_Mine_Panel(function(){a()});break;case s.MainUIState.Shop:h.default.show_Main_Shop_Panel(function(){a()});break;default:case s.MainUIState.UserProp:a(),this.userProp.active=!0}return d.default.instance.menuShow(),!1}},t.prototype._onQuestInitComplete=function(){this.questNode.active=!0,this.checkUnlock()},t.prototype.getInCopy=function(){return this.uiState==s.MainUIState.InCopy||this.uiState==s.MainUIState.InHeroCopy},t.prototype.checkUnlock=function(){this.dailyQuestNode.active=b.default.Instance.isUnlock(s.UnlockType.dailyQuest),this.btnCollection.active=b.default.Instance.isUnlock(s.UnlockType.collection),this.btnRoulette.active=b.default.Instance.isUnlock(s.UnlockType.roulette),this.btnBless.active=b.default.Instance.isUnlock(s.UnlockType.bless),this.btnPlaceChest.active=b.default.Instance.isUnlock(s.UnlockType.placeChest)},t.prototype.refreshSevenChallengeUnlockState=function(){var e=v.default.Instance.isOpen();this.btnSevenChallenge.active=e,e&&v.default.Instance.getSevenChallengeOpenTime()<=0&&(v.default.Instance.saveSevenChallengeOpenTime(),_.default.Instance.genQuests())},t.prototype.jumpToShopSummon=function(){this.jumpToPage(s.MainPage.Shop)},t.prototype.jumpToPage=function(e){if(!d.default.instance.nowBtnState[e]){for(var t=d.default.instance.nowBtnState,n=0;n<t.length;n++)t[n]=!1;d.default.instance.nowBtnState[e]=!0,d.default.instance.btnUpdate(),this.updateState(T[e])}},t.prototype.setNormal=function(){for(var e=d.default.instance.nowBtnState,t=0;t<e.length;t++)e[t]=!1;d.default.instance.btnUpdate(),this.updateState(s.MainUIState.UserProp)},t.prototype.onClickDailyQuest=function(){h.default.ShowDailyQuestWindow()},t.prototype.onClickCollection=function(){h.default.ShowCollectionWindow()},t.prototype.onClickSevenChallenge=function(){h.default.showSevenChallengeView()},t.prototype.closeAll=function(){cc.find("Canvas/panel2").destroyAllChildren(),this.setNormal()},t.instance=null,a([C(cc.Node)],t.prototype,"userProp",void 0),a([C(cc.Node)],t.prototype,"copyProp",void 0),a([C(cc.Node)],t.prototype,"inCopyProp",void 0),a([C(cc.Node)],t.prototype,"inHeroCopyProp",void 0),a([C(cc.Node)],t.prototype,"questNode",void 0),a([C(cc.Node)],t.prototype,"dailyQuestNode",void 0),a([C(cc.Node)],t.prototype,"btnCollection",void 0),a([C(cc.Node)],t.prototype,"btnSevenChallenge",void 0),a([C(cc.Node)],t.prototype,"left",void 0),a([C(cc.Node)],t.prototype,"right",void 0),a([C(cc.Node)],t.prototype,"topBlock",void 0),a([C(cc.Node)],t.prototype,"btnRoulette",void 0),a([C(cc.Node)],t.prototype,"btnBless",void 0),a([C(cc.Node)],t.prototype,"btnPlaceChest",void 0),n=a([M],t)}(cc.Component);n.default=k,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","../Mgr/EventMgr":"EventMgr","../Mgr/LanguageMgr":"LanguageMgr","../Tool/Tool":"Tool","./Main_Menu":"Main_Menu","./Main_PanelOpen":"Main_PanelOpen","./Mgr/GuideCore/GuideEnums":"GuideEnums","./Mgr/GuideCore/GuideMgr":"GuideMgr","./Mgr/GuideCore/GuideTouch":"GuideTouch","./Mgr/GuideCore/WeakGuide/TaskCompleteWeakGuide":"TaskCompleteWeakGuide","./Mgr/Hero/HeroMgr":"HeroMgr","./Mgr/MgrSevenChallenge":"MgrSevenChallenge","./Mgr/Quest/QuestSevenChallenge":"QuestSevenChallenge","./Mgr/Unlock/MgrUnlock":"MgrUnlock"}],Main_UserProp:[function(e,t,n){"use strict";cc._RF.push(t,"c3fadr5f1hJt7+oiYAMmfUC","Main_UserProp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../plugin/NumberPlus"),s=e("../Config/DataClass/PropData"),l=e("../Config/EnumTypes"),c=e("../Config/GameData"),u=e("../Mgr/EventMgr"),d=e("../Mgr/StorageMgr"),h=e("../Platform/Platform"),p=e("../Tool/Tool"),f=e("./Mgr/GuideCore/GuideMgr"),g=e("./Mgr/GuideCore/GuideTouch"),y=e("./Mgr/GuideCore/WeakGuide/TaskWeakGuide"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.combatLabel=null,t.normalMat=null,t.garyMat=null,t.labelScale=[1,1,1,1,1,1],t.canLoop=!1,t.looping=!1,t.maxLevel=[],t.items=[],t.needCoins=[],t.nowLevel=[],t.nowClickIndex=-1,t.clickCD=.1,t.clickNowCd=1,t.clickNodes=[],t.clickBtns=[],t.clickInvertal=.5,t.clickDoCount=0,t.clickTween=null,t.axis=0,t.nowScale=0,t.targetScale=1.6,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this},t.prototype.start=function(){var e=this;this.init(),this.scheduleOnce(function(){e.updateUserProp()}),u.EventMgr.on(l.EventType.Props_GearChange_Event,function(){e.scheduleOnce(e.updateAddProp)},this),u.EventMgr.on(l.EventType.Props_SkillChange_Event,function(){e.scheduleOnce(e.updateAddProp)},this),u.EventMgr.on(l.EventType.Props_PartnerChange_Event,function(){e.scheduleOnce(e.updateAddProp)},this),u.EventMgr.on(l.EventType.Common_Coin_Update,this.updateUserProp,this),u.EventMgr.on(l.EventType.Battle_Hero_Prop_Update,this.updateUserProp,this)},t.prototype.onDisable=function(){this.tween&&this.tween.stop()},t.prototype.updateAddProp=function(){u.EventMgr.event(l.EventType.Battle_Hero_Prop_Update)},t.prototype.init=function(){for(var e=this,t=function(t){var o=n.content.children[t],i=p.Tool.findNodeByName(o,"Button");i.on(cc.Node.EventType.TOUCH_START,function(){e.clickBtnStart([t])},n),i.on(cc.Node.EventType.TOUCH_END,function(){e.clickBtnEnd([t])},n),i.on(cc.Node.EventType.TOUCH_CANCEL,function(){e.clickBtnEnd([t])},n),n.items.push(o),n.clickNodes.push(o.getChildByName("ClickNode")),n.clickBtns.push(i),i.addComponent(y.default).setTaskType(l.PROP_TYPE.ATK+t+10),t+l.PROP_TYPE.ATK==1&&i.addComponent(g.default).setId(1)},n=this,o=0;o<this.content.children.length;o++)t(o);this.maxLevel=[s.default.instance.atkMaxLevel,s.default.instance.hpMaxLevel,s.default.instance.hpRecoveryMaxLevel,s.default.instance.aspdMaxLevel,s.default.instance.criticalChanceMaxLevel,s.default.instance.criticalDamageMaxLevel,s.default.instance.doubleShotChanceMaxLevel,s.default.instance.TripleShotChanceMaxLevel],f.default.instance.check(),f.default.instance.startCheckLastSpecial()},t.prototype.levelUpEnable=function(e){var t=!1;switch(e){case l.PROP_TYPE.ATK:t=d.default.instance.storageData.atkLevel<this.maxLevel[0]&&d.default.instance.storageData.coin>=s.default.instance.calAtk(d.default.instance.storageData.atkLevel).needCoins;break;case l.PROP_TYPE.HP:t=d.default.instance.storageData.hpLevel<this.maxLevel[1]&&d.default.instance.storageData.coin>=s.default.instance.calHp(d.default.instance.storageData.hpLevel).needCoins;break;case l.PROP_TYPE.HPRecovery:t=d.default.instance.storageData.hpRecoveryLevel<this.maxLevel[2]&&d.default.instance.storageData.coin>=s.default.instance.calHpRecovery(d.default.instance.storageData.hpRecoveryLevel).needCoins;break;case l.PROP_TYPE.ASPD:t=d.default.instance.storageData.aspdLevel<this.maxLevel[3]&&d.default.instance.storageData.coin>=s.default.instance.calAspd(d.default.instance.storageData.aspdLevel).needCoins;break;case l.PROP_TYPE.CriticalHitChance:t=d.default.instance.storageData.criticalChanceLevel<this.maxLevel[4]&&d.default.instance.storageData.coin>=s.default.instance.calCriticalChance(d.default.instance.storageData.criticalChanceLevel).needCoins;break;case l.PROP_TYPE.CriticalHitDamage:t=d.default.instance.storageData.criticalDamageLevel<this.maxLevel[5]&&d.default.instance.storageData.coin>=s.default.instance.calCriticalDamage(d.default.instance.storageData.criticalDamageLevel).needCoins;break;case l.PROP_TYPE.DoubleShot:t=d.default.instance.storageData.doubleShot<this.maxLevel[6]&&d.default.instance.storageData.coin>=s.default.instance.calDoubleShot(d.default.instance.storageData.doubleShot).needCoins;break;case l.PROP_TYPE.TripleShot:t=d.default.instance.storageData.tripleShot<this.maxLevel[7]&&d.default.instance.storageData.coin>=s.default.instance.calTripleShot(d.default.instance.storageData.tripleShot).needCoins}return t},t.prototype.updateUserProp=function(){var e=[d.default.instance.storageData.atkLevel,d.default.instance.storageData.hpLevel,d.default.instance.storageData.hpRecoveryLevel,d.default.instance.storageData.aspdLevel,d.default.instance.storageData.criticalChanceLevel,d.default.instance.storageData.criticalDamageLevel,d.default.instance.storageData.doubleShot,d.default.instance.storageData.tripleShot],t=[s.default.instance.calAtk(e[0]).needCoins,s.default.instance.calHp(e[1]).needCoins,s.default.instance.calHpRecovery(e[2]).needCoins,s.default.instance.calAspd(e[3]).needCoins,s.default.instance.calCriticalChance(e[4]).needCoins,s.default.instance.calCriticalDamage(e[5]).needCoins,s.default.instance.calDoubleShot(e[6]).needCoins,s.default.instance.calTripleShot(e[7]).needCoins],n=[a.default.format(a.default.decode(c.default.heroAtkCal()),2),a.default.format(a.default.decode(c.default.heroHpCal()),2),a.default.format(c.default.heroHpRecoveryCal(),2),a.default.number_format(c.default.heroAspdCal(),2),a.default.number_format(100*c.default.heroCriticalChanceCal(),2)+"%",a.default.format((100*c.default.heroCriticalDamageCal()).toString(),2)+"%",a.default.number_format(100*c.default.heroDoubleShotCal(),2)+"%",a.default.number_format(100*c.default.heroTripleShotCal(),2)+"%"];this.needCoins.length=0,this.nowLevel.length=0;for(var o=d.default.instance.storageData.coin,i=0;i<this.items.length;i++){var r=this.items[i],l=p.Tool.findNodeByName(r,"Button"),u=p.Tool.findNodeByName(r,"lv"),h=p.Tool.findNodeByName(r,"value"),f=p.Tool.findNodeByName(r,"coins");u.getComponent(cc.Label).string="Lv."+e[i].toString(),h.getComponent(cc.Label).string=n[i];var g=a.default.decode(t[i]),y=l.getChildByName("Background"),m=a.default.compare(o,g);y.getComponent(cc.Sprite).setMaterial(0,m?this.normalMat:this.garyMat);var v=y.getChildByName("title"),_=y.getChildByName("coins");v.color=m?cc.Color.WHITE:cc.Color.RED,_.color=m?cc.Color.WHITE:cc.Color.RED,this.needCoins.push(g),f.getComponent(cc.Label).string=a.default.format(g,2),this.nowLevel.push(e[i]);var b=l.getChildByName("max");b.active=-1!=this.maxLevel[i]&&e[i]>=this.maxLevel[i],y.active=!b.active;var S=r.getChildByName("lock");switch(i){case 6:S.active=e[3]<this.maxLevel[3];break;case 7:S.active=e[6]<this.maxLevel[6];break;default:S.active=!1}l.active=!S.active,b.active&&this.items[i].setSiblingIndex(this.items.length-1)}this.updateCombat()},t.prototype.clickBtnStart=function(e){var t=e[0];this.nowClickIndex=t,this.clickNowCd=this.clickInvertal,this.clickDoCount=0,this.canLoop=!1,this.looping=!1,this.tween&&this.tween.stop(),this.schedule(this.clickUpdate),this.clickDo(t)},t.prototype.clickDo=function(e){if(-1!=this.maxLevel[e]&&this.nowLevel[e]>=this.maxLevel[e])return h.default.instance.showToast("\u5df2\u8fbe\u5230\u6700\u5927\u7b49\u7ea7"),void this.clickBtnEnd([e]);if(!a.default.compare(d.default.instance.storageData.coin,this.needCoins[e]))return h.default.instance.showToast("\u91d1\u5e01\u4e0d\u8db3"),void this.clickBtnEnd([e]);switch(d.default.instance.reduceCoin(this.needCoins[e]),this.clickDoCount++,e){case 0:d.default.instance.addAtkLevel();break;case 1:d.default.instance.addHpLevel();break;case 2:d.default.instance.addHpRecoveryLevel();break;case 3:d.default.instance.addAspdLevel();break;case 4:d.default.instance.addCriticalChanceLevel();break;case 5:d.default.instance.addCriticalDamageLevel();break;case 6:d.default.instance.addDoubleShot();break;case 7:d.default.instance.addTripleShot()}this.updateUserProp(),this.clickNodes[e].opacity=255,this.labelScale[e]=this.targetScale,this.canLoop||u.EventMgr.event(l.EventType.Battle_Hero_Prop_Upgrade)},t.prototype.clickUpdate=function(){var e=cc.director.getDeltaTime();this.clickNowCd-=e;for(var t=0;t<this.clickNodes.length;t++)this.clickNodes[t].opacity-=255*e/1,this.clickNodes[t].opacity=this.clickNodes[t].opacity<=0?0:this.clickNodes[t].opacity;this.clickNowCd<=0&&(this.clickDoCount<20?this.clickNowCd=this.clickCD:this.clickDoCount<60?(this.clickNowCd=.5*this.clickCD,this.canLoop=!0):this.clickDoCount<140?this.clickNowCd=.25*this.clickCD:this.clickNowCd=0,this.clickDo(this.nowClickIndex))},t.prototype.clickBtnEnd=function(e){var t=e[0];this.unschedule(this.clickUpdate);for(var n=0;n<this.clickNodes.length;n++)this.clickNodes[n].opacity=0;u.EventMgr.event(l.EventType.Battle_Hero_Prop_Update),this.clickTween&&this.clickTween.stop(),this.clickTween=cc.tween(this.clickBtns[t]).to(.05,{scale:1}).start(),this.canLoop=!1,this.looping=!1,this.tween&&this.tween.stop(),p.Tool.findNodeByName(this.items[t],"value").scale=this.labelScale[t]=1},t.prototype.updateCombat=function(){this.combatLabel.string=a.default.format(c.default.heroCombatCal(),2)},t.prototype.setScale=function(e){if(!(this.items.length<=0||-1==this.nowClickIndex)){var t=p.Tool.findNodeByName(this.items[this.nowClickIndex],"value");if(t){var n=t.scale-1;if(n*=.25,this.clickBtns[this.nowClickIndex].scale=1-n,!this.looping){if(this.canLoop&&!this.looping)return this.looping=!0,void(this.tween=cc.tween(t).to(.03,{scale:this.targetScale-.2}).to(.013,{scale:1},{easing:"expoIn"}).call(function(){u.EventMgr.event(l.EventType.Battle_Hero_Prop_Upgrade)}).union().repeatForever().start());t.scale=cc.misc.lerp(t.scale,this.labelScale[this.nowClickIndex],40*e),this.labelScale[this.nowClickIndex]>1?this.labelScale[this.nowClickIndex]-=5*e:this.labelScale[this.nowClickIndex]=1}}}},t.prototype.update=function(e){this.setScale(e)},t.instance=null,r([_(cc.Node)],t.prototype,"content",void 0),r([_(cc.Label)],t.prototype,"combatLabel",void 0),r([_(cc.Material)],t.prototype,"normalMat",void 0),r([_(cc.Material)],t.prototype,"garyMat",void 0),n=r([v],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../plugin/NumberPlus":"NumberPlus","../Config/DataClass/PropData":"PropData","../Config/EnumTypes":"EnumTypes","../Config/GameData":"GameData","../Mgr/EventMgr":"EventMgr","../Mgr/StorageMgr":"StorageMgr","../Platform/Platform":"Platform","../Tool/Tool":"Tool","./Mgr/GuideCore/GuideMgr":"GuideMgr","./Mgr/GuideCore/GuideTouch":"GuideTouch","./Mgr/GuideCore/WeakGuide/TaskWeakGuide":"TaskWeakGuide"}],Main:[function(e,t,n){"use strict";cc._RF.push(t,"88713yTsSlORLCkD5sHpK0H","Main");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Comp/GameLoading"),s=e("../Config/EnumTypes"),l=e("../Config/GameData"),c=e("../Mgr/BattleData"),u=e("../Mgr/EventMgr"),d=e("../Mgr/VideoVipMgr"),h=e("../Mine/MineMgr"),p=e("../Mine/ResearchMgr"),f=e("./Battle/BattleMgr"),g=e("./Battle/Comp/Main_CombatToast"),y=e("./Mgr/AssetsMgr"),m=e("./Mgr/BlessMgr"),v=e("./Mgr/Collection/MgrCollection"),_=e("./Mgr/EquipmentMgr"),b=e("./Mgr/ExtraRewardData"),S=e("./Mgr/GuideCore/GuideCfg"),M=e("./Mgr/GuideCore/GuideMgr"),C=e("./Mgr/GuideCore/GuideTextCfg"),T=e("./Mgr/Hero/HeroMgr"),k=e("./Mgr/Mastery/MgrMastery"),I=e("./Mgr/MgrAds"),E=e("./Mgr/MgrQuest"),w=e("./Mgr/MgrRing"),P=e("./Mgr/MgrSevenChallenge"),R=e("./Mgr/MgrShop"),O=e("./Mgr/MgrSummon"),D=e("./Mgr/PartnerMgr"),A=e("./Mgr/PropMgr"),L=e("./Mgr/RelicMgr"),B=e("./Mgr/RouletteMgr"),U=e("./Mgr/SignMgr"),N=e("./Mgr/SkillMgr"),j=e("./Toast/Toast"),x=e("./UnlockTip/UnlockTipMgr"),G=cc._decorator,H=G.ccclass,F=G.property,V=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.battleWorld=null,t.mainUI=null,t.lvLabel=null,t.fingerGuidePrefab=null,t.guideUIPrefab=null,t.maskNodePrefab=null,t.guideTextUIPrefab=null,t.toastViewPrefab=null,t.loadingTween=null,t}return i(t,e),t.prototype.start=function(){var e=this;j.default.Instance.prefabItem=this.toastViewPrefab,l.default.researchMgr=p.default.Instance,y.default.Instance.initJson(),U.default.Instance.initJson(),_.default.Instance.initJson(),N.default.Instance.initJson(),D.default.Instance.initJson(),O.default.Instance.initJson(),R.default.Instance.initJson(),E.default.Instance.initJson(),A.default.Instance.initJson(),p.default.Instance.initJson(),T.default.Instance.initJson(),L.default.Instance.initJson(),v.default.Instance.initJson(),x.default.Instance.initJson(),I.default.Instance.initJson(),h.default.Instance.init(),c.default.instance.initJson(),m.default.Instance.initJson(),B.default.Instance.initJson(),d.default.instance.initJson(),k.default.Instance.initJson(),b.ExtraRewardData.Instance.initJson(),P.default.Instance.initJson(),w.default.Instance.initJson(),S.default.Instance.initJson(),C.default.Instance.initJson(),M.default.instance.init(this.fingerGuidePrefab,this.guideUIPrefab,this.maskNodePrefab,this.guideTextUIPrefab),_.default.Instance.updateGearAdd(),v.default.Instance.refreshData(),this.loadingTween=cc.tween(a.default.instance.bar).to(2,{value:1}).start();var t=cc.find("Canvas"),n=t.getChildByName("battle"),o=cc.instantiate(this.battleWorld);n.addChild(o);var i=t.getChildByName("panel0"),r=cc.instantiate(this.mainUI);i.addChild(r),f.default.instance.startLoadStage(function(){e.loadingTween.stop(),a.default.instance.bar.value=1,e.scheduleOnce(function(){a.default.instance.root.active=!1,g.default.instance.init(),w.default.Instance.updateRingPorp()},.1)}),U.default.Instance.OpenWeekDialog(function(){}),l.default.trackEvent(l.TrackEventKey.key["\u8fdb\u5165\u4e3b\u754c\u9762"])},t.prototype.onEnable=function(){u.EventMgr.on(s.GlobalEvent.HeroTotalLevelChange,this.onHeroTotalLevelChange,this)},t.prototype.onDisable=function(){u.EventMgr.clearTarget(this)},t.prototype.update=function(e){E.default.Instance.fixUpdate(e),I.default.Instance.fixUpdate(e),R.default.Instance.fixedUpdate(e)},t.prototype.lateUpdate=function(){L.default.Instance.lateUpdate()},t.prototype.onHeroTotalLevelChange=function(e){this.lvLabel.string=e.toString()},r([F(cc.Prefab)],t.prototype,"battleWorld",void 0),r([F(cc.Prefab)],t.prototype,"mainUI",void 0),r([F(cc.Label)],t.prototype,"lvLabel",void 0),r([F(cc.Prefab)],t.prototype,"fingerGuidePrefab",void 0),r([F(cc.Prefab)],t.prototype,"guideUIPrefab",void 0),r([F(cc.Prefab)],t.prototype,"maskNodePrefab",void 0),r([F(cc.Prefab)],t.prototype,"guideTextUIPrefab",void 0),r([F(cc.Prefab)],t.prototype,"toastViewPrefab",void 0),r([H],t)}(cc.Component);n.default=V,cc._RF.pop()},{"../Comp/GameLoading":"GameLoading","../Config/EnumTypes":"EnumTypes","../Config/GameData":"GameData","../Mgr/BattleData":"BattleData","../Mgr/EventMgr":"EventMgr","../Mgr/VideoVipMgr":"VideoVipMgr","../Mine/MineMgr":"MineMgr","../Mine/ResearchMgr":"ResearchMgr","./Battle/BattleMgr":"BattleMgr","./Battle/Comp/Main_CombatToast":"Main_CombatToast","./Mgr/AssetsMgr":"AssetsMgr","./Mgr/BlessMgr":"BlessMgr","./Mgr/Collection/MgrCollection":"MgrCollection","./Mgr/EquipmentMgr":"EquipmentMgr","./Mgr/ExtraRewardData":"ExtraRewardData","./Mgr/GuideCore/GuideCfg":"GuideCfg","./Mgr/GuideCore/GuideMgr":"GuideMgr","./Mgr/GuideCore/GuideTextCfg":"GuideTextCfg","./Mgr/Hero/HeroMgr":"HeroMgr","./Mgr/Mastery/MgrMastery":"MgrMastery","./Mgr/MgrAds":"MgrAds","./Mgr/MgrQuest":"MgrQuest","./Mgr/MgrRing":"MgrRing","./Mgr/MgrSevenChallenge":"MgrSevenChallenge","./Mgr/MgrShop":"MgrShop","./Mgr/MgrSummon":"MgrSummon","./Mgr/PartnerMgr":"PartnerMgr","./Mgr/PropMgr":"PropMgr","./Mgr/RelicMgr":"RelicMgr","./Mgr/RouletteMgr":"RouletteMgr","./Mgr/SignMgr":"SignMgr","./Mgr/SkillMgr":"SkillMgr","./Toast/Toast":"Toast","./UnlockTip/UnlockTipMgr":"UnlockTipMgr"}],MgrAds:[function(e,t,n){"use strict";cc._RF.push(t,"6350bz28SZIYLIoHWGwTMTM","MgrAds");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Mgr/TimerHelper"),a=e("../../Mgr/BaseMgr"),s=e("../../Mgr/StorageMgr"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._time=0,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dailyAdTimes",{get:function(){return s.default.instance.storageData.dailyAdTimes},set:function(e){s.default.instance.storageData.dailyAdTimes=e,s.default.instance.saveDailyAdTimes()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dailyAdDate",{get:function(){return s.default.instance.storageData.dailyAdDate},set:function(e){s.default.instance.storageData.dailyAdDate=e,s.default.instance.saveDailyAdDate()},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;this.freshDailyAdTimes()},t.prototype.fixUpdate=function(e){this._time+=e,this._time>=1&&(this._time=0,this.freshDailyAdTimes())},t.prototype.clearAdInfo=function(e){this.dailyAdTimes={},this.dailyAdDate=e},t.prototype.getAdTimes=function(e){return myGlobalThis.isNil(this.dailyAdTimes)?0:myGlobalThis.get(this.dailyAdTimes,e,0)},t.prototype.addTodayTimes=function(e){var t=s.default.instance.storageData.dailyAdTimes,n=myGlobalThis.get(t,e,0);myGlobalThis.set(t,e,++n),this.dailyAdTimes=t},t.prototype.freshDailyAdTimes=function(){var e=r.default.GetNowTime();this.dailyAdDate<=0?this.clearAdInfo(r.default.GetNowTime()):r.default.isSame(e,this.dailyAdDate,"days")||this.clearAdInfo(e)},t.prototype.showInterstitial=function(){},t.prototype.showBanner=function(){},t.prototype.hideBanner=function(){},t}(a.default);n.default=l,cc._RF.pop()},{"../../Mgr/BaseMgr":"BaseMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimerHelper":"TimerHelper"}],MgrCollection:[function(e,t,n){"use strict";cc._RF.push(t,"39646ZV01VB1qLqBRa8Rr6N","MgrCollection");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../plugin/NumberPlus"),a=e("../../../Config/EnumTypes"),s=e("../../../Config/GameData"),l=e("../../../Mgr/BaseMgr"),c=e("../../../Mgr/EventMgr"),u=e("../EquipmentMgr"),d=e("../PartnerMgr"),h=e("../SkillMgr"),p=e("./CollectionData"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.symbolLvMethods={},t.collectionMap=new Map,t.collectionInfos=[],t.typeOfCollections=new Map,t.symbolToCollection=new Map,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!e.prototype.initJson.call(this,n))return!1;var i=s.default.getJsonObject("collection");for(var r in i){var a=i[r],l=function(e){var n=a[e],o=myGlobalThis.get(a[e],"ids","");n.ids=splitValue(o);var i=n.id;c.collectionInfos.push(n),c.collectionMap.set(i,n),c.typeOfCollections.has(n.type)||c.typeOfCollections.set(n.type,[]),c.typeOfCollections.get(n.type).push(n),c.symbolToCollection.has(n.type)||c.symbolToCollection.set(n.type,new Map),n.ids.forEach(function(e){t.symbolToCollection.get(n.type).has(e)||t.symbolToCollection.get(n.type).set(e,[]),t.symbolToCollection.get(n.type).get(e).push(n.id)})},c=this;for(var u in a)l(u)}this.load(),this.initLoadData()},t.prototype.load=function(){this.symbolLvMethods[a.COLLECTION_TYPE.Gear]=u.default.Instance,this.symbolLvMethods[a.COLLECTION_TYPE.Skill]=h.default.Instance,this.symbolLvMethods[a.COLLECTION_TYPE.Partner]=d.default.Instance,p.default.Instance.load(),c.EventMgr.on(a.GlobalEvent.GearLevelUp,this.onGearLvupEvent,this),c.EventMgr.on(a.GlobalEvent.GearLevelUpAll,this.onGearLvupAllEvent,this),c.EventMgr.on(a.GlobalEvent.SkillLevelUp,this.onSkillLlvupEvent,this),c.EventMgr.on(a.GlobalEvent.SkillLevelUpAll,this.onSkillLvupAllEvent,this),c.EventMgr.on(a.GlobalEvent.PartnerLevelUp,this.onPartnerLvupEvent,this),c.EventMgr.on(a.GlobalEvent.PartnerLevelUpAll,this.onPartnerLvupAllEvent,this)},t.prototype.initLoadData=function(){var e=this,t=this.getAll();myGlobalThis.each(t,function(t){var n=e.calcUnlockLv(t.type,t.ids);p.default.Instance.unlock(t.id,n)}),p.default.Instance.init(),p.default.Instance.activeProps()},t.prototype.getTypeCollections=function(e){return this.typeOfCollections.get(e)},t.prototype.getSymbolCollections=function(e,t){return this.symbolToCollection.get(e).get(t)},t.prototype.get=function(e){return this.collectionMap.get(e)},t.prototype.getAll=function(){return this.collectionInfos},t.prototype.onGearLvupEvent=function(e){this._symbolLvup(a.COLLECTION_TYPE.Gear,e)},t.prototype.onGearLvupAllEvent=function(e,t){this._symbolLvup(a.COLLECTION_TYPE.Gear,t)},t.prototype.onSkillLlvupEvent=function(e){this._symbolLvup(a.COLLECTION_TYPE.Skill,e)},t.prototype.onSkillLvupAllEvent=function(e){this._symbolLvup(a.COLLECTION_TYPE.Skill,e)},t.prototype.onPartnerLvupEvent=function(e){this._symbolLvup(a.COLLECTION_TYPE.Partner,e)},t.prototype.onPartnerLvupAllEvent=function(e){this._symbolLvup(a.COLLECTION_TYPE.Partner,e)},t.prototype.getSymbolLv=function(e,t){var n=this.symbolLvMethods[e],o=n&&n.getData(t);return myGlobalThis.isNil(o)?0:o.level},t.prototype.calcUnlockLv=function(e,t){var n=this;return myGlobalThis.reduce(t,function(t,o){var i=n.getSymbolLv(e,o);return t<0?i:i>t?t:i},-1)},t.prototype._symbolLvup=function(e,t){var n,o=this;n=myGlobalThis.isArray(t)?myGlobalThis.reduce(t,function(t,n){var i=o.getSymbolCollections(e,n.id);return myGlobalThis.union(t,i)},[]):this.getSymbolCollections(e,t.id),myGlobalThis.each(n,function(t){var n=o.get(t).ids,i=o.calcUnlockLv(e,n);p.default.Instance.unlock(t,i)}),c.EventMgr.event(a.GlobalEvent.CollectionUnlock,n)},t.prototype.lvup=function(e){return!!p.default.Instance.lvup(e)&&(c.EventMgr.event(a.GlobalEvent.CollectionLvup,e),this.refreshData(),!0)},t.prototype.refreshData=function(){p.default.Instance.getPropMap().forEach(function(e,t){switch(t.toString(),t){case a.PROP_TYPE.ATK:s.default.collectionAddAtk=r.default.decode(e);break;case a.PROP_TYPE.HP:s.default.collectionAddHp=r.default.decode(e);break;case a.PROP_TYPE.ASPD:s.default.collectionAddAspd=r.default.decode(e);break;case a.PROP_TYPE.CriticalHitDamage:s.default.collectionAddCriticalDamage=e;break;case a.PROP_TYPE.PartnerAspd:s.default.collectionAddPartnerAspd=e;break;case a.PROP_TYPE.BossDamageAmount:s.default.collectionAddBossDamage=e;break;case a.PROP_TYPE.BaseAtk:s.default.collectionAddBaseAtk=r.default.decode(e);break;case a.PROP_TYPE.BaseHP:s.default.collectionAddBaseHp=r.default.decode(e)}})},t}(l.default);n.default=f,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/BaseMgr":"BaseMgr","../../../Mgr/EventMgr":"EventMgr","../EquipmentMgr":"EquipmentMgr","../PartnerMgr":"PartnerMgr","../SkillMgr":"SkillMgr","./CollectionData":"CollectionData"}],MgrGuide:[function(e,t,n){"use strict";cc._RF.push(t,"76b7eonWlJOIa8j9PpVVtoQ","MgrGuide");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Tool/Tool"),c=e("../Quest/QuestChain"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isGuideOn=!1,t.questNode=null,t.propContent=null,t.guideHand=null,t.isTeachQuset=!1,t.nowTeachUpgradeHand=null,t.nowTeachUpgradeNode=null,t.isTeachSummon=!1,t.teachSummonStep=0,t.summonType="summonGear",t.isTeachGear=!1,t.teachGearStep=0,t.isTeachSkill=!1,t.teachSkillStep=0,t.isTeachPartner=!1,t.teachPartnerStep=0,t.isTeachCopy=!1,t.teachCopyStep=0,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this,s.EventMgr.on(a.GlobalEvent.ChainQuestStatusChange,this.questStatusChange,this)},t.prototype.start=function(){},t.prototype.questStatusChange=function(){var e=c.default.Instance.chainQuestId,t=c.default.Instance.getData(e);t.status==a.QUEST_STATUS.Complete?this.questComplete(e):t.status==a.QUEST_STATUS.Job&&this.questProgress(e)},t.prototype.questClickFinish=function(){},t.prototype.questComplete=function(e){-1!=[20002,20003].indexOf(e)&&this.teachUpgradeEnd(),20001==e&&this.teachQuestStart()},t.prototype.questProgress=function(e){20002==e&&this.teachUpgradeStart("atk")},t.prototype.addGuideHand=function(e,t){void 0===t&&(t=cc.Vec2.ZERO);var n=cc.instantiate(this.guideHand);return n.parent=e,n.setPosition(t),n},t.prototype.teachQuestStart=function(){this.isGuideOn&&(this.isTeachQuset||(this.isTeachQuset=!0,console.log("\u5f00\u59cb\u65b0\u624b\u6559\u7a0b"),s.EventMgr.on(a.EventType.Common_Quest_Complete,this.teachQuestEnd,this),this.showQuestHand()))},t.prototype.showQuestHand=function(){var e=cc.find("Canvas").getChildByName("guide"),t=this.addGuideHand(e),n=l.Tool.convertToNodeSpaceAR(e,this.questNode);n.x-=this.questNode.width/4,n.y-=this.questNode.height/4,t.setPosition(n)},t.prototype.teachQuestEnd=function(){this.isTeachQuset=!1,s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),s.EventMgr.off(a.EventType.Common_Quest_Complete,this.teachQuestEnd,this)},t.prototype.teachUpgradeStart=function(e){if(this.isGuideOn&&(!this.nowTeachUpgradeHand||!this.nowTeachUpgradeHand.isValid)){var t=cc.find("Canvas").getChildByName("guide"),n=this.propContent.getChildByName(e).getChildByName("Button"),o=l.Tool.convertToNodeSpaceAR(t,n);o.y-=n.height/4,this.nowTeachUpgradeHand=this.addGuideHand(t,o),this.nowTeachUpgradeNode=n,this.schedule(this.teachUpgradeUpdate)}},t.prototype.teachUpgradeUpdate=function(){if(this.nowTeachUpgradeHand&&this.nowTeachUpgradeHand.isValid){var e=cc.find("Canvas").getChildByName("guide"),t=l.Tool.convertToNodeSpaceAR(e,this.nowTeachUpgradeNode);t.y-=this.nowTeachUpgradeNode.height/4,this.nowTeachUpgradeHand.setPosition(t)}},t.prototype.teachUpgradeEnd=function(){this.unschedule(this.teachUpgradeUpdate),s.EventMgr.event(a.EventType.Common_GuideHand_Destroy)},t.prototype.teachSummonStart=function(e){this.isGuideOn&&(this.isTeachSummon||(this.isTeachSummon=!0,this.summonType=e,this.teachSummonStep=0,this.teachSummonNextStep(1),s.EventMgr.on(a.EventType.Common_TeachSummon_NextStep,this.teachSummonNextStep,this)))},t.prototype.teachSummonNextStep=function(e){var t=this;s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),this.scheduleOnce(function(){t.teachSummonStep=e;var o,i,r=cc.find("Canvas").getChildByName("guide"),a=t.addGuideHand(r);switch(t.teachSummonStep){case 1:o=n.guideNode.get("shop"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i),a.scaleY=-1;break;case 2:o=n.guideNode.get(t.summonType),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 3:o=n.guideNode.get("summonResultClose"),a.opacity=0,t.scheduleOnce(function(){a.opacity=255},1.5),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i),a.scaleY=-1;break;case 4:t.teachSummonEnd()}})},t.prototype.teachSummonEnd=function(){switch(s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),s.EventMgr.off(a.EventType.Common_TeachSummon_NextStep,this.teachSummonNextStep,this),this.isTeachSummon=!1,this.summonType){case"summonGear":this.teachGearStart();break;case"summonSkill":this.teachSkillStart();break;case"summonPartner":this.teachPartnerStart()}},t.prototype.teachGearStart=function(){this.isGuideOn&&(this.isTeachGear||(this.isTeachGear=!0,this.teachGearStep=0,s.EventMgr.on(a.EventType.Common_TeachGear_NextStep,this.teachGearNextStep,this),this.teachGearNextStep(1)))},t.prototype.teachGearNextStep=function(e){var t=this;s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),this.scheduleOnce(function(){t.teachGearStep=e;var o,i,r=cc.find("Canvas").getChildByName("guide"),a=t.addGuideHand(r);switch(t.teachGearStep){case 1:o=n.guideNode.get("menuHero"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i),a.scaleY=-1;break;case 2:o=n.guideNode.get("gearWeapon"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 3:o=n.guideNode.get("gearItem"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 4:o=n.guideNode.get("btnEquip"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 5:o=n.guideNode.get("gearClose"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i),a.scaleY=-1;break;case 6:o=n.guideNode.get("gearArmor"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 7:o=n.guideNode.get("gearItem"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 8:o=n.guideNode.get("btnEquip"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 9:t.teachGearEnd()}})},t.prototype.teachGearEnd=function(){s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),s.EventMgr.off(a.EventType.Common_TeachGear_NextStep,this.teachGearNextStep,this),this.isTeachGear=!1},t.prototype.teachSkillStart=function(){this.isGuideOn&&(this.isTeachSkill||(this.isTeachSkill=!0,this.teachSkillStep=0,s.EventMgr.on(a.EventType.Common_TeachSkill_NextStep,this.teachSkillNextStep,this),this.teachSkillNextStep(1)))},t.prototype.teachSkillNextStep=function(e){var t=this;s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),this.scheduleOnce(function(){t.teachSkillStep=e;var o,i,r=cc.find("Canvas").getChildByName("guide"),a=t.addGuideHand(r);switch(t.teachSkillStep){case 1:o=n.guideNode.get("menuHero"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i),a.scaleY=-1;break;case 2:o=n.guideNode.get("HeroSkill"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i),a.scaleY=-1;break;case 3:o=n.guideNode.get("SkillItem"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 4:o=n.guideNode.get("SkillEquid"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 5:t.teachSkillEnd()}})},t.prototype.teachSkillEnd=function(){this.isTeachSkill=!1,s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),s.EventMgr.off(a.EventType.Common_TeachSkill_NextStep,this.teachSkillNextStep,this)},t.prototype.teachPartnerStart=function(){this.isGuideOn&&(this.isTeachPartner||(this.isTeachPartner=!0,this.teachPartnerStep=0,s.EventMgr.on(a.EventType.Common_TeachPartner_NextStep,this.teachPartnerNextStep,this),this.teachPartnerNextStep(1)))},t.prototype.teachPartnerNextStep=function(e){var t=this;s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),this.scheduleOnce(function(){t.teachPartnerStep=e;var o,i,r=cc.find("Canvas").getChildByName("guide"),a=t.addGuideHand(r);switch(t.teachPartnerStep){case 1:o=n.guideNode.get("menuPartner"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i),a.scaleY=-1;break;case 2:o=n.guideNode.get("partnerItem"),(i=l.Tool.convertToNodeSpaceAR(r,o)).y=25,a.setPosition(i);break;case 3:o=n.guideNode.get("PartnerEquid"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 4:t.teachPartnerEnd()}})},t.prototype.teachPartnerEnd=function(){this.isTeachPartner=!1,s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),s.EventMgr.off(a.EventType.Common_TeachPartner_NextStep,this.teachPartnerNextStep,this)},t.prototype.teachCopyStart=function(){this.isGuideOn&&(this.isTeachCopy||(this.isTeachCopy=!0,this.teachCopyStep=0,s.EventMgr.on(a.EventType.Common_TeachCopy_NextStep,this.teachCopyNextStep,this),this.teachCopyNextStep(1)))},t.prototype.teachCopyNextStep=function(e){var t=this;s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),this.scheduleOnce(function(){t.teachCopyStep=e;var o,i,r=cc.find("Canvas").getChildByName("guide"),a=t.addGuideHand(r);switch(t.teachCopyStep){case 1:o=n.guideNode.get("menuCopy"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i),a.scaleY=-1;break;case 2:o=n.guideNode.get("bossRushEnter"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 3:o=n.guideNode.get("copyEnter"),i=l.Tool.convertToNodeSpaceAR(r,o),a.setPosition(i);break;case 4:t.teachCopyEnd()}})},t.prototype.teachCopyEnd=function(){this.isTeachCopy=!1,s.EventMgr.event(a.EventType.Common_GuideHand_Destroy),s.EventMgr.off(a.EventType.Common_TeachCopy_NextStep,this.teachCopyNextStep,this)},t.guideNode=new Map,r([h(cc.Node)],t.prototype,"questNode",void 0),r([h(cc.Node)],t.prototype,"propContent",void 0),r([h(cc.Prefab)],t.prototype,"guideHand",void 0),n=r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Tool/Tool":"Tool","../Quest/QuestChain":"QuestChain"}],MgrMastery:[function(e,t,n){"use strict";cc._RF.push(t,"f5fec6Sq+pCR5iwu9ptLVPW","MgrMastery");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.MASTERY_RESET_PRICE=n.MASTERY_STATUS=void 0;var r,a=e("../../../../plugin/NumberPlus"),s=e("../../../Config/EnumTypes"),l=e("../../../Config/GameData"),c=e("../../../Mgr/BaseMgr"),u=e("../../../Mgr/EventMgr"),d=e("../../../Mgr/LanguageMgr"),h=e("../../../Mgr/StorageMgr"),p=e("../../../Platform/Platform"),f=e("../AssetsMgr"),g=e("../Unlock/MgrUnlock");(function(e){e[e.Close=0]="Close",e[e.Open=1]="Open",e[e.Max=2]="Max"})(r=n.MASTERY_STATUS||(n.MASTERY_STATUS={})),n.MASTERY_RESET_PRICE=10;var y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.datas={},t.minResetLayerId=0,t.props={},t.cfg={},t.unlockIds={},t.layers={},t._hasCanLvUp=!1,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCanLvUp",{get:function(){return g.default.Instance.isUnlock(s.UnlockType.Mastery)&&this._hasCanLvUp},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.apply(this,t))return!1;var o=l.default.getJsonObject("Mastery"),i=this;for(var r in o){var a=o[r],s=function(e){var t=splitValue(a[e].pre),n=splitValue(a[e].propType),o=splitValue(a[e].propAdd),r=a[e];r.pre=t,r.propType=n,r.propAdd=o,c.cfg[r.id]=r;var s=r.id,l=r.layer,u=myGlobalThis.get(c.layers,l,[]);u.push(r),myGlobalThis.set(c.layers,l,u),myGlobalThis.each(t,function(e){var t=myGlobalThis.get(i.unlockIds,e,[]);t.push(s),myGlobalThis.set(i.unlockIds,e,t)})},c=this;for(var u in a)s(u)}this.load()},t.prototype.saveData=function(){var e={};myGlobalThis.each(this.datas,function(t){e[t.id]={level:t.level,status:t.status}}),h.default.instance.saveUserMasteryData(e)},t.prototype.get=function(e){return this.cfg[e]},t.prototype.getLayers=function(e){return this.layers[e]},t.prototype.getUnlockIds=function(e){return this.unlockIds[e]},t.prototype.getData=function(e){return this.datas[e]},t.prototype.getAllDatas=function(){return this.datas},Object.defineProperty(t.prototype,"userMasteryData",{get:function(){return h.default.instance.storageData.userMasteryData},enumerable:!1,configurable:!0}),t.prototype.load=function(){var e=this;this.datas=[];var t=1;this.minResetLayerId=1;var n={};myGlobalThis.isEmpty(this.userMasteryData)?n[1]=this.createData(1,0,r.Open):(n=this.userMasteryData,myGlobalThis.each(this.userMasteryData,function(n,o){var i=parseInt(o);n.id=i;var r=e.get(i);r.resetLv&&t<=r.layer&&(t=r.layer,e.minResetLayerId=i)})),this.datas=n,this.createAllProps(),this.reFindLvUpEnable(),u.EventMgr.on(s.GlobalEvent.HeroLevelChange,this.reFindLvUpEnable,this)},t.prototype.createData=function(e,t,n){return{id:e,level:t,status:n}},t.prototype.createAllProps=function(){var e=this;myGlobalThis.each(this.datas,function(t){var n=t.id,o=t.level,i=e.get(n);myGlobalThis.each(i.propType,function(t,n){if(o>0){var r=i.propAdd[n],s=e.props[t];s||(s=e.props[t]="0"),s=e.props[t]=a.default.decode(""+r*o)}})}),this.refreshAddition()},t.prototype.reCalcProp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;myGlobalThis.each(this.props,function(){}),myGlobalThis.each(this.datas,function(e){var t=e.id,o=e.level,i=n.get(t);myGlobalThis.each(i.propType,function(e,t){if(o>0){var r=i.propAdd[t],s=n.props[e];s||(s=n.props[e]="0"),s=n.props[e]=a.default.decode(""+r*o)}})}),this.refreshAddition(!1)},t.prototype.doUp=function(e){var t=this.get(e),n=this.getData(e);n.level++,f.default.Instance.addItem(s.ASSET_TYPE.Sp,t.costSp,-1,!0),this.reCalcProp(n),t.maxLevel>0&&n.level==t.maxLevel&&(n.status=r.Max,this.reCalcProp(n),this.unlock(e)),this.saveData(),this.reFindLvUpEnable()},t.prototype.unlock=function(e){var t=this,n=this.get(this.minResetLayerId).layer,o=this.getUnlockIds(e);myGlobalThis.each(o,function(e){if(t.get(e).pre.every(function(e){var n=t.getData(e);return n&&n.status==r.Max})){var o=t.getData(e);o?(o.level=0,o.status=r.Open):o=t.datas[e]=t.createData(e,0,r.Open);var i=t.get(e);i.resetLv&&n<i.layer&&(t.minResetLayerId=e),u.EventMgr.event(s.GlobalEvent.MasteryUnlock,e)}})},t.prototype.lvup=function(e){var t=this.getData(e);if(myGlobalThis.isNil(t)||t.status!=r.Open)return!1;var n=this.get(e);if(h.default.instance.storageData.heroSp<n.costSp)return p.default.instance.showToast(d.default.Instance.getLanguage("Not enough Sp")),!1;this.doUp(e),u.EventMgr.event(s.GlobalEvent.MasteryLvChange,e)},t.prototype.reFindLvUpEnable=function(){this._hasCanLvUp=!1;var e=this,t=h.default.instance.storageData.heroSp;t<=0||myGlobalThis.each(this.datas,function(n){if(n.status==r.Open){var o=e.get(n.id);if(t>=o.costSp&&n.level!=o.maxLevel)return e._hasCanLvUp=!0,!1}})},t.prototype.getResetEnable=function(){var e=!1;return myGlobalThis.each(this.datas,function(t){t.level>0&&(e=!0)}),e},t.prototype.reset=function(){if(this.getResetEnable())if(h.default.instance.storageData.diamond>=n.MASTERY_RESET_PRICE){var e=this,t=!1;f.default.Instance.addItem(s.ASSET_TYPE.Diamond,n.MASTERY_RESET_PRICE,-1,!0),myGlobalThis.each(this.datas,function(n){var o=e.get(n.id);if(n.level>0){var i=n.level*o.costSp;n.level=0,f.default.Instance.addItem(s.ASSET_TYPE.Sp,i,1,!0)}n.status=r.Close,t=!0,u.EventMgr.event(s.GlobalEvent.MasteryLvChange,n.id)}),this.datas={},this.datas[1]=this.createData(1,0,r.Open),myGlobalThis.each(this.props,function(t,n){e.props[n]="0"}),this.reCalcProp(),this.props={},u.EventMgr.event(s.GlobalEvent.MasteryLvChange,1),t&&this.saveData()}else p.default.instance.showToast(d.default.Instance.getLanguage("Not enough Gem!"));else p.default.instance.showToast(d.default.Instance.getLanguage("No mastery can be reset"))},t.prototype.setMasteryAddition=function(e,t,n){switch(void 0===n&&(n=!0),e){case s.PROP_TYPE.ATK:l.default.masteryAddAtk=a.default.decode(t);break;case s.PROP_TYPE.HP:l.default.masteryAddHp=a.default.decode(t);break;case s.PROP_TYPE.HPRecovery:case s.PROP_TYPE.ASPD:case s.PROP_TYPE.CriticalHitChance:case s.PROP_TYPE.CriticalHitDamage:case s.PROP_TYPE.DoubleShot:case s.PROP_TYPE.TripleShot:case s.PROP_TYPE.MoveSpeed:break;case s.PROP_TYPE.CoinAdd:l.default.masteryAddCoinValue=a.default.decode(t);break;case s.PROP_TYPE.SkillHurtAdd:case s.PROP_TYPE.PartnerAspd:case s.PROP_TYPE.BossDamageAmount:case s.PROP_TYPE.SkillCd:case s.PROP_TYPE.BlessCoins:case s.PROP_TYPE.BlessAtk:case s.PROP_TYPE.BlessSkill:case s.PROP_TYPE.HeroExpAdd:case s.PROP_TYPE.NormalAtk:case s.PROP_TYPE.HPRecoveryRate:case s.PROP_TYPE.PartnerAtk:case s.PROP_TYPE.BaseAtk:case s.PROP_TYPE.BaseHP:break;case s.PROP_TYPE.AddAtk:l.default.masteryAddDamage=a.default.decode(t);break;case s.PROP_TYPE.PickaxSpeed:case s.PROP_TYPE.PickaxMax:case s.PROP_TYPE.CubeAdd:case s.PROP_TYPE.ResearchSpeedAdd:case s.PROP_TYPE.BuffAspd:case s.PROP_TYPE.EnemyDamagePercent:break;case s.PROP_TYPE.Dodge:l.default.masteryAddDodge=a.default.decode(t)}n||u.EventMgr.event(s.EventType.Battle_Hero_Prop_Update)},t.prototype.refreshAddition=function(e){void 0===e&&(e=!0);var t=this;myGlobalThis.each(this.props,function(n,o){t.setMasteryAddition(parseInt(o),n,e)})},t.prototype.getPropValue=function(e){return this.props[e]||"0"},t}(c.default);n.default=y,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/BaseMgr":"BaseMgr","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/LanguageMgr":"LanguageMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Platform/Platform":"Platform","../AssetsMgr":"AssetsMgr","../Unlock/MgrUnlock":"MgrUnlock"}],MgrQuest:[function(e,t,n){"use strict";cc._RF.push(t,"d7c3eDSEtVBOrvxrt7EARTR","MgrQuest");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.CHAIN_QUEST_DEFAULT_ID=void 0;var r=e("../../Config/EnumTypes"),a=e("../../Config/GameData"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/TimerHelper"),c=e("../../Mgr/BaseMgr"),u=e("./Quest/QuestChain"),d=e("./Quest/QuestDaily"),h=e("../../Mgr/StorageMgr"),p=e("./Quest/QuestSevenChallenge");n.CHAIN_QUEST_DEFAULT_ID=20001;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.questProxy={},t.questMap=new Map,t.questQualityMap=new Map,t._time=0,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sysValues",{get:function(){return h.default.instance.storageData.questSysValue},set:function(e){h.default.instance.storageData.questSysValue=e,h.default.instance.saveQuestSySValue()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questDailyResetTimeKey",{get:function(){return h.default.instance.storageData.questDailyResetTimeKey},set:function(e){h.default.instance.saveQuestDailyResetTimeKey(e)},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;this.questMap.clear();var o=a.default.getJsonObject("quest");for(var i in o){var l=o[i];for(var c in l){var h=l[c];this.questMap.set(h.id,h),this.questQualityMap.has(h.type)||this.questQualityMap.set(h.type,[]),this.questQualityMap.get(h.type).push(h)}}this.setProxy(r.QUEST_TYPE.Daily,d.default.Instance),this.setProxy(r.QUEST_TYPE.Chain,u.default.Instance),this.setProxy(r.QUEST_TYPE.SevenChallenge,p.default.Instance),this.load(),s.EventMgr.event(r.EventType.Main_UI_QuestInitComplete)},t.prototype.getQuestInfo=function(e){if(this.questMap.has(e))return this.questMap.get(e);console.error("\u4efb\u52a1\u6570\u636e ["+e+"] \u4e0d\u5b58\u5728")},t.prototype.getQuests=function(e){return this.questQualityMap.get(e)},t.prototype.setProxy=function(e,t){t.delegate=this,this.questProxy[e]=t},t.prototype.saveSysValues=function(){h.default.instance.saveQuestSySValue()},t.prototype.load=function(){myGlobalThis.isEmpty(this.sysValues)&&(this.sysValues[r.QUEST_ACTIVE_ID.UserLogin]=1,this.saveSysValues()),this.loadDailyResetMoment(),myGlobalThis.each(this.questProxy,function(e){return e.load()}),s.EventMgr.on(r.GlobalEvent.QuestCommit,this.onCommit,this),s.EventMgr.on(r.GlobalEvent.QuestBatchCommit,this.onBatchCommit,this),this.initLoadData()},t.prototype.loadDailyResetMoment=function(){return this.questDailyResetTimeKey<=0&&(this.questDailyResetTimeKey=l.default.getTomorrowValueOf()),this.questDailyResetTimeKey},t.prototype.initLoadData=function(){l.default.GetNowTime()>=this.questDailyResetTimeKey&&(this.resetQuest(),this.onCommit(r.QUEST_ACTIVE_ID.UserLogin,1))},t.prototype.fixUpdate=function(e){this._time+=e,this._time>=1&&(this._time=0,l.default.GetNowTime()>=this.questDailyResetTimeKey&&(this.onCommit(r.QUEST_ACTIVE_ID.UserLogin,1),this.resetQuest()))},t.prototype.resetQuest=function(){d.default.Instance.dailyReset(),p.default.Instance.dailyReset(),this.questDailyResetTimeKey=l.default.getTomorrowValueOf()},t.prototype.onCommit=function(e,t){myGlobalThis.isNil(e)?a.default.isTest&&console.log("\u4efb\u52a1\u63d0\u4ea4\u9519\u8bef\uff0cactiveId \u4e3a\u7a7a"):((!myGlobalThis.isNil(t)||t>this.getSysValue(e))&&(this.sysValues[e]=t,this.saveSysValues()),this.commit(e))},t.prototype.onBatchCommit=function(e,t,n){myGlobalThis.isNil(e)?a.default.isTest&&console.log("\u4efb\u52a1\u63d0\u4ea4\u9519\u8bef\uff0cactiveId \u4e3a\u7a7a"):((!myGlobalThis.isNil(n)||n>this.getSysValue(e))&&(this.sysValues[e]=n,this.saveSysValues()),this.commit(e,t))},t.prototype.getSysValue=function(e){return myGlobalThis.get(this.sysValues,e,0)},t.prototype.commit=function(e,t){t||(t=1),myGlobalThis.each(this.questProxy,function(n){return n.commit(e,t)})},t}(c.default);n.default=f,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimerHelper":"TimerHelper","./Quest/QuestChain":"QuestChain","./Quest/QuestDaily":"QuestDaily","./Quest/QuestSevenChallenge":"QuestSevenChallenge"}],MgrRing:[function(e,t,n){"use strict";cc._RF.push(t,"03140NYX8hJCJM0se4ytFnE","MgrRing");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.RingPropInfo=void 0;var s=e("../../../plugin/NumberPlus"),l=e("../../CfgInfo"),c=e("../../Config/EnumTypes"),u=e("../../Config/GameData"),d=e("../../Mgr/BaseMgr"),h=e("../../Mgr/EventMgr"),p=e("../../Mgr/ItemMgr"),f=e("../../Mgr/LanguageMgr"),g=e("../../Mgr/StorageMgr"),y=e("../../Mgr/TimerHelper"),m=e("../../Platform/Platform"),v=e("../CommonUI/Alert"),_=e("../CommonUI/UIAssetReceiveView"),b=e("../Main_PanelOpen"),S=e("./AssetsMgr"),M=function(){};n.RingPropInfo=M;var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ringData=[],t.multiple=1e3,t.curEquipId=-1,t.selectId=-1,t.maxRingCount=30,t.chooseList=[],t.propAdditionList=[],t.ringCfg={},t.ringCfgByQuality={},t.ringLevelCfg={},t.ringQualityLevelCfg={},t.qualityMaxLevel={},t.maxQuality=p.QualityEnum.Mythic,t.minQuality=p.QualityEnum.Uncommon,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;var o=u.default.getJsonObject("ring");for(var i in o){var r=o[i];for(var a in r){var s=r[a];this.ringCfg[s.id]=s;var l=myGlobalThis.get(this.ringCfgByQuality,s.quality,[]);l.push(s),myGlobalThis.set(this.ringCfgByQuality,s.quality,l),s.quality>this.maxQuality&&(this.maxQuality=s.quality),s.quality<this.minQuality&&(this.minQuality=s.quality)}}o=u.default.getJsonObject("ringLevel");for(var c=p.QualityEnum.Common;c<=p.QualityEnum.Exotic;c++)if(r=o[p.QualityToKey[c]])for(var i in r){s=r[i];var d=myGlobalThis.get(this.ringLevelCfg,c,[]);d.push(s),myGlobalThis.set(this.ringLevelCfg,c,d)}o=u.default.getJsonObject("ringQualityLevel");var h=0;for(c=p.QualityEnum.Common;c<=p.QualityEnum.Exotic;c++)if(r=o[p.QualityToKey[c]]){for(var i in h=0,r){s=r[i];var f=myGlobalThis.get(this.ringQualityLevelCfg,c,[]);f.push(s),myGlobalThis.set(this.ringQualityLevelCfg,c,f),s.strengLevel&&(h=s.strengLevel)}this.qualityMaxLevel[c]=h}this.ringData=g.default.instance.storageData.userRingData,this.curEquipId=g.default.instance.storageData.userEquipRingId,this.reCalAddation()},t.prototype.get=function(e){return this.ringCfg[e]},t.prototype.getCfgsByQuality=function(e){return this.ringCfgByQuality[e]},t.prototype.getOriginRingId=function(){return myGlobalThis.keys(this.ringCfg)[0]},t.prototype.getLevelCfg=function(e,t){return myGlobalThis.get(this.ringLevelCfg,e,[]).find(function(e){return e.ringLevel==t})},t.prototype.getRingQualityLevelCfg=function(e,t){return myGlobalThis.get(this.ringQualityLevelCfg,e,[]).find(function(e){return e.strengLevel==t})},t.prototype.getMaxQuality=function(){return this.maxQuality},t.prototype.getMinQuality=function(){return this.minQuality},t.prototype.getMaxLevel=function(e){return this.qualityMaxLevel[e]},t.prototype.createRing=function(e,t,n){var o=new l.RingInfoData,i=this.getMaxQuality();return t=t>i?i:t,o.originId=this.createOriginId(t),o.id=this.createRingId(o.originId),o.propData=n,o.createTime=y.default.GetNowTime(),o.ringLevel=e,o.strengthenLv=0,o.quality=t,this.ringData.push(o),this.saveRingDataById(o.id,o),o},t.prototype.isRingFull=function(){return this.getRingCount()>=this.maxRingCount},t.prototype.getRingData=function(e){for(var t=0;t<this.ringData.length;t++)if(this.ringData[t].id==e)return this.ringData[t];return null},t.prototype.getRingCfg=function(e){var t=this.getRingData(e).originId;return this.get(t)},t.prototype.getLastIdByOriginId=function(e){for(var t=e*this.multiple,n=0;n<this.ringData.length;n++)this.ringData[n].originId==e&&this.ringData[n].id>t&&(t=this.ringData[n].id);return t},t.prototype.addRingProp=function(e,t){var n=this.getRingData(e);null!=n?(n.propData.push(t),this.saveRingDataById(e,n)):console.error("\u6212\u6307\u4e0d\u5b58\u5728->"+e)},t.prototype.createRingId=function(e){return this.getLastIdByOriginId(e)+1},t.prototype.saveRingDataById=function(e,t){for(var n=!1,o=0;o<this.ringData.length;o++)this.ringData[o].id==e&&(this.ringData[o]=t,n=!0);n||this.ringData.push(t),this.saveRingData()},t.prototype.saveRingData=function(){g.default.instance.saveUserRingData(this.ringData)},t.prototype.breakDownRing=function(e,t){null==t&&(t=!0);var n=0;S.default.Instance.addItem(c.ASSET_TYPE.RingChip,this.getBreakCount(e));for(var o=0;o<this.ringData.length;o++)if(this.ringData[o].id==e){n=this.getBreakCount(e),this.ringData.splice(o,1);break}h.EventMgr.event(c.GlobalEvent.RemoveRing,e),this.setSelectId(this.getEquipRingId()),this.saveRingData(),t&&this.showBreakPop(n)},t.prototype.breakSelectRing=function(){for(var e=0,t=this.chooseList.length-1;t>=0;t--)e+=this.getBreakCount(this.chooseList[t]),this.breakDownRing(this.chooseList[t],!1),this.chooseList.splice(t,1);h.EventMgr.event(c.GlobalEvent.UpdateSelectView),this.showBreakPop(e)},t.prototype.getBreakChooseCount=function(){return this.chooseList.length},t.prototype.showBreakPop=function(e){var t=[];t.push({id:c.ASSET_TYPE.RingChip,count:e}),_.default.open(t)},t.prototype.strengthenRing=function(e){for(var t=0;t<this.ringData.length;t++)this.ringData[t].id==e&&(S.default.Instance.addItem(c.ASSET_TYPE.RingChip,this.getCostCount(e),-1,!0),this.ringData[t].strengthenLv+=1);this.setSelectId(this.selectId),this.saveRingData(),h.EventMgr.event(c.GlobalEvent.FreshRingView,e),this.reCalAddation()},t.prototype.lvUpRingQuality=function(e,t){t||(t=1);for(var n=0;n<this.ringData.length;n++)if(this.ringData[n].id==e)return this.ringData[n].quality+=t,this.ringData[n].quality>p.QualityEnum.Exotic&&(this.ringData[n].quality=p.QualityEnum.Exotic),this.ringData[n].originId=this.createOriginId(this.ringData[n].quality),this.ringData[n].id=this.createRingId(this.ringData[n].originId),this.saveRingData(),this.ringData[n].id;return console.error("\u5347\u7ea7\u54c1\u8d28\u9519\u8bef"),-1},t.prototype.getRingCount=function(){return this.ringData.length},t.prototype.getEquipRingId=function(){return this.curEquipId},t.prototype.getFirstRingId=function(){return this.ringData.length>0?this.ringData[0].id:-1},t.prototype.equipRing=function(e){var t=this.curEquipId;this.curEquipId=e,g.default.instance.saveUserEquipRingId(this.curEquipId),this.setSelectId(this.getEquipRingId()),h.EventMgr.event(c.GlobalEvent.FreshRingView,t),h.EventMgr.event(c.GlobalEvent.FreshRingView,e),h.EventMgr.event(c.GlobalEvent.EquipRing),this.reCalAddation(),this.updateRingPorp()},t.prototype.unEquipRing=function(){var e=this.curEquipId;this.curEquipId=-1,g.default.instance.saveUserEquipRingId(this.curEquipId),h.EventMgr.event(c.GlobalEvent.FreshRingView,e),h.EventMgr.event(c.GlobalEvent.EquipRing),this.disableAddtion(),this.updateRingPorp()},t.prototype.setSelectId=function(e){this.selectId=e,h.EventMgr.event(c.GlobalEvent.FreshRingInfoView)},t.prototype.selectRing=function(e,t){if(t)-1==this.chooseList.indexOf(e)&&this.chooseList.push(e);else{var n=this.chooseList.indexOf(e);-1!=n&&this.chooseList.splice(n,1)}h.EventMgr.event(c.GlobalEvent.SelectRing,e,t)},t.prototype.selectAllRing=function(e){for(var t=e?this.autoSelectList():this.chooseList,n=t.length,o=0;o<n;o++)this.selectRing(t[e?o:0],e)},t.prototype.getCanBreakList=function(){for(var e=[],t=0;t<this.ringData.length;t++)this.ringData[t].id!=this.getEquipRingId()&&e.push(this.ringData[t].id);return e},t.prototype.autoSelectList=function(){var e=[],t=null,n=this.getEquipRingId();-1!=n&&(t=this.getRingData(n));for(var o=0;o<this.ringData.length;o++){var i=this.ringData[o];t?i.id!=n&&i.strengthenLv<=0&&i.quality<=t.quality&&i.ringLevel<t.ringLevel&&e.push(this.ringData[o].id):i.id!=n&&e.push(this.ringData[o].id)}return e},t.prototype.getSelectId=function(){return this.selectId},t.prototype.createOriginId=function(e){for(var t=this.getCfgsByQuality(e),n=0,o=-1,i=0,r=0;r<t.length;r++)n+=t[r].rate;for(r=0;r<t.length;r++)if(Math.random()*n<=(i+=t[r].rate)){o=r;break}return t[o].id},t.prototype.getAllRingData=function(){return this.ringData},t.prototype.getAtkUp=function(e){var t=this.getRingData(e),n=this.getMaxLevel(t.quality),o=t.ringLevel+t.strengthenLv;return o=o>n?n:o,this.getLevelCfg(t.quality,o).atkUP},t.prototype.getHpUp=function(e){var t=this.getRingData(e),n=this.getMaxLevel(t.quality),o=t.ringLevel+t.strengthenLv;return o=o>n?n:o,this.getLevelCfg(t.quality,o).hpUP},t.prototype.getRingChipCount=function(){return g.default.instance.storageData.ringChip},t.prototype.getMaxRingCount=function(){return this.maxRingCount},t.prototype.getQualityLevelCfg=function(e){var t=this.getRingData(e);return this.getRingQualityLevelCfg(t.quality,t.strengthenLv)},t.prototype.getRingLevelCfg=function(e){var t=this.getRingData(e);return this.getLevelCfg(t.quality,t.ringLevel)},t.prototype.getBreakCount=function(e){var t=this.getQualityLevelCfg(e);return t.breakNum>0?t.breakNum:0},t.prototype.getCostCount=function(e){var t=this.getRingData(e);return this.getRingQualityLevelCfg(t.quality,t.strengthenLv).costNum},t.prototype.getChooseRingCount=function(){return this.chooseList.length},t.prototype.getChooseRingChipCount=function(){for(var e=0,t=0;t<this.chooseList.length;t++){var n=this.getRingData(this.chooseList[t]);e+=this.getQualityLevelCfg(n.id).breakNum}return e},t.prototype.clearSelect=function(){this.chooseList=[]},t.prototype.reCalAddation=function(){-1!=this.getEquipRingId()&&(this.disableAddtion(),this.propAdditionList=[],this.propAdditionList=this.getPropList(this.getEquipRingId()),this.activeAddtion())},t.prototype.activeAddtion=function(){},t.prototype.disableAddtion=function(){},t.prototype.getPropList=function(e){var t=[],n=this.getRingData(e);t.push({propId:c.PROP_TYPE.ATK,value:s.default.add(0,this.getAtkUp(e))}),t.push({propId:c.PROP_TYPE.HP,value:s.default.add(0,this.getHpUp(e))});for(var o=0;o<n.propData.length;o++){var i=this.HasProp(n.propData[o].propId,t);-1==i?t.push({propId:n.propData[o].propId,value:s.default.add(0,n.propData[o].value)}):t[i].value=s.default.add(t[i].value,n.propData[o].value)}return t},t.prototype.HasProp=function(e,t){for(var n=0;n<t.length;n++)if(e==t[n].prop)return n;return-1},t.prototype.getSkillAddtion=function(e){if(-1==this.getEquipRingId())return"0";var t=this.getRingData(this.getEquipRingId()),n=this.getRingCfg(t.id);if(n.skillID!=e)return"0";var o=n.skillUP+n.skillUPLevel*t.ringLevel;return s.default.add(0,o)},t.prototype.getLastRingData=function(){return this.ringData[this.ringData.length-1]},t.prototype.canStrengthen=function(){return!0},t.prototype.onCreateRing=function(e,n){if(""!=e){var o=e.split(",");if(2==o.length){var i=new l.RingInfoData;i.quality=Number(o[0]),i.ringLevel=Number(o[1]);var r=t.Instance.createRing(i.ringLevel,i.quality,[]);if(n.length>0)for(var a=0;a<n.length;a++){var s=n[a].split(",");if(s.length%2==0){for(var c=0;c<s.length;c++)if(c%2==0){var u=new M;u.propId=Number(s[c]),u.value=Number(s[c+1]),t.Instance.addRingProp(r.id,u)}}else m.default.instance.showToast("\u6b63\u786e\u8f93\u5165\u6212\u6307\u5c5e\u6027")}}else m.default.instance.showToast("\u6b63\u786e\u8f93\u5165\u6212\u6307\u54c1\u8d28\u548cId!")}else m.default.instance.showToast("\u8f93\u5165\u6212\u6307\u54c1\u8d28\u548cId!")},t.prototype.updateRingPorp=function(){var e=g.default.instance.storageData.userEquipRingId;if(u.default.ringAddAtk="0",u.default.ringAddHp="0",u.default.ringAddBossDamage=0,u.default.ringAddPartnerAtk=0,u.default.ringAddCriticalDamage=0,u.default.ringAddDodge=0,u.default.ringAddCoinValue="0",u.default.moveSpeedAdd=0,u.default.ringCDReduce=0,u.default.skillAddAtk="0",-1==e)return u.default.isTest&&console.log("\u5f53\u524d\u6ca1\u6709\u88c5\u5907\u6212\u6307"),void h.EventMgr.event(c.EventType.Battle_Hero_Prop_Upgrade);for(var t=this.getPropList(e),n=0;n<t.length;n++)switch(t[n].propId){case c.PROP_TYPE.ATK:u.default.ringAddAtk=t[n].value.toString();break;case c.PROP_TYPE.HP:u.default.ringAddHp=t[n].value.toString();break;case c.PROP_TYPE.BossDamageAmount:u.default.ringAddBossDamage=t[n].value;break;case c.PROP_TYPE.PartnerAtk:u.default.ringAddPartnerAtk=t[n].value;break;case c.PROP_TYPE.CriticalHitDamage:u.default.ringAddCriticalDamage=t[n].value;break;case c.PROP_TYPE.Dodge:u.default.ringAddDodge=t[n].value;break;case c.PROP_TYPE.CoinAdd:u.default.ringAddCoinValue=t[n].value.toString();break;case c.PROP_TYPE.MoveSpeed:u.default.moveSpeedAdd=t[n].value;break;case c.PROP_TYPE.SkillCd:u.default.ringCDReduce=t[n].value;break;case c.PROP_TYPE.SkillHurtAdd:u.default.skillAddAtk=t[n].value.toString()}h.EventMgr.event(c.EventType.Battle_Hero_Prop_Upgrade)},t.prototype.canCreateRing=function(e){return void 0===e&&(e=!1),r(this,void 0,Promise,function(){var t;return a(this,function(n){switch(n.label){case 0:return this.getRingCount()>=this.maxRingCount?e?[4,v.default.open(f.default.Instance.getLanguage("BagFullTip"))]:[3,2]:[3,3];case 1:(t=n.sent()).confirm(function(){return b.default.showRingDetailView()}),t.show(),n.label=2;case 2:return[2,!1];case 3:return[2,!0]}})})},t._instance=null,t}(d.default);n.default=C,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../CfgInfo":"CfgInfo","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimerHelper":"TimerHelper","../../Platform/Platform":"Platform","../CommonUI/Alert":"Alert","../CommonUI/UIAssetReceiveView":"UIAssetReceiveView","../Main_PanelOpen":"Main_PanelOpen","./AssetsMgr":"AssetsMgr"}],MgrSevenChallenge:[function(e,t,n){"use strict";cc._RF.push(t,"6dcf2aRQt9KvJMnf7ydmYh/","MgrSevenChallenge");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.OPEN_GM=n.SEVENCHALLENGE_LAST_TIME=void 0;var r=e("../../Config/EnumTypes"),a=e("../../Config/GameData"),s=e("../../Mgr/BaseMgr"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/StorageMgr"),u=e("../../Mgr/TimerHelper"),d=e("./ExtraRewardData"),h=e("./Quest/QuestSevenChallenge"),p=e("./Unlock/MgrUnlock");n.SEVENCHALLENGE_LAST_TIME=28,n.OPEN_GM=!1;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cfg={},t.typeQuests={},t.count=0,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;var o=a.default.getJsonObject("sevenChallenge");for(var i in o){var s=o[i];for(var c in s){var u=s[c];this.cfg[u.id]=u}}var d=this;myGlobalThis.each(this.cfg,function(e){var t=myGlobalThis.get(d.typeQuests,e.day,{});t[e.id]=e,myGlobalThis.set(d.typeQuests,e.day,t)}),h.default.Instance.load(),l.EventMgr.on(r.GlobalEvent.UnlockSevenChallenge,this.isShowAllRedDot,this),l.EventMgr.on(r.GlobalEvent.SevenChallengeQuestStatusChange,this.isShowAllRedDot,this),this.isShowAllRedDot()},t.prototype.hasRedDot=function(){return this.count>0},t.prototype.get=function(e){return this.cfg[e]},t.prototype.getByQuestId=function(e){var t=null;return myGlobalThis.forEach(this.cfg,function(n){if(n.quest,n.quest==e)return t=n,!1}),t},t.prototype.getDayQuests=function(e){return this.typeQuests[e]},t.prototype.isShowAllRedDot=function(){var e=h.default.Instance.getFinishedQuestNum(),n=t.Instance.getSevenChallengeDay();this.count=0;for(var o=0;o<=n;o++)h.default.Instance.getDayReceiveEnableCount(o)>0&&this.count++;for(o=0;o<=7;o++){var i=d.ExtraRewardData.Instance.getData(o).status,r=d.ExtraRewardData.Instance.get(o);null!=r&&e>=r.number&&0==i&&this.count++}},t.prototype.isShowDayRedDot=function(e){return e<=t.Instance.getSevenChallengeDay()&&h.default.Instance.getDayReceiveEnableCount(e)>0},t.prototype.isShowAllQuestDot=function(){for(var e=0,n=t.Instance.getSevenChallengeDay(),o=1;o<=n;o++)h.default.Instance.getDayReceiveEnableCount(o)>0&&e++;return e>0},t.prototype.saveSevenChallengeOpenTime=function(){var e=u.default.GetNowTime();c.default.instance.saveUserSevenChallengeOpenTime(e)},t.prototype.getSevenChallengeOpenTime=function(){return c.default.instance.storageData.userSevenChallengeOpenTime},t.prototype.getSevenChallengeDay=function(){var e=this.getSevenChallengeOpenTime();if(e<=0)return 1;var t=u.default.getMoment(e).startOf("day");return u.default.getNowMoment().startOf("day").diff(t,"day")+1},t.prototype.isOpen=function(){if(!p.default.Instance.isUnlock(r.UnlockType.SevenChallenge))return!1;var e=this.getSevenChallengeDay();return e>=1&&e<=n.SEVENCHALLENGE_LAST_TIME},t.prototype.getToggleIndex=function(){var e=this.getSevenChallengeDay();return e>7&&(e=7),e-1},t._instance=null,t}(s.default);n.default=f,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimerHelper":"TimerHelper","./ExtraRewardData":"ExtraRewardData","./Quest/QuestSevenChallenge":"QuestSevenChallenge","./Unlock/MgrUnlock":"MgrUnlock"}],MgrShop:[function(e,t,n){"use strict";cc._RF.push(t,"ccc86LRvQ9KNYBW+EJjqjE8","MgrShop");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0}),n.ShopState=n.SHOP_FREE_ID=n.WEEK_SECONDS=n.DAY_SECONDS=n.HOUR_SECONDS=n.DAY_MINUTES=void 0;var s,l=e("../../Config/EnumTypes"),c=e("../../Config/GameData"),u=e("../../Mgr/EventMgr"),d=e("../../Mgr/TimerHelper"),h=e("../../Platform/Platform"),p=e("../CommonUI/UIAssetReceiveView"),f=e("./AssetsMgr"),g=e("../../Mgr/BaseMgr"),y=e("./Hero/HeroMgr"),m=e("../../Mgr/StorageMgr");n.DAY_MINUTES=1440,n.HOUR_SECONDS=3600,n.DAY_SECONDS=60*n.DAY_MINUTES,n.WEEK_SECONDS=7*n.DAY_SECONDS,n.SHOP_FREE_ID=2001,function(e){e[e.Close=0]="Close",e[e.Open=1]="Open"}(s=n.ShopState||(n.ShopState={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cfg={},t.typeShops={},t.triggerCfgs={},t.datas={},t.checkMethods={},t._time=0,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"payTotal",{get:function(){return m.default.instance.storageData.userShopTotalPay},set:function(e){m.default.instance.saveUserShopTotalPay(e)},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.apply(this,t))return!1;var o=c.default.getJsonObject("shop");for(var i in o){var r=o[i];for(var a in r){var s=r[a];this.cfg[s.id]=s}}this.onLoad(),this.loaded()},t.prototype.loaded=function(){var e=this;myGlobalThis.each(this.cfg,function(t){var n,o=t.trigger.toString(),i=[];myGlobalThis.isEmpty(o)||(n=myGlobalThis.split(o,","),myGlobalThis.each(n,function(n){if(!myGlobalThis.isEmpty(n)){var o=n.split("|"),r=o[0],a=o[1];i.push({type:myGlobalThis.parseInt(r),value:a});var s=myGlobalThis.get(e.triggerCfgs,r,[]);s.push(t.id),myGlobalThis.set(e.triggerCfgs,r,s)}})),t.trigger=i;var r=t.goods.toString(),a=[];myGlobalThis.isEmpty(r)||(n=myGlobalThis.split(r,","),myGlobalThis.each(n,function(e){if(!myGlobalThis.isEmpty(e)){var t=e.split("|"),n=myGlobalThis.parseInt(t[0]),o=myGlobalThis.parseInt(t[1]),i=myGlobalThis.parseInt(t[2]);a.push({type:n,id:o,count:i})}})),t.goods=a;var s=myGlobalThis.get(e.typeShops,t.type,[]);s.push(t),myGlobalThis.set(e.typeShops,t.type,s)})},t.prototype.get=function(e){return this.cfg[e]},t.prototype.getTypes=function(e){return this.typeShops[e]},t.prototype.getTriggerCfgs=function(e){return myGlobalThis.get(this.triggerCfgs,e,[])},Object.defineProperty(t.prototype,"userShopData",{get:function(){return m.default.instance.storageData.userShopData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userShopTotalPay",{get:function(){return m.default.instance.storageData.userShopTotalPay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weekOpenMoment",{get:function(){return m.default.instance.storageData.userWeekOpenTimeStamp},set:function(e){m.default.instance.saveUserWeekOpenTimeStamp(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dailyOpenMoment",{get:function(){return m.default.instance.storageData.userDailyOpenTimeStamp},set:function(e){m.default.instance.saveUserDailyOpenTimeStamp(e)},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.checkMethods[l.SHOP_TRIGGER_ID.Level]=this.checkLevel,this.checkMethods[l.SHOP_TRIGGER_ID.Login]=this.checkLogin,this.checkMethods[l.SHOP_TRIGGER_ID.StartDate]=this.checkStartDate,this.checkMethods[l.SHOP_TRIGGER_ID.CloseDate]=this.checkCloseDate,this.checkMethods[l.SHOP_TRIGGER_ID.PayLower]=this.checkPayLower,this.checkMethods[l.SHOP_TRIGGER_ID.PayUpper]=this.checkPayUpper,this.checkMethods[l.SHOP_TRIGGER_ID.Sys]=this.checkSys,this.checkMethods[l.SHOP_TRIGGER_ID.Hero]=this.checkHero,this.checkMethods[l.SHOP_TRIGGER_ID.Pass]=this.checkPass,this.checkMethods[l.SHOP_TRIGGER_ID.Interval]=this.checkInterval,this.load()},t.prototype.saveData=function(){var e={};myGlobalThis.each(this.datas,function(t,n){var o=myGlobalThis.parseInt(n);e[o]={id:t.id,openDate:t.openDate,payList:t.payList,status:t.status,adCnt:t.adCnt}}),m.default.instance.saveUserShopData(e)},t.prototype.load=function(){var e=this,t=!1;this.datas={},myGlobalThis.isEmpty(this.userShopData)||myGlobalThis.each(this.userShopData,function(n){var o=n.id,i=n.status,r=n.payList,a=n.openDate,l=n.adCnt,c=e.get(o);c&&(i==s.Close?e.checkShopEnable(c)&&(i=s.Open,a=e.calcOpenDate(c),t=!0):e.checkShopEnable(c)||(i=s.Close,t=!0)),a=parseInt(a);var u=e.createData(o,a,l,i);u.payList=r,e.datas[o]=u});var o=this.cfg;myGlobalThis.each(o,function(n){if(!e.datas[n.id]){var o=s.Close,i=d.default.GetNowTime();e.checkShopEnable(n)&&(o=s.Open);var r=e.createData(n.id,i,0,o);e.datas[n.id]=r,t=!0}});var i=d.default.GetNowTime(),r=d.default.getNowMoment().weekday(1).startOf("days").add(8,"hour").valueOf();if(this.weekOpenMoment<=0)this.weekOpenMoment=r;else if(i<this.weekOpenMoment||Math.abs(this.weekOpenMoment-i)>=1e3*n.WEEK_SECONDS){this.weekOpenMoment=r;var a=this.getTypes(l.SHOP_TYPE.Weekly);myGlobalThis.each(a,function(t){e.getData(t.id).openDate=e.weekOpenMoment}),t=!0}var c=d.default.getNowMoment().subtract(8,"hours").startOf("days").add(8,"hour").valueOf();this.dailyOpenMoment<=0?this.dailyOpenMoment=c:i-this.dailyOpenMoment>=1e3*n.DAY_SECONDS&&(this.dailyOpenMoment=c,a=this.getTypes(l.SHOP_TYPE.Daily),myGlobalThis.each(a,function(t){e.getData(t.id).openDate=e.dailyOpenMoment}),t=!0),t&&this.saveData()},t.prototype.fixedUpdate=function(e){this._time+=e,this._time>=1&&(this._fixedUpdate(),this._time=0)},t.prototype._fixedUpdate=function(){var e=this,t=!1;myGlobalThis.each(this.datas,function(n){var o=e.get(n.id);n.status==s.Close?e.checkShopEnable(o)&&(n.status=s.Open,n.openDate=d.default.GetNowTime(),t=!0):e.checkShopEnable(o)||(n.status=s.Close,t=!0)});var o=d.default.GetNowTime();if(o-d.default.getNowMoment().weekday(1).startOf("days").add(8,"hour").valueOf()>=1e3*n.WEEK_SECONDS){this.weekOpenMoment=o;var i=this.getTypes(l.SHOP_TYPE.Weekly);myGlobalThis.each(i,function(t){e.getData(t.id).openDate=e.weekOpenMoment}),t=!0,u.EventMgr.event(l.GlobalEvent.ShopWeekRefresh)}o-this.dailyOpenMoment>=1e3*n.DAY_SECONDS&&(this.dailyOpenMoment=d.default.getMoment(o).subtract(8,"hours").startOf("days").add(8,"hour").valueOf(),i=this.getTypes(l.SHOP_TYPE.Daily),myGlobalThis.each(i,function(t){e.getData(t.id).openDate=e.dailyOpenMoment}),t=!0,u.EventMgr.event(l.GlobalEvent.ShopDailyefresh)),t&&this.saveData()},t.prototype.calcOpenDate=function(e){for(var t=e.trigger,o=this.getData(e.id),i=d.default.getNowMoment().subtract(8,"hours").startOf("days").add(8,"hour").valueOf(),r=0;r<t.length;r++){var a=t[r];switch(a.type){case l.SHOP_TRIGGER_ID.Interval:if(o){var s=d.default.getMoment(o.openDate),c=d.default.getMoment(i),u=c.diff(s,"days")%Number(a.value);return c.subtract(u,"days")}return i;case l.SHOP_TRIGGER_ID.StartDate:return parseInt(a.value)+8e3*n.DAY_SECONDS}}return i},t.prototype.createData=function(e,t,n,o){return n||(n=0),o||(o=s.Open),{id:e,payList:[],openDate:t,status:o,adCnt:n}},t.prototype.sendReward=function(e){var t=this.get(e),n=t.goods,o=t.firstDouble,i=this.getData(e);myGlobalThis.isNil(i)&&(i=this.datas[e]=this.createData(e,d.default.GetNowTime()));var r=this.getCyclePayCount(t),a=o&&0==r,s=[];myGlobalThis.each(n,function(e){var t=e.count;a&&(t*=2),s.push({id:e.id,count:t}),f.default.Instance.addItem(e.id,t)}),p.default.open(s);var c=d.default.GetNowTime(),h=myGlobalThis.get(i,"payList",[]);return h.push(c),myGlobalThis.set(i,"payList",h),u.EventMgr.event(l.GlobalEvent.ShopPurchaseSuccess,e,a),u.EventMgr.event(l.GlobalEvent.ShopPurchaseSuccess+e,a),this.saveData(),s},t.prototype.checkLevel=function(e){return y.default.Instance.totalLevel>=e},t.prototype.checkLogin=function(){return!0},t.prototype.checkStartDate=function(e){var t=parseInt(e)+8e3*n.DAY_SECONDS;return d.default.GetNowTime()>=t},t.prototype.checkCloseDate=function(e){var t=parseInt(e)+8e3*n.DAY_SECONDS;return d.default.GetNowTime()<t},t.prototype.checkPayLower=function(e){return this.payTotal>=e},t.prototype.checkPayUpper=function(e){return this.payTotal<=e},t.prototype.checkSys=function(){return!0},t.prototype.checkHero=function(e){var t=y.default.Instance.getData(e);return Boolean(t)&&t.level>0},t.prototype.checkPass=function(){return!1},t.prototype.checkInterval=function(){return!0},t.prototype.checkShopEnable=function(e){var t=this,o=e.trigger,i=e.duration;if(0==o.length)return!0;if(!myGlobalThis.every(o,function(n){var o=n.type,i=n.value,r=t.checkMethods[o];return r&&r.call(t,i,e)}))return!1;var r=this.getData(e.id);return!(i>0)||parseInt(r.openDate)+8e3*n.DAY_SECONDS>=d.default.GetNowTime()},t.prototype.checkLimitEnable=function(e){var t;t="number"==typeof e?this.get(e):e=e.id;var n=this.getData(e);if(!n)return!0;var o=t.limitCycle,i=t.limitCnt;if(o==l.CYCLE_TYPE.None||0==i)return!0;switch(o){case l.CYCLE_TYPE.Daily:var r=d.default.getNowMoment().subtract(8,"hours").startOf("days").add(8,"hour").valueOf();return myGlobalThis.reduce(n.payList,function(e,t){var n=parseInt(t);return n>=r&&e.push(n),e},[]).length<i;case l.CYCLE_TYPE.Weekly:case l.CYCLE_TYPE.Month:var a=n.openDate;return myGlobalThis.reduce(n.payList,function(e,t){var n=parseInt(t);return n>=a&&e.push(n),e},[]).length<i;case l.CYCLE_TYPE.Forever:return n.payList.length<i}return!0},t.prototype.getCyclePayCount=function(e){var t;t="number"==typeof e?this.get(e):e=e.id;var n=this.getData(e);if(!n)return 0;switch(t.limitCycle){case l.CYCLE_TYPE.Daily:var o=d.default.getNowMoment().subtract(8,"hours").startOf("days").add(8,"hour").valueOf();return myGlobalThis.reduce(n.payList,function(e,t){var n=parseInt(t);return n>=o&&e.push(n),e},[]).length;case l.CYCLE_TYPE.Weekly:case l.CYCLE_TYPE.Month:var i=n.openDate;return myGlobalThis.reduce(n.payList,function(e,t){var n=parseInt(t);return n>=i&&e.push(n),e},[]).length}return n.payList.length},t.prototype.requestBuy=function(e,t){return r(this,void 0,void 0,function(){var n;return a(this,function(){return n=this,[2,new Promise(function(o){var i=n.get(e),r=i.currency,a=i.price,c=n.getData(e);if(c.status!=s.Close&&n.checkLimitEnable(e))if(0==a)n.sendReward(e,t),o(!0);else if(r==l.ASSET_TYPE.Ad)return void h.default.instance.showVideo(function(){c.adCnt++,c.adCnt>=i.price&&(c.adCnt-=i.price,n.sendReward(e,t)),n.saveData(),o(!0)},function(){o(!1)});o(!1)})]})})},t.prototype.getData=function(e){return this.datas[e]},t.prototype.getFreeEnable=function(){var e=this.getData(n.SHOP_FREE_ID);return myGlobalThis.isNil(e)||this.checkLimitEnable(n.SHOP_FREE_ID)},t.prototype.getVideoPageEnable=function(){return this.getEnable(l.SHOP_TYPE.Daily)||this.getEnable(l.SHOP_TYPE.Weekly)},t.prototype.getEnable=function(e){var n=this.getTypes(e);if(myGlobalThis.isEmpty(n))return!1;var o=this,i=!1;return myGlobalThis.each(n,function(e){var n=o.get(e.id);if(n.limitCnt>t.Instance.getCyclePayCount(n.id))return i=!0,!0}),i},t.prototype.reqBuy=function(){return new Promise(function(e){e(!0)})},t}(g.default);n.default=v,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimerHelper":"TimerHelper","../../Platform/Platform":"Platform","../CommonUI/UIAssetReceiveView":"UIAssetReceiveView","./AssetsMgr":"AssetsMgr","./Hero/HeroMgr":"HeroMgr"}],MgrSummon:[function(e,t,n){"use strict";cc._RF.push(t,"ad7ebH4QsBB8Zq4bnAIPsCs","MgrSummon");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.SUMMON_AD_INTERVAL=n.SUMMON_AD_DAILY_COUNT=n.SUMMON_AD_LIMIT=n.SUMMON_AD_INITIAL=n.SUMMON_LVUP_COUNTS=void 0;var r=e("../../Config/EnumTypes"),a=e("../../Config/GameData"),s=e("../../Config/ShopSummonStorageInfo"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/RandomHelper"),u=e("../../Mgr/StorageMgr"),d=e("../../Mgr/TimerHelper"),h=e("../../Platform/Platform"),p=e("../Main_PanelOpen"),f=e("../../Mgr/BaseMgr"),g=e("./EquipmentMgr"),y=e("./PartnerMgr"),m=e("./SkillMgr"),v=e("../../Mgr/TimeMgr"),_=e("./AssetsMgr"),b=e("./Unlock/MgrUnlock");n.SUMMON_LVUP_COUNTS=[35,70,105,210,420,840,4e3,8e3,2e4],n.SUMMON_AD_INITIAL=11,n.SUMMON_AD_LIMIT=35,n.SUMMON_AD_DAILY_COUNT=3,n.SUMMON_AD_INTERVAL=8;var S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.diamondSummonCount={},t.summonMethods={},t.summonWidgetInfo=[],t.summonWidgetMap=new Map,t.summonWidgetMaxLevel=-1,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"summonAdDate",{get:function(){return u.default.instance.storageData.summonAdDate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"summonLvs",{get:function(){return u.default.instance.storageData.summonLevels},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;this.summonWidgetInfo=[],this.summonWidgetMap.clear();var o=a.default.getJsonObject("summonWidget");for(var i in o){var r=o[i];for(var s in r){var l=r[s];l.widgets=myGlobalThis.values(r[s]),l.widgets.splice(0,1),this.summonWidgetInfo.push(l),this.summonWidgetMap.set(l.id,l),this.summonWidgetMaxLevel<l.id+1&&(this.summonWidgetMaxLevel=l.id+1)}}this.initData()},t.prototype.get=function(e){var t=this.summonWidgetInfo.find(function(t){return t.id==e-1});return null==t?void 0:t.widgets},t.prototype.initData=function(){this.summonMethods[r.eSUMMONTYPE.Skill]=this.summonSkill,this.summonMethods[r.eSUMMONTYPE.Partner]=this.summonPartner,this.summonMethods[r.eSUMMONTYPE.Gear]=this.summonGear,this.summonMethods[r.eSUMMONTYPE.Weapon]=this.summonWeapon,this.summonMethods[r.eSUMMONTYPE.Armor]=this.summonArmor,this.diamondSummonCount[r.eShopSummonPrice.SUMMON_PRICE_NORMAL]=11,this.diamondSummonCount[r.eShopSummonPrice.SUMMON_PRICE_FULL]=35,myGlobalThis.isEmpty(this.summonLvs)&&(this.summonLvs[r.eSUMMONTYPE.Skill]=new s.default,this.summonLvs[r.eSUMMONTYPE.Gear]=new s.default,this.summonLvs[r.eSUMMONTYPE.Partner]=new s.default),this.saveSummonLv(),myGlobalThis.isEmpty(this.summonAdDate)&&(this.summonAdDate[r.eSUMMONTYPE.Gear]={last:-1,dayCnts:{},total:0},this.summonAdDate[r.eSUMMONTYPE.Skill]={last:-1,dayCnts:{},total:0},this.summonAdDate[r.eSUMMONTYPE.Partner]={last:-1,dayCnts:{},total:0}),this.saveAd()},t.prototype.getSummonWidgetInfo=function(e){return this.summonWidgetMap.get(e)},t.prototype.getSummonWidgetValue=function(e){return this.summonWidgetMap.get(e).widgets},t.prototype.getSummonWidgetMaxLevel=function(){return this.summonWidgetMaxLevel},t.prototype.getLvData=function(e){var t=e==r.eSUMMONTYPE.Weapon||e==r.eSUMMONTYPE.Armor?r.eSUMMONTYPE.Gear:e;return this.summonLvs[t]},t.prototype.addExp=function(e,t){var o=this.getLvData(e);o.total+=t;var i=0;if(o.level<=n.SUMMON_LVUP_COUNTS.length){o.count+=t;var a=n.SUMMON_LVUP_COUNTS[o.level-1];o.count>=a&&(o.level++,i++,o.level<=n.SUMMON_LVUP_COUNTS.length?o.count-=a:o.count=a)}return this.saveSummonLv(),l.EventMgr.event(r.EventType.Main_UI_Shop_SummonExpChange,e),i>0&&l.EventMgr.event(r.EventType.Main_UI_Shop_SummonLevelChange,e),i},t.prototype.diamondSummon=function(e,t){switch(e){case r.eSUMMONTYPE.Gear:if(!b.default.Instance.isUnlock(r.UnlockType.summonGear))return void h.default.instance.showToast("\u7ee7\u7eed\u5b8c\u6210\u4e3b\u7ebf\u4efb\u52a1\u89e3\u9501");break;case r.eSUMMONTYPE.Skill:if(!b.default.Instance.isUnlock(r.UnlockType.skill))return void h.default.instance.showToast("\u7ee7\u7eed\u5b8c\u6210\u4e3b\u7ebf\u4efb\u52a1\u89e3\u9501");break;case r.eSUMMONTYPE.Partner:if(!b.default.Instance.isUnlock(r.UnlockType.partner))return void h.default.instance.showToast("\u7ee7\u7eed\u5b8c\u6210\u4e3b\u7ebf\u4efb\u52a1\u89e3\u9501")}if(u.default.instance.storageData.diamond<t)h.default.instance.showToast("\u94bb\u77f3\u4e0d\u8db3");else{var n=this.diamondSummonCount[t]||0;n<=0?console.error("summon price error:",e):(u.default.instance.reduceDiamond(t),this.summon(e,n))}},t.prototype.summon=function(e,t){var n=this.getLvData(e),o=this.doSummon(e,this.get(n.level),t);switch(this.addExp(e,t),e){case r.eSUMMONTYPE.Gear:case r.eSUMMONTYPE.Weapon:case r.eSUMMONTYPE.Armor:l.EventMgr.event(r.GlobalEvent.QuestBatchCommit,r.QUEST_ACTIVE_ID.SummonGear,t,n.total);break;case r.eSUMMONTYPE.Partner:l.EventMgr.event(r.GlobalEvent.QuestBatchCommit,r.QUEST_ACTIVE_ID.SummonPartner,t,n.total);break;case r.eSUMMONTYPE.Skill:l.EventMgr.event(r.GlobalEvent.QuestBatchCommit,r.QUEST_ACTIVE_ID.SummonSkill,t,n.total)}l.EventMgr.event(r.GlobalEvent.QuestBatchCommit,r.QUEST_ACTIVE_ID.Summon,t),l.EventMgr.event(r.GlobalEvent.SummonSuccess,e),p.default.showShopSummonWindow({type:e,results:o})},t.prototype.doSummon=function(e,t,n){for(var o,i=[],a=0;a<n;a++){o=c.default.getRandIndex(t)+1;var s=this.summonMethods[e];i.push(s.call(this,o))}var l=[];switch(e){case r.eSUMMONTYPE.Gear:case r.eSUMMONTYPE.Weapon:case r.eSUMMONTYPE.Armor:myGlobalThis.each(i,function(e){var t=g.default.Instance.isNew(e);l.push({id:e,isNew:t}),g.default.Instance.addEquipment(e,1)});break;case r.eSUMMONTYPE.Partner:myGlobalThis.each(i,function(e){var t=y.default.Instance.isNew(e);l.push({id:e,isNew:t}),y.default.Instance.addPartnerItem(e,1)});break;case r.eSUMMONTYPE.Skill:myGlobalThis.each(i,function(e){var t=m.default.Instance.isNew(e);l.push({id:e,isNew:t}),m.default.Instance.addSkillItem(e,1)})}return l},t.prototype.adSummon=function(e){var t=this;switch(e){case r.eSUMMONTYPE.Gear:if(!b.default.Instance.isUnlock(r.UnlockType.summonGear))return void h.default.instance.showToast("\u7ee7\u7eed\u5b8c\u6210\u4e3b\u7ebf\u4efb\u52a1\u89e3\u9501");break;case r.eSUMMONTYPE.Skill:if(!b.default.Instance.isUnlock(r.UnlockType.skill))return void h.default.instance.showToast("\u7ee7\u7eed\u5b8c\u6210\u4e3b\u7ebf\u4efb\u52a1\u89e3\u9501");break;case r.eSUMMONTYPE.Partner:if(!b.default.Instance.isUnlock(r.UnlockType.partner))return void h.default.instance.showToast("\u7ee7\u7eed\u5b8c\u6210\u4e3b\u7ebf\u4efb\u52a1\u89e3\u9501")}h.default.instance.showVideo(function(){var n=t.getAdData(e),o=t.calcAdSummonCnt(e),i=globalThisMoment(d.default.GetNowTime()).subtract(8,"hours").startOf("days").add(8,"hours"),r=myGlobalThis.get(n.dayCnts,i.valueOf(),0);myGlobalThis.set(n,"last",d.default.GetNowTime()),myGlobalThis.set(n.dayCnts,i.valueOf(),r+1);var a=myGlobalThis.get(n,"total",0);myGlobalThis.set(n,"total",a+1),t.summon(e,o),t.saveAd(),t.judeTrackEvent(e)},null)},t.prototype.judeTrackEvent=function(e){switch(e){case r.eSUMMONTYPE.Gear:a.default.trackEvent(a.TrackEventKey.key["\u53ec\u5524\u88c5\u5907\u5e7f\u544a"]);break;case r.eSUMMONTYPE.Skill:a.default.trackEvent(a.TrackEventKey.key["\u53ec\u5524\u6280\u80fd\u5e7f\u544a"]);break;case r.eSUMMONTYPE.Partner:a.default.trackEvent(a.TrackEventKey.key["\u53ec\u5524\u5ba0\u7269\u5e7f\u544a"])}},t.prototype.saveAd=function(){u.default.instance.saveSummonAdData()},t.prototype.saveSummonLv=function(){u.default.instance.saveSummonLevel()},t.prototype.summonSkill=function(e){var t=m.default.Instance.getQualitySkills(e);if(!(t.length<=0))return t[Math.floor(Math.random()*myGlobalThis.keys(t).length)].id;console.error("\u672a\u627e\u5230\u5bf9\u5e94\u54c1\u8d28\u7684\u6280\u80fd\u7269\u54c1\uff1aquality:"+e)},t.prototype.summonGear=function(e){var t=g.default.Instance.getQualityGears(e);if(!(t.length<=0))return c.default.getElementByWeight(t,function(e){return e.rate}).id;a.default.isTest&&console.log("\u672a\u627e\u5230\u5bf9\u5e94\u54c1\u8d28\u7684\u88c5\u5907\u7269\u54c1\uff1aquality:"+e)},t.prototype.summonWeapon=function(e){var t=g.default.Instance.getGearsWithQuality(r.EquipmentType.Weapon,e);if(!(t.length<=0))return c.default.getElementByWeight(t,function(e){return e.rate}).id;a.default.isTest&&console.log("\u672a\u627e\u5230\u5bf9\u5e94\u54c1\u8d28\u7684\u6b66\u5668\u7269\u54c1\uff1aquality:"+e)},t.prototype.summonArmor=function(e){var t=g.default.Instance.getGearsWithQuality(r.EquipmentType.Armor,e);if(!(t.length<=0))return c.default.getElementByWeight(t,function(e){return e.rate}).id;a.default.isTest&&console.log("\u672a\u627e\u5230\u5bf9\u5e94\u54c1\u8d28\u7684\u9632\u5177\u7269\u54c1\uff1aquality:"+e)},t.prototype.summonPartner=function(e){var t=y.default.Instance.getQualityPartners(e);if(!(t.length<=0))return c.default.getElementByWeight(t,function(e){return e.rate}).id;a.default.isTest&&console.log("\u672a\u627e\u5230\u5bf9\u5e94\u54c1\u8d28\u7684\u4f19\u4f34\u7269\u54c1\uff1aquality:"+e)},t.prototype.getAdData=function(e){return e==r.eSUMMONTYPE.Weapon||e==r.eSUMMONTYPE.Armor?this.summonAdDate[r.eSUMMONTYPE.Gear]:this.summonAdDate[e]},t.prototype.getAdCount=function(e){e!=r.eSUMMONTYPE.Weapon&&e!=r.eSUMMONTYPE.Armor||(e=r.eSUMMONTYPE.Gear);var t=globalThisMoment(d.default.GetNowTime()).subtract(8,"hours").startOf("days").add(8,"hours").valueOf(),o=this.getAdData(e),i=myGlobalThis.get(o.dayCnts,t,0);return n.SUMMON_AD_DAILY_COUNT-i},t.prototype.getAdCd=function(e){e!=r.eSUMMONTYPE.Weapon&&e!=r.eSUMMONTYPE.Armor||(e=r.eSUMMONTYPE.Gear);var t=this.getAdData(e).last;if(t=globalThisMoment(d.default.getNewDate(t))){var o=globalThisMoment(d.default.GetNowTime()).subtract(8,"hours").startOf("days").add(8,"hours").format();if(t.isBefore(o))return 0;var i=globalThisMoment(d.default.GetNowTime());return 60*n.SUMMON_AD_INTERVAL-i.diff(t,"seconds")}return 0},t.prototype.calcAdSummonCnt=function(e){e!=r.eSUMMONTYPE.Weapon&&e!=r.eSUMMONTYPE.Armor||(e=r.eSUMMONTYPE.Gear);var t=this.getAdData(e),o=myGlobalThis.get(t,"total",0),i=n.SUMMON_AD_INITIAL+o;return Math.min(n.SUMMON_AD_LIMIT,i)},t.prototype.randomSummon=function(e){var t={},n={},o=[];t[r.QUEST_ACTIVE_ID.SummonGear]={count:0,total:0},t[r.QUEST_ACTIVE_ID.SummonPartner]={count:0,total:0},t[r.QUEST_ACTIVE_ID.SummonSkill]={count:0,total:0},n[r.eSUMMONTYPE.Weapon]=!1,n[r.eSUMMONTYPE.Armor]=!1,n[r.eSUMMONTYPE.Partner]=!1,n[r.eSUMMONTYPE.Skill]=!1;for(var i=0;i<e;i++){var a=c.default.getElementByWeight([r.eSUMMONTYPE.Weapon,r.eSUMMONTYPE.Armor,r.eSUMMONTYPE.Partner,r.eSUMMONTYPE.Skill],function(){return 10},40),s=this.getLvData(a),u=this.get(s.level),d=c.default.getRandIndex(u)+1,h=this.summonMethods[a];h||console.error("Can't find method, type '"+a+"'");var p=h.call(this,d);switch(this.addExp(a,1)>0&&(n[a]=!0),a){case r.eSUMMONTYPE.Gear:case r.eSUMMONTYPE.Weapon:case r.eSUMMONTYPE.Armor:t[r.QUEST_ACTIVE_ID.SummonGear].count++,t[r.QUEST_ACTIVE_ID.SummonGear].total=s.total;break;case r.eSUMMONTYPE.Partner:t[r.QUEST_ACTIVE_ID.SummonPartner].count++,t[r.QUEST_ACTIVE_ID.SummonPartner].total=s.total;break;case r.eSUMMONTYPE.Skill:t[r.QUEST_ACTIVE_ID.SummonSkill].count++,t[r.QUEST_ACTIVE_ID.SummonSkill].total=s.total}o.push({type:a,id:p})}return v.default.instance.scheduleOnce(function(){myGlobalThis.each(n,function(e,t){var n=myGlobalThis.parseInt(t);e?l.EventMgr.event(r.GlobalEvent.SummonLevelChange,n):l.EventMgr.event(r.GlobalEvent.SummonExpChange,n)}),myGlobalThis.each(t,function(e,t){var n=e.count,o=e.total;if(n>0){var i=myGlobalThis.parseInt(t);l.EventMgr.event(r.GlobalEvent.QuestCommit,i,o)}});var i={};myGlobalThis.each(o,function(e){var t=e.type,n=e.id;i[n]=i[n]?i[n]+1:1,l.EventMgr.event(r.GlobalEvent.SummonSuccess,t)}),myGlobalThis.each(i,function(e,t){var n=myGlobalThis.parseInt(t);_.default.Instance.addItem(n,e,1)}),l.EventMgr.event(r.GlobalEvent.QuestBatchCommit,r.QUEST_ACTIVE_ID.Summon,e)}),o},t.prototype.freeSummonEnable=function(){var e=0;return b.default.Instance.isUnlock(r.UnlockType.skill)&&t.Instance.getAdCd(r.eSUMMONTYPE.Skill)<=0&&(e+=t.Instance.getAdCount(r.eSUMMONTYPE.Skill)),b.default.Instance.isUnlock(r.UnlockType.summonGear)&&t.Instance.getAdCd(r.eSUMMONTYPE.Gear)<=0&&(e+=t.Instance.getAdCount(r.eSUMMONTYPE.Gear)),b.default.Instance.isUnlock(r.UnlockType.partner)&&t.Instance.getAdCd(r.eSUMMONTYPE.Partner)<=0&&(e+=t.Instance.getAdCount(r.eSUMMONTYPE.Partner)),e>0},t}(f.default);n.default=S,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Config/ShopSummonStorageInfo":"ShopSummonStorageInfo","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/RandomHelper":"RandomHelper","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Mgr/TimerHelper":"TimerHelper","../../Platform/Platform":"Platform","../Main_PanelOpen":"Main_PanelOpen","./AssetsMgr":"AssetsMgr","./EquipmentMgr":"EquipmentMgr","./PartnerMgr":"PartnerMgr","./SkillMgr":"SkillMgr","./Unlock/MgrUnlock":"MgrUnlock"}],MgrUnlock:[function(e,t,n){"use strict";cc._RF.push(t,"5904bU+dYNNOKezm1ZPqc4q","MgrUnlock");var o,i,r,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.UnCorrespondence=n.Correspondence=void 0;var l=e("../../../Config/EnumTypes"),c=e("../../../Config/GameData"),u=e("../../../Mgr/EventMgr"),d=e("../../../Mgr/StorageMgr"),h=e("../../UnlockTip/UnlockTipMgr"),p=e("../GuideCore/GuideMgr"),f=cc._decorator,g=f.ccclass;f.property,n.Correspondence=((i={})[l.UnlockType.mine]=l.UNLOCKSYS_ID.Mine,i[l.UnlockType.bossRush]=l.UNLOCKSYS_ID.BossRush,i[l.UnlockType.goldRush]=l.UNLOCKSYS_ID.GoldRush,i[l.UnlockType.clearRush]=l.UNLOCKSYS_ID.Relices,i[l.UnlockType.Trait]=l.UNLOCKSYS_ID.Trait,i[l.UnlockType.HeroRush]=l.UNLOCKSYS_ID.HeroRush,i[l.UnlockType.shop]=l.UNLOCKSYS_ID.Shop,i[l.UnlockType.summonGear]=l.UNLOCKSYS_ID.Equip,i[l.UnlockType.partner]=l.UNLOCKSYS_ID.Partner,i[l.UnlockType.partnerSlot2]=l.UNLOCKSYS_ID.PartnerCol2,i[l.UnlockType.partnerSlot3]=l.UNLOCKSYS_ID.PartnerCol3,i[l.UnlockType.partnerSlot4]=l.UNLOCKSYS_ID.PartnerCol4,i[l.UnlockType.partnerSlot5]=l.UNLOCKSYS_ID.PartnerCol5,i[l.UnlockType.skill]=l.UNLOCKSYS_ID.Skill,i[l.UnlockType.skillSlot2]=l.UNLOCKSYS_ID.SkillCol2,i[l.UnlockType.skillSlot3]=l.UNLOCKSYS_ID.SkillCol3,i[l.UnlockType.skillSlot4]=l.UNLOCKSYS_ID.SkillCol4,i[l.UnlockType.skillSlot5]=l.UNLOCKSYS_ID.SkillCol5,i[l.UnlockType.skillSlot6]=l.UNLOCKSYS_ID.SkillCol6,i[l.UnlockType.Hero]=l.UNLOCKSYS_ID.Hero,i[l.UnlockType.Mastery]=l.UNLOCKSYS_ID.Mastery,i[l.UnlockType.collection]=l.UNLOCKSYS_ID.Atlas,i[l.UnlockType.roulette]=l.UNLOCKSYS_ID.Wheel,i[l.UnlockType.sign]=l.UNLOCKSYS_ID.Sign,i[l.UnlockType.Pass]=l.UNLOCKSYS_ID.Pass,i[l.UnlockType.dailyQuest]=l.UNLOCKSYS_ID.Task,i[l.UnlockType.placeChest]=l.UNLOCKSYS_ID.Hangup,i[l.UnlockType.bless]=l.UNLOCKSYS_ID.Bless,i[l.UnlockType.FlyChest]=l.UNLOCKSYS_ID.FlyChest,i[l.UnlockType.DoubleShotAtribute]=l.UNLOCKSYS_ID.DoubleShotAtribute,i[l.UnlockType.TripleShotAtribute]=l.UNLOCKSYS_ID.TripleShotAtribute,i[l.UnlockType.SevenChallenge]=l.UNLOCKSYS_ID.SevenChallenge,i),n.UnCorrespondence=((r={})[l.UNLOCKSYS_ID.None]=l.UnlockType.None,r[l.UNLOCKSYS_ID.Mine]=l.UnlockType.mine,r[l.UNLOCKSYS_ID.BossRush]=l.UnlockType.bossRush,r[l.UNLOCKSYS_ID.GoldRush]=l.UnlockType.goldRush,r[l.UNLOCKSYS_ID.Relices]=l.UnlockType.clearRush,r[l.UNLOCKSYS_ID.Trait]=l.UnlockType.Trait,r[l.UNLOCKSYS_ID.HeroRush]=l.UnlockType.HeroRush,r[l.UNLOCKSYS_ID.Shop]=l.UnlockType.shop,r[l.UNLOCKSYS_ID.Equip]=l.UnlockType.summonGear,r[l.UNLOCKSYS_ID.Partner]=l.UnlockType.partner,r[l.UNLOCKSYS_ID.PartnerCol2]=l.UnlockType.partnerSlot2,r[l.UNLOCKSYS_ID.PartnerCol3]=l.UnlockType.partnerSlot3,r[l.UNLOCKSYS_ID.PartnerCol4]=l.UnlockType.partnerSlot4,r[l.UNLOCKSYS_ID.PartnerCol5]=l.UnlockType.partnerSlot5,r[l.UNLOCKSYS_ID.Skill]=l.UnlockType.skill,r[l.UNLOCKSYS_ID.SkillCol2]=l.UnlockType.skillSlot2,r[l.UNLOCKSYS_ID.SkillCol3]=l.UnlockType.skillSlot3,r[l.UNLOCKSYS_ID.SkillCol4]=l.UnlockType.skillSlot4,r[l.UNLOCKSYS_ID.SkillCol5]=l.UnlockType.skillSlot5,r[l.UNLOCKSYS_ID.SkillCol6]=l.UnlockType.skillSlot6,r[l.UNLOCKSYS_ID.Hero]=l.UnlockType.Hero,r[l.UNLOCKSYS_ID.Mastery]=l.UnlockType.Mastery,r[l.UNLOCKSYS_ID.Atlas]=l.UnlockType.collection,r[l.UNLOCKSYS_ID.Wheel]=l.UnlockType.roulette,r[l.UNLOCKSYS_ID.Sign]=l.UnlockType.sign,r[l.UNLOCKSYS_ID.Pass]=l.UnlockType.Pass,r[l.UNLOCKSYS_ID.Task]=l.UnlockType.dailyQuest,r[l.UNLOCKSYS_ID.Hangup]=l.UnlockType.placeChest,r[l.UNLOCKSYS_ID.Bless]=l.UnlockType.bless,r[l.UNLOCKSYS_ID.FlyChest]=l.UnlockType.FlyChest,r[l.UNLOCKSYS_ID.DoubleShotAtribute]=l.UnlockType.DoubleShotAtribute,r[l.UNLOCKSYS_ID.TripleShotAtribute]=l.UnlockType.TripleShotAtribute,r[l.UNLOCKSYS_ID.SevenChallenge]=l.UnlockType.SevenChallenge,r);var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return a(t,e),o=t,Object.defineProperty(t,"Instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){o._instance=this,u.EventMgr.on(l.GlobalEvent.UnlockValueChange,this.onLockChange,this)},t.prototype.judeQuestTrackEvent=function(e){switch(c.default.isTest&&console.log("\u4efb\u52a1ID:",e),e){case 20001:c.default.trackEvent(c.TrackEventKey.key["\u5f15\u5bfc\u4efb\u52a11\u5b8c\u6210"]);break;case 20002:c.default.trackEvent(c.TrackEventKey.key["\u5f15\u5bfc\u5f3a\u5316\u653b\u51fb"]),c.default.trackEvent(c.TrackEventKey.key["\u5f15\u5bfc\u5f3a\u5316\u653b\u51fb\u4efb\u52a12\u5b8c\u6210"]);break;case 20003:c.default.trackEvent(c.TrackEventKey.key["\u5f15\u5bfc\u5f3a\u5316\u751f\u547d"]),c.default.trackEvent(c.TrackEventKey.key["\u5f15\u5bfc\u5f3a\u5316\u751f\u547d\u4efb\u52a13\u5b8c\u6210"]);break;case 20004:c.default.trackEvent(c.TrackEventKey.key["\u5f15\u5bfc\u901a\u51731-1\u4efb\u52a14\u5b8c\u6210"]);break;case 20005:c.default.trackEvent(c.TrackEventKey.key["\u5f15\u5bfc\u53ec\u5524\u88c5\u5907"]),c.default.trackEvent(c.TrackEventKey.key["\u5f15\u5bfc\u53ec\u5524\u88c5\u5907\u4efb\u52a15\u5b8c\u6210"])}},t.prototype.isUnlock=function(e){return d.default.instance.storageData.unlockPart.indexOf(e)>=0},t.prototype.getMsgByType=function(e){var t="";switch(e){case l.UNLOCKSYS_ID.Mine:t=l.GlobalEvent.UnlockMine;break;case l.UNLOCKSYS_ID.BossRush:t=l.GlobalEvent.UnlockBossRush;break;case l.UNLOCKSYS_ID.GoldRush:t=l.GlobalEvent.UnlockGoldRush;break;case l.UNLOCKSYS_ID.Relices:t=l.GlobalEvent.UnlockDrop;break;case l.UNLOCKSYS_ID.Trait:t=l.GlobalEvent.UnlockFeatures;break;case l.UNLOCKSYS_ID.HeroRush:t=l.GlobalEvent.UnlockHeroRush;break;case l.UNLOCKSYS_ID.Shop:t=l.GlobalEvent.UnlockShop;break;case l.UNLOCKSYS_ID.Equip:t=l.GlobalEvent.UnlockEquip;break;case l.UNLOCKSYS_ID.Partner:t=l.GlobalEvent.UnlockPartner;break;case l.UNLOCKSYS_ID.PartnerCol2:t=l.GlobalEvent.UnlockPartnerCol2;break;case l.UNLOCKSYS_ID.PartnerCol3:t=l.GlobalEvent.UnlockPartnerCol3;break;case l.UNLOCKSYS_ID.PartnerCol4:t=l.GlobalEvent.UnlockPartnerCol4;break;case l.UNLOCKSYS_ID.PartnerCol5:t=l.GlobalEvent.UnlockPartnerCol5;break;case l.UNLOCKSYS_ID.Skill:t=l.GlobalEvent.UnlockSkill;break;case l.UNLOCKSYS_ID.SkillCol2:t=l.GlobalEvent.UnlockSkillCol2;break;case l.UNLOCKSYS_ID.SkillCol3:t=l.GlobalEvent.UnlockSkillCol3;break;case l.UNLOCKSYS_ID.SkillCol4:t=l.GlobalEvent.UnlockSkillCol4;break;case l.UNLOCKSYS_ID.SkillCol5:t=l.GlobalEvent.UnlockSkillCol5;break;case l.UNLOCKSYS_ID.SkillCol6:t=l.GlobalEvent.UnlockSkillCol6;break;case l.UNLOCKSYS_ID.Hero:t=l.GlobalEvent.UnlockHero;break;case l.UNLOCKSYS_ID.Relices:t=l.GlobalEvent.UnlockRelices;case l.UNLOCKSYS_ID.Mastery:t=l.GlobalEvent.UnlockMastery;break;case l.UNLOCKSYS_ID.Atlas:t=l.GlobalEvent.UnlockAtlas;break;case l.UNLOCKSYS_ID.Wheel:t=l.GlobalEvent.UnlockWheel;break;case l.UNLOCKSYS_ID.Sign:t=l.GlobalEvent.UnlockSign;break;case l.UNLOCKSYS_ID.Pass:t=l.GlobalEvent.UnlockPass;break;case l.UNLOCKSYS_ID.Task:t=l.GlobalEvent.UnlockTask;break;case l.UNLOCKSYS_ID.Hangup:t=l.GlobalEvent.UnlockHungup;break;case l.UNLOCKSYS_ID.Bless:t=l.GlobalEvent.UnlockBless;break;case l.UNLOCKSYS_ID.FlyChest:t=l.GlobalEvent.UnlockFlyChest;break;case l.UNLOCKSYS_ID.DoubleShotAtribute:t=l.GlobalEvent.UnlockDoubleShotAtribute;break;case l.UNLOCKSYS_ID.TripleShotAtribute:t=l.GlobalEvent.UnlockTripleShotAtribute;break;case l.UNLOCKSYS_ID.SevenChallenge:t=l.GlobalEvent.UnlockSevenChallenge}return t},t.prototype.unlockSlot=function(e){p.default.instance.isCompleteSpecialGuide(e)||(p.default.instance.checkSpecial(e),p.default.instance.completeSpecialGuide(e),p.default.instance.inGuide=!1,u.EventMgr.event(l.GlobalEvent.ShowMask,!1))},t.prototype.onLockChange=function(e,t){var o,i=this;h.default.Instance.getAllUnlockDataByUnlockType(e,t).forEach(function(e){var t=h.default.Instance.get(e);if(o=n.UnCorrespondence[t.type],t&&!i.isUnlock(o)){if(null==o||null==o)return;d.default.instance.unlockPart(o)}})},t._instance=null,t.guideUnlock=null,o=s([g],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../../UnlockTip/UnlockTipMgr":"UnlockTipMgr","../GuideCore/GuideMgr":"GuideMgr"}],MineBtnRedPoint:[function(e,t,n){"use strict";cc._RF.push(t,"3c15bo88SZN9abNacTqs6O7","MineBtnRedPoint");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Config/GameData"),l=e("../../../Mgr/EventMgr"),c=e("../../../Mgr/StorageMgr"),u=e("../../../Mgr/TimeMgr"),d=e("../../../Mine/ResearchMgr"),h=e("../../../Tool/Tool"),p=cc._decorator,f=p.ccclass,g=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._reserachData=null,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this},t.prototype.start=function(){l.EventMgr.on(a.EventType.Research_RedPoint,this.judeShowRedPoint,this),this.scheduleOnce(this.handleJudeP,0)},t.prototype.judeShowRedPoint=function(e){void 0===e&&(e=!1);var t=!1,n=null;for(var o in null==this._reserachData&&(this._reserachData=s.default.getJsonObject("researchTest")),this._reserachData)if(d.default.Instance.isUnlock(parseInt(o)-1)){var i=parseInt(o)-1,r=c.default.instance.storageData.researchData[i];if(r.isLevelUp){(u.default.instance.getNowTime()-r.time)/1e3>=60*r.sumTimeM?t=!0:(n=60*r.sumTimeM-(u.default.instance.getNowTime()-r.time)/1e3,n=Math.ceil(n),t=!1);break}r.level<r.maxLevel&&c.default.instance.storageData.mineCube>=this._reserachData[o][r.level+1].Consume&&(t=!0)}return e||(h.Tool.findNodeByName(this.node,"redpoint").active=t,null!=n&&(this.unschedule(this.handleJudeP),this.scheduleOnce(this.handleJudeP,n))),{hasRed:t,jsTime:n}},t.prototype.handleJudeP=function(){this.judeShowRedPoint(!1)},t.instance=null,n=r([f],t)}(cc.Component));n.default=g,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Mgr/TimeMgr":"TimeMgr","../../../Mine/ResearchMgr":"ResearchMgr","../../../Tool/Tool":"Tool"}],MineItem:[function(e,t,n){"use strict";cc._RF.push(t,"06fcedD1l9CM5ujDreFDWUp","MineItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),s=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),l=e("../../../Bundle1_Loading/Scripts/Mgr/SoundMgr"),c=e("../../../Bundle1_Loading/Scripts/Mgr/StorageMgr"),u=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),d=e("./MineMgr"),h=e("./UIMine"),p=e("../../../Bundle1_Loading/Scripts/Platform/Platform"),f=e("../../../Bundle1_Loading/Scripts/Res/comp/AwardShowComp"),g=e("../../../Bundle1_Loading/Scripts/Res/comp/DiamondComp"),y=e("../Main/Mgr/GuideCore/GuideMgr"),m=e("../Main/Mgr/GuideCore/GuideEnums"),v=e("../Main/Mgr/Hero/HeroMgr"),_=e("../Main/Mgr/Mine/MineBtnRedPoint"),b=e("../Main/Mgr/Unlock/MgrUnlock"),S=cc._decorator,M=S.ccclass,C=S.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isCheck=!1,t.spBg=[],t.spIcon=[],t.highlightsp_r=null,t.highlightsp_g=null,t.mask=null,t.mine_crack=null,t.prg=null,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,function(){h.default.instance.getToogleShovelStatus()&&e.onClick()}),this.node.on(cc.Node.EventType.TOUCH_END,function(){e.handleEnd(),e.cancelHightLight()}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){this.cancelHightLight()},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(){},this),this.bg=this.node.getChildByName("bg").getComponent(cc.Sprite),this.icon=this.node.getChildByName("icon").getComponent(cc.Sprite)},t.prototype.start=function(){},t.prototype.setData=function(e,t,n){this.mineType=e,this.rewardType=t,this.status=n,this.bg.spriteFrame=this.spBg[Number(e)],this.icon.spriteFrame=0!==e?this.spIcon[Number(t)]:this.spIcon[0],this.mask.active=-1===n,this.mine_crack.active=3===this.mineType,this.prg.active=3===this.mineType},t.prototype.onClick=function(){h.default.instance.isUseBoom||h.default.instance.isUseDrill||h.default.instance.getToogleDrillStatus()||h.default.instance.getToogleBommStatus()||(-1===this.status||0===this.mineType&&1===this.status?this.highlightsp_r.active=!0:c.default.instance.storageData.mineHammer<=0||h.default.instance.isMoving||-1===this.status?this.highlightsp_r.active=!0:this.highlightsp_g.active=!0)},t.prototype.handleEnd=function(){l.default.instance.PlaySound(a.SoundType.button);var e,t,o=this.node.parent.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec2.ZERO));if(t=this.node.getParent().parent.getChildByName("line"),e=d.default.Instance.judgeCellIsbelowMineLine(this.node,t),!h.default.instance.isUseBoom&&!h.default.instance.isUseDrill)if(h.default.instance.getToogleDrillStatus()||h.default.instance.getToogleBommStatus())s.EventMgr.event("mineItemClick",o.x,o.y,this.node.getComponent(n),e);else{if(-1===this.status)return this.highlightsp_r.active=!0,void p.default.instance.showToast("\u65e0\u6cd5\u5728\u6697\u5904\u4f7f\u7528");if(0===this.mineType&&1===this.status)return this.highlightsp_r.active=!0,void p.default.instance.showToast("\u65e0\u6cd5\u5728\u7a7a\u767d\u65b9\u683c\u5185\u64cd\u4f5c");if(c.default.instance.storageData.mineHammer<=0||h.default.instance.isMoving||-1===this.status)return this.highlightsp_r.active=!0,void p.default.instance.showToast("\u9550\u5934\u4e0d\u8db3!");this.highlightsp_g.active=!0,c.default.instance.storageData.mineHammer--,c.default.instance.saveMineHammer(c.default.instance.storageData.mineHammer),this.refreshData(),s.EventMgr.event("mineItemClick",o.x,o.y,this.node.getComponent(n),e)}},t.prototype.handleReward=function(e){var t,n,o=this,i=e;if(!(6===e&&c.default.instance.storageData.mineDeepth<50)){switch(e){case 1:t=c.default.instance.storageData.mineDeepth/1e3,n=100+20*Math.floor(t),t=n,u.Tool.getItemEffect(f.default.instance.cubePrefab,n,u.Tool.convertToNodeSpaceAR(h.default.instance.node,this.node),u.Tool.convertToNodeSpaceAR(h.default.instance.node,h.default.instance.cubeIcon.node),h.default.instance.node,function(){c.default.instance.storageData.mineCube+=n,c.default.instance.saveMineCubeCount(c.default.instance.storageData.mineCube),o.checkGuideComplete(a.ASSET_TYPE.MineCube)});break;case 2:i=1,t=c.default.instance.storageData.mineDeepth/1e3,n=50+10*Math.floor(t),t=n,u.Tool.getItemEffect(f.default.instance.cubePrefab,n,u.Tool.convertToNodeSpaceAR(h.default.instance.node,this.node),u.Tool.convertToNodeSpaceAR(h.default.instance.node,h.default.instance.cubeIcon.node),h.default.instance.node,function(){c.default.instance.storageData.mineCube+=n,c.default.instance.saveMineCubeCount(c.default.instance.storageData.mineCube),o.checkGuideComplete(a.ASSET_TYPE.MineCube)});break;case 3:t=d.default.Instance.getRoundPropCount(),u.Tool.getItemEffect(f.default.instance.shovelPrefab,t,u.Tool.convertToNodeSpaceAR(h.default.instance.node,this.node),u.Tool.convertToNodeSpaceAR(h.default.instance.node,h.default.instance.shovelIcon.node),h.default.instance.node,function(){c.default.instance.storageData.mineHammer+=t,c.default.instance.saveMineHammer(c.default.instance.storageData.mineHammer),o.checkGuideComplete(a.ASSET_TYPE.MinePickax)});break;case 4:var r=d.default.Instance.getRandomRewardName(),s=d.default.Instance.getRandomRewardCount(r);t=s;var l=void 0;r===f.default.instance.shovelPrefab?(i=3,l=h.default.instance.shovelIcon.node,this.checkGuideComplete(a.ASSET_TYPE.MinePickax)):r===f.default.instance.boomPrefab?(i=8,l=h.default.instance.boomIcon.node,this.checkGuideComplete(a.ASSET_TYPE.MineBomb)):r===f.default.instance.drillPrefab?(i=7,l=h.default.instance.drillIcon.node,this.checkGuideComplete(a.ASSET_TYPE.MineDrill)):r===f.default.instance.diamondPrefab?(i=5,l=g.default.instance.node,this.checkGuideComplete(a.ASSET_TYPE.Diamond)):r===f.default.instance.equipPrefab?(i=9,l=h.default.instance.equipNode,this.checkGuideComplete(a.ASSET_TYPE.Equip)):r===f.default.instance.cubePrefab&&(i=1,l=h.default.instance.cubeIcon.node,this.checkGuideComplete(a.ASSET_TYPE.MineCube)),u.Tool.getItemEffect(r,s,u.Tool.convertToNodeSpaceAR(h.default.instance.node,this.node),u.Tool.convertToNodeSpaceAR(h.default.instance.node,l),h.default.instance.node);break;case 5:t=c.default.instance.storageData.mineDeepth/500,n=50+10*Math.floor(t),t=n,c.default.instance.addDiamond(n),u.Tool.getItemEffect(f.default.instance.diamondPrefab,n,u.Tool.convertToNodeSpaceAR(h.default.instance.node,this.node),u.Tool.convertToNodeSpaceAR(h.default.instance.node,g.default.instance.node),h.default.instance.node),this.checkGuideComplete(a.ASSET_TYPE.Diamond);break;case 6:t=n=1,c.default.instance.addExp(n),c.default.instance.saveHasDigSlimeExp(),u.Tool.getItemEffect(f.default.instance.expCrystal,n,u.Tool.convertToNodeSpaceAR(h.default.instance.node,this.node),u.Tool.convertToNodeSpaceAR(h.default.instance.node,g.default.instance.node),h.default.instance.node),this.checkGuideComplete(a.ASSET_TYPE.SlimeExp);break;case 7:t=d.default.Instance.getRoundPropCount(),u.Tool.getItemEffect(f.default.instance.drillPrefab,t,u.Tool.convertToNodeSpaceAR(h.default.instance.node,this.node),u.Tool.convertToNodeSpaceAR(h.default.instance.node,h.default.instance.drillIcon.node),h.default.instance.node,function(){c.default.instance.storageData.mineDrill+=t,c.default.instance.saveMineDrill(c.default.instance.storageData.mineDrill),o.checkGuideComplete(a.ASSET_TYPE.MineDrill)});break;case 8:t=d.default.Instance.getRoundPropCount(),u.Tool.getItemEffect(f.default.instance.boomPrefab,t,u.Tool.convertToNodeSpaceAR(h.default.instance.node,this.node),u.Tool.convertToNodeSpaceAR(h.default.instance.node,h.default.instance.boomIcon.node),h.default.instance.node,function(){c.default.instance.storageData.mineBoom+=t,c.default.instance.saveMineBoom(c.default.instance.storageData.mineBoom),o.checkGuideComplete(a.ASSET_TYPE.MineBomb)})}0!=i&&h.default.instance.playCountEffect(t,this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),i)}},t.prototype.checkGuideComplete=function(e){if(e!=a.ASSET_TYPE.MineCube||y.default.instance.isCompleteSpecialGuide(m.SpecialGuideEnum.TouchSearchButton))e==a.ASSET_TYPE.SlimeExp&&b.default.Instance.isUnlock(a.UnlockType.Hero)&&!y.default.instance.isCompleteSpecialGuide(m.SpecialGuideEnum.TouchHeroButton3)&&v.default.Instance.lvupEnableHeros().length>0&&y.default.instance.checkSpecial(m.SpecialGuideEnum.TouchHeroButton3);else if(e==a.ASSET_TYPE.MineCube&&!y.default.instance.isCompleteSpecialGuide(m.SpecialGuideEnum.TouchSearchButton)){var t=_.default.instance.judeShowRedPoint(!0);null==t.jsTime&&t.hasRed&&y.default.instance.checkSpecial(m.SpecialGuideEnum.TouchSearchButton)}},t.prototype.setHightLight=function(){var e=this,t=cc.tween;this.highlightsp_g.active=!0,t(this.highlightsp_g).to(1.5,{opacity:0}).call(function(){e.highlightsp_g.opacity=255,e.highlightsp_g.active=!1}).start()},t.prototype.setHightLightGreen=function(){this.highlightsp_g.active=!0},t.prototype.setHightLightRed=function(){this.highlightsp_r.active=!0},t.prototype.cancelHightLight=function(){this.highlightsp_g.active=!1,this.highlightsp_r.active=!1},t.prototype.refreshData=function(){switch(this.mineType){case 0:this.status;break;case 1:this.handleReward(this.rewardType),this.mineType=0,this.status=1,this.rewardType=0,this.icon.spriteFrame=null,this.setData(this.mineType,this.rewardType,this.status),c.default.instance.storageData.digMineTotalCount++,c.default.instance.saveDigMineTotalCount(c.default.instance.storageData.digMineTotalCount);break;case 2:this.mineType=3,this.status=1,this.rewardType=0,this.setData(this.mineType,this.rewardType,this.status);break;case 3:this.mineType=0,this.status=1,this.rewardType=0,this.setData(this.mineType,this.rewardType,this.status),c.default.instance.storageData.digMineTotalCount++,c.default.instance.saveDigMineTotalCount(c.default.instance.storageData.digMineTotalCount)}},t.prototype.onDestroy=function(){},r([C([cc.SpriteFrame])],t.prototype,"spBg",void 0),r([C([cc.SpriteFrame])],t.prototype,"spIcon",void 0),r([C(cc.Node)],t.prototype,"highlightsp_r",void 0),r([C(cc.Node)],t.prototype,"highlightsp_g",void 0),r([C(cc.Node)],t.prototype,"mask",void 0),r([C(cc.Node)],t.prototype,"mine_crack",void 0),r([C(cc.Node)],t.prototype,"prg",void 0),n=r([M],t)}(cc.Component);n.default=T,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":"EnumTypes","../../../Bundle1_Loading/Scripts/Mgr/EventMgr":"EventMgr","../../../Bundle1_Loading/Scripts/Mgr/SoundMgr":"SoundMgr","../../../Bundle1_Loading/Scripts/Mgr/StorageMgr":"StorageMgr","../../../Bundle1_Loading/Scripts/Platform/Platform":"Platform","../../../Bundle1_Loading/Scripts/Res/comp/AwardShowComp":"AwardShowComp","../../../Bundle1_Loading/Scripts/Res/comp/DiamondComp":"DiamondComp","../../../Bundle1_Loading/Scripts/Tool/Tool":"Tool","../Main/Mgr/GuideCore/GuideEnums":"GuideEnums","../Main/Mgr/GuideCore/GuideMgr":"GuideMgr","../Main/Mgr/Hero/HeroMgr":"HeroMgr","../Main/Mgr/Mine/MineBtnRedPoint":"MineBtnRedPoint","../Main/Mgr/Unlock/MgrUnlock":"MgrUnlock","./MineMgr":"MineMgr","./UIMine":"UIMine"}],MineMgr:[function(e,t,n){"use strict";cc._RF.push(t,"0d1c75sbCRB0bACk+0zq1hB","MineMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),a=e("../../../Bundle1_Loading/Scripts/Main/Mgr/EquipmentMgr"),s=e("../../../Bundle1_Loading/Scripts/Main/Mgr/MgrSummon"),l=e("../Mgr/BundleMgr"),c=e("../../../Bundle1_Loading/Scripts/Mgr/BaseMgr"),u=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),d=e("../../../Bundle1_Loading/Scripts/Mgr/SoundMgr"),h=e("../../../Bundle1_Loading/Scripts/Mgr/StorageMgr"),p=e("../../../Bundle1_Loading/Scripts/Mgr/TimeMgr"),f=e("../../../Bundle1_Loading/Scripts/Res/comp/AwardShowComp"),g=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ShovelRecoveryTime=6e5,t.ShovelLimitUp=60,t.maxRow=7,t.maxColumn=6,t.defaultDeepth=-696,t.firstEnterMine=!0,t.nowData=[],t.rewardArr=["shovel","boom","drill","diamond","cube","equip"],t.jsonDatas=null,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!1,configurable:!0}),t.prototype.getDefaultMineDeepth=function(){return this.defaultDeepth},t.prototype.init=function(){u.EventMgr.event(r.GlobalEvent.QuestCommit,r.QUEST_ACTIVE_ID.MineDig,h.default.instance.storageData.digMineTotalCount)},t.prototype.initJson=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.isInitJson?t&&t.length>0&&t[0]&&t[0]():l.default.getBundleData(r.BundleName.Mine).bundle.loadDir("Mine",cc.JsonAsset,function(n,o){e.jsonDatas=o,e.isInitJson=!0,t&&t.length>0&&t[0]&&t[0]()})},t.prototype.getJson=function(e){for(var t=0;t<this.jsonDatas.length;t++)if(this.jsonDatas[t].name==e)return this.jsonDatas[t].json;return null},t.prototype.getRoundPropCount=function(){var e=Math.random();return e>0&&e<=.5?1:e>.5&&e<=.8?2:3},t.prototype.BoomEffect=function(e,t,n,o){for(var i,r=0;r<e.children.length;r++)if(0==e.children[r].opacity){i=e.children[r];break}i||((i=cc.instantiate(e.children[0])).opacity=0,e.addChild(i)),i.setPosition(n),i.opacity=255;var a=i.getComponent(sp.Skeleton);if(a.setAnimation(0,t,!1),"boom"==t){a.timeScale=.5;var s=a.findAnimation(t).duration/a.timeScale;p.default.instance.scheduleOnce(function(){cc.tween(i).to(.5,{opacity:0}).call(function(){null==o||o()}).start()},s)}if("bit"==t&&p.default.instance.scheduleOnce(function(){cc.tween(i).to(.7,{y:-611}).call(function(){i.opacity=0,o()}).start()},0),"play"==t){var l=a.findAnimation(t).duration;"effectNode_1"!==e.name?p.default.instance.scheduleOnce(function(){cc.tween(i).to(l,{opacity:0}).call(function(){o()}).start()},0):p.default.instance.scheduleOnce(function(){cc.tween(i).to(.3,{opacity:0}).call(function(){}).start()},0)}"bit"==t&&p.default.instance.scheduleOnce(function(){cc.tween(i).to(.7,{y:-611}).call(function(){i.opacity=0,o()}).start()},0)},t.prototype.showReward=function(){},t.prototype.judgeCellIsbelowMineLine=function(e,t){var n=e.convertToWorldSpaceAR(cc.Vec2.ZERO),o=t.convertToWorldSpaceAR(cc.Vec2.ZERO),i=this.roundToDecimal(n.y,0)-o.y;return Math.abs(i)>=47&&o.y>n.y},t.addClickEvent=function(e,t,n,o,i,a){void 0===o&&(o=null),void 0===i&&(i=!0),void 0===a&&(a=!0),e.targetOff(n);var s=e.scaleX,l=.9*s,c=!1;e.on(cc.Node.EventType.TOUCH_START,function(){c=!0,a&&cc.tween(e).to(.06,{scaleX:l,scaleY:l}).start()},n),e.on(cc.Node.EventType.TOUCH_END,function(){0!=c&&(c=!1,a?cc.tween(e).to(.06,{scaleX:s,scaleY:s}).call(function(){t&&t.call(n,o),i&&d.default.instance&&d.default.instance.PlaySound(r.SoundType.button)}).start():(t&&t.call(n,o),i&&d.default.instance&&d.default.instance.PlaySound(r.SoundType.button)))},n),e.on(cc.Node.EventType.TOUCH_CANCEL,function(){0!=c&&(c=!1,a&&cc.tween(e).to(.06,{scaleX:s,scaleY:s}).start())},n)},t.prototype.arrFormat=function(e){for(var t=Math.ceil(e.length/6),n=[],o=0;o<t;o++){var i=e.slice(6*o,6*(o+1));n.push(i)}return n},t.prototype.roundToDecimal=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},t.prototype.getRandomRewardName=function(){var e;switch(g.Tool.getRandomInArray(this.rewardArr)){case"shovel":e=f.default.instance.shovelPrefab;break;case"boom":e=f.default.instance.boomPrefab;break;case"drill":e=f.default.instance.drillPrefab;break;case"diamond":e=f.default.instance.diamondPrefab;break;case"cube":e=f.default.instance.cubePrefab;break;case"equip":e=f.default.instance.equipPrefab}return e},t.prototype.getRandomRewardCount=function(e){var t=0;switch(e){case f.default.instance.shovelPrefab:t=this.getRoundPropCount(),h.default.instance.saveMineHammer(h.default.instance.storageData.mineHammer+t);break;case f.default.instance.boomPrefab:t=this.getRoundPropCount(),h.default.instance.saveMineBoom(h.default.instance.storageData.mineBoom+t);break;case f.default.instance.drillPrefab:t=this.getRoundPropCount(),h.default.instance.saveMineDrill(h.default.instance.storageData.mineDrill+t);break;case f.default.instance.diamondPrefab:t=200+50*Math.trunc(h.default.instance.storageData.mineDeepth/100),h.default.instance.addDiamond(t);break;case f.default.instance.cubePrefab:t=30+10*Math.trunc(h.default.instance.storageData.mineDeepth/100),h.default.instance.saveMineCubeCount(h.default.instance.storageData.mineCube+t);break;case f.default.instance.equipPrefab:t=1,a.default.Instance.addEquipment(s.default.Instance.summonGear(1,1),1)}return t},t}(c.default);n.default=y,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":"EnumTypes","../../../Bundle1_Loading/Scripts/Main/Mgr/EquipmentMgr":"EquipmentMgr","../../../Bundle1_Loading/Scripts/Main/Mgr/MgrSummon":"MgrSummon","../../../Bundle1_Loading/Scripts/Mgr/BaseMgr":"BaseMgr","../../../Bundle1_Loading/Scripts/Mgr/EventMgr":"EventMgr","../../../Bundle1_Loading/Scripts/Mgr/SoundMgr":"SoundMgr","../../../Bundle1_Loading/Scripts/Mgr/StorageMgr":"StorageMgr","../../../Bundle1_Loading/Scripts/Mgr/TimeMgr":"TimeMgr","../../../Bundle1_Loading/Scripts/Res/comp/AwardShowComp":"AwardShowComp","../../../Bundle1_Loading/Scripts/Tool/Tool":"Tool","../Mgr/BundleMgr":"BundleMgr"}],Mine_Panel:[function(e,t,n){"use strict";cc._RF.push(t,"52a75xoInZD74+0J496uUCX","Mine_Panel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),s=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),l=e("../../../Bundle1_Loading/Scripts/Res/ResPanelOpen"),c=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t}return i(t,e),t.prototype.onLoad=function(){this.panel=this.node.getChildByName("panel"),c.Tool.addClickEvent(this.btnClose,this.onCloseBtnClick,this),s.EventMgr.on(a.GlobalEvent.CloseMineView,this.onCloseBtnClick,this),s.EventMgr.on(a.GlobalEvent.CloseAllMineView,this.onCloseBtnClick,this)},t.prototype.onEnable=function(){l.default.panelOpen_BottomToTop(this.panel)},t.prototype.onCloseBtnClick=function(){s.EventMgr.event(a.EventType.Research_RedPoint),this.node.destroy()},r([h(cc.Node)],t.prototype,"btnClose",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":"EnumTypes","../../../Bundle1_Loading/Scripts/Mgr/EventMgr":"EventMgr","../../../Bundle1_Loading/Scripts/Res/ResPanelOpen":"ResPanelOpen","../../../Bundle1_Loading/Scripts/Tool/Tool":"Tool"}],Monster:[function(e,t,n){"use strict";cc._RF.push(t,"5a655b/5RxNXqnxDWO7hmLU","Monster");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s,l=e("../../../plugin/NumberPlus"),c=e("../../Config/EnumTypes"),u=e("../../Config/GameData"),d=e("../../Mgr/EventMgr"),h=e("../../Mgr/StorageMgr"),p=e("../../Tool/Tool"),f=e("./BattleMgr"),g=e("./Hero"),y=cc._decorator,m=y.ccclass;y.property,function(e){e.attack="play",e.dead="dead",e.run="run",e.shortHit="be_hit",e.longHit="be_hit2"}(a||(a={})),function(e){e[e.move=0]="move",e[e.attack=1]="attack",e[e.dead=2]="dead",e[e.hitBack=3]="hitBack"}(s||(s={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.id=0,t.anim=null,t.hpBar=null,t.speed=100,t.range=20,t.atk="10",t.maxHp="100",t.gold="10",t.fre=.5,t.nowHp="100",t.stopX=null,t.rangeOffset=0,t.nowState=s.move,t.isActive=!1,t.isAlreadyDead=!1,t.isPlayHittingAnim=!1,t.isHitting=!1,t.isPlayingAtkAnim=!1,t.attackCD=0,t}return i(t,e),t.prototype.onLoad=function(){this.animInit()},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},t.prototype.init=function(){this.isActive=!0,this.initValue(),this.anim.setAnimation(0,a.run,!0),this.move();var e=-1!=this.node.name.indexOf("boss");this.hpBar=f.default.instance.bornHpBar(this.node,this.anim.node.height/2+50,.8,e),this.updateHpBar()},t.prototype.recyle=function(){this.isActive=!1,cc.tween(this.node).to(.5,{opacity:0}).start(),this.unscheduleAllCallbacks()},t.prototype.update=function(e){if(this.isActive&&!f.default.isPause){switch(this.nowState){case s.move:this.moveUpdate(e);break;case s.attack:this.attackUpdate(e);break;case s.dead:case s.hitBack:}this.animUpdate()}},t.prototype.initValue=function(){this.nowHp=this.maxHp,this.rangeOffset=this.anim.node.width*this.node.scaleX*.5,this.stopX=f.default.instance.nowHero.x+this.range+this.rangeOffset,this.isPlayHittingAnim=!1,this.isAlreadyDead=!1,this.isPlayingAtkAnim=!1;var e=1/this.fre,t=1;this.anim.findAnimation(a.attack)&&(t=this.anim.findAnimation(a.attack).duration),this.fre=t/e},t.prototype.getNextPosX=function(e){var t=this.node.x-this.speed*e*f.default.battleSpeed;return t<this.stopX&&(t=this.stopX),t},t.prototype.dead=function(){if(0!=this.isActive&&this.nowState!=s.dead){this.nowState=s.dead,d.EventMgr.event(c.EventType.Battle_Monster_Dead),d.EventMgr.event(c.GlobalEvent.QuestCommit,c.QUEST_ACTIVE_ID.DefeatEnemy);var e=l.default.mul(this.gold,u.default.heroCoinAddCal()),t="0"!=this.gold?2:this.gold;d.EventMgr.event(c.EventType.Common_Coin_Add,t,this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),function(){h.default.instance.addCoin(e)}),this.scheduleOnce(this.recyle,this.anim.findAnimation(a.dead).duration/f.default.battleSpeed),f.default.instance.bornMonsterDieFx(this.node.getPosition())}},t.prototype.move=function(){this.nowState=s.move},t.prototype.attack=function(){this.nowState=s.attack},t.prototype.preHit=function(e){-1!=this.node.name.indexOf("boss")&&(e*=u.default.heroBossDamageCal()),l.default.compare(e,this.nowHp)&&(this.isAlreadyDead=!0)},t.prototype.hit=function(e,t){var n;if(this.isActive){if(-1!=this.node.name.indexOf("boss")&&(e*=u.default.heroBossDamageCal()),f.default.instance.playWordLabel(null===(n=this.hpBar)||void 0===n?void 0:n.node,e,t),this.nowHp=l.default.sub(this.nowHp,e),l.default.compare(0,this.nowHp))return this.nowHp="0",this.dead(),void this.updateHpBar();this.updateHpBar(),this.hitAnim()}},t.prototype.hitAnim=function(){var e=this;if(!this.isPlayHittingAnim){this.isPlayHittingAnim=!0,this.isHitting=!0;var t=this.anim.findAnimation(a.shortHit).duration/f.default.battleSpeed;this.unschedule(this.hitEnd),this.scheduleOnce(this.hitEnd,t),this.scheduleOnce(function(){e.isPlayHittingAnim=!1},t)}},t.prototype.hitEnd=function(){this.isHitting=!1},t.prototype.hitBack=function(){var e=this;this.nowState=s.hitBack;var t=this.node.x+p.Tool.randomInt(150,350);cc.tween(this.node).to(.5,{x:t},{easing:"fade"}).call(function(){e.move()}).start()},t.prototype.animInit=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton)},t.prototype.animUpdate=function(){var e;switch(this.nowState){case s.move:this.isHitting||(e=a.run,this.anim.timeScale=f.default.battleSpeed);break;case s.attack:if(this.isPlayingAtkAnim){e=a.attack;var t=f.default.battleSpeed*this.fre;this.anim.timeScale=t>1?t:1,this.isPlayingAtkAnim=!1}break;case s.dead:e=a.dead,this.anim.timeScale=f.default.battleSpeed}if(this.isPlayHittingAnim&&this.nowState!=s.dead&&(this.isPlayHittingAnim=!1,e=a.shortHit,this.anim.timeScale=f.default.battleSpeed),(this.anim.animation==a.shortHit||this.anim.animation==a.attack||this.anim.animation!=e)&&e){var n=e==a.run;this.anim.setAnimation(0,e,n)}},t.prototype.moveUpdate=function(e){f.default.instance.monsterIsMove&&(this.node.x-=this.speed*e*f.default.battleSpeed*u.default.enemySpeedCal(),this.rangeOffset=this.node.width/2,this.node.x<this.stopX&&this.attack())},t.prototype.attackUpdate=function(e){this.attackCD-=e,this.attackCD<=0&&5!=f.default.instance.nowHero.getComponent(g.default).nowState&&this.goAttack()},t.prototype.goAttack=function(){var e=f.default.battleSpeed*this.fre;this.attackCD=this.anim.findAnimation(a.attack).duration/(f.default.battleSpeed*this.fre);var t=e>1?this.attackCD:this.anim.findAnimation(a.attack).duration;this.scheduleOnce(this.doAttack,.5*t),this.isPlayingAtkAnim=!0},t.prototype.doAttack=function(){this.isAlreadyDead||this.nowState!=s.dead&&0!=this.isActive&&f.default.instance.nowHero.getComponent(g.default).hit(l.default.mul(this.atk,u.default.enemyDamageReduceCal()))},t.prototype.updateHpBar=function(){var e;if(this.hpBar){this.hpBar.value=parseFloat(l.default.div(this.nowHp,this.maxHp));var t=this.hpBar.node.getChildByName("barBg");this.barTween&&this.barTween.stop(),this.barTween=cc.tween(t).to(.75/f.default.battleSpeed,{width:120*this.hpBar.value}).start();var n=null===(e=this.hpBar.node.getChildByName("label"))||void 0===e?void 0:e.getComponent(cc.Label);n&&(n.string=l.default.format(this.nowHp,2)),this.hpBar.node.opacity=0==this.hpBar.value?0:255,0==this.hpBar.node.opacity&&(this.hpBar=null)}},r([m],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Tool/Tool":"Tool","./BattleMgr":"BattleMgr","./Hero":"Hero"}],MoveLeftRight:[function(e,t,n){"use strict";cc._RF.push(t,"be40egcF1pFHqvR7o7IigLI","MoveLeftRight");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=(a.property,a.menu),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseX=0,t.offset=5,t.way=1,t}return i(t,e),t.prototype.start=function(){this.baseX=this.node.x},t.prototype.update=function(e){this.node.x+=e*this.way*this.offset*2,this.node.x>this.baseX+this.offset?this.way=-1:this.node.x<this.baseX-this.offset&&(this.way=1)},r([s,l("Mod/MoveLeftRight")],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],MoveUpDown:[function(e,t,n){"use strict";cc._RF.push(t,"e82505vMUhDI7R76DeJ22bz","MoveUpDown");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=(a.property,a.menu),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseY=0,t.offset=5,t.way=1,t}return i(t,e),t.prototype.start=function(){this.baseY=this.node.y},t.prototype.update=function(e){this.node.y+=e*this.way*this.offset*2,this.node.y>this.baseY+this.offset?this.way=-1:this.node.y<this.baseY-this.offset&&(this.way=1)},r([s,l("Mod/MoveUpDown")],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],NodeVisible:[function(e,t,n){"use strict";cc._RF.push(t,"3e1baAo5epKBrTx/8J8aE30","NodeVisible");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../GuideMgr"),a=function(e){function t(t){var n=e.call(this)||this;return n._nodePaths=t,n}return i(t,e),t.prototype.isSuccess=function(){for(var e=0;e<this._nodePaths.length;e++){var t=r.default.instance.getGuideNode(Number(this._nodePaths[e]));if(null==t&&cc.error("node is null"),!t||!t.activeInHierarchy)return!1}return!0},t}(e("./GuideCondition").default);n.default=a,cc._RF.pop()},{"../GuideMgr":"GuideMgr","./GuideCondition":"GuideCondition"}],NumberPlus:[function(e,t,n){"use strict";cc._RF.push(t,"c7f7eP/oIBMuq4bXVJe46SX","NumberPlus"),Object.defineProperty(n,"__esModule",{value:!0});var o=globalThis.Big;o.DP=2,o.PE=2e3;for(var i=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],r=0;r<2;r++)for(var a=0;a<26;a++)i.push(String.fromCharCode(65+r)+String.fromCharCode(65+a));var s=function(){function e(){}return e.add=function(t,n){return"string"==typeof t&&t.search(/[A-z]/i)>0&&(t=e.decode(t)),"string"==typeof n&&n.search(/[A-z]/i)>0&&(n=e.decode(n)),t=new o(t),n=new o(n),t.plus(n).toString()},e.sub=function(t,n){return"string"==typeof t&&t.search(/[A-z]/i)>0&&(t=e.decode(t)),"string"==typeof n&&n.search(/[A-z]/i)>0&&(n=e.decode(n)),t=new o(t),n=new o(n),t.minus(n).toString()},e.mul=function(t,n){return"string"==typeof t&&t.search(/[A-z]/i)>0&&(t=e.decode(t)),"string"==typeof n&&n.search(/[A-z]/i)>0&&(n=e.decode(n)),t=new o(t),n=new o(n),t.times(n).toString()},e.div=function(t,n){return"string"==typeof t&&t.search(/[A-z]/i)>0&&(t=e.decode(t)),"string"==typeof n&&n.search(/[A-z]/i)>0&&(n=e.decode(n)),t=new o(t),n=new o(n),t.div(n).toString()},e.percent=function(t,n,i){return"string"==typeof t&&t.search(/[A-z]/i)>0&&(t=e.decode(t)),"string"==typeof n&&n.search(/[A-z]/i)>0&&(n=e.decode(n)),void 0===i&&(i=2),t=new o(t),n=new o(n),t.gte(n)?1:t.div(n).toNumber()},e.lerp=function(t,n,i){return"string"==typeof t&&t.search(/[A-z]/i)>0&&(t=e.decode(t)),"string"==typeof n&&n.search(/[A-z]/i)>0&&(n=e.decode(n)),t=new o(t),n=new o(n),t.plus(n.minus(t).mul(i)).toString()},e.compare=function(t,n){return"string"==typeof t&&t.search(/[A-z]/i)>0&&(t=e.decode(t)),"string"==typeof n&&n.search(/[A-z]/i)>0&&(n=e.decode(n)),t=new o(t),n=new o(n),t.gte(n)},e.format=function(t,n){"string"==typeof t&&t.search(/[A-z]/i)>0&&(t=e.decode(t)),null==n&&(n=2);var r="";if((t=new o(t).toFixed(0)).length>3){var a=myGlobalThis.floor(t.length/3);0==t.length%3&&(a-=1),r=i[a],t=Number(t.substr(0,t.length-3*(a-1))/1e3)}return e.number_format(t,n)+r},e.number_format=function(e,t){e=(e+"").replace(/[^0-9+-Ee.]/g,"");var n=isFinite(+e)?+e:0,o=isFinite(+t)?Math.abs(t):0;return(o?function(e,t){var n=Math.pow(10,t);return""+Math.ceil(e*n)/n}(n,o):""+Math.round(n)).split(".").join(".")},e.decode=function(e){if(e.length>=2){var t=e.search(/[A-z]/i);if(t>0){var n=Math.floor(1e3*myGlobalThis.toNumber(e.substring(0,t))),o=e.substring(t),r=myGlobalThis.indexOf(i,o);return""+n+new Array(3*(r-1)+1).join("0")}}return e},e.getChLength=function(e){return e.replace(/[\u0391-\uFFE5]/g,"aa").length},e}();n.default=s,cc._RF.pop()},{}],PartnerDetailWindow:[function(e,t,n){"use strict";cc._RF.push(t,"4b10fb4vvxGw64n77NK9j3V","PartnerDetailWindow");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Platform/Platform"),u=e("../../Res/ResPanelOpen"),d=e("../../Tool/Tool"),h=e("../CommonUI/IDetailView"),p=e("../CommonUI/UIItemPool"),f=e("../Main_PanelOpen"),g=e("../Mgr/GuideCore/GuideEnums"),y=e("../Mgr/GuideCore/GuideMgr"),m=e("../Mgr/PartnerMgr"),v=e("./UIPartnerTagItem"),_=cc._decorator,b=_.ccclass,S=_.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.atkLabel=null,t.aspdLabel=null,t.tagLayout=null,t.tagPool=null,t.btnUnEquip=null,t.btnLeft=null,t.btnRight=null,t.lock=null,t.arrowLeft=null,t.arrowRight=null,t.curIndex=-1,t}return i(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),d.Tool.addClickEvent(this.btnUnEquip,this.onClickBtnUnEquip,this),d.Tool.addClickEvent(this.btnLeft,this.onClickLeft,this),d.Tool.addClickEvent(this.btnRight,this.onClickRight,this);var t=this.node.getChildByName("base");u.default.panelOpen_SmallToBig(t,function(){l.EventMgr.event(s.EventType.Common_TeachPartner_NextStep,3)})},t.prototype.start=function(){y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchEquipPartnerButton)},t.prototype.setUpValue=function(e){this.curIndex=m.default.Instance.getPartDomains().findIndex(function(t){return t==e}),this.refreshUI(e)},t.prototype.refreshUI=function(e){var t;null===(t=this.domain)||void 0===t||t.removeListener(this._refreshUI,this),this.domain=e,this.domain.addListener(this._refreshUI,this),this._refreshUI(),this.refreshPartnerTag(),this.refreshArrowButton()},t.prototype._refreshUI=function(){this.setName(this.domain.getName()),this.setQualityName(this.domain.getQuality(),this.domain.getQualityName()),this.setOwn(this.domain.getOwnValue()),this.levelLabel.string="LV"+(this.domain.getCurLevel()||1),this.setProgress(this.domain.getCurCount(),this.domain.getNextLevelCostCount()),this.setQuality(this.domain.getQuality()),this.setIcon(this.domain.getIcon()),this.setStrengthenRedPoint(this.domain.canLevelUp()),this.btnEquip.active=!this.domain.isEquipped(),this.btnUnEquip.active=this.domain.isEquipped(),this.atkLabel.string=a.default.format(this.domain.getAtk()),this.aspdLabel.string=""+this.domain.getAspd(),this.btnStrengthen.getComponentInChildren(cc.Sprite).setState(this.domain.canLevelUp()?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY),this.btnEquip.getComponentInChildren(cc.Sprite).setState(this.domain.isLock()?cc.Sprite.State.GRAY:cc.Sprite.State.NORMAL),this.lock.active=this.domain.isLock()},t.prototype.onClickBtnEquip=function(){this.domain.isLock()?c.default.instance.showToast("\u4f19\u4f34\u672a\u89e3\u9501"):(m.default.Instance.equippedPartner(this.domain)==s.eEquipDomainStatus.Full&&(m.default.Instance.modeStatus=s.eModeStatus.SelectSlot,l.EventMgr.event(s.EventType.Main_UI_Partner_PartnerModeChange,this.domain)),l.EventMgr.event(s.EventType.Common_TeachPartner_NextStep,4),this.closeWindow())},t.prototype.onClickBtnStrengthen=function(){if(this.domain.isLock())c.default.instance.showToast("\u4f19\u4f34\u672a\u89e3\u9501");else if(this.domain.canLevelUp()){var e=m.default.Instance.levelUp(this.domain.getId());f.default.showStrengthWindow({type:s.StrengthenType.Partner,results:e})}else c.default.instance.showToast("\u6240\u9700\u4f19\u4f34\u6570\u91cf\u4e0d\u8db3")},t.prototype.onClickBtnUnEquip=function(){m.default.Instance.unEquippedPartner(this.domain),this.closeWindow()},t.prototype.refreshPartnerTag=function(){this.tagPool.clear();var e=this.domain.getTagInfo(),t=this.tagPool.get();t.parent=this.tagLayout.node,t.getComponent(v.default).setName(e.name).setTag(e.id)},t.prototype.closeWindow=function(){var e=this,t=this.node.getChildByName("base"),n=this;u.default.panelClose_BigToSmall(t,function(){e.domain.removeListener(e._refreshUI,e),n.node.destroy(),e.domain=null})},t.prototype.refreshArrowButton=function(){this.btnLeft.active=this.curIndex>0,this.btnRight.active=this.curIndex<m.default.Instance.getPartDomains().length-1,this.arrowLeft.active=!this.btnLeft.active,this.arrowRight.active=!this.btnRight.active},t.prototype.onClickLeft=function(){this.curIndex--;var e=m.default.Instance.getPartDomains()[this.curIndex];this.refreshUI(e)},t.prototype.onClickRight=function(){this.curIndex++;var e=m.default.Instance.getPartDomains()[this.curIndex];this.refreshUI(e)},r([S(cc.Label)],t.prototype,"atkLabel",void 0),r([S(cc.Label)],t.prototype,"aspdLabel",void 0),r([S(cc.Layout)],t.prototype,"tagLayout",void 0),r([S(p.default)],t.prototype,"tagPool",void 0),r([S(cc.Node)],t.prototype,"btnUnEquip",void 0),r([S(cc.Node)],t.prototype,"btnLeft",void 0),r([S(cc.Node)],t.prototype,"btnRight",void 0),r([S(cc.Node)],t.prototype,"lock",void 0),r([S(cc.Node)],t.prototype,"arrowLeft",void 0),r([S(cc.Node)],t.prototype,"arrowRight",void 0),r([b],t)}(h.default);n.default=M,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/IDetailView":"IDetailView","../CommonUI/UIItemPool":"UIItemPool","../Main_PanelOpen":"Main_PanelOpen","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/PartnerMgr":"PartnerMgr","./UIPartnerTagItem":"UIPartnerTagItem"}],PartnerDomain:[function(e,t,n){"use strict";cc._RF.push(t,"f2e52Vvm8pAdavd33jJXSkc","PartnerDomain");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../plugin/NumberPlus"),a=e("../../../Config/GameData"),s=e("../../../Mgr/ItemMgr"),l=e("../../../Mgr/LanguageMgr"),c=e("../../../Mgr/StorageMgr"),u=e("../../Battle/Battle_RelicMgr"),d=e("../../Mgr/PartnerMgr"),h=function(e){function t(t,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i=e.call(this)||this;return i._level=0,i._count=0,i._partnerInfo=t,i._level=n,i._count=o,i.tagInfo=d.default.Instance.getPartnerTag(parseInt(i._partnerInfo.flg)),i.setData(i._partnerInfo),i}return i(t,e),t.prototype.getId=function(){return this._partnerInfo.id},t.prototype.getPartnerInfo=function(){return this._partnerInfo},t.prototype.getCurLevel=function(){return this._level},t.prototype.getCurCount=function(){return this._count},t.prototype.getNextLevelCostCount=function(){return this.getCurLevel()>=d.default.Instance.getMaxLevel(this.getQuality())?-1:d.default.Instance.getPartnerLevelInfo(this.getQuality(),this.getCurLevel()||1).cost},t.prototype.getName=function(){return l.default.Instance.getLanguage(this._partnerInfo.name)},t.prototype.getIcon=function(){return s.default.Instance.getPartnerIcon(this._partnerInfo.icon)},t.prototype.getQuality=function(){return this._partnerInfo.quality},t.prototype.getQualityName=function(){return s.default.Instance.getQualityName(this.getQuality())},t.prototype.getQualityIcon=function(){return s.default.Instance.getQualityIcon(this.getQuality())},t.prototype.getTagInfo=function(){return this.tagInfo},t.prototype.isLock=function(){return 0==this._count&&0==this._level},t.prototype.canLevelUp=function(){var e=this.getCurLevel()<d.default.Instance.getMaxLevel(this.getQuality()),t=this.getCurCount()>=this.getNextLevelCostCount();return e&&t},t.prototype.isEquipped=function(){var e=this;return c.default.instance.storageData.usingPartnerIds.some(function(t){return t==e.getId()})},t.prototype.getOwnValue=function(){return d.default.Instance.getPartnerLevelInfo(this.getQuality(),this.getCurLevel()||1).owned},t.prototype.getViewUrl=function(){return this._partnerInfo.viewUrl},t.prototype.getAtk=function(){var e=r.default.decode(a.default.heroAtkCal()),t=r.default.add(r.default.decode(this._partnerInfo.atk),r.default.mul((this._level||1)-1,r.default.decode(this._partnerInfo.atkUP))),n=r.default.div(r.default.mul(e,t),100);return r.default.mul(n,a.default.heroPartnerAtkCal())},t.prototype.getAspd=function(){var e=this._partnerInfo.aspd*a.default.heroPartnerAspdCal();return 5==this.tagInfo.id&&(e*=1+u.default.Instance.relic_effect_9_Check()),1==this.tagInfo.id&&(e*=1+u.default.Instance.relic_effect_13_Check()),e},t.prototype.addCount=function(e){this._count+=e,this._level<=0&&(this._level=1)},t.prototype.getBulletId=function(){return this._partnerInfo.bulletId},t.prototype.levelUp=function(){if(!this.canLevelUp())return null;for(var e=this.getCurCount(),t=this._level,n=d.default.Instance.getMaxLevel(this.getQuality());this._count-=this.getNextLevelCostCount(),this._level++,!(this._level>=n);){var o=this.getNextLevelCostCount();if(o<=0||this._count<o)break}this._level;var i=this._count-e;return this.emitChange(),{id:this.getId(),prev:t,curr:this._level,cost:i,quality:this.getQuality()}},t}(e("../Domain").default);n.default=h,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/GameData":"GameData","../../../Mgr/ItemMgr":"ItemMgr","../../../Mgr/LanguageMgr":"LanguageMgr","../../../Mgr/StorageMgr":"StorageMgr","../../Battle/Battle_RelicMgr":"Battle_RelicMgr","../../Mgr/PartnerMgr":"PartnerMgr","../Domain":"Domain"}],PartnerListItem:[function(e,t,n){"use strict";cc._RF.push(t,"db547Z18Q9Gc6+azLSsuX4b","PartnerListItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Tool/Tool"),c=e("../CommonUI/IUIItem"),u=e("../Main_PanelOpen"),d=e("../Mgr/PartnerMgr"),h=cc._decorator,p=h.ccclass,f=h.property,g=h.menu,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnEquip=null,t.btnUnEquip=null,t.tagDelegate=null,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),l.Tool.addClickEvent(this.btnEquip,this.onClickBtnEquip,this),l.Tool.addClickEvent(this.btnUnEquip,this.onClickBtnUnEquip,this),l.Tool.addClickEvent(this.node,this.onClickNode,this)},t.prototype.setUpValue=function(e,t){this._domain=e,this.node.parent=t,this._domain.addListener(this._refreshUI,this),this._refreshUI()},t.prototype._refreshUI=function(){this.levelLabel.node.active=!this._domain.isLock(),this.setQuality(this._domain.getQuality()),this.setIcon(this._domain.getIcon()),this.setLock(this._domain.isLock()),this.setEquipped(this._domain.isEquipped()),this.setArrow(this._domain.canLevelUp()),this.setProgress(this._domain.getCurCount(),this._domain.getNextLevelCostCount()),this.setLevel(this._domain.getCurLevel()),this.btnEquip.active=!this._domain.isEquipped()&&!this._domain.isLock()&&!Boolean(this.tagDelegate),this.btnUnEquip.active=this._domain.isEquipped()&&!Boolean(this.tagDelegate)},t.prototype.onClickBtnEquip=function(){d.default.Instance.equippedPartner(this._domain)==a.eEquipDomainStatus.Full&&(d.default.Instance.modeStatus=a.eModeStatus.SelectSlot,s.EventMgr.event(a.EventType.Main_UI_Partner_PartnerModeChange,this._domain)),s.EventMgr.event(a.EventType.Common_TeachPartner_NextStep,4)},t.prototype.onClickBtnUnEquip=function(){d.default.Instance.unEquippedPartner(this._domain)},t.prototype.onClickNode=function(){var e;null===(e=this.tagDelegate)||void 0===e||e.close(),u.default.showPartnerDetailWindow(this._domain)},t.prototype.onDestroy=function(){this._domain.removeListener(this._refreshUI,this)},r([f(cc.Node)],t.prototype,"btnEquip",void 0),r([f(cc.Node)],t.prototype,"btnUnEquip",void 0),r([p,g("partner/PartnerListItem")],t)}(c.default);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Tool/Tool":"Tool","../CommonUI/IUIItem":"IUIItem","../Main_PanelOpen":"Main_PanelOpen","../Mgr/PartnerMgr":"PartnerMgr"}],PartnerMgr:[function(e,t,n){"use strict";cc._RF.push(t,"b9202MrgSdFD4eZkWwu8556","PartnerMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../plugin/NumberPlus"),a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/ItemMgr"),u=e("../../Mgr/RandomHelper"),d=e("../../Mgr/StorageMgr"),h=e("../Domains/Partner/PartnerDomain"),p=e("../Domains/Partner/PartnerSlotDomain"),f=e("../../Mgr/BaseMgr"),g=e("../Battle/BattleMgr"),y=e("../Main_UI"),m=e("./GuideCore/GuideMgr"),v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.partnerInfos=[],t.partnerTagInfoMap=new Map,t.levelInfoMap=new Map,t.maxLevelMap=new Map,t.partnerDomains=[],t.partnerSlotDomains=[],t.partnerSlotMap=new Map,t.modeStatus=a.eModeStatus.Normal,t.ownedAtkPropAddition="0",t.unlockSlotIds=[],t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;this.partnerInfos=[],this.partnerDomains=[],this.partnerSlotDomains=[],this.levelInfoMap.clear(),this.maxLevelMap.clear(),this.partnerSlotMap.clear(),this.initTagValue(),this.initInfoValue(),this.initLevelValue(),this.calOwnValue(),l.EventMgr.on(a.GlobalEvent.UnlockPartnerCol2,this.checkUnlockPartnerSlot,this),l.EventMgr.on(a.GlobalEvent.UnlockPartnerCol3,this.checkUnlockPartnerSlot,this),l.EventMgr.on(a.GlobalEvent.UnlockPartnerCol4,this.checkUnlockPartnerSlot,this),l.EventMgr.on(a.GlobalEvent.UnlockPartnerCol5,this.checkUnlockPartnerSlot,this)},t.prototype.initInfoValue=function(){var e=this,n=s.default.getJsonObject("partner");for(var o in n){var i=n[o];for(var r in i){var c=i[r];this.partnerInfos.push(c)}}var f=d.default.instance.storageData.partnerStorageInfos;this.partnerInfos.forEach(function(t){var n=f.find(function(e){return e.id==t.id}),o=new h.default(t,null==n?void 0:n.level,null==n?void 0:n.count);e.partnerDomains.push(o)});for(var g=d.default.instance.storageData.usingPartnerIds,y=function(e){var t=new p.default(e,m.partnerDomains.find(function(t){return t.getId()==g[e]}));m.partnerSlotDomains.push(t),m.partnerSlotMap.set(e,t)},m=this,v=0;v<a.ePartSlot.Max;v++)y(v);l.EventMgr.on(a.EventType.TestForAddPartner,function(){t.Instance.getPartnerInfos().forEach(function(e){t.Instance.addPartnerItem(e.id,u.default.randomNum(30,100))})},this)},t.prototype.initLevelValue=function(){this.levelInfoMap.clear();for(var e=[],t=0,n=s.default.getJsonObject("partnerLevel"),o=c.QualityEnum.Common;o<c.QualityEnum.Exotic;o++){var i=n[c.QualityToKey[o]];for(var r in e=[],t=0,i){var a=i[r];e.push(a),t<a.level&&(t=a.level)}this.maxLevelMap.set(o,t),this.levelInfoMap.set(o,e)}},t.prototype.initTagValue=function(){this.partnerTagInfoMap.clear();var e=s.default.getJsonObject("partnerTag");for(var t in e){var n=e[t];for(var o in n){var i=n[o];this.partnerTagInfoMap.set(i.id,i)}}},t.prototype.getPartnerInfos=function(){return this.partnerInfos},t.prototype.getPartnerInfo=function(e){return this.partnerInfos.find(function(t){return t.id==e})},t.prototype.isNew=function(e){var t=d.default.instance.storageData.partnerStorageInfos.find(function(t){return t.id==e});return!Boolean(t)},t.prototype.getQualityPartners=function(e){return this.partnerInfos.filter(function(t){return t.quality==e})},t.prototype.getPartnerLevelInfo=function(e,t){return this.levelInfoMap.get(e)[t-1]},t.prototype.getPartDomains=function(){return this.partnerDomains},t.prototype.getPartnerDomain=function(e){return this.partnerDomains.find(function(t){return t.getId()==e})},t.prototype.getPartnerTag=function(e){return this.partnerTagInfoMap.get(e)},t.prototype.getDomainsByTag=function(e){var t=[];return this.partnerDomains.forEach(function(n){n.getTagInfo()&&n.getTagInfo().id==e&&t.push(n)}),t},t.prototype.getPartnerSlotDomains=function(){return this.partnerSlotDomains},t.prototype.getPartnerSlotDomain=function(e){return this.partnerSlotMap.get(e)},t.prototype.getMaxLevel=function(e){return this.maxLevelMap.get(e)},t.prototype.hasCanLevelUp=function(){return this.partnerDomains.some(function(e){return e.canLevelUp()})},t.prototype.hasEmptySlot=function(){return this.partnerSlotDomains.some(function(e){return!e.isLocked()&&!e.isEquippedSkill()})},t.prototype.calOwnValue=function(){var e="0";myGlobalThis.each(this.partnerDomains,function(t){t.isLock()||(e=r.default.add(r.default.decode(e),r.default.decode(t.getOwnValue())))}),this.ownedAtkPropAddition=e,s.default.partnerAddAtk=this.ownedAtkPropAddition,l.EventMgr.event(a.EventType.Battle_Hero_Prop_Update)},t.prototype.getOwnedValue=function(){return this.ownedAtkPropAddition},t.prototype.levelUp=function(e){var t=this.getPartDomains();if(e){var n=t.find(function(t){return t.getId()==e}),o=n.levelUp();d.default.instance.strengthenPartner(n),this.calOwnValue();var i={id:o.id,prev:o.prev,curr:o.curr};return l.EventMgr.event(a.GlobalEvent.PartnerLevelUp,i),[o]}var r=[],s=[],c=[];return t.forEach(function(e){var t=e.levelUp();t&&(r.push(t),s.push(e),c.push({id:t.id,prev:t.prev,curr:t.curr}))}),s.length>0&&(d.default.instance.strengthenPartners(s),this.calOwnValue()),c.length>0&&l.EventMgr.event(a.GlobalEvent.PartnerLevelUpAll,c),r},t.prototype.addPartnerItem=function(e,t){var n=this.partnerDomains.find(function(t){return t.getId()==e});n&&(n.addCount(t),d.default.instance.addPartnerItem(e,t),this.calOwnValue())},t.prototype.addPartnerItems=function(e){for(var t=this,n=new Map,o=0;o<e.length;o++){var i=e[o];n.has(i)||n.set(o,0),n.set(i,n.get(i)+1)}n.forEach(function(e,n){var o=t.partnerDomains.find(function(e){return e.getId()==n});null==o||o.addCount(e)}),d.default.instance.addPartnerItems(n),this.calOwnValue()},t.prototype.equippedPartner=function(e){var t=this.partnerSlotDomains.find(function(e){return!e.isLocked()&&!e.isEquippedSkill()});return t?(t.equippedPartner(e),d.default.instance.equippedPartner(t),e.emitChange(),a.eEquipDomainStatus.Success):(this.domainInMode=e,a.eEquipDomainStatus.Full)},t.prototype.unEquippedPartner=function(e){var t=this.partnerSlotDomains.find(function(t){return t.getId()==e.getId()});t.unEquippedPartner(),d.default.instance.unEquippedPartner(t),e.emitChange()},t.prototype.changeEquippedPartner=function(e){var t=e.getData();e.unEquippedPartner(),this.equippedPartner(this.domainInMode),this.domainInMode=null,this.modeStatus=a.eModeStatus.Normal,t.emitChange(),l.EventMgr.event(a.EventType.Main_UI_Partner_PartnerModeChange)},t.prototype.getData=function(e){return d.default.instance.storageData.partnerStorageInfos.find(function(t){return t.id==e})},t.prototype.getOwnedCount=function(){return d.default.instance.storageData.partnerStorageInfos.length},t.prototype.getMaxOwnId=function(){var e=d.default.instance.storageData.partnerStorageInfos;if(e.length<=0)return-1;for(var t=null,n=-1,o="0",i=0;i<e.length;i++){var a=e[i];t=this.getPartnerDomain(a.id),r.default.compare(t.getOwnValue(),o)&&(o=t.getOwnValue(),n=t.getId())}return n},t.prototype.convertPartnerSysIdToSlotIndex=function(e){return e%100-1},t.prototype.checkUnlockPartnerSlot=function(e){y.default.instance.uiState==a.MainUIState.Mine||m.default.instance.isInGuide()||m.default.instance.isCompleteSpecialGuide(1e3*e)||(this.unlockSlotIds.includes(e)||this.unlockSlotIds.push(e),g.default.instance.pause(),y.default.instance.jumpToPage(a.MainPage.Partner))},t.prototype.getUnlockSlotIds=function(){return this.unlockSlotIds},t.prototype.removeUnlockSlotId=function(e){var t=this.unlockSlotIds.indexOf(e);t>=0&&this.unlockSlotIds.splice(t,1),g.default.instance.resume()},t}(f.default);n.default=v,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/RandomHelper":"RandomHelper","../../Mgr/StorageMgr":"StorageMgr","../Battle/BattleMgr":"BattleMgr","../Domains/Partner/PartnerDomain":"PartnerDomain","../Domains/Partner/PartnerSlotDomain":"PartnerSlotDomain","../Main_UI":"Main_UI","./GuideCore/GuideMgr":"GuideMgr"}],PartnerSlotDomain:[function(e,t,n){"use strict";cc._RF.push(t,"32600lKBoNFp7UrBB+L+O6b","PartnerSlotDomain");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Config/EnumTypes"),a=e("../../Mgr/Unlock/MgrUnlock"),s=function(e){function t(t,n){var o=e.call(this)||this;return o.slotIndex=t,n&&n.addListener(o.emitChange,o),o.setData(n),o}return i(t,e),t.prototype.getId=function(){return this.isEquippedSkill()?this.getData().getId():0},t.prototype.getSlotIndex=function(){return this.slotIndex},t.prototype.isEquippedSkill=function(){return Boolean(this.getData())},t.prototype.isLocked=function(){switch(this.slotIndex){case r.ePartSlot.Slot1:return!a.default.Instance.isUnlock(r.UnlockType.partner);case r.ePartSlot.Slot2:return!a.default.Instance.isUnlock(r.UnlockType.partnerSlot2);case r.ePartSlot.Slot3:return!a.default.Instance.isUnlock(r.UnlockType.partnerSlot3);case r.ePartSlot.Slot4:return!a.default.Instance.isUnlock(r.UnlockType.partnerSlot4);case r.ePartSlot.Slot5:return!a.default.Instance.isUnlock(r.UnlockType.partnerSlot5)}return!1},t.prototype.equippedPartner=function(e){this.setData(e)},t.prototype.unEquippedPartner=function(){this.getData().removeListener(this.emitChange,this),this.setData(null)},t}(e("../Domain").default);n.default=s,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../Mgr/Unlock/MgrUnlock":"MgrUnlock","../Domain":"Domain"}],PartnerSlotItem:[function(e,t,n){"use strict";cc._RF.push(t,"0fe07MirN5OcZX+lwr7Qfk/","PartnerSlotItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/BundleMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Platform/Platform"),u=e("../../Tool/Tool"),d=e("../CommonUI/IUIItem"),h=e("../Main_PanelOpen"),p=e("../Mgr/GuideCore/GuideUnlock"),f=e("../Mgr/PartnerMgr"),g=e("../Mgr/Unlock/MgrUnlock"),y=e("../UnlockTip/UnlockTipMgr"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emptyNode=null,t.fingerNode=null,t.redPoint=null,t.unlockSysId=a.UNLOCKSYS_ID.None,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){u.Tool.addClickEvent(this.node,this.onClickNode,this,null,!0,!1)},t.prototype.setUpValue=function(e){this._domain=e,this._domain.addListener(this._refreshUI,this),this.setLock(e.isLocked()),this._refreshUI()},t.prototype._refreshUI=function(){if(!this._domain.isEquippedSkill())return this.iconSprite.node.active=!1,this.setEmpty(!0),void this.setRedPoint(!this._domain.isLocked());this.setEmpty(!1),this.setRedPoint(!1),this.iconSprite.node.active=!0,this.setIcon(this._domain.getData().getIcon())},t.prototype.onClickNode=function(){if(this._domain.isLocked())return f.default.Instance.modeStatus==a.eModeStatus.SelectSlot?void c.default.instance.showToast(l.default.Instance.getLanguage("lock")):void c.default.instance.showToast(y.default.Instance.getUnlockTip(this.unlockSysId));f.default.Instance.modeStatus!=a.eModeStatus.SelectSlot?this._domain.isEquippedSkill()&&h.default.showPartnerDetailWindow(this._domain.getData()):f.default.Instance.changeEquippedPartner(this._domain)},t.prototype.showFinger=function(){this._domain.isLocked()||(this.fingerNode.active=!0)},t.prototype.hideFinger=function(){this.fingerNode.active=!1},t.prototype.onDestroy=function(){this._domain.removeListener(this._refreshUI,this)},t.prototype.setRedPoint=function(e){this.redPoint.active=e},t.prototype.setLock=function(e){this.lockedNode.active=e},t.prototype.setEmpty=function(e){this.emptyNode.active=e},t.prototype.playUnlockAni=function(e){var t=this;if(g.default.guideUnlock)this._playUnlockAni(e);else{var n=cc.find("App");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Common/GuideUnlock",cc.Prefab,function(o,i){if(!o){i.addRef();var r=cc.instantiate(i);g.default.guideUnlock=r.getComponent(p.default),n.addChild(r),t._playUnlockAni(e)}})}},t.prototype._playUnlockAni=function(e){var t=this,n=this.lockedNode.children[this.lockedNode.childrenCount-1];g.default.guideUnlock.init(this.node),n.stopAllActions(),n.position=cc.Vec3.ZERO,cc.tween(this.node).repeat(4,cc.tween(this.node).by(.06,{position:cc.v3(10,0)}).by(.06,{position:cc.v3(-20,0)}).by(.06,{position:cc.v3(10,0)})).call(function(){cc.tween(n).parallel(cc.tween().by(1,{y:-600},{easing:cc.easing.backIn}),cc.tween().by(1,{x:80},{easing:cc.easing.sineIn})).call(function(){var n;t.setEmpty(!0),t.setLock(!1),t.setRedPoint(!0),e&&e(),null===(n=g.default.guideUnlock)||void 0===n||n.resetUI(),t.checkGuide()}).start()}).start()},t.prototype.checkGuide=function(){var e=1e3*this.unlockSysId;g.default.Instance.unlockSlot(e),f.default.Instance.removeUnlockSlotId(this.unlockSysId)},t.prototype.onDisable=function(){var e;null===(e=g.default.guideUnlock)||void 0===e||e.resetUI()},r([_(cc.Node)],t.prototype,"emptyNode",void 0),r([_(cc.Node)],t.prototype,"fingerNode",void 0),r([_(cc.Node)],t.prototype,"redPoint",void 0),r([_({type:cc.Enum(a.UNLOCKSYS_ID)})],t.prototype,"unlockSysId",void 0),r([v],t)}(d.default);n.default=b,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/BundleMgr":"BundleMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../CommonUI/IUIItem":"IUIItem","../Main_PanelOpen":"Main_PanelOpen","../Mgr/GuideCore/GuideUnlock":"GuideUnlock","../Mgr/PartnerMgr":"PartnerMgr","../Mgr/Unlock/MgrUnlock":"MgrUnlock","../UnlockTip/UnlockTipMgr":"UnlockTipMgr"}],PartnerStorageInfo:[function(e,t,n){"use strict";cc._RF.push(t,"8cb751qK5xIsr6WtrltCyph","PartnerStorageInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(e("./BaseStorageInfo").default);n.default=r,cc._RF.pop()},{"./BaseStorageInfo":"BaseStorageInfo"}],Partner:[function(e,t,n){"use strict";cc._RF.push(t,"b531f5Dtu1MuJK2j7vZJaHN","Partner");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s,l=e("../../../plugin/NumberPlus"),c=e("../../Config/EnumTypes"),u=e("../../Mgr/EventMgr"),d=e("../../Tool/Tool"),h=e("../Mgr/PartnerMgr"),p=e("./BattleMgr"),f=e("./Bullet/Bullet"),g=e("./Hero"),y=cc._decorator,m=y.ccclass;y.property,function(e){e.attack="play",e.run="run",e.standby="standby"}(a||(a={})),function(e){e[e.idle=0]="idle",e[e.move=1]="move",e[e.attack=2]="attack"}(s||(s={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletName="partner_bullet_1",t.nowState=s.idle,t.fre=1,t.atk="0",t.delayTime=0,t.id=0,t.tag=0,t.isPlayAtkAnim=!1,t.attackTarget=null,t.attackCD=0,t.isAlreadyDelay=!1,t}return i(t,e),t.prototype.init=function(e,t){this.id=e,this.bulletName="partner_bullet_"+h.default.Instance.getPartnerDomain(e).getBulletId(),this.fre=h.default.Instance.getPartnerDomain(e).getAspd(),this.atk=h.default.Instance.getPartnerDomain(e).getAtk(),this.tag=h.default.Instance.getPartnerDomain(e).getTagInfo().id,this.delayTime=t},t.prototype.onLoad=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.firePos=this.node.getChildByName("firePos"),this.idle(),u.EventMgr.on(c.EventType.Battle_Scene_MoveSpeed_Update,this.moveUpdate,this)},t.prototype.idle=function(){this.nowState=s.idle},t.prototype.run=function(){this.nowState=s.move,this.isAlreadyDelay=!1},t.prototype.moveUpdate=function(e){0==e||p.default.instance.isGold?this.idle():this.run()},t.prototype.attack=function(){if(this.delayAttack(),!(this.attackCD>0)){this.fre=h.default.Instance.getPartnerDomain(this.id).getAspd(),this.atk=h.default.Instance.getPartnerDomain(this.id).getAtk(),this.nowState=s.attack,this.isPlayAtkAnim=!0;var e=this.anim.findAnimation(a.attack).duration/p.default.battleSpeed;this.scheduleOnce(this.attackDo,.5*e),this.scheduleOnce(this.attackEnd,e),this.attackCD=e/this.fre,u.EventMgr.event(c.EventType.Battle_Partner_Attack,this.tag)}},t.prototype.attackDo=function(){this.bulletShoot_target(this.atk,this.attackTarget)},t.prototype.attackEnd=function(){this.idle()},t.prototype.delayAttack=function(){this.isAlreadyDelay||(this.isAlreadyDelay=!0,this.attackCD=this.delayTime/1e3)},t.prototype.update=function(e){if(this.nowState==s.idle&&this.attackCD<=0){var t=p.default.instance.getBulletAtckMonster();0!=t.length?(this.attackTarget=t[d.Tool.randomInt(0,t.length-1)],5!=p.default.instance.nowHero.getComponent(g.default).nowState&&this.attack()):this.isAlreadyDelay=!1}this.attackCD-=e,this.animUpdate()},t.prototype.animUpdate=function(){var e;switch(this.nowState){case s.idle:e=a.standby,this.anim.timeScale=p.default.battleSpeed;break;case s.move:e=a.run,this.anim.timeScale=p.default.battleSpeed;break;case s.attack:this.isPlayAtkAnim&&(e=a.attack,this.anim.timeScale=p.default.battleSpeed,this.isPlayAtkAnim=!1)}this.anim.animation!=e&&e&&this.anim.setAnimation(0,e,!0)},t.prototype.bulletShoot_target=function(e,t){if(this.node.isValid){for(var n,o=0;o<p.default.instance.bulletNode.children.length;o++)0==p.default.instance.bulletNode.children[o].opacity&&p.default.instance.bulletNode.children[o].name==this.bulletName&&(n=p.default.instance.bulletNode.children[o]);n||((n=cc.instantiate(p.default.instance.getBulletPrefab(this.bulletName))).opacity=0,p.default.instance.bulletNode.addChild(n)),n.setPosition(this.firePos.getPosition().add(this.node.getPosition())),n.opacity=255,n.getComponent(f.default).shoot(t,e,!1)}},t.prototype.skill_1=function(){var e,t=l.default.mul(this.atk,.4),n=p.default.instance.getAliveMonster();0!=n.length&&(e=n[d.Tool.randomInt(0,n.length-1)],5!=p.default.instance.nowHero.getComponent(g.default).nowState&&this.bulletShoot_target(t,e))},r([m],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Tool/Tool":"Tool","../Mgr/PartnerMgr":"PartnerMgr","./BattleMgr":"BattleMgr","./Bullet/Bullet":"Bullet","./Hero":"Hero"}],PlatForm_tt:[function(e,t,n){"use strict";cc._RF.push(t,"d45cfEQHX1DwKRxKg80biGm","PlatForm_tt");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Config/EnumTypes"),a=e("../Config/GameData"),s=e("../Mgr/EventMgr"),l=e("../Mgr/StorageMgr"),c=e("./Platform"),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.platformApi=window.tt},t.prototype.showVideo=function(e,t,n,o){void 0===n&&(n="\u6210\u529f\u83b7\u5f97\u5956\u52b1"),void 0===o&&(o="\u89c6\u9891\u5c1a\u5728\u65bd\u5de5\u4e2d~"),a.default.isTest?(e&&e(),a.default.isTest&&console.log("\u89c6\u9891\u6210\u529f"),c.default.instance.showToast(n),s.EventMgr.event(r.GlobalEvent.QuestCommit,r.QUEST_ACTIVE_ID.WatchAds),l.default.instance.addVideoSum()):(t&&t(),a.default.isTest&&console.log("\u89c6\u9891\u5931\u8d25"),c.default.instance.showToast(o))},t}(c.default);n.default=u,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","../Config/GameData":"GameData","../Mgr/EventMgr":"EventMgr","../Mgr/StorageMgr":"StorageMgr","./Platform":"Platform"}],PlatForm_wx:[function(e,t,n){"use strict";cc._RF.push(t,"1cc50XoJhFFOboXBQ09plo7","PlatForm_wx");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Config/EnumTypes"),a=e("../Config/GameData"),s=e("../Mgr/EventMgr"),l=e("../Mgr/StorageMgr"),c=e("./Platform"),u=e("./PlatformConfig"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isShowingVideo=!1,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.platformApi=window.wx,this.showShareMenuWithTicket(!0),this.regisiterWXShareCallback(),this.getSetting()},t.prototype.initAd=function(){this.initVideo()},t.prototype.showShareMenuWithTicket=function(e){window.wx.showShareMenu({withShareTicket:e,success:function(){},fail:function(){},complete:function(){}})},t.prototype.regisiterWXShareCallback=function(){if(window.wx){var e={title:"\u5206\u4eab",image:""};window.wx.onShareAppMessage(function(){return a.default.isTest&&console.log("\u7528\u6237\u70b9\u51fb\u4e86\u8f6c\u53d1\u6309\u94ae"),{title:e.title,imageUrl:e.image,query:"share_id=1",success:function(){a.default.isTest&&console.log("\u5206\u4eab\u6210\u529f1")},fail:function(){a.default.isTest&&console.log("\u5206\u4eab\u5931\u8d251")}}})}},t.prototype.showVideo=function(e,t,n,o){void 0===n&&(n="\u6210\u529f\u83b7\u5f97\u5956\u52b1"),void 0===o&&(o="\u89c2\u770b\u5b8c\u6574\u89c6\u9891\u624d\u80fd\u83b7\u5f97\u5956\u52b1"),this.showRewardedVideoAd(function(){e&&e(),a.default.isTest&&console.log("\u89c6\u9891\u6210\u529f"),c.default.instance.showToast(n),s.EventMgr.event(r.GlobalEvent.QuestCommit,r.QUEST_ACTIVE_ID.WatchAds),l.default.instance.addVideoSum(),l.default.instance.cloudSave()},function(){t&&t(),a.default.isTest&&console.log("\u89c6\u9891\u5931\u8d25"),c.default.instance.showToast(o)})},t.prototype.share=function(){window.wx.shareAppMessage({title:"\u5206\u4eab",imageUrl:"",query:"share_id=1",success:function(){},fail:function(){},complete:function(){}})},t.prototype.getSetting=function(){var e=this;this.platformApi.getSetting({success:function(t){e.isGetInfo=t.authSetting["scope.userInfo"],e.isGetInfo&&e.getUserInfo()}})},t.prototype.showBanner=function(){},t.prototype.hideBanner=function(){},t.prototype.showInsert=function(){this.showInterAd()},t.prototype.initVideo=function(e,t){if(!a.default.isTest)if(window.wx){var n=this;this.videoAd=window.wx.createRewardedVideoAd({adUnitId:u.default.wx.videoAdUnitId}),this.videoAd.onLoad(function(){n.videoLoadSuccess()}),this.videoAd.onError(function(e){n.videoLoadError(e)}),this.videoAd.onClose(function(e){n.videoClose(e)}),this.videoAd.load().then(function(){e&&e()}).catch(function(){t&&t()})}else console.warn("\u8be5\u5e73\u53f0\u6ca1\u6709\u89c6\u9891\u5e7f\u544aAPI")},t.prototype.videoLoadSuccess=function(){a.default.isTest&&console.log("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u6210\u529f")},t.prototype.videoLoadError=function(e){switch(console.error("\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u52a0\u8f7d\u9519\u8bef\uff1a",e),e.errCode){case 1e3:console.warn("\u540e\u7aef\u9519\u8bef\u8c03\u7528\u5931\u8d25,\u4e0d\u662f\u5f00\u53d1\u8005\u95ee\u9898,\u4e00\u822c\u60c5\u51b5\u4e0b\u5ffd\u7565\u4e00\u6bb5\u65f6\u95f4\u5373\u53ef\u6062\u590d"),c.default.instance.showToast("\u89c6\u9891\u5e7f\u544a\u6b63\u5728\u65bd\u5de5\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");break;case 1001:console.error("\u53c2\u6570\u9519\u8bef,\u4f7f\u7528\u65b9\u6cd5\u9519\u8bef\uff0c\u786e\u8ba4\u4e00\u4e0b\u4ee3\u7801\u4f7f\u7528\u903b\u8f91\u662f\u5426\u51fa\u9519"),c.default.instance.showToast("\u89c6\u9891\u5e7f\u544a\u53c2\u6570\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u5f00\u53d1\u8005",1e4);break;case 1002:console.error("\u5e7f\u544a\u5355\u5143\u65e0\u6548,\u4e0e\u540e\u53f0\u786e\u8ba4\u4e00\u4e0b\u8be5\u5e7f\u544aid\u662f\u5426\u6b63\u786e"),c.default.instance.showToast("\u89c6\u9891\u5e7f\u544a\u5355\u5143\u65e0\u6548\uff0c\u8bf7\u53cd\u9988\u7ed9\u5f00\u53d1\u8005",1e4);break;case 1003:console.warn("\u5185\u90e8\u9519\u8bef,\u4e00\u822c\u60c5\u51b5\u4e0b\u5ffd\u7565\u4e00\u6bb5\u65f6\u95f4\u5373\u53ef\u6062\u590d"),c.default.instance.showToast("\u89c6\u9891\u5e7f\u544a\u6b63\u5728\u65bd\u5de5\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");break;case 1004:console.warn("\u65e0\u5408\u9002\u7684\u5e7f\u544a,\u4e00\u822c\u60c5\u51b5\u4e0b\u5ffd\u7565\u4e00\u6bb5\u65f6\u95f4\u5373\u53ef\u6062\u590d"),c.default.instance.showToast("\u89c6\u9891\u5e7f\u544a\u6b63\u5728\u65bd\u5de5\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");break;case 1005:console.error("\u5e7f\u544a\u7ec4\u4ef6\u5ba1\u6838\u4e2d"),c.default.instance.showToast("\u89c6\u9891\u5e7f\u544a\u6b63\u5728\u65bd\u5de5\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");break;case 1006:console.error("\u5e7f\u544a\u7ec4\u4ef6\u88ab\u9a73\u56de,\u8fc7\u5ba1\u5931\u8d25"),c.default.instance.showToast("\u89c6\u9891\u5e7f\u544a\u6b63\u5728\u65bd\u5de5\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");break;case 1007:console.error("\u5e7f\u544a\u7ec4\u4ef6\u88ab\u9a73\u56de,\u88ab\u5c01\u7981\u4e86"),c.default.instance.showToast("\u89c6\u9891\u5e7f\u544a\u6b63\u5728\u65bd\u5de5\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5");break;case 1008:console.error("\u5e7f\u544a\u5355\u5143\u5df2\u5173\u95ed"),c.default.instance.showToast("\u89c6\u9891\u5e7f\u544a\u5df2\u5173\u95ed\uff0c\u8bf7\u53cd\u9988\u7ed9\u5f00\u53d1\u8005",1e4);break;default:c.default.instance.showToast("\u89c6\u9891\u5e7f\u544a\u6b63\u5728\u65bd\u5de5\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}},t.prototype.videoClose=function(e){e&&e.isEnded||void 0===e?this.videoSuccessCb&&this.videoSuccessCb():this.videoFailCb&&this.videoFailCb()},t.prototype.showRewardedVideoAd=function(e,t){if(this.isShowingVideo)a.default.isTest&&console.log("\u89c6\u9891\u6b63\u5728\u64ad\u653e\u6d41\u7a0b\u4e2d");else{this.isShowingVideo=!0,this.videoSuccessCb=e,this.videoFailCb=t;var n=this;if(cc.sys.platform!==cc.sys.WECHAT_GAME||a.default.isTest)this.isShowingVideo=!1,e&&e();else{window.wx.showLoading({title:"\u6b63\u5728\u62c9\u8d77\u5e7f\u544a...",mask:!0}),cc.game.pause();var o=function(){window.wx.hideLoading(),cc.game.resume(),n.isShowingVideo=!1};if(!this.videoAd)return void this.initVideo(function(){o(),n.showRewardedVideoAd(e,t)},function(){o()});this.videoAd.show().then(function(){o()}).catch(function(e){console.error("\u5c55\u793a\u6fc0\u52b1\u89c6\u9891\u5e7f\u544a\u5931\u8d25\uff1a",e),a.default.isTest&&console.log("\u91cd\u65b0\u52a0\u8f7d\u89c6\u9891\u5e7f\u544a,\u91cd\u65b0\u5c55\u793a"),n.videoAd.load().then(function(){o(),n.videoAd.show()}).catch(function(){o()})})}}},t.prototype.createInterAd=function(e){var t=this;if(cc.sys.platform===cc.sys.WECHAT_GAME){if(this.interAd)return void this.interAd.show();this.interAd=window.wx.createInterstitialAd({adUnitId:u.default.wx.interstitialAdUnitId}),this.interAd.onLoad(function(){a.default.isTest&&console.log("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e&&e()}),this.interAd.onError(function(){t.interAd=null,console.error("\u63d2\u5c4f\u5e7f\u544a\u52a0\u8f7d\u5931\u8d25")})}},t.prototype.showInterAd=function(){this.interAd?this.interAd.show().catch(function(e){console.error("\u63d2\u5c4f\u5e7f\u544a\u663e\u793a\u5931\u8d25",e)}):(console.error("\u56e0\u4e3a\u63d2\u5c4f\u52a0\u8f7d\u5931\u8d25\uff0c\u6b63\u5728\u91cd\u65b0\u52a0\u8f7d"),this.createInterAd(this.showInterAd))},t}(c.default);n.default=d,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","../Config/GameData":"GameData","../Mgr/EventMgr":"EventMgr","../Mgr/StorageMgr":"StorageMgr","./Platform":"Platform","./PlatformConfig":"PlatformConfig"}],PlatformConfig:[function(e,t,n){"use strict";cc._RF.push(t,"bce7ctSM8dGhpICrgdoqEIb","PlatformConfig"),Object.defineProperty(n,"__esModule",{value:!0}),n.default={wx:{videoAdUnitId:"adunit-2071978adab5802b",interstitialAdUnitId:"",bannerAdUnitId:""}},cc._RF.pop()},{}],Platform:[function(e,t,n){"use strict";cc._RF.push(t,"b52cdxF8T1Od5EkqXHskyJw","Platform");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Config/EnumTypes"),s=e("../Main/Toast/Toast"),l=e("../Mgr/EventMgr"),c=e("../Mgr/StorageMgr"),u=cc._decorator.ccclass,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isSubPackage=!0,t.isVibrate=!0,t.isGetInfo=!1,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this},t.prototype.initAd=function(){},t.prototype.loadSubPackage=function(e,t,n){this.platformApi&&this.isSubPackage?this.platformApi.loadSubpackage({name:e,success:function(n){console.log("\u5206\u5305\u52a0\u8f7d\u6210\u529f\uff1a",e),t.call(!0,n)},fail:function(n){console.error("\u5206\u5305\u52a0\u8f7d\u5931\u8d25\uff1a",e,JSON.stringify(n)),t.call(!1,n)}}).onProgressUpdate(function(e){n&&n(e.progress)}):(console.log("\u6ca1\u6709\u5e73\u53f0API"),t(!0))},t.prototype.showToast=function(e,t,n){void 0===t&&(t=1e3),void 0===n&&(n=!1),s.default.tip(e)},t.prototype.vibrateShort=function(){this.platformApi&&this.isVibrate?this.platformApi.vibrateShort():cc.log("\u77ed\u9707\u52a8")},t.prototype.vibrateLong=function(){this.platformApi&&this.isVibrate?this.platformApi.vibrateLong():cc.log("\u957f\u9707\u52a8")},t.prototype.regisiterCallback=function(){this.platformApi&&(this.platformApi.offShow(this.onShowEvent),this.platformApi.onShow(this.onShowEvent),this.platformApi.offHide(this.onHideEvent),this.platformApi.onHide(this.onHideEvent))},t.prototype.onShowEvent=function(e){l.EventMgr.event(a.EventType.Platform_Wake_Do,e)},t.prototype.onHideEvent=function(e){l.EventMgr.event(a.EventType.Platform_Hide_Do,e)},t.prototype.showVideo=function(e){this.showToast("\u65e0\u89c6\u9891\uff0c\u9ed8\u8ba4\u53d1\u653e\u5956\u52b1"),l.EventMgr.event(a.GlobalEvent.QuestCommit,a.QUEST_ACTIVE_ID.WatchAds),e&&e(),c.default.instance.addVideoSum()},t.prototype.share=function(){this.showToast("\u65e0\u5206\u4eab\u529f\u80fd")},t.prototype.getSetting=function(){console.log("\u83b7\u53d6\u6388\u6743\u60c5\u51b5,\u6ca1\u6709\u8fd4\u56de\u503c\uff0c\u5efa\u8bae\u53e6\u5916\u7528\u5168\u5c40\u53d8\u91cf\u5b58\u50a8")},t.prototype.getUserInfo=function(e){if(this.platformApi){var t=this;this.platformApi.getUserInfo({success:function(n){t.userInfo=n.userInfo,e&&e(n.userInfo),console.log("\u5df2\u83b7\u53d6\u5e73\u53f0\u7528\u6237\u4fe1\u606f")}})}else e&&e(),console.log("\u65e0\u7528\u6237\u4fe1\u606f")},t.prototype.showBanner=function(){},t.prototype.hideBanner=function(){},t.prototype.showInsert=function(){},n=r([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","../Main/Toast/Toast":"Toast","../Mgr/EventMgr":"EventMgr","../Mgr/StorageMgr":"StorageMgr"}],PropData:[function(e,t,n){"use strict";cc._RF.push(t,"ba8a0ae8HdGpYWUwD7iBOm7","PropData"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../plugin/NumberPlus"),i=e("../../Main/Mgr/PropMgr"),r=function(){function e(){this.atkBase="10",this.atkMaxLevel=-1,this.hpBase="110",this.hpMaxLevel=-1,this.hpRecoveryBase="7",this.hpRecoveryMaxLevel=-1,this.aspdBase=1.01,this.aspdMaxLevel=200,this.criticalChanceBase=.1,this.criticalChanceMaxLevel=1e3,this.criticalDamageBase=121,this.criticalDamageMaxLevel=-1,this.doubleShotChanceBase=0,this.doubleShotChanceMaxLevel=1e3,this.TripleShotChanceBase=0,this.TripleShotChanceMaxLevel=1e3}return Object.defineProperty(e,"instance",{get:function(){return null==this._instance&&(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.calAtk=function(e){return{value:o.default.add(this.atkBase,10*(e-1)),needCoins:e<=100?i.default.Instance.getPropLevelInfo(e).ATK:o.default.mul(155,Math.pow(1.0053,e-100)),isMaxLevel:-1!=this.atkMaxLevel&&e>=this.atkMaxLevel}},e.prototype.calHp=function(e){return{value:o.default.add(this.hpBase,10*(e-1)),needCoins:e<=100?i.default.Instance.getPropLevelInfo(e).HP:o.default.mul(100,Math.pow(1.0053,e-100)),isMaxLevel:-1!=this.hpMaxLevel&&e>=this.hpMaxLevel}},e.prototype.calHpRecovery=function(e){return{value:o.default.add(this.hpRecoveryBase,.7*(e-1)),needCoins:e<=100?i.default.Instance.getPropLevelInfo(e).HPRecovery:o.default.mul(100,Math.pow(1.0053,e-100)),isMaxLevel:-1!=this.hpRecoveryMaxLevel&&e>=this.hpRecoveryMaxLevel}},e.prototype.calAspd=function(e){return{value:this.aspdBase+.01*(e-1),needCoins:e<=100?i.default.Instance.getPropLevelInfo(e).ASPD:o.default.mul(6300,Math.pow(1.03,e-100)),isMaxLevel:-1!=this.aspdMaxLevel&&e>=this.aspdMaxLevel}},e.prototype.calCriticalChance=function(e){return{value:this.criticalChanceBase+.1*(e-1),needCoins:e<=100?i.default.Instance.getPropLevelInfo(e).CriticalHitChance:o.default.mul(6300,Math.pow(1.033,e-100)),isMaxLevel:-1!=this.criticalChanceMaxLevel&&e>=this.criticalChanceMaxLevel}},e.prototype.calCriticalDamage=function(e){return{value:this.criticalDamageBase+1*(e-1),needCoins:e<=100?i.default.Instance.getPropLevelInfo(e).CriticalHitDamage:o.default.mul(77,Math.pow(1.0053,e-100)),isMaxLevel:-1!=this.criticalDamageMaxLevel&&e>=this.criticalDamageMaxLevel}},e.prototype.calDoubleShot=function(e){return{value:.1*(e-1),needCoins:e<=100?i.default.Instance.getPropLevelInfo(e).DoubleShot:o.default.mul(o.default.decode("1B"),Math.pow(1.015,e-100)),isMaxLevel:-1!=this.doubleShotChanceMaxLevel&&e>=this.doubleShotChanceMaxLevel}},e.prototype.calTripleShot=function(e){return{value:.1*(e-1),needCoins:e<=100?i.default.Instance.getPropLevelInfo(e).TripleShot:o.default.mul(o.default.decode("15.6D"),Math.pow(1.08,e-100)),isMaxLevel:-1!=this.TripleShotChanceMaxLevel&&e>=this.TripleShotChanceMaxLevel}},e._instance=null,e}();n.default=r,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Main/Mgr/PropMgr":"PropMgr"}],PropMgr:[function(e,t,n){"use strict";cc._RF.push(t,"e686bpciS5MyoxKz5EfzkeG","PropMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Config/EnumTypes"),a=e("../../Config/GameData"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Mgr/StorageMgr"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.questActiveId=null,t.propMap=new Map,t.propLevelMap=new Map,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;this.questActiveId={},this.propMap.clear(),this.questActiveId[r.PROP_TYPE.ATK]=r.QUEST_ACTIVE_ID.EnhanceAtk,this.questActiveId[r.PROP_TYPE.HP]=r.QUEST_ACTIVE_ID.EnhanceHp,this.questActiveId[r.PROP_TYPE.HPRecovery]=r.QUEST_ACTIVE_ID.EnhanceHPRecovery,this.questActiveId[r.PROP_TYPE.ASPD]=r.QUEST_ACTIVE_ID.EnhanceAspd,this.questActiveId[r.PROP_TYPE.CriticalHitChance]=r.QUEST_ACTIVE_ID.EnhanceCriticalHitChance,this.questActiveId[r.PROP_TYPE.CriticalHitDamage]=r.QUEST_ACTIVE_ID.EnhanceCriticalHitDamage,this.questActiveId[r.PROP_TYPE.DoubleShot]=r.QUEST_ACTIVE_ID.EnhanceDouble,this.questActiveId[r.PROP_TYPE.TripleShot]=r.QUEST_ACTIVE_ID.EnhanceTriple;var o=a.default.getJsonObject("prop");for(var i in o){var l=o[i];for(var u in l){var d=l[u];this.propMap.set(d.id,d)}}for(var i in o=a.default.getJsonObject("propLevel"))for(var u in l=o[i])d=l[u],this.propLevelMap.set(d.id,d);for(var h=r.PROP_TYPE.ATK;h<=r.PROP_TYPE.TripleShot;h++){var p=this.questActiveId[h],f=c.default.instance.getLevel(h);s.EventMgr.event(r.GlobalEvent.QuestCommit,p,f)}},t.prototype.getQuestActiveId=function(e){return this.questActiveId[e]},t.prototype.getPropInfo=function(e){return this.propMap.get(e)},t.prototype.getPropLevelInfo=function(e){return this.propLevelMap.get(e)},t.prototype.getDesc=function(e,t){var n=this.getPropInfo(e);return l.default.Instance.getLanguage(n.desc).replace("%{value}",""+t)},t}(e("../../Mgr/BaseMgr").default);n.default=u,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/StorageMgr":"StorageMgr"}],QuestChain:[function(e,t,n){"use strict";cc._RF.push(t,"20108HkEJ5CX7YtdgX6uTN5","QuestChain");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Config/EnumTypes"),a=e("../../../Config/GameData"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/StorageMgr"),c=e("../GuideCore/GuideMgr"),u=e("../MgrQuest"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._chainQuestId=0,t.delegate=null,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chainQuestId",{get:function(){return this._chainQuestId},set:function(e){this._chainQuestId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userChainQuest",{get:function(){return l.default.instance.storageData.userChainQuest},enumerable:!1,configurable:!0}),t.prototype.load=function(){var e=this;if(this._questDatas={},myGlobalThis.isEmpty(this.userChainQuest)){this._chainQuestId=u.CHAIN_QUEST_DEFAULT_ID;var t=u.default.Instance.getQuestInfo(this._chainQuestId);this.questDatas[t.id]=this.createData(t,r.QUEST_STATUS.Job)}else{var n=0;myGlobalThis.each(this.userChainQuest,function(t){e.questDatas[t.id]=e.createDataWithMemo(t),n=Math.max(n,t.id)}),this._chainQuestId=n}},t.prototype.saveData=function(){var e={};myGlobalThis.each(this.questDatas,function(t){e[t.id]={id:t.id,cur:t.cur,status:t.status}}),l.default.instance.saveUserChainQuest(e)},t.prototype.activeQuest=function(e){var t=u.default.Instance.getQuestInfo(e);myGlobalThis.isNil(t)||this.addQuest(e)},t.prototype.commit=function(e,t){var n=this.getData(this.chainQuestId);n.activeId==e&&n.status>=r.QUEST_STATUS.Job&&(n.upType==r.QUEST_VALUE_UPDATE_TYPE.Count?n.cur+=t:n.cur=this.delegate.getSysValue(n.activeId)),this.onProgress(n),this.saveData()},t.prototype.onProgress=function(e){e.status==r.QUEST_STATUS.Job&&e.cur>=e.max?(e.status=r.QUEST_STATUS.Complete,this.removeActiveQuestId(e.activeId,e.id),s.EventMgr.event(r.GlobalEvent.ChainQuestStatusChange,e.id),c.default.instance.check()):s.EventMgr.event(r.GlobalEvent.ChainQuestProgressChange,e.id)},t.prototype.sendReward=function(t,n){e.prototype.sendReward.call(this,t,n),this.reportMainTask(t)},t.prototype.reportMainTask=function(){},t.prototype.received=function(e){var t=e+1;this.activeQuest(t),this._chainQuestId=t,s.EventMgr.event(r.GlobalEvent.UnlockValueChange,r.UnlockSysType.Task,e),s.EventMgr.event(r.GlobalEvent.ChainQuestStatusChange,e);var n=e-2e4;n>0&&(n<=10?a.default.trackEvent(a.TrackEventKey.key["\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u62101~10"]):n<=20?a.default.trackEvent(a.TrackEventKey.key["\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621011~20"]):n<=30?a.default.trackEvent(a.TrackEventKey.key["\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621021~30"]):n<=40?a.default.trackEvent(a.TrackEventKey.key["\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621031~40"]):n<=50?a.default.trackEvent(a.TrackEventKey.key["\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621041~50"]):n<=60?a.default.trackEvent(a.TrackEventKey.key["\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621051~60"]):n<=70?a.default.trackEvent(a.TrackEventKey.key["\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621061~70"]):n<=80?a.default.trackEvent(a.TrackEventKey.key["\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621071~80"]):n<=90?a.default.trackEvent(a.TrackEventKey.key["\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621081~90"]):a.default.trackEvent(a.TrackEventKey.key["\u4e3b\u7ebf\u4efb\u52a1\u5b8c\u621091~\u4ee5\u4e0a"]))},t.prototype.gotoQuest=function(e){if(this._chainQuestId!=e){var t=this._chainQuestId;this.activeQuest(e),this._chainQuestId=e,s.EventMgr.event(r.GlobalEvent.ChainQuestStatusChange,t)}},t.prototype.complete=function(){var e=this.getData(this.chainQuestId);e.cur=e.max,this.onProgress(e)},t._instance=null,t}(e("./IQuestProxy").default);n.default=d,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../GuideCore/GuideMgr":"GuideMgr","../MgrQuest":"MgrQuest","./IQuestProxy":"IQuestProxy"}],QuestDaily:[function(e,t,n){"use strict";cc._RF.push(t,"2400as+badMZbOOX/5N6Tn1","QuestDaily");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Config/EnumTypes"),a=e("../../../Config/GameData"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/StorageMgr"),c=e("../../../Platform/Platform"),u=e("../MgrQuest"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userDailyQuest",{get:function(){return l.default.instance.storageData.userDailyQuest},enumerable:!1,configurable:!0}),t.prototype.load=function(){var e=this;if(myGlobalThis.isEmpty(this.userDailyQuest)){this._questDatas={};var t=u.default.Instance.getQuests(r.QUEST_TYPE.Daily);myGlobalThis.each(t,function(t){e._questDatas[t.id]=e.createData(t,r.QUEST_STATUS.Job)})}else myGlobalThis.each(this.userDailyQuest,function(t){e._questDatas[t.id]=e.createDataWithMemo(t)})},t.prototype.saveData=function(){var e={};myGlobalThis.each(this.questDatas,function(t){e[t.id]={id:t.id,cur:t.cur,status:t.status}}),l.default.instance.saveUserDailyQuest(e)},t.prototype.dailyReset=function(){var e=this;myGlobalThis.each(this._questDatas,function(t){e.reset(t,r.QUEST_STATUS.Job)}),this.saveData(),s.EventMgr.event(r.GlobalEvent.DailyQuestReset)},t.prototype.onProgress=function(e){e.status==r.QUEST_STATUS.Job&&e.cur>=e.max?u.default.Instance.getQuestInfo(e.id).ad?e.status=r.QUEST_STATUS.InAD:(e.status=r.QUEST_STATUS.Complete,this.removeActiveQuestId(e.activeId,e.id),s.EventMgr.event(r.GlobalEvent.DailyQuestStatusChange,e.id)):s.EventMgr.event(r.GlobalEvent.DailyQuestProgressChange,e.id)},t.prototype.sendReward=function(t,n){e.prototype.sendReward.call(this,t,n),this.reportDailyTask(t)},t.prototype.reportDailyTask=function(){},t.prototype.received=function(e){s.EventMgr.event(r.GlobalEvent.QuestCommit,r.QUEST_ACTIVE_ID.DailyQuest),s.EventMgr.event(r.GlobalEvent.DailyQuestStatusChange,e)},t.prototype.requestAd=function(e,t){var n=this,o=this.getData(e);o.status==r.QUEST_STATUS.InAD?c.default.instance.showVideo(function(){o.status=r.QUEST_STATUS.Complete,n.saveData(),s.EventMgr.event(r.GlobalEvent.DailyQuestComplete,e),t&&t(),a.default.trackEvent(a.TrackEventKey.key["\u6bcf\u65e5\u4efb\u52a1\u5e7f\u544a\u5956\u52b1"])},null):console.error("\u672a\u8fbe\u5230\u53ef\u89c2\u770b\u4efb\u52a1\u72b6\u6001 "+e+" "+r.QUEST_STATUS[o.status])},t.prototype.hasRewardCanGet=function(){var e=!1;return myGlobalThis.each(this.questDatas,function(t){t.status!=r.QUEST_STATUS.Complete||(e=!0)}),e},t.prototype.hasExtraRewardCanGet=function(){var e=!0,t=!1;return myGlobalThis.each(this.questDatas,function(n){n.status!=r.QUEST_STATUS.Complete?n.status==r.QUEST_STATUS.InAD&&(t=!0):e=!1}),e&&t},t}(e("./IQuestProxy").default);n.default=d,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Platform/Platform":"Platform","../MgrQuest":"MgrQuest","./IQuestProxy":"IQuestProxy"}],QuestSevenChallenge:[function(e,t,n){"use strict";cc._RF.push(t,"f770dQ4drtGVoF1N7aq2Q2f","QuestSevenChallenge");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Config/EnumTypes"),a=e("../../../Mgr/EventMgr"),s=e("../../../Mgr/StorageMgr"),l=e("../../../Platform/Platform"),c=e("../MgrQuest"),u=e("../MgrSevenChallenge"),d=e("../Unlock/MgrUnlock"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quests=[],t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.load=function(){var e=this,t=s.default.instance.storageData.userSevenChallengeQuest;myGlobalThis.isEmpty(t)?this.genOpenQuests():(this.quests=[],myGlobalThis.each(t,function(t){e._questDatas[t.id]=e.createDataWithMemo(t),e.quests.push(t.id)}),this.dailyReset())},t.prototype.dailyReset=function(){for(var e=u.default.Instance.getSevenChallengeDay(),t=1;t<=e;t++)this.addDayQuest(t)},t.prototype.addDayQuest=function(e){var t=this,n=u.default.Instance.getDayQuests(e),o=[];myGlobalThis.each(n,function(e){o.push(e.quest),t.quests.find(function(t){return t==e.quest})||t.quests.push(e.quest)}),d.default.Instance.isUnlock(r.UnlockType.SevenChallenge)&&myGlobalThis.each(o,function(e){t.getData(e)||t.addQuest(e)})},t.prototype.getAllQuest=function(){return this._questDatas},t.prototype.genOpenQuests=function(){this._questDatas={},this.quests=this.genQuests(),this.saveData()},t.prototype.getDayQuest=function(e){var t=[];return myGlobalThis.forEach(this._questDatas,function(n){var o=u.default.Instance.getByQuestId(n.id);o&&o.day==e&&t.push(n)}),t},t.prototype.getOpenDayQuest=function(e){var t=[];return myGlobalThis.forEach(this._questDatas,function(n){var o=u.default.Instance.getByQuestId(n.id);o&&o.day<=e&&t.push(n)}),t},t.prototype.getDayReceiveEnableCount=function(e){var t=this.getDayQuest(e),n=0;return myGlobalThis.each(t,function(e){e.status==r.QUEST_STATUS.Complete&&n++}),n},t.prototype.getFinishedQuestNum=function(){var e=0;return myGlobalThis.forEach(this._questDatas,function(t){t.status==r.QUEST_STATUS.Finish&&e++}),e},t.prototype.genQuests=function(){var e=this,t=c.default.Instance.getQuests(r.QUEST_TYPE.SevenChallenge),n=u.default.Instance.getSevenChallengeDay(),o=[];myGlobalThis.each(t,function(e){var t=u.default.Instance.getByQuestId(e.id);t&&t.day<=n&&o.push(e.id)});var i=o;return d.default.Instance.isUnlock(r.UnlockType.SevenChallenge)&&myGlobalThis.each(o,function(t){e.addQuest(t)}),i},t.prototype.saveData=function(){var e={};myGlobalThis.each(this.questDatas,function(t){e[t.id]={id:t.id,cur:t.cur,status:t.status}}),s.default.instance.saveUserSevenChallengeQuest(e)},t.prototype.commit=function(e,t){var n=this;if(d.default.Instance.isUnlock(r.UnlockType.SevenChallenge)){var o=myGlobalThis.clone(this.getActiveQuests(e));myGlobalThis.each(o,function(o){var i=n.getData(o);i.activeId==e&&i.status>=r.QUEST_STATUS.Job&&(i.upType==r.QUEST_VALUE_UPDATE_TYPE.Count?i.cur+=t:i.cur=n.delegate.getSysValue(i.activeId),n.onProgress(i))}),this.saveData()}},t.prototype.onProgress=function(e){e.status==r.QUEST_STATUS.Job&&e.cur>=e.max?(e.status=r.QUEST_STATUS.Complete,this.removeActiveQuestId(e.activeId,e.id),a.EventMgr.event(r.GlobalEvent.SevenChallengeQuestStatusChange,e.id)):a.EventMgr.event(r.GlobalEvent.SevenChallengeQuestProgressChange,e.id)},t.prototype.sendReward=function(t,n){e.prototype.sendReward.call(this,t,n),this.reportSevenChallengeTask(t)},t.prototype.reportSevenChallengeTask=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.received=function(e){a.EventMgr.event(r.GlobalEvent.SevenChallengeQuestStatusChange,e)},t.prototype.requestAd=function(e,t){var n=this,o=this.getData(e);o==r.QUEST_STATUS.InAD?l.default.instance.showVideo(function(){o.status=r.QUEST_STATUS.Complete,n.saveData(),a.EventMgr.event(r.GlobalEvent.SevenChallengeQuestStatusChange,e),t&&t()},null):console.error("\u672a\u8fbe\u5230\u53ef\u89c2\u770b\u4efb\u52a1\u72b6\u6001 "+e+" "+r.QUEST_STATUS[o.status])},t._instance=null,t}(e("./IQuestProxy").default);n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Platform/Platform":"Platform","../MgrQuest":"MgrQuest","../MgrSevenChallenge":"MgrSevenChallenge","../Unlock/MgrUnlock":"MgrUnlock","./IQuestProxy":"IQuestProxy"}],RandomHelper:[function(e,t,n){"use strict";cc._RF.push(t,"cdb4a96WsxIYaLAoRMzN3iW","RandomHelper"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.random=function(e){return Math.random()*e},e.getRandIndex=function(t,n){if(myGlobalThis.isNil(n)){n=0;for(var o=0,i=t;o<i.length;o++)n+=i[o]}for(var r=e.random(n),a=0,s=0;s<t.length;s++)if(r<(a+=t[s]))return s;return t.length-1},e.getElementByWeight=function(t,n,o){n||(n=function(e){return e});var i=myGlobalThis.map(t,n);return t[e.getRandIndex(i,o)]},e.randomNum=function(e,t){return Math.floor(e+(t-e)*Math.random())},e.randomInt=function(e,t){return Math.floor((t-e+1)*Math.random())+e},e}();n.default=o,cc._RF.pop()},{}],RedPoint_Armor:[function(e,t,n){"use strict";cc._RF.push(t,"7c137r7pXVJC4pc+MtrRPbA","RedPoint_Armor");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/StorageMgr"),c=e("../../Mgr/EquipmentMgr"),u=e("./RedPoint"),d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){s.EventMgr.on(a.EventType.Main_UI_Gear_EquipmentBestRedPoint,this.check,this)},t.prototype.check=function(){var e=c.default.Instance.getArmorCanLevelUp()||c.default.Instance.BestArmorId>0&&c.default.Instance.BestArmorId!=l.default.instance.storageData.equippedArmorId;this.node.opacity=e?255:0},r([h],t)}(u.default));n.default=p,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../../Mgr/EquipmentMgr":"EquipmentMgr","./RedPoint":"RedPoint"}],RedPoint_Collection:[function(e,t,n){"use strict";cc._RF.push(t,"e4f1ab6UoVAyYPs13mA2bI5","RedPoint_Collection");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../Mgr/Collection/CollectionData"),l=e("./RedPoint"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.collectionType=a.COLLECTION_TYPE.None,t}return i(t,e),t.prototype.check=function(){var e=s.default.Instance.hasCanLevelUp(this.collectionType);this.node.opacity=e?255:0},r([d({type:a.COLLECTION_TYPE})],t.prototype,"collectionType",void 0),r([u],t)}(l.default);n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../Mgr/Collection/CollectionData":"CollectionData","./RedPoint":"RedPoint"}],RedPoint_Copy:[function(e,t,n){"use strict";cc._RF.push(t,"d67fckGZ0lDWp55FCX+ZY18","RedPoint_Copy");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/StorageMgr"),l=e("../../Mgr/Unlock/MgrUnlock"),c=e("./RedPoint"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=this.getCopyCanIn();this.node.opacity=e?255:0},t.prototype.getCopyCanIn=function(){var e=s.default.instance.storageData;return!(!l.default.Instance.isUnlock(a.UnlockType.bossRush)||!(e.bossRushKey>0||e.bossRushKeyVideo>0))||!(!l.default.Instance.isUnlock(a.UnlockType.goldRush)||!(e.goldRushKey>0||e.goldRushKeyVideo>0))},r([d],t)}(c.default));n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/StorageMgr":"StorageMgr","../../Mgr/Unlock/MgrUnlock":"MgrUnlock","./RedPoint":"RedPoint"}],RedPoint_DailyQuestExtraReward:[function(e,t,n){"use strict";cc._RF.push(t,"68052XWkgFD3qCY0YjB+zWY","RedPoint_DailyQuestExtraReward");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/Quest/QuestDaily"),s=e("./RedPoint"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=a.default.Instance.hasExtraRewardCanGet();this.node.opacity=e?255:0},r([c],t)}(s.default));n.default=u,cc._RF.pop()},{"../../Mgr/Quest/QuestDaily":"QuestDaily","./RedPoint":"RedPoint"}],RedPoint_DailyQuestReward:[function(e,t,n){"use strict";cc._RF.push(t,"6323f/ufL1FDIdFlKQAFdms","RedPoint_DailyQuestReward");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/Quest/QuestDaily"),s=e("./RedPoint"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=a.default.Instance.hasRewardCanGet();this.node.opacity=e?255:0},r([c],t)}(s.default));n.default=u,cc._RF.pop()},{"../../Mgr/Quest/QuestDaily":"QuestDaily","./RedPoint":"RedPoint"}],RedPoint_Hero:[function(e,t,n){"use strict";cc._RF.push(t,"41cbfg5H0lCCKSSu60CbsIt","RedPoint_Hero");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../Mgr/EquipmentMgr"),l=e("../../Mgr/Mastery/MgrMastery"),c=e("../../Mgr/RelicMgr"),u=e("../../Mgr/SkillMgr"),d=e("../../Mgr/Unlock/MgrUnlock"),h=e("./RedPoint"),p=cc._decorator,f=p.ccclass,g=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=d.default.Instance.isUnlock(a.UnlockType.summonGear)&&s.default.Instance.getGearCanLevelUp()||s.default.Instance.hasBestGear()||d.default.Instance.isUnlock(a.UnlockType.skill)&&(u.default.Instance.getSkillCanLevelUp()||u.default.Instance.hasEmptySlot())||d.default.Instance.isUnlock(a.UnlockType.Mastery)&&l.default.Instance.hasCanLvUp||d.default.Instance.isUnlock(a.UnlockType.clearRush)&&c.default.Instance.canFind;this.node.opacity=e?255:0},r([f],t)}(h.default));n.default=g,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../Mgr/EquipmentMgr":"EquipmentMgr","../../Mgr/Mastery/MgrMastery":"MgrMastery","../../Mgr/RelicMgr":"RelicMgr","../../Mgr/SkillMgr":"SkillMgr","../../Mgr/Unlock/MgrUnlock":"MgrUnlock","./RedPoint":"RedPoint"}],RedPoint_Mastery:[function(e,t,n){"use strict";cc._RF.push(t,"744ca1WS4RB+ab3RcvNsyv/","RedPoint_Mastery");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/Mastery/MgrMastery"),s=e("./RedPoint"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=a.default.Instance.hasCanLvUp;this.node.opacity=e?255:0},r([c],t)}(s.default));n.default=u,cc._RF.pop()},{"../../Mgr/Mastery/MgrMastery":"MgrMastery","./RedPoint":"RedPoint"}],RedPoint_Partner:[function(e,t,n){"use strict";cc._RF.push(t,"e5bcfIdvoVGmpvTTI6Kalsp","RedPoint_Partner");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../Mgr/PartnerMgr"),l=e("../../Mgr/Unlock/MgrUnlock"),c=e("./RedPoint"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=l.default.Instance.isUnlock(a.UnlockType.partner)&&(s.default.Instance.hasCanLevelUp()||s.default.Instance.hasEmptySlot());this.node.opacity=e?255:0},r([d],t)}(c.default));n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../Mgr/PartnerMgr":"PartnerMgr","../../Mgr/Unlock/MgrUnlock":"MgrUnlock","./RedPoint":"RedPoint"}],RedPoint_Relic:[function(e,t,n){"use strict";cc._RF.push(t,"5c4b9W6kGVEupUn8/kM2+Pv","RedPoint_Relic");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/RelicMgr"),s=e("./RedPoint"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=a.default.Instance.canFind;this.node.opacity=e?255:0},r([c],t)}(s.default));n.default=u,cc._RF.pop()},{"../../Mgr/RelicMgr":"RelicMgr","./RedPoint":"RedPoint"}],RedPoint_Role:[function(e,t,n){"use strict";cc._RF.push(t,"5c959J2kbhGargwnfYaMYkt","RedPoint_Role");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/EquipmentMgr"),s=e("./RedPoint"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=a.default.Instance.getGearCanLevelUp()||a.default.Instance.hasBestGear();this.node.opacity=e?255:0},r([c],t)}(s.default));n.default=u,cc._RF.pop()},{"../../Mgr/EquipmentMgr":"EquipmentMgr","./RedPoint":"RedPoint"}],RedPoint_SevenChallenge:[function(e,t,n){"use strict";cc._RF.push(t,"07377BXi+xHZ4GuKDidTINA","RedPoint_SevenChallenge");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/MgrSevenChallenge"),s=e("./RedPoint"),l=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=a.default.Instance.hasRedDot();this.node.opacity=e?255:0},r([l],t)}(s.default);n.default=c,cc._RF.pop()},{"../../Mgr/MgrSevenChallenge":"MgrSevenChallenge","./RedPoint":"RedPoint"}],RedPoint_ShopLimitItems:[function(e,t,n){"use strict";cc._RF.push(t,"b20d2ptcHFGjLam4t6tFPjN","RedPoint_ShopLimitItems");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/MgrShop"),s=e("./RedPoint"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=a.default.Instance.getVideoPageEnable();this.node.opacity=e?255:0},r([c],t)}(s.default));n.default=u,cc._RF.pop()},{"../../Mgr/MgrShop":"MgrShop","./RedPoint":"RedPoint"}],RedPoint_Shop:[function(e,t,n){"use strict";cc._RF.push(t,"a65cc6IitlImpt+/uk93a0H","RedPoint_Shop");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/MgrShop"),s=e("../../Mgr/MgrSummon"),l=e("./RedPoint"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=s.default.Instance.freeSummonEnable()||a.default.Instance.getVideoPageEnable();this.node.opacity=e?255:0},r([u],t)}(l.default));n.default=d,cc._RF.pop()},{"../../Mgr/MgrShop":"MgrShop","../../Mgr/MgrSummon":"MgrSummon","./RedPoint":"RedPoint"}],RedPoint_Skill:[function(e,t,n){"use strict";cc._RF.push(t,"37f79pSen9GULWT4G0KHBwB","RedPoint_Skill");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../Mgr/SkillMgr"),l=e("../../Mgr/Unlock/MgrUnlock"),c=e("./RedPoint"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=l.default.Instance.isUnlock(a.UnlockType.skill)&&(s.default.Instance.hasCanLevelUp()||s.default.Instance.hasEmptySlot());this.node.opacity=e?255:0},r([d],t)}(c.default));n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../Mgr/SkillMgr":"SkillMgr","../../Mgr/Unlock/MgrUnlock":"MgrUnlock","./RedPoint":"RedPoint"}],RedPoint_SummonMenu:[function(e,t,n){"use strict";cc._RF.push(t,"e2d9e86Rp1NDInTcQG3iPnr","RedPoint_SummonMenu");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/MgrSummon"),s=e("./RedPoint"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.check=function(){var e=a.default.Instance.freeSummonEnable();this.node.opacity=e?255:0},r([c],t)}(s.default));n.default=u,cc._RF.pop()},{"../../Mgr/MgrSummon":"MgrSummon","./RedPoint":"RedPoint"}],RedPoint_Weapon:[function(e,t,n){"use strict";cc._RF.push(t,"6294btEc41MdpUTadi4uKec","RedPoint_Weapon");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/StorageMgr"),c=e("../../Mgr/EquipmentMgr"),u=e("./RedPoint"),d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){s.EventMgr.on(a.EventType.Main_UI_Gear_EquipmentBestRedPoint,this.check,this)},t.prototype.check=function(){var e=c.default.Instance.getWeaponCanLevelUp()||c.default.Instance.BestWeaponId>0&&c.default.Instance.BestWeaponId!=l.default.instance.storageData.equippedWeaponId;this.node.opacity=e?255:0},r([h],t)}(u.default));n.default=p,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../../Mgr/EquipmentMgr":"EquipmentMgr","./RedPoint":"RedPoint"}],RedPoint:[function(e,t,n){"use strict";cc._RF.push(t,"80e2fPZL+pNOr3O82sD1Ju7","RedPoint");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Res/mod/ScaleAuto"),s=cc._decorator.ccclass,l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){this.addComponent(a.default),this.check(),this.schedule(this.check,1)},t.prototype.check=function(){},r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../Res/mod/ScaleAuto":"ScaleAuto"}],RelicData:[function(e,t,n){"use strict";cc._RF.push(t,"d78b7OYIdVL7plRBH/mpshG","RelicData"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../../../plugin/NumberPlus"),i=e("../../../Config/EnumTypes"),r=e("../../../Mgr/EventMgr"),a=e("../../../Mgr/StorageMgr"),s=e("../RelicMgr"),l=function(){function e(){this.relicDatas={},this.equippedRelics={},this.props={},this._dirty=!1,this.propMap=new Map,this.equippedRelicMap=new Map}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userRelicData",{get:function(){return a.default.instance.storageData.userRelicData},enumerable:!1,configurable:!0}),e.prototype.save=function(){if(this._dirty){this._dirty=!1;var e={};myGlobalThis.each(this.relicDatas,function(t){e[t.id]=t.level});var t={};myGlobalThis.set(t,"relicData",e),myGlobalThis.set(t,"equippedRelics",this.equippedRelics),a.default.instance.saveUserRelicData(t)}},e.prototype.load=function(){var e=this,t={},n={},o={};myGlobalThis.isEmpty(this.userRelicData)||(t=myGlobalThis.get(this.userRelicData,"relicData",{}),n=myGlobalThis.get(this.userRelicData,"equippedRelics",{})),myGlobalThis.isEmpty(t)||myGlobalThis.each(t,function(t,n){var i=myGlobalThis.parseInt(n);o[i]=e.createData(i,t)}),this.relicDatas=o,this.equippedRelics=n,myGlobalThis.each(this.equippedRelics,function(t,n){var o=myGlobalThis.parseInt(n),i=e.getData(t);e.equippedRelicMap.set(o,i)})},e.prototype.init=function(){var e=this;this.props={},myGlobalThis.each(this.relicDatas,function(t){s.default.Instance.getRelicInfo(t.id).props.forEach(function(n){var i=e.getPropObj(n);i.value=o.default.add(i.value,t.propValue)})})},e.prototype.getPropObj=function(e){var t=this.props[e];return myGlobalThis.isNil(t)&&(t=this.props[e]={propType:e,value:"0"}),t},e.prototype.activeProps=function(){var e=this;this.propMap.clear(),myGlobalThis.each(this.props,function(t){e.propMap.set(t.propType,t.value)}),r.EventMgr.event(i.EventType.Main_UI_Relic_CalProp)},e.prototype.calcAllProps=function(){var e=this;myGlobalThis.each(this.props,function(e){e.value="0"});var t={};myGlobalThis.each(this.relicDatas,function(e){s.default.Instance.getRelicInfo(e.id).props.forEach(function(n){var i=t[n]||"0";t[n]=o.default.add(i,e.propValue)})}),myGlobalThis.each(t,function(t,n){var o=myGlobalThis.parseInt(n);e.getPropObj(o).value=t}),this.activeProps()},e.prototype.createData=function(e,t){t||(t=1);var n=s.default.Instance.getRelicInfo(e),i=n.type,r=o.default.add(n.owned,o.default.mul(t-1,n.ownedUP));return n.maxLevel==t&&(r=o.default.mul(Number(r),s.RELIC_TIMES)),{id:e,level:t,type:i,propValue:r,effectValue:o.default.add(n.effectValue,o.default.mul(t-1,n.effectUp)),skillId:n.skillId}},e.prototype.getData=function(e){return this.relicDatas[e]},e.prototype.getRelicCount=function(){return myGlobalThis.keys(this.relicDatas).length},e.prototype.getCurEquipString=function(){for(var e=[],t=0;t<s.RELIC_TYPE_COUNT;t++)e.push(this.getEquip(t+1));return e.join(",")},e.prototype.activeRelic=function(e){this.relicDatas[e]=this.createData(e),r.EventMgr.event(i.GlobalEvent.QuestCommit,i.QUEST_ACTIVE_ID.GetRelic,this.getRelicCount()),this._dirty=!0},e.prototype.lvup=function(e){var t=this.getData(e),n=s.default.Instance.getCost(t.type,t.level);t.level++;var l=s.default.Instance.getRelicInfo(e);t.propValue=o.default.add(l.owned,o.default.mul(t.level-1,l.ownedUP)),l.maxLevel==t.level&&(t.propValue=o.default.mul(t.propValue,s.RELIC_TIMES)),t.effectValue=o.default.add(l.effectValue,o.default.mul(t.level-1,l.effectUp)),r.EventMgr.event(i.GlobalEvent.QuestCommit,i.QUEST_ACTIVE_ID.EnhanceRelic),a.default.instance.addFork(-1*n),this._dirty=!0},e.prototype.equip=function(e){var t=this.getData(e).type;this.equippedRelics[t]=e,this.equippedRelicMap.set(t,this.getData(e)),this._dirty=!0},e.prototype.getEquip=function(e){return this.equippedRelics[e]||-1},e.prototype.getEquips=function(){return this.equippedRelicMap},e.prototype.getPropsMap=function(){return this.propMap},e}();n.default=l,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/StorageMgr":"StorageMgr","../RelicMgr":"RelicMgr"}],RelicMgr:[function(e,t,n){"use strict";cc._RF.push(t,"13863ibeCtC64JHHQjTkPnc","RelicMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.RELIC_TIMES=n.RELIC_TYPE_COUNT=n.RELIC_TOTAL_COUNT=void 0;var r=e("../../../plugin/NumberPlus"),a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/ItemMgr"),u=e("../../Mgr/LanguageMgr"),d=e("../../Mgr/RandomHelper"),h=e("../../Mgr/StorageMgr"),p=e("../../Platform/Platform"),f=e("../../Mgr/BaseMgr"),g=e("./Relic/RelicData"),y=e("./Unlock/MgrUnlock"),m=e("./AssetsMgr");n.RELIC_TOTAL_COUNT=28,n.RELIC_TYPE_COUNT=7,n.RELIC_TIMES=70;var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.relicMap=new Map,t.relicInfos=[],t.relicCostInfos=[],t.relicLevelMap=new Map,t.typeIds=new Map,t.effects={},t.effectSkillId={},t.types=[],t._canFind=!1,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canFind",{get:function(){return this._canFind},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;var o=s.default.getJsonObject("relic");for(var i in o){var r=o[i];for(var a in r){for(var l=r[a].props.split(","),u=0;u<l.length;u++)l[u]=parseInt(l[u]);(y=r[a]).props=l,this.relicInfos.push(y),this.relicMap.set(y.id,y),this.typeIds.has(y.type)||this.typeIds.set(y.type,[]),this.typeIds.get(y.type).push(y.id)}}o=s.default.getJsonObject("relicCost");var d=[];for(var i in o){var h=o[i];for(var a in h){var p=h[a].relicId;d=splitValue(p),(y=h[a]).relicId=d,this.relicCostInfos.push(y)}}for(o=s.default.getJsonObject("relicLevel"),u=c.QualityEnum.Common;u<=c.QualityEnum.Exotic;u++){var f=c.QualityToKey[u],g=o[f];for(var a in this.relicLevelMap.set(u,[]),g){var y=g[a];this.relicLevelMap.get(u).push(parseInt(y.cost))}}var m=this,v=[];myGlobalThis.each(this.relicInfos,function(e){e.owned=Number(e.owned),e.ownedUP=Number(e.ownedUP);var t=myGlobalThis.get(m.typeIds,e.type,[]);t.push(e.id),myGlobalThis.set(m.typeIds,e.type,t),v.push(e.type),e.skillId>0&&(m.effectSkillId[e.skillId]=e.id)}),this.types=myGlobalThis.sortedUniq(v),this.load()},t.prototype.getRelicInfo=function(e){return this.relicMap.get(e)},t.prototype.getType=function(e){return this.relicMap.get(e).type},t.prototype.getAllRelicInfos=function(){return this.relicInfos},t.prototype.getCost=function(e,t){return this.relicLevelMap.get(e)[(t||1)-1]},t.prototype.getTypeIds=function(e){return this.typeIds.get(e)},t.prototype.getCostInfo=function(e){return this.relicCostInfos.find(function(t){return t.count==e})},t.prototype.getSkillEffectId=function(e){return this.effectSkillId[e]},t.prototype.getTypes=function(){return this.types},t.prototype.load=function(){g.default.Instance.load(),g.default.Instance.init(),g.default.Instance.activeProps(),this.findEnable(),l.EventMgr.on(a.GlobalEvent.AssetItemChange+a.ASSET_TYPE.Fork,this.findEnable,this)},t.prototype.lateUpdate=function(){g.default.Instance.save()},t.prototype.lvupEnable=function(e){var t=g.default.Instance.getData(e);if(!myGlobalThis.isNil(t)&&!myGlobalThis.isEmpty(t)){if(this.getRelicInfo(e).maxLevel<=t.level)return!1;var n=this.getCost(t.type,t.level);return h.default.instance.storageData.fork>=n}},t.prototype.lvup=function(e){var t=g.default.Instance.getData(e),n=this.getCost(t.type,t.level);return!(h.default.instance.storageData.fork<n||(g.default.Instance.lvup(e),g.default.Instance.calcAllProps(),this.recallEffect(e),l.EventMgr.event(a.GlobalEvent.RelicLvup,e),0))},t.prototype.reportLevelUp=function(){},t.prototype.reportFind=function(){},t.prototype.isUnlockType=function(e){for(var t=this.getTypeIds(e),n=0;n<t.length;n++){var o=t[n];if(g.default.Instance.getData(o))return!0}return!1},t.prototype.isUnlockAll=function(e){for(var t=this.getTypeIds(e),n=0;n<t.length;n++){var o=t[n];if(!g.default.Instance.getData(o))return!1}return!0},t.prototype.findEnable=function(){if(!y.default.Instance.isUnlock(a.UnlockType.clearRush))return!1;var e=g.default.Instance.getRelicCount();if(e>=n.RELIC_TOTAL_COUNT)return!1;var t=this.getCostInfo(e).cost,o=h.default.instance.storageData.fork;this._canFind=r.default.compare(o,r.default.decode(t))},t.prototype.findRelic=function(){var e=g.default.Instance.getRelicCount();if(e>=n.RELIC_TOTAL_COUNT)return-1;var t=Number(this.getCostInfo(e).cost);return h.default.instance.storageData.fork<t?(p.default.instance.showToast(u.default.Instance.getLanguage("Not enough Fork")),-1):(m.default.Instance.addItem(a.ASSET_TYPE.Fork,t,-1,!0),this.randomGenRelic())},t.prototype.randomGenRelic=function(){var e=g.default.Instance.getRelicCount(),t=this.getCostInfo(e).relicId,o=[];if(t.length>0)o=myGlobalThis.clone(t);else{for(var i=[],r=e;r<n.RELIC_TOTAL_COUNT;r++)(u=this.getCostInfo(r)).relicId.length>0&&i.push.apply(i,u.relicId);var a=this.getAllRelicInfos(),s=[];a.map(function(e){return s.push(e.id)});for(var l=0;l<s.length;l++){var c=myGlobalThis.parseInt(s[l]);if(!g.default.Instance.getData(c)){var u,h=(u=this.getRelicInfo(c)).pre;if(h>0&&!this.isUnlockAll(h))continue;if(u.type>1&&!this.isUnlockType(u.type-1))continue;i.indexOf(c)&&o.push(c)}}}var p=this,f=d.default.getElementByWeight(o,function(e){return p.getRelicInfo(e).rate});return g.default.Instance.activeRelic(f),g.default.Instance.calcAllProps(),f},t.prototype.equip=function(e){var t=this.getRelicInfo(e),n=g.default.Instance.getEquip(t.type);if(n==e)return!1;var o=g.default.Instance.getData(e);return myGlobalThis.isNil(o)?void 0:(g.default.Instance.equip(e),this.activeEffect(n,e),l.EventMgr.event(a.GlobalEvent.RelicEquipedChange,e),!0)},t.prototype.createEffect=function(){},t.prototype.getEffectObj=function(e){var t=this.effects[e];return t||(t=this.effects[e]=this.createEffect(e)),t},t.prototype.recallEffect=function(){},t.prototype.activeRelics=function(){},t.prototype.activeEffect=function(){},t}(f.default);n.default=v,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/RandomHelper":"RandomHelper","../../Mgr/StorageMgr":"StorageMgr","../../Platform/Platform":"Platform","./AssetsMgr":"AssetsMgr","./Relic/RelicData":"RelicData","./Unlock/MgrUnlock":"MgrUnlock"}],ResPanelOpen:[function(e,t,n){"use strict";cc._RF.push(t,"e39d5srSspKs7LgsEWub+vp","ResPanelOpen"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Mgr/BundleMgr"),i=function(){function e(){}return e.show_Common_Pause_Panel=function(e){o.default.loadRes("Prefabs/Common_Pause",cc.Prefab,function(t,n){if(t)console.error("\u6e38\u620f\u6682\u505c\u9762\u677f\u5c55\u793a\u5931\u8d25",t);else if(e&&e.isValid){if(e.getChildByName(n.name))console.warn("\u6e38\u620f\u6682\u505c\u9762\u677f\u5df2\u7ecf\u5c55\u793a\u4e86");else if(!e.getChildByName(n.name)){var o=cc.instantiate(n);e.addChild(o)}}else console.warn("\u6e38\u620f\u6682\u505c\u9762\u677f\u5c55\u793a\u5931\u8d25,\u7236\u8282\u70b9\u4e0d\u5b58\u5728")})},e.show_Get_Power_Panel=function(e){e||(e=cc.find("Canvas")),o.default.loadRes("Prefabs/Common_GetPower",cc.Prefab,function(t,n){if(t)console.error("\u9886\u53d6\u4f53\u529b\u9762\u677f\u5c55\u793a\u5931\u8d25",t);else if(e&&e.isValid)if(e.getChildByName(n.name))console.warn("\u9886\u53d6\u4f53\u529b\u9762\u677f\u5df2\u7ecf\u5c55\u793a\u4e86");else{var o=cc.instantiate(n);e.addChild(o)}else console.warn("\u9886\u53d6\u4f53\u529b\u9762\u677f\u5c55\u793a\u5931\u8d25,\u7236\u8282\u70b9\u4e0d\u5b58\u5728")})},e.panelOpen_SmallToBig=function(e,t,n){void 0===n&&(n=1),e.scale=0,cc.tween(e).to(this.panelShowTime_SmallToBig,{scale:n}).call(function(){t&&t()}).start()},e.panelClose_BigToSmall=function(e,t,n){void 0===n&&(n=1),e.scale=n,cc.tween(e).to(this.panelShowTime_SmallToBig,{scale:0}).call(function(){t&&t()}).start()},e.panelOpen_BottomToTop=function(e,t,n){void 0===n&&(n=0),e.y=-1750,cc.tween(e).to(this.panelShowTime_BottomToTop,{y:n}).call(function(){t&&t()}).start()},e.panelClose_BottomToTop=function(e,t,n){void 0===n&&(n=0);var o=n-1750;cc.tween(e).to(this.panelShowTime_BottomToTop,{y:o}).call(function(){t&&t()}).start()},e.panelOpen_TopToBottom=function(e,t,n){void 0===n&&(n=0),e.y=1750,cc.tween(e).to(this.panelShowTime_TopToBottom,{y:n}).call(function(){t&&t()}).start()},e.panelClose_TopToBottom=function(e,t,n){void 0===n&&(n=0);var o=n+1750;cc.tween(e).to(this.panelShowTime_TopToBottom,{y:o}).call(function(){t&&t()}).start()},e.panelOpen_LeftToRight=function(e,t,n){void 0===n&&(n=0),e.x=-1750,cc.tween(e).to(this.panelShowTime_LeftToRight,{x:n}).call(function(){t&&t()}).start()},e.panelClose_LeftToRight=function(e,t,n){void 0===n&&(n=0);var o=n-1750;cc.tween(e).to(this.panelShowTime_LeftToRight,{x:o}).call(function(){t&&t()}).start()},e.panelOpen_RightToLeft=function(e,t,n){void 0===n&&(n=0),e.x=1750,cc.tween(e).to(this.panelShowTime_RightToLeft,{x:n}).call(function(){t&&t()}).start()},e.panelClose_RightToLeft=function(e,t,n){void 0===n&&(n=0);var o=n+1750;cc.tween(e).to(this.panelShowTime_RightToLeft,{x:o}).call(function(){t&&t()}).start()},e.panelShowTime_SmallToBig=.2,e.panelShowTime_BottomToTop=.2,e.panelShowTime_TopToBottom=.2,e.panelShowTime_LeftToRight=.2,e.panelShowTime_RightToLeft=.2,e}();n.default=i,cc._RF.pop()},{"../Mgr/BundleMgr":"BundleMgr"}],ResPrefabBorn:[function(e,t,n){"use strict";cc._RF.push(t,"e44d77DcHFHErIacypU0fXM","ResPrefabBorn"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Config/EnumTypes"),i=e("../Mgr/BundleMgr"),r=e("../Mgr/EventMgr"),a=function(){function e(){}return e.gameOverFxCreate=function(e,t){var n="Prefabs/Fx/"+(e?"result_right":"result_wrong");i.default.loadRes(n,cc.Prefab,function(e,n){if(e)console.error("\u6e38\u620f\u7ed3\u675f\u52fe\u52fe\u548c\u53c9\u53c9\u751f\u6210\u5931\u8d25",e);else if(t&&t.isValid){var o=cc.instantiate(n);t.addChild(o)}else console.warn("\u6e38\u620f\u7ed3\u675f\u52fe\u52fe\u548c\u53c9\u53c9\u5c55\u793a\u5931\u8d25,\u7236\u8282\u70b9\u4e0d\u5b58\u5728")})},e.guideHandCreate=function(e,t){r.EventMgr.event(o.EventType.Common_GuideHand_Destroy),i.default.loadRes("Prefabs/Comps/finger",cc.Prefab,function(n,o){if(n)console.error("\u65b0\u624b\u6559\u7a0b\u624b\u6307\u6307\u751f\u6210\u5931\u8d25",n);else if(e&&e.isValid){var i=cc.instantiate(o);e.addChild(i),i.setPosition(t)}else console.warn("\u65b0\u624b\u6559\u7a0b\u624b\u6307\u6307\u5c55\u793a\u5931\u8d25,\u7236\u8282\u70b9\u4e0d\u5b58\u5728")})},e}();n.default=a,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","../Mgr/BundleMgr":"BundleMgr","../Mgr/EventMgr":"EventMgr"}],ResearchItem:[function(e,t,n){"use strict";cc._RF.push(t,"2fe28LkA/BPt4ICJcOg8Ixf","ResearchItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),s=e("./ResearchMgr"),l=e("../../../Bundle1_Loading/Scripts/Mgr/ItemMgr"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg_orange=null,t.bg_blue=null,t.bg_grey=null,t.bg_selected=null,t.icon=null,t.prg=null,t.desc=null,t.mat=[],t.lines=[],t.selected=!1,t.isMaxLevel=!1,t}return i(t,e),Object.defineProperty(t.prototype,"Selected",{get:function(){return this.selected},set:function(e){this.selected=e,this.setSelectedHightLight()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"IsMaxLevel",{get:function(){return this.isMaxLevel},set:function(e){this.isMaxLevel=e,this.bg_orange.active=e,this.bg_blue.node.active=!e},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.node.on("click",this.onClick,this)},t.prototype.setData=function(e,t,n,o){this.id=e,this.lv=t,this.data=o,this.unlock=n;for(var i=0;i<this.lines.length;i++)this.lines[i].node.color=this.unlock?l.COLOR_WHITE:l.COLOR_GRAY;s.default.Instance.isMaxLevel(this.id)?(this.prg.fillRange=1,this.desc.string=t.toString()+"/"+this.data[0].MaxLevel,this.IsMaxLevel=!0,this.bg_blue.node.active=!1,this.icon.setMaterial(0,this.mat[0])):(this.bg_blue.node.active=!0,this.bg_blue.setMaterial(0,this.mat[n?0:1]),this.icon.setMaterial(0,this.mat[n?0:1]),this.desc.string=t.toString()+"/"+this.data[0].MaxLevel,this.prg.fillRange=t/this.data[0].MaxLevel)},t.prototype.setSelectedHightLight=function(){this.bg_selected.active=this.selected},t.prototype.onClick=function(){this.Selected=!0,a.EventMgr.event("researchItemClick",this.id,this.lv,this.unlock,this)},t.prototype.clearSelectedStatus=function(){this.Selected=!1},t.prototype.setSelectedStatus=function(e){this.Selected=e},t.prototype.getResearchItemData=function(){return this.data},t.prototype.getLevel=function(){return this.lv},t.prototype.getId=function(){return this.id},r([d(cc.Node)],t.prototype,"bg_orange",void 0),r([d(cc.Sprite)],t.prototype,"bg_blue",void 0),r([d(cc.Node)],t.prototype,"bg_grey",void 0),r([d(cc.Node)],t.prototype,"bg_selected",void 0),r([d(cc.Sprite)],t.prototype,"icon",void 0),r([d(cc.Sprite)],t.prototype,"prg",void 0),r([d(cc.Label)],t.prototype,"desc",void 0),r([d([cc.Material])],t.prototype,"mat",void 0),r([d([cc.Sprite])],t.prototype,"lines",void 0),r([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Mgr/EventMgr":"EventMgr","../../../Bundle1_Loading/Scripts/Mgr/ItemMgr":"ItemMgr","./ResearchMgr":"ResearchMgr"}],ResearchLine:[function(e,t,n){"use strict";cc._RF.push(t,"dcbeagDE21GV6GfhOHf/+E2","ResearchLine");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.lineMap=new Map,t}return i(t,e),t.prototype.start=function(){},r([l(cc.Label)],t.prototype,"label",void 0),r([s],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],ResearchMgr:[function(e,t,n){"use strict";cc._RF.push(t,"1b2a9vuKUpIh7O2a+99JTyA","ResearchMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Bundle1_Loading/Scripts/Mgr/StorageMgr"),a=e("../../../Bundle1_Loading/Scripts/Mgr/BaseMgr"),s=e("../../../Bundle1_Loading/Scripts/Config/ResearchStorageInfo"),l=e("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),c=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),u=e("../../../Bundle1_Loading/Scripts/Config/GameData"),d=e("./MineMgr"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.researchMap=new Map,t.lineMap=new Map,t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.call(this,t))return!1;this.researchMap.clear();var o=u.default.getJsonObject("researchTest");for(var i in o){var a=o[i],l=[];for(var c in a){var d=a[c];l.push(d)}this.researchMap.set(Number(i)-1,l)}var h=0,p=r.default.instance.storageData;if(0===p.researchData.length){l=[];for(var f=0;f<this.researchMap.size;f++){var g=new s.default;g.id=f,g.level=0,g.maxLevel=this.researchMap.get(f).length,g.time=0,g.isLevelUp=!1,l.push(g)}r.default.instance.saveResearchData(l)}p.researchData.forEach(function(e){return h+=e.level}),h!=p.researchTotalCnt&&(p.researchTotalCnt=h,r.default.instance.researchUpgrade(0)),this.load()},t.prototype.load=function(){var e=this;c.EventMgr.on(l.EventType.Research_Buff_Update,function(t){e.refreshBuff(t)},null)},t.prototype.refreshBuff=function(e){switch(e){case 1:case 2:case 3:break;case 100:r.default.instance.saveMineHammerRecoveryTime(d.default.Instance.ShovelRecoveryTime/(1+this.getShovelRecoveryAddition()));break;case 101:r.default.instance.saveMineHammerLimit(d.default.Instance.ShovelLimitUp+this.getShovelUpperLimitAddition())}},t.prototype.getResearchInfo=function(e){if(this.researchMap.has(e))return this.researchMap.get(e);console.error("id\u4e0d\u5b58\u5728",e)},t.prototype.getResearchItemLevel=function(e){for(var t=r.default.instance.storageData.researchData,n=0;n<t.length;n++){var o=t[n];if(o.id===e)return o.level}return 0},t.prototype.getResearchItemMaxLevel=function(e){return this.researchMap.has(e)?this.researchMap.get(e)[0].MaxLevel:(console.error("\u4e0d\u5b58\u5728id"),-1)},t.prototype.isMaxLevel=function(e){return this.getResearchItemLevel(e)>=this.getResearchItemMaxLevel(e)},t.prototype.isAllPreViewMaxLevel=function(e){for(var t=this.getResearchInfo(e)[0],n=0;n<t.PreView.length;n++)if(!1===this.isMaxLevel(t.PreView[n]-1))return!1;return!0},t.prototype.isUnlock=function(e){return!!(1===this.getResearchInfo(e)[0].PreView.length&&0===this.getResearchInfo(e)[0].PreView[0]||this.isAllPreViewMaxLevel(e))},t.prototype.isHasLevelUpItem=function(){for(var e=r.default.instance.storageData.researchData,t=0;t<e.length;t++)if(!0===e[t].isLevelUp)return!0;return!1},t.prototype.getLevelUpItemData=function(){for(var e=r.default.instance.storageData.researchData,t=0;t<e.length;t++){var n=e[t];if(!0===n.isLevelUp)return n}return null},t.prototype.getDiamondConsume=function(e){return 10*Math.ceil(e/60)},t.prototype.getAtkAddition=function(){if(0===this.researchMap.size)return 0;for(var e=0,t=r.default.instance.storageData.researchData,n=this.researchMap,o=0;o<t.length;o++){var i=t[o];i.level>0&&1===n.get(i.id)[0].AdditionType&&(e+=n.get(i.id)[i.level-1].Addition)}return e},t.prototype.getHpAddition=function(){for(var e=0,t=r.default.instance.storageData.researchData,n=this.researchMap,o=0;o<t.length;o++){var i=t[o];i.level>0&&2===n.get(i.id)[0].AdditionType&&(e+=n.get(i.id)[i.level-1].Addition)}return e},t.prototype.getHpRecoveryAddition=function(){for(var e=0,t=r.default.instance.storageData.researchData,n=this.researchMap,o=0;o<t.length;o++){var i=t[o];i.level>0&&3===n.get(i.id)[0].AdditionType&&(e+=n.get(i.id)[i.level-1].Addition)}return e},t.prototype.getShovelUpperLimitAddition=function(){for(var e=0,t=r.default.instance.storageData.researchData,n=this.researchMap,o=0;o<t.length;o++){var i=t[o];i.level>0&&101===n.get(i.id)[0].AdditionType&&(e+=n.get(i.id)[i.level-1].Addition)}return e},t.prototype.getShovelRecoveryAddition=function(){for(var e=0,t=r.default.instance.storageData.researchData,n=this.researchMap,o=0;o<t.length;o++){var i=t[o];i.level>0&&100===n.get(i.id)[0].AdditionType&&(e+=n.get(i.id)[i.level-1].Addition)}return e},t.prototype.getResearchSpeedAddition=function(){for(var e=0,t=r.default.instance.storageData.researchData,n=this.researchMap,o=0;o<t.length;o++){var i=t[o];i.level>0&&103===n.get(i.id)[0].AdditionType&&(e+=n.get(i.id)[i.level-1].Addition)}return e},t.prototype.getMineCubeAddition=function(){for(var e=0,t=r.default.instance.storageData.researchData,n=this.researchMap,o=0;o<t.length;o++){var i=t[o];i.level>0&&102===n.get(i.id)[0].AdditionType&&(e+=n.get(i.id)[i.level-1].Addition)}return e},t.prototype.getResearchJsonData=function(){return this.researchMap},t}(a.default);n.default=h,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":"EnumTypes","../../../Bundle1_Loading/Scripts/Config/GameData":"GameData","../../../Bundle1_Loading/Scripts/Config/ResearchStorageInfo":"ResearchStorageInfo","../../../Bundle1_Loading/Scripts/Mgr/BaseMgr":"BaseMgr","../../../Bundle1_Loading/Scripts/Mgr/EventMgr":"EventMgr","../../../Bundle1_Loading/Scripts/Mgr/StorageMgr":"StorageMgr","./MineMgr":"MineMgr"}],ResearchStorageInfo:[function(e,t,n){"use strict";cc._RF.push(t,"a36cdVhuL5NQLBKITAFDXiK","ResearchStorageInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(e("./BaseStorageInfo").default);n.default=r,cc._RF.pop()},{"./BaseStorageInfo":"BaseStorageInfo"}],RotationAuto:[function(e,t,n){"use strict";cc._RF.push(t,"7c23eSMzdVA1oMwooNWLbdo","RotationAuto");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=a.property,c=a.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.speed=60,t}return i(t,e),t.prototype.update=function(e){this.node.angle+=this.speed*e},r([l(cc.Float)],t.prototype,"speed",void 0),r([s,c("Mod/RotationAuto")],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],RouletteMgr:[function(e,t,n){"use strict";cc._RF.push(t,"85a6cF8jBRFWZCuPaTjD9Vk","RouletteMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Config/GameData"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rouletteInfos=[],t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.apply(this,t))return!1;var o=r.default.getJsonObject("roulette");for(var i in o){var a=o[i];for(var s in a){var l=a[s];this.rouletteInfos.push(l)}}},t.prototype.getInfo=function(e){return this.rouletteInfos.find(function(t){return t.id==e})},t.prototype.getInfos=function(){return this.rouletteInfos},t}(e("../../Mgr/BaseMgr").default);n.default=a,cc._RF.pop()},{"../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr"}],ScaleAuto:[function(e,t,n){"use strict";cc._RF.push(t,"e6fe7vAbApLt4kzkrdDjM5n","ScaleAuto");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=(a.property,a.menu),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseScale=1,t}return i(t,e),t.prototype.onLoad=function(){this.baseScale=this.node.scale},t.prototype.onEnable=function(){this.doScale()},t.prototype.doScale=function(){var e=this;this.node.scale=this.baseScale,this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).to(.5,{scale:1.2*this.baseScale}).to(.5,{scale:this.baseScale}).call(function(){e.doScale()}).start()},r([s,l("Mod/ScaleAuto")],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],ScaleOnce:[function(e,t,n){"use strict";cc._RF.push(t,"b631cUHrrFD97lgL7y4z37b","ScaleOnce");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=(a.property,a.menu),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){var e=this.node.scale;this.node.scale=0,cc.tween(this.node).to(1,{scale:e},{easing:"elasticOut"}).start()},r([s,l("Mod/ScaleOnce")],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],SceneCrl:[function(e,t,n){"use strict";cc._RF.push(t,"9eb81rdqXxFTrkKqPq0W5tY","SceneCrl");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Tool/Tool"),c=e("./BattleMgr"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.far=[],t.center=[],t.near=[],t.farMoveSpeed=.4,t.centerMoveSpeed=.8,t.nearMoveSpeed=1,t.speed=0,t.offset=50,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this,this.far=l.Tool.findAllNodeHasName(this.node,"far"),this.center=l.Tool.findAllNodeHasName(this.node,"center"),this.near=l.Tool.findAllNodeHasName(this.node,"near")},t.prototype.speedUpdate=function(e){this.speed=e},t.prototype.update=function(e){if(s.EventMgr.event(a.EventType.Battle_Scene_MoveSpeed_Update,this.speed),0!=this.speed){for(var t=0;t<this.far.length;t++)this.far[t].x-=this.speed*e*c.default.battleSpeed*this.farMoveSpeed,this.far[t].x<=-this.far[t].width+this.offset&&(this.far[t].x+=2*this.far[t].width);for(t=0;t<this.center.length;t++)this.center[t].x-=this.speed*e*c.default.battleSpeed*this.centerMoveSpeed,this.center[t].x<=-this.center[t].width+this.offset&&(this.center[t].x+=2*this.center[t].width);for(t=0;t<this.near.length;t++)this.near[t].x-=this.speed*e*c.default.battleSpeed*this.nearMoveSpeed,this.near[t].x<=-this.near[t].width+this.offset&&(this.near[t].x+=2*this.near[t].width);if(c.default.instance.monsterIsMove)for(t=0;t<c.default.instance.nowMonsters.length;t++)c.default.instance.nowMonsters[t].x-=this.speed*e*c.default.battleSpeed}},n=r([d],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Tool/Tool":"Tool","./BattleMgr":"BattleMgr"}],Secrect:[function(e,t,n){"use strict";cc._RF.push(t,"d8d5bBDF1JPrZCJMNXye4iQ","Secrect");var o=this;Object.defineProperty(n,"__esModule",{value:!0});var i=e("./JS/crypto-js.js"),r=function(){function e(){}return e.init=function(){this.key=i.enc.Hex.parse(this.key),this.iv=i.enc.Hex.parse(this.iv)},e.encrypt=function(e){return i.AES.encrypt(e,this.key,{iv:this.iv,mode:i.mode.CBC,padding:i.pad.Pkcs7}).toString()},e.decrypt=function(e){return i.AES.decrypt(e,this.key,{iv:this.iv,mode:i.mode.CBC,padding:i.pad.Pkcs7}).toString(i.enc.Utf8)},e.keySize=24,e.ivSize=16,e.key="33fc24f720da1b59fc19f3575ec5d5db5f0ecb55e7b670f8",e.iv="234d9362a95a7c3aa3b3d414a52a6e32",e.generateKey=function(){return i.lib.WordArray.random(o.keySize).toString(i.enc.Hex)},e.generateIV=function(){return i.lib.WordArray.random(o.ivSize).toString(i.enc.Hex)},e}();n.default=r,cc._RF.pop()},{"./JS/crypto-js.js":"crypto-js"}],ShakeAuto:[function(e,t,n){"use strict";cc._RF.push(t,"557f2p+555Nnrv4GlNhpags","ShakeAuto");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Tool/Tool"),s=cc._decorator,l=s.ccclass,c=(s.property,s.menu),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.start=function(){var e=this;a.Tool.objectShake(this.node),this.schedule(function(){a.Tool.objectShake(e.node)},2)},r([l,c("Mod/ShakeAuto")],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../Tool/Tool":"Tool"}],Shake:[function(e,t,n){"use strict";cc._RF.push(t,"d3c3aWHUSZJQp6PM5FhOJZR","Shake");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frequency=.05,t._running=!1,t.duration=0,t._initial_x=0,t._initial_y=0,t._strength_x=0,t._strength_y=0,t}return i(t,e),t.prototype.start=function(){this._initial_x=this.node.x,this._initial_y=this.node.y},t.prototype.play=function(e,t,n){this._running&&this.stop(),this.duration=e,this._strength_x=t||0,this._strength_y=0!==n?n:t,this._running=!0},t.prototype.stop=function(){this.node.x=this._initial_x,this.node.y=this._initial_y,this._running=!1},t.prototype.fgRangeRand=function(e,t){return e+Math.random()*(t-e)},t.prototype.onEnable=function(){this.schedule(this.fixedUpdate,this.frequency,cc.macro.REPEAT_FOREVER)},t.prototype.onDisable=function(){this.unscheduleAllCallbacks()},t.prototype.fixedUpdate=function(e){this._running&&(this.duration-=e,this.duration<=0?(this.stop(),this.node.emit("shake-finish")):(this.node.x=this._initial_x+this.fgRangeRand(-this._strength_x,this._strength_x),this.node.y=this._initial_y+this.fgRangeRand(-this._strength_y,this._strength_y)))},r([l()],t.prototype,"frequency",void 0),r([s],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],ShopSummonResultWindow:[function(e,t,n){"use strict";cc._RF.push(t,"ef4699lmmZEkKr9dQbDmzZr","ShopSummonResultWindow");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/StorageMgr"),c=e("../../Res/ResPanelOpen"),u=e("../../Tool/Tool"),d=e("../CommonUI/AsyncQueue"),h=e("../CommonUI/Shake"),p=e("../CommonUI/UIItemPool"),f=e("../Mgr/EquipmentMgr"),g=e("../Mgr/GuideCore/GuideEnums"),y=e("../Mgr/GuideCore/GuideMgr"),m=e("../Mgr/MgrSummon"),v=e("../Mgr/PartnerMgr"),_=e("../Mgr/SkillMgr"),b=e("./ISummonResultView"),S=cc._decorator,M=S.ccclass,C=S.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnSummon11=null,t.btnSummon35=null,t.btnClose=null,t.price11Label=null,t.price35Label=null,t.optionsNode=null,t.shake=null,t.itemTool=null,t}return i(t,e),t.prototype.reuse=function(e){this.clear(),this.layout.enabled=!0,this.type=e.type,this.results=e.results,this.playResults()},t.prototype.onLoad=function(){this.layoutOriginWidth=this.layout.node.width,this.layoutOriginHeight=this.layout.node.height},t.prototype.start=function(){u.Tool.addClickEvent(this.btnSummon11,this.onClickBtnSummon11,this),u.Tool.addClickEvent(this.btnSummon35,this.onClickBtnSummon35,this),u.Tool.addClickEvent(this.btnClose,this.close,this),s.EventMgr.event(a.EventType.Common_TeachSummon_NextStep,3)},t.prototype.onClose=function(){},t.prototype.onEnable=function(){this.refreshBtnStatus()},t.prototype.onDisable=function(){this.unscheduleAllCallbacks()},t.prototype.onClickBtnSummon11=function(){m.default.Instance.diamondSummon(this.type,a.eShopSummonPrice.SUMMON_PRICE_NORMAL),this.refreshBtnStatus()},t.prototype.onClickBtnSummon35=function(){m.default.Instance.diamondSummon(this.type,a.eShopSummonPrice.SUMMON_PRICE_FULL),this.refreshBtnStatus()},t.prototype.createItem=function(e){var t=this.getCfg(this.type,e.id);return this.addItem(t.quality,t.icon,t.name,e.id,this.type)},t.prototype.playResults=function(){var e=this;this.layout.type=cc.Layout.Type.HORIZONTAL,this.layout.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.layout.node.height=this.layoutOriginHeight,this.optionsNode.active=!1,this.resultAsync=new d.default;for(var t=0,n=function(n){var o=t,i=e.results[n];e.resultAsync.push(function(r){var s=e.createItem(i);e.items.push(s),n<5?s.node.y=0:5==n?(e.layout.node.width=e.layoutOriginWidth,e.layout.type=cc.Layout.Type.GRID):25==n&&(e.scrollView.enabled=!0),e.layout.enabled=!0,e.layout.updateLayout(),e.layout.enabled=!1,e.scrollView.content.height=Math.max(e.layoutOriginHeight,e.layout.node.height);var l=Math.floor(n/5);l!=o&&(t=l,e.scrollView.scrollToBottom(0));var c=.018,u=!1,d=0;switch(e.type){case a.eSUMMONTYPE.Gear:case a.eSUMMONTYPE.Weapon:case a.eSUMMONTYPE.Armor:var h=f.default.Instance.getGearInfo(i.id);h.quality>=4&&i.isNew&&(c+=.6,u=!0),d=h.quality;break;case a.eSUMMONTYPE.Skill:var p=_.default.Instance.getSkillInfo(i.id);p.quality>=4&&i.isNew&&(c+=.6,u=!0),d=p.quality;break;case a.eSUMMONTYPE.Partner:var g=v.default.Instance.getPartnerInfo(i.id);g.quality>=4&&i.isNew&&(c+=.6,u=!0),d=g.quality}s.node.stopAllActions(),u?(s.node.scale=1.8,s.node.opacity=0,cc.tween(s.node).delay(.2).call(function(){e.shake.play(.2,15,15)}).to(.2,{scale:1,opacity:255},{easing:cc.easing.sineIn}).start()):(s.node.scale=1.2,cc.tween(s.node).to(.2,{scale:1}).start()),s.playGlow(d),e.scheduleOnce(r,c)})},o=0;o<this.results.length;o++)n(o);this.resultAsync.push(function(t){e.scheduleOnce(t,.2)}),this.resultAsync.push(function(t){e.optionsNode.active=!0,e.scheduleOnce(function(){y.default.instance.checkSpecial(g.SpecialGuideEnum.CloseSkillView),y.default.instance.checkSpecial(g.SpecialGuideEnum.CloseGearView),y.default.instance.checkSpecial(g.SpecialGuideEnum.ClosePartnerView),t()},.1)}),this.resultAsync.play()},t.prototype.refreshBtnStatus=function(){var e=l.default.instance.storageData.diamond;this.price11Label.node.color=e>=a.eShopSummonPrice.SUMMON_PRICE_NORMAL?cc.Color.WHITE:cc.Color.RED,this.price35Label.node.color=e>=a.eShopSummonPrice.SUMMON_PRICE_FULL?cc.Color.WHITE:cc.Color.RED,this.btnSummon11.getComponentInChildren(cc.Sprite).setState(l.default.instance.storageData.diamond>=500?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY),this.btnSummon35.getComponentInChildren(cc.Sprite).setState(l.default.instance.storageData.diamond>=1500?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY)},t.prototype.close=function(){var e=this.node.getChildByName("base"),t=this;c.default.panelClose_BigToSmall(e,function(){t.node.destroy(),s.EventMgr.event(a.EventType.Common_TeachSummon_NextStep,4),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchHeroButton),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchHeroButton2),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchUpgradePartnerButton)})},r([C(cc.Node)],t.prototype,"btnSummon11",void 0),r([C(cc.Node)],t.prototype,"btnSummon35",void 0),r([C(cc.Node)],t.prototype,"btnClose",void 0),r([C(cc.Label)],t.prototype,"price11Label",void 0),r([C(cc.Label)],t.prototype,"price35Label",void 0),r([C(cc.Node)],t.prototype,"optionsNode",void 0),r([C(h.default)],t.prototype,"shake",void 0),r([C(p.default)],t.prototype,"itemTool",void 0),r([M],t)}(b.default);n.default=T,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/AsyncQueue":"AsyncQueue","../CommonUI/Shake":"Shake","../CommonUI/UIItemPool":"UIItemPool","../Mgr/EquipmentMgr":"EquipmentMgr","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/MgrSummon":"MgrSummon","../Mgr/PartnerMgr":"PartnerMgr","../Mgr/SkillMgr":"SkillMgr","./ISummonResultView":"ISummonResultView"}],ShopSummonStorageInfo:[function(e,t,n){"use strict";cc._RF.push(t,"bdff1FIvZVFzalOMbqLtkqn","ShopSummonStorageInfo"),Object.defineProperty(n,"__esModule",{value:!0});n.default=function(){this.level=1,this.count=0,this.total=0},cc._RF.pop()},{}],ShopToggle:[function(e,t,n){"use strict";cc._RF.push(t,"3f4cc1CF2hHxbxxrCXbvc4p","ShopToggle");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../CommonUI/CommonToggle"),s=cc._decorator,l=s.ccclass,c=(s.property,s.menu),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggle=null,t.delegate=null,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.toggle=this.node.getComponent(cc.Toggle),this.underLine=this.nameLabel.getComponent(cc.LabelOutline)||this.nameLabel.addComponent(cc.LabelOutline),this.underLine.width=3},t.prototype.onToggle=function(){this.delegate&&this.delegate.onToggle(this)},t.prototype.refreshValue=function(){if(this.lockNode&&this.lockNode.active)return this.nameLabel.node.color=this.lockColor,void(this.underLine.enabled=!0);var e=this.toggle.isChecked;this.nameLabel.node.color=e?this.selectedColor:this.normalColor,this.underLine.enabled=!e},r([l,c("Component/ShopToggle")],t)}(a.default);n.default=u,cc._RF.pop()},{"../CommonUI/CommonToggle":"CommonToggle"}],ShopVideoView:[function(e,t,n){"use strict";cc._RF.push(t,"2af6fQH5tFGH4araKs7mXJC","ShopVideoView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/BundleMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Res/ResPanelOpen"),u=e("../../Tool/Tool"),d=e("../Mgr/MgrSummon"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnCancel=null,t.btnConfirm=null,t.nextLabel=null,t.curLabel=null,t.maxLabel=null,t.summonType=a.eSUMMONTYPE.Gear,t}var n;return i(t,e),n=t,t.prototype.setType=function(e){this.summonType=e,u.Tool.findNodeByName(this.node,"view"+this.summonType).active=!0;var t=d.default.Instance.getAdCount(this.summonType);this.btnConfirm.getComponent(cc.Sprite).setState(t>0?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY)},t.prototype.onLoad=function(){u.Tool.addClickEvent(this.btnCancel,this.close,this),u.Tool.addClickEvent(this.btnConfirm,this.onClickConfirm,this)},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");c.default.panelOpen_SmallToBig(e);var t=d.default.Instance.calcAdSummonCnt(this.summonType);this.nextLabel.string=l.default.Instance.getLanguage("next_Summon_count").replace("%{count}",""+Math.min(t+1,d.SUMMON_AD_LIMIT)),this.curLabel.string="x"+t,this.maxLabel.string="("+l.default.Instance.getLanguage("max_Summon_count").replace("%{count}",d.SUMMON_AD_LIMIT+"")+")"},t.prototype.close=function(){var e=this.node.getChildByName("base"),t=this;c.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},t.prototype.onClickConfirm=function(){d.default.Instance.getAdCount(this.summonType)<=0||(d.default.Instance.adSummon(this.summonType),this.close())},t.open=function(e){var t=cc.find("Canvas").getChildByName("panel2");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Shop/ShopVideoView",cc.Prefab,function(o,i){if(o)console.error("\u6212\u6307\u5206\u89e3\u754c\u9762\u5c55\u793a\u5931\u8d25",o);else{var r=cc.instantiate(i);r.getComponent(n).setType(e),t.addChild(r)}})},r([f(cc.Node)],t.prototype,"btnCancel",void 0),r([f(cc.Node)],t.prototype,"btnConfirm",void 0),r([f(cc.Label)],t.prototype,"nextLabel",void 0),r([f(cc.Label)],t.prototype,"curLabel",void 0),r([f(cc.Label)],t.prototype,"maxLabel",void 0),n=r([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/BundleMgr":"BundleMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Mgr/MgrSummon":"MgrSummon"}],SignMgr:[function(e,t,n){"use strict";cc._RF.push(t,"5ab9603EB9Bm4elVkZhwqKY","SignMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../Config/EnumTypes"),a=e("../../Config/GameData"),s=e("../../Mgr/StorageMgr"),l=e("../../Mgr/TimerHelper"),c=e("../Main_PanelOpen"),u=e("../../Mgr/BaseMgr"),d=e("./Unlock/MgrUnlock"),h=e("../../Mgr/EventMgr"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isOpened=!1,t.totalCount=7,t.callBack=null,t.infos=[],t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weekReceiveDays",{get:function(){return s.default.instance.storageData.weekReceiveDays},set:function(e){s.default.instance.saveWeekReceiveDays(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"weekReceiveDate",{get:function(){return s.default.instance.storageData.weekReceiveDate},set:function(e){s.default.instance.saveWeekReceiveDate(e)},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e.prototype.initJson.call(this,t)){var o=a.default.getJsonObject("sevenLogin");for(var i in o){var s=o[i];for(var l in s){var c=s[l];this.infos.push(c)}}h.EventMgr.on(r.GlobalEvent.UnlockSign,this.CheckOpenDialog,this)}},t.prototype.info=function(e){return this.infos.find(function(t){return t.id==e})},t.prototype.OpenWeekDialog=function(e){this.callBack=e,this.CheckOpenDialog()},t.prototype.CheckOpenDialog=function(){if(this.isOpened)this.callBack&&this.callBack();else if(this.weekReceiveDays>=this.totalCount)this.callBack&&this.callBack();else{if(!d.default.Instance.isUnlock(r.UnlockType.sign))return void(this.callBack&&this.callBack());this.weekReceiveDate<=0?(this.OpenDialog(),this.isOpened=!0):l.default.isSame(this.weekReceiveDate,l.default.GetNowTime(),"days")?this.callBack&&this.callBack():(this.OpenDialog(),this.isOpened=!0)}},t.prototype.OpenDialog=function(){c.default.show_Week_Sign_Panel(this.callBack)},t.prototype.GetReceiveState=function(e){return 1==e&&0==this.weekReceiveDays?r.WeekRewardState.Complete:this.weekReceiveDays>e-1?r.WeekRewardState.Received:this.weekReceiveDays==e-1?r.WeekRewardState.Complete:r.WeekRewardState.NotComplete},t.prototype.GetWeekCfg=function(e){return this.info(e)},t.prototype.SignToDay=function(){this.weekReceiveDays=this.weekReceiveDays+1,this.weekReceiveDate=l.default.GetNowTime()},t.prototype.getSignDays=function(){return this.weekReceiveDays},t}(u.default);n.default=p,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Mgr/TimerHelper":"TimerHelper","../Main_PanelOpen":"Main_PanelOpen","./Unlock/MgrUnlock":"MgrUnlock"}],SignWindow:[function(e,t,n){"use strict";cc._RF.push(t,"fa8ffrWZ0ROoaJxU7Ym8O5t","SignWindow");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Res/ResPanelOpen"),c=e("../../Tool/Tool"),u=e("../Mgr/AssetsMgr"),d=e("../Mgr/GuideCore/GuideEnums"),h=e("../Mgr/GuideCore/GuideMgr"),p=e("../Mgr/SignMgr"),f=e("./UISignItem"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeBack=null,t.btnSure=null,t.signItems=[],t}return i(t,e),t.prototype.onEnable=function(){this.btnSure.active=!1;var e=this.node.getChildByName("base");l.default.panelOpen_SmallToBig(e),c.Tool.addClickEvent(this.btnSure,this.close,this),this.signItems=this.node.getComponentsInChildren(f.default),this.scheduleOnce(this.signToDay,1)},t.prototype.signToDay=function(){for(var e=this,t=1;t<=7;t++)if(p.default.Instance.GetReceiveState(t)==a.WeekRewardState.Complete){var n=p.default.Instance.GetWeekCfg(t);u.default.Instance.addItem(Number(n.name),Number(n.count)),p.default.Instance.SignToDay(),this.signItems[t-1].playAnim(function(){e.btnSure.active=!0,h.default.instance.checkSpecial(d.SpecialGuideEnum.TouchSignAnyWhere)});break}},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.setCloseCallback=function(e){this.closeBack=e},t.prototype.close=function(){this.closeBack&&this.closeBack();var e=this.node.getChildByName("base"),t=this;l.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},r([m(cc.Node)],t.prototype,"btnSure",void 0),r([y],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Mgr/AssetsMgr":"AssetsMgr","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/SignMgr":"SignMgr","./UISignItem":"UISignItem"}],SkillDetailWindow:[function(e,t,n){"use strict";cc._RF.push(t,"9cfberbBnNKcpbHhPbOVxfm","SkillDetailWindow");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Language/LanguageLabel"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Platform/Platform"),u=e("../../Res/ResPanelOpen"),d=e("../../Tool/Tool"),h=e("../CommonUI/IDetailView"),p=e("../Main_PanelOpen"),f=e("../Mgr/GuideCore/GuideEnums"),g=e("../Mgr/GuideCore/GuideMgr"),y=e("../Mgr/SkillMgr"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.descLabel=null,t.cdLabel=null,t.btnUnEquip=null,t.btnLeft=null,t.btnRight=null,t.lock=null,t.arrowLeft=null,t.arrowRight=null,t.curIndex=-1,t}return i(t,e),t.prototype.onEnable=function(){e.prototype.onEnable.call(this),d.Tool.addClickEvent(this.btnUnEquip,this.onClickBtnUnEquip,this),d.Tool.addClickEvent(this.btnLeft,this.onClickLeft,this),d.Tool.addClickEvent(this.btnRight,this.onClickRight,this);var t=this.node.getChildByName("base");u.default.panelOpen_SmallToBig(t,function(){l.EventMgr.event(s.EventType.Common_TeachSkill_NextStep,4)}),this.scheduleOnce(function(){g.default.instance.checkSpecial(f.SpecialGuideEnum.TouchEquipSkillButton)})},t.prototype.setUpValue=function(e){this.curIndex=y.default.Instance.getSkillDomains().findIndex(function(t){return t==e}),this.refreshUI(e),this.refreshArrow()},t.prototype.refreshUI=function(e){var t;null===(t=this.domain)||void 0===t||t.removeListener(this._refreshUI,this),this.domain=e,this.domain.addListener(this._refreshUI,this),this._refreshUI()},t.prototype._refreshUI=function(){this.setName(this.domain.getName()),this.setQualityName(this.domain.getQuality(),this.domain.getQualityName()),this.setOwn(this.domain.getOwnValue()),this.setLevel(this.domain.getCurLevel()||1),this.setProgress(this.domain.getCurCount(),this.domain.getNextLevelCostCount()),this.setQuality(this.domain.getQuality()),this.setIcon(this.domain.getIcon()),this.setStrengthenRedPoint(this.domain.canLevelUp()),this.descLabel.string="<outline color=#000000 width=2>"+this.domain.getSkillDesc()+"</outline>",this.setCdTime(this.domain.getCd()),this.btnEquip.active=!this.domain.isEquipped(),this.btnUnEquip.active=this.domain.isEquipped(),this.lock.active=this.domain.isLock();var e=this.domain.isLock()?cc.Sprite.State.GRAY:cc.Sprite.State.NORMAL;this.btnEquip.getComponentInChildren(cc.Sprite).setState(e),this.btnStrengthen.getComponentInChildren(cc.Sprite).setState(e)},t.prototype.setCdTime=function(e){this.cdLabel.getComponent(a.default).setVars("cd",e.toString())},t.prototype.onClickBtnEquip=function(){this.domain.isLock()?c.default.instance.showToast("\u6280\u80fd\u672a\u89e3\u9501"):(g.default.instance.checkSpecial(f.SpecialGuideEnum.TouchCloseSkillView),y.default.Instance.equippedSkill(this.domain)==s.eEquipDomainStatus.Full&&(y.default.Instance.modeStatus=s.eModeStatus.SelectSlot,l.EventMgr.event(s.EventType.Main_UI_Skill_SkillModeChange,this.domain)),l.EventMgr.event(s.EventType.Common_TeachSkill_NextStep,5),this.closeWindow())},t.prototype.onClickBtnStrengthen=function(){if(this.domain.isLock())c.default.instance.showToast("\u6280\u80fd\u672a\u89e3\u9501");else if(this.domain.canLevelUp()){var e=y.default.Instance.levelUp(this.domain.getId());p.default.showStrengthWindow({type:s.StrengthenType.Skill,results:e})}else c.default.instance.showToast("\u6240\u9700\u6280\u80fd\u6570\u91cf\u4e0d\u8db3")},t.prototype.onClickBtnUnEquip=function(){y.default.Instance.unEquippedSkill(this.domain),this.closeWindow()},t.prototype.closeWindow=function(){var e=this,t=this.node.getChildByName("base"),n=this;u.default.panelClose_BigToSmall(t,function(){e.domain.removeListener(e._refreshUI,e),n.node.destroy(),e.domain=null})},t.prototype.refreshArrow=function(){this.btnLeft.active=this.curIndex>0,this.btnRight.active=this.curIndex<y.default.Instance.getSkillDomains().length-1,this.arrowLeft.active=!this.btnLeft.active,this.arrowRight.active=!this.btnRight.active},t.prototype.onClickLeft=function(){this.curIndex--;var e=y.default.Instance.getSkillDomains()[this.curIndex];this.setUpValue(e)},t.prototype.onClickRight=function(){this.curIndex++;var e=y.default.Instance.getSkillDomains()[this.curIndex];this.setUpValue(e)},r([_(cc.RichText)],t.prototype,"descLabel",void 0),r([_(cc.Label)],t.prototype,"cdLabel",void 0),r([_(cc.Node)],t.prototype,"btnUnEquip",void 0),r([_(cc.Node)],t.prototype,"btnLeft",void 0),r([_(cc.Node)],t.prototype,"btnRight",void 0),r([_(cc.Node)],t.prototype,"lock",void 0),r([_(cc.Node)],t.prototype,"arrowLeft",void 0),r([_(cc.Node)],t.prototype,"arrowRight",void 0),r([v],t)}(h.default);n.default=b,cc._RF.pop()},{"../../../Language/LanguageLabel":"LanguageLabel","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/IDetailView":"IDetailView","../Main_PanelOpen":"Main_PanelOpen","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/SkillMgr":"SkillMgr"}],SkillDomain:[function(e,t,n){"use strict";cc._RF.push(t,"28899DB2KpHU7WDRQNslm0e","SkillDomain");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../plugin/NumberPlus"),a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/ItemMgr"),l=e("../../../Mgr/LanguageMgr"),c=e("../../../Mgr/StorageMgr"),u=e("../../Mgr/SkillMgr"),d=function(e){function t(t,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i=e.call(this)||this;return i._level=0,i._curCount=0,i._desc="",i._skillInfo=t,i._level=n,i._curCount=o,i._desc=l.default.Instance.getLanguage(t.desc),i.setData(i._skillInfo),i}return i(t,e),t.prototype.getId=function(){return this._skillInfo.id},t.prototype.getSkillInfo=function(){return this._skillInfo},t.prototype.getCurLevel=function(){return this._level},t.prototype.getCurCount=function(){return this._curCount},t.prototype.getNextLevelCostCount=function(){return this.getCurLevel()>=u.default.Instance.getMaxLevel(this.getQuality())?-1:u.default.Instance.getSkillLevelInfo(this.getQuality(),this.getCurLevel()||1).cost},t.prototype.getName=function(){return l.default.Instance.getLanguage(this._skillInfo.name)},t.prototype.getIcon=function(){return s.default.Instance.getSkillIcon(this._skillInfo.icon)},t.prototype.getQuality=function(){return this._skillInfo.quality},t.prototype.getQualityName=function(){return s.default.Instance.getQualityName(this.getQuality())},t.prototype.getQualityIcon=function(){return s.default.Instance.getQualityIcon(this.getQuality())},t.prototype.getSkillDesc=function(){return this._desc.replace("%{value}",""+this.getProp()).replace("%{duration}",""+this._skillInfo.duration).replace("%{count}",""+this._skillInfo.tiggerCnt)},t.prototype.getCd=function(){return this._skillInfo.cd},t.prototype.isLock=function(){return 0==this._curCount&&0==this._level},t.prototype.canLevelUp=function(){return this.getCurLevel()<u.default.Instance.getMaxLevel(this.getQuality())&&this.getCurCount()>=this.getNextLevelCostCount()},t.prototype.isEquipped=function(){var e=this;return c.default.instance.storageData.usingSkillIds.some(function(t){return t==e.getId()})},t.prototype.getOwnValue=function(){return u.default.Instance.getSkillLevelInfo(this.getQuality(),this.getCurLevel()||1).owned},t.prototype.getProp=function(){var e=this.getData();switch(e.baseProp){case a.PROP_TYPE.ATK:case a.PROP_TYPE.ASPD:case a.PROP_TYPE.BuffAspd:return r.default.add(r.default.decode(e.baseValue),r.default.mul(r.default.decode(e.upValue),(this.getCurLevel()||1)-1));default:console.error("\u6682\u672a\u5b9e\u73b0\u5c5e\u6027\uff1a"+e.baseProp)}},t.prototype.addCount=function(e){this._curCount+=e,this._level<=0&&(this._level=1)},t.prototype.levelUp=function(){if(!this.canLevelUp())return null;for(var e=this.getCurCount(),t=this._level,n=u.default.Instance.getMaxLevel(this.getQuality());this._curCount-=this.getNextLevelCostCount(),this._level++,!(this._level>=n);){var o=this.getNextLevelCostCount();if(o<=0||this._curCount<o)break}var i=this._curCount-e;return this.emitChange(),{id:this.getId(),prev:t,curr:this._level,cost:i,quality:this.getQuality()}},t}(e("../Domain").default);n.default=d,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Mgr/ItemMgr":"ItemMgr","../../../Mgr/LanguageMgr":"LanguageMgr","../../../Mgr/StorageMgr":"StorageMgr","../../Mgr/SkillMgr":"SkillMgr","../Domain":"Domain"}],SkillListItem:[function(e,t,n){"use strict";cc._RF.push(t,"03f68QyYE5JMJjPDq6krWrk","SkillListItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Tool/Tool"),c=e("../CommonUI/IUIItem"),u=e("../Main_PanelOpen"),d=e("../Mgr/SkillMgr"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnEquip=null,t.btnUnEquip=null,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),l.Tool.addClickEvent(this.btnEquip,this.onClickBtnEquip,this),l.Tool.addClickEvent(this.btnUnEquip,this.onClickBtnUnEquip,this),l.Tool.addClickEvent(this.node,this.onClickNode,this)},t.prototype.setUpValue=function(e,t){this._domain=e,this.node.parent=t,this._domain.addListener(this._refreshUI,this),this._refreshUI()},t.prototype._refreshUI=function(){this.setQuality(this._domain.getQuality()),this.setIcon(this._domain.getIcon()),this.setLock(this._domain.isLock()),this.setEquipped(this._domain.isEquipped()),this.setArrow(this._domain.canLevelUp()),this.setProgress(this._domain.getCurCount(),this._domain.getNextLevelCostCount()),this.setLevel(this._domain.getCurLevel()),this.levelLabel.node.active=!this._domain.isLock(),this.btnEquip.active=!this._domain.isLock()&&!this._domain.isEquipped(),this.btnUnEquip.active=this._domain.isEquipped()},t.prototype.onClickBtnEquip=function(){d.default.Instance.equippedSkill(this._domain)==a.eEquipDomainStatus.Full&&(d.default.Instance.modeStatus=a.eModeStatus.SelectSlot,s.EventMgr.event(a.EventType.Main_UI_Skill_SkillModeChange,this._domain)),s.EventMgr.event(a.EventType.Common_TeachSkill_NextStep,5)},t.prototype.onClickBtnUnEquip=function(){d.default.Instance.unEquippedSkill(this._domain)},t.prototype.onClickNode=function(){u.default.showSkillDetailWindow(this._domain)},t.prototype.onDestroy=function(){this._domain.removeListener(this._refreshUI,this)},r([f(cc.Node)],t.prototype,"btnEquip",void 0),r([f(cc.Node)],t.prototype,"btnUnEquip",void 0),r([p],t)}(c.default);n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Tool/Tool":"Tool","../CommonUI/IUIItem":"IUIItem","../Main_PanelOpen":"Main_PanelOpen","../Mgr/SkillMgr":"SkillMgr"}],SkillMgr:[function(e,t,n){"use strict";cc._RF.push(t,"2d342yrlJNLiKbAaf4d6iYX","SkillMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../plugin/NumberPlus"),a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/ItemMgr"),u=e("../../Mgr/RandomHelper"),d=e("../../Mgr/StorageMgr"),h=e("../Domains/Skill/SkillDomain"),p=e("../Domains/Skill/SkillSlotDomain"),f=e("../../Mgr/BaseMgr"),g=e("./Unlock/MgrUnlock"),y=e("../Role/Main_RolePanel"),m=e("../Main_UI"),v=e("../Battle/BattleMgr"),_=e("./GuideCore/GuideMgr"),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skillInfos=[],t.skillDomains=[],t.skillSlotDomains=[],t.skillLevelMap=new Map,t.maxLevelMap=new Map,t.skillSlotDomainMap=new Map,t.modeStatus=a.eModeStatus.Normal,t.ownedPropAddition="0",t._heroSkillId=-1,t.unlockSlotIds=[],t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"heroSkillId",{get:function(){return this._heroSkillId},set:function(e){var t=this._heroSkillId;this._heroSkillId=e,l.EventMgr.event(a.GlobalEvent.ChangeHeroSkill,e,t)},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!e.prototype.initJson.call(this,n))return!1;this.initSkillLevelValue(),this.initSkillInfoValue(),this.calOwnValue(),l.EventMgr.on(a.EventType.TestForAddSkill,function(){t.Instance.getSkillInfos().forEach(function(e){2==e.type&&t.Instance.addSkillItem(e.id,u.default.randomNum(30,100))})},this),l.EventMgr.on(a.GlobalEvent.UnlockSkillCol2,this.checkUnlockSkillSlot,this),l.EventMgr.on(a.GlobalEvent.UnlockSkillCol3,this.checkUnlockSkillSlot,this),l.EventMgr.on(a.GlobalEvent.UnlockSkillCol4,this.checkUnlockSkillSlot,this),l.EventMgr.on(a.GlobalEvent.UnlockSkillCol5,this.checkUnlockSkillSlot,this),l.EventMgr.on(a.GlobalEvent.UnlockSkillCol6,this.checkUnlockSkillSlot,this)},t.prototype.checkUnlockSkillSlot=function(e){m.default.instance.uiState==a.MainUIState.Mine||_.default.instance.isInGuide()||_.default.instance.isCompleteSpecialGuide(1e3*e)||(this.unlockSlotIds.includes(e)||this.unlockSlotIds.push(e),v.default.instance.pause(),y.default.nowBottomBtnState=y.rolePanel_BottomBtnState.Skill,m.default.instance.jumpToPage(a.MainPage.Role))},t.prototype.getUnlockSlotIds=function(){return this.unlockSlotIds},t.prototype.removeUnlockSlotId=function(e){var t=this.unlockSlotIds.indexOf(e);t>=0&&this.unlockSlotIds.splice(t,1),v.default.instance.resume()},t.prototype.convertSkillSysIdToSlotIndex=function(e){return e%100-1},t.prototype.initSkillInfoValue=function(){var e=this,t=s.default.getJsonObject("skill");for(var n in t){var o=t[n];for(var i in o){var r=o[i];this.skillInfos.push(r)}}var l=d.default.instance.storageData.skillStorageInfos;this.skillInfos.forEach(function(t){if(2==t.type){var n=l.find(function(e){return e.id==t.id}),o=new h.default(t,null==n?void 0:n.level,null==n?void 0:n.count);e.skillDomains.push(o)}});for(var c=d.default.instance.storageData.usingSkillIds,u=function(e){var t=new p.default(e,f.skillDomains.find(function(t){return t.getId()==c[e]}));f.skillSlotDomains.push(t),f.skillSlotDomainMap.set(e,t)},f=this,g=0;g<a.eSkillSlot.Max;g++)u(g)},t.prototype.initSkillLevelValue=function(){this.skillLevelMap.clear();for(var e=[],t=0,n=s.default.getJsonObject("skillLevel"),o=c.QualityEnum.Common;o<=c.QualityEnum.Exotic;o++){var i=n[c.QualityToKey[o]];if(i){for(var a in e=[],t=0,i){var l=i[a];l.owned=r.default.decode(l.owned),e.push(l),t<l.level&&(t=l.level)}this.maxLevelMap.set(o,t),this.skillLevelMap.set(o,e)}}},t.prototype.getSkillInfo=function(e){return this.skillInfos.find(function(t){return t.id==e})},t.prototype.isNew=function(e){var t=d.default.instance.storageData.skillStorageInfos.find(function(t){return t.id==e});return!Boolean(t)},t.prototype.getSkillInfos=function(){return this.skillInfos},t.prototype.getQualitySkills=function(e){return this.skillInfos.filter(function(t){return t.quality==e})},t.prototype.getSkillLevelInfo=function(e,t){return this.skillLevelMap.get(e)[t-1]},t.prototype.getSkillDomains=function(){return this.skillDomains},t.prototype.getSkillCanLevelUp=function(){if(!g.default.Instance.isUnlock(a.UnlockType.skill))return!1;for(var e=0;e<this.skillDomains.length;e++)if(this.skillDomains[e].canLevelUp())return!0;return!1},t.prototype.getSkillDomain=function(e){return this.skillDomains.find(function(t){return t.getId()==e})},t.prototype.getMaxLevel=function(e){return this.maxLevelMap.get(e)},t.prototype.addSkillItem=function(e,t){this.skillDomains.find(function(t){return t.getId()==e}).addCount(t),d.default.instance.addSkillItem(e,t),this.calOwnValue()},t.prototype.addSkillItems=function(e){for(var t=this,n=new Map,o=0;o<e.length;o++){var i=e[o];n.has(i)||n.set(o,0),n.set(i,n.get(i)+1)}n.forEach(function(e,n){t.skillDomains.find(function(e){return e.getId()==n}).addCount(e)}),d.default.instance.addSkillItems(n),this.calOwnValue()},t.prototype.getSkillSlotDomain=function(e){return this.skillSlotDomainMap.get(e)},t.prototype.hasCanLevelUp=function(){return this.skillDomains.some(function(e){return e.canLevelUp()})},t.prototype.levelUp=function(e){var t=this.getSkillDomains();if(e){var n=t.find(function(t){return t.getId()==e}),o=n.levelUp();d.default.instance.strengthenSkill(n),this.calOwnValue();var i={id:o.id,prev:o.prev,curr:o.curr};return l.EventMgr.event(a.GlobalEvent.SkillLevelUp,i),[o]}var r=[],s=[],c=[];return t.forEach(function(e){var t=e.levelUp();t&&(r.push(t),s.push(e),c.push({id:t.id,prev:t.prev,curr:t.curr}))}),s.length>0&&(d.default.instance.strengthenSkills(s),this.calOwnValue()),c.length>0&&l.EventMgr.event(a.GlobalEvent.SkillLevelUpAll,c),r},t.prototype.hasEmptySlot=function(){return this.skillSlotDomains.some(function(e){return!e.isLocked()&&!e.isEquippedSkill()})},t.prototype.equippedSkill=function(e){var t=this.skillSlotDomains.find(function(e){return!e.isLocked()&&!e.isEquippedSkill()});return t?(t.equippedSkill(e),d.default.instance.equippedSkill(t),e.emitChange(),a.eEquipDomainStatus.Success):(this.skillInMode=e,a.eEquipDomainStatus.Full)},t.prototype.unEquippedSkill=function(e){var t=this.skillSlotDomains.find(function(t){return t.getId()==e.getId()});t.unEquippedSkill(),d.default.instance.unEquippedSkill(t),e.emitChange()},t.prototype.changeEquippedSkill=function(e){var n=e.getData();e.unEquippedSkill(),this.equippedSkill(this.skillInMode),this.skillInMode=null,t.Instance.modeStatus=a.eModeStatus.Normal,n.emitChange(),l.EventMgr.event(a.EventType.Main_UI_Skill_SkillModeChange)},t.prototype.calOwnValue=function(){var e="0";myGlobalThis.each(this.skillDomains,function(t){t.isLock()||(e=r.default.add(r.default.decode(e),r.default.decode(t.getOwnValue())))}),this.ownedPropAddition=e,s.default.skillAddAtk=this.ownedPropAddition,l.EventMgr.event(a.EventType.Battle_Hero_Prop_Update)},t.prototype.getOwnedValue=function(){return this.ownedPropAddition},t.prototype.getData=function(e){return d.default.instance.storageData.skillStorageInfos.find(function(t){return t.id==e})},t.prototype.getOwnedCount=function(){return d.default.instance.storageData.skillStorageInfos.length},t.prototype.getMaxOwnId=function(){var e=d.default.instance.storageData.skillStorageInfos;if(e.length<=0)return-1;for(var t="0",n=-1,o="0",i=0;i<e.length;i++){var a=e[i],s=this.getSkillDomain(a.id);o=s.getOwnValue(),r.default.compare(o,t)&&(t=o,n=s.getId())}return n},t}(f.default);n.default=b,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/RandomHelper":"RandomHelper","../../Mgr/StorageMgr":"StorageMgr","../Battle/BattleMgr":"BattleMgr","../Domains/Skill/SkillDomain":"SkillDomain","../Domains/Skill/SkillSlotDomain":"SkillSlotDomain","../Main_UI":"Main_UI","../Role/Main_RolePanel":"Main_RolePanel","./GuideCore/GuideMgr":"GuideMgr","./Unlock/MgrUnlock":"MgrUnlock"}],SkillSlotDomain:[function(e,t,n){"use strict";cc._RF.push(t,"eba907HpuZPmJXb5KtOjST/","SkillSlotDomain");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../Config/EnumTypes"),a=e("../../Mgr/Unlock/MgrUnlock"),s=function(e){function t(t,n){var o=e.call(this)||this;return o.slotIndex=t,n&&n.addListener(o.emitChange,o),o.setData(n),o}return i(t,e),t.prototype.getId=function(){return this.isEquippedSkill()?this.getData().getId():0},t.prototype.getSlotIndex=function(){return this.slotIndex},t.prototype.isEquippedSkill=function(){return Boolean(this.getData())},t.prototype.isLocked=function(){switch(this.slotIndex){case r.eSkillSlot.Skill1:return!a.default.Instance.isUnlock(r.UnlockType.skill);case r.eSkillSlot.Skill2:return!a.default.Instance.isUnlock(r.UnlockType.skillSlot2);case r.eSkillSlot.Skill3:return!a.default.Instance.isUnlock(r.UnlockType.skillSlot3);case r.eSkillSlot.Skill4:return!a.default.Instance.isUnlock(r.UnlockType.skillSlot4);case r.eSkillSlot.Skill5:return!a.default.Instance.isUnlock(r.UnlockType.skillSlot5);case r.eSkillSlot.Skill6:return!a.default.Instance.isUnlock(r.UnlockType.skillSlot6)}return!1},t.prototype.equippedSkill=function(e){e.addListener(this.emitChange,this),this.setData(e)},t.prototype.unEquippedSkill=function(){this.getData().removeListener(this.emitChange,this),this.setData(null)},t}(e("../Domain").default);n.default=s,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../Mgr/Unlock/MgrUnlock":"MgrUnlock","../Domain":"Domain"}],SkillSlotItem:[function(e,t,n){"use strict";cc._RF.push(t,"5b721/faH9MDoKPfR3QirSf","SkillSlotItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/BundleMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Platform/Platform"),u=e("../../Tool/Tool"),d=e("../CommonUI/IUIItem"),h=e("../Main_PanelOpen"),p=e("../Mgr/GuideCore/GuideUnlock"),f=e("../Mgr/SkillMgr"),g=e("../Mgr/Unlock/MgrUnlock"),y=e("../UnlockTip/UnlockTipMgr"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emptyNode=null,t.fingerNode=null,t.btnUnEquip=null,t.redPoint=null,t.unlockSysId=a.UNLOCKSYS_ID.None,t}return i(t,e),t.prototype.onLoad=function(){u.Tool.addClickEvent(this.node,this.onClickNode,this,null,!0,!1),u.Tool.addClickEvent(this.btnUnEquip,this.onClickUnEquip,this,null)},t.prototype.setUpValue=function(e){this._domain=e,this._domain.addListener(this._refreshUI,this),this.setLock(e.isLocked()),this._refreshUI()},t.prototype._refreshUI=function(){if(!this._domain.isEquippedSkill())return this.levelLabel.node.active=!1,this.setEmpty(!0),this.btnUnEquip.active=!1,this.iconSprite.node.active=!1,void this.setRedPoint(!this._domain.isLocked());this.levelLabel.node.active=!0,this.setEmpty(!1),this.setRedPoint(!1),this.btnUnEquip.active=!0,this.iconSprite.node.active=!0,this.setIcon(this._domain.getData().getIcon()),this.setLevel(this._domain.getData().getCurLevel())},t.prototype.onClickNode=function(){if(this._domain.isLocked())return f.default.Instance.modeStatus==a.eModeStatus.SelectSlot?void c.default.instance.showToast(l.default.Instance.getLanguage("lock")):void c.default.instance.showToast(y.default.Instance.getUnlockTip(this.unlockSysId));f.default.Instance.modeStatus!=a.eModeStatus.SelectSlot?this._domain.isEquippedSkill()&&h.default.showSkillDetailWindow(this._domain.getData()):f.default.Instance.changeEquippedSkill(this._domain)},t.prototype.showFinger=function(){this._domain.isLocked()||(this.fingerNode.active=!0,this.btnUnEquip.active=!1)},t.prototype.hideFinger=function(){this.fingerNode.active=!1,this.btnUnEquip.active=this._domain.isEquippedSkill()},t.prototype.onClickUnEquip=function(){f.default.Instance.unEquippedSkill(this._domain.getData())},t.prototype.onDestroy=function(){this._domain.removeListener(this._refreshUI,this)},t.prototype.setRedPoint=function(e){this.redPoint.active=e},t.prototype.setLock=function(e){this.lockedNode.active=e},t.prototype.setEmpty=function(e){this.emptyNode.active=e},t.prototype.playUnlockAni=function(e){var t=this;if(g.default.guideUnlock)this._playUnlockAni(e);else{var n=cc.find("App");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Common/GuideUnlock",cc.Prefab,function(o,i){if(!o){i.addRef();var r=cc.instantiate(i);g.default.guideUnlock=r.getComponent(p.default),n.addChild(r),t._playUnlockAni(e)}})}},t.prototype._playUnlockAni=function(e){var t=this,n=this.lockedNode.children[this.lockedNode.childrenCount-1];g.default.guideUnlock.init(this.node),g.default.guideUnlock.node.active=!0,n.stopAllActions(),n.position=cc.Vec3.ZERO,cc.tween(this.node).repeat(4,cc.tween(this.node).by(.06,{position:cc.v3(10,0)}).by(.06,{position:cc.v3(-20,0)}).by(.06,{position:cc.v3(10,0)})).call(function(){cc.tween(n).parallel(cc.tween().by(1,{y:-600},{easing:cc.easing.backIn}),cc.tween().by(1,{x:80},{easing:cc.easing.sineIn})).call(function(){var n;t.setEmpty(!0),t.setLock(!1),t.setRedPoint(!0),e&&e(),null===(n=g.default.guideUnlock)||void 0===n||n.resetUI(),t.checkGuide()}).start()}).start()},t.prototype.checkGuide=function(){var e=1e3*this.unlockSysId;g.default.Instance.unlockSlot(e),f.default.Instance.removeUnlockSlotId(this.unlockSysId)},t.prototype.onDisable=function(){var e;null===(e=g.default.guideUnlock)||void 0===e||e.resetUI()},r([_(cc.Node)],t.prototype,"emptyNode",void 0),r([_(cc.Node)],t.prototype,"fingerNode",void 0),r([_(cc.Node)],t.prototype,"btnUnEquip",void 0),r([_(cc.Node)],t.prototype,"redPoint",void 0),r([_({type:cc.Enum(a.UNLOCKSYS_ID)})],t.prototype,"unlockSysId",void 0),r([v],t)}(d.default);n.default=b,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/BundleMgr":"BundleMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../CommonUI/IUIItem":"IUIItem","../Main_PanelOpen":"Main_PanelOpen","../Mgr/GuideCore/GuideUnlock":"GuideUnlock","../Mgr/SkillMgr":"SkillMgr","../Mgr/Unlock/MgrUnlock":"MgrUnlock","../UnlockTip/UnlockTipMgr":"UnlockTipMgr"}],SkillStorageInfo:[function(e,t,n){"use strict";cc._RF.push(t,"83fa4517I5GEpF8aKPvSZyE","SkillStorageInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(e("./BaseStorageInfo").default);n.default=r,cc._RF.pop()},{"./BaseStorageInfo":"BaseStorageInfo"}],SkillWindow:[function(e,t,n){"use strict";cc._RF.push(t,"f70e9UsqORClaNyWY062Qzj","SkillWindow");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../../Platform/Platform"),d=e("../../Tool/Tool"),h=e("../CommonUI/AsyncQueue"),p=e("../CommonUI/UIItemPool"),f=e("../Main_PanelOpen"),g=e("../Mgr/GuideCore/GuideEnums"),y=e("../Mgr/GuideCore/GuideMgr"),m=e("../Mgr/GuideCore/GuideTouch"),v=e("../Mgr/SkillMgr"),_=e("./CommonCandidateItem"),b=e("./SkillListItem"),S=e("./SkillSlotItem"),M=cc._decorator,C=M.ccclass,T=M.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skillCandidateItem=null,t.parentNode=null,t.scrollViewNode=null,t.itemTool=null,t.btnCall=null,t.btnUpAll=null,t.upAllRedPoint=null,t.ownedValueLabel=null,t.resultAsync=null,t.slotItems=[],t.isSetSkillTeach=!1,t}return i(t,e),t.prototype.onLoad=function(){this.slotItems=this.node.getComponentsInChildren(S.default);for(var e=s.eSkillSlot.Skill1;e<s.eSkillSlot.Max;e++)this.slotItems[e].setUpValue(v.default.Instance.getSkillSlotDomain(e));this.checkSlot(!1),this._playResults(),this.refreshLvUpRedPoint(),d.Tool.addClickEvent(this.btnCall,this.gotoShop,this),d.Tool.addClickEvent(this.btnUpAll,this.lvUpAll,this),d.Tool.addClickEvent(this.skillCandidateItem.node.parent,this.onClickCandidateParent,this,null,!0,!1)},t.prototype.onEnable=function(){v.default.Instance.modeStatus=s.eModeStatus.Normal,this.changeUIMode(null),this.refreshOwnedValue(),l.EventMgr.on(s.EventType.Main_UI_Skill_SkillModeChange,this.changeUIMode,this),l.EventMgr.on(s.EventType.Main_UI_Skill_SkillItemLevelUp,this.refreshOwnedValue,this),l.EventMgr.on(s.EventType.Main_UI_Skill_SkillItemAllLevelUp,this.refreshOwnedValue,this),this.checkSlot(!0)},t.prototype._playResults=function(){var e=this;this.resultAsync=new h.default;for(var t=v.default.Instance.getSkillDomains(),n=v.default.Instance.getMaxOwnId(),o=function(o,i){var r=t[o];e.resultAsync.push(function(t){var o=e.createItem(r,e.parentNode,n);o.node.opacity=0,o.node.stopAllActions(),cc.tween(o.node).to(.1,{opacity:255}).start(),e.scheduleOnce(t),i&&y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchSkillItem)})},i=t.length-1,r=0;r<t.length;r++)o(r,r==i);this.resultAsync.play()},t.prototype.createItem=function(e,t,n){var o=this.itemTool.get();o.parent=t,o.stopAllActions();var i=o.getComponent(b.default);return i.setUpValue(e,t),e.getId()!=n||o.getComponent(m.default)||o.addComponent(m.default).setId(g.SpecialGuideEnum.TouchSkillItem),i},t.prototype.onDisable=function(){l.EventMgr.off(s.EventType.Main_UI_Skill_SkillModeChange,this.changeUIMode,this)},t.prototype.refreshLvUpRedPoint=function(){var e=v.default.Instance.hasCanLevelUp();this.upAllRedPoint.active=e,this.btnUpAll.getComponentInChildren(cc.Sprite).setState(e?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY)},t.prototype.gotoShop=function(){l.EventMgr.event(s.EventType.Main_UI_Shop_JumpToSummon)},t.prototype.lvUpAll=function(){if(v.default.Instance.hasCanLevelUp()){var e=v.default.Instance.levelUp();f.default.showStrengthWindow({type:s.StrengthenType.Skill,results:e}),this.refreshLvUpRedPoint()}else u.default.instance.showToast("\u65e0\u53ef\u5f3a\u5316\u6280\u80fd")},t.prototype.onClickCandidateParent=function(){v.default.Instance.modeStatus=s.eModeStatus.Normal,this.changeUIMode(null)},t.prototype.changeUIMode=function(e){if(v.default.Instance.modeStatus==s.eModeStatus.Normal)return this.skillCandidateItem.node.parent.active=!1,this.scrollViewNode.active=!0,void this.slotItems.forEach(function(e){return e.hideFinger()});this.skillCandidateItem.node.parent.active=!0,this.scrollViewNode.active=!1,this.skillCandidateItem.setUpValue(e),this.slotItems.forEach(function(e){return e.showFinger()})},t.prototype.refreshOwnedValue=function(){var e=v.default.Instance.getOwnedValue();this.ownedValueLabel.string=c.default.Instance.getLanguage("ATK")+" +"+a.default.format(e)+"%"},t.prototype.checkSlot=function(e){void 0===e&&(e=!1);for(var t=v.default.Instance.getUnlockSlotIds(),n=0;n<t.length;n++){var o=t[n];this.checkUnlockSkillSlot(o,e)}},t.prototype.checkUnlockSkillSlot=function(e,t){void 0===t&&(t=!0);var n=this.slotItems[v.default.Instance.convertSkillSysIdToSlotIndex(e)];n&&(n.setLock(!0),n.setEmpty(!1),n.setRedPoint(!1),t&&n.playUnlockAni())},r([T(_.default)],t.prototype,"skillCandidateItem",void 0),r([T(cc.Node)],t.prototype,"parentNode",void 0),r([T(cc.Node)],t.prototype,"scrollViewNode",void 0),r([T(p.default)],t.prototype,"itemTool",void 0),r([T(cc.Node)],t.prototype,"btnCall",void 0),r([T(cc.Node)],t.prototype,"btnUpAll",void 0),r([T(cc.Node)],t.prototype,"upAllRedPoint",void 0),r([T(cc.Label)],t.prototype,"ownedValueLabel",void 0),r([C],t)}(cc.Component);n.default=k,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../CommonUI/AsyncQueue":"AsyncQueue","../CommonUI/UIItemPool":"UIItemPool","../Main_PanelOpen":"Main_PanelOpen","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/GuideCore/GuideTouch":"GuideTouch","../Mgr/SkillMgr":"SkillMgr","./CommonCandidateItem":"CommonCandidateItem","./SkillListItem":"SkillListItem","./SkillSlotItem":"SkillSlotItem"}],Skill_1006:[function(e,t,n){"use strict";cc._RF.push(t,"98773UtyBFNc4u/kj0c1h01","Skill_1006");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../BattleMgr"),s=e("../Monster"),l=e("./Skill"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.node.opacity=255,this.anim.timeScale=a.default.battleSpeed,this.anim.setAnimation(0,"jingji_open",!1);var t=this.anim.findAnimation("jingji_open").duration/a.default.battleSpeed;this.scheduleOnce(function(){e.anim2()},t)},t.prototype.anim2=function(){var e=this;this.anim.setAnimation(0,"jingji_attack",!1);var t=this.anim.findAnimation("jingji_attack").duration/a.default.battleSpeed;this.scheduleOnce(function(){e.anim3()},t),this.scheduleOnce(function(){for(var t,n=a.default.instance.getAliveMonster(),o=0;o<n.length;o++)t=n[o].getComponent(s.default),a.default.instance.bornEffect("normal_attack",n[o].getPosition()),t.hit(e.damage,e.isCiritcal)},.5*t)},t.prototype.anim3=function(){var e=this;this.anim.setAnimation(0,"jingji_close",!1);var t=this.anim.findAnimation("jingji_close").duration/a.default.battleSpeed;this.scheduleOnce(function(){cc.tween(e.node).to(.5,{opacity:0}).start()},t)},r([u],t)}(l.default));n.default=d,cc._RF.pop()},{"../BattleMgr":"BattleMgr","../Monster":"Monster","./Skill":"Skill"}],Skill_1007:[function(e,t,n){"use strict";cc._RF.push(t,"20e99Rgp3pKT4BxscWsnkEC","Skill_1007");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../BattleMgr"),s=e("../Monster"),l=e("./Skill"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.node.opacity=255,this.anim.timeScale=a.default.battleSpeed,this.anim.setAnimation(0,"chop",!1);var t=this.anim.findAnimation("chop").duration/a.default.battleSpeed;this.scheduleOnce(function(){e.anim2()},t),this.scheduleOnce(function(){for(var t,n=a.default.instance.getAliveMonster(),o=0;o<n.length;o++)n[o].x<250&&(t=n[o].getComponent(s.default),a.default.instance.bornEffect("normal_attack",n[o].getPosition()),t.hit(e.damage,e.isCiritcal))},.5*t)},t.prototype.anim2=function(){cc.tween(this.node).to(.5,{opacity:0}).start()},r([u],t)}(l.default));n.default=d,cc._RF.pop()},{"../BattleMgr":"BattleMgr","../Monster":"Monster","./Skill":"Skill"}],Skill_21103:[function(e,t,n){"use strict";cc._RF.push(t,"7a821fQoIVDPp+4EDu2cSn5","Skill_21103");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../BattleMgr"),c=e("./Skill"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.anim.timeScale=l.default.battleSpeed,this.anim.setAnimation(0,"animation",!1),this.scheduleOnce(function(){e.anim2()},.5*this.anim.findAnimation("animation").duration/l.default.battleSpeed),this.scheduleOnce(function(){e.anim3()},this.anim.findAnimation("animation").duration/l.default.battleSpeed)},t.prototype.anim2=function(){l.default.instance.skillAOE(this.node.getPosition(),this.range,this.damage,this.isCiritcal,"normal_attack"),s.EventMgr.event(a.EventType.Battle_World_Shake_Large)},t.prototype.anim3=function(){cc.tween(this.node).to(.5/l.default.battleSpeed,{opacity:0}).start()},r([d],t)}(c.default));n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../BattleMgr":"BattleMgr","./Skill":"Skill"}],Skill_22101:[function(e,t,n){"use strict";cc._RF.push(t,"92042MnDiNBHLU39lpDG00q","Skill_22101");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../BattleMgr"),s=e("./Skill"),l=cc._decorator,c=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.existTime=function(e){var t=this;this.isMove=!1,this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton);var n=this.anim.findAnimation("begin").duration,o=this.anim.findAnimation("finish").duration;this.anim.timeScale=a.default.battleSpeed,this.anim.setAnimation(0,"begin",!1),this.scheduleOnce(function(){t.anim.setAnimation(0,"continue",!0)},n/a.default.battleSpeed),this.scheduleOnce(function(){t.anim.setAnimation(0,"finish",!1)},(e-o)/a.default.battleSpeed),this.scheduleOnce(function(){t.node.opacity=0},e/a.default.battleSpeed)},r([c],t)}(s.default));n.default=u,cc._RF.pop()},{"../BattleMgr":"BattleMgr","./Skill":"Skill"}],Skill_22103:[function(e,t,n){"use strict";cc._RF.push(t,"dd981EIZN1E76yaGt6yl9/V","Skill_22103");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../BattleMgr"),c=e("./Skill"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;l.default.instance.skillAOE(this.node.getPosition(),this.range,this.damage,this.isCiritcal,"normal_attack"),s.EventMgr.event(a.EventType.Battle_World_Shake_Large),this.anim.timeScale=l.default.battleSpeed,this.anim.setAnimation(0,"luolei",!1),this.scheduleOnce(function(){e.anim2()},this.anim.findAnimation("luolei").duration/l.default.battleSpeed)},t.prototype.anim2=function(){cc.tween(this.node).to(.5/l.default.battleSpeed,{opacity:0}).start()},r([d],t)}(c.default));n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../BattleMgr":"BattleMgr","./Skill":"Skill"}],Skill_23101:[function(e,t,n){"use strict";cc._RF.push(t,"3b3e6R53OJGyLTotdSSNFrX","Skill_23101");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../BattleMgr"),c=e("./Skill"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.anim.timeScale=l.default.battleSpeed,this.anim.setAnimation(0,"animation1",!1),this.scheduleOnce(function(){e.anim2()},.5*this.anim.findAnimation("animation1").duration/l.default.battleSpeed),this.scheduleOnce(function(){e.anim3()},this.anim.findAnimation("animation1").duration/l.default.battleSpeed)},t.prototype.anim2=function(){l.default.instance.skillAOE(this.node.getPosition(),this.range,this.damage,this.isCiritcal,"normal_attack"),s.EventMgr.event(a.EventType.Battle_World_Shake_Large)},t.prototype.anim3=function(){cc.tween(this.node).to(.5/l.default.battleSpeed,{opacity:0}).start()},r([d],t)}(c.default));n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../BattleMgr":"BattleMgr","./Skill":"Skill"}],Skill_23102:[function(e,t,n){"use strict";cc._RF.push(t,"8807aL6Ms5KzZ6SXkp6YMSS","Skill_23102");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../BattleMgr"),s=e("../Monster"),l=e("./Skill"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.firePos=this.node.getChildByName("firePos")},t.prototype.getFinishTime=function(){return 3*this.anim.findAnimation("play").duration/a.default.battleSpeed},t.prototype.bornAfter=function(){this.anim1()},t.prototype.anim1=function(){var e=this;this.anim.timeScale=a.default.battleSpeed,this.node.opacity=255,this.anim.setAnimation(0,"play",!0);for(var t=1;t<=3;t++)this.scheduleOnce(function(){e.attack()},this.anim.findAnimation("play").duration*(t-.5)/a.default.battleSpeed);cc.tween(this.anim.node).to(2*this.anim.findAnimation("play").duration/a.default.battleSpeed,{y:0}).call(function(){e.anim2()}).start()},t.prototype.anim2=function(){var e=this;this.anim.setAnimation(0,"play",!1),cc.tween(this.anim.node).to(this.anim.findAnimation("play").duration/a.default.battleSpeed,{y:0}).call(function(){e.anim3()}).start()},t.prototype.anim3=function(){cc.tween(this.node).to(.25/a.default.battleSpeed,{opacity:0}).start()},t.prototype.attack=function(){for(var e,t=a.default.instance.getImmediatelyAtckMonster(),n=0;n<t.length;n++)e=t[n].getComponent(s.default),a.default.instance.bornEffect("normal_attack",t[n].getPosition()),e.hit(this.damage,this.isCiritcal)},r([u],t)}(l.default));n.default=d,cc._RF.pop()},{"../BattleMgr":"BattleMgr","../Monster":"Monster","./Skill":"Skill"}],Skill_24101:[function(e,t,n){"use strict";cc._RF.push(t,"1d285XY/tdG1IcZmenprskh","Skill_24101");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/SoundMgr"),c=e("../BattleMgr"),u=e("./Skill"),d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.anim.node.x=-500,this.anim.node.y=1e3,this.node.opacity=255,this.anim.node.angle=0,this.anim.timeScale=c.default.battleSpeed,this.anim.setAnimation(0,"meteorite",!0),cc.tween(this.anim.node).to(1,{x:0,y:0}).call(function(){e.anim2()}).start()},t.prototype.anim2=function(){var e=this;this.anim.node.angle=0,c.default.instance.skillAOE(this.node.getPosition(),this.range,this.damage,this.isCiritcal,"normal_attack"),l.default.instance.PlaySound("skill_24101"),s.EventMgr.event(a.EventType.Battle_World_Shake_Mini),this.anim.setAnimation(0,"explode3",!1),this.scheduleOnce(function(){e.anim3()},this.anim.findAnimation("explode3").duration/c.default.battleSpeed)},t.prototype.anim3=function(){cc.tween(this.node).to(.5/c.default.battleSpeed,{opacity:0}).start()},r([h],t)}(u.default));n.default=p,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/SoundMgr":"SoundMgr","../BattleMgr":"BattleMgr","./Skill":"Skill"}],Skill_24102:[function(e,t,n){"use strict";cc._RF.push(t,"1f613KPABdEIITLrikpJ9KE","Skill_24102");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/SoundMgr"),c=e("../BattleMgr"),u=e("./Skill"),d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.anim.timeScale=c.default.battleSpeed,this.anim.setAnimation(0,"mogu_zhadan",!1),this.scheduleOnce(function(){l.default.instance.PlaySound("bomb")},1/c.default.battleSpeed),this.scheduleOnce(function(){e.anim2()},this.anim.findAnimation("mogu_zhadan").duration/c.default.battleSpeed)},t.prototype.anim2=function(){c.default.instance.skillAOE(this.node.getPosition(),this.range,this.damage,this.isCiritcal,"normal_attack"),c.default.instance.bornEffect("explosion1",this.node.getPosition()),s.EventMgr.event(a.EventType.Battle_World_Shake_Mini),cc.tween(this.node).to(.5/c.default.battleSpeed,{opacity:0}).start()},r([h],t)}(u.default));n.default=p,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/SoundMgr":"SoundMgr","../BattleMgr":"BattleMgr","./Skill":"Skill"}],Skill_24103_1:[function(e,t,n){"use strict";cc._RF.push(t,"1804aIPCiNFlorEMgKVFN/T","Skill_24103_1");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Skill"),s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.anim.node.x=-400,this.node.opacity=255,cc.tween(this.anim.node).to(2,{x:400}).call(function(){e.anim2()}).start()},t.prototype.anim2=function(){this.node.opacity=0},r([l],t)}(a.default));n.default=c,cc._RF.pop()},{"./Skill":"Skill"}],Skill_24103_2:[function(e,t,n){"use strict";cc._RF.push(t,"8f7e6BbWN1D9b113vkom98M","Skill_24103_2");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/SoundMgr"),c=e("../BattleMgr"),u=e("./Skill"),d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.anim.setAnimation(0,"zhadan",!0),this.anim.node.y=200,this.node.opacity=255,this.anim.timeScale=c.default.battleSpeed,cc.tween(this.anim.node).to(.5,{x:0,y:0}).call(function(){e.anim2()}).start()},t.prototype.anim2=function(){var e=this;c.default.instance.skillAOE(this.node.getPosition(),this.range,this.damage,this.isCiritcal,"normal_attack"),l.default.instance.PlaySound("skill_24103_2"),this.scheduleOnce(function(){e.anim3()},this.anim.findAnimation("baozha").duration),this.anim.setAnimation(0,"baozha",!1),s.EventMgr.event(a.EventType.Battle_World_Shake_Mini)},t.prototype.anim3=function(){cc.tween(this.node).to(.5/c.default.battleSpeed,{opacity:0}).start()},r([h],t)}(u.default));n.default=p,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/SoundMgr":"SoundMgr","../BattleMgr":"BattleMgr","./Skill":"Skill"}],Skill_25101:[function(e,t,n){"use strict";cc._RF.push(t,"1dbfdO057BAfLEXt/Du2iW4","Skill_25101");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Mgr/SoundMgr"),s=e("../BattleMgr"),l=e("./Skill"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.anim.timeScale=s.default.battleSpeed,this.anim.setAnimation(0,"huochang_open",!1),this.scheduleOnce(function(){e.anim2()},this.anim.findAnimation("huochang_open").duration/s.default.battleSpeed)},t.prototype.anim2=function(){for(var e=this,t=0;t<6;t++)this.scheduleOnce(function(){s.default.instance.skillAOE(e.node.getPosition(),e.range,e.damage,e.isCiritcal,"normal_attack")},.5*t);a.default.instance.PlaySound("skill_25101"),this.anim.timeScale=s.default.battleSpeed,this.anim.setAnimation(0,"huochang",!0),this.scheduleOnce(function(){e.anim3()},3/s.default.battleSpeed)},t.prototype.anim3=function(){var e=this;this.anim.timeScale=s.default.battleSpeed,this.anim.setAnimation(0,"huochang_close",!0),this.scheduleOnce(function(){e.node.opacity=0},this.anim.findAnimation("huochang_close").duration/s.default.battleSpeed)},r([u],t)}(l.default));n.default=d,cc._RF.pop()},{"../../../Mgr/SoundMgr":"SoundMgr","../BattleMgr":"BattleMgr","./Skill":"Skill"}],Skill_25102:[function(e,t,n){"use strict";cc._RF.push(t,"ceed8PRfEdKd7wwcL9C804W","Skill_25102");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Mgr/SoundMgr"),s=e("../BattleMgr"),l=e("../Monster"),c=e("./Skill"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.anim.timeScale=s.default.battleSpeed,this.anim.setAnimation(0,"moyan_ray",!1);var t=this.anim.findAnimation("moyan_ray").duration/s.default.battleSpeed;this.scheduleOnce(function(){e.anim2()},t);for(var n=0;n<3;n++)this.scheduleOnce(function(){for(var t,n=s.default.instance.getAliveMonster(),o=0;o<n.length;o++)t=n[o].getComponent(l.default),s.default.instance.bornEffect("normal_attack",n[o].getPosition()),t.hit(e.damage,e.isCiritcal);a.default.instance.PlaySound("skill_25102")},(.3+.25*n)*t)},t.prototype.anim2=function(){this.node.opacity=0},r([d],t)}(c.default));n.default=h,cc._RF.pop()},{"../../../Mgr/SoundMgr":"SoundMgr","../BattleMgr":"BattleMgr","../Monster":"Monster","./Skill":"Skill"}],Skill_25103:[function(e,t,n){"use strict";cc._RF.push(t,"36f38Dx+HJBrb7MX9r5hwIt","Skill_25103");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../BattleMgr"),c=e("../Monster"),u=e("./Skill"),d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.node.opacity=255,this.anim.timeScale=l.default.battleSpeed,this.anim.setAnimation(0,"animation",!1);var t=this.anim.findAnimation("animation").duration/l.default.battleSpeed;this.scheduleOnce(function(){e.anim2()},t),this.scheduleOnce(function(){for(var t,n=l.default.instance.getImmediatelyAtckMonster(),o=0;o<n.length;o++)t=n[o].getComponent(c.default),l.default.instance.bornEffect("normal_attack",n[o].getPosition()),t.hit(e.damage,e.isCiritcal);s.EventMgr.event(a.EventType.Battle_World_Shake_Mini)},.75*t),s.EventMgr.event(a.EventType.Battle_World_Shake_Mini)},t.prototype.anim2=function(){cc.tween(this.node).to(.5,{opacity:0}).start()},r([h],t)}(u.default));n.default=p,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../BattleMgr":"BattleMgr","../Monster":"Monster","./Skill":"Skill"}],Skill_26103:[function(e,t,n){"use strict";cc._RF.push(t,"927b4Qb1zxNHJM5sfHOg8CJ","Skill_26103");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s,l=e("../../../Config/EnumTypes"),c=e("../../../Mgr/EventMgr"),u=e("../../../Tool/Tool"),d=e("../BattleMgr"),h=e("../Bullet/Bullet"),p=cc._decorator,f=p.ccclass;p.property,function(e){e.idle="jingling_standby",e.attack="jingling_attack"}(a||(a={})),function(e){e[e.idle=0]="idle",e[e.attack=1]="attack"}(s||(s={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bulletName="bullet_skill_26103",t.nowState=s.idle,t.fre=1,t.atk="0",t.bulletCount=8,t.isPlayAtkAnim=!1,t.attackTarget=null,t.attackCD=0,t}return i(t,e),t.prototype.init=function(e,t){this.node.opacity=255,this.atk=e,this.bulletCount=t},t.prototype.onLoad=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.firePos=this.node.getChildByName("firePos"),this.idle()},t.prototype.idle=function(){this.nowState=s.idle},t.prototype.attack=function(){this.nowState=s.attack,this.isPlayAtkAnim=!0;var e=this.anim.findAnimation(a.attack).duration/d.default.battleSpeed/this.fre;this.scheduleOnce(this.attackDo,.5*e),this.scheduleOnce(this.attackEnd,e),this.attackCD=e+.1},t.prototype.attackDo=function(){this.bulletShoot_target(this.atk,this.attackTarget)},t.prototype.attackEnd=function(){this.idle()},t.prototype.onDestroy=function(){},t.prototype.update=function(e){if(this.nowState==s.idle&&this.attackCD<=0){var t=d.default.instance.getAliveMonster();0!=t.length&&(this.attackTarget=t[u.Tool.randomInt(0,t.length-1)],this.attack())}this.attackCD-=e,this.animUpdate()},t.prototype.animUpdate=function(){var e;switch(this.nowState){case s.idle:e=a.idle,this.anim.timeScale=d.default.battleSpeed;break;case s.attack:this.isPlayAtkAnim&&(e=a.attack,this.anim.timeScale=d.default.battleSpeed,this.isPlayAtkAnim=!1)}this.anim.animation!=e&&e&&this.anim.setAnimation(0,e,!0)},t.prototype.bulletShoot_target=function(e,t){var n=this;if(!(this.bulletCount<=0)&&this.node.isValid){for(var o,i=0;i<d.default.instance.bulletNode.children.length;i++)0==d.default.instance.bulletNode.children[i].opacity&&d.default.instance.bulletNode.children[i].name==this.bulletName&&(o=d.default.instance.bulletNode.children[i]);o||((o=cc.instantiate(d.default.instance.getBulletPrefab(this.bulletName))).opacity=0,d.default.instance.bulletNode.addChild(o)),o.setPosition(this.firePos.getPosition().add(this.node.getPosition())),o.opacity=255,o.getComponent(h.default).shoot(t,e,!1),this.bulletCount--,this.bulletCount<=0&&(c.EventMgr.event(l.EventType.Battle_Skill_26103_End),cc.tween(this.node).to(.5/d.default.battleSpeed,{opacity:0}).call(function(){n.node.destroy()}).start())}},r([f],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Tool/Tool":"Tool","../BattleMgr":"BattleMgr","../Bullet/Bullet":"Bullet"}],Skill:[function(e,t,n){"use strict";cc._RF.push(t,"b12b3OE1gtDMoJjWNol1Bkc","Skill");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../../plugin/NumberPlus"),s=e("../../../Config/EnumTypes"),l=e("../../../Config/GameData"),c=e("../../../Mgr/EventMgr"),u=e("../BattleMgr"),d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.damage=0,t.range=0,t.isCiritcal=!1,t.isMove=!0,t.attackCount=0,t.moveSpeed=0,t}return i(t,e),t.prototype.onLoad=function(){c.EventMgr.on(s.EventType.Battle_Scene_MoveSpeed_Update,this.moveUpdate,this)},t.prototype.moveUpdate=function(e){this.moveSpeed=e},t.prototype.update=function(e){this.node.opacity>0&&this.isMove&&(this.node.x-=e*u.default.battleSpeed*this.moveSpeed)},t.prototype.born=function(e,t,n){this.damage=a.default.mul(l.default.heroSkillDamageCal(),e),this.isCiritcal=t,this.range=2*n,this.bornAfter()},t.prototype.existTime=function(e){var t=this;this.scheduleOnce(function(){t.node.opacity=0},e/u.default.battleSpeed)},t.prototype.bornAfter=function(){},t.prototype.getFinishTime=function(){return 0},r([h],t)}(cc.Component));n.default=p,cc._RF.pop()},{"../../../../plugin/NumberPlus":"NumberPlus","../../../Config/EnumTypes":"EnumTypes","../../../Config/GameData":"GameData","../../../Mgr/EventMgr":"EventMgr","../BattleMgr":"BattleMgr"}],SoundMgr:[function(e,t,n){"use strict";cc._RF.push(t,"51c27epRQRNBJV3jmB3ct7t","SoundMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Config/EnumTypes"),s=e("./BundleMgr"),l=e("./EventMgr"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentMusicKey="",t.currentMusicId=-1,t.currentAid=-1,t.buttonIns=!1,t.doneCB=null,t.hasLoadSound={},t.hasLoadMusic={},t.hasPlayingSound=[],t.hasPlayingId=[],t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){cc.game.addPersistRootNode(this.node),n.instance=this},t.prototype.start=function(){var e=this;l.EventMgr.on(a.EventType.Platform_Wake_Do,function(){e.PlayMusic(n.instance.currentMusicKey)},this),l.EventMgr.on(a.EventType.Platform_Hide_Do,function(){e.StopMuisc()},this),this.schedule(function(){e.PlayMusic(n.instance.currentMusicKey)},10)},t.prototype.PlaySound=function(e,t,o){if(void 0===t&&(t=!1),void 0===o&&(o=1),!n.IsMute){var i=this.hasLoadSound[e];if(i)this.playSoundAPI(i,t,o);else{var r=this;s.default.loadRes("Sound/"+e,cc.AudioClip,function(n,i){n?console.warn(n):(r.hasLoadSound[e]=i,r.playSoundAPI(i,t,o))})}}},t.prototype.playSoundAPI=function(e,t,n){var o=this;if(-1==this.hasPlayingSound.indexOf(e.name)){this.hasPlayingSound.push(e.name);var i=cc.audioEngine.play(e,t,n);if(this.hasPlayingId.push(i),!t){var r=.25*e.duration;r>1&&(r=1),this.scheduleOnce(function(){var t=o.hasPlayingSound.indexOf(e.name);-1!=t&&(o.hasPlayingSound.splice(t,1),o.hasPlayingId.splice(t,1))},r)}}},t.prototype.StopSound=function(e){var t=this.hasPlayingSound.indexOf(e);-1!=t?(cc.audioEngine.stop(this.hasPlayingId[t]),this.hasPlayingSound.splice(t,1),this.hasPlayingId.splice(t,1)):console.warn("\u505c\u6b62\u58f0\u97f3\u4e0d\u5b58\u5728")},t.prototype.PlayMusic=function(e,t,o,i){var r=this;void 0===t&&(t=!0),void 0===o&&(o=1),e&&(n.IsMute||this.currentMusicKey==e&&cc.audioEngine.getState(this.currentMusicId)==cc.audioEngine.AudioState.PLAYING||s.default.loadRes("Sound/"+e,cc.AudioClip,function(n,a){if(n)return console.warn(n),r.currentMusicKey="",void(r.currentMusicId=-1);if(r.hasLoadMusic[e]=a,r.currentMusicId=cc.audioEngine.playMusic(a,t),r.currentMusicKey=e,!t){var s=a.duration;r.scheduleOnce(function(){i&&i()},s*o)}}))},t.prototype.StopMuisc=function(){this.currentMusicKey="",cc.audioEngine.stopMusic()},t.IsMute=!1,n=r([u],t)}(cc.Component));n.default=d,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","./BundleMgr":"BundleMgr","./EventMgr":"EventMgr"}],StorageData:[function(e,t,n){"use strict";cc._RF.push(t,"972758YZ15MIY03RoZRE+Qv","StorageData"),Object.defineProperty(n,"__esModule",{value:!0}),n.StorageData=void 0;n.StorageData=function(){this.gameVersion="17",this.lastUploadTime=0,this.isFirst=!0,this.stage="1_1_0",this.userId=1001,this.userName="\u7528\u62371",this.atkLevel=1,this.hpLevel=1,this.hpRecoveryLevel=1,this.aspdLevel=1,this.criticalChanceLevel=1,this.criticalDamageLevel=1,this.doubleShot=1,this.tripleShot=1,this.coin="0",this.diamond=0,this.lastLoginDay=0,this.realSignDay=0,this.targetSignDay=1,this.autoUseSkill=0,this.usingSkillIds=[0,0,0,0,0,0],this.skillStorageInfos=[],this.equippedWeaponId=-1,this.equippedArmorId=-1,this.gearStorageInfos=[],this.usingPartnerIds=[0,0,0,0,0],this.partnerStorageInfos=[],this.bossRushMaxDifficulty=1,this.bossRushKey=2,this.bossRushKeyVideo=2,this.goldRushMaxDifficulty=1,this.goldRushKey=2,this.goldRushKeyVideo=2,this.clearRushMaxDifficulty=1,this.clearRushKey=2,this.clearRushKeyVideo=2,this.heroRushMaxDifficulty=1,this.heroRushKey=1,this.heroRushKeyVideo=1,this.heroRushPickHeroIds=[],this.mineCacheData=[],this.mineDeepth=0,this.mineHammer=100,this.mineHammerLimit=60,this.mineDrill=1,this.mineBoom=1,this.digMineTotalCount=0,this.mineCube=0,this.mineRecoveryTime=0,this.mineHammerRecovertTime=6e5,this.drillAdCount=0,this.boomAdCount=0,this.shovelAdCount=0,this.researchData=[],this.researchAdCount=0,this.researchTotalCnt=0,this.lastResearchUpIndex=0,this.hasDigSlimeExp=0,this.usingHeroId=41101,this.heroStorageInfos=[],this.slimeExp=0,this.heroSp=0,this.trait=0,this.fork=0,this.userRelicData={},this.rouletteCount=5,this.rouletteLastTime=null,this.rouletteResidueTime=0,this.speedUpStartTime=null,this.unlockPart=[],this.blessLevels=[1,1,1],this.blessExps=[0,0,0],this.blessTimes=[0,0,0],this.videoSum=0,this.videoVipAdditions=[0,0],this.passExp=0,this.placeAwardTime=null,this.getOtherAwardTime=null,this.summonLevels={},this.summonAdDate={},this.userShopData={},this.userShopTotalPay=0,this.userWeekOpenTimeStamp=-1,this.userDailyOpenTimeStamp=-1,this.dailyAdTimes={},this.dailyAdDate=-1,this.questSysValue={},this.questDailyResetTimeKey=-1,this.userDailyQuest={},this.userChainQuest={},this.userExtraRewardData={},this.userSevenChallengeOpenTime=-1,this.userSevenChallengeQuest={},this.userMasteryData={},this.weekReceiveDays=0,this.weekReceiveDate=-1,this.userCollectionData={},this.chestSkillCdTime=null,this.ringChip=0,this.userRingData=[],this.userEquipRingId=-1,this.lastGuideId=-1,this.guideData={},this.specialGuideData=[],this.flightChestCount=0,this.isMusicOn=1,this.isSoundOn=1,this.isVibrateOn=1,this.isHighFrameOn=0,this.isPowerSavOn=0},cc._RF.pop()},{}],StorageMgr:[function(e,t,n){"use strict";cc._RF.push(t,"5935aDnN/dOK4WlfsN2OIn/","StorageMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../plugin/NumberPlus"),s=e("../Config/EnumTypes"),l=e("../Config/GameData"),c=e("../Config/HeroStorageInfo"),u=e("../Config/StorageData"),d=e("../Tool/Tool"),h=e("./EventMgr"),p=e("./TimeMgr"),f=e("./SoundMgr"),g=e("../Platform/Platform"),y=e("./BattleData"),m=e("./VideoVipMgr"),v=e("../Main/Mgr/GuideCore/GuideEnums"),_=e("../Main/Mgr/GuideCore/GuideMgr"),b=e("../Main/Mgr/Unlock/MgrUnlock"),S=e("../Global"),M=e("../../plugin/Secrect"),C=cc._decorator.ccclass,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.storageData=new u.StorageData,t.storageName=new u.StorageData,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this,this.init(),this.versionDeal(),this.cloudSaveInit(function(){f.default.IsMute=0==n.instance.storageData.isSoundOn,cc.audioEngine.setMusicVolume(n.instance.storageData.isMusicOn),g.default.instance.isVibrate=1==n.instance.storageData.isVibrateOn,l.default.testStorageChange()})},t.prototype.init=function(){for(var e in this.storageData){var t=this.readStorage(e);t?(this.storageData[e]=JSON.parse(t),l.default.isTest&&console.log("\u52a0\u8f7d\u7f13\u5b58\u6570\u636e",e,this.storageData[e])):(this.writeStorage(e,this.storageName[e]),l.default.isTest&&console.log("\u521d\u59cb\u5316\u7f13\u5b58\u6570\u636e",e,this.storageName[e])),this.storageName[e]=e}},t.prototype.versionDeal=function(){if(this.storageData.gameVersion==(new u.StorageData).gameVersion);else for(var e in console.log("\u6e05\u7406\u5b58\u6863"),localStorage.clear(),this.storageData=new u.StorageData,this.storageName=new u.StorageData,this.storageData)this.writeStorage(e,this.storageName[e]),l.default.isTest&&console.log("\u521d\u59cb\u5316\u7f13\u5b58\u6570\u636e",e,this.storageName[e]),this.storageName[e]=e},t.prototype.writeStorage=function(e,t){this.storageData[e]=t;var n=JSON.stringify(t);S.default.isDev()||(e=M.default.encrypt(e),n=M.default.encrypt(n)),localStorage.setItem(e,n)},t.prototype.readStorage=function(e){if(!myGlobalThis.isEmpty(e)){S.default.isDev()||(e=M.default.encrypt(e));var t=localStorage.getItem(e);if(t)return S.default.isDev()||(t=M.default.decrypt(t)),t}},t.prototype.removeStorage=function(e){localStorage.removeItem(e)},t.prototype.SaveAllStorge=function(){for(var e in this.storageData)this.writeStorage(e,this.storageData[e])},t.prototype.setIsMusicOn=function(e){this.storageData.isMusicOn=e?1:0,this.writeStorage(this.storageName.isMusicOn,this.storageData.isMusicOn)},t.prototype.setIsSoundOn=function(e){this.storageData.isSoundOn=e?1:0,this.writeStorage(this.storageName.isSoundOn,this.storageData.isSoundOn)},t.prototype.setIsVibrateOn=function(e){this.storageData.isVibrateOn=e?1:0,this.writeStorage(this.storageName.isVibrateOn,this.storageData.isVibrateOn)},t.prototype.setIsHighFrameOn=function(e){this.storageData.isHighFrameOn=e?1:0,this.writeStorage(this.storageName.isHighFrameOn,this.storageData.isHighFrameOn)},t.prototype.setIsPowerSavOn=function(e){this.storageData.isPowerSavOn=e?1:0,this.writeStorage(this.storageName.isPowerSavOn,this.storageData.isPowerSavOn)},t.prototype.setLastLoginDay=function(e){this.storageData.lastLoginDay=e,this.writeStorage("lastLoginDay",this.storageData.lastLoginDay)},t.prototype.setRealSignDay=function(e){this.storageData.realSignDay=e,this.writeStorage("realSignDay",this.storageData.realSignDay)},t.prototype.setTargetSignDay=function(e){this.storageData.targetSignDay=e,this.writeStorage("targetSignDay",this.storageData.targetSignDay)},t.prototype.stageSet=function(e,t,n){var o=e.toString()+"_"+t.toString()+"_"+(n?"1":"0");this.storageData.stage=o,this.writeStorage(this.storageName.stage,this.storageData.stage)},t.prototype.addCoin=function(e){this.storageData.coin=a.default.add(this.storageData.coin,e),this.storageData.coin=this.storageData.coin.split(".")[0],this.storageData.coin=this.storageData.coin.toString(),this.writeStorage(this.storageName.coin,this.storageData.coin),h.EventMgr.event(s.EventType.Common_Coin_Update)},t.prototype.reduceCoin=function(e){this.storageData.coin=a.default.sub(this.storageData.coin,e),this.storageData.coin=this.storageData.coin.split(".")[0],this.storageData.coin=this.storageData.coin.toString(),this.writeStorage(this.storageName.coin,this.storageData.coin),h.EventMgr.event(s.EventType.Common_Coin_Update)},t.prototype.addDiamond=function(e){e?e<0?console.error("\u8bf7\u8f93\u5165\u5927\u4e8e\u7b49\u4e8e0\u7684\u6570\u503c",e):(e=Math.floor(e),this.storageData.diamond+=e,this.writeStorage(this.storageName.diamond,this.storageData.diamond),h.EventMgr.event(s.EventType.Common_Dimond_Update)):console.error("\u589e\u52a0\u7684\u7816\u77f3\u6570\u503c\u4e0d\u5b58\u5728",e)},t.prototype.reduceDiamond=function(e){e?e<0?console.error("\u8bf7\u8f93\u5165\u5927\u4e8e\u7b49\u4e8e0\u7684\u6570\u503c",e):(e=Math.floor(e),this.storageData.diamond-=e,this.writeStorage(this.storageName.diamond,this.storageData.diamond),h.EventMgr.event(s.EventType.Common_Dimond_Update)):console.error("\u51cf\u5c11\u7684\u7816\u77f3\u6570\u503c\u4e0d\u5b58\u5728",e)},t.prototype.addAtkLevel=function(){this.storageData.atkLevel++,this.writeStorage(this.storageName.atkLevel,this.storageData.atkLevel),h.EventMgr.event(s.GlobalEvent.QuestBatchCommit,s.QUEST_ACTIVE_ID.EnhanceAtk,1,this.storageData.atkLevel)},t.prototype.addHpLevel=function(){this.storageData.hpLevel++,this.writeStorage(this.storageName.hpLevel,this.storageData.hpLevel),h.EventMgr.event(s.GlobalEvent.QuestBatchCommit,s.QUEST_ACTIVE_ID.EnhanceHp,1,this.storageData.hpLevel)},t.prototype.addHpRecoveryLevel=function(){this.storageData.hpRecoveryLevel++,this.writeStorage(this.storageName.hpRecoveryLevel,this.storageData.hpRecoveryLevel),h.EventMgr.event(s.GlobalEvent.QuestBatchCommit,s.QUEST_ACTIVE_ID.EnhanceHPRecovery,1,this.storageData.hpRecoveryLevel)},t.prototype.addAspdLevel=function(){this.storageData.aspdLevel++,this.writeStorage(this.storageName.aspdLevel,this.storageData.aspdLevel),h.EventMgr.event(s.GlobalEvent.QuestBatchCommit,s.QUEST_ACTIVE_ID.EnhanceAspd,1,this.storageData.aspdLevel)},t.prototype.addCriticalChanceLevel=function(){this.storageData.criticalChanceLevel++,this.writeStorage(this.storageName.criticalChanceLevel,this.storageData.criticalChanceLevel),h.EventMgr.event(s.GlobalEvent.QuestBatchCommit,s.QUEST_ACTIVE_ID.EnhanceCriticalHitChance,1,this.storageData.criticalChanceLevel)},t.prototype.addCriticalDamageLevel=function(){this.storageData.criticalDamageLevel++,this.writeStorage(this.storageName.criticalDamageLevel,this.storageData.criticalDamageLevel),h.EventMgr.event(s.GlobalEvent.QuestBatchCommit,s.QUEST_ACTIVE_ID.EnhanceCriticalHitDamage,1,this.storageData.criticalDamageLevel)},t.prototype.addDoubleShot=function(){this.storageData.doubleShot++,this.writeStorage(this.storageName.doubleShot,this.storageData.doubleShot),h.EventMgr.event(s.GlobalEvent.QuestBatchCommit,s.QUEST_ACTIVE_ID.EnhanceDouble,1,this.storageData.doubleShot)},t.prototype.addTripleShot=function(){this.storageData.tripleShot++,this.writeStorage(this.storageName.tripleShot,this.storageData.tripleShot),h.EventMgr.event(s.GlobalEvent.QuestBatchCommit,s.QUEST_ACTIVE_ID.EnhanceTriple,1,this.storageData.tripleShot)},t.prototype.getLevel=function(e){switch(e){case s.PROP_TYPE.ATK:return this.storageData.atkLevel;case s.PROP_TYPE.HP:return this.storageData.hpLevel;case s.PROP_TYPE.HPRecovery:return this.storageData.hpRecoveryLevel;case s.PROP_TYPE.ASPD:return this.storageData.aspdLevel;case s.PROP_TYPE.CriticalHitChance:return this.storageData.criticalChanceLevel;case s.PROP_TYPE.CriticalHitDamage:return this.storageData.criticalDamageLevel;case s.PROP_TYPE.DoubleShot:return this.storageData.doubleShot;case s.PROP_TYPE.TripleShot:return this.storageData.tripleShot}return 0},t.prototype.saveMineCacheData=function(e){this.storageData.mineCacheData=d.Tool.cloneArray_normal(e),this.writeStorage(this.storageName.mineCacheData,this.storageData.mineCacheData)},t.prototype.saveMineDeepth=function(e){this.storageData.mineDeepth=e,this.writeStorage(this.storageName.mineDeepth,this.storageData.mineDeepth),h.EventMgr.event(s.EventType.Mine_Depth_Move_Complete),h.EventMgr.event(s.GlobalEvent.UnlockValueChange,s.UnlockSysType.MineDeep,this.storageData.mineDeepth)},t.prototype.saveMineHammer=function(e){this.storageData.mineHammer=e,this.writeStorage(this.storageName.mineHammer,this.storageData.mineHammer),h.EventMgr.event(s.EventType.Mine_Shovel_Update)},t.prototype.saveMineHammerLimit=function(e){this.storageData.mineHammerLimit=e,this.writeStorage(this.storageName.mineHammerLimit,this.storageData.mineHammerLimit)},t.prototype.saveMineDrill=function(e){this.storageData.mineDrill=e,this.writeStorage(this.storageName.mineDrill,this.storageData.mineDrill),h.EventMgr.event(s.EventType.Mine_Drill_Update)},t.prototype.saveMineBoom=function(e){this.storageData.mineBoom=e,this.writeStorage(this.storageName.mineBoom,this.storageData.mineBoom),h.EventMgr.event(s.EventType.Mine_Boom_Update)},t.prototype.saveDigMineTotalCount=function(e){this.storageData.digMineTotalCount=e,this.writeStorage(this.storageName.digMineTotalCount,this.storageData.digMineTotalCount)},t.prototype.saveMineCubeCount=function(e){this.storageData.mineCube=e,this.writeStorage(this.storageName.mineCube,this.storageData.mineCube),h.EventMgr.event(s.EventType.Mine_Cube_Update)},t.prototype.saveMineRecoveryTime=function(){this.storageData.mineRecoveryTime=p.default.instance.time,this.writeStorage(this.storageName.mineRecoveryTime,this.storageData.mineRecoveryTime)},t.prototype.saveDrillAdCount=function(e){this.storageData.drillAdCount=e,this.writeStorage(this.storageName.drillAdCount,this.storageData.drillAdCount),h.EventMgr.event(s.EventType.Mine_DrillAdCount_Update)},t.prototype.saveBoomAdCount=function(e){this.storageData.boomAdCount=e,this.writeStorage(this.storageName.boomAdCount,this.storageData.boomAdCount),h.EventMgr.event(s.EventType.Mine_BoomAdCount_Update)},t.prototype.saveShovelAdCount=function(e){this.storageData.shovelAdCount=e,this.writeStorage(this.storageName.shovelAdCount,this.storageData.shovelAdCount),h.EventMgr.event(s.EventType.Mine_ShovelAdCount_Update)},t.prototype.saveResearchData=function(e){this.storageData.researchData=d.Tool.cloneArray_normal(e),this.writeStorage(this.storageName.researchData,this.storageData.researchData)},t.prototype.researchUpgrade=function(e){void 0===e&&(e=1),this.storageData.researchTotalCnt+=e,this.writeStorage(this.storageName.researchTotalCnt,this.storageData.researchTotalCnt),h.EventMgr.event(s.GlobalEvent.QuestCommit,s.QUEST_ACTIVE_ID.MineResearch,this.storageData.researchTotalCnt)},t.prototype.saveResearchAdCount=function(e){this.storageData.researchAdCount=e,this.writeStorage(this.storageName.researchAdCount,this.storageData.researchAdCount)},t.prototype.saveMineHammerRecoveryTime=function(e){this.storageData.mineHammerRecovertTime=e,this.writeStorage(this.storageName.mineHammerRecovertTime,this.storageData.mineHammerRecovertTime)},t.prototype.changeLastResearchUpIndex=function(e){this.storageData.lastResearchUpIndex=e,this.writeStorage(this.storageName.lastResearchUpIndex,this.storageData.lastResearchUpIndex)},t.prototype.saveHasDigSlimeExp=function(){1!=this.storageData.hasDigSlimeExp&&(this.storageData.hasDigSlimeExp=1,this.writeStorage(this.storageName.hasDigSlimeExp,this.storageData.hasDigSlimeExp))},t.prototype.cloudSaveInit=function(e){e()},t.prototype.cloudSave=function(){window.wx&&(l.default.isTest&&console.log("\u5f00\u59cb\u4e91\u5b58\u6863\u4e0a\u4f20"),n.instance.uploadStorage())},t.prototype.uploadStorage=function(){window.wx&&(n.instance.storageData.lastUploadTime,n.instance.storageData.lastUploadTime=p.default.instance.time,n.instance.writeStorage("lastUploadTime",n.instance.storageData.lastUploadTime))},t.prototype.downloadStorage=function(e){S.default.isDev()&&e()},t.prototype.changeWeapon=function(e){this.storageData.equippedWeaponId=e.getId(),this.writeStorage(this.storageName.equippedWeaponId,this.storageData.equippedWeaponId),e.emitChange(),h.EventMgr.event(s.EventType.Main_UI_Gear_ChangeWeapon,e),h.EventMgr.event(s.EventType.Props_GearChange_Event)},t.prototype.changeArmor=function(e){this.storageData.equippedArmorId=e.getId(),this.writeStorage(this.storageName.equippedArmorId,this.storageData.equippedArmorId),e.emitChange(),h.EventMgr.event(s.EventType.Main_UI_Gear_ChangeArmor,e),h.EventMgr.event(s.EventType.Props_GearChange_Event)},t.prototype.addEquipment=function(e,t){var n=this.storageData.gearStorageInfos.find(function(t){return t.id==e});n?n.count+=t:this.storageData.gearStorageInfos.push({id:e,level:1,count:t}),this.writeStorage(this.storageName.gearStorageInfos,this.storageData.gearStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Gear_EquipmentChange),h.EventMgr.event(s.EventType.Props_GearChange_Event),h.EventMgr.event(s.GlobalEvent.GearLevelUp,{id:e,prev:0,curr:1})},t.prototype.addEquipments=function(e){var t=this,n=[];e.forEach(function(e,o){var i=t.storageData.gearStorageInfos.find(function(e){return e.id==o});i?i.count+=e:t.storageData.gearStorageInfos.push({id:o,level:1,count:e}),n.push({id:o,prev:0,curr:1})}),this.writeStorage(this.storageName.gearStorageInfos,this.storageData.gearStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Gear_EquipmentChange),h.EventMgr.event(s.EventType.Props_GearChange_Event),n.length>0&&h.EventMgr.event(s.GlobalEvent.GearLevelUpAll,null,n)},t.prototype.strengthenEquipment=function(e){var t=this.storageData.gearStorageInfos.find(function(t){return t.id==e.getId()});t.level=e.getCurLevel(),t.count=e.getCurCount(),this.writeStorage(this.storageName.gearStorageInfos,this.storageData.gearStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Gear_EquipmentStrengthen,e),h.EventMgr.event(s.EventType.Props_GearChange_Event)},t.prototype.strengthenEquipments=function(e){for(var t=function(e){var t=n.storageData.gearStorageInfos.find(function(t){return t.id==e.getId()});t.level=e.getCurLevel(),t.count=e.getCurCount()},n=this,o=0,i=e;o<i.length;o++)t(i[o]);this.writeStorage(this.storageName.gearStorageInfos,this.storageData.gearStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Gear_EquipmentStrengthens),h.EventMgr.event(s.EventType.Props_GearChange_Event)},t.prototype.switchAutoSkill=function(){this.storageData.autoUseSkill=1==this.storageData.autoUseSkill?0:1,this.writeStorage(this.storageName.autoUseSkill,this.storageData.autoUseSkill),h.EventMgr.event(s.EventType.Battle_Skill_SwitchAutoSkill)},t.prototype.addSkillItem=function(e,t){var n=this.storageData.skillStorageInfos.find(function(t){return t.id==e});n?n.count+=t:this.storageData.skillStorageInfos.push({id:e,level:1,count:t}),this.writeStorage(this.storageName.skillStorageInfos,this.storageData.skillStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Skill_SkillItemChange),h.EventMgr.event(s.EventType.Props_SkillChange_Event),h.EventMgr.event(s.GlobalEvent.SkillLevelUp,{id:e,prev:0,curr:1})},t.prototype.addSkillItems=function(e){var t=this,n=[];e.forEach(function(e,o){var i=t.storageData.skillStorageInfos.find(function(e){return e.id==o});i?i.count+=e:t.storageData.skillStorageInfos.push({id:o,level:1,count:e}),n.push({id:o,prev:0,curr:1})}),this.writeStorage(this.storageName.skillStorageInfos,this.storageData.skillStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Skill_SkillItemChange),h.EventMgr.event(s.EventType.Props_SkillChange_Event),n.length>0&&h.EventMgr.event(s.GlobalEvent.SkillLevelUpAll,n)},t.prototype.strengthenSkill=function(e){var t=this.storageData.skillStorageInfos.find(function(t){return t.id==e.getId()});t.level=e.getCurLevel(),t.count=e.getCurCount(),this.writeStorage(this.storageName.skillStorageInfos,this.storageData.skillStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Skill_SkillItemLevelUp),h.EventMgr.event(s.EventType.Props_SkillChange_Event)},t.prototype.strengthenSkills=function(e){for(var t=function(e){var t=n.storageData.skillStorageInfos.find(function(t){return t.id==e.getId()});t.level=e.getCurLevel(),t.count=e.getCurCount()},n=this,o=0,i=e;o<i.length;o++)t(i[o]);this.writeStorage(this.storageName.skillStorageInfos,this.storageData.skillStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Skill_SkillItemAllLevelUp),h.EventMgr.event(s.EventType.Props_SkillChange_Event)},t.prototype.equippedSkill=function(e){this.storageData.usingSkillIds[e.getSlotIndex()]=e.getId(),this.writeStorage(this.storageName.usingSkillIds,this.storageData.usingSkillIds),h.EventMgr.event(s.EventType.Main_UI_Skill_SkillEquipChange),h.EventMgr.event(s.EventType.Props_SkillChange_Event)},t.prototype.unEquippedSkill=function(e){this.storageData.usingSkillIds[e.getSlotIndex()]=0,this.writeStorage(this.storageName.usingSkillIds,this.storageData.usingSkillIds),h.EventMgr.event(s.EventType.Main_UI_Skill_SkillEquipChange),h.EventMgr.event(s.EventType.Props_SkillChange_Event)},t.prototype.addPartnerItem=function(e,t){var n=this.storageData.partnerStorageInfos.find(function(t){return t.id==e});n?n.count+=t:this.storageData.partnerStorageInfos.push({id:e,level:1,count:t}),this.writeStorage(this.storageName.partnerStorageInfos,this.storageData.partnerStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Partner_PartnerItemChange),h.EventMgr.event(s.EventType.Props_PartnerChange_Event),h.EventMgr.event(s.GlobalEvent.PartnerLevelUp,{id:e,prev:0,curr:1})},t.prototype.addPartnerItems=function(e){var t=this,n=[];e.forEach(function(e,o){var i=t.storageData.partnerStorageInfos.find(function(e){return e.id==o});i?i.count+=e:t.storageData.partnerStorageInfos.push({id:o,level:1,count:e}),n.push({id:o,prev:0,curr:1})}),this.writeStorage(this.storageName.partnerStorageInfos,this.storageData.partnerStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Partner_PartnerItemChange),h.EventMgr.event(s.EventType.Props_PartnerChange_Event),n.length>0&&h.EventMgr.event(s.GlobalEvent.PartnerLevelUpAll,n)},t.prototype.strengthenPartner=function(e){var t=this.storageData.partnerStorageInfos.find(function(t){return t.id==e.getId()});t.level=e.getCurLevel(),t.count=e.getCurCount(),this.writeStorage(this.storageName.partnerStorageInfos,this.storageData.partnerStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Partner_PartnerItemLevelUp),h.EventMgr.event(s.EventType.Props_PartnerChange_Event)},t.prototype.strengthenPartners=function(e){for(var t=function(e){var t=n.storageData.partnerStorageInfos.find(function(t){return t.id==e.getId()});t.level=e.getCurLevel(),t.count=e.getCurCount()},n=this,o=0,i=e;o<i.length;o++)t(i[o]);this.writeStorage(this.storageName.partnerStorageInfos,this.storageData.partnerStorageInfos),h.EventMgr.event(s.EventType.Main_UI_Partner_PartnerItemAllLevelUp),h.EventMgr.event(s.EventType.Props_PartnerChange_Event)},t.prototype.equippedPartner=function(e){this.storageData.usingPartnerIds[e.getSlotIndex()]=e.getId(),this.writeStorage(this.storageName.usingPartnerIds,this.storageData.usingPartnerIds),h.EventMgr.event(s.EventType.Main_UI_Partner_PartnerEquipChange),h.EventMgr.event(s.EventType.Props_PartnerChange_Event)},t.prototype.unEquippedPartner=function(e){this.storageData.usingPartnerIds[e.getSlotIndex()]=0,this.writeStorage(this.storageName.usingPartnerIds,this.storageData.usingPartnerIds),h.EventMgr.event(s.EventType.Main_UI_Partner_PartnerEquipChange),h.EventMgr.event(s.EventType.Props_PartnerChange_Event)},t.prototype.addBossRushDifficulty=function(e){void 0===e&&(e=null),null!=e?n.instance.storageData.bossRushMaxDifficulty=e:n.instance.storageData.bossRushMaxDifficulty++;var t=y.default.instance.getAllGoldRushInfos(),o=0;for(var i in t)o++;n.instance.storageData.bossRushMaxDifficulty>o&&(n.instance.storageData.bossRushMaxDifficulty=o),this.writeStorage(this.storageName.bossRushMaxDifficulty,this.storageData.bossRushMaxDifficulty)},t.prototype.addGoldRushDifficulty=function(e){void 0===e&&(e=null),null!=e?n.instance.storageData.goldRushMaxDifficulty=e:n.instance.storageData.goldRushMaxDifficulty++;var t=y.default.instance.getAllGoldRushInfos(),o=0;for(var i in t)o++;n.instance.storageData.goldRushMaxDifficulty>o&&(n.instance.storageData.goldRushMaxDifficulty=o),this.writeStorage(this.storageName.goldRushMaxDifficulty,this.storageData.goldRushMaxDifficulty)},t.prototype.addClearRushDifficulty=function(e){void 0===e&&(e=null),null!=e?n.instance.storageData.clearRushMaxDifficulty=e:n.instance.storageData.clearRushMaxDifficulty++;var t=y.default.instance.getAllClearRushInfos(),o=0;for(var i in t)o++;n.instance.storageData.clearRushMaxDifficulty>o&&(n.instance.storageData.clearRushMaxDifficulty=o),this.writeStorage(this.storageName.clearRushMaxDifficulty,n.instance.storageData.clearRushMaxDifficulty)},t.prototype.addHeroRushDifficulty=function(e){void 0===e&&(e=null),null!=e?n.instance.storageData.heroRushMaxDifficulty=e:n.instance.storageData.heroRushMaxDifficulty++,n.instance.storageData.heroRushMaxDifficulty>96&&(n.instance.storageData.heroRushMaxDifficulty=96),this.writeStorage(this.storageName.heroRushMaxDifficulty,n.instance.storageData.heroRushMaxDifficulty)},t.prototype.addBossRushKey=function(e){this.storageData.bossRushKey+=e,this.writeStorage(this.storageName.bossRushKey,this.storageData.bossRushKey),h.EventMgr.event(s.EventType.Common_BossRushKey_Update)},t.prototype.addGoldRushKey=function(e){this.storageData.goldRushKey+=e,this.writeStorage(this.storageName.goldRushKey,this.storageData.goldRushKey),h.EventMgr.event(s.EventType.Common_GoldRushKey_Update)},t.prototype.addClearRushKey=function(e){this.storageData.clearRushKey+=e,this.writeStorage(this.storageName.clearRushKey,this.storageData.clearRushKey),h.EventMgr.event(s.EventType.Common_ClearRushKey_Update)},t.prototype.addHeroRushKey=function(e){this.storageData.heroRushKey+=e,this.writeStorage(this.storageName.heroRushKey,this.storageData.heroRushKey),h.EventMgr.event(s.EventType.Common_HeroRushKey_Update)},t.prototype.useBossRushKey=function(){this.storageData.bossRushKey>0&&(this.storageData.bossRushKey--,this.writeStorage(this.storageName.bossRushKey,this.storageData.bossRushKey),h.EventMgr.event(s.EventType.Common_BossRushKey_Update))},t.prototype.useBossRushVideoKey=function(){this.storageData.bossRushKeyVideo>0&&(this.storageData.bossRushKeyVideo--,this.writeStorage(this.storageName.bossRushKeyVideo,this.storageData.bossRushKeyVideo),h.EventMgr.event(s.EventType.Common_BossRushKey_Update),l.default.trackEvent(l.TrackEventKey.key["\u9996\u9886\u526f\u672c\u5e7f\u544a\u94a5\u5319"]))},t.prototype.useGoldRushKey=function(){this.storageData.goldRushKey>0&&(this.storageData.goldRushKey--,this.writeStorage(this.storageName.goldRushKey,this.storageData.goldRushKey),h.EventMgr.event(s.EventType.Common_GoldRushKey_Update))},t.prototype.useGoldRushVideoKey=function(){this.storageData.goldRushKeyVideo>0&&(this.storageData.goldRushKeyVideo--,this.writeStorage(this.storageName.goldRushKeyVideo,this.storageData.goldRushKeyVideo),h.EventMgr.event(s.EventType.Common_GoldRushKey_Update),l.default.trackEvent(l.TrackEventKey.key["\u91d1\u5e01\u526f\u672c\u5e7f\u544a\u94a5\u5319"]))},t.prototype.useClearRushKey=function(){this.storageData.clearRushKey>0&&(this.storageData.clearRushKey--,this.writeStorage(this.storageName.clearRushKey,this.storageData.clearRushKey),h.EventMgr.event(s.EventType.Common_ClearRushKey_Update))},t.prototype.useClearRushVideoKey=function(){this.storageData.clearRushKeyVideo>0&&(this.storageData.clearRushKeyVideo--,this.writeStorage(this.storageName.clearRushKeyVideo,this.storageData.clearRushKeyVideo),h.EventMgr.event(s.EventType.Common_ClearRushKey_Update),l.default.trackEvent(l.TrackEventKey.key["\u6751\u5e84\u526f\u672c\u5e7f\u544a\u94a5\u5319"]))},t.prototype.useHeroRushKey=function(){this.storageData.heroRushKey>0&&(this.storageData.heroRushKey--,this.writeStorage(this.storageName.heroRushKey,this.storageData.heroRushKey),h.EventMgr.event(s.EventType.Common_HeroRushKey_Update))},t.prototype.useHeroRushVideoKey=function(){this.storageData.heroRushKeyVideo>0&&(this.storageData.heroRushKeyVideo--,this.writeStorage(this.storageName.heroRushKeyVideo,this.storageData.heroRushKeyVideo),h.EventMgr.event(s.EventType.Common_HeroRushKey_Update),l.default.trackEvent(l.TrackEventKey.key["\u7a81\u88ad\u526f\u672c\u5e7f\u544a\u94a5\u5319"]))},t.prototype._createHeroData=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=0);var o=new c.default;return o.id=e,o.level=t,o.curExp=n,o.propAdds=[],o},t.prototype.unlockHero=function(e){var t=this._createHeroData(e);this.storageData.heroStorageInfos.push(t),this.writeStorage(this.storageName.heroStorageInfos,this.storageData.heroStorageInfos)},t.prototype.equipHero=function(e){this.storageData.usingHeroId=e,this.writeStorage(this.storageName.usingHeroId,this.storageData.usingHeroId),h.EventMgr.event(s.GlobalEvent.ChangeBattleHero)},t.prototype.refreshHeroInfo=function(e){var t=this.storageData.heroStorageInfos.find(function(t){return t.id==e.id});t?(t.level=e.level,t.curExp=e.curExp,t.propAdds=e.propAdds):this.storageData.heroStorageInfos.push(t),this.writeStorage(this.storageName.heroStorageInfos,this.storageData.heroStorageInfos)},t.prototype.addExp=function(e){this.storageData.slimeExp+=e,this.writeStorage(this.storageName.slimeExp,this.storageData.slimeExp),h.EventMgr.event(s.GlobalEvent.AssetItemChange+s.ASSET_TYPE.SlimeExp)},t.prototype.addSp=function(e){this.storageData.heroSp+=e,this.writeStorage(this.storageName.heroSp,this.storageData.heroSp),h.EventMgr.event(s.GlobalEvent.AssetItemChange+s.ASSET_TYPE.Sp)},t.prototype.addFork=function(e){var t=this.storageData.fork;this.storageData.fork=parseInt(t)+parseInt(e),this.writeStorage(this.storageName.fork,this.storageData.fork),h.EventMgr.event(s.GlobalEvent.AssetItemChange+s.ASSET_TYPE.Fork)},t.prototype.saveUserRelicData=function(e){this.storageData.userRelicData=e,this.writeStorage(this.storageName.userRelicData,this.storageData.userRelicData),h.EventMgr.event(s.EventType.Main_UI_Relic_Update)},t.prototype.changeRouletteCount=function(e,t){void 0===t&&(t=!1),this.storageData.rouletteCount+=e,t&&(this.storageData.rouletteCount=e),this.storageData.rouletteCount<0&&(this.storageData.rouletteCount=0),this.writeStorage(this.storageName.rouletteCount,this.storageData.rouletteCount),h.EventMgr.event(s.EventType.Common_RouletteCount_Update)},t.prototype.changeRouletteLastTime=function(e){this.storageData.rouletteLastTime=e,this.writeStorage(this.storageName.rouletteLastTime,this.storageData.rouletteLastTime)},t.prototype.changeRouletteResidueTime=function(e,t){void 0===t&&(t=!1),this.storageData.rouletteResidueTime+=e,t&&(this.storageData.rouletteResidueTime=e),this.storageData.rouletteResidueTime<0&&(this.storageData.rouletteResidueTime=0),this.writeStorage(this.storageName.rouletteResidueTime,this.storageData.rouletteResidueTime)},t.prototype.changeSpeedUpStartTime=function(e){this.storageData.speedUpStartTime=e,this.writeStorage(this.storageName.speedUpStartTime,this.storageData.speedUpStartTime)},t.prototype.unlockPart=function(e){if(null!=e&&null!=e){if(-1!=this.storageData.unlockPart.indexOf(e))return!1;this.storageData.unlockPart.push(e),this.writeStorage(this.storageName.unlockPart,this.storageData.unlockPart),h.EventMgr.event(s.EventType.Common_UnlockType_Update);var t=b.Correspondence[e];h.EventMgr.event(b.default.Instance.getMsgByType(t),t);var n=_.default.instance.getSpecialGuideEnum(v.GuideConditionType.UNLOCK_SYSTEM,t);return n!=v.SpecialGuideEnum.None&&_.default.instance.checkSpecial(n),console.log("\u89e3\u9501\u7cfb\u7edf",t,s.UnlockType[e]),!0}},t.prototype.changeBlessLevels=function(e){this.storageData.blessLevels=e,this.writeStorage(this.storageName.blessLevels,this.storageData.blessLevels)},t.prototype.changeBlessExps=function(e){this.storageData.blessExps=e,this.writeStorage(this.storageName.blessExps,this.storageData.blessExps)},t.prototype.changeBlessTimes=function(e){this.storageData.blessTimes=e,this.writeStorage(this.storageName.blessTimes,this.storageData.blessTimes)},t.prototype.addVideoSum=function(e){var t=this;void 0===e&&(e=null),null!=e?this.storageData.videoSum=e:this.storageData.videoSum+=1,this.writeStorage(this.storageName.videoSum,this.storageData.videoSum);var n=0,o=0;m.default.instance.getInfos().some(function(e,i){e.videoSum>0&&t.storageData.videoSum>=e.videoSum&&(n=m.default.instance.getInfo(i+1).atk,o=m.default.instance.getInfo(i+1).hp)}),this.storageData.videoVipAdditions=[n,o],this.writeStorage(this.storageName.videoVipAdditions,this.storageData.videoVipAdditions)},t.prototype.changePlaceAwardTime=function(e){this.storageData.placeAwardTime=e,this.writeStorage(this.storageName.placeAwardTime,this.storageData.placeAwardTime)},t.prototype.changeOtherAwardTime=function(e){this.storageData.getOtherAwardTime=e,this.writeStorage(this.storageName.getOtherAwardTime,this.storageData.getOtherAwardTime)},t.prototype.saveSummonAdData=function(){this.writeStorage(this.storageName.summonAdDate,this.storageData.summonAdDate)},t.prototype.saveSummonLevel=function(){this.writeStorage(this.storageName.summonLevels,this.storageData.summonLevels)},t.prototype.saveUserShopData=function(e){this.storageData.userShopData=e,this.writeStorage(this.storageName.userShopData,e)},t.prototype.saveUserShopTotalPay=function(e){this.storageData.userShopTotalPay=e,this.writeStorage(this.storageName.userShopTotalPay,this.storageData.userShopTotalPay)},t.prototype.saveUserWeekOpenTimeStamp=function(e){this.storageData.userWeekOpenTimeStamp=e,this.writeStorage(this.storageName.userWeekOpenTimeStamp,this.storageData.userWeekOpenTimeStamp)},t.prototype.saveUserDailyOpenTimeStamp=function(e){this.storageData.userDailyOpenTimeStamp=e,this.writeStorage(this.storageName.userDailyOpenTimeStamp,this.storageData.userDailyOpenTimeStamp)},t.prototype.saveDailyAdTimes=function(){this.writeStorage(this.storageName.dailyAdTimes,this.storageData.dailyAdTimes)},t.prototype.saveDailyAdDate=function(){this.writeStorage(this.storageName.dailyAdDate,this.storageData.dailyAdDate)},t.prototype.saveQuestSySValue=function(){this.writeStorage(this.storageName.questSysValue,this.storageData.questSysValue)},t.prototype.saveQuestDailyResetTimeKey=function(e){n.instance.storageData.questDailyResetTimeKey=e,this.writeStorage(this.storageName.questDailyResetTimeKey,this.storageData.questDailyResetTimeKey)},t.prototype.saveUserDailyQuest=function(e){n.instance.storageData.userDailyQuest=e,this.writeStorage(this.storageName.userDailyQuest,this.storageData.userDailyQuest)},t.prototype.saveUserChainQuest=function(e){n.instance.storageData.userChainQuest=e,this.writeStorage(this.storageName.userChainQuest,this.storageData.userChainQuest)},t.prototype.saveUserExtraRewardData=function(e){n.instance.storageData.userExtraRewardData=e,this.writeStorage(this.storageName.userExtraRewardData,this.storageData.userExtraRewardData)},t.prototype.saveUserSevenChallengeOpenTime=function(e){n.instance.storageData.userSevenChallengeOpenTime=e,this.writeStorage(this.storageName.userSevenChallengeOpenTime,this.storageData.userSevenChallengeOpenTime)},t.prototype.saveUserSevenChallengeQuest=function(e){n.instance.storageData.userSevenChallengeQuest=e,this.writeStorage(this.storageName.userSevenChallengeQuest,this.storageData.userSevenChallengeQuest)},t.prototype.saveUserMasteryData=function(e){this.storageData.userMasteryData=e,this.writeStorage(this.storageName.userMasteryData,this.storageData.userMasteryData)},t.prototype.saveWeekReceiveDays=function(e){this.storageData.weekReceiveDays=e,this.writeStorage(this.storageName.weekReceiveDays,this.storageData.weekReceiveDays)},t.prototype.saveWeekReceiveDate=function(e){this.storageData.weekReceiveDate=e,this.writeStorage(this.storageName.weekReceiveDate,this.storageData.weekReceiveDate)},t.prototype.saveUserCollectionData=function(e){this.storageData.userCollectionData=e,this.writeStorage(this.storageName.userCollectionData,this.storageData.userCollectionData)},t.prototype.changeChestSkillCdTime=function(e){this.storageData.chestSkillCdTime=e,this.writeStorage(this.storageName.chestSkillCdTime,this.storageData.chestSkillCdTime)},t.prototype.saveUserRingData=function(e){this.storageData.userRingData=e,this.writeStorage(this.storageName.userRingData,this.storageData.userRingData)},t.prototype.saveUserEquipRingId=function(e){this.storageData.userEquipRingId=e,this.writeStorage(this.storageName.userEquipRingId,this.storageData.userEquipRingId)},t.prototype.addRingChip=function(e){this.storageData.ringChip+=e,this.writeStorage(this.storageName.ringChip,this.storageData.ringChip)},t.prototype.saveSpecialGuideData=function(e){this.storageData.specialGuideData=e,this.writeStorage(this.storageName.specialGuideData,this.storageData.specialGuideData)},t.prototype.saveLastGuideId=function(e){this.storageData.lastGuideId=e,this.writeStorage(this.storageName.lastGuideId,this.storageData.lastGuideId)},t.prototype.saveGuideData=function(e){this.storageData.guideData=e,this.writeStorage(this.storageName.guideData,this.storageData.guideData)},t.prototype.changeFlightChestCount=function(e,t){void 0===t&&(t=!1),t?this.storageData.flightChestCount=e:this.storageData.flightChestCount+=e,this.writeStorage(this.storageName.flightChestCount,this.storageData.flightChestCount)},t.prototype.changeHeroRushPickHeroIds=function(e){this.storageData.heroRushPickHeroIds=e,this.writeStorage(this.storageName.heroRushPickHeroIds,this.storageData.heroRushPickHeroIds)},n=r([C],t)}(cc.Component);n.default=T,cc._RF.pop()},{"../../plugin/NumberPlus":"NumberPlus","../../plugin/Secrect":"Secrect","../Config/EnumTypes":"EnumTypes","../Config/GameData":"GameData","../Config/HeroStorageInfo":"HeroStorageInfo","../Config/StorageData":"StorageData","../Global":"Global","../Main/Mgr/GuideCore/GuideEnums":"GuideEnums","../Main/Mgr/GuideCore/GuideMgr":"GuideMgr","../Main/Mgr/Unlock/MgrUnlock":"MgrUnlock","../Platform/Platform":"Platform","../Tool/Tool":"Tool","./BattleData":"BattleData","./EventMgr":"EventMgr","./SoundMgr":"SoundMgr","./TimeMgr":"TimeMgr","./VideoVipMgr":"VideoVipMgr"}],StrengthenResultItem:[function(e,t,n){"use strict";cc._RF.push(t,"40cc8XLQYFGYZZbNVdW8zhZ","StrengthenResultItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Tool/Tool"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.qualitySprite=null,t.iconSprite=null,t.prevLabel=null,t.currLabel=null,t.arrow=null,t._prevOriginX=0,t}return i(t,e),t.prototype.onLoad=function(){this._prevOriginX=this.prevLabel.node.x},t.prototype.onEnable=function(){this.prevLabel.node.x=0,this.currLabel.node.opacity=0,this.arrow.opacity=0},t.prototype.setQuality=function(e){l.Tool.setSprite(this.qualitySprite,a.BundleName.Main,s.default.Instance.getQualityIcon(e))},t.prototype.setIcon=function(e){l.Tool.setSprite(this.iconSprite,a.BundleName.Main,e)},t.prototype.setLevel=function(e,t){this.prevLabel.string="LV."+e,this.currLabel.string="LV."+t},t.prototype.playAnim=function(){var e=this;this.prevLabel.node.x=0,this.prevLabel.node.stopAllActions(),cc.tween(this.prevLabel.node).delay(.1).to(.1,{x:this._prevOriginX}).call(function(){e.currLabel.node.opacity=255,e.arrow.opacity=255,e.currLabel.node.scale=1.2,e.currLabel.node.stopAllActions(),cc.tween(e.currLabel.node).to(.1,{scale:1}).start()}).start()},r([d(cc.Sprite)],t.prototype,"qualitySprite",void 0),r([d(cc.Sprite)],t.prototype,"iconSprite",void 0),r([d(cc.Label)],t.prototype,"prevLabel",void 0),r([d(cc.Label)],t.prototype,"currLabel",void 0),r([d(cc.Node)],t.prototype,"arrow",void 0),r([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Tool/Tool":"Tool"}],StrengthenResultWindow:[function(e,t,n){"use strict";cc._RF.push(t,"bca09Eh6k9Ok44k4OiOZqcl","StrengthenResultWindow");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Mgr/SoundMgr"),c=e("../../Res/ResPanelOpen"),u=e("../../Tool/Tool"),d=e("../Mgr/EquipmentMgr"),h=e("../Mgr/PartnerMgr"),p=e("../Mgr/SkillMgr"),f=e("./AsyncQueue"),g=e("./StrengthenResultItem"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(e){function t(){var t=e.call(this)||this;return t.layout=null,t.scrollView=null,t.btnSure=null,t.resultItemPrefab=null,t.results=[],t.items=[],t.iconPrefix="",t.type=null,t.results=[],t.items=[],t.layoutOriginWidth=0,t.layoutOriginHeight=0,t.resultAsync=null,t}return i(t,e),t.prototype.setUpValue=function(e){this.type=e.type,this.results=e.results,this._playResults()},t.prototype.onLoad=function(){this.layoutOriginWidth=this.layout.node.width,this.layoutOriginHeight=this.layout.node.height,u.Tool.addClickEvent(this.btnSure,this.close,this)},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");c.default.panelOpen_SmallToBig(e),l.default.instance.PlaySound(a.SoundType.GearLevelUp)},t.prototype.onDisable=function(){this.clear()},t.prototype.clear=function(){this.results.length=0,this.items.length=0,this.unscheduleAllCallbacks()},t.prototype._playResults=function(){var e=this;this.layout.type=cc.Layout.Type.HORIZONTAL,this.layout.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.layout.node.height=this.layoutOriginHeight,this.resultAsync=new f.default;for(var t=0,n=function(n){var o=e.results[n],i=o.id,r=o.prev,a=o.curr,s=Math.floor(n/5),l=t;e.resultAsync.push(function(o){var c=e.getCfg(i),u=e.createItem(c.quality,c.icon,r,a);e.items.push(u),u.node.scale=1.2,u.node.stopAllActions(),cc.tween(u.node).call(function(){u.playAnim()}).to(.1,{scale:1}).start(),n<5?u.node.y=0:5==n?(e.layout.node.width=e.layoutOriginWidth,e.layout.type=cc.Layout.Type.GRID):25==n&&(e.scrollView.enabled=!0),e.layout.enabled=!0,e.layout.updateLayout(),e.layout.enabled=!1,e.scrollView.content.height=Math.max(e.layoutOriginHeight,e.layout.node.height),s!=l&&(t=s,e.scrollView.scrollToBottom(0)),e.scheduleOnce(o,.1)})},o=0;o<this.results.length;o++)n(o);this.resultAsync.play()},t.prototype.createItem=function(e,t,n,o){var i=cc.instantiate(this.resultItemPrefab);i.parent=this.layout.node,i.stopAllActions();var r=i.getComponent(g.default);return r.setQuality(e),r.setIcon(this.iconPrefix+t),r.setLevel(n,o),r},t.prototype.getCfg=function(e){switch(this.type){case a.StrengthenType.Gear:return this.iconPrefix=s.EQUIPMENTICONPATH,d.default.Instance.getGearInfo(e);case a.StrengthenType.Skill:return this.iconPrefix=s.SKILLICONPATH,p.default.Instance.getSkillInfo(e);case a.StrengthenType.Partner:return this.iconPrefix=s.PARTNERICONPATH,h.default.Instance.getPartnerInfo(e)}},t.prototype.close=function(){var e=this.node.getChildByName("base"),t=this;c.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},r([v(cc.Layout)],t.prototype,"layout",void 0),r([v(cc.ScrollView)],t.prototype,"scrollView",void 0),r([v(cc.Node)],t.prototype,"btnSure",void 0),r([v(cc.Prefab)],t.prototype,"resultItemPrefab",void 0),r([m],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/SoundMgr":"SoundMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Mgr/EquipmentMgr":"EquipmentMgr","../Mgr/PartnerMgr":"PartnerMgr","../Mgr/SkillMgr":"SkillMgr","./AsyncQueue":"AsyncQueue","./StrengthenResultItem":"StrengthenResultItem"}],SummonLvUpTip:[function(e,t,n){"use strict";cc._RF.push(t,"63489Pe761GJb4LnINCCPGE","SummonLvUpTip");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s=e("../../Mgr/LanguageMgr"),l=cc._decorator,c=l.ccclass,u=l.property;(function(e){e[e.None=0]="None",e[e.Open=1]="Open",e[e.Delay=2]="Delay",e[e.Close=3]="Close"})(a||(a={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageLabel=null,t.preLevelLabel=null,t.nextLevelLabel=null,t.curState=a.None,t.running=!1,t.time=0,t}return i(t,e),t.prototype.onEnable=function(){this.messageLabel.string=""},t.prototype.setLevel=function(e,t,n){this.preLevelLabel.string=s.default.Instance.getLanguage("LevelUp")+" "+e,this.nextLevelLabel.string=t.toString(),this.messageLabel.node.active=Boolean(n),this.messageLabel.string=Boolean(n)?n:"",this.time=0,this.running=!0,this.curState=a.Open},t.prototype.lateUpdate=function(e){if(this.running)switch(this.time+=e,this.curState){case a.Open:this.curState=a.Delay,this.node.stopAllActions(),this.node.opacity=0,cc.tween(this.node).to(.1,{opacity:255}).start();break;case a.Delay:this.time>=2&&(this.time=0,this.curState=a.Close,this.messageLabel.node.stopAllActions());break;case a.Close:this.curState=a.None,this.running=!1,this.node.destroy()}},r([u(cc.RichText)],t.prototype,"messageLabel",void 0),r([u(cc.RichText)],t.prototype,"preLevelLabel",void 0),r([u(cc.RichText)],t.prototype,"nextLevelLabel",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Mgr/LanguageMgr":"LanguageMgr"}],TaskCanFinish:[function(e,t,n){"use strict";cc._RF.push(t,"96363eHTOBGELAXq22QwO+B","TaskCanFinish");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../../Config/EnumTypes"),a=e("../../Quest/QuestChain"),s=function(e){function t(t){var n=e.call(this)||this;return n._questChains=t,n}return i(t,e),t.prototype.isSuccess=function(){var e=Number(this._questChains[0]),t=a.default.Instance.getData(e);return null!=t&&t.status==r.QUEST_STATUS.Complete},t}(e("./GuideCondition").default);n.default=s,cc._RF.pop()},{"../../../../Config/EnumTypes":"EnumTypes","../../Quest/QuestChain":"QuestChain","./GuideCondition":"GuideCondition"}],TaskCompleteWeakGuide:[function(e,t,n){"use strict";cc._RF.push(t,"0d7b1TAFVVBypOAk0VoHrQl","TaskCompleteWeakGuide");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../../Config/EnumTypes"),s=e("../../../../Mgr/EventMgr"),l=e("../../../../Tool/Tool"),c=e("../../Quest/QuestChain"),u=e("../GuideMgr"),d=e("./WeakGuide"),h=cc._decorator,p=h.ccclass,f=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weakGuideType=d.WeakGuideType.TaskComplete,t}return i(t,e),t.prototype.start=function(){this.scheduleOnce(this.freshView,1),s.EventMgr.on(a.GlobalEvent.ChainQuestStatusChange,this.freshView,this)},t.prototype.show=function(){null==this.guideNode&&(this.guideNode=cc.instantiate(u.default.instance.fingerGuideNode),this.guideNode.parent=this.node,this.guideNode.position=cc.Vec3.ZERO,this.doAction()),this.guideNode.active=!0,this.isShow=!0},t.prototype.freshView=function(){if(u.default.instance.isCompleteGuide(0)){var e=c.default.Instance.chainQuestId;if(e>u.GUIDE_END)this.hide();else{var t=c.default.Instance.getData(e);t&&t.status==a.QUEST_STATUS.Complete?this.show():this.hide()}}else this.hide()},t.prototype.doAction=function(){var e=l.Tool.convertToNodeSpaceAR(this.guideNode.parent,this.node);e.y-=50,this.guideNode.setPosition(e.x,e.y),cc.tween(this.guideNode).sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1)).repeatForever().start()},r([p],t)}(d.default));n.default=f,cc._RF.pop()},{"../../../../Config/EnumTypes":"EnumTypes","../../../../Mgr/EventMgr":"EventMgr","../../../../Tool/Tool":"Tool","../../Quest/QuestChain":"QuestChain","../GuideMgr":"GuideMgr","./WeakGuide":"WeakGuide"}],TaskWeakGuide:[function(e,t,n){"use strict";cc._RF.push(t,"e158evePiNA14CzxEG+XNzA","TaskWeakGuide");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.TaskWeakGuideType=void 0;var a,s=e("../../../../Config/EnumTypes"),l=e("../../../../Mgr/EventMgr"),c=e("../../Quest/QuestChain"),u=e("../Event/GlobalEventTarget"),d=e("../GuideEnums"),h=e("../GuideMgr"),p=e("./WeakGuide");(function(e){e[e.ATK=11]="ATK",e[e.HP=12]="HP",e[e.HPRecovery=13]="HPRecovery",e[e.AttackSpeed=14]="AttackSpeed",e[e.CriticalHitChance=15]="CriticalHitChance",e[e.CriticalHitDamage=16]="CriticalHitDamage",e[e.DoubleShot=17]="DoubleShot",e[e.TripleShot=18]="TripleShot"})(a=n.TaskWeakGuideType||(n.TaskWeakGuideType={}));var f=cc._decorator,g=f.ccclass,y=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.taskWeakType=a.ATK,t.weakGuideType=p.WeakGuideType.Task,t}return i(t,e),t.prototype.setTaskType=function(e){this.taskWeakType=e},t.prototype.start=function(){this.freshView(),l.EventMgr.on(s.GlobalEvent.ChainQuestStatusChange,this.freshView,this),l.EventMgr.on(s.GlobalEvent.AssetItemChange+s.ASSET_TYPE.Coin,this.freshView,this),u.GlobalEventTarget.on(d.GuideEvent.COMPLETE_NORMAL_GUIDE,this.completeGuide,this)},t.prototype.completeGuide=function(){this.freshView()},t.prototype.freshView=function(){if(h.default.instance.isCompleteGuide(1)){var e=c.default.Instance.chainQuestId;if(e>h.GUIDE_END)this.hide();else{var t=c.default.Instance.getData(e);t&&this.taskWeakType==t.activeId&&t.status==s.QUEST_STATUS.Job?this.show():this.hide()}}else this.hide()},t.prototype.doAction=function(){this.guideNode.getComponentInChildren(cc.Sprite).node.position=cc.v3(0,-80,0),this.guideNode.angle=90,cc.tween(this.guideNode).sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1)).repeatForever().start()},r([y({type:cc.Enum(a)})],t.prototype,"taskWeakType",void 0),r([g],t)}(p.default);n.default=m,cc._RF.pop()},{"../../../../Config/EnumTypes":"EnumTypes","../../../../Mgr/EventMgr":"EventMgr","../../Quest/QuestChain":"QuestChain","../Event/GlobalEventTarget":"GlobalEventTarget","../GuideEnums":"GuideEnums","../GuideMgr":"GuideMgr","./WeakGuide":"WeakGuide"}],TestBtn:[function(e,t,n){"use strict";cc._RF.push(t,"e7340Hz9MRAUJYr7euIhAPI","TestBtn");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Tool/Tool"),u=e("../Main_PanelOpen"),d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){var e=this;c.Tool.addClickEvent(this.node,this.onClick,this),this.redpoint(0),l.EventMgr.on(a.EventType.Main_UI_Mail_RedPoint,function(t){s.default.isTest&&console.log("pyq==>\u90ae\u4ef6\u7ea2\u70b9",t),e.redpoint(t)},this)},t.prototype.onClick=function(){u.default.showPopView(this.node)},t.prototype.redpoint=function(e){this.node.children[0]&&(this.node.children[0].opacity=e>0?255:0,this.node.children[0].active=e>0)},r([h],t)}(cc.Component));n.default=p,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],TestPanel:[function(e,t,n){"use strict";cc._RF.push(t,"275bb+W8nFDt64fOQSHvkud","TestPanel");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a,s=e("../../../plugin/NumberPlus"),l=e("../../Config/DataClass/PropData"),c=e("../../Config/EnumTypes"),u=e("../../Config/GameData"),d=e("../../Mgr/EventMgr"),h=e("../../Mgr/StorageMgr"),p=e("../../Tool/Tool"),f=e("../Battle/BattleMgr"),g=e("../Mgr/EquipmentMgr"),y=e("../Mgr/GuideCore/GuideMgr"),m=e("../Mgr/Hero/HeroMgr"),v=e("../Mgr/PartnerMgr"),_=e("../Mgr/SkillMgr"),b=e("../Mgr/Unlock/MgrUnlock"),S=cc._decorator,M=S.ccclass,C=S.property,T=[{name:"\u91d1\u5e01",id:c.ASSET_TYPE.Coin},{name:"\u94bb\u77f3",id:c.ASSET_TYPE.Diamond},{name:"\u9910\u53c9",id:c.ASSET_TYPE.Fork},{name:"\u7ecf\u9a8c\u6c34\u6676",id:c.ASSET_TYPE.SlimeExp},{name:"\u7cbe\u901a\u70b9\u6570",id:c.ASSET_TYPE.Sp},{name:"\u7279\u6027\u70b9\u6570",id:c.ASSET_TYPE.Tailt},{name:"\u77ff\u5c71\u5757",id:c.ASSET_TYPE.MineCube},{name:"\u6212\u6307\u6750\u6599",id:c.ASSET_TYPE.RingChip},{name:"\u9996\u9886\u526f\u672c\u94a5\u5319",id:c.ASSET_TYPE.BossRushKey},{name:"\u91d1\u5e01\u526f\u672c\u94a5\u5319",id:c.ASSET_TYPE.GoldRushKey},{name:"\u6751\u5e84\u626b\u8361\u94a5\u5319",id:c.ASSET_TYPE.CaveRushKey},{name:"\u7a81\u51fb\u526f\u672c\u94a5\u5319",id:c.ASSET_TYPE.HeroLegion}];(function(e){e[e["\u6b66\u5668"]=1001]="\u6b66\u5668",e[e["\u9632\u5177"]=1002]="\u9632\u5177",e[e["\u6280\u80fd"]=1003]="\u6280\u80fd",e[e["\u4f19\u4f34"]=1004]="\u4f19\u4f34"})(a||(a={}));var k=[{name:"\u6b66\u5668",id:a.\u6b66\u5668},{name:"\u9632\u5177",id:a.\u9632\u5177},{name:"\u6280\u80fd",id:a.\u6280\u80fd},{name:"\u4f19\u4f34",id:a.\u4f19\u4f34}],I=[{name:"\u88c5\u5907",id:c.UnlockType.summonGear},{name:"\u6280\u80fd",id:c.UnlockType.skill},{name:"\u4f19\u4f34",id:c.UnlockType.partner},{name:"\u7b7e\u5230",id:c.UnlockType.sign},{name:"\u9996\u9886\u526f\u672c",id:c.UnlockType.bossRush},{name:"\u91d1\u5e01\u526f\u672c",id:c.UnlockType.goldRush},{name:"\u6751\u5e84\u626b\u8361",id:c.UnlockType.clearRush},{name:"\u77ff\u5c71",id:c.UnlockType.mine},{name:"\u6280\u80fd\u69fd2",id:c.UnlockType.skillSlot2},{name:"\u6280\u80fd\u69fd3",id:c.UnlockType.skillSlot3},{name:"\u6280\u80fd\u69fd4",id:c.UnlockType.skillSlot4},{name:"\u6280\u80fd\u69fd5",id:c.UnlockType.skillSlot5},{name:"\u6280\u80fd\u69fd6",id:c.UnlockType.skillSlot6},{name:"\u4f19\u4f34\u69fd2",id:c.UnlockType.partnerSlot2},{name:"\u4f19\u4f34\u69fd3",id:c.UnlockType.partnerSlot3},{name:"\u4f19\u4f34\u69fd4",id:c.UnlockType.partnerSlot4},{name:"\u4f19\u4f34\u69fd5",id:c.UnlockType.partnerSlot5},{name:"\u7cbe\u901a\u80fd\u529b",id:c.UnlockType.Mastery},{name:"\u89d2\u8272",id:c.UnlockType.Hero},{name:"\u8f6c\u76d8",id:c.UnlockType.roulette},{name:"\u795d\u798f",id:c.UnlockType.bless},{name:"\u6302\u673a\u5b9d\u7bb1",id:c.UnlockType.placeChest},{name:"\u6212\u6307\u548c\u82f1\u96c4\u526f\u672c",id:c.UnlockType.HeroRush}],E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollItemPre=null,t.closeBtn=null,t.assetAddPar=null,t.assetAddContent=null,t._currPickAsset=null,t.toolsAddPar=null,t.toolsAddContent=null,t._currPickToolsType=null,t.pickToolsAddContent=null,t._currPickToolsId=null,t._tempToolsIdArr=[],t.lockSystemAddPar=null,t.lockSystemContent=null,t._currPicklockSystem=null,t.blessPar=null,t.blessContent=null,t._currPickBless=null,t.blessTypes=["\u8d22\u795e\u7684\u795d\u798f","\u5927\u529b\u795e\u7684\u795d\u798f","\u5077\u76d7\u4e4b\u795e\u7684\u795d\u798f","\u89c6\u9891\u89c2\u770b\u603b\u6570","\u77ff\u5c71\u6df1\u5ea6","\u8df3\u8f6c\u5173\u5361"],t.copyHardPar=null,t.copyHardContent=null,t._currPickCopy=null,t.copyTypes=["\u9996\u9886\u526f\u672c","\u91d1\u5e01\u526f\u672c","\u6751\u5e84\u626b\u8361"],t.videoChangePar=null,t.addAllPar=null,t.allHero=[41101,41102,41103,41104],t}return i(t,e),t.prototype.onLoad=function(){this.initTouch(),this.initScrollItem()},t.prototype.initTouch=function(){var e=this;p.Tool.addClickEvent(this.assetAddPar.getChildByName("touchNode"),this.handleTouchAssetAddPar,this,null,!1,!1),p.Tool.addClickEvent(this.assetAddPar.getChildByName("changeBtn"),this.changeAssetNum,this),p.Tool.addClickEvent(this.toolsAddPar.getChildByName("touchNode"),this.handleTouchToolsAddPar,this,null,!1,!1),p.Tool.addClickEvent(this.toolsAddPar.getChildByName("touchNode_pick"),this.handleTouchToolsItemPick,this,null,!1,!1),p.Tool.addClickEvent(this.toolsAddPar.getChildByName("changeBtn"),this.changeToolsNum,this),p.Tool.addClickEvent(this.lockSystemAddPar.getChildByName("touchNode"),this.handleTouchLockSystem,this,null,!1,!1),p.Tool.addClickEvent(this.lockSystemAddPar.getChildByName("changeBtn"),function(){y.default.skipGuide=!0,y.default.instance.skipAll(),e.changeLockSystem()},this),p.Tool.addClickEvent(this.lockSystemAddPar.getChildByName("allLockBtn"),this.handleAllLockSystem,this),p.Tool.addClickEvent(this.blessPar.getChildByName("touchNode"),this.handleTouchBlessPar,this,null,!1,!1),p.Tool.addClickEvent(this.blessPar.getChildByName("changeBtn"),this.changeBlessLevel,this),p.Tool.addClickEvent(this.copyHardPar.getChildByName("touchNode"),this.handleTouchCopyHardPar,this,null,!1,!1),p.Tool.addClickEvent(this.copyHardPar.getChildByName("changeBtn"),this.changeCopyHard,this),p.Tool.addClickEvent(this.videoChangePar.getChildByName("videoBtn"),this.changeVideoState,this),p.Tool.addClickEvent(this.videoChangePar.getChildByName("clearStorage"),this.clearData,this),p.Tool.addClickEvent(this.addAllPar.getChildByName("addEquip"),this.addEquip,this),p.Tool.addClickEvent(this.addAllPar.getChildByName("addSkill"),this.addSkill,this),p.Tool.addClickEvent(this.addAllPar.getChildByName("addPet"),this.addPet,this),p.Tool.addClickEvent(this.addAllPar.getChildByName("addHero"),this.addHero,this),p.Tool.addClickEvent(this.addAllPar.getChildByName("addCoin"),this.addCoin,this),p.Tool.addClickEvent(this.addAllPar.getChildByName("addStage"),this.addStage,this),p.Tool.addClickEvent(this.addAllPar.getChildByName("addPropLevel"),this.addPorpLevel,this),p.Tool.addClickEvent(this.closeBtn,this.onCloseBtnClick,this)},t.prototype.initScrollItem=function(){for(var e=this,t=function(t){var o=cc.instantiate(n.scrollItemPre);o.getChildByName("label").getComponent(cc.Label).string=T[t].name,n.assetAddContent.addChild(o),o.on(cc.Node.EventType.TOUCH_END,function(){e.handlePickAsset(T[t])})},n=this,o=0;o<T.length;o++)t(o);var i=function(t){var n=cc.instantiate(r.scrollItemPre);n.getChildByName("label").getComponent(cc.Label).string=k[t].name,r.toolsAddContent.addChild(n),n.on(cc.Node.EventType.TOUCH_END,function(){e.handlePickToolsType(k[t])})},r=this;for(o=0;o<k.length;o++)i(o);var a=function(t){if(b.default.Instance.isUnlock(I[t].id))return"continue";var n=cc.instantiate(s.scrollItemPre);n.getChildByName("label").getComponent(cc.Label).string=I[t].name,s.lockSystemContent.addChild(n),n.on(cc.Node.EventType.TOUCH_END,function(){e.handlePickLockSystem(I[t])})},s=this;for(o=0;o<I.length;o++)a(o);var l=function(t){var n=cc.instantiate(c.scrollItemPre);n.getChildByName("label").getComponent(cc.Label).string=c.blessTypes[t],c.blessContent.addChild(n),n.on(cc.Node.EventType.TOUCH_END,function(){e.handlePickBless(e.blessTypes[t])})},c=this;for(o=0;o<this.blessTypes.length;o++)l(o);var u=function(t){var n=cc.instantiate(d.scrollItemPre);n.getChildByName("label").getComponent(cc.Label).string=d.copyTypes[t],d.copyHardContent.addChild(n),n.on(cc.Node.EventType.TOUCH_END,function(){e.handlePickCopy(e.copyTypes[t])})},d=this;for(o=0;o<this.copyTypes.length;o++)u(o)},t.prototype.handleTouchAssetAddPar=function(){var e=0;this.assetAddPar.getChildByName("scrollView").scaleY<=0&&(e=1),cc.tween(this.assetAddPar.getChildByName("scrollView")).to(.15,{scaleY:e}).start()},t.prototype.handlePickAsset=function(e){this._currPickAsset=e,this.assetAddPar.getChildByName("keyName").getComponent(cc.Label).string=e.name,this.handleTouchAssetAddPar()},t.prototype.changeAssetNum=function(){var e=this.assetAddPar.getChildByName("count").getComponent(cc.EditBox).string;if(""!=e&&null!=this._currPickAsset){var t=parseInt(e);switch(this._currPickAsset.id){case c.ASSET_TYPE.Coin:t<0?h.default.instance.reduceCoin(Math.abs(t)):h.default.instance.addCoin(t);break;case c.ASSET_TYPE.Diamond:h.default.instance.addDiamond(t);break;case c.ASSET_TYPE.Fork:h.default.instance.addFork(t);break;case c.ASSET_TYPE.SlimeExp:h.default.instance.addExp(t);break;case c.ASSET_TYPE.Sp:h.default.instance.addSp(t);break;case c.ASSET_TYPE.Tailt:break;case c.ASSET_TYPE.MineCube:h.default.instance.saveMineCubeCount(h.default.instance.storageData.mineCube+t);break;case c.ASSET_TYPE.RingChip:break;case c.ASSET_TYPE.BossRushKey:h.default.instance.addBossRushKey(t);break;case c.ASSET_TYPE.GoldRushKey:h.default.instance.addGoldRushKey(t);break;case c.ASSET_TYPE.CaveRushKey:h.default.instance.addClearRushKey(t);break;case c.ASSET_TYPE.HeroLegion:h.default.instance.addHeroRushKey(t)}u.default.isTest&&console.log("\u66f4\u65b0"+this._currPickAsset.name+"\u6210\u529f")}},t.prototype.handleTouchToolsAddPar=function(){var e=0;this.toolsAddPar.getChildByName("scrollView").scaleY<=0&&(e=1),cc.tween(this.toolsAddPar.getChildByName("scrollView")).to(.15,{scaleY:e}).start(),1==e&&this.toolsAddPar.getChildByName("scrollView_pick").scaleY>=1&&this.handleTouchToolsItemPick()},t.prototype.handlePickToolsType=function(e){var t=this;switch(this._currPickToolsType=e,this.toolsAddPar.getChildByName("keyName").getComponent(cc.Label).string=e.name,this.handleTouchToolsAddPar(),this._tempToolsIdArr=[],e.id){case a.\u6b66\u5668:this._tempToolsIdArr=g.default.Instance.getWeaponDomains();break;case a.\u9632\u5177:this._tempToolsIdArr=g.default.Instance.getArmorDomains();break;case a.\u6280\u80fd:this._tempToolsIdArr=_.default.Instance.getSkillDomains();break;case a.\u4f19\u4f34:this._tempToolsIdArr=v.default.Instance.getPartnerInfos()}for(var n=this.pickToolsAddContent.childrenCount,o=function(n){var o=cc.instantiate(i.scrollItemPre);i.pickToolsAddContent.addChild(o),o.on(cc.Node.EventType.TOUCH_END,function(){e.id==a.\u6b66\u5668||e.id==a.\u9632\u5177?t.handlePickTools(t._tempToolsIdArr[n]._gearInfo.id):e.id==a.\u6280\u80fd?t.handlePickTools(t._tempToolsIdArr[n]._data.id):e.id==a.\u4f19\u4f34&&t.handlePickTools(t._tempToolsIdArr[n].id)})},i=this,r=n;r<this._tempToolsIdArr.length;r++)o(r);this.pickToolsAddContent.children.some(function(n,o){n.active=o<t._tempToolsIdArr.length,n.active&&(e.id==a.\u6b66\u5668||e.id==a.\u9632\u5177?n.getChildByName("label").getComponent(cc.Label).string=t._tempToolsIdArr[o]._gearInfo.id:e.id==a.\u6280\u80fd?n.getChildByName("label").getComponent(cc.Label).string=t._tempToolsIdArr[o]._data.id:e.id==a.\u4f19\u4f34&&(n.getChildByName("label").getComponent(cc.Label).string=t._tempToolsIdArr[o].id))}),this._currPickToolsId=null,this.toolsAddPar.getChildByName("keyName_pick").getComponent(cc.Label).string="\u9053\u5177id\u9009\u62e9"},t.prototype.handleTouchToolsItemPick=function(){if(null!=this._currPickToolsType){var e=0;this.toolsAddPar.getChildByName("scrollView_pick").scaleY<=0&&(e=1),cc.tween(this.toolsAddPar.getChildByName("scrollView_pick")).to(.15,{scaleY:e}).start(),1==e&&this.toolsAddPar.getChildByName("scrollView").scaleY>=1&&this.handleTouchToolsAddPar()}},t.prototype.handlePickTools=function(e){this._currPickToolsId=e,this.toolsAddPar.getChildByName("keyName_pick").getComponent(cc.Label).string=e,this.handleTouchToolsItemPick()},t.prototype.changeToolsNum=function(){var e=this.toolsAddPar.getChildByName("count").getComponent(cc.EditBox).string;if(""!=e&&null!=this._currPickToolsId){var t=parseInt(e);switch(this._currPickToolsType.id){case a.\u6b66\u5668:case a.\u9632\u5177:g.default.Instance.addEquipment(this._currPickToolsId,t);break;case a.\u6280\u80fd:_.default.Instance.addSkillItem(this._currPickToolsId,t);break;case a.\u4f19\u4f34:v.default.Instance.addPartnerItem(this._currPickToolsId,t)}}},t.prototype.handleTouchLockSystem=function(){var e=0;this.lockSystemAddPar.getChildByName("scrollView").scaleY<=0&&(e=1),cc.tween(this.lockSystemAddPar.getChildByName("scrollView")).to(.15,{scaleY:e}).start()},t.prototype.handlePickLockSystem=function(e){this._currPicklockSystem=e,this.lockSystemAddPar.getChildByName("keyName").getComponent(cc.Label).string=e.name,this.handleTouchLockSystem()},t.prototype.handleAllLockSystem=function(){y.default.skipGuide=!0,y.default.instance.skipAll();var e=h.default.instance.storageData.unlockPart;Object.keys(c.UnlockType).forEach(function(t){var n=c.UnlockType[t];-1==e.indexOf(n)&&h.default.instance.unlockPart(n)})},t.prototype.changeLockSystem=function(e,t){if(void 0===e&&(e=this._currPicklockSystem),void 0===t&&(t=!0),null!=e){switch(e.id){case c.UnlockType.summonGear:h.default.instance.unlockPart(c.UnlockType.shop),h.default.instance.unlockPart(c.UnlockType.summonGear);break;case c.UnlockType.skill:h.default.instance.unlockPart(c.UnlockType.shop),h.default.instance.unlockPart(c.UnlockType.skill);break;case c.UnlockType.partner:h.default.instance.unlockPart(c.UnlockType.shop),h.default.instance.unlockPart(c.UnlockType.partner);break;case c.UnlockType.sign:h.default.instance.unlockPart(c.UnlockType.sign);break;case c.UnlockType.bossRush:h.default.instance.unlockPart(c.UnlockType.copy),h.default.instance.unlockPart(c.UnlockType.bossRush);break;case c.UnlockType.goldRush:h.default.instance.unlockPart(c.UnlockType.copy),h.default.instance.unlockPart(c.UnlockType.goldRush);break;case c.UnlockType.clearRush:h.default.instance.unlockPart(c.UnlockType.copy),h.default.instance.unlockPart(c.UnlockType.clearRush);break;case c.UnlockType.mine:h.default.instance.unlockPart(c.UnlockType.mine);break;case c.UnlockType.skillSlot2:case c.UnlockType.skillSlot3:case c.UnlockType.skillSlot4:case c.UnlockType.skillSlot5:case c.UnlockType.skillSlot6:case c.UnlockType.partnerSlot2:case c.UnlockType.partnerSlot3:case c.UnlockType.partnerSlot4:case c.UnlockType.partnerSlot5:h.default.instance.unlockPart(e.id);break;case c.UnlockType.Mastery:h.default.instance.unlockPart(c.UnlockType.Mastery);break;case c.UnlockType.Hero:h.default.instance.unlockPart(c.UnlockType.Hero);break;case c.UnlockType.roulette:h.default.instance.unlockPart(c.UnlockType.roulette);break;case c.UnlockType.bless:h.default.instance.unlockPart(c.UnlockType.bless);break;case c.UnlockType.HeroRush:h.default.instance.unlockPart(c.UnlockType.HeroRush);break;case c.UnlockType.placeChest:h.default.instance.unlockPart(c.UnlockType.placeChest)}t&&this.onCloseBtnClick()}},t.prototype.handleTouchBlessPar=function(){var e=0;this.blessPar.getChildByName("scrollView").scaleY<=0&&(e=1),cc.tween(this.blessPar.getChildByName("scrollView")).to(.15,{scaleY:e}).start()},t.prototype.handlePickBless=function(e){this._currPickBless=e,this.blessPar.getChildByName("keyName").getComponent(cc.Label).string=e,this.handleTouchBlessPar()},t.prototype.changeBlessLevel=function(){if(null!=this._currPickBless){var e=this.blessPar.getChildByName("count").getComponent(cc.EditBox).string;if(""!=e&&null!=this._currPickBless){var t=parseInt(e),n=h.default.instance.storageData.blessLevels;switch(this._currPickBless){case"\u8d22\u795e\u7684\u795d\u798f":t>30&&(t=30),n[0]=t,h.default.instance.changeBlessLevels(n);break;case"\u5927\u529b\u795e\u7684\u795d\u798f":t>30&&(t=30),n[1]=t,h.default.instance.changeBlessLevels(n);break;case"\u5077\u76d7\u4e4b\u795e\u7684\u795d\u798f":t>30&&(t=30),n[2]=t,h.default.instance.changeBlessLevels(n);break;case"\u89c6\u9891\u89c2\u770b\u603b\u6570":h.default.instance.addVideoSum(t);break;case"\u77ff\u5c71\u6df1\u5ea6":h.default.instance.saveMineDeepth(t);break;case"\u8df3\u8f6c\u5173\u5361":h.default.instance.stageSet(t,1,0),f.default.instance.startLoadStage()}}}},t.prototype.handleTouchCopyHardPar=function(){var e=0;this.copyHardPar.getChildByName("scrollView").scaleY<=0&&(e=1),cc.tween(this.copyHardPar.getChildByName("scrollView")).to(.15,{scaleY:e}).start()},t.prototype.handlePickCopy=function(e){this._currPickCopy=e,this.copyHardPar.getChildByName("keyName").getComponent(cc.Label).string=e,this.handleTouchCopyHardPar()},t.prototype.changeCopyHard=function(){if(null!=this._currPickCopy){var e=this.copyHardPar.getChildByName("count").getComponent(cc.EditBox).string;if(""!=e&&null!=this._currPickCopy){var t=parseInt(e);switch(this._currPickCopy){case"\u9996\u9886\u526f\u672c":h.default.instance.addBossRushDifficulty(t);break;case"\u91d1\u5e01\u526f\u672c":h.default.instance.addGoldRushDifficulty(t);break;case"\u6751\u5e84\u626b\u8361":h.default.instance.addClearRushDifficulty(t)}}}},t.prototype.initShowVideoLab=function(){var e="\u5173\u95ed\u89c6\u9891";u.default.isTest&&(e="\u5f00\u542f\u89c6\u9891"),this.videoChangePar.getChildByName("videoBtn").getChildByName("keyName").getComponent(cc.Label).string=e},t.prototype.changeVideoState=function(){u.default.isTest=!u.default.isTest,this.initShowVideoLab()},t.prototype.clearData=function(){cc.sys.localStorage.clear(),cc.game.restart()},t.prototype.onCloseBtnClick=function(){this.node.destroy()},t.prototype.addEquip=function(){d.EventMgr.event(c.EventType.TestForAddGear)},t.prototype.addSkill=function(){d.EventMgr.event(c.EventType.TestForAddSkill)},t.prototype.addPet=function(){d.EventMgr.event(c.EventType.TestForAddPartner)},t.prototype.addHero=function(){for(var e=0;e<this.allHero.length;e++)m.default.Instance.unlock(this.allHero[e])},t.prototype.addCoin=function(){h.default.instance.addCoin(s.default.decode("1G"))},t.prototype.addStage=function(){h.default.instance.stageSet(f.default.instance.nowLevel+100,1,0),f.default.instance.startLoadStage()},t.prototype.addPorpLevel=function(){h.default.instance.storageData.atkLevel=-1!=l.default.instance.atkMaxLevel?l.default.instance.atkMaxLevel:3e3,h.default.instance.storageData.hpLevel=-1!=l.default.instance.hpMaxLevel?l.default.instance.hpMaxLevel:3e3,h.default.instance.storageData.hpRecoveryLevel=-1!=l.default.instance.hpRecoveryMaxLevel?l.default.instance.hpRecoveryMaxLevel:3e3,h.default.instance.storageData.aspdLevel=-1!=l.default.instance.aspdMaxLevel?l.default.instance.aspdMaxLevel:3e3,h.default.instance.storageData.criticalChanceLevel=-1!=l.default.instance.criticalChanceMaxLevel?l.default.instance.criticalChanceMaxLevel:3e3,h.default.instance.storageData.criticalDamageLevel=-1!=l.default.instance.criticalDamageMaxLevel?l.default.instance.criticalDamageMaxLevel:3e3,h.default.instance.storageData.doubleShot=-1!=l.default.instance.doubleShotChanceMaxLevel?l.default.instance.doubleShotChanceMaxLevel:3e3,h.default.instance.storageData.tripleShot=-1!=l.default.instance.TripleShotChanceMaxLevel?l.default.instance.TripleShotChanceMaxLevel:3e3,d.EventMgr.event(c.EventType.Battle_Hero_Prop_Update)},r([C(cc.Prefab)],t.prototype,"scrollItemPre",void 0),r([C(cc.Node)],t.prototype,"closeBtn",void 0),r([C({type:cc.Node,displayName:"\u8d44\u6e90\u589e\u52a0"})],t.prototype,"assetAddPar",void 0),r([C({type:cc.Node,displayName:"\u8d44\u6e90\u589e\u52a0List"})],t.prototype,"assetAddContent",void 0),r([C({type:cc.Node,displayName:"\u9053\u5177\u589e\u52a0"})],t.prototype,"toolsAddPar",void 0),r([C({type:cc.Node,displayName:"\u9053\u5177\u589e\u52a0List"})],t.prototype,"toolsAddContent",void 0),r([C({type:cc.Node,displayName:"\u9053\u5177\u9009\u62e9List"})],t.prototype,"pickToolsAddContent",void 0),r([C({type:cc.Node,displayName:"\u7cfb\u7edf\u89e3\u9501"})],t.prototype,"lockSystemAddPar",void 0),r([C({type:cc.Node,displayName:"\u7cfb\u7edf\u89e3\u9501List"})],t.prototype,"lockSystemContent",void 0),r([C({type:cc.Node,displayName:"\u795d\u798f\u8bbe\u7f6e"})],t.prototype,"blessPar",void 0),r([C({type:cc.Node,displayName:"\u795d\u798f\u7c7b\u578bList"})],t.prototype,"blessContent",void 0),r([C({type:cc.Node,displayName:"\u526f\u672c\u96be\u5ea6\u8bbe\u7f6e"})],t.prototype,"copyHardPar",void 0),r([C({type:cc.Node,displayName:"\u526f\u672c\u7c7b\u578bList"})],t.prototype,"copyHardContent",void 0),r([C({type:cc.Node,displayName:"\u89c6\u9891\u8bbe\u7f6e"})],t.prototype,"videoChangePar",void 0),r([C({type:cc.Node,displayName:"\u4e00\u952e\u6dfb\u52a0"})],t.prototype,"addAllPar",void 0),r([M],t)}(cc.Component);n.default=E,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/DataClass/PropData":"PropData","../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/StorageMgr":"StorageMgr","../../Tool/Tool":"Tool","../Battle/BattleMgr":"BattleMgr","../Mgr/EquipmentMgr":"EquipmentMgr","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/Hero/HeroMgr":"HeroMgr","../Mgr/PartnerMgr":"PartnerMgr","../Mgr/SkillMgr":"SkillMgr","../Mgr/Unlock/MgrUnlock":"MgrUnlock"}],TimeMgr:[function(e,t,n){"use strict";cc._RF.push(t,"df419fEsSJNV7a2NFFnLPBr","TimeMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Config/EnumTypes"),s=e("../Config/GameData"),l=e("./EventMgr"),c=e("./StorageMgr"),u=e("./TimerHelper"),d=cc._decorator,h=d.ccclass,p=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=0,t.day=0,t.hour=0,t.minute=0,t.second=0,t.isPowerCountStart=!1,t.powerDeltaTime=0,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){n.instance=this,this.timeCount(),this.schedule(this.timeCount,1)},t.prototype.timeInit=function(){n.instance.dayUpdate(),n.instance.startHammerCount(),u.default.setServerTime(u.default.GetNowTime())},t.prototype.timeCount=function(){this.time=this.getNowTime(),this.day=Math.floor(this.time/864e5),this.hour=Math.floor(this.time%864e5/36e5),this.minute=Math.floor(this.time%36e5/6e4),this.second=Math.floor(this.time%6e4/1e3),l.EventMgr.event(a.EventType.Common_TimeUpdate,{time:this.time,day:this.day,hour:this.hour,minute:this.minute,second:this.second}),n.instance.hammerCountUpdate()},t.prototype.dayUpdate=function(){var e=this.day;if(c.default.instance.storageData.lastLoginDay!=e){c.default.instance.setLastLoginDay(e);var t=c.default.instance.storageData.realSignDay,n=c.default.instance.storageData.targetSignDay;t==n&&(7==n?(n=1,t=0):n++),c.default.instance.setRealSignDay(t),c.default.instance.setTargetSignDay(n),c.default.instance.storageData.bossRushKey<s.default.bossRushKeyMax&&(c.default.instance.storageData.bossRushKey=s.default.bossRushKeyMax,c.default.instance.writeStorage(c.default.instance.storageName.bossRushKey,c.default.instance.storageData.bossRushKey)),c.default.instance.storageData.goldRushKey<s.default.goldRushKeyMax&&(c.default.instance.storageData.goldRushKey=s.default.goldRushKeyMax,c.default.instance.writeStorage(c.default.instance.storageName.goldRushKey,c.default.instance.storageData.goldRushKey)),c.default.instance.storageData.clearRushKey<s.default.clearRushKeyMax&&(c.default.instance.storageData.clearRushKey=s.default.clearRushKeyMax,c.default.instance.writeStorage(c.default.instance.storageName.clearRushKey,c.default.instance.storageData.clearRushKey)),c.default.instance.storageData.heroRushKey<s.default.heroRushKeyMax&&(c.default.instance.storageData.heroRushKey=s.default.heroRushKeyMax,c.default.instance.writeStorage(c.default.instance.storageName.heroRushKey,c.default.instance.storageData.heroRushKey)),c.default.instance.storageData.bossRushKeyVideo=s.default.bossRushKeyMax,c.default.instance.storageData.goldRushKeyVideo=s.default.goldRushKeyMax,c.default.instance.storageData.clearRushKeyVideo=s.default.clearRushKeyMax,c.default.instance.storageData.heroRushKeyVideo=s.default.heroRushKeyMax,c.default.instance.writeStorage(c.default.instance.storageName.bossRushKeyVideo,c.default.instance.storageData.bossRushKeyVideo),c.default.instance.writeStorage(c.default.instance.storageName.goldRushKeyVideo,c.default.instance.storageData.goldRushKeyVideo),c.default.instance.writeStorage(c.default.instance.storageName.clearRushKeyVideo,c.default.instance.storageData.clearRushKeyVideo),c.default.instance.writeStorage(c.default.instance.storageName.heroRushKeyVideo,c.default.instance.storageData.heroRushKeyVideo),l.EventMgr.event(a.EventType.Common_BossRushKey_Update),l.EventMgr.event(a.EventType.Common_GoldRushKey_Update),l.EventMgr.event(a.EventType.Common_ClearRushKey_Update),l.EventMgr.event(a.EventType.Common_HeroRushKey_Update),c.default.instance.saveBoomAdCount(0),c.default.instance.saveDrillAdCount(0),c.default.instance.saveShovelAdCount(0),c.default.instance.saveResearchAdCount(0),console.log("\u6bcf\u65e5\u66f4\u65b0\u89e6\u53d1"),c.default.instance.changeRouletteCount(5,!0),c.default.instance.changeRouletteResidueTime(0,!0),l.EventMgr.event(a.EventType.Main_UI_RouletteUpdate),c.default.instance.changeFlightChestCount(0,!0)}},t.prototype.getNowTime=function(){var e=new Date;return e.getTime()-6e4*e.getTimezoneOffset()},t.prototype.TimeFormat=function(e){var t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4),o=Math.floor(e%6e4/1e3);return t.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")},t.prototype.TimeFormat_HM=function(e){var t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4);return t.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")},t.prototype.TimeFormat_M=function(e){var t=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3);return t.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")},t.prototype.startHammerCount=function(){this.isPowerCountStart=!0,this.hammerCountUpdate()},t.prototype.hammerCountUpdate=function(){if(this.isPowerCountStart){var e=c.default.instance.storageData.mineHammer,t=c.default.instance.storageData.mineHammerLimit;if(e<t)if(this.powerDeltaTime=this.time-c.default.instance.storageData.mineRecoveryTime,this.powerDeltaTime<0)c.default.instance.saveMineRecoveryTime();else{var n=Math.floor(this.powerDeltaTime/c.default.instance.storageData.mineHammerRecovertTime);n<=0||(e+n>t?(n=t-e,c.default.instance.saveMineRecoveryTime(),c.default.instance.storageData.mineHammer+=n,c.default.instance.saveMineHammer(c.default.instance.storageData.mineHammer)):n>0&&(c.default.instance.storageData.mineRecoveryTime=c.default.instance.storageData.mineRecoveryTime+n*c.default.instance.storageData.mineHammerRecovertTime,c.default.instance.saveMineRecoveryTime(),c.default.instance.storageData.mineHammer+=n,c.default.instance.saveMineHammer(c.default.instance.storageData.mineHammer)))}else c.default.instance.saveMineRecoveryTime()}},n=r([h],t)}(cc.Component));n.default=p,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","../Config/GameData":"GameData","./EventMgr":"EventMgr","./StorageMgr":"StorageMgr","./TimerHelper":"TimerHelper"}],TimerHelper:[function(e,t,n){"use strict";cc._RF.push(t,"7eb7bCfj6JGx6lgFoIoItgY","TimerHelper"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./TimeMgr"),i=function(){function e(){}return e.setServerTime=function(e){this._deltaTime=globalThisMoment(new Date(e)).diff(new Date,"milliseconds");var t=this.getNowMoment().format("YYYY-MM-DD HH:mm:ss");console.log(">>> \u5f53\u524d\u65f6\u95f4\uff1a",t)},e.GetNowTime=function(){return o.default.instance.getNowTime()},e.isSame=function(e,t,n){var o=this.getNewDate(e),i=this.getNewDate(t);return globalThisMoment(o).isSame(i,n)},e.GetNowDate=function(){return globalThisMoment(new Date(this.GetNowTime())).add(this._deltaTime,"milliseconds").toDate()},e.getNewDate=function(e){return"string"==typeof e&&(e=parseInt(e)),new Date(e)},e.getNowMoment=function(){return globalThisMoment(this.GetNowDate())},e.getMoment=function(e){return globalThisMoment(this.getNewDate(e))},e.getTomorrowValueOf=function(){return this.getNowMoment().startOf("day").add(1,"day").valueOf()},e._deltaTime=0,e}();n.default=i,cc._RF.pop()},{"./TimeMgr":"TimeMgr"}],ToastView:[function(e,t,n){"use strict";cc._RF.push(t,"b8784108+xG1ZdB3KMXcMhV","ToastView");var o,i,r=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.State=void 0,function(e){e[e.NONE=0]="NONE",e[e.OPEN=1]="OPEN",e[e.DELAY=2]="DELAY",e[e.CLOSE=3]="CLOSE"}(i=n.State||(n.State={}));var s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.messageLabel=null,t.running=!1,t.runningTime=0,t.state=i.NONE,t.message="",t}return r(t,e),t.prototype.onLoad=function(){this.originSize=this.node.getContentSize()},t.prototype.tip=function(e){this.message=e,this.messageLabel.node.color=cc.Color.GREEN},t.prototype.warn=function(e){this.message=e,this.messageLabel.node.color=cc.Color.ORANGE},t.prototype.error=function(e){this.message=e,this.messageLabel.node.color=cc.Color.RED},t.prototype.onEnable=function(){this.messageLabel.string="",this.node.height=0,this.running=!0,this.runningTime=0,this.state=i.OPEN},t.prototype.lateUpdate=function(e){if(this.running)switch(this.runningTime+=e,this.state){case i.OPEN:this.runningTime>=.1&&(this.runningTime=0,this.node.height=this.originSize.height,this.state=i.DELAY,this.messageLabel.string=this.message,this.messageLabel.node.stopAllActions(),this.messageLabel.node.opacity=0,cc.tween(this.messageLabel.node).to(.1,{opacity:255}).start());break;case i.DELAY:this.runningTime>=2&&(this.runningTime=0,this.state=i.CLOSE,this.messageLabel.node.stopAllActions(),cc.tween(this.messageLabel.node).to(.1,{opacity:0}).start());break;case i.CLOSE:this.node.height=cc.misc.lerp(this.originSize.height,0,this.runningTime/.12),this.runningTime>=.12&&(this.runningTime=0,this.state=i.NONE,this.running=!1,this.node.emit("remove",this))}},a([c(cc.RichText)],t.prototype,"messageLabel",void 0),a([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],Toast:[function(e,t,n){"use strict";cc._RF.push(t,"9839c1U649H2qBs0nYt+SiT","Toast");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../CommonUI/UIItemPool"),s=e("./ToastView"),l=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return i(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return n._instance},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){n._instance=this},Object.defineProperty(t.prototype,"prefabItem",{set:function(e){this.prefab=e},enumerable:!1,configurable:!0}),t.createNode=function(){var e=new cc.Node("Toast");e.addComponent(n),e.parent=cc.find("App"),e.width=cc.winSize.width,e.height=460,e.anchorY=0,e.anchorX=.5,e.y=200;var t=e.addComponent(cc.Layout);t.type=cc.Layout.Type.VERTICAL,t.resizeMode=cc.Layout.ResizeMode.CONTAINER,t.spacingY=10,t.paddingTop=-300},t.prototype.onDestroy=function(){n._instance=null,e.prototype.onDestroy.call(this)},t.prototype._open=function(){var e=this,t=this.get();return t&&(t.parent=this.node,t.once("remove",function(t){t&&cc.isValid(t.node)&&e._close(t.node)})),t.getComponent(s.default)||null},t.prototype._close=function(e){n.lastMessage="",e.emit("removed"),this.put(e)},t.tip=function(e){if(n.lastMessage!=e){n.lastMessage=e;var t=n._instance._open();return t.tip(e),t}return null},t.warn=function(e){if(n.lastMessage!=e){n.lastMessage=e;var t=n._instance._open();return t.warn(e),t}return null},t.error=function(e){if(n.lastMessage!=e){n.lastMessage=e;var t=n._instance._open();return t.error(e),t}return null},t.close=function(e){n._instance._close(e)},t.closeAll=function(){n._instance.node.getComponentsInChildren(s.default).forEach(function(e){n.close(e.node)})},t._instance=null,t.lastMessage="",n=r([l],t)}(a.default);n.default=c,cc._RF.pop()},{"../CommonUI/UIItemPool":"UIItemPool","./ToastView":"ToastView"}],ToggleToPage:[function(e,t,n){"use strict";cc._RF.push(t,"83fb7CK/GZOxq/OXniUEuZQ","ToggleToPage");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.PAGE_EVENTS=void 0,n.PAGE_EVENTS={PageEnter:"page-enter",PageExit:"page-exit",PageToIdx:"page-to-index"};var a=cc._decorator,s=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleContainer=null,t.pageView=null,t.touchScrollPage=!0,t.enableAutoCheckPage=!1,t._defaultPageIdx=0,t.currIdx=-1,t.__customScrollToPage=null,t}return i(t,e),t.prototype.onLoad=function(){for(var e=this.toggleContainer.toggleItems,t=0;t<e.length;t++)e[t].node.on("toggle",this._onToggle,this);this.touchScrollPage&&this.pageView.node.on("page-turning",this._onPageTurning,this)},t.prototype.start=function(){var e=this.toggleContainer.toggleItems;e.length!=this.pageView.getPages().length&&cc.error("this.toggle count != pageView.pages count !!!!",e.length,this.pageView.getPages().length)},t.prototype._onPageTurning=function(){var e=this.pageView.getCurrentPageIndex();this._toggleToIdx(e),this._pageEventToIdx(e)},t.prototype._onToggle=function(e){if(e.isChecked){var t=this.toggleContainer.toggleItems.indexOf(e);this.currIdx!=t&&(this.__customScrollToPage?this.__customScrollToPage(this.currIdx,t):this._scrollToPage(t),this._pageEventToIdx(t))}},t.prototype._toggleToIdx=function(e){var t=this.toggleContainer.toggleItems[e];t&&t.check()},t.prototype._pageEventToIdx=function(e){var t=this.pageView.getPages(),o=t[this.currIdx];o&&(o.emit(n.PAGE_EVENTS.PageExit),o.active=!1),this.currIdx=e,(o=t[this.currIdx])&&(o.active=!0,o.emit(n.PAGE_EVENTS.PageEnter)),this.node.emit(n.PAGE_EVENTS.PageToIdx,this.currIdx)},t.prototype._scrollToPage=function(e,t){var n=0!==t?t:this.pageView.pageTurningSpeed;this.pageView.scrollToPage(e,n)},t.prototype.setCustomScrollToPage=function(e){this.__customScrollToPage=e},t.prototype.getToggleContainer=function(){return this.toggleContainer},t.prototype.getPageView=function(){return this.pageView},t.prototype.getPage=function(e){return this.pageView.getPages()[e]},t.prototype.getPages=function(){return this.pageView.getPages()},t.prototype.checked=function(e,t){this.currIdx!=e&&(this._toggleToIdx(e),this._scrollToPage(e,t),this._pageEventToIdx(e))},t.prototype.setDefaultCheckedIdx=function(e){e||(e=0),this._defaultPageIdx=e},t.prototype.onEnable=function(){var e=this,t=e.pageView;this.scheduleOnce(function(){var n=e.pageView.getPages();myGlobalThis.each(n,function(e){e.active=!1}),e.touchScrollPage||t._unregisterEvent(),e.enableAutoCheckPage&&e._defaultPageIdx>=0&&(e._toggleToIdx(e._defaultPageIdx),e._pageEventToIdx(e._defaultPageIdx),e._scrollToPage(e._defaultPageIdx))})},t.prototype.onDisable=function(){var e=this.getPage(this.currIdx);e&&e.emit(n.PAGE_EVENTS.PageExit)},r([l(cc.ToggleContainer)],t.prototype,"toggleContainer",void 0),r([l(cc.PageView)],t.prototype,"pageView",void 0),r([l({displayName:"\u662f\u5426\u53ef\u4ee5\u62d6\u52a8\u7ffb\u9875"})],t.prototype,"touchScrollPage",void 0),r([l()],t.prototype,"enableAutoCheckPage",void 0),r([s],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],ToolNode:[function(e,t,n){"use strict";cc._RF.push(t,"7ce5ePUWq5G3Yuh64iR+pHt","ToolNode");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=!1,t.spriteFrames=[],t}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this._value=e,this.do()},enumerable:!1,configurable:!0}),t.prototype.do=function(){for(var e=this.node.children[0],t=1;t<42;t++){var n=cc.instantiate(e);this.node.addChild(n),n.name="partner_bullet_"+(t+1).toString()}for(t=0;t<this.node.children.length;t++)this.node.children[t].children[0].getComponent(cc.Sprite).spriteFrame=this.spriteFrames[t]},r([l(cc.Boolean)],t.prototype,"value",null),r([l([cc.SpriteFrame])],t.prototype,"spriteFrames",void 0),r([s],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],Tool:[function(e,t,n){"use strict";cc._RF.push(t,"5f5d0+RntVPnp1jmIwCWW0Q","Tool"),Object.defineProperty(n,"__esModule",{value:!0}),n.Tool=void 0;var o=e("../Config/EnumTypes"),i=e("../Mgr/BundleMgr"),r=e("../Mgr/SoundMgr"),a=e("../Mgr/TimeMgr"),s=function(){function e(){}return e.addClickEvent=function(e,t,n,i,s,l,c){if(void 0===i&&(i=null),void 0===s&&(s=!0),void 0===l&&(l=!0),void 0===c&&(c=0),e){e.targetOff(n);var u=!0,d=e.scaleX,h=.9*d,p=!1;e.on(cc.Node.EventType.TOUCH_START,function(){p=!0,l&&cc.tween(e).to(.06,{scaleX:h,scaleY:h}).start()},n),e.on(cc.Node.EventType.TOUCH_END,function(){0!=p&&(p=!1,l?cc.tween(e).to(.06,{scaleX:d,scaleY:d}).call(function(){u||console.warn("\u6309\u94ae\u70b9\u51fbCD\u4e2d"),u&&t&&t.call(n,i),s&&r.default.instance&&r.default.instance.PlaySound(o.SoundType.button),u=!1,a.default.instance.scheduleOnce(function(){u=!0},c)}).start():(u||console.warn("\u6309\u94ae\u70b9\u51fbCD\u4e2d"),u&&t&&t.call(n,i),s&&r.default.instance&&r.default.instance.PlaySound(o.SoundType.button),u=!1,a.default.instance.scheduleOnce(function(){u=!0},c)))},n),e.on(cc.Node.EventType.TOUCH_CANCEL,function(){0!=p&&(p=!1,l&&cc.tween(e).to(.06,{scaleX:d,scaleY:d}).start())},n)}},e.findNodeByName=function(e,t){var n=null,o=function(e){for(var i=0;i<e.children.length;i++){if(e.children[i].name==t)return void(n=e.children[i]);o(e.children[i])}};return o(e),n},e.findAllNodeByName=function(e,t){var n=[],o=function(e){for(var i=0;i<e.children.length;i++)e.children[i].name==t&&n.push(e.children[i]),o(e.children[i])};return o(e),n},e.findNodeHasName=function(e,t){var n=null,o=function(e){for(var i=0;i<e.children.length;i++){if(-1!=e.children[i].name.indexOf(t))return void(n=e.children[i]);o(e.children[i])}};return o(e),n},e.findAllNodeHasName=function(e,t){var n=[],o=function(e){for(var i=0;i<e.children.length;i++)-1!=e.children[i].name.indexOf(t)&&n.push(e.children[i]),o(e.children[i])};return o(e),n},e.unactiveAllChildren=function(e){for(var t=0;t<e.children.length;t++)e.children[t].active=!1},e.activeAllChildren=function(e){for(var t=0;t<e.children.length;t++)e.children[t].active=!0},e.activeIndexInChildren=function(e,t){for(var n=0;n<e.children.length;n++)e.children[n].active=n==t},e.setStatsColor=function(e,t){void 0===e&&(e=cc.Color.WHITE),void 0===t&&(t=cc.color(0,0,0,150));var n=cc.find("PROFILER-NODE");if(!n)return cc.warn("\u672a\u627e\u5230\u7edf\u8ba1\u9762\u677f\u8282\u70b9\uff01");n.children.forEach(function(t){return t.color=e});var o=n.getChildByName("BACKGROUND");o||(o=new cc.Node("BACKGROUND"),n.addChild(o,cc.macro.MIN_ZINDEX),o.setContentSize(n.getBoundingBoxToWorld()),o.setPosition(0,0));var i=o.getComponent(cc.Graphics)||o.addComponent(cc.Graphics);i.clear(),i.rect(-5,12.5,o.width+10,o.height-10),i.fillColor=t,i.fill()},e.getAngle2DWay=function(e,t){var n,o=cc.Vec2.dot(e,t),i=cc.Vec2.len(e)*cc.Vec2.len(t);if(0==i)n=0;else{n=180*Math.acos(o/i)/Math.PI;var r=e.x*t.y-t.x*e.y;r>0?n*=1:r<0?n*=-1:n=n}return n},e.getRandomInArray=function(e){if(e.length>0){var t=Math.random()*e.length;return e[t=Math.floor(t)]}return 0==e.length?null:(console.error("\u4f20\u5165\u9519\u8bef\u53c2\u6570,\u8fd4\u56de\u7a7a"),null)},e.getRandomByArray_Precent=function(e,t){if(e.length!=t.length)return console.log("\u957f\u5ea6\u4e0d\u4e00\u81f4",e,t),null;for(var n=0,o=0;o<t.length;o++)n+=t[o];var i=0,r=Math.random();for(o=0;o<t.length;o++)if(r<=(i+=t[o]/n))return e[o];return null},e.takeRandomInArray=function(e){if(e.length){var t=Math.random()*e.length,n=e[t=Math.floor(t)];return e.splice(t,1),n}return console.error("\u4f20\u5165\u9519\u8bef\u53c2\u6570,\u8fd4\u56de\u7a7a"),null},e.getPrecentFromWeight=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];var o=0,i=[];for(n=0;n<e.length;n++)0==t?(i.push(1/e.length),console.log("\u6bd4\u91cd\u4f20\u5165\u5168\u90e8\u90fd\u662f0\uff0c\u8fd4\u56de\u5e73\u5747\u6570\u7ec4")):(o=e[n]/t,i.push(o));return i},e.randomNumber=function(e,t){return e+(t-e)*Math.random()},e.randomInt=function(e,t){return Math.floor(e+(t+1-e)*Math.random())},e.halfPercent=function(){return Math.random()<.5},e.percent=function(e){return Math.random()<e},e.cloneArray_normal=function(e){return[].concat(e)},e.cloneArray_Obj=function(e){return JSON.parse(JSON.stringify(e))},e.getRgbByHex=function(e){var t=[],n=[],o=e.replace(/#/,"");if(3==o.length){for(var i=[],r=0;r<3;r++)i.push(o.charAt(r)+o.charAt(r));o=i.join("")}for(r=0;r<3;r++)t[r]="0x"+o.substr(2*r,2),n.push(parseInt(t[r]));return new cc.Color(n[0],n[1],n[2],255)},e.objectShake=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=10);var o=e.angle,i=n;t/=10,cc.tween(e).to(0,{angle:i}).delay(t).to(t,{angle:o+i}).call(function(){i*=.5}).to(2*t,{angle:o-i}).call(function(){i*=.5}).to(2*t,{angle:o+i}).call(function(){i*=.5}).to(2*t,{angle:o-i}).call(function(){i*=.5}).to(2*t,{angle:o+i}).call(function(){i*=.5}).to(t,{angle:o}).union().start()},e.objectShock=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=10);var o=e.y,i=e.x,r=n;t/=10,cc.tween(e).to(0,{x:i,y:o}).delay(t).to(t,{x:i+r,y:o+r}).call(function(){r*=.5}).to(2*t,{x:i-r,y:o-r}).call(function(){r*=.5}).to(2*t,{x:i+r,y:o+r}).call(function(){r*=.5}).to(2*t,{x:i-r,y:o-r}).call(function(){r*=.5}).to(2*t,{x:i+r,y:o+r}).call(function(){r*=.5}).to(t,{x:i,y:o}).union().start()},e.capture=function(){var e=new cc.RenderTexture,t=cc.game._renderContext;e.initWithSize(1024,1024,t.STENCIL_INDEX8);var n=new cc.Node;n.parent=cc.director.getScene(),n.x=200,n.y=650,cc.view.getVisibleSize().height>1334&&(n.y+=100);var o=n.addComponent(cc.Camera);o.targetTexture=e,o.enabled=!0,o.render();var i=new cc.SpriteFrame;return i.setTexture(e),o.enabled=!1,n.destroy(),i},e.local_SaveData=function(e,t){Editor.assetdb.create("db://assets/"+e,t,function(t){t?cc.error("\u751f\u6210\u6587\u4ef6"+e+"\u5931\u8d25"):cc.log("\u751f\u6210\u6587\u4ef6"+e+"\u6210\u529f")})},e.BoxCheck_2D_Normal=function(e,t,n,o,i,r,a,s){var l=r-t,c=i-e,u=Math.abs(c),d=Math.abs(l),h=(n+a)/2,p=(o+s)/2;return{isHit:u<h&&d<p,yDis:d,yRange:p,xDis:u,xRange:h,yWay:l,xWay:c}},e.getItemEffect=function(t,n,o,i,r,a){n>20&&(n=20);for(var s=function(s){var l=cc.instantiate(t);r.addChild(l),l.setPosition(o);var c=.3+.1*Math.random()-.05,u=new cc.Vec3(o.x+e.randomNumber(-75,75),o.y+e.randomNumber(-75,75),0);cc.tween(l).to(c,{x:u.x,y:u.y}).delay(.05).to(.4,{x:i.x,y:i.y}).call(function(){l.destroy(),s==n-1&&a&&a()}).start()},l=0;l<n;l++)s(l)},e.setSprite=function(e,t,n,o){i.default.getBundleData(t).loadRes(n,cc.SpriteFrame,function(t,i){t?console.error(n+" \u52a0\u8f7d\u5f02\u5e38",t):(i.addRef(),e.spriteFrame=i,o&&o())})},e.convertToNodeSpaceAR=function(e,t){var n=t.convertToWorldSpaceAR(cc.Vec2.ZERO);return e.convertToNodeSpaceAR(n)},e.setSpineAni=function(e,t,n,r,a){void 0===n&&(n="standby"),void 0===r&&(r=!1),i.default.getBundleData(o.BundleName.Main).loadRes(t,sp.SkeletonData,function(o,i){o?console.error(t+" \u52a8\u753b\u52a0\u8f7d\u5f02\u5e38:",o):(i.addRef(),e.skeletonData=i,e.setAnimation(0,n,r),a&&a())})},e.wait=function(e){return new Promise(function(t){setTimeout(t,1e3*e)})},e}();n.Tool=s,cc._RF.pop()},{"../Config/EnumTypes":"EnumTypes","../Mgr/BundleMgr":"BundleMgr","../Mgr/SoundMgr":"SoundMgr","../Mgr/TimeMgr":"TimeMgr"}],UIAssetInfo:[function(e,t,n){"use strict";cc._RF.push(t,"4a487FZhUtCEITCsp5N0iS2","UIAssetInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/BundleMgr"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../Mgr/AssetsMgr"),d=e("./UIIcon"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconSprite=null,t.nameLabel=null,t.descLabeL=null,t.assetId=-1,t}var n;return i(t,e),n=t,t.prototype.setAsset=function(e){this.assetId=e;var t=u.default.Instance.getInfo(e),n=u.default.Instance.getIcon(e);this.setName(t.name),this.setDesc(t.desc),this.iconSprite.icon=n},t.prototype.onEnable=function(){l.EventMgr.on(a.GlobalEvent.TouchScreen,this.onTouchScreen,this)},t.prototype.onDisable=function(){l.EventMgr.clearTarget(this)},t.prototype.setName=function(e){this.nameLabel.string=c.default.Instance.getLanguage(e)},t.prototype.setDesc=function(e){this.descLabeL.string=c.default.Instance.getLanguage(e)},t.prototype.onTouchScreen=function(){n.component.active=!1},t.addPop=function(e,t,n){var o=this;if(cc.isValid(this.component))return this.refreshPos(e,t,n),void(this.component.active=!0);this.component=null;var i=cc.find("Canvas").getChildByName("panel2");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Common/UIAssetInfo",cc.Prefab,function(r,a){r?console.error("\u7269\u54c1\u8be6\u60c5\u754c\u9762\u5c55\u793a\u5931\u8d25",r):i&&i.isValid?i.getChildByName(a.name)?console.warn("\u7269\u54c1\u8be6\u60c5\u754c\u9762\u5df2\u7ecf\u5c55\u793a\u4e86"):(o.component=cc.instantiate(a),i.addChild(o.component),o.refreshPos(e,t,n)):console.warn("\u7269\u54c1\u8be6\u60c5\u754c\u9762\u5c55\u793a\u5931\u8d25,\u7236\u8282\u70b9\u4e0d\u5b58\u5728")})},t.refreshPos=function(e,t,o){null==o&&(o=!0);var i=cc.view.getVisibleSize(),r=t.convertToWorldSpaceAR(cc.Vec3.ZERO),a=0;o?((a=r.y+.5*t.height)+this.component.height>=i.height&&(a=r.y-(.5*t.height+this.component.height)),r.y=a):((a=r.y-(.5*t.height+this.component.height))<0&&(a=r.y+.5*t.height),r.y=a),r.x+.5*this.component.width>=i.width&&(r.x=i.width-.5*this.component.width),r.x-.5*this.component.width<0&&(r.x=.5*this.component.width);var s=this.component.parent.convertToNodeSpaceAR(r);this.component.position=s,this.component.getComponent(n).setAsset(e)},t.component=null,r([f(d.default)],t.prototype,"iconSprite",void 0),r([f(cc.Label)],t.prototype,"nameLabel",void 0),r([f(cc.Label)],t.prototype,"descLabeL",void 0),n=r([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/BundleMgr":"BundleMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../Mgr/AssetsMgr":"AssetsMgr","./UIIcon":"UIIcon"}],UIAssetListInfo:[function(e,t,n){"use strict";cc._RF.push(t,"61f01iy+dhGsIo5+Xih1kNT","UIAssetListInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/BundleMgr"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../Mgr/AssetsMgr"),d=e("./UIRewardItem"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.icon=null,t.nameLabel=null,t.listNode=null,t.viewNode=null,t.content=null,t.itemPrefab=null,t}var n;return i(t,e),n=t,t.prototype.onEnable=function(){l.EventMgr.on(a.GlobalEvent.TouchScreen,this.onTouchScreen,this)},t.prototype.onDisable=function(){l.EventMgr.clearTarget(this)},t.prototype.setHeight=function(e){this.bg.node.height=this.content.node.childrenCount*(e+this.content.spacingY)+(this.listNode.height-this.viewNode.height)},t.prototype.setName=function(e){this.nameLabel.string=c.default.Instance.getLanguage(e)},t.prototype.setIcon=function(){},t.prototype.onTouchScreen=function(){n.component.active=!1},t.showPops=function(e,t,n){var o=this;if(cc.isValid(this.component))return this.refreshPos(e,t,n),void(this.component.active=!0);this.component=null;var i=cc.find("Canvas").getChildByName("panel2");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Common/UIAssetListInfo",cc.Prefab,function(r,a){r?console.error("\u7269\u54c1\u5217\u8868\u8be6\u60c5\u754c\u9762\u5c55\u793a\u5931\u8d25",r):i&&i.isValid?i.getChildByName(a.name)?console.warn("\u7269\u54c1\u5217\u8868\u8be6\u60c5\u754c\u9762\u5df2\u7ecf\u5c55\u793a\u4e86"):(o.component=cc.instantiate(a),i.addChild(o.component),o.refreshPos(e,t,n)):console.warn("\u7269\u54c1\u5217\u8868\u8be6\u60c5\u754c\u9762\u5c55\u793a\u5931\u8d25,\u7236\u8282\u70b9\u4e0d\u5b58\u5728")})},t.refreshPos=function(e,t,o){var i=o.convertToWorldSpaceAR(cc.Vec3.ZERO),r=cc.view.getVisibleSize(),a=this.component.getComponent(n);i.x+.5*this.component.width>=r.width&&(i.x=r.width-.5*this.component.width),i.x-.5*this.component.width<0&&(i.x=.5*this.component.width);var s=a.content.node;s.removeAllChildren();for(var l=0,c=0;c<e.length;c++){var h=e[c];if(u.default.Instance.getInfo(h)){var p=t[c],f=cc.instantiate(a.itemPrefab);f.parent=s,l=f.height,f.getComponent(d.default).setItemInfo(h,p)}}a.setHeight(l),i.y-=.5*o.height;var g=this.component.parent.convertToNodeSpaceAR(i);this.component.position=g},t.component=null,r([f(cc.Sprite)],t.prototype,"bg",void 0),r([f(cc.Sprite)],t.prototype,"icon",void 0),r([f(cc.Label)],t.prototype,"nameLabel",void 0),r([f(cc.Node)],t.prototype,"listNode",void 0),r([f(cc.Node)],t.prototype,"viewNode",void 0),r([f(cc.Layout)],t.prototype,"content",void 0),r([f(cc.Prefab)],t.prototype,"itemPrefab",void 0),n=r([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/BundleMgr":"BundleMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../Mgr/AssetsMgr":"AssetsMgr","./UIRewardItem":"UIRewardItem"}],UIAssetReceiveItem:[function(e,t,n){"use strict";cc._RF.push(t,"f832fSN6hpPHrWgsRfp77pp","UIAssetReceiveItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Mgr/ItemMgr"),l=e("../Mgr/AssetsMgr"),c=e("./IUIItem"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countLabel=null,t}return i(t,e),t.prototype.setItemData=function(e,t){var n=l.default.Instance.getInfo(e);this.setIcon(s.default.Instance.getResIcon(n.icon));var o=l.default.Instance.getQuality(e);this.setQuality(o),this.setCount(t)},t.prototype.setCount=function(e){this.countLabel.string="x"+a.default.format(e)},r([h(cc.Label)],t.prototype,"countLabel",void 0),r([d],t)}(c.default);n.default=p,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Mgr/ItemMgr":"ItemMgr","../Mgr/AssetsMgr":"AssetsMgr","./IUIItem":"IUIItem"}],UIAssetReceiveView:[function(e,t,n){"use strict";cc._RF.push(t,"618e4Rz7XdP8IRMsI2OiN6u","UIAssetReceiveView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/BundleMgr"),l=e("../../Mgr/FlyItemMgr"),c=e("../../Res/ResPanelOpen"),u=e("./UIAssetReceiveItem"),d=e("./UIItemPool"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.closeTip=null,t.skinNode=null,t.layoutOriginWidth=0,t.layoutOriginHeight=0,t._touchCloseEnable=!1,t.itemDatas=null,t}var n;return i(t,e),n=t,Object.defineProperty(t.prototype,"touchCloseEnable",{get:function(){return this._touchCloseEnable},set:function(e){this._touchCloseEnable=e,this.closeTip.active=e},enumerable:!1,configurable:!0}),t.prototype.reuse=function(e){this.itemDatas=e},t.prototype.onLoad=function(){var e=this.node.getChildByName("background");e.on(cc.Node.EventType.TOUCH_START,this.onTouchBackgroundStart,this),e._touchListener.swallowTouches=!1,this.layoutOriginWidth=this.layout.node.width,this.layoutOriginHeight=this.layout.node.height},t.prototype.onTouchBackgroundStart=function(){var e=this;if(this.touchCloseEnable){myGlobalThis.each(this.itemDatas,function(t,n){var o=e._nodes[n];l.default.addFlyItem(t.id,o)});var t=this.node.getChildByName("base");c.default.panelClose_BigToSmall(t,function(){e.node.destroy()})}},t.prototype.playSkinAnim=function(){this.skinNode.stopAllActions(),cc.tween(this.skinNode).by(5,{angle:360}).repeatForever().start()},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");c.default.panelOpen_SmallToBig(e);var t=this;this.playSkinAnim(),this.touchCloseEnable=!1,this.itemDatas.length<5?(this.layout.type=cc.Layout.Type.HORIZONTAL,this.layout.resizeMode=cc.Layout.ResizeMode.CONTAINER):(this.layout.type=cc.Layout.Type.GRID,this.layout.node.width=this.layoutOriginWidth),this.itemDatas.forEach(function(e){var n=t.get();t.layout.node.addChild(n),n.getComponent(u.default).setItemData(e.id,e.count)}),this.node.stopAllActions(),this.closeTip.stopAllActions(),cc.tween(this.node).delay(.6).call(function(){cc.tween(t.closeTip).to(.12,{opacity:255}).call(function(){t.touchCloseEnable=!0}).start()}).start()},t.prototype.onDisable=function(){this.clear()},t.open=function(e){var t=cc.find("Canvas").getChildByName("panel2");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Common/UIAssetReceiveView",cc.Prefab,function(o,i){if(o)console.error("\u8d44\u6e90\u83b7\u53d6\u754c\u9762\u5c55\u793a\u5931\u8d25",o);else if(t&&t.isValid)if(t.getChildByName(i.name))console.warn("\u8d44\u6e90\u83b7\u53d6\u754c\u9762\u5df2\u7ecf\u5c55\u793a\u4e86");else{var r=cc.instantiate(i);r.getComponent(n).reuse(e),t.addChild(r)}else console.warn("\u8d44\u6e90\u83b7\u53d6\u754c\u9762\u5c55\u793a\u5931\u8d25,\u7236\u8282\u70b9\u4e0d\u5b58\u5728")})},r([f(cc.Layout)],t.prototype,"layout",void 0),r([f(cc.Node)],t.prototype,"closeTip",void 0),r([f(cc.Node)],t.prototype,"skinNode",void 0),n=r([p],t)}(d.default);n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/BundleMgr":"BundleMgr","../../Mgr/FlyItemMgr":"FlyItemMgr","../../Res/ResPanelOpen":"ResPanelOpen","./UIAssetReceiveItem":"UIAssetReceiveItem","./UIItemPool":"UIItemPool"}],UIBossBattleTip:[function(e,t,n){"use strict";cc._RF.push(t,"00f24S64HZAf5Vaq2nkodQq","UIBossBattleTip");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/BundleMgr"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.leftNode=null,t.rightNode=null,t.vsNode=null,t.heroName=0,t.bossName=0,t.leftX=0,t.rightX=0,t.endCb=null,t}return i(t,e),t.prototype.setName=function(e,t){this.heroName=e,this.bossName=t},t.prototype.onLoad=function(){this.leftX=this.leftNode.x,this.rightX=this.rightNode.x},t.prototype.start=function(){var e=this;this.createRole(),this.anim=this.vsNode.getComponent(sp.Skeleton),this.anim.setAnimation(0,"1",!1),this.scheduleOnce(function(){e.anim.setAnimation(0,"2",!0),cc.tween(e.node).delay(1).to(1,{opacity:0}).call(function(){e.complete()}).start()},this.anim.findAnimation("1").duration)},t.prototype.createRole=function(){var e=this;s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Battle/Hero/"+this.heroName,cc.Prefab,function(t,n){t?cc.error("\u89d2\u8272\u52a0\u8f7d\u5931\u8d25",t):(n.addRef(),e.leftNode.addChild(cc.instantiate(n)))}),s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Battle/Monster/"+this.bossName,cc.Prefab,function(t,n){t?cc.error("\u602a\u7269\u52a0\u8f7d\u5931\u8d25",t):(n.addRef(),e.rightNode.addChild(cc.instantiate(n)))})},t.prototype.animInit=function(){this.leftNode.opacity=0,this.leftNode.x=this.leftX+600,this.rightNode.opacity=0,this.rightNode.x=this.rightX+600,this.leftNode.stopAllActions(),this.rightNode.stopAllActions(),this.vsNode.stopAllActions(),this.vsNode.opacity=0},t.prototype.playAnim=function(){cc.tween(this.leftNode).set({opacity:0}).to(.3,{x:0},{easing:cc.easing.sineOut}).delay(.1+.2).set({opacity:255}).to(.1,{x:this.leftX}).delay(.8).to(.15,{x:this.leftX-450}).start(),cc.tween(this.rightNode).set({opacity:255}).to(.3,{x:0},{easing:cc.easing.sineOut}).delay(.1+.2).to(.1,{x:this.rightX}).delay(.8).to(.15,{x:this.rightX+450}).start(),cc.tween(this.vsNode).delay(.3).set({scale:5}).parallel(cc.tween().to(.12,{opacity:255}),cc.tween().to(.4,{scale:1},{easing:cc.easing.bounceOut})).delay(1).call(this.complete,this).start()},t.prototype.complete=function(){this.endCb&&this.endCb(),this.node.destroy()},r([u(cc.Node)],t.prototype,"leftNode",void 0),r([u(cc.Node)],t.prototype,"rightNode",void 0),r([u(cc.Node)],t.prototype,"vsNode",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/BundleMgr":"BundleMgr"}],UIBossView:[function(e,t,n){"use strict";cc._RF.push(t,"63c3fmNGQFDw4o5qHHsk6GV","UIBossView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../Mgr/GuideCore/GuideEnums"),c=e("../Mgr/GuideCore/GuideMgr"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bossScrollView=null,t}return i(t,e),t.prototype.onEnable=function(){s.EventMgr.on(a.GlobalEvent.GuideScrollToLast,this.guideScrollToLast,this),this.scheduleOnce(function(){c.default.instance.checkSpecial(l.SpecialGuideEnum.TouchBossButton),c.default.instance.checkSpecial(l.SpecialGuideEnum.TouchCoinButton),c.default.instance.checkSpecial(l.SpecialGuideEnum.TouchSnowButton),c.default.instance.checkSpecial(l.SpecialGuideEnum.TouchCaveRushButton),c.default.instance.checkSpecial(l.SpecialGuideEnum.TouchLegionRushButton)},.1)},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.guideScrollToLast=function(e){this.bossScrollView.content.y=e},r([h(cc.ScrollView)],t.prototype,"bossScrollView",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr"}],UICollectionListItem:[function(e,t,n){"use strict";cc._RF.push(t,"3230fFvy2lIwJ9I1+1vnsyf","UICollectionListItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/ItemMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../../Tool/Tool"),d=e("../CommonUI/UIItemPool"),h=e("../Mgr/Collection/CollectionData"),p=e("../Mgr/Collection/MgrCollection"),f=e("../Mgr/EquipmentMgr"),g=e("../Mgr/PartnerMgr"),y=e("../Mgr/PropMgr"),m=e("../Mgr/SkillMgr"),v=e("./UICollectionSymbolItem"),_=cc._decorator,b=_.ccclass,S=_.property,M=function(e){function t(){var t=e.call(this)||this;return t.nameLabel=null,t.propLabel=null,t.propUpValueLabel=null,t.symbolLayout=null,t.btnEnhance=null,t.lockedNode=null,t.arrowNode=null,t.redPointNode=null,t.collectionId=null,t.symbolItems=null,t.pool=null,t.collectionId=null,t.symbolItems={},t.pool=null,t}return i(t,e),t.prototype.onLoad=function(){this.pool=this.getComponent(d.default),u.Tool.addClickEvent(this.btnEnhance,this.onClickEnhance,this)},t.prototype.setCollectionId=function(e){this.collectionId=e,this.refresh()},t.prototype.onClickEnhance=function(){p.default.Instance.lvup(this.collectionId)&&this.refresh()},t.prototype.setName=function(e,t){this.nameLabel.string=c.default.Instance.getLanguage(e)+" "+c.default.Instance.getLanguage("LV")+":"+t},t.prototype.setPropValue=function(e,t,n){var o="",i=y.default.Instance.getPropInfo(e);i.percent==s.PROP_PERCENT_TYPE.Percent&&(o="%"),this.propLabel.string=c.default.Instance.getLanguage(i.name)+" +"+a.default.format(t)+o,this.propUpValueLabel.string=n?"+"+a.default.format(a.default.sub(n,t))+o:""},t.prototype.refresh=function(){var e=h.default.Instance.getData(this.collectionId);myGlobalThis.isNil(e)&&(e=h.default.Instance.createData(this.collectionId,0,0));var t=e.type,n=e.ids,o=e.unlockLv,i=e.lv;this.refreshItems(t,i,o,n);var r=p.default.Instance.get(this.collectionId);this.setName(r.name,e.lv);var a=null;o>i&&(a=h.default.Instance.calcAdditionValue(this.collectionId,o)),this.setPropValue(r.prop,e.propAddation,a),this.lockedNode.active=0==o;var s=o>0&&i<o;this.btnEnhance.getComponentInChildren(cc.Sprite).setState(s?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY),this.arrowNode.active=s,this.redPointNode.active=s},t.prototype.getSymbolInfo=function(e,t){var n=null,o=null;switch(e){case s.COLLECTION_TYPE.Gear:var i=f.default.Instance.getGearInfo(t);n=l.default.Instance.getEquipmentIcon(i.icon),o=i.quality;break;case s.COLLECTION_TYPE.Skill:var r=m.default.Instance.getSkillInfo(t);n=l.default.Instance.getSkillIcon(r.icon),o=r.quality;break;case s.COLLECTION_TYPE.Partner:var a=g.default.Instance.getPartnerInfo(t);n=l.default.Instance.getPartnerIcon(a.icon),o=a.quality}return{icon:n,quality:o}},t.prototype.refreshItems=function(e,t,n,o){var i=this;this.pool.clear(),this.symbolItems={},myGlobalThis.each(o,function(o){var r=i.pool.get();r.parent=i.symbolLayout.node;var a=i.getSymbolInfo(e,o),s=a.icon,l=a.quality,c=p.default.Instance.getSymbolLv(e,o),u=r.getComponent(v.default);u.setIcon(s),u.setQuality(l),0==n||t==n?u.setLv(c,n+1):u.setLv(c,n),i.symbolItems[o]=u})},r([S(cc.Label)],t.prototype,"nameLabel",void 0),r([S(cc.Label)],t.prototype,"propLabel",void 0),r([S(cc.Label)],t.prototype,"propUpValueLabel",void 0),r([S(cc.Layout)],t.prototype,"symbolLayout",void 0),r([S(cc.Node)],t.prototype,"btnEnhance",void 0),r([S(cc.Node)],t.prototype,"lockedNode",void 0),r([S(cc.Node)],t.prototype,"arrowNode",void 0),r([S(cc.Node)],t.prototype,"redPointNode",void 0),r([b],t)}(cc.Component);n.default=M,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","../CommonUI/UIItemPool":"UIItemPool","../Mgr/Collection/CollectionData":"CollectionData","../Mgr/Collection/MgrCollection":"MgrCollection","../Mgr/EquipmentMgr":"EquipmentMgr","../Mgr/PartnerMgr":"PartnerMgr","../Mgr/PropMgr":"PropMgr","../Mgr/SkillMgr":"SkillMgr","./UICollectionSymbolItem":"UICollectionSymbolItem"}],UICollectionSymbolItem:[function(e,t,n){"use strict";cc._RF.push(t,"a9053Ci2htMPrbDwESYmTKV","UICollectionSymbolItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/ItemMgr"),s=e("../CommonUI/IUIItem"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unlockNode=null,t}return i(t,e),t.prototype.setLv=function(e,t){this.levelLabel.string="lv."+e+"/"+t,this.levelLabel.node.color=e>=t?a.COLOR_WHITE:a.COLOR_RED,this.unlockNode.active=e<t},r([u(cc.Node)],t.prototype,"unlockNode",void 0),r([c],t)}(s.default);n.default=d,cc._RF.pop()},{"../../Mgr/ItemMgr":"ItemMgr","../CommonUI/IUIItem":"IUIItem"}],UICollectionToggle:[function(e,t,n){"use strict";cc._RF.push(t,"f4901qeVPdMpL/uC2THZSZN","UICollectionToggle");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=cc._decorator,l=s.ccclass,c=s.property,u=s.requireComponent,d=function(e){function t(){var t=e.call(this)||this;return t.type=a.COLLECTION_TYPE.Gear,t.delegate=null,t.delegate=null,t}return i(t,e),t.prototype.onLoad=function(){this.node.on("toggle",this.onToggle,this)},t.prototype.onToggle=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.delegate.onToggle(this.type)},t.prototype.onEnable=function(){var e=this.getComponent(cc.Toggle);e.isChecked&&this.onToggle(e)},r([c({type:cc.Enum(a.COLLECTION_TYPE)})],t.prototype,"type",void 0),r([l,u(cc.Toggle)],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes"}],UICollectionView:[function(e,t,n){"use strict";cc._RF.push(t,"94731I/oTBEioxIaS5aWRNl","UICollectionView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Res/ResPanelOpen"),c=e("../../Tool/Tool"),u=e("../CommonUI/UIItemPool"),d=e("../Mgr/Collection/CollectionData"),h=e("../Mgr/Collection/MgrCollection"),p=e("../Mgr/MgrAds"),f=e("./UICollectionListItem"),g=e("./UICollectionToggle"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(e){function t(){var t=e.call(this)||this;return t.toggleContainer=null,t.layout=null,t.scrollView=null,t.btnClose=null,t.currType=null,t.list={},t.currType=null,t.list={},t}return i(t,e),t.prototype.onLoad=function(){var e=this,t=this.toggleContainer.toggleItems;myGlobalThis.each(t,function(t){return t.getComponent(g.default).delegate=e})},t.prototype.onEnable=function(){s.EventMgr.on(a.GlobalEvent.CollectionLvup,this.onCollectionLvup,this),c.Tool.addClickEvent(this.btnClose,this.onClickClose,this);var e=this.node.getChildByName("base");l.default.panelOpen_SmallToBig(e)},t.prototype.onDisable=function(){this.currType=null,s.EventMgr.clearTarget(this),p.default.Instance.hideBanner()},t.prototype.onCollectionLvup=function(){var e=d.default.Instance.getLvupEnableItems(this.currType)[0];if(e){var t=myGlobalThis.keys(this.list),n=1-myGlobalThis.findIndex(t,function(t){return myGlobalThis.parseInt(t)==e.id})/(t.length-1);this.scrollView.scrollToPercentVertical(n,.2)}},t.prototype.onToggle=function(e){this.setType(e)},t.prototype.setType=function(e){this.currType!=e&&(this.currType=e,this.refreshList())},t.prototype.refreshList=function(){var e=this;this.clear(),this.list={};var t=h.default.Instance.getTypeCollections(this.currType);myGlobalThis.each(t,function(t){var n=e.get();n.parent=e.layout.node;var o=n.getComponent(f.default);o.setCollectionId(t.id),e.list[t.id]=o});var n=d.default.Instance.getLvupEnableItems(this.currType),o=myGlobalThis.first(n);if(o){var i=myGlobalThis.keys(this.list),r=1-myGlobalThis.findIndex(i,function(e){return myGlobalThis.parseInt(e)==o.id})/(t.length-1);this.scrollView.scrollToPercentVertical(r,.2)}else this.scrollView.scrollToPercentVertical(1,0)},t.prototype.onClickClose=function(){var e=this,t=this.node.getChildByName("base");l.default.panelClose_BigToSmall(t,function(){e.node.destroy()})},r([v(cc.ToggleContainer)],t.prototype,"toggleContainer",void 0),r([v(cc.Layout)],t.prototype,"layout",void 0),r([v(cc.ScrollView)],t.prototype,"scrollView",void 0),r([v(cc.Node)],t.prototype,"btnClose",void 0),r([m],t)}(u.default);n.default=_,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/UIItemPool":"UIItemPool","../Mgr/Collection/CollectionData":"CollectionData","../Mgr/Collection/MgrCollection":"MgrCollection","../Mgr/MgrAds":"MgrAds","./UICollectionListItem":"UICollectionListItem","./UICollectionToggle":"UICollectionToggle"}],UICommonRewardItem:[function(e,t,n){"use strict";cc._RF.push(t,"cec9fX+8TBPBIvT0P7ZHvRO","UICommonRewardItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Tool/Tool"),c=e("../Mgr/AssetsMgr"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.qualitySprite=null,t.iconSprite=null,t.numLabel=null,t}return i(t,e),t.prototype.setUpValue=function(e){var t=c.default.Instance.getInfo(e.id);l.Tool.setSprite(this.iconSprite,a.BundleName.Main,c.default.Instance.getIcon(t.id)),this.numLabel.string="x"+e.count.toString(),e.isGray&&(this.iconSprite.node.color=cc.Color.GRAY);var n=c.default.Instance.getQuality(t.id);this.qualitySprite.node.active=-1!=n,-1!=n&&l.Tool.setSprite(this.qualitySprite,a.BundleName.Main,s.default.Instance.getQualityIcon(n))},r([h(cc.Sprite)],t.prototype,"qualitySprite",void 0),r([h(cc.Sprite)],t.prototype,"iconSprite",void 0),r([h(cc.Label)],t.prototype,"numLabel",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Tool/Tool":"Tool","../Mgr/AssetsMgr":"AssetsMgr"}],UIComplete:[function(e,t,n){"use strict";cc._RF.push(t,"6db06Q9neVDxJXDrcyAueOM","UIComplete");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Tool/Tool"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.talentName=null,t.desc=null,t.icon=null,t.btnSure=null,t}return i(t,e),t.prototype.start=function(){var e=this;a.Tool.addClickEvent(this.btnSure,function(){e.node.destroy()},this)},t.prototype.show=function(){},t.prototype.setData=function(e,t,n){this.talentName.string=e,this.desc.string=t,this.icon.spriteFrame=n},r([c(cc.Label)],t.prototype,"talentName",void 0),r([c(cc.Label)],t.prototype,"desc",void 0),r([c(cc.Sprite)],t.prototype,"icon",void 0),r([c(cc.Node)],t.prototype,"btnSure",void 0),r([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../Tool/Tool":"Tool"}],UIDayChallengeItem:[function(e,t,n){"use strict";cc._RF.push(t,"8e1d2fdi0xEcbHoEKNJaTAX","UIDayChallengeItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Tool/Tool"),u=e("../CommonUI/CustomProgress"),d=e("../Mgr/MgrQuest"),h=e("../Mgr/Quest/QuestSevenChallenge"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(e){function t(){var t=e.call(this)||this;return t.titleLabel=null,t.rewardIcon=null,t.rewardCntLabel=null,t.customProgress=null,t.statusLabel=null,t.btnReceived=null,t.completeNode=null,t.redDot=null,t.changeBackImgs=[],t._questId=-1,t.delegate=null,t._questId=-1,t.delegate=null,t}return i(t,e),Object.defineProperty(t.prototype,"questId",{get:function(){return this._questId},set:function(e){this._questId!=e&&(this._questId=e,this.refresh()),this.refreshStatus()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){c.Tool.addClickEvent(this.btnReceived,this.onClickReceived,this)},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.onProgressChange=function(e){if(this.questId==e){var t=h.default.Instance.getData(e);this.refreshProgress(t)}},t.prototype.onStatusChange=function(e){this.questId==e&&this.refreshStatus()},t.prototype.onClickReceived=function(){h.default.Instance.getData(this.questId).status==a.QUEST_STATUS.Complete&&(this.delegate.requestReceive(this),s.EventMgr.event(a.GlobalEvent.SevenChallengeQuestStatusChange))},t.prototype.setTitle=function(e){this.titleLabel&&(this.titleLabel.string=e)},t.prototype.setRewardCnt=function(e){this.rewardCntLabel.string=""+e},t.prototype.refresh=function(){var e=h.default.Instance.getData(this.questId),t=d.default.Instance.getQuestInfo(e.id);this.setRewardCnt(t.count)},t.prototype.refreshStatus=function(){var e=h.default.Instance.getData(this.questId);this.refreshProgress(e);var t=e.status;this.btnReceived.getComponentInChildren(cc.Sprite).setState(t!=a.QUEST_STATUS.Complete?cc.Sprite.State.GRAY:cc.Sprite.State.NORMAL),this.btnReceived.active=t!=a.QUEST_STATUS.InAD,this.redDot.active=t==a.QUEST_STATUS.Complete,this.statusLabel.string=t<a.QUEST_STATUS.Finish?l.default.Instance.getLanguage("Claim Rewards"):this.statusLabel.string=l.default.Instance.getLanguage("Claimed"),this.completeNode.active=t==a.QUEST_STATUS.Finish},t.prototype.refreshProgress=function(e){var t=d.default.Instance.getQuestInfo(e.id);this.customProgress.setProgress(e.cur,e.max,"Complete"),t.title.length>16?this.setTitle(l.default.Instance.getLanguage(t.title)+"\n("+e.cur+"/"+e.max+")"):this.setTitle(l.default.Instance.getLanguage(t.title)+" ("+e.cur+"/"+e.max+")"),e.status>a.QUEST_STATUS.Job&&e.status<a.QUEST_STATUS.Finish?(this.titleLabel.node.color=cc.color().fromHEX("#fddc79"),this.node.getComponent(cc.Sprite).spriteFrame=this.changeBackImgs[0]):(this.titleLabel&&(this.titleLabel.node.color=cc.color().fromHEX("#FFFFFF")),this.node.getComponent(cc.Sprite).spriteFrame=this.changeBackImgs[1])},r([g(cc.Label)],t.prototype,"titleLabel",void 0),r([g(cc.Sprite)],t.prototype,"rewardIcon",void 0),r([g(cc.Label)],t.prototype,"rewardCntLabel",void 0),r([g(u.default)],t.prototype,"customProgress",void 0),r([g(cc.Label)],t.prototype,"statusLabel",void 0),r([g(cc.Node)],t.prototype,"btnReceived",void 0),r([g(cc.Node)],t.prototype,"completeNode",void 0),r([g(cc.Node)],t.prototype,"redDot",void 0),r([g([cc.SpriteFrame])],t.prototype,"changeBackImgs",void 0),r([f],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","../CommonUI/CustomProgress":"CustomProgress","../Mgr/MgrQuest":"MgrQuest","../Mgr/Quest/QuestSevenChallenge":"QuestSevenChallenge"}],UIDayChallenge:[function(e,t,n){"use strict";cc._RF.push(t,"ac0b4gKQTdHcZyMrdgdIlvo","UIDayChallenge");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../CommonUI/AsyncQueue"),c=e("../CommonUI/UIItemPool"),u=e("../Mgr/MgrSevenChallenge"),d=e("../Mgr/Quest/QuestSevenChallenge"),h=e("./UIDayChallengeItem"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.day=1,t.content=null,t._isCreated=!1,t.items=[],t}return i(t,e),t.prototype.onEnable=function(){s.EventMgr.on(a.GlobalEvent.SevenChallengeQuestStatusChange,this.onStatusChange,this),s.EventMgr.on(a.GlobalEvent.SevenChallengeChangeTab,this.onChangeTab,this)},t.prototype.onChangeTab=function(e){this.day==e&&this.refreshList()},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.refreshList=function(){this.unscheduleAllCallbacks();var e=u.default.Instance.getDayQuests(this.day),t=myGlobalThis.sortBy(e,function(e){var t=e.id,n=d.default.Instance.getData(e.quest);return n.status==a.QUEST_STATUS.Finish?t+n.status:1e4*-n.status+t});this.notifyUpdate(t)},t.prototype.notifyUpdate=function(e){if(this._isCreated)for(i=0;i<e.length;i++){var t=e[i].quest;this.items[i].questId=t}else{this._isCreated=!0;var n=this;this.resultAsync=new l.default;for(var o=function(t){n.resultAsync.push(function(o){var i=e[t].quest,r=n.createItem(i);n.items.push(r),n.scheduleOnce(o)})},i=0;i<e.length;i++)o(i);this.resultAsync.play()}},t.prototype.createItem=function(e){var t=this.get(),n=t.getComponent(h.default);return t.parent=this.content.node,n.delegate=this,n.questId=e,n},t.prototype.requestReceiveAd=function(e){d.default.Instance.requestAd(e.questId,this.refreshList())},t.prototype.requestReceive=function(e){d.default.Instance.receive(e.questId,e.rewardIcon.node)&&this.refreshList()},t.prototype.onStatusChange=function(){this.refreshList()},r([g({type:cc.Integer,displayName:"\u5929\u6570",max:7,min:1,step:1,slide:!0})],t.prototype,"day",void 0),r([g(cc.Layout)],t.prototype,"content",void 0),r([f],t)}(c.default);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../CommonUI/AsyncQueue":"AsyncQueue","../CommonUI/UIItemPool":"UIItemPool","../Mgr/MgrSevenChallenge":"MgrSevenChallenge","../Mgr/Quest/QuestSevenChallenge":"QuestSevenChallenge","./UIDayChallengeItem":"UIDayChallengeItem"}],UIDayRewardItem:[function(e,t,n){"use strict";cc._RF.push(t,"3d915H0wpVHCIvnwA83Bnbk","UIDayRewardItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../Config/EnumTypes"),c=e("../../Mgr/EventMgr"),u=e("../../Mgr/FlyItemMgr"),d=e("../../Mgr/ItemMgr"),h=e("../../Tool/Tool"),p=e("../CommonUI/UIAssetInfo"),f=e("../CommonUI/UIAssetListInfo"),g=e("../Main_PanelOpen"),y=e("../Mgr/AssetsMgr"),m=e("../Mgr/ExtraRewardData"),v=e("../Mgr/Quest/QuestSevenChallenge"),_=cc._decorator,b=_.ccclass,S=_.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skinNode=null,t.icon=null,t.numLabel=null,t.status=null,t.normalLine=null,t.finishLine=null,t.rewardNumLabel=null,t.day=0,t}return i(t,e),t.prototype.onEnable=function(){this.initUi(),this.refreshUi(),h.Tool.addClickEvent(this.icon,this.onClick,this),c.EventMgr.on(l.GlobalEvent.SevenChallengeQuestStatusChange,this.refreshUi,this)},t.prototype.onClick=function(){return a(this,void 0,void 0,function(){var e,t,n,o,i,r,a,d;return s(this,function(){if(e=v.default.Instance.getFinishedQuestNum(),t=m.ExtraRewardData.Instance.getData(this.day).status,n=m.ExtraRewardData.Instance.get(this.day),e>=n.number&&0==t){for(o=0;o<n.ids.length;o++)i=n.ids[o],r=n.nums[o],(a=y.default.Instance.getInfo(i))&&(myGlobalThis.isEmpty(a.useMethod)?(y.default.Instance.addItem(i,r),u.default.addFlyItem(i,this.icon)):(d=y.default.Instance.useItem(i),g.default.showDayRewardView(d)));this.icon.stopAllActions(),m.ExtraRewardData.Instance.setStatus(this.day,1),this.refreshUi(),c.EventMgr.event(l.GlobalEvent.UnlockSevenChallenge),c.EventMgr.event(l.GlobalEvent.SevenChallengeQuestStatusChange)}else n.ids.length>1?f.default.showPops(n.ids,n.nums,this.icon):p.default.addPop(n.ids[0],this.icon,!1);return[2]})})},t.prototype.initUi=function(){var e=m.ExtraRewardData.Instance.get(this.day);this.numLabel.string=e.number.toString();var t=d.Res_ICON_PATH+"box004";this.isSingleAssetReward()?(this.rewardNumLabel.node.active=e.nums[0]>1,this.rewardNumLabel.string=e.nums[0].toString(),t=y.default.Instance.getIcon(e.ids[0])):this.rewardNumLabel.node.active=!1,h.Tool.setSprite(this.icon.getComponent(cc.Sprite),l.BundleName.Main,t)},t.prototype.refreshUi=function(){var e=m.ExtraRewardData.Instance.get(this.day),t=m.ExtraRewardData.Instance.getData(this.day);this.status.active=1==t.status;var n=v.default.Instance.getFinishedQuestNum();this.finishLine&&(this.finishLine.active=n>=e.number),this.normalLine&&(this.normalLine.active=!this.finishLine.active);var o=t.status;this.icon.getComponent(cc.Sprite).setState(0==o?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY),this.skinNode.active=n>=e.number&&0==o,this.playSkinAnim(),n>=e.number&&0==o&&this.playShake(this.icon)},t.prototype.isSingleAssetReward=function(){return 1==m.ExtraRewardData.Instance.get(this.day).ids.length},t.prototype.playSkinAnim=function(){this.skinNode.stopAllActions(),cc.tween(this.skinNode).by(5,{angle:360}).repeatForever().start()},t.prototype.playShake=function(e){e.stopAllActions(),cc.tween(e).parallel(cc.tween().to(.1,{angle:10}),cc.tween().to(.1,{scale:1.1})).to(.1,{angle:-10}).to(.1,{angle:10}).to(.1,{angle:-10}).parallel(cc.tween().to(.1,{angle:0}),cc.tween().to(.1,{scale:1})).delay(.5).union().repeatForever().start()},r([S(cc.Node)],t.prototype,"skinNode",void 0),r([S(cc.Node)],t.prototype,"icon",void 0),r([S(cc.Label)],t.prototype,"numLabel",void 0),r([S(cc.Node)],t.prototype,"status",void 0),r([S(cc.Node)],t.prototype,"normalLine",void 0),r([S(cc.Node)],t.prototype,"finishLine",void 0),r([S(cc.Label)],t.prototype,"rewardNumLabel",void 0),r([S],t.prototype,"day",void 0),r([b],t)}(cc.Component);n.default=M,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/FlyItemMgr":"FlyItemMgr","../../Mgr/ItemMgr":"ItemMgr","../../Tool/Tool":"Tool","../CommonUI/UIAssetInfo":"UIAssetInfo","../CommonUI/UIAssetListInfo":"UIAssetListInfo","../Main_PanelOpen":"Main_PanelOpen","../Mgr/AssetsMgr":"AssetsMgr","../Mgr/ExtraRewardData":"ExtraRewardData","../Mgr/Quest/QuestSevenChallenge":"QuestSevenChallenge"}],UIDayRewardView:[function(e,t,n){"use strict";cc._RF.push(t,"1f60fWjndlMNpOd9R+ILOnP","UIDayRewardView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Res/ResPanelOpen"),l=e("../../Tool/Tool"),c=e("../CommonUI/AsyncQueue"),u=e("../Mgr/EquipmentMgr"),d=e("../Mgr/PartnerMgr"),h=e("../Mgr/SkillMgr"),p=e("../Shop/ISummonResultView"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),l.Tool.addClickEvent(this.btnClose,this.onClickClose,this)},t.prototype.onClickClose=function(){var e=this.node.getChildByName("base"),t=this;s.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");s.default.panelOpen_SmallToBig(e)},t.prototype.setResult=function(e){this.results=e,this.playResults()},t.prototype.createItem=function(e){var t=this.getCfg(e.type,e.id);return this.addItem(t.quality,t.icon,t.name,e.id,e.type)},t.prototype.playResults=function(){var e=this;this.layout.type=cc.Layout.Type.HORIZONTAL,this.layout.resizeMode=cc.Layout.ResizeMode.CONTAINER,this.layout.node.height=this.layoutOriginHeight,this.btnClose.active=!1,this.resultAsync=new c.default;for(var t=0,n=function(n){var o=t,i=n,r=e.results[n];e.resultAsync.push(function(n){var s=e.createItem(r);e.items.push(s),i<5?s.node.y=0:5==i?(e.layout.node.width=e.layoutOriginWidth,e.layout.type=cc.Layout.Type.GRID):25==i&&(e.scrollView.enabled=!0),e.layout.enabled=!0,e.layout.updateLayout(),e.layout.enabled=!1,e.scrollView.content.height=Math.max(e.layoutOriginHeight,e.layout.node.height);var l=Math.floor(i/5);l!=o&&(t=l,e.scrollView.scrollToBottom(0));var c=.018,p=!1,f=0;switch(r.type){case a.eSUMMONTYPE.Gear:case a.eSUMMONTYPE.Weapon:case a.eSUMMONTYPE.Armor:(f=u.default.Instance.getGearInfo(r.id).quality)>=4&&r.isNew&&(c+=.6,p=!0);break;case a.eSUMMONTYPE.Skill:(f=h.default.Instance.getSkillInfo(r.id).quality)>=4&&r.isNew&&(c+=.6,p=!0);break;case a.eSUMMONTYPE.Partner:(f=d.default.Instance.getPartnerInfo(r.id).quality)>=4&&r.isNew&&(c+=.6,p=!0)}s.node.stopAllActions(),p?(s.node.scale=1.8,cc.tween(s.node).delay(.1).to(.16,{scale:1},{easing:cc.easing.sineIn}).start()):(s.node.scale=1.2,cc.tween(s.node).to(.1,{scale:1}).start()),s.playGlow(f),e.scheduleOnce(n,c)})},o=0;o<this.results.length;o++)n(o);this.resultAsync.push(function(t){e.scheduleOnce(t,.2)}),this.resultAsync.push(function(){e.btnClose.active=!0}),this.resultAsync.play()},r([y(cc.Node)],t.prototype,"btnClose",void 0),r([g],t)}(p.default);n.default=m,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/AsyncQueue":"AsyncQueue","../Mgr/EquipmentMgr":"EquipmentMgr","../Mgr/PartnerMgr":"PartnerMgr","../Mgr/SkillMgr":"SkillMgr","../Shop/ISummonResultView":"ISummonResultView"}],UIGradeLabel:[function(e,t,n){"use strict";cc._RF.push(t,"468d7hHws1Fdo06NhFuxyGb","UIGradeLabel");var o,i,r,a=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var l=((i={})[1]="F",i[2]="E",i[3]="D",i[4]="C",i[5]="B",i[6]="A",i[7]="S",i[8]="SS",i),c=((r={})[1]="#E3E1CF",r[2]="#E3E1CF",r[3]="#B2DF6D",r[4]="#6D85DF",r[5]="#DF6DD8",r[6]="#E68225",r[7]="#6DDEA2",r[8]="#DE4040",r),u=cc._decorator,d=u.ccclass,h=u.requireComponent,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._label=null,t}return a(t,e),Object.defineProperty(t.prototype,"gradeLabel",{get:function(){return this._label||(this._label=this.node.getComponent(cc.Label)),this._label},enumerable:!1,configurable:!0}),t.prototype.setGrade=function(e){this.gradeLabel.string=l[e],this.gradeLabel.node.color=cc.color().fromHEX(c[e])},t.prototype.setEmpty=function(){this.gradeLabel.string=""},s([d,h(cc.Label)],t)}(cc.Component);n.default=p,cc._RF.pop()},{}],UIGradeSprite:[function(e,t,n){"use strict";cc._RF.push(t,"a966aRjeJNPKqGoCvrPRowW","UIGradeSprite");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Tool/Tool"),c=cc._decorator,u=c.ccclass,d=c.requireComponent,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._sprite=null,t}return i(t,e),Object.defineProperty(t.prototype,"gradeSprite",{get:function(){return this._sprite||(this._sprite=this.node.getComponent(cc.Sprite)),this._sprite},enumerable:!1,configurable:!0}),t.prototype.setGrade=function(e){l.Tool.setSprite(this.gradeSprite,a.BundleName.Main,s.default.Instance.getHeroGrade(e))},t.prototype.setEmpty=function(){this.gradeSprite.spriteFrame=null},r([u,d(cc.Sprite)],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Tool/Tool":"Tool"}],UIHeroInfo:[function(e,t,n){"use strict";cc._RF.push(t,"087d8Hn6fFB7JxzgIs+Y6id","UIHeroInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/ItemMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../../Tool/Tool"),d=e("../Mgr/Hero/HeroMgr"),h=e("../uiHero/UIGradeLabel"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelLabel=null,t.nameLabel=null,t.gradeLabel=null,t.spAnim=null,t}return i(t,e),t.prototype.start=function(){this.refreshSkillInfo(),s.EventMgr.on(a.GlobalEvent.ChangeBattleHero,this.refreshSkillInfo,this)},t.prototype.setLevel=function(e){this.levelLabel.string=""+c.default.Instance.getLanguage("LV")+(e||1)},t.prototype.setName=function(e){this.nameLabel.string=c.default.Instance.getLanguage(e)},t.prototype.setGrade=function(e){this.gradeLabel.setGrade(e)},t.prototype.setSpAnim=function(e){u.Tool.setSpineAni(this.spAnim,l.default.Instance.getHeroSpinePath(e),"standby2",!0)},t.prototype.refreshSkillInfo=function(){var e=d.default.Instance.getBattleId(),t=d.default.Instance.getHeroInfo(e),n=d.default.Instance.getData(e);this.setGrade(t.grade),this.setLevel(n.level),this.setName(t.name),this.setSpAnim(t.uiAnim)},r([g(cc.Label)],t.prototype,"levelLabel",void 0),r([g(cc.Label)],t.prototype,"nameLabel",void 0),r([g(h.default)],t.prototype,"gradeLabel",void 0),r([g(sp.Skeleton)],t.prototype,"spAnim",void 0),r([f],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","../Mgr/Hero/HeroMgr":"HeroMgr","../uiHero/UIGradeLabel":"UIGradeLabel"}],UIHeroLevelPropIcon:[function(e,t,n){"use strict";cc._RF.push(t,"106bb3lijBLv7SN2dgS5Esu","UIHeroLevelPropIcon");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Tool/Tool"),c=e("../Mgr/PropMgr"),u=e("./UIHeroLevelPropPop"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=e.call(this)||this;return t.iconSprite=null,t.lvLabel=null,t.bgSpriteFrames=[],t.propId=-1,t.unlockLv=0,t.unlockStatus=!1,t.propId=-1,t.propValue=0,t.unlockLv=0,t.unlockStatus=!1,t}return i(t,e),t.prototype.onLoad=function(){l.Tool.addClickEvent(this.node,this.onClick,this,null,!0,!0,.5)},t.prototype.onClick=function(){u.default.open({level:this.unlockLv,prop:this.propId,value:this.propValue,unlocked:this.unlockStatus,target:this.node})},t.prototype.setProp=function(e,t,n){this.propId!=e&&(this.propId=e,this.refresh()),this.propValue=t,this.unlockLv=n,this.setUnlockLv(n)},t.prototype.setStatus=function(e){this.unlockStatus=e,this.lvLabel.node.active=!e,this.node.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.bgSpriteFrames[e?1:0],this.iconSprite.setState(e?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY)},t.prototype.refresh=function(){var e=c.default.Instance.getPropInfo(this.propId);this.setIcon(e.icon)},t.prototype.setIcon=function(e){l.Tool.setSprite(this.iconSprite,a.BundleName.Main,s.default.Instance.getPropIcon(e))},t.prototype.setUnlockLv=function(e){this.lvLabel.string="LV"+e},r([p(cc.Sprite)],t.prototype,"iconSprite",void 0),r([p(cc.Label)],t.prototype,"lvLabel",void 0),r([p([cc.SpriteFrame])],t.prototype,"bgSpriteFrames",void 0),r([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Tool/Tool":"Tool","../Mgr/PropMgr":"PropMgr","./UIHeroLevelPropPop":"UIHeroLevelPropPop"}],UIHeroLevelPropPop:[function(e,t,n){"use strict";cc._RF.push(t,"ca183u+1vlLybSupPFh4Ig6","UIHeroLevelPropPop");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/BundleMgr"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../Mgr/PropMgr"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=e.call(this)||this;return t.propLabel=null,t.lockedNode=null,t.unlockLevelLabel=null,t.heroDesc=null,t.arraw=null,t.popRoot=null,t.level=0,t.propId=0,t.propValue=0,t.unlocked=!1,t.target=null,t.level=0,t.propId=0,t.propValue=0,t.unlocked=!1,t.target=null,t}var n;return i(t,e),n=t,t.prototype.reuse=function(e){this.level=e.level,this.propId=e.prop,this.propValue=e.value,this.unlocked=e.unlocked,this.target=e.target,this.setProp(this.propId,this.propValue),this.setLevel(this.level),this.setStatus(this.unlocked),this.refreshPosition(),this.node.active=!0},t.prototype.onEnable=function(){l.EventMgr.on(a.GlobalEvent.TouchScreen,this.onTouchScreen,this)},t.prototype.onDisable=function(){l.EventMgr.clearTarget(this)},t.prototype.onTouchScreen=function(){this.node.active=!1},t.prototype.setProp=function(e,t){this.propLabel.string=u.default.Instance.getDesc(e,t)},t.prototype.setLevel=function(e){this.unlockLevelLabel.string=c.default.Instance.getLanguage("LV")+e},t.prototype.setStatus=function(e){this.lockedNode.active=!e,e?(this.propLabel.node.color=cc.color().fromHEX("#76c7ff"),this.heroDesc.color=cc.color().fromHEX("#e09f03")):(this.propLabel.node.color=cc.Color.GRAY,this.heroDesc.color=cc.Color.GRAY)},t.prototype.refreshPosition=function(){var e=this.target.convertToWorldSpaceAR(cc.Vec3.ZERO),t=this.popRoot.parent.convertToNodeSpaceAR(e);this.popRoot.x=t.x+.5*this.target.width,this.popRoot.y=t.y+.5*this.target.height,e=this.target.convertToWorldSpaceAR(cc.Vec3.ZERO),t=this.arraw.parent.convertToNodeSpaceAR(e),this.arraw.x=t.x-this.arraw.width/2},t.destroyComp=function(){this._component&&(this._component.node.destroy(),this._component=null)},t.open=function(e){var t=this;if(this._component)this._component.reuse(e);else{var o=cc.find("Canvas").getChildByName("panel3");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Hero/UIHeroLevelPropPop",cc.Prefab,function(i,r){if(!i){r.addRef();var a=cc.instantiate(r);t._component=a.getComponent(n),o.addChild(a),t._component.reuse(e)}})}},t._component=null,r([p(cc.Label)],t.prototype,"propLabel",void 0),r([p(cc.Node)],t.prototype,"lockedNode",void 0),r([p(cc.Label)],t.prototype,"unlockLevelLabel",void 0),r([p(cc.Node)],t.prototype,"heroDesc",void 0),r([p(cc.Node)],t.prototype,"arraw",void 0),r([p(cc.Node)],t.prototype,"popRoot",void 0),n=r([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/BundleMgr":"BundleMgr","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../Mgr/PropMgr":"PropMgr"}],UIHeroLevelProps:[function(e,t,n){"use strict";cc._RF.push(t,"5ad42XMQ2JAV5bLpRsuY738","UIHeroLevelProps");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../CommonUI/UIItemPool"),s=e("./UIHeroLevelPropIcon"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=e.call(this)||this;return t.levelPropContent=null,t.propIconList=[],t.propIconList=[],t}return i(t,e),t.prototype.setProps=function(e,t,n,o){var i=this;this.clear(),myGlobalThis.each(t,function(t,r){var a=i.propIconList[r],l=n[r],c=o[r];if(myGlobalThis.isNil(a)){var u=i.get();u.parent=i.levelPropContent.node,a=i.propIconList[c]=u.getComponent(s.default)}a.setProp(t,l,c),a.setStatus(e>=c)})},t.prototype.unlockProp=function(e){var t=this.propIconList[e];t&&t.setStatus(!0)},t.prototype.onDestroy=function(){this.propIconList.length=0},r([u(cc.Layout)],t.prototype,"levelPropContent",void 0),r([c],t)}(a.default);n.default=d,cc._RF.pop()},{"../CommonUI/UIItemPool":"UIItemPool","./UIHeroLevelPropIcon":"UIHeroLevelPropIcon"}],UIHeroListItem:[function(e,t,n){"use strict";cc._RF.push(t,"f07dcSf+Q9DaYBv0yueWFJM","UIHeroListItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Tool/Tool"),u=e("../Mgr/Hero/HeroMgr"),d=e("./UIGradeSprite"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=e.call(this)||this;return t.bg=null,t.nameLabel=null,t.levelLabel=null,t.iconSprite=null,t.gradeSprite=null,t.equipedNode=null,t.heroId=0,t.pos=-1,t.heroId=0,t.pos=-1,t}return i(t,e),t.prototype.setHero=function(e){this.heroId!=e&&(this.heroId=e,this.refresh()),this.refreshStatus()},t.prototype.getHeroId=function(){return this.heroId},t.prototype.setPos=function(e){this.pos=e},t.prototype.refresh=function(){var e=u.default.Instance.getHeroInfo(this.heroId);this.setName(e.name),this.setGrade(e.grade),this.setIcon(e.icon)},t.prototype.refreshStatus=function(){var e=u.default.Instance.getData(this.heroId);this.setLevel((null==e?0:e.level)||-1)},t.prototype.setEquipped=function(e){this.equipedNode.active=e},t.prototype.setName=function(e){this.nameLabel.string=l.default.Instance.getLanguage(e)},t.prototype.setLevel=function(e){e>0?(this.levelLabel.string=l.default.Instance.getLanguage("LV")+" "+e,this.iconSprite.setState(cc.Sprite.State.NORMAL),this.bg.setState(cc.Sprite.State.NORMAL)):(this.levelLabel.string=l.default.Instance.getLanguage("item_unowned"),this.iconSprite.setState(cc.Sprite.State.GRAY),this.bg.setState(cc.Sprite.State.GRAY))},t.prototype.setGrade=function(e){this.gradeSprite.setGrade(e)},t.prototype.setIcon=function(e){c.Tool.setSprite(this.iconSprite,a.BundleName.Main,s.default.Instance.getHeroIcon(e))},r([f(cc.Sprite)],t.prototype,"bg",void 0),r([f(cc.Label)],t.prototype,"nameLabel",void 0),r([f(cc.Label)],t.prototype,"levelLabel",void 0),r([f(cc.Sprite)],t.prototype,"iconSprite",void 0),r([f(d.default)],t.prototype,"gradeSprite",void 0),r([f(cc.Node)],t.prototype,"equipedNode",void 0),r([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","../Mgr/Hero/HeroMgr":"HeroMgr","./UIGradeSprite":"UIGradeSprite"}],UIHeroListView:[function(e,t,n){"use strict";cc._RF.push(t,"17dfb8jXPNNj7tAU3nXpeoE","UIHeroListView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/ItemMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../../Mgr/StorageMgr"),d=e("../../Platform/Platform"),h=e("../../Res/ResPanelOpen"),p=e("../../Tool/Tool"),f=e("../CommonUI/UIItemPool"),g=e("../Mgr/GuideCore/GuideEnums"),y=e("../Mgr/GuideCore/GuideMgr"),m=e("../Mgr/Hero/HeroMgr"),v=e("../Mgr/MgrAds"),_=e("../Mgr/Unlock/MgrUnlock"),b=e("./UIGradeSprite"),S=e("./UIHeroLevelProps"),M=e("./UIHeroListItem"),C=e("./UIHeroSkillInfo"),T=cc._decorator,k=T.ccclass,I=T.property,E=function(e){function t(){var t=e.call(this)||this;return t.spAnim=null,t.gradeSprite=null,t.nameLabel=null,t.levelExpProgress=null,t.levelExpText=null,t.levelLabel=null,t.levelInfoNode=null,t.unownedNode=null,t.skillInfo=null,t.levelProps=null,t.heroListContent=null,t.btnEquip=null,t.btnEnhance=null,t.enhanceRedPoint=null,t.btnGet=null,t.btnBuy=null,t.levelBuyPrice=null,t.expCnt=null,t.equippedNode=null,t.btnClose=null,t.btnExpAd=null,t.expAdCountLabel=null,t._created=!1,t.listItem={},t.currSelectId=0,t._touched=!1,t._touchTime=0,t._touchInterval=.1,t._touchStartInterval=.5,t.expAdCountLabel=null,t._created=!1,t.listItem={},t.currSelectId=0,t._touched=!1,t._touchTime=0,t._touchInterval=.1,t._touchStartInterval=.5,t}return i(t,e),t.prototype.onLoad=function(){this.expAdCountLabel=this.btnExpAd.getChildByName("tag").getComponentInChildren(cc.Label),p.Tool.addClickEvent(this.btnEquip,this.onClickEquip,this),p.Tool.addClickEvent(this.btnGet,this.onClickGet,this),p.Tool.addClickEvent(this.btnBuy,this.onClickBuy,this),p.Tool.addClickEvent(this.btnExpAd,this.onClickAdAddExp,this),p.Tool.addClickEvent(this.btnEnhance,this.onClickLvUp,this),p.Tool.addClickEvent(this.btnClose,this.close,this)},t.prototype.onClickLvUp=function(){_.default.Instance.isUnlock(a.UnlockType.mine)?this.tryLvup():d.default.instance.showToast(c.default.Instance.getLanguage("HeroNotUnlockEnhanceTip"))},t.prototype.tryLvup=function(){if(m.default.Instance.enhance(this.currSelectId)){var e=m.default.Instance.getData(this.currSelectId),t=m.default.Instance.getExp(e.level),n=m.default.Instance.getHeroInfo(this.currSelectId);this.setLevel(e.level),this.setProgress(e.curExp,t,e.level>=n.maxLevel),this.listItem[this.currSelectId].refreshStatus(),this.setStatus(!0),y.default.instance.isCompleteSpecialGuide(g.SpecialGuideEnum.TouchHeroButton3)||(y.default.instance.completeSpecialGuide(g.SpecialGuideEnum.TouchHeroButton3),y.default.instance.completeSpecialGuide(g.SpecialGuideEnum.TouchUpgradeHeroToggle),y.default.instance.completeSpecialGuide(g.SpecialGuideEnum.TouchChangeHero),y.default.instance.completeSpecialGuide(g.SpecialGuideEnum.TouchUpgradeHeroButton)),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchCloseHeroView)}},t.prototype.pauseLvup=function(){this._touched=!1},t.prototype.onClickGet=function(){var e=this.currSelectId,t=m.default.Instance.getHeroInfo(e);1!=t.unlockType?t.unlockType:d.default.instance.showToast(c.default.Instance.getLanguage("Hero_Tips_SevenUnlock"))},t.prototype.onClickBuy=function(){var e=this.currSelectId,t=m.default.Instance.getHeroInfo(e);if(u.default.instance.storageData.diamond<t.unlockCost)d.default.instance.showToast(c.default.Instance.getLanguage("Not enough Gem!"));else{u.default.instance.reduceDiamond(t.unlockCost),m.default.Instance.unlock(e),this.setStatus(!0),this.refreshList();var n=m.default.Instance.getData(e),o=m.default.Instance.getExp(n.level);this.setLevel(n.level),this.setProgress(n.curExp,o,n.level>=t.maxLevel)}},t.prototype.onEnable=function(){this.currSelectId=m.default.Instance.getBattleId(),this.refreshList(),this.refreshInfo(),this.setExpCnt(u.default.instance.storageData.slimeExp),this.expAdCountLabel.string="*"+m.HERO_EXP_AD_GET_NUMBER,s.EventMgr.on(a.GlobalEvent.AssetItemChange+a.ASSET_TYPE.SlimeExp,this.onSlimeExpCountChange,this),s.EventMgr.on(a.GlobalEvent.HeroUnlockProp,this.onHeroUnlockProp,this),s.EventMgr.on(a.GlobalEvent.HeroUnlockSkill,this.onHeroUnlockSkill,this);var e=this.node.getChildByName("base");h.default.panelOpen_SmallToBig(e),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchUpgradeHeroButton)},t.prototype.start=function(){this.listItem[this.currSelectId].getComponent(cc.Toggle).check()},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.onDestroy=function(){s.EventMgr.event(a.EventType.Main_UI_Hero_CloseSelectView)},t.prototype.onHeroUnlockProp=function(e,t){if(this.pauseLvup(),this.currSelectId==e){t.prop,t.value;var n=m.default.Instance.getData(e);this.levelProps.unlockProp(n.level)}},t.prototype.onHeroUnlockSkill=function(e){if(this.pauseLvup(),this.currSelectId==e){var t=m.default.Instance.getData(e).level,n=m.default.Instance.getHeroInfo(e);this.skillInfo.setState(t,n.skillUnlockLv)}},t.prototype.onSlimeExpCountChange=function(){this.setExpCnt(u.default.instance.storageData.slimeExp);var e=this.currSelectId,t=m.default.Instance.getData(e);this.refreshExpStatus(!myGlobalThis.isNil(t))},t.prototype.refreshList=function(){var e=this,t=m.default.Instance.getBattleId();if(this._created)myGlobalThis.each(this.listItem,function(n){n.refreshStatus(),n.setEquipped(t==n.getHeroId()),n.getHeroId()==e.currSelectId&&n.getComponent(cc.Toggle).check()});else{this._created=!0;var n=m.default.Instance.getHeroInfos();myGlobalThis.each(n,function(n){var o=e.get();o.parent=e.heroListContent.node;var i=o.getComponent(M.default);i.setHero(n.id),i.setEquipped(t==i.getHeroId()),e.listItem[n.id]=i,i.getHeroId()==e.currSelectId&&i.getComponent(cc.Toggle).check(),i.node.on("toggle",e.onToggle,e)})}},t.prototype.onToggle=function(e){if(e.isChecked){var t=e.getComponent(M.default);if(this.currSelectId==t.getHeroId())return;this.currSelectId=t.getHeroId(),this.refreshInfo()}},t.prototype.refreshInfo=function(){var e=this.currSelectId,t=m.default.Instance.getHeroInfo(e),n=m.default.Instance.getData(e),o=t.unlockPropLvs,i=t.props,r=t.propValues,a=(null==n?0:n.level)||0,s=(null==n?0:n.curExp)||0,l=m.default.Instance.getExp(a);this.levelProps.setProps(a,i,r,o),this.skillInfo.setSkill(t.skillId),this.skillInfo.setState(a,t.skillUnlockLv),this.setName(t.name),this.setLevel(a),this.setProgress(s,l,a>=t.maxLevel),this.setAnim(t.uiAnim),this.setGrade(t.grade),this.setStatus(!myGlobalThis.isNil(n)),this.setEquipped(e==m.default.Instance.getBattleId()),this.levelBuyPrice.string=t.unlockCost.toString();var c=t.unlockCost<=myGlobalThis.parseInt(u.default.instance.storageData.diamond);this.btnBuy.getComponentInChildren(cc.Sprite).setState(c?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY),this.levelBuyPrice.node.color=c?cc.Color.WHITE:cc.Color.RED},t.prototype.setName=function(e){this.nameLabel.string=c.default.Instance.getLanguage(e)},t.prototype.setProgress=function(e,t,n){if(0===n&&(n=!1),n)return this.levelExpProgress.progress=1,void(this.levelExpText.string=c.default.Instance.getLanguage("MaxLevel"));this.levelExpProgress.progress=t>0?e/t:0,this.levelExpText.string=e+"/"+t},t.prototype.setLevel=function(e){this.levelLabel.string="LV "+e},t.prototype.setStatus=function(e){this.levelInfoNode.active=e,this.unownedNode.active=!e;var t=e?cc.Color.WHITE:cc.Color.GRAY;this.spAnim.node.color=t,this.btnEnhance.active=e;var n=this.currSelectId,o=m.default.Instance.getHeroInfo(n);if(this.btnEquip.active=0==o.unlockType,this.btnEnhance.active=0==o.unlockType,e){var i=m.default.Instance.getData(n);this.btnEquip.active=!0,this.btnEnhance.active=i.level<o.maxLevel,this.btnGet.active=!1,this.btnBuy.active=!1}else this.btnEquip.active=!1,this.btnEnhance.active=!1,1==o.unlockType?(this.btnGet.active=!0,this.btnBuy.active=!1):2==o.unlockType?(this.btnBuy.active=!0,this.btnGet.active=!1):3==o.unlockType&&(this.btnBuy.active=!1,this.btnGet.active=!0);this.refreshExpStatus(e)},t.prototype.setEquipped=function(e){var t=this.btnEquip.getComponentInChildren(cc.Sprite),n=this.btnEquip.getComponentInChildren(cc.Label);e?(t.setState(cc.Sprite.State.GRAY),n.string=c.default.Instance.getLanguage("item_equiped"),n.node.color=cc.Color.GRAY,this.equippedNode.active=!0):(t.setState(cc.Sprite.State.NORMAL),n.string=c.default.Instance.getLanguage("btn_equip"),n.node.color=cc.Color.WHITE,this.equippedNode.active=!1)},t.prototype.setGrade=function(e){this.gradeSprite.setGrade(e)},t.prototype.setAnim=function(e){p.Tool.setSpineAni(this.spAnim,l.default.Instance.getHeroSpinePath(e),"standby2",!0)},t.prototype.setExpCnt=function(e){var t;this.expCnt.node.color=e>0?cc.Color.WHITE:cc.Color.RED,this.expCnt.string=e+"/1",this.enhanceRedPoint.active=e>0,null===(t=this.btnEnhance.getComponentInChildren(cc.Sprite))||void 0===t||t.setState(e>0?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY)},t.prototype.onClickEquip=function(){var e=this,t=m.default.Instance.getBattleId();if(m.default.Instance.equip(this.currSelectId)){var n=this.currSelectId;this.setEquipped(n==m.default.Instance.getBattleId()),this.listItem[t].setEquipped(!1);var o=m.default.Instance.getBattleId();this.listItem[o].setEquipped(!0),this.scheduleOnce(function(){e.node.destroy()})}},t.prototype.refreshExpStatus=function(e){var t=u.default.instance.storageData.slimeExp,n=v.default.Instance.getAdTimes(a.AD_TYPE.Exp);t<=0&&(this.btnExpAd.getChildByName("tag").active=n<m.HERO_EXP_AD_NUMBER,this.btnExpAd.getComponentInChildren(cc.Label).string=m.HERO_EXP_AD_NUMBER-n+"/"+m.HERO_EXP_AD_NUMBER),this.btnExpAd.active=m.default.Instance.canGetAdExp()&&e&&m.HERO_EXP_AD_NUMBER-n>0},t.prototype.onClickAdAddExp=function(){v.default.Instance.getAdTimes(a.AD_TYPE.Exp)>=m.HERO_EXP_AD_NUMBER||d.default.instance.showVideo(function(){v.default.Instance.addTodayTimes(a.AD_TYPE.Exp),u.default.instance.addExp(m.HERO_EXP_AD_GET_NUMBER)},null)},t.prototype.close=function(){var e=this.node.getChildByName("base"),t=this;h.default.panelClose_BigToSmall(e,function(){t.node.destroy(),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchMasteryButton)})},r([I(sp.Skeleton)],t.prototype,"spAnim",void 0),r([I(b.default)],t.prototype,"gradeSprite",void 0),r([I(cc.Label)],t.prototype,"nameLabel",void 0),r([I(cc.ProgressBar)],t.prototype,"levelExpProgress",void 0),r([I(cc.Label)],t.prototype,"levelExpText",void 0),r([I(cc.Label)],t.prototype,"levelLabel",void 0),r([I(cc.Node)],t.prototype,"levelInfoNode",void 0),r([I(cc.Node)],t.prototype,"unownedNode",void 0),r([I(C.default)],t.prototype,"skillInfo",void 0),r([I(S.default)],t.prototype,"levelProps",void 0),r([I(cc.Layout)],t.prototype,"heroListContent",void 0),r([I(cc.Node)],t.prototype,"btnEquip",void 0),r([I(cc.Node)],t.prototype,"btnEnhance",void 0),r([I(cc.Node)],t.prototype,"enhanceRedPoint",void 0),r([I(cc.Node)],t.prototype,"btnGet",void 0),r([I(cc.Node)],t.prototype,"btnBuy",void 0),r([I(cc.Label)],t.prototype,"levelBuyPrice",void 0),r([I(cc.Label)],t.prototype,"expCnt",void 0),r([I(cc.Node)],t.prototype,"equippedNode",void 0),r([I(cc.Node)],t.prototype,"btnClose",void 0),r([I(cc.Node)],t.prototype,"btnExpAd",void 0),r([k],t)}(f.default);n.default=E,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/StorageMgr":"StorageMgr","../../Platform/Platform":"Platform","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/UIItemPool":"UIItemPool","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/Hero/HeroMgr":"HeroMgr","../Mgr/MgrAds":"MgrAds","../Mgr/Unlock/MgrUnlock":"MgrUnlock","./UIGradeSprite":"UIGradeSprite","./UIHeroLevelProps":"UIHeroLevelProps","./UIHeroListItem":"UIHeroListItem","./UIHeroSkillInfo":"UIHeroSkillInfo"}],UIHeroSkillInfo:[function(e,t,n){"use strict";cc._RF.push(t,"487b4Fp6yFKsKLR87sBeC6B","UIHeroSkillInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Tool/Tool"),u=e("../Mgr/SkillMgr"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=e.call(this)||this;return t.iconSprite=null,t.nameLabel=null,t.descLabel=null,t.skillLocked=null,t.skillUnlockLvLabel=null,t.infoNode=null,t.skillId=0,t.skillId=0,t}return i(t,e),t.prototype.setSkill=function(e){this.skillId!=e&&(this.skillId=e,this.refresh())},t.prototype.refresh=function(){var e=u.default.Instance.getSkillInfo(this.skillId);this.setIcon(e.icon),this.setName(e.name),this.setDesc(e.desc)},t.prototype.setState=function(e,t){if(this.skillLocked.active=e<t,this.skillUnlockLvLabel.string=l.default.Instance.getLanguage("LevelUnlockTip2").replace("{s}",t.toString()),this.infoNode)for(var n=this.infoNode.childrenCount,o=0;o<n;o++){this.infoNode.children[o].color=e<t?cc.Color.GRAY:cc.Color.WHITE;var i=this.infoNode.children[o].getComponent(cc.Sprite);i&&i.setState(e<t?cc.Sprite.State.GRAY:cc.Sprite.State.NORMAL)}},t.prototype.setIcon=function(e){c.Tool.setSprite(this.iconSprite,a.BundleName.Main,s.default.Instance.getSkillIcon(e))},t.prototype.setName=function(e){this.nameLabel.string=l.default.Instance.getLanguage(e)},t.prototype.setDesc=function(e){this.descLabel.string=l.default.Instance.getLanguage(e)},r([p(cc.Sprite)],t.prototype,"iconSprite",void 0),r([p(cc.Label)],t.prototype,"nameLabel",void 0),r([p(cc.Label)],t.prototype,"descLabel",void 0),r([p(cc.Node)],t.prototype,"skillLocked",void 0),r([p(cc.Label)],t.prototype,"skillUnlockLvLabel",void 0),r([p(cc.Node)],t.prototype,"infoNode",void 0),r([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","../Mgr/SkillMgr":"SkillMgr"}],UIHeroUnlockProp:[function(e,t,n){"use strict";cc._RF.push(t,"16ca6jOayVHqJ4dY/3vMJXj","UIHeroUnlockProp");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Res/ResPanelOpen"),u=e("../../Tool/Tool"),d=e("../Mgr/Hero/HeroMgr"),h=e("../Mgr/PropMgr"),p=e("../Mgr/SkillMgr"),f=cc._decorator,g=f.ccclass,y=f.property,m=function(e){function t(){var t=e.call(this)||this;return t.spAnim=null,t.nameLabel=null,t.lvLabel=null,t.iconSprite=null,t.descLabel=null,t.btnOk=null,t.heroId=-1,t.unlock=null,t}return i(t,e),t.prototype.reuse=function(e){this.heroId=e.heroId,this.unlock=e.unlock;var t=d.default.Instance.getData(this.heroId),n=d.default.Instance.getHeroInfo(this.heroId);if(this.setAnim(n.uiAnim),this.setName(n.name),this.setLevel(t.level),"number"==typeof this.unlock){var o=p.default.Instance.getSkillInfo(this.unlock);this.setIcon(s.default.Instance.getSkillIcon(o.icon)),this.setSkillName(o.name)}else{var i=this.unlock,r=i.prop,a=i.value;this.setProp(r,a);var l=h.default.Instance.getPropInfo(r);this.setIcon(s.default.Instance.getPropIcon(l.icon))}var u=this.node.getChildByName("base");c.default.panelOpen_SmallToBig(u)},t.prototype.onLoad=function(){u.Tool.addClickEvent(this.btnOk,this.onClickOk,this)},t.prototype.setAnim=function(e){u.Tool.setSpineAni(this.spAnim,s.default.Instance.getHeroSpinePath(e),"standby2",!0)},t.prototype.setName=function(e){this.nameLabel.string=l.default.Instance.getLanguage(e)},t.prototype.setLevel=function(e){this.lvLabel.string=""+l.default.Instance.getLanguage("LV")+e},t.prototype.setProp=function(e,t){this.descLabel.string=h.default.Instance.getDesc(e,t)},t.prototype.setSkillName=function(e){this.descLabel.string=l.default.Instance.getLanguage(e)},t.prototype.setIcon=function(e){u.Tool.setSprite(this.iconSprite,a.BundleName.Main,e)},t.prototype.onEnable=function(){},t.prototype.onClickOk=function(){var e=this,t=this.node.getChildByName("base");c.default.panelClose_BigToSmall(t,function(){e.node.destroy()})},r([y(sp.Skeleton)],t.prototype,"spAnim",void 0),r([y(cc.Label)],t.prototype,"nameLabel",void 0),r([y(cc.Label)],t.prototype,"lvLabel",void 0),r([y(cc.Sprite)],t.prototype,"iconSprite",void 0),r([y(cc.Label)],t.prototype,"descLabel",void 0),r([y(cc.Node)],t.prototype,"btnOk",void 0),r([g],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Mgr/Hero/HeroMgr":"HeroMgr","../Mgr/PropMgr":"PropMgr","../Mgr/SkillMgr":"SkillMgr"}],UIIcon:[function(e,t,n){"use strict";cc._RF.push(t,"b234eqErQtBcZ493mMWuApq","UIIcon");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Tool/Tool"),l=cc._decorator,c=l.ccclass,u=(l.property,l.requireComponent),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._sprite=null,t.iconOriginSize=null,t._icon=null,t}return i(t,e),Object.defineProperty(t.prototype,"iconSprite",{get:function(){return this._sprite||(this._sprite=this.node.getComponent(cc.Sprite)),this._sprite},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"iconSize",{get:function(){return this.iconOriginSize||(this.iconOriginSize=this.iconSprite.node.getContentSize(),this.iconSprite.trim=!1,this.iconSprite.sizeMode=cc.Sprite.SizeMode.RAW),this.iconOriginSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},set:function(e){this._icon!=e&&(this._icon=e,this.applyIcon())},enumerable:!1,configurable:!0}),t.prototype.applyIcon=function(){var e=this;if(myGlobalThis.isEmpty(this.icon))this.iconSprite.spriteFrame=null;else{var t=this.iconSize;s.Tool.setSprite(this.iconSprite,a.BundleName.Main,this.icon,function(){var n=e.iconSprite.node.getContentSize();n.width>n.height?e.iconSprite.node.scale=t.width/e.iconSprite.node.width:e.iconSprite.node.scale=t.height/e.iconSprite.node.height})}},r([c,u(cc.Sprite)],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Tool/Tool":"Tool"}],UIItemPool:[function(e,t,n){"use strict";cc._RF.push(t,"2d4c9Ybd9xM9JpMi/3wSVUY","UIItemPool");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.prefab=null,t._pool=new cc.NodePool,t._nodes=[],t}return i(t,e),t.prototype.clear=function(){var e=this;this._nodes.forEach(function(t){e._pool.put(t)}),this._nodes=[]},t.prototype.get=function(){var e;return e=this._pool.size()>0?this._pool.get():cc.instantiate(this.prefab),this._nodes.push(e),e},t.prototype.put=function(e){e instanceof cc.Component&&(e=e.node);var t=this._nodes.indexOf(e);t>=0&&this._nodes.splice(t,1),this._pool.put(e)},t.prototype.onDestroy=function(){this._pool.clear(),this._pool=null,this._nodes=[]},r([l(cc.Prefab)],t.prototype,"prefab",void 0),r([s],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],UIMasterResetView:[function(e,t,n){"use strict";cc._RF.push(t,"46cdbdGOUhP/5GwD/jxTnyV","UIMasterResetView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/BundleMgr"),l=e("../../../Res/ResPanelOpen"),c=e("../../../Tool/Tool"),u=e("../Mastery/MgrMastery"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.btnConfirm=null,t}return i(t,e),t.prototype.onLoad=function(){c.Tool.addClickEvent(this.btnClose,this.onClickClose,this),c.Tool.addClickEvent(this.btnConfirm,this.onClickConfirm,this)},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");l.default.panelOpen_SmallToBig(e)},t.prototype.onClickConfirm=function(){u.default.Instance.reset(),this.onClickClose()},t.prototype.onClickClose=function(){var e=this.node.getChildByName("base"),t=this;l.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},t.open=function(){var e=cc.find("Canvas").getChildByName("panel2");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Mastery/UIMasterResetView",cc.Prefab,function(t,n){if(!t&&e&&e.isValid&&!e.getChildByName(n.name)){var o=cc.instantiate(n);e.addChild(o)}})},r([p(cc.Node)],t.prototype,"btnClose",void 0),r([p(cc.Node)],t.prototype,"btnConfirm",void 0),r([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/BundleMgr":"BundleMgr","../../../Res/ResPanelOpen":"ResPanelOpen","../../../Tool/Tool":"Tool","../Mastery/MgrMastery":"MgrMastery"}],UIMasteryHelperView:[function(e,t,n){"use strict";cc._RF.push(t,"fc86ckJQL5GZoN1K323EUEC","UIMasteryHelperView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/BundleMgr"),l=e("../../../Res/ResPanelOpen"),c=e("../../../Tool/Tool"),u=cc._decorator,d=u.ccclass,h=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t}return i(t,e),t.prototype.onLoad=function(){this.btnClose=c.Tool.findNodeByName(this.node,"btnClose"),c.Tool.addClickEvent(this.btnClose,this.onClickClose,this)},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");l.default.panelOpen_SmallToBig(e)},t.prototype.onClickClose=function(){var e=this.node.getChildByName("base"),t=this;l.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},t.open=function(){var e=cc.find("Canvas").getChildByName("panel2");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Mastery/UIMasteryHelperView",cc.Prefab,function(t,n){if(!t&&e&&e.isValid&&!e.getChildByName(n.name)){var o=cc.instantiate(n);e.addChild(o)}})},r([d],t)}(cc.Component));n.default=h,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/BundleMgr":"BundleMgr","../../../Res/ResPanelOpen":"ResPanelOpen","../../../Tool/Tool":"Tool"}],UIMasteryInfo:[function(e,t,n){"use strict";cc._RF.push(t,"a1f6bkWea9NyZ117gmx8ZYi","UIMasteryInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Mgr/LanguageMgr"),s=e("../Mastery/MgrMastery"),l=e("../PropMgr"),c=e("./UIMasteryItem"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=e.call(this)||this;return t.currItem=null,t.descLabel=null,t.nextDescLabel=null,t._masteryId=0,t}return i(t,e),Object.defineProperty(t.prototype,"masteryId",{get:function(){return this._masteryId},set:function(e){this._masteryId!=e&&(this._masteryId=e)},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){var e=s.default.Instance.get(this.masteryId),t=s.default.Instance.getData(this.masteryId);this.currItem.setIcon(e.icon),this.currItem.masteryId=this.masteryId,this.currItem.refreshStatus();var n=(null==t?0:t.status)||s.MASTERY_STATUS.Close,o=(null==t?0:t.level)||0,i=e.propType[0],r=e.propAdd[0],c=l.default.Instance.getPropInfo(i),u=a.default.Instance.getLanguage(c.desc),d=r;if(o>0&&(d=r*o),this.descLabel.string=u.replace("%{value}",""+d),n==s.MASTERY_STATUS.Open&&o>0){var h=r*(o+1);this.nextDescLabel.string="<outline color=#000000 width=2><color=#61F656>"+u.replace("%{value}",""+h)+"</color></outline>",this.nextDescLabel.node.parent.active=!0}else this.nextDescLabel.node.parent.active=!1},r([h(c.default)],t.prototype,"currItem",void 0),r([h(cc.Label)],t.prototype,"descLabel",void 0),r([h(cc.RichText)],t.prototype,"nextDescLabel",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../Mgr/LanguageMgr":"LanguageMgr","../Mastery/MgrMastery":"MgrMastery","../PropMgr":"PropMgr","./UIMasteryItem":"UIMasteryItem"}],UIMasteryItem:[function(e,t,n){"use strict";cc._RF.push(t,"e846cjvjTxBeYFxqFQn/B4M","UIMasteryItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/ItemMgr"),c=e("../../../Mgr/StorageMgr"),u=e("../../../Tool/Tool"),d=e("../Mastery/MgrMastery"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=e.call(this)||this;return t.bg=null,t.icon=null,t.levelLabel=null,t.maxLabel=null,t.linkLine=null,t.blackLine=null,t.infiniteNode=null,t.redPoint=null,t.stateSpriteFrames=[],t.lineLines=[],t.blackLines=[],t._masteryId=-1,t._masteryId=-1,t.lineLines=[],t}return i(t,e),Object.defineProperty(t.prototype,"masteryId",{get:function(){return this._masteryId},set:function(e){this._masteryId=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"redPointNode",{get:function(){return this.redPoint},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){s.EventMgr.on(a.GlobalEvent.AssetItemChange+a.ASSET_TYPE.Sp,this.onSpChange,this)},t.prototype.setIcon=function(e){u.Tool.setSprite(this.icon,a.BundleName.Main,l.default.Instance.getMasteryIcon(e))},t.prototype.setLevel=function(e,t){this.levelLabel.string=t<=0?""+e:e==t?"Max":e+"/"+t,this.infiniteNode.active=t<=0,this.levelLabel.node.active=t>0&&e!=t,this.maxLabel.node.active=t>0&&e==t},t.prototype.setRedPoint=function(e){this.redPointNode&&(this.redPointNode.active=e)},t.prototype.onSpChange=function(){c.default.instance.storageData.heroSp<=0&&this.setRedPoint(!1)},t.prototype.refreshStatus=function(){var e=d.default.Instance.get(this.masteryId),t=d.default.Instance.getData(this.masteryId),n=e.maxLevel,o=(Boolean(t)?t.level:0)||0,i=(Boolean(t)?t.status:0)||d.MASTERY_STATUS.Close;switch(this.setLevel(o,n),this.setRedPoint(i==d.MASTERY_STATUS.Open&&o!=n&&c.default.instance.storageData.heroSp>=e.costSp),i){case d.MASTERY_STATUS.Close:this.bg.spriteFrame=this.stateSpriteFrames[0],this.icon.setState(cc.Sprite.State.GRAY);break;case d.MASTERY_STATUS.Open:this.icon.setState(cc.Sprite.State.NORMAL),this.bg.spriteFrame=this.stateSpriteFrames[o>0&&o!=n?2:1];break;case d.MASTERY_STATUS.Max:this.icon.setState(cc.Sprite.State.NORMAL),this.bg.spriteFrame=this.stateSpriteFrames[3]}},t.prototype.refreshLinkLineStatus=function(){var e=this,t=d.default.Instance.get(this.masteryId).pre;myGlobalThis.each(t,function(t,n){var o=d.default.Instance.getData(t),i=e.lineLines[n];i.active=o&&o.status!=d.MASTERY_STATUS.Close,e.blackLines[n].active=!i.active})},t.prototype.createLineLines=function(e){var t=this,n=function(e,n,o,i){e.parent=t.node,e.setSiblingIndex(0),e.width=n,e.position=o.mul(.5),e.angle=cc.misc.radiansToDegrees(Math.atan2(o.y,o.x)),i.push(e)};myGlobalThis.each(e,function(e){var o=e.position.sub(t.node.position),i=o.mag(),r=cc.instantiate(t.linkLine),a=cc.instantiate(t.blackLine);n(r,i,o,t.lineLines),n(a,i,o,t.blackLines)})},r([f(cc.Sprite)],t.prototype,"bg",void 0),r([f(cc.Sprite)],t.prototype,"icon",void 0),r([f(cc.Label)],t.prototype,"levelLabel",void 0),r([f(cc.Label)],t.prototype,"maxLabel",void 0),r([f(cc.Node)],t.prototype,"linkLine",void 0),r([f(cc.Node)],t.prototype,"blackLine",void 0),r([f(cc.Node)],t.prototype,"infiniteNode",void 0),r([f(cc.Node)],t.prototype,"redPoint",void 0),r([f([cc.SpriteFrame])],t.prototype,"stateSpriteFrames",void 0),r([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/ItemMgr":"ItemMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Tool/Tool":"Tool","../Mastery/MgrMastery":"MgrMastery"}],UIMasteryView:[function(e,t,n){"use strict";cc._RF.push(t,"156260Y/0tNFp0jq087UlL7","UIMasteryView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=e("../../../Mgr/ItemMgr"),c=e("../../../Mgr/StorageMgr"),u=e("../../../Tool/Tool"),d=e("../../CommonUI/UIItemPool"),h=e("../Mastery/MgrMastery"),p=e("./UIMasterResetView"),f=e("./UIMasteryHelperView"),g=e("./UIMasteryInfo"),y=e("./UIMasteryItem"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=e.call(this)||this;return t.spLabel=null,t.content=null,t.info=null,t.btnReset=null,t.resetPrice=null,t.btnEnhance=null,t.enhancePrice=null,t.btnHelper=null,t.currSelectId=0,t.items={},t.items={},t.currSelectId=0,t}return i(t,e),t.prototype.onLoad=function(){this.createItems(),u.Tool.addClickEvent(this.btnReset,this.onClickReset,this),u.Tool.addClickEvent(this.btnEnhance,this.onClickEnhance,this),u.Tool.addClickEvent(this.btnHelper,this.onClickHelper,this)},t.prototype.createItems=function(){for(var e=this,t=1,n=1,o=function(){var o=h.default.Instance.getLayers(t);if(myGlobalThis.isNil(o)||myGlobalThis.isEmpty(o))return"break";myGlobalThis.each(o,function(i,r){var a=e.createItem(t,r,o.length),s=h.default.Instance.getData(i.id);a.masteryId=i.id,a.setIcon(i.icon),a.refreshStatus();var l=i.pre,c=myGlobalThis.reduce(l,function(t,n){return t.push(e.items[n].node),t},[]);a.createLineLines(c),a.refreshLinkLineStatus(),a.node.on("toggle",e.onToggleItem,e),s&&s.status!=h.MASTERY_STATUS.Close&&(n=Math.max(s.id,n)),e.items[i.id]=a}),t++};"break"!=o(););this.currSelectId=n,this.content.getComponent(cc.Layout).updateLayout(),this.content.getComponent(cc.Widget).updateAlignment()},t.prototype.createItem=function(e,t,n){var o=this.get();return o.parent=this.content,o.setSiblingIndex(0),o.x=-.5*(n-1)*160+160*t,o.y=160*e,o.getComponent(y.default)},t.prototype.onToggleItem=function(e){if(e.isChecked){var t=e.getComponent(y.default);this.setCurrInfo(t.masteryId),this.onSpCountChange()}},t.prototype.start=function(){this.items[this.currSelectId].getComponent(cc.Toggle).check()},t.prototype.onEnable=function(){this.setCurrInfo(this.currSelectId),this.refreshBtnStatus(),this.refreshSpCount(),this.refreshDiamond(),this.resetPrice.string=""+h.MASTERY_RESET_PRICE,s.EventMgr.on(a.GlobalEvent.MasteryUnlock,this.onMasterUnlock,this),s.EventMgr.on(a.GlobalEvent.MasteryLvChange,this.onMasterLvchange,this),s.EventMgr.on(a.GlobalEvent.AssetItemChange+a.ASSET_TYPE.Diamond,this.onDiamondChange,this),s.EventMgr.on(a.GlobalEvent.AssetItemChange+a.ASSET_TYPE.Sp,this.onSpCountChange,this)},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.onMasterUnlock=function(e){this.currSelectId==e&&this.info.refresh();var t=this.items[e];t.refreshStatus(),t.refreshLinkLineStatus(),this.refreshBtnStatus()},t.prototype.onMasterLvchange=function(e){this.currSelectId==e&&this.info.refresh();var t=this.items[e];t.refreshStatus(),t.refreshLinkLineStatus(),this.refreshBtnStatus()},t.prototype.onSpCountChange=function(){this.refreshSpCount()},t.prototype.refreshSpCount=function(){var e=c.default.instance.storageData.heroSp,t=h.default.Instance.get(this.currSelectId);this.spLabel.string=""+e,e<t.costSp?(this.spLabel.node.color=l.COLOR_RED,this.enhancePrice.node.color=l.COLOR_RED):(this.spLabel.node.color=l.COLOR_WHITE,this.enhancePrice.node.color=l.COLOR_WHITE)},t.prototype.onDiamondChange=function(){this.refreshDiamond()},t.prototype.refreshDiamond=function(){var e=c.default.instance.storageData.diamond;this.resetPrice.node.color=e<h.MASTERY_RESET_PRICE?l.COLOR_RED:l.COLOR_WHITE},t.prototype.setCurrInfo=function(e){this.currSelectId=e,this.info.masteryId=e,this.info.refresh(),this.refreshBtnStatus();var t=h.default.Instance.get(e);this.enhancePrice.string=""+t.costSp},t.prototype.refreshBtnStatus=function(){var e=h.default.Instance.getResetEnable();this.btnReset.getComponentInChildren(cc.Sprite).setState(e?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY);var t=h.default.Instance.getData(this.currSelectId);if(this.btnEnhance.active=t&&t.status==h.MASTERY_STATUS.Open,this.btnEnhance.active){var n=c.default.instance.storageData.heroSp,o=h.default.Instance.get(this.currSelectId);this.btnEnhance.getComponentInChildren(cc.Sprite).setState(n<o.costSp?cc.Sprite.State.GRAY:cc.Sprite.State.NORMAL)}},t.prototype.onClickReset=function(){h.default.Instance.getResetEnable()&&p.default.open()},t.prototype.onClickEnhance=function(){h.default.Instance.lvup(this.currSelectId)&&(this.info.refresh(),this.refreshSpCount())},t.prototype.onClickHelper=function(){f.default.open()},r([_(cc.Label)],t.prototype,"spLabel",void 0),r([_(cc.Node)],t.prototype,"content",void 0),r([_(g.default)],t.prototype,"info",void 0),r([_(cc.Node)],t.prototype,"btnReset",void 0),r([_(cc.Label)],t.prototype,"resetPrice",void 0),r([_(cc.Node)],t.prototype,"btnEnhance",void 0),r([_(cc.Label)],t.prototype,"enhancePrice",void 0),r([_(cc.Node)],t.prototype,"btnHelper",void 0),r([v],t)}(d.default);n.default=b,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr","../../../Mgr/ItemMgr":"ItemMgr","../../../Mgr/StorageMgr":"StorageMgr","../../../Tool/Tool":"Tool","../../CommonUI/UIItemPool":"UIItemPool","../Mastery/MgrMastery":"MgrMastery","./UIMasterResetView":"UIMasterResetView","./UIMasteryHelperView":"UIMasteryHelperView","./UIMasteryInfo":"UIMasteryInfo","./UIMasteryItem":"UIMasteryItem"}],UIMineResearch:[function(e,t,n){"use strict";cc._RF.push(t,"3991fI8fO1HA5S5vGvLPei6","UIMineResearch");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),c=e("../../../Bundle1_Loading/Scripts/Main/Main_PanelOpen"),u=e("../../../Bundle1_Loading/Scripts/Main/Mgr/Mine/MineBtnRedPoint"),d=e("../Mgr/BundleMgr"),h=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),p=e("../../../Bundle1_Loading/Scripts/Mgr/StorageMgr"),f=e("../../../Bundle1_Loading/Scripts/Mgr/TimeMgr"),g=e("../../../Bundle1_Loading/Scripts/Platform/Platform"),y=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),m=e("../Config/GameData"),v=e("../Main/Mgr/GuideCore/GuideEnums"),_=e("../Main/Mgr/GuideCore/GuideMgr"),b=e("./ResearchItem"),S=e("./ResearchMgr"),M=cc._decorator,C=M.ccclass,T=M.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.researchItemRoot=null,t.btnLevelUp=null,t.upgrading=null,t.btnComplete=null,t.researchItem=null,t.talentName=null,t.time=null,t.currentDesc=null,t.nextDesc=null,t.cubeCount=null,t.levelUpConsume=null,t.nextDescNode=null,t.tipPreResearch=null,t.tipMax=null,t.researchCD=null,t.diamondConsume=null,t.btnAd=null,t.adCount=null,t.researchName=null,t.mat=[],t.icons=[],t.elapsedTime=1,t.refreshDiamondTime=0,t._redPointPre=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;h.EventMgr.on("researchItemClick",function(t,n,o,i){e.refreshItemStatus(i),e.refreshInfo(t,n,o,i)},this),this.updateShow(),this.unschedule(this.updateShow),this.schedule(this.updateShow,1),this.adCount.string=4-p.default.instance.storageData.researchAdCount+"/4"},t.prototype.onEnable=function(){_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchUpgradeMineButton)},t.prototype.start=function(){this.initResearchItemData(),this.upgrading.active=!1,this.refreshUI(),this.cubeCount.string=p.default.instance.storageData.mineCube.toString(),y.Tool.addClickEvent(this.btn_close,this.onCloseBtnClick,this),y.Tool.addClickEvent(this.btnLevelUp,this.onBtnLevelUpClick,this),y.Tool.addClickEvent(this.btnComplete,this.onBtnCompletClick,this),y.Tool.addClickEvent(this.btnAd,this.onBtnAdClick,this),this.judeShowRedPoint()},t.prototype.initResearchItemData=function(){for(var e=this.researchItemRoot.getChildByName("itemNode"),t=0;t<e.childrenCount;t++){var n=e.children[t].getComponent(b.default);if(n){var o=S.default.Instance.getResearchItemLevel(t),i=S.default.Instance.isUnlock(t),r=S.default.Instance.getResearchInfo(t);n.setData(t,o,i,r)}}},t.prototype.refreshItemStatus=function(e){for(var t=this.researchItemRoot.getChildByName("itemNode"),n=0;n<t.childrenCount;n++){var o=t.children[n];e.name!==o.getComponent(b.default).name&&o.getComponent(b.default).clearSelectedStatus()}},t.prototype.refreshCubeCount=function(){this.cubeCount.string=p.default.instance.storageData.mineCube.toString()},t.prototype.refreshInfo=function(e,t,n,o){var i=o.getResearchItemData();this.tipPreResearch.active=!n,this.tipMax.active=S.default.Instance.isMaxLevel(e),this.btnLevelUp.active=n&&!S.default.Instance.isMaxLevel(e),this.time.node.active=!S.default.Instance.isMaxLevel(e)&&n,this.time.node.active&&(this.time.string=f.default.instance.TimeFormat(6e4*i[t].Time)),this.nextDescNode.active=n&&!S.default.Instance.isMaxLevel(e),n?S.default.Instance.isMaxLevel(e)?(this.nextDesc.active=!1,101===i[0].AdditionType?this.currentDesc.string=i[i.length-1].Desc+i[i.length-1].Addition:this.currentDesc.string=i[i.length-1].Desc+100*i[i.length-1].Addition+"%"):0===t?101===i[0].AdditionType?(this.currentDesc.string=i[0].Desc+0,this.nextDesc.string=i[0].Desc+i[0].Addition):(this.currentDesc.string=i[0].Desc+0+"%",this.nextDesc.string=i[0].Desc+100*i[0].Addition+"%"):101===i[0].AdditionType?(this.currentDesc.string=i[t-1].Desc+i[t-1].Addition,this.nextDesc.string=i[t].Desc+i[t].Addition):(this.currentDesc.string=i[t-1].Desc+100*i[t-1].Addition+"%",this.nextDesc.string=i[t].Desc+100*i[t].Addition+"%"):101===i[0].AdditionType?this.currentDesc.string=i[i.length-1].Desc+i[i.length-1].Addition:this.currentDesc.string=i[i.length-1].Desc+100*i[i.length-1].Addition+"%",this.talentName.string=o.getResearchItemData()[0].Name,S.default.Instance.isMaxLevel(e)||(this.levelUpConsume.string=o.getResearchItemData()[t].Consume.toString()),this.researchItem.setData(e,t,n,i),this.researchItem.icon.spriteFrame=o.icon.spriteFrame,this.refreshBtnLevelUpStatus()},t.prototype.update=function(){},t.prototype.updateShow=function(){if(null!==S.default.Instance.getLevelUpItemData()){this.getCountDown()>0?(this.researchCD.string=f.default.instance.TimeFormat(this.getCountDown()),this.diamondConsume.string=S.default.Instance.getDiamondConsume(this.getCountDown()/1e3)):(this.upgrading.active=!1,this.levelUp());var e=p.default.instance.storageData.diamond;this.btnComplete.active&&Number(this.diamondConsume.string)>e?this.btnComplete.getComponent(cc.Sprite).setMaterial(0,this.mat[1]):this.btnComplete.getComponent(cc.Sprite).setMaterial(0,this.mat[0])}},t.prototype.onCloseBtnClick=function(){this.unschedule(this.updateShow),this.node.destroy();var e=S.default.Instance.getAtkAddition();console.log("\u653b\u51fb\u52a0\u6210\uff1a",e,S.default.Instance.getResearchSpeedAddition()),h.EventMgr.event(l.EventType.Research_RedPoint)},t.prototype.onBtnCompletClick=function(){var e=Number(this.diamondConsume.string);p.default.instance.storageData.diamond<e||(p.default.instance.reduceDiamond(e),this.upgrading.active=!1,this.levelUp())},t.prototype.refreshUI=function(){var e=this.researchItemRoot.getChildByName("itemNode"),t=S.default.Instance.getLevelUpItemData();if(null!==t){this.upgrading.active=!0,this.btnAd.active=p.default.instance.storageData.researchAdCount<4;var n=S.default.Instance.getResearchInfo(t.id);this.researchName.string=n[0].Name;var o=e.children[t.id].getComponent(b.default);this.refreshInfo(t.id,t.level,!0,o),o.setSelectedStatus(!0)}else{var i=e.children[p.default.instance.storageData.lastResearchUpIndex].getComponent(b.default);this.refreshInfo(i.getId(),i.getLevel(),!0,i),i.setSelectedStatus(!0)}},t.prototype.getCountDown=function(){this.researchItem.getId(),this.researchItem.getLevel();var e=S.default.Instance.getLevelUpItemData(),t=S.default.Instance.getResearchInfo(e.id),n=p.default.instance.storageData.researchData,o=f.default.instance.getNowTime();return(n[e.id].time+6e4*t[e.level].Time-o)/(1+S.default.Instance.getResearchSpeedAddition())},t.prototype.reduceBurialTime=function(){p.default.instance.storageData.researchData[S.default.Instance.getLevelUpItemData().id].time-=18e5},t.prototype.refreshBtnLevelUpStatus=function(){var e=this.researchItem.getId();if(!S.default.Instance.isMaxLevel(e)){var t=this.researchItem.getLevel(),n=this.researchItem.getResearchItemData();this.btnLevelUp.getComponent(cc.Sprite).setMaterial(0,this.mat[p.default.instance.storageData.mineCube>=n[t].Consume?0:1])}},t.prototype.onBtnLevelUpClick=function(){console.log("\u662f\u8fd9\u91cc ");var e=this.researchItem.getId(),t=this.researchItem.getLevel(),n=this.researchItem.getResearchItemData(),o=p.default.instance.storageData.researchData;if(p.default.instance.storageData.mineCube>=n[t].Consume){var i=f.default.instance.getNowTime();o[e].time=i,o[e].isLevelUp=!0,o[e].sumTimeM=n[t].Time,p.default.instance.saveResearchData(p.default.instance.storageData.researchData),p.default.instance.storageData.mineCube-=n[t].Consume,p.default.instance.saveMineCubeCount(p.default.instance.storageData.mineCube),this.upgrading.active=!0,this.researchName.string=n[0].Name,this.btnAd.active=p.default.instance.storageData.researchAdCount<4,this.diamondConsume.string=S.default.Instance.getDiamondConsume(n[t].Time),this.refreshCubeCount(),this.judeShowRedPoint(),p.default.instance.changeLastResearchUpIndex(e)}else g.default.instance.showToast("\u77ff\u77f3\u4e0d\u8db3")},t.prototype.levelUp=function(){var e=S.default.Instance.getLevelUpItemData(),t=S.default.Instance.getResearchInfo(e.id),n=p.default.instance.storageData.researchData;n[e.id].level++,p.default.instance.saveResearchData(p.default.instance.storageData.researchData);var o=this.researchItemRoot.getChildByName("itemNode");o.children[e.id].getComponent(b.default).setData(e.id,e.level,!0,t),this.refreshInfo(e.id,e.level,!0,o.children[e.id].getComponent(b.default)),S.default.Instance.isMaxLevel(e.id)&&this.initResearchItemData(),n[e.id].isLevelUp=!1,p.default.instance.saveResearchData(p.default.instance.storageData.researchData);var i,r=t[0].Name;i=101===t[0].AdditionType?t[e.level-1].Desc+t[e.level-1].Addition:t[e.level-1].Desc+100*t[e.level-1].Addition+"%",h.EventMgr.event(l.EventType.Research_Buff_Update,t[0].AdditionType),c.default.showResearchCompletePanel(r,i,this.icons[t[0].Icon]),p.default.instance.researchUpgrade(),this.judeShowRedPoint()},t.prototype.onBtnAdClick=function(){var e=this;g.default.instance.showVideo(function(){p.default.instance.storageData.researchAdCount++,p.default.instance.saveResearchAdCount(p.default.instance.storageData.researchAdCount),e.adCount.string=4-p.default.instance.storageData.researchAdCount+"/4",4===p.default.instance.storageData.researchAdCount&&(e.btnAd.active=!1),e.reduceBurialTime(),m.default.trackEvent(m.TrackEventKey.key["\u7814\u7a76\u6240\u52a0\u901f\u5e7f\u544a"])},null)},t.prototype.judeShowRedPoint=function(){var e=this,t=u.default.instance.judeShowRedPoint(!0);this.researchItemRoot.getChildByName("itemNode").children.some(function(n,o){null!=t.jsTime?e.changeItemRedPointState(!1,n):S.default.Instance.isUnlock(o)&&p.default.instance.storageData.researchData[o].level<p.default.instance.storageData.researchData[o].maxLevel&&S.default.Instance.getResearchInfo(o)[p.default.instance.storageData.researchData[o].level].Consume<=p.default.instance.storageData.mineCube?e.changeItemRedPointState(!0,n):e.changeItemRedPointState(!1,n)})},t.prototype.changeItemRedPointState=function(e,t){return a(this,void 0,void 0,function(){var n;return s(this,function(o){switch(o.label){case 0:return!e||t.getChildByName("redpoint")?[3,3]:this._redPointPre?[3,2]:(n=this,[4,new Promise(function(e){return d.default.getBundleData(l.BundleName.Mine).loadRes("Research/redpoint",cc.Prefab,function(t,n){return e(n)})})]);case 1:n._redPointPre=o.sent(),o.label=2;case 2:return t.addChild(cc.instantiate(this._redPointPre)),[3,4];case 3:if(!e&&!t.getChildByName("redpoint"))return[2];o.label=4;case 4:return t.getChildByName("redpoint").active=e,[2]}})})},r([T(cc.Node)],t.prototype,"btn_close",void 0),r([T(cc.Node)],t.prototype,"researchItemRoot",void 0),r([T(cc.Node)],t.prototype,"btnLevelUp",void 0),r([T(cc.Node)],t.prototype,"upgrading",void 0),r([T(cc.Node)],t.prototype,"btnComplete",void 0),r([T(b.default)],t.prototype,"researchItem",void 0),r([T(cc.Label)],t.prototype,"talentName",void 0),r([T(cc.Label)],t.prototype,"time",void 0),r([T(cc.Label)],t.prototype,"currentDesc",void 0),r([T(cc.Label)],t.prototype,"nextDesc",void 0),r([T(cc.Label)],t.prototype,"cubeCount",void 0),r([T(cc.Label)],t.prototype,"levelUpConsume",void 0),r([T(cc.Node)],t.prototype,"nextDescNode",void 0),r([T(cc.Node)],t.prototype,"tipPreResearch",void 0),r([T(cc.Node)],t.prototype,"tipMax",void 0),r([T(cc.Label)],t.prototype,"researchCD",void 0),r([T(cc.Label)],t.prototype,"diamondConsume",void 0),r([T(cc.Node)],t.prototype,"btnAd",void 0),r([T(cc.Label)],t.prototype,"adCount",void 0),r([T(cc.Label)],t.prototype,"researchName",void 0),r([T([cc.Material])],t.prototype,"mat",void 0),r([T([cc.SpriteFrame])],t.prototype,"icons",void 0),r([C],t)}(cc.Component);n.default=k,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":"EnumTypes","../../../Bundle1_Loading/Scripts/Main/Main_PanelOpen":"Main_PanelOpen","../../../Bundle1_Loading/Scripts/Main/Mgr/Mine/MineBtnRedPoint":"MineBtnRedPoint","../../../Bundle1_Loading/Scripts/Mgr/EventMgr":"EventMgr","../../../Bundle1_Loading/Scripts/Mgr/StorageMgr":"StorageMgr","../../../Bundle1_Loading/Scripts/Mgr/TimeMgr":"TimeMgr","../../../Bundle1_Loading/Scripts/Platform/Platform":"Platform","../../../Bundle1_Loading/Scripts/Tool/Tool":"Tool","../Config/GameData":"GameData","../Main/Mgr/GuideCore/GuideEnums":"GuideEnums","../Main/Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/BundleMgr":"BundleMgr","./ResearchItem":"ResearchItem","./ResearchMgr":"ResearchMgr"}],UIMine:[function(e,t,n){"use strict";cc._RF.push(t,"92983NkMyxBh6wM5JJcjw04","UIMine");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),s=e("../../../Bundle1_Loading/Scripts/Main/Main_PanelOpen"),l=e("../Mgr/BundleMgr"),c=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),u=e("../../../Bundle1_Loading/Scripts/Mgr/SoundMgr"),d=e("../../../Bundle1_Loading/Scripts/Mgr/StorageMgr"),h=e("../../../Bundle1_Loading/Scripts/Mgr/TimeMgr"),p=e("../../../Bundle1_Loading/Scripts/Platform/Platform"),f=e("../../../Bundle1_Loading/Scripts/Res/comp/CoinComp"),g=e("../../../Bundle1_Loading/Scripts/Res/comp/DiamondComp"),y=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),m=e("../Config/GameData"),v=e("../Main/Mgr/GuideCore/GuideEnums"),_=e("../Main/Mgr/GuideCore/GuideMgr"),b=e("../Main/Mgr/GuideCore/GuideTouch"),S=e("./MineItem"),M=e("./MineMgr"),C=cc._decorator,T=C.ccclass,k=C.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelMineDeepth=null,t.mineItemPrefab=null,t.json=[],t.moveDeepth=0,t.clickedAroundItems=[],t.toggle_drill=null,t.toggle_shovel=null,t.toggle_boom=null,t.shovelCount=null,t.drillCount=null,t.boomCount=null,t.cubeCount=null,t.shovelIcon=null,t.drillIcon=null,t.boomIcon=null,t.cubeIcon=null,t.btnAdDrill=null,t.AdDrillCount=null,t.btnAdBoom=null,t.AdBoomCount=null,t.btnAdShovel=null,t.AdShovelCount=null,t.btnTips=null,t.effectNode=null,t.effectNode1=null,t.effectNode2=null,t.adDrillBody=null,t.adBoomBody=null,t.adShovelBody=null,t.equipNode=null,t.mat=[],t.cl_1=null,t.cl_2=null,t.countEffectPre=null,t.countEffectPool=new cc.NodePool,t.isHasSelectedItem=!1,t.isUseBoom=!1,t.isUseDrill=!1,t.item=null,t._pos=null,t.isMoving=!1,t.saveData=[],t.shovelRecoveryTime=600,t.shovelRecoveryTime1=600,t._time=1,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){var e=this;console.log("\u77ff\u6df1\uff1a",d.default.instance.storageData.mineDeepth),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),c.EventMgr.on(a.EventType.Mine_Boom_Update,this.refreshBoomCount,this),c.EventMgr.on(a.EventType.Mine_Drill_Update,this.refreshDrillCount,this),c.EventMgr.on(a.EventType.Mine_Cube_Update,this.refreshCubeCount,this),c.EventMgr.on(a.EventType.Mine_Shovel_Update,this.refreshShovelCount,this),c.EventMgr.on(a.EventType.Mine_BoomAdCount_Update,this.refreshBtnAdBoomStatus,this),c.EventMgr.on(a.EventType.Mine_DrillAdCount_Update,this.refreshBtnAdDrillStatus,this),c.EventMgr.on(a.EventType.Mine_ShovelAdCount_Update,this.refreshBtnAdShovelStatus,this),this.btnBack=this.node.getChildByName("btn_backMain"),this.mineBounder=this.node.getChildByName("bound"),this.mineRoot=this.mineBounder.getChildByName("mineRoot"),this.mineLine=this.mineBounder.getChildByName("line"),this.labelCountDown=this.node.getChildByName("countDown").getComponent(cc.Label),this.labelCountDown.node.active=d.default.instance.storageData.mineHammer<d.default.instance.storageData.mineHammerLimit,this.labelShovelCount=this.node.getChildByName("input").getChildByName("ShovelCount").getComponent(cc.Label),this.toggle_shovel.isChecked=!0,this.drillIconPos=this.drillIcon.node.getPosition(),this.boomIconPos=this.boomIcon.node.getPosition(),this.shovelIconPos=this.shovelIcon.node.getPosition(),n.instance=this,c.EventMgr.on("mineItemClick",function(t,n,o){if(!(e.isMoving||e.isUseBoom||e.isUseDrill)){if(e.clickedItemPos=new cc.Vec2(t,n),e.toggle_drill.isChecked&&d.default.instance.storageData.mineDrill>0&&!e.isUseDrill){e.isUseDrill=!0;var i=e.clickedItemPos.clone(),r=o;e.setDrillHightLight(i),e.useDrill(i),h.default.instance.scheduleOnce(function(){e.clearVisiableAreaHightLight()},.1),M.default.Instance.BoomEffect(e.effectNode,"bit",new cc.Vec2(i.x,-47),function(){e.handleLogic(r.node)})}else if(e.toggle_boom.isChecked&&d.default.instance.storageData.mineBoom>0&&!e.isUseBoom){e.isUseBoom=!0;var s=e.clickedItemPos.clone(),l=o;M.default.Instance.BoomEffect(e.effectNode2,"play",s,function(){e.setBoomHighLight(s);var t=e.clearVisiableAreaHightLight();e.useBoom(s,t),M.default.Instance.BoomEffect(e.effectNode,"boom",s,function(){}),e.handleLogic(l.node)})}else e.toggle_shovel.isChecked&&(M.default.Instance.BoomEffect(e.effectNode1,"play",e.clickedItemPos),c.EventMgr.event(a.GlobalEvent.QuestCommit,a.QUEST_ACTIVE_ID.MineUsePickax),e.handleLogic(o.node));d.default.instance.saveMineCacheData(e.getTopToBottomAreaItemData())}},this),this.AdBoomCount.string=2-d.default.instance.storageData.boomAdCount+"/2",this.AdShovelCount.string=2-d.default.instance.storageData.shovelAdCount+"/2"},t.prototype.start=function(){var e=this;this.initMineDeepth(),this.initPropCount(),y.Tool.addClickEvent(this.btnBack,this.onBtnBackClick,this),y.Tool.addClickEvent(this.btnTips,function(){s.default.showMineTipPanel("MineTips")},this),this.toggle_shovel.node.on("toggle",this.onToggleShovelClick,this),this.toggle_drill.node.on("toggle",this.onToggleDrillClick,this),this.toggle_boom.node.on("toggle",this.onToggleBoomClick,this),this.toggle_drill.node.on(cc.Node.EventType.TOUCH_START,function(){this.toggle_drill.isChecked=!0,this.toggle_shovel.isChecked=!1,this.toggle_boom.isChecked=!1,this.toggle_drill.node.setSiblingIndex(6)},this),this.toggle_drill.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.clearVisiableAreaHightLight();var n=t.getLocation(),o=e.drillIcon.node.parent.convertToNodeSpaceAR(n),i=e.mineBounder.convertToNodeSpaceAR(n);e.drillIcon.node.setPosition(o),e.drillIcon.node.scale=2,e.touchItemPos=e.getSelectedItem(i),e.setDrillHightLight(e.touchItemPos)},this),this.toggle_drill.node.on(cc.Node.EventType.TOUCH_END,function(){e.drillIcon.node.scale=1,e.drillIcon.node.setPosition(e.drillIconPos)},this),this.toggle_drill.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){var e=this;this.toggle_drill.isChecked=!1,this.toggle_shovel.isChecked=!0,this.drillIcon.node.scale=1,this.clearVisiableAreaHightLight(),this.drillIcon.node.setPosition(this.drillIconPos);var t=this.touchItem;if(this.touchItem&&!this.isMoving&&!this.isUseDrill){var n=this.touchItemPos.clone();this.useDrill(n),this.isUseDrill=!0,M.default.Instance.BoomEffect(this.effectNode,"bit",new cc.Vec2(n.x,-47),function(){e.handleLogic(t)})}},this),this.toggle_boom.node.on(cc.Node.EventType.TOUCH_START,function(){this.toggle_boom.isChecked=!0,this.toggle_drill.isChecked=!1,this.toggle_shovel.isChecked=!1,this.toggle_boom.node.setSiblingIndex(6)},this),this.toggle_boom.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.clearVisiableAreaHightLight();var n=t.getLocation(),o=e.boomIcon.node.parent.convertToNodeSpaceAR(n),i=e.mineBounder.convertToNodeSpaceAR(n);e.boomIcon.node.setPosition(o),e.boomIcon.node.scale=2,e.touchItemPos=e.getSelectedItem(i),e.setBoomHighLight(e.touchItemPos)},this),this.toggle_boom.node.on(cc.Node.EventType.TOUCH_END,function(){e.boomIcon.node.scale=1,e.boomIcon.node.setPosition(e.boomIconPos)},this),this.toggle_boom.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){var e=this;this.toggle_shovel.isChecked=!0,this.toggle_boom.isChecked=!1,this.toggle_drill.isChecked=!1,this.boomIcon.node.scale=1;var t,n=this.clearVisiableAreaHightLight();if(this.boomIcon.node.setPosition(this.boomIconPos),this.touchItem&&!this.isMoving&&!this.isUseBoom){this.isUseBoom=!0;var o=this.touchItemPos.clone();t||(t=this.touchItem),M.default.Instance.BoomEffect(this.effectNode2,"play",o,function(){e.useBoom(o,n),M.default.Instance.BoomEffect(e.effectNode,"boom",o),e.handleLogic(t)})}},this),this.toggle_shovel.node.on(cc.Node.EventType.TOUCH_START,function(){this.toggle_shovel.node.setSiblingIndex(6)},this),this.toggle_shovel.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e.toggle_shovel.isChecked=!0,e.toggle_drill.isChecked=!1,e.toggle_boom.isChecked=!1,e.clearVisiableAreaHightLight();var n=t.getLocation(),o=e.shovelIcon.node.parent.convertToNodeSpaceAR(n),i=e.mineBounder.convertToNodeSpaceAR(n);e.shovelIcon.node.setPosition(o),e.shovelIcon.node.scale=2,e.touchItemPos=e.getSelectedItem(i),e.setShovelHightLight(e.touchItem)},this),this.toggle_shovel.node.on(cc.Node.EventType.TOUCH_END,function(){e.shovelIcon.node.scale=1,e.shovelIcon.node.setPosition(e.shovelIconPos)},this),this.toggle_shovel.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){this.shovelIcon.node.scale=1,this.clearVisiableAreaHightLight(),this.shovelIcon.node.setPosition(this.shovelIconPos),this.touchItem&&!this.isMoving&&this.useShovel(this.touchItem)},this),y.Tool.addClickEvent(this.btnAdDrill,function(){d.default.instance.storageData.drillAdCount>=2?p.default.instance.showToast("\u6682\u65e0\u5e7f\u544a\u6b21\u6570"):p.default.instance.showVideo(function(){d.default.instance.storageData.drillAdCount++,d.default.instance.saveDrillAdCount(d.default.instance.storageData.drillAdCount),e.AdDrillCount.string=2-d.default.instance.storageData.drillAdCount+"/2",d.default.instance.storageData.mineDrill++,d.default.instance.saveMineDrill(d.default.instance.storageData.mineDrill),m.default.trackEvent(m.TrackEventKey.key["\u77ff\u5c71\u94bb\u5934\u5e7f\u544a"])},function(){})},this),y.Tool.addClickEvent(this.btnAdBoom,function(){d.default.instance.storageData.boomAdCount>=2?p.default.instance.showToast("\u6682\u65e0\u5e7f\u544a\u6b21\u6570"):p.default.instance.showVideo(function(){d.default.instance.storageData.boomAdCount++,d.default.instance.saveBoomAdCount(d.default.instance.storageData.boomAdCount),e.AdBoomCount.string=2-d.default.instance.storageData.boomAdCount+"/2",d.default.instance.storageData.mineBoom++,d.default.instance.saveMineBoom(d.default.instance.storageData.mineBoom),m.default.trackEvent(m.TrackEventKey.key["\u77ff\u5c71\u70b8\u9e21\u5e7f\u544a"])},function(){})},this),y.Tool.addClickEvent(this.btnAdShovel,function(){d.default.instance.storageData.shovelAdCount>=2?p.default.instance.showToast("\u6682\u65e0\u5e7f\u544a\u6b21\u6570"):p.default.instance.showVideo(function(){d.default.instance.storageData.shovelAdCount++,d.default.instance.saveShovelAdCount(d.default.instance.storageData.shovelAdCount),e.AdShovelCount.string=2-d.default.instance.storageData.shovelAdCount+"/2",d.default.instance.storageData.mineHammer+=15,d.default.instance.saveMineHammer(d.default.instance.storageData.mineHammer),m.default.trackEvent(m.TrackEventKey.key["\u77ff\u5c71\u9504\u5934\u5e7f\u544a"])},function(){})},this)},t.prototype.handleLogic=function(e){this.refreshAllPropCount(),this.unlockMineItem(this.getNodeAroundNodes(e)),this.getMoveDeepth_(),this.moveMineRoot();for(var t=0;t<this.mineRoot.childrenCount;t++)this.mineRoot.children[t].getComponent(S.default).isCheck=!1;this.isUseBoom=!1,this.isUseDrill=!1,c.EventMgr.event(a.GlobalEvent.QuestCommit,a.QUEST_ACTIVE_ID.MineDig,d.default.instance.storageData.digMineTotalCount)},t.prototype.onEnable=function(){var e=this;M.default.Instance.initJson(function(){e.jsonData=M.default.Instance.getJson("mineStart"),e.jsonData1=M.default.Instance.getJson("mineStart0"),e.jsonData2=M.default.Instance.getJson("mineStart1"),e.initMineData()})},t.prototype.initMineData=function(){d.default.instance.storageData.mineCacheData.length>0?this.addStage(M.default.Instance.arrFormat(d.default.instance.storageData.mineCacheData)):(this.addStage(this.jsonData),this.addStage(this.jsonData1),this.addStage(this.jsonData2))},t.prototype.addStage=function(e){if(e){var t;t=0==this.mineRoot.children.length?0:this.mineRoot.children[this.mineRoot.children.length-1].y-47;for(var o=0;o<e.length;o++)for(var i=0;i<e[o].length;i++){var r=cc.instantiate(this.mineItemPrefab);r.setParent(this.mineRoot),r.name=o.toString()+i.toString();var a=e[o][i],s=a[0],l=a[1],c=a[2],u=r.getComponent(S.default),h={type:s,status:c,reward:l};r.x=95*i-237.5,r.y=-47-94*o+t,d.default.instance.storageData.mineDeepth<50&&6===h.reward?u.setData(0,h.reward,h.status):u.setData(h.type,h.reward,h.status),5!=o||3!=i||n.isAdd||(n.isAdd=!0,r.getComponent(b.default)||r.addComponent(b.default).setId(v.SpecialGuideEnum.TouchMineItem),this.scheduleOnce(function(){_.default.instance.checkSpecial(v.SpecialGuideEnum.TouchMineItem)},.1))}}},t.prototype.initMineDeepth=function(){this.labelMineDeepth.string=d.default.instance.storageData.mineDeepth.toString()+"m"},t.prototype.initPropCount=function(){this.btnAdDrill.active=d.default.instance.storageData.mineDrill<=0,this.AdDrillCount.string=2-d.default.instance.storageData.drillAdCount+"/2",d.default.instance.storageData.drillAdCount>=2?(this.btnAdDrill.getComponent(cc.Sprite).setMaterial(0,this.mat[1]),this.adDrillBody.active=!1):(this.btnAdDrill.getComponent(cc.Sprite).setMaterial(0,this.mat[0]),this.adDrillBody.active=!0),this.btnAdBoom.active=d.default.instance.storageData.mineBoom<=0,d.default.instance.storageData.boomAdCount>=2?(this.btnAdBoom.getComponent(cc.Sprite).setMaterial(0,this.mat[1]),this.adBoomBody.active=!1):(this.btnAdBoom.getComponent(cc.Sprite).setMaterial(0,this.mat[0]),this.adBoomBody.active=!0),this.btnAdShovel.active=d.default.instance.storageData.mineHammer<=0,d.default.instance.storageData.shovelAdCount>=2?(this.btnAdShovel.getComponent(cc.Sprite).setMaterial(0,this.mat[1]),this.adShovelBody.active=!1):(this.btnAdShovel.getComponent(cc.Sprite).setMaterial(0,this.mat[0]),this.adShovelBody.active=!0),this.toggle_drill.node.active=d.default.instance.storageData.mineDrill>0,this.toggle_boom.node.active=d.default.instance.storageData.mineBoom>0,this.toggle_shovel.node.active=d.default.instance.storageData.mineHammer>0,this.labelShovelCount.string=d.default.instance.storageData.mineHammer+"/"+d.default.instance.storageData.mineHammerLimit,this.shovelCount.string=d.default.instance.storageData.mineHammer.toString(),this.drillCount.string=d.default.instance.storageData.mineDrill.toString(),this.boomCount.string=d.default.instance.storageData.mineBoom.toString(),this.cubeCount.string=d.default.instance.storageData.mineCube.toString()},t.prototype.refreshMineData=function(){},t.prototype.getSelectedItem=function(e){this.touchItem=null;for(var t=0;t<42;t++){var n=this.mineRoot.children[t],o=this.mineBounder.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.Vec2.ZERO));if(o.sub(e).mag()<=66.7)return this.touchItem=n,o}return cc.Vec2.ZERO},t.prototype.clearVisiableAreaHightLight=function(){for(var e=[],t=0;t<this.mineRoot.childrenCount;t++){var n=this.mineRoot.children[t];n.getComponent(S.default).highlightsp_g.active&&e.push(n),n.getComponent(S.default).cancelHightLight()}return e},t.prototype.useDrill=function(e){var t=this;console.log("\u4f7f\u7528\u94bb\u5b50...");for(var n=[],o=0;o<42;o++){var i=this.mineRoot.children[o],r=i.parent.parent.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.Vec2.ZERO));r.x===e.x&&n.push(i),-611!==M.default.Instance.roundToDecimal(r.y,0)||r.x!==e.x+95&&r.x!==e.x-95||n.push(i)}var s=["stone3","stone4"],l=["stone1","stone2"],u=function(e){var o=n[e],i=o.getComponent(S.default),r=e>=n.length-3?.1*6:.1*e;h.scheduleOnce(function(){i.handleReward(i.rewardType);var r="";switch(i.mineType){case 1:r=y.Tool.getRandomInArray(s);break;case 2:case 3:r=y.Tool.getRandomInArray(l)}""!=r&&M.default.Instance.BoomEffect(t.effectNode,r,y.Tool.convertToNodeSpaceAR(t.mineBounder,o)),o.getComponent(S.default).setData(0,0,0),e===n.length-2&&M.default.Instance.BoomEffect(t.effectNode,"boom",y.Tool.convertToNodeSpaceAR(t.mineBounder,o)),e>=n.length-1&&(d.default.instance.storageData.mineDrill--,d.default.instance.saveMineDrill(d.default.instance.storageData.mineDrill),d.default.instance.storageData.digMineTotalCount+=n.length,d.default.instance.saveDigMineTotalCount(d.default.instance.storageData.digMineTotalCount),t.toggle_drill.isChecked&&(t.toggle_drill.isChecked=!1,t.toggle_shovel.isChecked=!0),c.EventMgr.event(a.GlobalEvent.QuestCommit,a.QUEST_ACTIVE_ID.MineUseDrill),c.EventMgr.event(a.GlobalEvent.QuestCommit,a.QUEST_ACTIVE_ID.MineDig,d.default.instance.storageData.digMineTotalCount))},r)},h=this;for(o=0;o<n.length;o++)u(o)},t.prototype.useShovel=function(e){if(e){var t=e.getComponent(S.default);-1!==t.status&&0!==t.mineType&&(d.default.instance.storageData.mineHammer--,d.default.instance.saveMineHammer(d.default.instance.storageData.mineHammer),t.refreshData(),M.default.Instance.BoomEffect(this.effectNode1,"play",y.Tool.convertToNodeSpaceAR(this.mineBounder,e)),this.handleLogic(e))}},t.prototype.setShovelHightLight=function(e){if(e){var t=e.getComponent(S.default);-1!==t.status&&0!==t.mineType?e.getComponent(S.default).setHightLightGreen():e.getComponent(S.default).setHightLightRed()}},t.prototype.setDrillHightLight=function(e){for(var t=0;t<42;t++){var n=this.mineRoot.children[t],o=n.parent.parent.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.Vec2.ZERO));o.x===e.x&&n.getComponent(S.default).setHightLightGreen(),-611!==M.default.Instance.roundToDecimal(o.y,0)||o.x!==e.x+95&&o.x!==e.x-95||n.getComponent(S.default).setHightLightGreen()}},t.prototype.useBoom=function(e,t){for(var n=t,o=0,i=0;i<n.length;i++){var r=n[i],s=r.getComponent(S.default);s.handleReward(r.getComponent(S.default).rewardType);var l=["stone1","stone2"],u="";switch(s.mineType){case 1:u=y.Tool.getRandomInArray(["stone3","stone4"]),o++;break;case 2:u=y.Tool.getRandomInArray(l);break;case 3:u=y.Tool.getRandomInArray(l),o++}""!=u&&M.default.Instance.BoomEffect(this.effectNode,u,y.Tool.convertToNodeSpaceAR(this.mineBounder,r)),s.setData(0,0,1),this.isUseBoom=!1}d.default.instance.storageData.mineBoom--,d.default.instance.saveMineBoom(d.default.instance.storageData.mineBoom),d.default.instance.storageData.digMineTotalCount+=o,d.default.instance.saveDigMineTotalCount(d.default.instance.storageData.digMineTotalCount),this.toggle_boom.isChecked&&(this.toggle_boom.isChecked=!1,this.toggle_shovel.isChecked=!0),c.EventMgr.event(a.GlobalEvent.QuestCommit,a.QUEST_ACTIVE_ID.MineUseBomb),c.EventMgr.event(a.GlobalEvent.QuestCommit,a.QUEST_ACTIVE_ID.MineDig,d.default.instance.storageData.digMineTotalCount)},t.prototype.setBoomHighLight=function(e){for(var t=0;t<this.mineRoot.childrenCount;t++){var n=this.mineRoot.children[t],o=n.parent.parent.convertToNodeSpaceAR(n.convertToWorldSpaceAR(cc.Vec2.ZERO));o.x>=e.x-190&&o.x<=e.x+190&&o.y===e.y&&n.getComponent(S.default).setHightLightGreen(),o.y>=e.y-188&&o.y<=e.y+188&&o.x===e.x&&n.getComponent(S.default).setHightLightGreen(),o.y!==e.y+94||o.x!==e.x+95&&o.x!==e.x-95||n.getComponent(S.default).setHightLightGreen(),o.y!==e.y-94||o.x!==e.x-95&&o.x!==e.x+95||n.getComponent(S.default).setHightLightGreen()}},t.prototype.moveMineRoot=function(){var e=this;if(!this.isMoving&&0!==this.moveDeepth){this.isMoving=!0;var t=cc.tween,n=this.mineRoot.y+this.moveDeepth;this.mineRoot.height+=n;var o=this.moveDeepth/94;cc.tween(this.cl_1).to(.6,{angle:360}).call(function(){e.cl_1.angle=0}).start(),cc.tween(this.cl_2).to(.6,{angle:360}).call(function(){e.cl_2.angle=0}).start(),t(this.mineRoot).to(.6,{y:n}).call(function(){e.isMoving=!1,e.checkStageMove(),e.moveDeepth=0,d.default.instance.saveMineDeepth(o+d.default.instance.storageData.mineDeepth),e.labelMineDeepth.string=d.default.instance.storageData.mineDeepth.toString()+"m",d.default.instance.saveMineCacheData(e.getTopToBottomAreaItemData()),e.getEmptyItemBehindMineLine().length>0&&(e.getMoveDeepth_(),e.moveMineRoot())}).start()}},t.prototype.checkStageMove=function(){for(var e=this.mineRoot.children.length-1;e>=0;e--)this.mineRoot.parent.convertToNodeSpaceAR(this.mineRoot.children[e].convertToWorldSpaceAR(cc.Vec2.ZERO)).y>0&&this.mineRoot.children[e].destroy();if(this.switchRootPos(this.mineRoot.children[this.mineRoot.children.length-1]).y+47>=-1e3)for(var t=0;t<2;t++){var n=y.Tool.randomInt(0,44),o=M.default.Instance.getJson("mine"+n);this.addStage(o)}},t.prototype.switchRootPos=function(e){return this.mineBounder.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.Vec2.ZERO))},t.prototype.getTopToBottomAreaItemData=function(){this.saveData.length=0;for(var e=0;e<this.mineRoot.childrenCount;e++){var t=this.mineRoot.children[e];if(this.switchRootPos(t).y<=-47){var n=[],o=t.getComponent(S.default);n.push(o.mineType),n.push(o.rewardType),n.push(o.status),this.saveData.push(n)}}return M.default.Instance.arrFormat(this.saveData),this.saveData},t.prototype.isMineItemInVisiableArea=function(e){for(var t=0;t<this.mineRoot.childrenCount;t++){var n=this.mineRoot.children[t];return this.switchRootPos(n).y<=-47&&this.switchRootPos(n).y>=-611&&e.x===n.x&&n.y===e.y}},t.prototype.getMoveDeepth=function(e){for(var t=e,n=94,o=42;o<this.mineRoot.childrenCount;o++){var i=this.mineRoot.children[o];i.y-t.y==-94&&0===i.getComponent(S.default).mineType&&i.x===t.x&&(t=i,n+=94)}return n},t.prototype.getMoveDeepth_=function(){var e=this.getEmptyItemBehindMineLine();if(0!==e.length){for(var t=[],n=0;n<e.length;n++){var o=e[n];t.push(this.getMoveDeepth(o))}t.sort(function(e,t){return e-t}),this.moveDeepth=t[t.length-1]}else this.moveDeepth=0},t.prototype.getEmptyItemBehindMineLine=function(){for(var e=[],t=0;t<this.mineRoot.childrenCount;t++){var n=this.mineRoot.children[t],o=y.Tool.convertToNodeSpaceAR(this.mineBounder,n),i=n.getComponent(S.default);-611===M.default.Instance.roundToDecimal(o.y,0)&&0===i.mineType&&1===i.status&&e.push(n)}return e},t.prototype.refreshShovelCount=function(){this.btnAdShovel.active=d.default.instance.storageData.mineHammer<=0,this.toggle_shovel.node.active=d.default.instance.storageData.mineHammer>0,this.labelShovelCount.string=d.default.instance.storageData.mineHammer+"/"+d.default.instance.storageData.mineHammerLimit,this.shovelCount.string=d.default.instance.storageData.mineHammer.toString()},t.prototype.refreshDrillCount=function(){this.btnAdDrill.active=d.default.instance.storageData.mineDrill<=0,this.toggle_drill.node.active=d.default.instance.storageData.mineDrill>0,this.drillCount.string=d.default.instance.storageData.mineDrill.toString()},t.prototype.refreshBoomCount=function(){this.btnAdBoom.active=d.default.instance.storageData.mineBoom<=0,this.toggle_boom.node.active=d.default.instance.storageData.mineBoom>0,this.boomCount.string=d.default.instance.storageData.mineBoom.toString()},t.prototype.refreshCubeCount=function(){this.cubeCount.string=d.default.instance.storageData.mineCube.toString()},t.prototype.refreshAllPropCount=function(){this.refreshShovelCount(),this.refreshDrillCount(),this.refreshBoomCount(),this.refreshCubeCount()},t.prototype.update=function(e){if(this._time+=e,this._time>=1){this._time=0;var t=d.default.instance.storageData.mineHammer,n=d.default.instance.storageData.mineHammerLimit;if(this.labelCountDown.node.active=d.default.instance.storageData.mineHammer<d.default.instance.storageData.mineHammerLimit,t<n){var o=h.default.instance.getNowTime(),i=d.default.instance.storageData.mineHammerRecovertTime-(o-d.default.instance.storageData.mineRecoveryTime)%d.default.instance.storageData.mineHammerRecovertTime;this.labelCountDown.string=h.default.instance.TimeFormat(i)}}},t.prototype.updateTimeLabel=function(){return 0===this.shovelRecoveryTime?(d.default.instance.storageData.mineHammer++,d.default.instance.saveMineHammer(d.default.instance.storageData.mineHammer),this.refreshShovelCount(),this.shovelRecoveryTime=this.shovelRecoveryTime1):this.shovelRecoveryTime--,this.shovelRecoveryTime},t.prototype.judgeCellIsbelowMineLine=function(e,t){var n=e.convertToWorldSpaceAR(cc.Vec2.ZERO),o=t.convertToWorldSpaceAR(cc.Vec2.ZERO),i=n.y-o.y;return Math.abs(i)>=47&&o.y>n.y},t.prototype.unlockMineItem=function(e){if(0!==e.length)for(var t=0;t<e.length;t++){var n=e[t],o=n.getComponent(S.default);if(0===o.mineType&&-1!==o.status&&!o.isCheck){o.isCheck=!0;var i=this.getNodeAroundNodes(n);this.unlockMineItem(i)}}},t.prototype.getNodeAroundNodes=function(e){var t=[];if(!e)return t;for(var n=0;n<this.mineRoot.childrenCount;n++){var o=this.mineRoot.children[n],i=o.getComponent(S.default);o.parent.parent.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.Vec2.ZERO)),o.y!==e.y+94&&o.y!==e.y-94||o.x!==e.x||0!==e.getComponent(S.default).mineType||(i.setData(i.mineType,i.rewardType,1),t.push(o)),o.x!==e.x+95&&o.x!==e.x-95||o.y!==e.y||0!==e.getComponent(S.default).mineType||(i.setData(i.mineType,i.rewardType,1),t.push(o))}return t},t.prototype.onBtnBackClick=function(){d.default.instance.saveMineCacheData(this.getTopToBottomAreaItemData()),l.default.goMain()},t.prototype.onToggleShovelClick=function(){this.toggle_shovel.isChecked=!0,this.toggle_drill.isChecked=!1,this.toggle_boom.isChecked=!1},t.prototype.onToggleDrillClick=function(){this.toggle_drill.isChecked=!0,this.toggle_boom.isChecked=!1,this.toggle_shovel.isChecked=!1},t.prototype.onToggleBoomClick=function(){this.toggle_boom.isChecked=!0,this.toggle_shovel.isChecked=!1,this.toggle_drill.isChecked=!1},t.prototype.getToogleShovelStatus=function(){return this.toggle_shovel.isChecked},t.prototype.getToogleDrillStatus=function(){return this.toggle_drill.isChecked},t.prototype.getToogleBommStatus=function(){return this.toggle_boom.isChecked},t.prototype.refreshBtnAdDrillStatus=function(){d.default.instance.storageData.drillAdCount>=2?(this.btnAdDrill.getComponent(cc.Sprite).setMaterial(0,this.mat[1]),this.adDrillBody.active=!1):(this.btnAdDrill.getComponent(cc.Sprite).setMaterial(0,this.mat[0]),this.adDrillBody.active=!0)},t.prototype.refreshBtnAdShovelStatus=function(){d.default.instance.storageData.shovelAdCount>=2?(this.btnAdShovel.getComponent(cc.Sprite).setMaterial(0,this.mat[1]),this.adShovelBody.active=!1):(this.btnAdShovel.getComponent(cc.Sprite).setMaterial(0,this.mat[0]),this.adShovelBody.active=!0)},t.prototype.refreshBtnAdBoomStatus=function(){d.default.instance.storageData.boomAdCount>=2?(this.btnAdBoom.getComponent(cc.Sprite).setMaterial(0,this.mat[1]),this.adBoomBody.active=!1):(this.btnAdBoom.getComponent(cc.Sprite).setMaterial(0,this.mat[0]),this.adBoomBody.active=!0)},t.prototype.playCountEffect=function(e,t,n){var o=this,i=this.countEffectPool.size()>0?this.countEffectPool.get():cc.instantiate(this.countEffectPre),r=this.node.convertToNodeSpaceAR(t);i.opacity=0,i.getChildByName("label").getComponent(cc.Label).string="+"+e,i.getChildByName("icon").children.some(function(e){e.active=e.name==n}),this.node.addChild(i),i.setPosition(r),i.opacity=255,cc.tween(i).by(1,{y:100,opacity:-255}).call(function(){o.countEffectPool.put(i)}).start()},t.prototype.onDisable=function(){},t.prototype.onDestroy=function(){},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.space:this.moveMineRoot();break;case cc.macro.KEY.a:this.mineLine.convertToWorldSpaceAR(cc.Vec2.ZERO),u.default.instance.PlaySound(""),f.default.instance.node.getPosition(),g.default.instance.node.getPosition()}},t.isAdd=!1,r([k(cc.Label)],t.prototype,"labelMineDeepth",void 0),r([k(cc.Prefab)],t.prototype,"mineItemPrefab",void 0),r([k([cc.JsonAsset])],t.prototype,"json",void 0),r([k(cc.Toggle)],t.prototype,"toggle_drill",void 0),r([k(cc.Toggle)],t.prototype,"toggle_shovel",void 0),r([k(cc.Toggle)],t.prototype,"toggle_boom",void 0),r([k(cc.Label)],t.prototype,"shovelCount",void 0),r([k({type:cc.Label,displayName:"\u7816\u673a\u6570\u91cf"})],t.prototype,"drillCount",void 0),r([k(cc.Label)],t.prototype,"boomCount",void 0),r([k(cc.Label)],t.prototype,"cubeCount",void 0),r([k(cc.Sprite)],t.prototype,"shovelIcon",void 0),r([k(cc.Sprite)],t.prototype,"drillIcon",void 0),r([k(cc.Sprite)],t.prototype,"boomIcon",void 0),r([k(cc.Sprite)],t.prototype,"cubeIcon",void 0),r([k(cc.Node)],t.prototype,"btnAdDrill",void 0),r([k(cc.Label)],t.prototype,"AdDrillCount",void 0),r([k(cc.Node)],t.prototype,"btnAdBoom",void 0),r([k(cc.Label)],t.prototype,"AdBoomCount",void 0),r([k(cc.Node)],t.prototype,"btnAdShovel",void 0),r([k(cc.Label)],t.prototype,"AdShovelCount",void 0),r([k(cc.Node)],t.prototype,"btnTips",void 0),r([k(cc.Node)],t.prototype,"effectNode",void 0),r([k(cc.Node)],t.prototype,"effectNode1",void 0),r([k(cc.Node)],t.prototype,"effectNode2",void 0),r([k(cc.Node)],t.prototype,"adDrillBody",void 0),r([k(cc.Node)],t.prototype,"adBoomBody",void 0),r([k(cc.Node)],t.prototype,"adShovelBody",void 0),r([k(cc.Node)],t.prototype,"equipNode",void 0),r([k([cc.Material])],t.prototype,"mat",void 0),r([k(cc.Node)],t.prototype,"cl_1",void 0),r([k(cc.Node)],t.prototype,"cl_2",void 0),r([k(cc.Prefab)],t.prototype,"countEffectPre",void 0),n=r([T],t)}(cc.Component);n.default=I,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":"EnumTypes","../../../Bundle1_Loading/Scripts/Main/Main_PanelOpen":"Main_PanelOpen","../../../Bundle1_Loading/Scripts/Mgr/EventMgr":"EventMgr","../../../Bundle1_Loading/Scripts/Mgr/SoundMgr":"SoundMgr","../../../Bundle1_Loading/Scripts/Mgr/StorageMgr":"StorageMgr","../../../Bundle1_Loading/Scripts/Mgr/TimeMgr":"TimeMgr","../../../Bundle1_Loading/Scripts/Platform/Platform":"Platform","../../../Bundle1_Loading/Scripts/Res/comp/CoinComp":"CoinComp","../../../Bundle1_Loading/Scripts/Res/comp/DiamondComp":"DiamondComp","../../../Bundle1_Loading/Scripts/Tool/Tool":"Tool","../Config/GameData":"GameData","../Main/Mgr/GuideCore/GuideEnums":"GuideEnums","../Main/Mgr/GuideCore/GuideMgr":"GuideMgr","../Main/Mgr/GuideCore/GuideTouch":"GuideTouch","../Mgr/BundleMgr":"BundleMgr","./MineItem":"MineItem","./MineMgr":"MineMgr"}],UIPartnerTagItem:[function(e,t,n){"use strict";cc._RF.push(t,"5ff18UtLp9Ib4RhZZSRBR+a","UIPartnerTagItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Tool/Tool"),s=e("../Main_PanelOpen"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameLabel=null,t.tag=-1,t}return i(t,e),t.prototype.onLoad=function(){a.Tool.addClickEvent(this.node,this.onClick,this)},t.prototype.setName=function(e){return this.nameLabel.string=e,this},t.prototype.setTag=function(e){this.tag=e},t.prototype.onClick=function(){s.default.showPartnerTagsView(this.tag,this.nameLabel.string)},r([u(cc.Label)],t.prototype,"nameLabel",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen"}],UIPartnerTagsView:[function(e,t,n){"use strict";cc._RF.push(t,"3b3328p+VtGJpUN0nKO+Tnv","UIPartnerTagsView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Res/ResPanelOpen"),s=e("../../Tool/Tool"),l=e("../CommonUI/AsyncQueue"),c=e("../CommonUI/UIItemPool"),u=e("../Mgr/PartnerMgr"),d=e("./PartnerListItem"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnClose=null,t.parentNode=null,t.nameLabel=null,t.tag=-1,t.domains=[],t.resultAsync=null,t}return i(t,e),t.prototype.onEnable=function(){var e=this.node.getChildByName("base");a.default.panelOpen_SmallToBig(e),s.Tool.addClickEvent(this.btnClose,this.close,this)},t.prototype.setFlag=function(e,t){this.tag=e,this.nameLabel.string=t,this.domains=u.default.Instance.getDomainsByTag(this.tag),this._playResults()},t.prototype._playResults=function(){var e=this;this.resultAsync=new l.default;for(var t=this.domains,n=function(n){var o=t[n];e.resultAsync.push(function(t){var n=e.createItem(o,e.parentNode);n.node.opacity=0,n.node.stopAllActions(),cc.tween(n.node).to(.1,{opacity:255}).start(),e.scheduleOnce(t)})},o=0;o<t.length;o++)n(o);this.resultAsync.play()},t.prototype.createItem=function(e,t){var n=this.get();n.parent=t,n.stopAllActions();var o=n.getComponent(d.default);return o.tagDelegate=this,o.setUpValue(e,t),o},t.prototype.close=function(){var e=this,t=this.node.getChildByName("base");a.default.panelClose_BigToSmall(t,function(){e.node.destroy()})},r([f(cc.Node)],t.prototype,"btnClose",void 0),r([f(cc.Node)],t.prototype,"parentNode",void 0),r([f(cc.Label)],t.prototype,"nameLabel",void 0),r([p],t)}(c.default);n.default=g,cc._RF.pop()},{"../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/AsyncQueue":"AsyncQueue","../CommonUI/UIItemPool":"UIItemPool","../Mgr/PartnerMgr":"PartnerMgr","./PartnerListItem":"PartnerListItem"}],UIQualityItem:[function(e,t,n){"use strict";cc._RF.push(t,"2539euOnW1JYJpoz8yF+sAv","UIQualityItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Tool/Tool"),c=e("../Mgr/MgrSummon"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=0,t.qualityName=null,t.qualityRate=null,t.qualityIcon=null,t.level=0,t}return i(t,e),t.prototype.setLevel=function(e){this.level=e,this.refreshUI()},t.prototype.refreshUI=function(){var e=c.default.Instance.getSummonWidgetValue(this.level);this.qualityName.string=s.default.Instance.getQualityName(this.index+1),this.qualityRate.string=this.convertNum(e[this.index]),this.setCompColor(this.index)},t.prototype.setCompColor=function(e){var t=s.default.Instance.getQualityColor(e+1);this.qualityName.node.color=cc.color().fromHEX(t),this.qualityRate.node.color=cc.color().fromHEX(t),l.Tool.setSprite(this.qualityIcon,a.BundleName.Main,s.default.Instance.getQualityIcon(e+1))},t.prototype.convertNum=function(e){return(e/1e4).toString()+"%"},r([h(cc.Integer)],t.prototype,"index",void 0),r([h(cc.Label)],t.prototype,"qualityName",void 0),r([h(cc.Label)],t.prototype,"qualityRate",void 0),r([h(cc.Sprite)],t.prototype,"qualityIcon",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Tool/Tool":"Tool","../Mgr/MgrSummon":"MgrSummon"}],UIQuestChain:[function(e,t,n){"use strict";cc._RF.push(t,"7a4d6rssC5Pz5KoqVkerUbW","UIQuestChain");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/ItemMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../../Tool/Tool"),d=e("../Main_UI"),h=e("../Mgr/AssetsMgr"),p=e("../Mgr/MgrQuest"),f=e("../Mgr/Quest/QuestChain"),g=e("../Mgr/Unlock/MgrUnlock"),y=[a.QUEST_ACTIVE_ID.ClearStage],m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.titleLabel=null,t.descLabel=null,t.rewardCntLabel=null,t.rewardIcon=null,t.redPointNode=null,t.completeNode=null,t}return i(t,e),t.prototype.onLoad=function(){u.Tool.addClickEvent(this.node,this.onClick,this,null,!0,!1),s.EventMgr.on(a.GlobalEvent.ChainQuestProgressChange,this.onQuestProgress,this),s.EventMgr.on(a.GlobalEvent.ChainQuestStatusChange,this.onQuestStatusChange,this)},t.prototype.onEnable=function(){this.refresh()},t.prototype.onQuestProgress=function(e){f.default.Instance.chainQuestId==e&&this.refreshProgress(e)},t.prototype.onQuestStatusChange=function(e){this.refreshStatus(e),this.refreshFlag(e)},t.prototype.refresh=function(){var e=f.default.Instance.chainQuestId;this.refreshTitle(e),this.refreshProgress(e),this.refreshReward(e),this.refreshFlag(e)},t.prototype.refreshTitle=function(e){this.titleLabel.string=c.default.Instance.getLanguage("title_quest")+" "+(e-p.CHAIN_QUEST_DEFAULT_ID+1)},t.prototype.refreshReward=function(e){var t=p.default.Instance.getQuestInfo(e);this.rewardCntLabel.string=""+t.count;var n=h.default.Instance.getInfo(t.asset),o=l.default.Instance.getResIcon(n.icon);u.Tool.setSprite(this.rewardIcon,a.BundleName.Main,o)},t.prototype.refreshProgress=function(e){var t=p.default.Instance.getQuestInfo(e);if(t.updateType==a.QUEST_VALUE_UPDATE_TYPE.Set&&myGlobalThis.indexOf(y,t.activeId)>=0)this.descLabel.string=t.title1||c.default.Instance.getLanguage(t.title);else{var n=f.default.Instance.getData(e),o=n.cur,i=n.max;this.descLabel.string=(t.title1||c.default.Instance.getLanguage(t.title))+"("+o+"/"+i+")"}},t.prototype.refreshStatus=function(e){var t=f.default.Instance.chainQuestId;t!==e&&(this.refreshTitle(t),this.refreshProgress(t),this.refreshReward(t))},t.prototype.refreshFlag=function(e){var t=f.default.Instance.getData(e);this.redPointNode.active=t.status==a.QUEST_STATUS.Complete,this.completeNode.active=t.status==a.QUEST_STATUS.Complete},t.prototype.onClick=function(){var e=f.default.Instance.chainQuestId,t=f.default.Instance.getData(e);t.status==a.QUEST_STATUS.Complete?f.default.Instance.receive(e,this.node):t.status==a.QUEST_STATUS.Job&&this.openDialog(t.activeId),this.refreshFlag(f.default.Instance.chainQuestId)},t.prototype.openDialog=function(e){var t=!1;if(e==a.QUEST_ACTIVE_ID.Summon||e==a.QUEST_ACTIVE_ID.SummonGear||e==a.QUEST_ACTIVE_ID.SummonPartner||e==a.QUEST_ACTIVE_ID.SummonSkill){var n=!0,o=!0;e==a.QUEST_ACTIVE_ID.Summon?t=n&&(o||!0):e==a.QUEST_ACTIVE_ID.SummonGear?t=n&&o:e==a.QUEST_ACTIVE_ID.SummonPartner?t=n&&!0:e==a.QUEST_ACTIVE_ID.SummonSkill&&(t=n&&!0),t&&d.default.instance.jumpToPage(a.MainPage.Shop)}else e==a.QUEST_ACTIVE_ID.MineDig||e==a.QUEST_ACTIVE_ID.MineResearch?g.default.Instance.isUnlock(a.UnlockType.mine)&&d.default.instance.jumpToPage(a.MainPage.Mine):(n=g.default.Instance.isUnlock(a.UnlockType.bossRush),o=g.default.Instance.isUnlock(a.UnlockType.goldRush),e!=a.QUEST_ACTIVE_ID.ClearBoss&&e!=a.QUEST_ACTIVE_ID.ClearGold?t=!1:e==a.QUEST_ACTIVE_ID.ClearBoss?t=n:e==a.QUEST_ACTIVE_ID.ClearGold&&(t=n&&o),t&&d.default.instance.jumpToPage(a.MainPage.Copy))},r([_(cc.Label)],t.prototype,"titleLabel",void 0),r([_(cc.Label)],t.prototype,"descLabel",void 0),r([_(cc.Label)],t.prototype,"rewardCntLabel",void 0),r([_(cc.Sprite)],t.prototype,"rewardIcon",void 0),r([_(cc.Node)],t.prototype,"redPointNode",void 0),r([_(cc.Node)],t.prototype,"completeNode",void 0),r([v],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","../Main_UI":"Main_UI","../Mgr/AssetsMgr":"AssetsMgr","../Mgr/MgrQuest":"MgrQuest","../Mgr/Quest/QuestChain":"QuestChain","../Mgr/Unlock/MgrUnlock":"MgrUnlock"}],UIQuestDailyItem:[function(e,t,n){"use strict";cc._RF.push(t,"254b7KE6IhP+bcdHAhbRPLv","UIQuestDailyItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../../Tool/Tool"),d=e("../Mgr/MgrQuest"),h=e("../Mgr/Quest/QuestDaily"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(e){function t(){var t=e.call(this)||this;return t.titleLabel=null,t.rewardIcon=null,t.rewardCntLabel=null,t.progressBar=null,t.progressText=null,t.barCompleteSpriteFrame=null,t.statusLabel=null,t.btnAd=null,t.btnReceived=null,t.completeNode=null,t.redDot=null,t.changeBackImgs=[],t._questId=-1,t.delegate=null,t.progressNormalSpriteFrame=null,t._questId=-1,t.delegate=null,t.progressNormalSpriteFrame=null,t}return i(t,e),Object.defineProperty(t.prototype,"questId",{get:function(){return this._questId},set:function(e){this._questId!=e&&(this._questId=e,this.refresh()),this.refreshStatus()},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.progressNormalSpriteFrame=this.progressBar.barSprite.spriteFrame,u.Tool.addClickEvent(this.btnAd,this.onClickAd,this),u.Tool.addClickEvent(this.btnReceived,this.onClickReceived,this)},t.prototype.getRedDotParam=function(){return this.questId},t.prototype.playRedDot=function(e){e.stopAllActions(),e.scale=1,cc.tween(e).to(.2,{scale:1.2}).to(.2,{scale:1}).union().repeatForever().start()},t.prototype.onEnable=function(){this.playRedDot(this.redDot),l.EventMgr.on(s.GlobalEvent.DailyQuestProgressChange,this.onProgressChange,this),l.EventMgr.on(s.GlobalEvent.DailyQuestStatusChange,this.onStatusChange,this)},t.prototype.onDisable=function(){l.EventMgr.clearTarget(this)},t.prototype.onProgressChange=function(e){if(this.questId==e){var t=h.default.Instance.getData(e);this.refreshPorgress(t)}},t.prototype.onStatusChange=function(e){this.questId==e&&this.refreshStatus()},t.prototype.onClickAd=function(){this.delegate.requestReceiveAd(this)},t.prototype.onClickReceived=function(){this.delegate.requestReceive(this,this.rewardIcon.node)},t.prototype.setTitle=function(e){this.titleLabel&&(this.titleLabel.string=e)},t.prototype.setProgress=function(e,t){this.progressBar.progress=e/t},t.prototype.setRewardCnt=function(e){this.rewardCntLabel.string=""+e},t.prototype.refresh=function(){var e=h.default.Instance.getData(this.questId),t=d.default.Instance.getQuestInfo(e.id);this.setRewardCnt(t.count)},t.prototype.refreshStatus=function(){var e=h.default.Instance.getData(this.questId),t=d.default.Instance.getQuestInfo(this.questId);this.refreshPorgress(e);var n=e.status;this.btnAd.active=t.ad&&n<=s.QUEST_STATUS.InAD,n==s.QUEST_STATUS.InAD?this.btnAd.getComponentInChildren(cc.Sprite).setState(cc.Sprite.State.NORMAL):this.btnAd.getComponentInChildren(cc.Sprite).setState(cc.Sprite.State.GRAY),n!=s.QUEST_STATUS.Complete?this.btnReceived.getComponentInChildren(cc.Sprite).setState(cc.Sprite.State.GRAY):this.btnReceived.getComponentInChildren(cc.Sprite).setState(cc.Sprite.State.NORMAL),this.btnReceived.active=n!=s.QUEST_STATUS.InAD&&!this.btnAd.active,this.redDot.active=n==s.QUEST_STATUS.Complete,n<s.QUEST_STATUS.Finish?this.statusLabel.string=c.default.Instance.getLanguage("Claim"):this.statusLabel.string=c.default.Instance.getLanguage("Claimed"),this.completeNode.active=n==s.QUEST_STATUS.Finish},t.prototype.refreshPorgress=function(e){var t=d.default.Instance.getQuestInfo(e.id),n=c.default.Instance.getLanguage(t.title);this.setProgress(e.cur,e.max),a.default.getChLength(n)>18?this.setTitle(n+"\n("+e.cur+"/"+e.max+")"):this.setTitle(n+" ("+e.cur+"/"+e.max+")"),e.status>s.QUEST_STATUS.Job&&e.status<s.QUEST_STATUS.Finish?(this.progressText.string=c.default.Instance.getLanguage("Complete"),this.titleLabel&&(this.titleLabel.node.color=cc.color().fromHEX("#fddc79")),this.node.getComponent(cc.Sprite).spriteFrame=this.changeBackImgs[0]):(this.progressText.string="",this.titleLabel&&(this.titleLabel.node.color=cc.color().fromHEX("#FFFFFF")),this.node.getComponent(cc.Sprite).spriteFrame=this.changeBackImgs[1]),e.cur>=e.max?this.progressBar.barSprite.spriteFrame=this.barCompleteSpriteFrame:this.progressBar.barSprite.spriteFrame=this.progressNormalSpriteFrame},r([g(cc.Label)],t.prototype,"titleLabel",void 0),r([g(cc.Sprite)],t.prototype,"rewardIcon",void 0),r([g(cc.Label)],t.prototype,"rewardCntLabel",void 0),r([g(cc.ProgressBar)],t.prototype,"progressBar",void 0),r([g(cc.Label)],t.prototype,"progressText",void 0),r([g(cc.SpriteFrame)],t.prototype,"barCompleteSpriteFrame",void 0),r([g(cc.Label)],t.prototype,"statusLabel",void 0),r([g(cc.Node)],t.prototype,"btnAd",void 0),r([g(cc.Node)],t.prototype,"btnReceived",void 0),r([g(cc.Node)],t.prototype,"completeNode",void 0),r([g(cc.Node)],t.prototype,"redDot",void 0),r([g([cc.SpriteFrame])],t.prototype,"changeBackImgs",void 0),r([f],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","../Mgr/MgrQuest":"MgrQuest","../Mgr/Quest/QuestDaily":"QuestDaily"}],UIQuestDailyView:[function(e,t,n){"use strict";cc._RF.push(t,"27940pmYrtLo633lwNKnZ9M","UIQuestDailyView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/TimeMgr"),c=e("../../Mgr/TimerHelper"),u=e("../../Res/ResPanelOpen"),d=e("../../Tool/Tool"),h=e("../CommonUI/AsyncQueue"),p=e("../CommonUI/UIItemPool"),f=e("../Mgr/MgrQuest"),g=e("../Mgr/Quest/QuestDaily"),y=e("./UIQuestDailyItem"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=e.call(this)||this;return t.content=null,t.cdLabel=null,t.btnClose=null,t.items=[],t.resultAsync=null,t.items=[],t}return i(t,e),t.prototype.onLoad=function(){this.items=this.content.getComponentsInChildren(y.default)},t.prototype.onEnable=function(){this.refreshList(),s.EventMgr.on(a.GlobalEvent.DailyQuestReset,this.onDailyListReset,this),s.EventMgr.on(a.GlobalEvent.DailyQuestStatusChange,this.onStatusChange,this),d.Tool.addClickEvent(this.btnClose,this.onClickClose,this);var e=this.node.getChildByName("base");u.default.panelOpen_SmallToBig(e)},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.onClickClose=function(){var e=this,t=this.node.getChildByName("base");u.default.panelClose_BigToSmall(t,function(){e.node.destroy()})},t.prototype.refreshList=function(){var e=f.default.Instance.getQuests(a.QUEST_TYPE.Daily),t=[];e.map(function(e){return t.push(e.id)});var n=myGlobalThis.sortBy(t,function(e){var t=g.default.Instance.getData(e);return t.status==a.QUEST_STATUS.Finish?e+t.status:1e4*-t.status+e});this.unscheduleAllCallbacks();var o=null,i=e.length;this.resultAsync=new h.default;for(var r=this,s=function(e){o=n[e],r.items.length<n.length?r.resultAsync.push(function(t){var o=r.get();o.stopAllActions(),o.opacity=0,o.parent=r.content.node;var i=o.getComponent(y.default);i.questId=n[e],i.delegate=r,r.items[e]=i,cc.tween(o).to(.2,{opacity:255}).start(),r.scheduleOnce(t,.05)}):r.items[e].questId=o},l=0;l<i;l++)s(l);this.resultAsync.play(),this.content.updateLayout()},t.prototype.requestReceiveAd=function(e){g.default.Instance.requestAd(e.questId,this.refreshList.bind(this))},t.prototype.requestReceive=function(e,t){g.default.Instance.receive(e.questId,t)&&this.refreshList()},t.prototype.onDailyListReset=function(){this.refreshList()},t.prototype.onStatusChange=function(){this.refreshList()},t.prototype.onDailyProgress=function(){},t.prototype.lateUpdate=function(){var e=f.default.Instance.questDailyResetTimeKey-c.default.GetNowTime();this.cdLabel.string=l.default.instance.TimeFormat(e)},r([_(cc.Layout)],t.prototype,"content",void 0),r([_(cc.Label)],t.prototype,"cdLabel",void 0),r([_(cc.Node)],t.prototype,"btnClose",void 0),r([v],t)}(p.default);n.default=b,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/TimeMgr":"TimeMgr","../../Mgr/TimerHelper":"TimerHelper","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/AsyncQueue":"AsyncQueue","../CommonUI/UIItemPool":"UIItemPool","../Mgr/MgrQuest":"MgrQuest","../Mgr/Quest/QuestDaily":"QuestDaily","./UIQuestDailyItem":"UIQuestDailyItem"}],UIRelicCollectionItemRelicInfo:[function(e,t,n){"use strict";cc._RF.push(t,"7158fqC/5BDO7DvTc9OvMwr","UIRelicCollectionItemRelicInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/ItemMgr"),s=e("../../Mgr/LanguageMgr"),l=e("../CommonUI/IUIItem"),c=e("../Mgr/Relic/RelicData"),u=e("../Mgr/RelicMgr"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=e.call(this)||this;return t.nameLabel=null,t.descLabel=null,t.equipedFlg=null,t.relicBgSprite=null,t.stateSpriteFrames=[],t.relicBgFrames=[],t._relicId=0,t._relicId=0,t}return i(t,e),Object.defineProperty(t.prototype,"relicId",{get:function(){return this._relicId},set:function(e){this._relicId=e,this.refresh()},enumerable:!1,configurable:!0}),t.prototype.refresh=function(){var e=u.default.Instance.getRelicInfo(this.relicId);this.setName(s.default.Instance.getLanguage(e.name));var t=c.default.Instance.getData(this.relicId),n=s.default.Instance.getLanguage(e.desc);n=n.replace("%{value}",""+((null==t?0:t.effectValue)||e.effectValue)),this.setDesc(n),this.setEquiped(c.default.Instance.getEquip(e.type)==this.relicId),this.setIcon(a.default.Instance.getRelicIcon(e.icon))},t.prototype.onEnable=function(){if(this.relicId>0){var e=u.default.Instance.getRelicInfo(this.relicId);this.setEquiped(c.default.Instance.getEquip(e.type)==this.relicId),this.setUnlock(null!=c.default.Instance.getData(this.relicId))}},t.prototype.setName=function(e){this.nameLabel.string=e},t.prototype.setDesc=function(e){this.descLabel.string=e},t.prototype.setEquiped=function(e){this.equipedFlg.active=e},t.prototype.setUnlock=function(e){e?(this.qualitySprite.spriteFrame=this.stateSpriteFrames[1],this.relicBgSprite.spriteFrame=this.relicBgFrames[1]):(this.qualitySprite.spriteFrame=this.stateSpriteFrames[0],this.relicBgSprite.spriteFrame=this.relicBgFrames[0])},r([p(cc.Label)],t.prototype,"nameLabel",void 0),r([p(cc.Label)],t.prototype,"descLabel",void 0),r([p(cc.Node)],t.prototype,"equipedFlg",void 0),r([p(cc.Sprite)],t.prototype,"relicBgSprite",void 0),r([p([cc.SpriteFrame])],t.prototype,"stateSpriteFrames",void 0),r([p([cc.SpriteFrame])],t.prototype,"relicBgFrames",void 0),r([h],t)}(l.default);n.default=f,cc._RF.pop()},{"../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../CommonUI/IUIItem":"IUIItem","../Mgr/Relic/RelicData":"RelicData","../Mgr/RelicMgr":"RelicMgr"}],UIRelicCollectionItem:[function(e,t,n){"use strict";cc._RF.push(t,"abfd7fcVzVKfY8DSt4dQK3E","UIRelicCollectionItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Tool/Tool"),u=e("../CommonUI/UIItemPool"),d=e("../Mgr/RelicMgr"),h=e("./UIRelicCollectionItemRelicInfo"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(e){function t(){var t=e.call(this)||this;return t.iconSprite=null,t.typeName=null,t.content=null,t.btnOpen=null,t.openList=!0,t.itemInfos=[],t._typeId=0,t.closeHeight=0,t.openHeight=0,t.rootLayout=null,t.openList=!0,t.itemInfos=[],t._typeId=0,t.closeHeight=0,t.openHeight=0,t.rootLayout=null,t}return i(t,e),Object.defineProperty(t.prototype,"typeId",{get:function(){return this._typeId},set:function(e){this._typeId=e},enumerable:!1,configurable:!0}),t.prototype.createItems=function(){for(var e=d.default.Instance.getTypeIds(this.typeId),t=0;t<4;t++){var n=this.get(),o=n.getComponent(h.default);this.itemInfos.push(o);var i=e[t];o.relicId=i,n.parent=this.content.node}},t.prototype.onLoad=function(){this.rootLayout=this.node.getComponent(cc.Layout),this.closeHeight=this.node.height,this.createItems(),this.content.enabled=!0,this.content.updateLayout(),this.content.enabled=!1,this.rootLayout.enabled=!0,this.rootLayout.updateLayout(),this.rootLayout.enabled=!1,this.openHeight=this.node.height,this.btnOpen.angle=this.openList?180:0,c.Tool.addClickEvent(this.btnOpen,this.onClickOpen,this)},t.prototype.onClickOpen=function(){this.openList=!this.openList,this.btnOpen.angle=this.openList?180:0,this.content.node.active=this.openList,this.rootLayout.enabled=!0,this.rootLayout.updateLayout(),this.rootLayout.enabled=!1,this.node.height=this.openList?this.openHeight:this.closeHeight},t.prototype.start=function(){this.setIcon("relic_type_"+this.typeId),this.setName(l.default.Instance.getLanguage(s.RELIC_TYPE_NAME[this.typeId]||""))},t.prototype.setName=function(e){this.typeName.string=e},t.prototype.setIcon=function(e){c.Tool.setSprite(this.iconSprite,a.BundleName.Main,s.default.Instance.getRelicIcon(e))},r([g(cc.Sprite)],t.prototype,"iconSprite",void 0),r([g(cc.Label)],t.prototype,"typeName",void 0),r([g(cc.Layout)],t.prototype,"content",void 0),r([g(cc.Node)],t.prototype,"btnOpen",void 0),r([f],t)}(u.default);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","../CommonUI/UIItemPool":"UIItemPool","../Mgr/RelicMgr":"RelicMgr","./UIRelicCollectionItemRelicInfo":"UIRelicCollectionItemRelicInfo"}],UIRelicCollectionView:[function(e,t,n){"use strict";cc._RF.push(t,"c1ac3grzs9BYpvmshjR3V5O","UIRelicCollectionView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Res/ResPanelOpen"),s=e("../../Tool/Tool"),l=e("../CommonUI/UIItemPool"),c=e("../Mgr/RelicMgr"),u=e("./UIRelicCollectionItem"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.btnClose=null,t.collectionItems=[],t}return i(t,e),t.prototype.onLoad=function(){this.createItems(),s.Tool.addClickEvent(this.btnClose,this.onClickClose,this)},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");a.default.panelOpen_SmallToBig(e)},t.prototype.createItems=function(){for(var e=c.default.Instance.getTypes(),t=0;t<e.length;t++){var n=e[t],o=this.get(),i=o.getComponent(u.default);i.typeId=n,o.parent=this.content.node,this.collectionItems.push(i)}},t.prototype.onClickClose=function(){var e=this,t=this.node.getChildByName("base");a.default.panelClose_BigToSmall(t,function(){e.node.destroy()})},r([p(cc.Layout)],t.prototype,"content",void 0),r([p(cc.Node)],t.prototype,"btnClose",void 0),r([h],t)}(l.default);n.default=f,cc._RF.pop()},{"../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/UIItemPool":"UIItemPool","../Mgr/RelicMgr":"RelicMgr","./UIRelicCollectionItem":"UIRelicCollectionItem"}],UIRelicDetailToggle:[function(e,t,n){"use strict";cc._RF.push(t,"2d4c9jKnH5IJKeBOLOA5QcD","UIRelicDetailToggle");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../CommonUI/IUIItem"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.stateSpriteFrames=[],t.relicId=0,t}return i(t,e),t.prototype.setOwned=function(e){this.qualitySprite.spriteFrame=e?this.stateSpriteFrames[1]:this.stateSpriteFrames[0]},r([c([cc.SpriteFrame])],t.prototype,"stateSpriteFrames",void 0),r([l],t)}(a.default);n.default=u,cc._RF.pop()},{"../CommonUI/IUIItem":"IUIItem"}],UIRelicDetailView:[function(e,t,n){"use strict";cc._RF.push(t,"18c4fTEB65KlJAHr69EBjXc","UIRelicDetailView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/ItemMgr"),u=e("../../Mgr/LanguageMgr"),d=e("../../Mgr/StorageMgr"),h=e("../../Res/ResPanelOpen"),p=e("../../Tool/Tool"),f=e("../CommonUI/IUIItem"),g=e("../Mgr/GuideCore/GuideEnums"),y=e("../Mgr/GuideCore/GuideMgr"),m=e("../Mgr/GuideCore/GuideTouch"),v=e("../Mgr/Relic/RelicData"),_=e("../Mgr/RelicMgr"),b=e("./UIRelicDetailToggle"),S=cc._decorator,M=S.ccclass,C=S.property,T=function(e){function t(){var t=e.call(this)||this;return t.forkCountLabel=null,t.nameLabel=null,t.descLabel=null,t.priceLabel=null,t.btnEnhance=null,t.btClose=null,t.btnEquip=null,t.equipStatusLabel=null,t.typeLabel=null,t.ownAtkLabel=null,t.ownHpLabel=null,t.btnLeft=null,t.btnRight=null,t.unOwnLabel=null,t.arrowLeft=null,t.arrowRight=null,t.toggles=[],t.typeId=0,t.currRelicId=0,t.idToToggles={},t.curIndex=-1,t.typeId=0,t.currRelicId=0,t.idToToggles={},t}return i(t,e),t.prototype.reuse=function(e){this.typeId=e;var t=this;this.refreshToggles();var n=_.default.Instance.getTypeIds(this.typeId),o=v.default.Instance.getEquip(this.typeId),i=0;if(o>0)i=o;else for(var r=0;r<n.length;r++){var a=n[r];if(v.default.Instance.getData(a)){i=a;break}}this.currRelicId=i,this.refresh(),this.scheduleOnce(function(){var e=n.indexOf(i);t.toggles[e].getComponent(cc.Toggle).check()})},t.prototype.onLoad=function(){var e=this;this.toggles.length<=0&&(this.toggles=this.node.getComponentsInChildren(b.default)),myGlobalThis.each(this.toggles,function(t){t.node.on("toggle",e.onToggle,e)}),p.Tool.addClickEvent(this.btnEnhance,this.onClickEnhance,this),p.Tool.addClickEvent(this.btnEquip,this.onClickEquip,this),p.Tool.addClickEvent(this.btClose,this.onClickClose,this),p.Tool.addClickEvent(this.btnLeft,this.onClickLeft,this),p.Tool.addClickEvent(this.btnRight,this.onClickRight,this)},t.prototype.onToggle=function(e){var t=e.getComponent(b.default);this.currRelicId=t.relicId,this.refresh(),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchRelicEquipButton)},t.prototype.onEnable=function(){this.setForkCount(d.default.instance.storageData.fork),l.EventMgr.on(s.GlobalEvent.AssetItemChange+s.ASSET_TYPE.Fork,this.onForkChange,this);var e=this.node.getChildByName("base");h.default.panelOpen_SmallToBig(e)},t.prototype.onDisable=function(){l.EventMgr.clearTarget(this)},t.prototype.onForkChange=function(){var e=v.default.Instance.getData(this.currRelicId),t=(null==e?0:e.level)||0;this.refreshEnhancePrice(t),this.setForkCount(d.default.instance.storageData.fork)},t.prototype.refreshToggles=function(){var e=this,t=_.default.Instance.getTypeIds(this.typeId),n=v.default.Instance.getEquip(this.typeId);this.idToToggles={},myGlobalThis.each(this.toggles,function(o,i){var r=t[i],a=_.default.Instance.getRelicInfo(r);o.relicId=r,o.setIcon(c.default.Instance.getRelicIcon(a.icon)),o.setEquipped(n==r);var s=v.default.Instance.getData(r);o.setOwned(null!=s),e.idToToggles[r]=o,null!=s&&o.addComponent(m.default).setId(g.SpecialGuideEnum.TouchRelicItem)}),y.default.instance.checkSpecial(g.SpecialGuideEnum.TouchRelicItem)},t.prototype.refresh=function(){var e=this.currRelicId,t=_.default.Instance.getRelicInfo(e),n=_.default.Instance.getTypeIds(this.typeId);this.curIndex=n.indexOf(this.currRelicId),this.setIcon(c.default.Instance.getRelicIcon(t.icon)),this.setName(u.default.Instance.getLanguage(t.name)),this.setTypeName(u.default.Instance.getLanguage(c.RELIC_TYPE_NAME[this.typeId]||"")),this.refreshDesc();var o=v.default.Instance.getData(e),i=(null==o?0:o.level)||0,r=(null==o?0:o.propValue)||t.owned;this.setOwned(r),this.setLevel(i),this.refreshEnhancePrice(i),this.btnEnhance.active=i<t.maxLevel;var a=v.default.Instance.getEquip(this.typeId);this.equipStatusLabel.string=u.default.Instance.getLanguage(e==a?"item_equiped":"btn_equip"),this.btnEquip.getComponentInChildren(cc.Sprite).setState(e!==a?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY),o?this.btnEnhance.getComponentInChildren(cc.Sprite).setState(cc.Sprite.State.NORMAL):(this.btnEquip.getComponentInChildren(cc.Sprite).setState(cc.Sprite.State.GRAY),this.btnEnhance.getComponentInChildren(cc.Sprite).setState(cc.Sprite.State.GRAY)),this.refreshArrow()},t.prototype.refreshEnhancePrice=function(e){if(e<_.default.Instance.getRelicInfo(this.currRelicId).maxLevel){var t=_.default.Instance.getCost(this.typeId,e>0?e:1);this.setEnhancePrice(t);var n=d.default.instance.storageData.fork;this.priceLabel.node.color=n>t?c.COLOR_WHITE:c.COLOR_RED}},t.prototype.refreshDesc=function(){var e=_.default.Instance.getRelicInfo(this.currRelicId),t=v.default.Instance.getData(this.currRelicId),n=u.default.Instance.getLanguage(e.desc);n=n.replace("%{value}",""+((null==t?0:t.effectValue)||e.effectValue)),this.setDesc(n)},t.prototype.setTypeName=function(e){this.typeLabel.string=e},t.prototype.setForkCount=function(e){this.forkCountLabel.string=a.default.format(e)},t.prototype.setLevel=function(e){e>0?(this.levelLabel.node.active=!0,this.unOwnLabel.node.active=!1,this.levelLabel.string="LV "+e):(this.levelLabel.node.active=!1,this.unOwnLabel.node.active=!0)},t.prototype.setName=function(e){this.nameLabel.string=e},t.prototype.setDesc=function(e){this.descLabel.string=e},t.prototype.setOwned=function(e){this.ownAtkLabel.string="+"+a.default.format(e,2)+"%",this.ownHpLabel.string="+"+a.default.format(e,2)+"%"},t.prototype.setEnhancePrice=function(e){this.priceLabel.string=a.default.format(e)},t.prototype.onClickEnhance=function(){if(_.default.Instance.lvupEnable(this.currRelicId)&&_.default.Instance.lvup(this.currRelicId)){var e=v.default.Instance.getData(this.currRelicId),t=(null==e?0:e.level)||0,n=e.propValue;this.setOwned(n),this.setLevel(t),this.refreshDesc(),this.refreshEnhancePrice(t);var o=_.default.Instance.getRelicInfo(this.currRelicId);this.btnEnhance.active=t<o.maxLevel}},t.prototype.onClickEquip=function(){var e=v.default.Instance.getEquip(this.typeId);_.default.Instance.equip(this.currRelicId)&&(this.btnEquip.getComponentInChildren(cc.Sprite).setState(cc.Sprite.State.GRAY),this.equipStatusLabel.string=u.default.Instance.getLanguage("item_equiped"),this.idToToggles[this.currRelicId].setEquipped(!0),e>=0&&this.idToToggles[e].setEquipped(!1))},t.prototype.onClickClose=function(){var e=this.node.getChildByName("base"),t=this;h.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},t.prototype.refreshArrow=function(){this.btnLeft.active=this.curIndex>0,this.btnRight.active=this.curIndex<3,this.arrowLeft.active=!this.btnLeft.active,this.arrowRight.active=!this.btnRight.active},t.prototype.onClickLeft=function(){this.curIndex--;var e=_.default.Instance.getTypeIds(this.typeId);this.currRelicId=e[this.curIndex],this.refresh(),this.toggles[this.curIndex].getComponent(cc.Toggle).check()},t.prototype.onClickRight=function(){this.curIndex++;var e=_.default.Instance.getTypeIds(this.typeId);this.currRelicId=e[this.curIndex],this.refresh(),this.toggles[this.curIndex].getComponent(cc.Toggle).check()},r([C(cc.Label)],t.prototype,"forkCountLabel",void 0),r([C(cc.Label)],t.prototype,"nameLabel",void 0),r([C(cc.Label)],t.prototype,"descLabel",void 0),r([C(cc.Label)],t.prototype,"priceLabel",void 0),r([C(cc.Node)],t.prototype,"btnEnhance",void 0),r([C(cc.Node)],t.prototype,"btClose",void 0),r([C(cc.Node)],t.prototype,"btnEquip",void 0),r([C(cc.Label)],t.prototype,"equipStatusLabel",void 0),r([C(cc.Label)],t.prototype,"typeLabel",void 0),r([C(cc.Label)],t.prototype,"ownAtkLabel",void 0),r([C(cc.Label)],t.prototype,"ownHpLabel",void 0),r([C(cc.Node)],t.prototype,"btnLeft",void 0),r([C(cc.Node)],t.prototype,"btnRight",void 0),r([C(cc.Label)],t.prototype,"unOwnLabel",void 0),r([C(cc.Node)],t.prototype,"arrowLeft",void 0),r([C(cc.Node)],t.prototype,"arrowRight",void 0),r([C([b.default])],t.prototype,"toggles",void 0),r([M],t)}(f.default);n.default=T,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/StorageMgr":"StorageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/IUIItem":"IUIItem","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/GuideCore/GuideTouch":"GuideTouch","../Mgr/Relic/RelicData":"RelicData","../Mgr/RelicMgr":"RelicMgr","./UIRelicDetailToggle":"UIRelicDetailToggle"}],UIRelicFindResult:[function(e,t,n){"use strict";cc._RF.push(t,"813d58zc79DIbZyUc5tFpBg","UIRelicFindResult");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Res/ResPanelOpen"),u=e("../../Tool/Tool"),d=e("../Mgr/GuideCore/GuideEnums"),h=e("../Mgr/GuideCore/GuideMgr"),p=e("../Mgr/Relic/RelicData"),f=e("../Mgr/RelicMgr"),g=cc._decorator,y=g.ccclass,m=g.property,v=function(e){function t(){var t=e.call(this)||this;return t.anim=null,t.icon=null,t.nameLabel=null,t.desLabel=null,t.titleNode=null,t.bgNode=null,t.closeTip=null,t.relicId=0,t._touchCloseEnable=!1,t.relicId=0,t._touchCloseEnable=!1,t}return i(t,e),t.prototype.reuse=function(e){this.relicId=e;var t=f.default.Instance.getRelicInfo(this.relicId);u.Tool.setSprite(this.icon,a.BundleName.Main,s.default.Instance.getRelicIcon(t.icon)),this.nameLabel.string="",this.desLabel.string="",this.anim.setAnimation(0,"open",!1),this.anim.setCompleteListener(this.playComplete.bind(this));var n=this.anim.findAnimation("open");this.unscheduleAllCallbacks(),this.scheduleOnce(this.showIcon,.6*n.duration),this.node.stopAllActions(),this.touchCloseEnable=!1},Object.defineProperty(t.prototype,"touchCloseEnable",{get:function(){return this._touchCloseEnable},set:function(e){this._touchCloseEnable=e,this.closeTip.active=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this.node.getChildByName("background");e.on(cc.Node.EventType.TOUCH_END,this.onTouchBackgroundEnd,this),e._touchListener.swallowTouches=!1},t.prototype.onTouchBackgroundEnd=function(){if(this.touchCloseEnable){var e=this.node.getChildByName("base"),t=this;c.default.panelClose_BigToSmall(e,function(){t.node.destroy()})}},t.prototype.onDisable=function(){h.default.instance.checkSpecial(d.SpecialGuideEnum.TouchRelicIcon)},t.prototype.setDesc=function(){var e=f.default.Instance.getRelicInfo(this.relicId),t=p.default.Instance.getData(this.relicId),n=l.default.Instance.getLanguage(e.desc);n=n.replace("%{value}",""+((null==t?0:t.effectValue)||e.effectValue)),this.desLabel.string=n},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");c.default.panelOpen_SmallToBig(e),this.icon.node.opacity=0,this.titleNode.opacity=0,this.bgNode.opacity=0},t.prototype.showIcon=function(){this.icon.node.opacity=255,this.titleNode.opacity=255,this.bgNode.opacity=255;var e=f.default.Instance.getRelicInfo(this.relicId);this.nameLabel.string=l.default.Instance.getLanguage(e.name),this.setDesc()},t.prototype.playComplete=function(){var e=this;this.closeTip.stopAllActions(),cc.tween(this.node).delay(.6).call(function(){cc.tween(e.closeTip).to(.12,{opacity:255,scale:1}).call(function(){e.touchCloseEnable=!0,h.default.instance.checkSpecial(d.SpecialGuideEnum.TouchAnyWhere)}).start()}).start()},r([m(sp.Skeleton)],t.prototype,"anim",void 0),r([m(cc.Sprite)],t.prototype,"icon",void 0),r([m(cc.Label)],t.prototype,"nameLabel",void 0),r([m(cc.Label)],t.prototype,"desLabel",void 0),r([m(cc.Node)],t.prototype,"titleNode",void 0),r([m(cc.Node)],t.prototype,"bgNode",void 0),r([m(cc.Node)],t.prototype,"closeTip",void 0),r([y],t)}(cc.Component);n.default=v,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/Relic/RelicData":"RelicData","../Mgr/RelicMgr":"RelicMgr"}],UIRelicPageView:[function(e,t,n){"use strict";cc._RF.push(t,"9f0d9w572lN45UTa1tuAyuB","UIRelicPageView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/ItemMgr"),u=e("../../Mgr/LanguageMgr"),d=e("../../Mgr/StorageMgr"),h=e("../../Tool/Tool"),p=e("../Main_PanelOpen"),f=e("../Mgr/Relic/RelicData"),g=e("../Mgr/RelicMgr"),y=e("./UIRelicTypeItem"),m=cc._decorator,v=m.ccclass,_=m.property,b=function(e){function t(){var t=e.call(this)||this;return t.forkCountLabel=null,t.forkCostLabel=null,t.foundCntLabel=null,t.btnCollection=null,t.btnFindRelic=null,t.ownAtkLabel=null,t.ownHpLabel=null,t.typeItems={},t.typeItems={},t}return i(t,e),t.prototype.onLoad=function(){var e=this;h.Tool.addClickEvent(this.btnCollection,this.onCollection,this),h.Tool.addClickEvent(this.btnFindRelic,this.onFindRelic,this,null,!0,!0,.5);var t=this.node.getComponentsInChildren(y.default);myGlobalThis.each(t,function(t,n){var o=n+1;t.typeId=o,e.typeItems[o]=t})},t.prototype.onCollection=function(){p.default.ShowRelicCollectionWindow()},t.prototype.onFindRelic=function(){if(!(f.default.Instance.getRelicCount()>=g.RELIC_TOTAL_COUNT)){var e=g.default.Instance.findRelic();if(!(e<0)){var t=g.default.Instance.getRelicInfo(e);this.typeItems[t.type].refresh(),this.playActiveId(e),this.refreshStatus(),this.refreshFoundCnt(),this.refreshCostCount(),this.refreshOwnValue()}}},t.prototype.onEnable=function(){this.refreshForkCount(),this.refreshCostCount(),this.refreshStatus(),this.refreshFoundCnt(),this.refreshRelicTypes(),this.refreshOwnValue(),l.EventMgr.on(s.GlobalEvent.AssetItemChange+s.ASSET_TYPE.Fork,this.onForkChange,this),l.EventMgr.on(s.GlobalEvent.RelicEquipedChange,this.onChangeEquipRelic,this),l.EventMgr.on(s.GlobalEvent.RelicLvup,this.refreshOwnValue,this)},t.prototype.onDisable=function(){l.EventMgr.clearTarget(this)},t.prototype.onForkChange=function(){this.refreshForkCount()},t.prototype.onChangeEquipRelic=function(e){var t=g.default.Instance.getType(e);this.typeItems[t].refresh()},t.prototype.refreshForkCount=function(){var e=d.default.instance.storageData.fork;this.forkCountLabel.string=a.default.format(e)},t.prototype.refreshCostCount=function(){var e=f.default.Instance.getRelicCount();if(!(e>=g.RELIC_TOTAL_COUNT)){var t=a.default.decode(g.default.Instance.getCostInfo(e).cost);this.forkCostLabel.string=a.default.format(t);var n=d.default.instance.storageData.fork;this.forkCostLabel.node.color=n>=t?c.COLOR_WHITE:c.COLOR_RED}},t.prototype.refreshStatus=function(){var e=f.default.Instance.getRelicCount();this.btnFindRelic.active=e<g.RELIC_TOTAL_COUNT},t.prototype.refreshFoundCnt=function(){this.foundCntLabel.string=u.default.Instance.getLanguage("discovered_relic")+":  "+f.default.Instance.getRelicCount()+"/"+g.RELIC_TOTAL_COUNT},t.prototype.refreshRelicTypes=function(){myGlobalThis.each(this.typeItems,function(e){e.refresh()})},t.prototype.refreshOwnValue=function(){var e=f.default.Instance.getPropsMap(),t=e.get(s.PROP_TYPE.ATK),n=e.get(s.PROP_TYPE.HP),o=Boolean(t)?a.default.format(t,2):"0",i=Boolean(n)?a.default.format(n,2):"0";this.ownAtkLabel.string=u.default.Instance.getLanguage("ATK")+"+"+o+"%",this.ownHpLabel.string=u.default.Instance.getLanguage("HP")+"+"+i+"%"},t.prototype.playActiveId=function(e){p.default.ShowRelicResultWindow(e)},r([_(cc.Label)],t.prototype,"forkCountLabel",void 0),r([_(cc.Label)],t.prototype,"forkCostLabel",void 0),r([_(cc.Label)],t.prototype,"foundCntLabel",void 0),r([_(cc.Node)],t.prototype,"btnCollection",void 0),r([_(cc.Node)],t.prototype,"btnFindRelic",void 0),r([_(cc.Label)],t.prototype,"ownAtkLabel",void 0),r([_(cc.Label)],t.prototype,"ownHpLabel",void 0),r([v],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/StorageMgr":"StorageMgr","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen","../Mgr/Relic/RelicData":"RelicData","../Mgr/RelicMgr":"RelicMgr","./UIRelicTypeItem":"UIRelicTypeItem"}],UIRelicTypeItem:[function(e,t,n){"use strict";cc._RF.push(t,"02003Go3bJEcYSBQGLFsJMr","UIRelicTypeItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/ItemMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../../Platform/Platform"),d=e("../../Tool/Tool"),h=e("../CommonUI/IUIItem"),p=e("../Main_PanelOpen"),f=e("../Mgr/Relic/RelicData"),g=e("../Mgr/RelicMgr"),y=cc._decorator,m=y.ccclass,v=y.property,_=function(e){function t(){var t=e.call(this)||this;return t.suoNode=null,t.typeNode=null,t.addNode=null,t.stateSpriteFrames=[],t.defaultSpriteFrame=null,t.typeId=0,t.typeId=0,t.defaultSpriteFrame=null,t}return i(t,e),t.prototype.onLoad=function(){this.defaultSpriteFrame=this.iconSprite.spriteFrame,d.Tool.addClickEvent(this.node,this.onClickTypeItem,this),this.levelLabel.node.active=!1},t.prototype.onEnable=function(){s.EventMgr.on(a.GlobalEvent.RelicLvup,this.onRelicLvup,this)},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this)},t.prototype.onRelicLvup=function(e){var t=f.default.Instance.getEquip(this.typeId);if(t==e){var n=f.default.Instance.getData(t);this.setLevel(n.level)}},t.prototype.onClickTypeItem=function(){g.default.Instance.isUnlockType(this.typeId)?p.default.ShowRelicDetailWindow(this.typeId):u.default.instance.showToast(c.default.Instance.getLanguage("You do not own this type of relic."))},t.prototype.setStatus=function(e){e?this.suoNode.active=!1:(this.iconSprite.spriteFrame=this.defaultSpriteFrame,this.suoNode.active=!0)},t.prototype.refresh=function(){var e=g.default.Instance.isUnlockType(this.typeId);if(this.setStatus(e),e){var t=f.default.Instance.getEquip(this.typeId);if(t>0){var n=f.default.Instance.getData(t),o=g.default.Instance.getRelicInfo(t);this.setLevel(n.level),this.setIcon(l.default.Instance.getRelicIcon(o.icon)),this.addNode.active=!1,this.qualitySprite.spriteFrame=this.stateSpriteFrames[1]}else this.iconSprite.spriteFrame=this.defaultSpriteFrame,this.levelLabel.string="",this.addNode.active=!0,this.qualitySprite.spriteFrame=this.stateSpriteFrames[0]}else this.levelLabel.string="",this.addNode.active=!1},r([v(cc.Node)],t.prototype,"suoNode",void 0),r([v(cc.Node)],t.prototype,"typeNode",void 0),r([v(cc.Node)],t.prototype,"addNode",void 0),r([v([cc.SpriteFrame])],t.prototype,"stateSpriteFrames",void 0),r([m],t)}(h.default);n.default=_,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../CommonUI/IUIItem":"IUIItem","../Main_PanelOpen":"Main_PanelOpen","../Mgr/Relic/RelicData":"RelicData","../Mgr/RelicMgr":"RelicMgr"}],UIRewardItem:[function(e,t,n){"use strict";cc._RF.push(t,"07cbfU5iyNKwKiJECzmuQYL","UIRewardItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../Mgr/AssetsMgr"),s=e("./IUIItem"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countLabel=null,t.id=0,t}return i(t,e),t.prototype.setItemInfo=function(e,t){this.id!=e&&(this.id=e,this.refresh()),this.setCount(t)},t.prototype.setCount=function(e){this.countLabel.string="x"+e},t.prototype.refresh=function(){if(a.default.Instance.getInfo(this.id)){this.setIcon(a.default.Instance.getIcon(this.id));var e=a.default.Instance.getQuality(this.id);this.setQuality(e)}},r([u(cc.Label)],t.prototype,"countLabel",void 0),r([c],t)}(s.default);n.default=d,cc._RF.pop()},{"../Mgr/AssetsMgr":"AssetsMgr","./IUIItem":"IUIItem"}],UIRingBreakView:[function(e,t,n){"use strict";cc._RF.push(t,"7a6c7sFuOtBv6gRQ04ktuuW","UIRingBreakView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../../plugin/NumberPlus"),c=e("../../Config/EnumTypes"),u=e("../../Mgr/EventMgr"),d=e("../../Mgr/LanguageMgr"),h=e("../../Res/ResPanelOpen"),p=e("../../Tool/Tool"),f=e("../CommonUI/Alert"),g=e("../CommonUI/UIAssetInfo"),y=e("../Mgr/MgrRing"),m=e("./UIRingEquipInfo"),v=cc._decorator,_=v.ccclass,b=v.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ringItem=null,t.ringParent=null,t.chooseLabel=null,t.ringRingChipLabel=null,t.autoChooseButton=null,t.batchBreakButton=null,t.btnClose=null,t.isAllSelect=!1,t}return i(t,e),t.prototype.onLoad=function(){p.Tool.addClickEvent(this.autoChooseButton,this.onAutoChooseClick,this),p.Tool.addClickEvent(this.batchBreakButton,this.onBatchBreakClick,this),p.Tool.addClickEvent(this.btnClose,this.onClickClose,this),this.ringRingChipLabel.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchIcon,this),u.EventMgr.on(c.GlobalEvent.SelectRing,this.freshCount,this),u.EventMgr.on(c.GlobalEvent.UpdateSelectView,this.freshCount,this)},t.prototype.onTouchIcon=function(){g.default.addPop(c.ASSET_TYPE.RingChip,this.ringRingChipLabel.node.parent)},t.prototype.onEnable=function(){this.freshRingView(),this.freshCount(),y.default.Instance.clearSelect(),this.isAllSelect=!1;var e=this.node.getChildByName("base");h.default.panelOpen_SmallToBig(e)},t.prototype.freshRingView=function(){this.ringParent.removeAllChildren();for(var e=y.default.Instance.getCanBreakList(),t=0;t<e.length;t++){var n=cc.instantiate(this.ringItem);n.parent=this.ringParent,n.getComponent(m.default).freshView(e[t]),n.getComponent(m.default).setViewType(m.RingItemViewType.SelectView),n.name="selectRing"+t.toString(),n.active=!0}},t.prototype.onAutoChooseClick=function(){this.isAllSelect=!this.isAllSelect,y.default.Instance.selectAllRing(this.isAllSelect)},t.prototype.onBatchBreakClick=function(){return a(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return y.default.Instance.getBreakChooseCount()>0?[4,f.default.open(d.default.Instance.getLanguage("Ring_BreaktTips_02"),d.default.Instance.getLanguage("Ring_BreaktTips_01"))]:[3,2];case 1:(e=t.sent()).confirm(function(){y.default.Instance.breakSelectRing()}),e.cancel(),e.show(),t.label=2;case 2:return[2]}})})},t.prototype.freshCount=function(){this.chooseLabel.string=d.default.Instance.getLanguage("Ring_Break_02")+":  "+y.default.Instance.getChooseRingCount().toString(),this.ringRingChipLabel.string=l.default.format(y.default.Instance.getChooseRingChipCount())},t.prototype.onClickClose=function(){var e=this.node.getChildByName("base"),t=this;h.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},r([b(cc.Node)],t.prototype,"ringItem",void 0),r([b(cc.Node)],t.prototype,"ringParent",void 0),r([b(cc.Label)],t.prototype,"chooseLabel",void 0),r([b(cc.Label)],t.prototype,"ringRingChipLabel",void 0),r([b(cc.Node)],t.prototype,"autoChooseButton",void 0),r([b(cc.Node)],t.prototype,"batchBreakButton",void 0),r([b(cc.Node)],t.prototype,"btnClose",void 0),r([_],t)}(cc.Component);n.default=S,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/Alert":"Alert","../CommonUI/UIAssetInfo":"UIAssetInfo","../Mgr/MgrRing":"MgrRing","./UIRingEquipInfo":"UIRingEquipInfo"}],UIRingDetailView:[function(e,t,n){"use strict";cc._RF.push(t,"42475evJq9GErTOAt1ogzR+","UIRingDetailView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Res/ResPanelOpen"),s=e("../../Tool/Tool"),l=e("../Main_PanelOpen"),c=e("../Mgr/GuideCore/GuideEnums"),u=e("../Mgr/GuideCore/GuideMgr"),d=e("../Mgr/MgrRing"),h=e("./UIRingEquipInfo"),p=e("./UIRingInfo"),f=e("../Mgr/GuideCore/GuideTouch"),g=cc._decorator,y=g.ccclass,m=g.property,v=g.menu,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiRingInfo=null,t.ringParent=null,t.ringItem=null,t.batchBreakButton=null,t.btnClose=null,t}return i(t,e),t.prototype.onLoad=function(){s.Tool.addClickEvent(this.batchBreakButton,this.onBatchBreakClick,this),s.Tool.addClickEvent(this.btnClose,this.onClickClose,this)},t.prototype.onBatchBreakClick=function(){l.default.showRingBreakView()},t.prototype.onEnable=function(){this.freshRingView();var e=this.node.getChildByName("base");a.default.panelOpen_SmallToBig(e)},t.prototype.freshRingView=function(){var e=d.default.Instance.getEquipRingId();d.default.Instance.setSelectId(-1!=e?e:d.default.Instance.getFirstRingId()),this.uiRingInfo.freshView(),this.ringParent.removeAllChildren();for(var t=d.default.Instance.getAllRingData(),n=0;n<t.length;n++){var o=cc.instantiate(this.ringItem);o.parent=this.ringParent,o.getComponent(h.default).freshView(t[n].id),o.getComponent(h.default).setViewType(h.RingItemViewType.RingView),o.name="showRing"+n.toString(),o.active=!0,0==n&&(o.getComponent(f.default)||o.addComponent(f.default)).setId(c.SpecialGuideEnum.TouchRingItem)}u.default.instance.checkSpecial(c.SpecialGuideEnum.TouchRingItem)},t.prototype.onClickClose=function(){var e=this.node.getChildByName("base"),t=this;a.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},r([m(p.default)],t.prototype,"uiRingInfo",void 0),r([m(cc.Node)],t.prototype,"ringParent",void 0),r([m(cc.Node)],t.prototype,"ringItem",void 0),r([m(cc.Node)],t.prototype,"batchBreakButton",void 0),r([m(cc.Node)],t.prototype,"btnClose",void 0),r([y,v("ring/UIRingDetailView")],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/GuideCore/GuideTouch":"GuideTouch","../Mgr/MgrRing":"MgrRing","./UIRingEquipInfo":"UIRingEquipInfo","./UIRingInfo":"UIRingInfo"}],UIRingEquipInfo:[function(e,t,n){"use strict";cc._RF.push(t,"386c9Q2ld5C1ZGOYW4xkAxR","UIRingEquipInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.RingItemViewType=void 0;var a,s=e("../../Config/EnumTypes"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/ItemMgr"),u=e("../../Tool/Tool"),d=e("../CommonUI/IUIItem"),h=e("../Mgr/GuideCore/GuideEnums"),p=e("../Mgr/GuideCore/GuideMgr"),f=e("../Mgr/MgrRing");(function(e){e[e.GearView=0]="GearView",e[e.RingTopView=1]="RingTopView",e[e.RingView=2]="RingView",e[e.SelectView=3]="SelectView"})(a=n.RingItemViewType||(n.RingItemViewType={}));var g=cc._decorator,y=g.ccclass,m=g.property,v=g.menu,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.strengthenLabel=null,t.selectNode=null,t.ringItemViewType=a.GearView,t.isSelect=!1,t.curRingId=-1,t}return i(t,e),t.prototype.onEnable=function(){this.ringItemViewType==a.RingView?(u.Tool.addClickEvent(this.node,this.onRingViewClick,this),l.EventMgr.on(s.GlobalEvent.RemoveRing,this.onRemoveRing,this),l.EventMgr.on(s.GlobalEvent.FreshRingView,this.onFreshRing,this),l.EventMgr.on(s.GlobalEvent.FreshRingInfoView,this.onSelect,this)):this.ringItemViewType==a.SelectView?(u.Tool.addClickEvent(this.node,this.onSelectViewClick,this),l.EventMgr.on(s.GlobalEvent.SelectRing,this.selectRing,this),l.EventMgr.on(s.GlobalEvent.RemoveRing,this.onRemoveRing,this),this.setSelect(!1)):this.ringItemViewType==a.GearView?(l.EventMgr.on(s.GlobalEvent.EquipRing,this.onFreshGearView,this),l.EventMgr.on(s.GlobalEvent.FreshRingView,this.onFreshRing,this)):this.ringItemViewType==a.RingTopView&&l.EventMgr.on(s.GlobalEvent.EquipRing,this.onFreshTopView,this)},t.prototype.setViewType=function(e){this.ringItemViewType=e},t.prototype.onFreshGearView=function(){var e=f.default.Instance.getEquipRingId();this.freshView(e)},t.prototype.onFreshTopView=function(){var e=f.default.Instance.getSelectId();this.freshView(e)},t.prototype.onSelectViewClick=function(){this.setSelect(!this.isSelect),f.default.Instance.selectRing(this.curRingId,this.isSelect)},t.prototype.selectRing=function(e,t){this.curRingId==e&&this.setSelect(t)},t.prototype.onSelect=function(){var e=f.default.Instance.getSelectId();-1==e||e!=this.curRingId?this.setSelect(!1):this.setSelect(!0)},t.prototype.onRemoveRing=function(e){this.curRingId==e&&this.node.destroy()},t.prototype.onFreshRing=function(e){this.curRingId==e&&this.freshView(this.curRingId)},t.prototype.onDisable=function(){l.EventMgr.clearTarget(this)},t.prototype.onDestroy=function(){l.EventMgr.clearTarget(this)},t.prototype.onRingViewClick=function(){this.scheduleOnce(function(){p.default.instance.checkSpecial(h.SpecialGuideEnum.TouchRingEquipButton)}),this.setSelect(!0),f.default.Instance.setSelectId(this.curRingId)},t.prototype.freshView=function(e){if(this.curRingId=e,-1==e)this.setQuality(1),this.setIcon(""),this.levelLabel.string="",this.strengthenLabel.string="";else{var t=f.default.Instance.getRingData(e),n=f.default.Instance.get(t.originId).icon;this.setQuality(t.quality),this.setIcon(c.default.Instance.getEquipmentIcon(n)),this.levelLabel.string="LV"+t.ringLevel.toString(),this.strengthenLabel.string=0==t.strengthenLv?"":"+"+t.strengthenLv.toString()}f.default.Instance.getEquipRingId()==e&&-1!=e?this.setEquip(!0):this.setEquip(!1),this.onSelect()},t.prototype.setEquip=function(e){this.ringItemViewType==a.RingView&&(this.equippedNode.active=e)},t.prototype.setSelect=function(e){(this.selectNode&&this.ringItemViewType==a.RingView||this.ringItemViewType==a.SelectView)&&(this.selectNode.active=e,this.isSelect=e)},r([m(cc.Label)],t.prototype,"strengthenLabel",void 0),r([m(cc.Node)],t.prototype,"selectNode",void 0),r([m({type:cc.Enum(a)})],t.prototype,"ringItemViewType",void 0),r([y,v("ring/UIRingEquipInfo")],t)}(d.default);n.default=_,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Tool/Tool":"Tool","../CommonUI/IUIItem":"IUIItem","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr","../Mgr/MgrRing":"MgrRing"}],UIRingInfo:[function(e,t,n){"use strict";cc._RF.push(t,"9679ft8dTxOjovAxq/Y0o14","UIRingInfo");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,r){function a(e){try{l(o.next(e))}catch(t){r(t)}}function s(e){try{l(o.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(e){return function(t){return l([e,t])}}function l(r){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(e,a)}catch(s){r=[6,s],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var l=e("../../../plugin/NumberPlus"),c=e("../../Config/EnumTypes"),u=e("../../Mgr/EventMgr"),d=e("../../Mgr/ItemMgr"),h=e("../../Mgr/LanguageMgr"),p=e("../../Tool/Tool"),f=e("../CommonUI/Alert"),g=e("../CommonUI/ItemPool"),y=e("../CommonUI/UIAssetInfo"),m=e("../Mgr/MgrRing"),v=e("../Mgr/PropMgr"),_=e("../Mgr/SkillMgr"),b=e("../uiHero/UIGradeSprite"),S=e("./UIRingEquipInfo"),M=cc._decorator,C=M.ccclass,T=M.property,k=M.menu,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.uiEquipInfo=null,t.nameLabel=null,t.qualitySprite=null,t.atkUpLabel=null,t.hpUpLabel=null,t.propParent=null,t.propItem=null,t.breakButton=null,t.lvUpButton=null,t.equipButton=null,t.unEquipButton=null,t.ringCountLabel=null,t.ringChipLabel=null,t.breakLabel=null,t.lvUpLabel=null,t.ringIconNode=null,t.mergeToggle=null,t.propItemPool=null,t}return i(t,e),t.prototype.onLoad=function(){this.propItemPool=new g.default(this.propItem),p.Tool.addClickEvent(this.breakButton,this.onBreakClick,this),p.Tool.addClickEvent(this.lvUpButton,this.onLvUpClick,this),p.Tool.addClickEvent(this.equipButton,this.onEquipClick,this),p.Tool.addClickEvent(this.unEquipButton,this.onUnEquipClick,this),this.ringChipLabel.node.parent.on(cc.Node.EventType.TOUCH_END,this.onTouchIcon,this),this.mergeToggle.isChecked=!0,this.mergeToggle.node.on("toggle",this.onMergeToggle,this)},t.prototype.onTouchIcon=function(){y.default.addPop(c.ASSET_TYPE.RingChip,this.ringChipLabel.node.parent)},t.prototype.onEnable=function(){u.EventMgr.on(c.GlobalEvent.FreshRingInfoView,this.freshView,this)},t.prototype.onDisable=function(){u.EventMgr.clearTarget(this)},t.prototype.onMergeToggle=function(){this.freshProp()},t.prototype.onBreakClick=function(){return a(this,void 0,void 0,function(){var e,t,n;return s(this,function(o){switch(o.label){case 0:return e=m.default.Instance.getSelectId(),m.default.Instance.getEquipRingId()==e?[2]:(t=this,[4,f.default.open(h.default.Instance.getLanguage("Ring_BreaktTips_02"),h.default.Instance.getLanguage("Ring_BreaktTips_01"))]);case 1:return(n=o.sent()).confirm(function(){m.default.Instance.breakDownRing(e),t.freshButton()}),n.cancel(),n.show(),[2]}})})},t.prototype.onLvUpClick=function(){var e=m.default.Instance.getSelectId();m.default.Instance.getCostCount(e)>myGlobalThis.parseInt(m.default.Instance.getRingChipCount())||(m.default.Instance.strengthenRing(e),this.freshButton())},t.prototype.onEquipClick=function(){var e=m.default.Instance.getSelectId();m.default.Instance.equipRing(e),this.freshButton()},t.prototype.onUnEquipClick=function(){m.default.Instance.unEquipRing(),this.freshButton()},t.prototype.onDestroy=function(){this.propItemPool.onDestroy(),this.propItemPool=null},t.prototype.freshSelect=function(){this.freshView()},t.prototype.freshView=function(){var e=m.default.Instance.getSelectId();this.uiEquipInfo.freshView(e),this.freshInfoView(),this.freshProp(),this.freshButton(),this.freshCount()},t.prototype.freshCount=function(){this.ringCountLabel.string=m.default.Instance.getRingCount()+"/"+m.default.Instance.getMaxRingCount(),this.ringChipLabel.string=l.default.format(m.default.Instance.getRingChipCount())},t.prototype.freshButton=function(){var e=m.default.Instance.getEquipRingId(),t=m.default.Instance.getSelectId(),n=-1!=t&&e!=t;this.breakButton.getComponentInChildren(cc.Sprite).setState(n?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY),this.breakButton.active=-1!=t;var o=-1!=t&&m.default.Instance.getCostCount(t)<=myGlobalThis.parseInt(m.default.Instance.getRingChipCount());this.lvUpButton.getComponentInChildren(cc.Sprite).setState(o?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY);var i=-1!=t&&m.default.Instance.canStrengthen(t);this.lvUpButton.active=i;var r=-1!=t&&e!=t;this.equipButton.getComponentInChildren(cc.Sprite).setState(r?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY);var a=-1!=t&&e!=t;this.equipButton.active=a;var s=-1!=t&&e==t;this.unEquipButton.getComponentInChildren(cc.Sprite).setState(s?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY);var c=-1!=t&&e==t;this.unEquipButton.active=c,-1==t?(this.breakLabel.string="+0",this.lvUpLabel.string="0"):(this.breakLabel.string="+"+l.default.format(m.default.Instance.getBreakCount(t)),this.lvUpLabel.string=l.default.format(m.default.Instance.getCostCount(t)))},t.prototype.freshInfoView=function(){var e=m.default.Instance.getSelectId();if(-1==e)this.nameLabel.string="",this.nameLabel.node.color=cc.color().fromHEX(d.QUALITY_COLOR[1]),this.ringIconNode.color=cc.color().fromHEX(d.QUALITY_COLOR[1]),this.qualitySprite.setEmpty(),this.atkUpLabel.string="",this.hpUpLabel.string="";else{var t=m.default.Instance.getRingCfg(e),n=m.default.Instance.getRingData(e);this.nameLabel.string=h.default.Instance.getLanguage(t.name),this.atkUpLabel.string=l.default.format(m.default.Instance.getAtkUp(e))+"%",this.hpUpLabel.string=l.default.format(m.default.Instance.getHpUp(e))+"%",this.qualitySprite.setGrade(n.quality);var o=d.default.Instance.getQualityColor(n.quality);this.nameLabel.node.color=cc.color().fromHEX(o),this.ringIconNode.color=cc.color().fromHEX(o)}},t.prototype.freshProp=function(){var e=m.default.Instance.getSelectId();if(this.propItemPool.clear(),-1!=e){var t=m.default.Instance.getRingCfg(e),n=m.default.Instance.getRingData(e),o=n.propData;if(this.mergeToggle.isChecked){for(var i=[],r=function(e){var t=n.propData[e],o=i.find(function(e){return e.propId==t.propId});o?o.value+=t.value:i.push({propId:t.propId,value:t.value})},a=0;a<n.propData.length;a++)r(a);o=i}if(0!=t.skillID){var s=this.propItemPool.get(),u=22101==t.skillID?h.default.Instance.getLanguage("Skill Effect"):h.default.Instance.getLanguage("Skill Damage");u=h.default.Instance.getLanguage(_.default.Instance.getSkillInfo(t.skillID).name)+u,s.getChildByName("desc").getComponent(cc.Label).string=u,s.getChildByName("add").getComponent(cc.Label).string=l.default.format(t.skillUP+n.ringLevel*t.skillUPLevel)+"%",s.active=!0;var p=cc.color().fromHEX("#ffe400");s.getChildByName("desc").color=p,s.getChildByName("add").color=p,s.parent=this.propParent}for(a=0;a<o.length;a++){var f=this.propItemPool.get(),g=v.default.Instance.getPropInfo(o[a].propId);f.getChildByName("desc").getComponent(cc.Label).string=h.default.Instance.getLanguage(g.name),f.getChildByName("add").getComponent(cc.Label).string=o[a].propId==c.PROP_TYPE.SkillCd?"-"+l.default.format(o[a].value)+"%":l.default.format(o[a].value)+"%",f.getChildByName("desc").color=d.COLOR_WHITE,f.getChildByName("add").color=d.COLOR_WHITE,f.parent=this.propParent,f.active=!0}}},r([T(S.default)],t.prototype,"uiEquipInfo",void 0),r([T(cc.Label)],t.prototype,"nameLabel",void 0),r([T(b.default)],t.prototype,"qualitySprite",void 0),r([T(cc.Label)],t.prototype,"atkUpLabel",void 0),r([T(cc.Label)],t.prototype,"hpUpLabel",void 0),r([T(cc.Node)],t.prototype,"propParent",void 0),r([T(cc.Node)],t.prototype,"propItem",void 0),r([T(cc.Node)],t.prototype,"breakButton",void 0),r([T(cc.Node)],t.prototype,"lvUpButton",void 0),r([T(cc.Node)],t.prototype,"equipButton",void 0),r([T(cc.Node)],t.prototype,"unEquipButton",void 0),r([T(cc.Label)],t.prototype,"ringCountLabel",void 0),r([T(cc.Label)],t.prototype,"ringChipLabel",void 0),r([T(cc.Label)],t.prototype,"breakLabel",void 0),r([T(cc.Label)],t.prototype,"lvUpLabel",void 0),r([T(cc.Node)],t.prototype,"ringIconNode",void 0),r([T(cc.Toggle)],t.prototype,"mergeToggle",void 0),r([C,k("ring/UIRingInfo")],t)}(cc.Component);n.default=I,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Tool/Tool":"Tool","../CommonUI/Alert":"Alert","../CommonUI/ItemPool":"ItemPool","../CommonUI/UIAssetInfo":"UIAssetInfo","../Mgr/MgrRing":"MgrRing","../Mgr/PropMgr":"PropMgr","../Mgr/SkillMgr":"SkillMgr","../uiHero/UIGradeSprite":"UIGradeSprite","./UIRingEquipInfo":"UIRingEquipInfo"}],UISetSwitch:[function(e,t,n){"use strict";cc._RF.push(t,"7a879XInbVA+ql5uhIzXMsd","UISetSwitch");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,s=a.ccclass,l=a.property,c=a.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeBg=null,t.openBg=null,t.openTag=null,t.closeTag=null,t.closeLabel=null,t.openLabel=null,t}return i(t,e),t.prototype.setSwitch=function(e){this.openBg.active=this.openTag.active=this.openLabel.active=e,this.closeBg.active=this.closeTag.active=this.closeLabel.active=!e},r([l(cc.Node)],t.prototype,"closeBg",void 0),r([l(cc.Node)],t.prototype,"openBg",void 0),r([l(cc.Node)],t.prototype,"openTag",void 0),r([l(cc.Node)],t.prototype,"closeTag",void 0),r([l(cc.Node)],t.prototype,"closeLabel",void 0),r([l(cc.Node)],t.prototype,"openLabel",void 0),r([s,c("uiSetting/UISetSwitch")],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],UISettingView:[function(e,t,n){"use strict";cc._RF.push(t,"512ab7Mgg9PmZwQFS2mehux","UISettingView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../plugin/NumberPlus"),s=e("../../Config/GameData"),l=e("../../Mgr/StorageMgr"),c=e("../../Res/ResPanelOpen"),u=e("../../Tool/Tool"),d=e("./UISetSwitch"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.idLabel=null,t.serverLabel=null,t.nameLabel=null,t.areaLabel=null,t.powerLabel=null,t.musicSwitch=null,t.soundSwitch=null,t.highFrameSwitch=null,t.shockSwitch=null,t.powerSavSwitch=null,t.btnService=null,t.btnCode=null,t.btnUserAgreement=null,t.btnPrivacyPolicy=null,t.btnChildPrivacyPolicy=null,t.btnClose=null,t.btnCopy=null,t}return i(t,e),t.prototype.onLoad=function(){u.Tool.addClickEvent(this.btnService,this.onBtnServiceClick,this),u.Tool.addClickEvent(this.btnCode,this.onBtnCodeClick,this),u.Tool.addClickEvent(this.btnUserAgreement,this.onBtnUserAgreementClick,this),u.Tool.addClickEvent(this.btnPrivacyPolicy,this.onBtnPrivacyPolicyClick,this),u.Tool.addClickEvent(this.btnChildPrivacyPolicy,this.onBtnChildPrivacyPolicyClick,this),u.Tool.addClickEvent(this.btnClose,this.onBtnCloseClick,this),u.Tool.addClickEvent(this.btnCopy,this.onBtnCopyClick,this),u.Tool.addClickEvent(this.musicSwitch.node,this.onClickMusicSwitch,this),u.Tool.addClickEvent(this.soundSwitch.node,this.onClickSoundSwitch,this),u.Tool.addClickEvent(this.highFrameSwitch.node,this.onClickHighFrameSwitch,this),u.Tool.addClickEvent(this.shockSwitch.node,this.onClickShockSwitch,this),u.Tool.addClickEvent(this.powerSavSwitch.node,this.onClickPowerSavSwitch,this)},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");c.default.panelOpen_SmallToBig(e);var t=l.default.instance.storageData;this.musicSwitch.setSwitch(1==t.isMusicOn),this.soundSwitch.setSwitch(1==t.isSoundOn),this.highFrameSwitch.setSwitch(1==t.isHighFrameOn),this.shockSwitch.setSwitch(1==t.isVibrateOn),this.powerSavSwitch.setSwitch(1==t.isPowerSavOn),this.powerLabel.string=a.default.format(s.default.heroCombatCal(),2),this.idLabel.string=t.userId.toString(),this.serverLabel.string="1\u670d",this.areaLabel.string="\u5730\u533a:\u65e0",this.nameLabel.string=t.userName,this.serverLabel.node.parent.active=!1},t.prototype.onBtnCopyClick=function(){},t.prototype.onBtnServiceClick=function(){},t.prototype.onBtnCodeClick=function(){},t.prototype.onBtnUserAgreementClick=function(){},t.prototype.onBtnPrivacyPolicyClick=function(){},t.prototype.onBtnChildPrivacyPolicyClick=function(){},t.prototype.onClickMusicSwitch=function(){var e=1==l.default.instance.storageData.isMusicOn?0:1;l.default.instance.setIsMusicOn(1==e),this.musicSwitch.setSwitch(1==e)},t.prototype.onClickSoundSwitch=function(){var e=1==l.default.instance.storageData.isSoundOn?0:1;l.default.instance.setIsSoundOn(1==e),this.soundSwitch.setSwitch(1==e)},t.prototype.onClickHighFrameSwitch=function(){var e=1==l.default.instance.storageData.isHighFrameOn?0:1;l.default.instance.setIsHighFrameOn(1==e),this.highFrameSwitch.setSwitch(1==e)},t.prototype.onClickShockSwitch=function(){var e=1==l.default.instance.storageData.isVibrateOn?0:1;l.default.instance.setIsVibrateOn(1==e),this.shockSwitch.setSwitch(1==e)},t.prototype.onClickPowerSavSwitch=function(){var e=1==l.default.instance.storageData.isPowerSavOn?0:1;l.default.instance.setIsPowerSavOn(1==e),this.powerSavSwitch.setSwitch(1==e)},t.prototype.onBtnCloseClick=function(){var e=this.node.getChildByName("base"),t=this;c.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},r([f(cc.Label)],t.prototype,"idLabel",void 0),r([f(cc.Label)],t.prototype,"serverLabel",void 0),r([f(cc.Label)],t.prototype,"nameLabel",void 0),r([f(cc.Label)],t.prototype,"areaLabel",void 0),r([f(cc.Label)],t.prototype,"powerLabel",void 0),r([f(d.default)],t.prototype,"musicSwitch",void 0),r([f(d.default)],t.prototype,"soundSwitch",void 0),r([f(d.default)],t.prototype,"highFrameSwitch",void 0),r([f(d.default)],t.prototype,"shockSwitch",void 0),r([f(d.default)],t.prototype,"powerSavSwitch",void 0),r([f(cc.Node)],t.prototype,"btnService",void 0),r([f(cc.Node)],t.prototype,"btnCode",void 0),r([f(cc.Node)],t.prototype,"btnUserAgreement",void 0),r([f(cc.Node)],t.prototype,"btnPrivacyPolicy",void 0),r([f(cc.Node)],t.prototype,"btnChildPrivacyPolicy",void 0),r([f(cc.Node)],t.prototype,"btnClose",void 0),r([f(cc.Node)],t.prototype,"btnCopy",void 0),r([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../plugin/NumberPlus":"NumberPlus","../../Config/GameData":"GameData","../../Mgr/StorageMgr":"StorageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","./UISetSwitch":"UISetSwitch"}],UISevenChallengeToggle:[function(e,t,n){"use strict";cc._RF.push(t,"56b3fB8wV5KU7UzVaCSNmk9","UISevenChallengeToggle");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Platform/Platform"),u=e("../../Tool/Tool"),d=e("../Mgr/MgrSevenChallenge"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.day=1,t.redDot=null,t.toggle=null,t}return i(t,e),t.prototype.onLoad=function(){this.toggle=this.node.getComponent(cc.Toggle),u.Tool.addClickEvent(this.node,this.touchStart,this,null,!0,!1)},t.prototype.touchStart=function(){var e=d.default.Instance.getSevenChallengeDay();this.day>e&&c.default.instance.showToast(l.default.Instance.getLanguage("NewTaskEveryDay"))},t.prototype.onEnable=function(){this.enableToggle(),this.refreshUi(),s.EventMgr.on(a.GlobalEvent.SevenChallengeQuestStatusChange,this.refreshUi,this)},t.prototype.enableToggle=function(){var e=d.default.Instance.getSevenChallengeDay();this.toggle.enabled=this.day<=e},t.prototype.refreshUi=function(){this.redDot.active=d.default.Instance.isShowDayRedDot(this.day),this.enableToggle()},r([f({type:cc.Integer,displayName:"\u5929\u6570",max:7,min:1,step:1,slide:!0})],t.prototype,"day",void 0),r([f(cc.Node)],t.prototype,"redDot",void 0),r([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Platform/Platform":"Platform","../../Tool/Tool":"Tool","../Mgr/MgrSevenChallenge":"MgrSevenChallenge"}],UISevenChallengeView:[function(e,t,n){"use strict";cc._RF.push(t,"3a572RmyC5HF628nt/Lc8wg","UISevenChallengeView");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Config/GameData"),l=e("../../Mgr/EventMgr"),c=e("../../Mgr/FlyItemMgr"),u=e("../../Mgr/LanguageMgr"),d=e("../../Res/ResPanelOpen"),h=e("../../Tool/Tool"),p=e("../CommonUI/ToggleToPage"),f=e("../Mgr/AssetsMgr"),g=e("../Mgr/ExtraRewardData"),y=e("../Mgr/MgrQuest"),m=e("../Mgr/MgrSevenChallenge"),v=e("../Mgr/Quest/QuestSevenChallenge"),_=e("./UISevenChallengeToggle"),b=cc._decorator,S=b.ccclass,M=b.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggleContainer=null,t.toggleToPage=null,t.totalProLabel=null,t.remainTimeLabel=null,t.progressBar=null,t.obtainAll=null,t.btnGm=null,t.btnClose=null,t.selectType=null,t.defaultToggleId=0,t}return i(t,e),t.prototype.onLoad=function(){this.toggleToPage.node.on(p.PAGE_EVENTS.PageToIdx,this.onPageTo,this)},t.prototype.onPageTo=function(e){var t=this.toggleToPage.getToggleContainer().toggleItems[e].getComponent(_.default);l.EventMgr.event(a.GlobalEvent.SevenChallengeChangeTab,t.day)},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");d.default.panelOpen_SmallToBig(e),this.calculateLastDays(),this.toggleToPage.setDefaultCheckedIdx(this.defaultToggleId),this.refreshUi(),l.EventMgr.on(a.GlobalEvent.SevenChallengeQuestStatusChange,this.refreshUi,this),h.Tool.addClickEvent(this.obtainAll,this.onObtainAll,this),h.Tool.addClickEvent(this.btnGm,this.finishAll,this),h.Tool.addClickEvent(this.btnClose,this.onClickClose,this),this.progressBar.node.getChildByName("bar").getComponent(cc.Sprite).type=cc.Sprite.Type.FILLED,this.progressBar.node.getChildByName("fullBar").getComponent(cc.Sprite).type=cc.Sprite.Type.FILLED},t.prototype.calculateLastDays=function(){m.default.Instance.getSevenChallengeOpenTime()<=0&&m.default.Instance.saveSevenChallengeOpenTime()},t.prototype.refreshUi=function(){this.btnGm.active=m.OPEN_GM,this.showTotalProgress(),this.remainTimeLabel.string=": "+(m.SEVENCHALLENGE_LAST_TIME-m.default.Instance.getSevenChallengeDay()).toString()+u.default.Instance.getLanguage("days"),this.obtainAll.getChildByName("redpoint").active=m.default.Instance.isShowAllQuestDot()},t.prototype.showTotalProgress=function(){var e=v.default.Instance.getFinishedQuestNum(),t=g.ExtraRewardData.Instance.getMaxQuestNum();this.totalProLabel.string="<b><outline color=##000000 width=3>:<color=#ffd908>"+e+"/</color>"+t+"<outline><b>",e>=t&&(this.progressBar.node.getChildByName("bar").active=!1,this.progressBar.node.getChildByName("fullBar").active=!0),this.progressBar.node.getChildByName("bar").getComponent(cc.Sprite).fillRange=e/t,this.progressBar.node.getChildByName("fullBar").getComponent(cc.Sprite).fillRange=e/t},t.prototype.onObtainAll=function(){var e=[],t=[],n=v.default.Instance.questDatas;myGlobalThis.forEach(n,function(n){var o=v.default.Instance.getData(n.id);if(o&&o.status==a.QUEST_STATUS.Complete){o.status=a.QUEST_STATUS.Finish;var i=y.default.Instance.getQuestInfo(n.id),r=e.indexOf(i.asset);-1==r?(e.push(i.asset),t.push(i.count)):t[r]+=i.count}}),l.EventMgr.event(a.GlobalEvent.SevenChallengeQuestStatusChange);for(var o=0;o<e.length;o++)f.default.Instance.addItem(e[o],t[o]),c.default.addFlyItem(e[o],this.node)},t.prototype.finishAll=function(){var e=v.default.Instance.questDatas;myGlobalThis.every(e,function(e){return e.status==a.QUEST_STATUS.Finish})?s.default.isTest&&console.log("\u5df2\u7ecf\u5168\u90e8\u9886\u53d6\u8fc7\u4e86"):myGlobalThis.forEach(e,function(e){e.status=a.QUEST_STATUS.Complete,l.EventMgr.event(a.GlobalEvent.SevenChallengeQuestStatusChange,e.id)})},t.prototype.onClickClose=function(){var e=this.node.getChildByName("base"),t=this;d.default.panelClose_BigToSmall(e,function(){t.node.destroy()})},r([M(cc.ToggleContainer)],t.prototype,"toggleContainer",void 0),r([M(p.default)],t.prototype,"toggleToPage",void 0),r([M(cc.RichText)],t.prototype,"totalProLabel",void 0),r([M(cc.Label)],t.prototype,"remainTimeLabel",void 0),r([M(cc.ProgressBar)],t.prototype,"progressBar",void 0),r([M(cc.Node)],t.prototype,"obtainAll",void 0),r([M(cc.Node)],t.prototype,"btnGm",void 0),r([M(cc.Node)],t.prototype,"btnClose",void 0),r([S],t)}(cc.Component);n.default=C,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/EventMgr":"EventMgr","../../Mgr/FlyItemMgr":"FlyItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/ToggleToPage":"ToggleToPage","../Mgr/AssetsMgr":"AssetsMgr","../Mgr/ExtraRewardData":"ExtraRewardData","../Mgr/MgrQuest":"MgrQuest","../Mgr/MgrSevenChallenge":"MgrSevenChallenge","../Mgr/Quest/QuestSevenChallenge":"QuestSevenChallenge","./UISevenChallengeToggle":"UISevenChallengeToggle"}],UIShopLimitDaily:[function(e,t,n){"use strict";cc._RF.push(t,"e629bfa6F5IXo7tZ+vjtvAh","UIShopLimitDaily");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/TimeMgr"),c=e("../../Mgr/TimerHelper"),u=e("../Mgr/MgrShop"),d=e("./IUIShopListView"),h=cc._decorator,p=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cdLabel=null,t}return i(t,e),t.prototype.getShopCfgs=function(){return u.default.Instance.getTypes(a.SHOP_TYPE.Daily)},t.prototype.onEnable=function(){this.refresh(),s.EventMgr.on(a.GlobalEvent.ShopDailyefresh,this.onRefresh,this),this.schedule(this.fixedUpdate,1,cc.macro.REPEAT_FOREVER)},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this),this.unscheduleAllCallbacks()},t.prototype.refresh=function(){var e=u.default.Instance.dailyOpenMoment+1e3*u.DAY_SECONDS-c.default.GetNowTime();this.cdLabel.string=l.default.instance.TimeFormat(e)},t.prototype.fixedUpdate=function(){this.refresh()},t.prototype.onRefresh=function(){myGlobalThis.each(this.items,function(e){e.refresh()})},r([f(cc.Label)],t.prototype,"cdLabel",void 0),r([p],t)}(d.default);n.default=g,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/TimeMgr":"TimeMgr","../../Mgr/TimerHelper":"TimerHelper","../Mgr/MgrShop":"MgrShop","./IUIShopListView":"IUIShopListView"}],UIShopLimitListItemFree:[function(e,t,n){"use strict";cc._RF.push(t,"6098aZi4nZOo728LBldd1fn","UIShopLimitListItemFree");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Mgr/LanguageMgr"),s=e("./UIShopLimitListItem"),l=cc._decorator.ccclass,c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.setPrice=function(){this.priceIcon.node.active=!1,this.priceLabel.string=a.default.Instance.getLanguage("btn_free")},r([l],t)}(s.default);n.default=c,cc._RF.pop()},{"../../Mgr/LanguageMgr":"LanguageMgr","./UIShopLimitListItem":"UIShopLimitListItem"}],UIShopLimitListItem:[function(e,t,n){"use strict";cc._RF.push(t,"bee83TixLlNS5+KYnDHgoWD","UIShopLimitListItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/LanguageMgr"),l=e("../Mgr/MgrShop"),c=e("./IUIShopListItem"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.complete=null,t.worthLabel=null,t.moreAd=null,t.onceAd=null,t}return i(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.setWorth=function(e){this.worthLabel&&(this.worthLabel.node.parent.active=e>1,e>1&&(this.worthLabel.string="x"+e+" value"))},t.prototype.refresh=function(){var e=l.default.Instance.get(this.shopId),t=l.default.Instance.getData(this.shopId);this.setPrice(e.currency,e.price,t.adCnt),this.setWorth(e.worth);var n=e.limitCnt,o=e.limitCycle,i=l.default.Instance.getCyclePayCount(this.shopId);o==a.CYCLE_TYPE.None?(this.setName(s.default.Instance.getLanguage(e.name)),this.btnPay.getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL)):(this.setName(s.default.Instance.getLanguage(e.name)+"("+(n-i)+"/"+n+")"),this.complete&&(this.complete.active=i==n),i==n?this.btnPay.getComponent(cc.Sprite).setState(cc.Sprite.State.GRAY):this.btnPay.getComponent(cc.Sprite).setState(cc.Sprite.State.NORMAL))},r([h(cc.Node)],t.prototype,"complete",void 0),r([h(cc.Label)],t.prototype,"worthLabel",void 0),r([h(cc.Node)],t.prototype,"moreAd",void 0),r([h(cc.Node)],t.prototype,"onceAd",void 0),r([d],t)}(c.default);n.default=p,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/LanguageMgr":"LanguageMgr","../Mgr/MgrShop":"MgrShop","./IUIShopListItem":"IUIShopListItem"}],UIShopLimitPage:[function(e,t,n){"use strict";cc._RF.push(t,"4c61a+SStVBqJNFrcTQduvN","UIShopLimitPage");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.ShopItemParam=void 0;var a=e("../CommonUI/ToggleToPage"),s=e("./UIShopLimitDaily"),l=e("./UIShopLimitWeek"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(){function e(){this.key="",this.prefab=null}return r([d()],e.prototype,"key",void 0),r([d(cc.Prefab)],e.prototype,"prefab",void 0),r([u("ShopItemParam")],e)}();n.ShopItemParam=h;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layout=null,t.dailyView=null,t.weekView=null,t._params=[],t}return i(t,e),Object.defineProperty(t.prototype,"params",{get:function(){return this._params||[]},set:function(e){this._params=e},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this.node.on(a.PAGE_EVENTS.PageEnter,this.onPageEnter,this),this.dailyView.delegate=this,this.weekView.delegate=this},t.prototype.onPageEnter=function(){this.dailyView.createItems(),this.weekView.createItems()},t.prototype.getPrefabItem=function(e){var t;return null===(t=this.params.find(function(t){return t.key==e}))||void 0===t?void 0:t.prefab},r([d(cc.Layout)],t.prototype,"layout",void 0),r([d(s.default)],t.prototype,"dailyView",void 0),r([d(l.default)],t.prototype,"weekView",void 0),r([d({type:h,displayName:"\u5546\u5e97item"})],t.prototype,"_params",void 0),r([d({type:h,displayName:"params"})],t.prototype,"params",null),r([u],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../CommonUI/ToggleToPage":"ToggleToPage","./UIShopLimitDaily":"UIShopLimitDaily","./UIShopLimitWeek":"UIShopLimitWeek"}],UIShopLimitWeek:[function(e,t,n){"use strict";cc._RF.push(t,"c18c55qtHlPW7WbbDIZw7/I","UIShopLimitWeek");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/LanguageMgr"),c=e("../../Mgr/TimeMgr"),u=e("../../Mgr/TimerHelper"),d=e("../Mgr/MgrShop"),h=e("./IUIShopListView"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cdLabel=null,t}return i(t,e),t.prototype.getShopCfgs=function(){return d.default.Instance.getTypes(a.SHOP_TYPE.Weekly)},t.prototype.onEnable=function(){this.refresh(),s.EventMgr.on(a.GlobalEvent.ShopWeekRefresh,this.onRefresh,this),this.schedule(this.fixedUpdate,1,cc.macro.REPEAT_FOREVER)},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this),this.unscheduleAllCallbacks()},t.prototype.fixedUpdate=function(){this.refresh()},t.prototype.refresh=function(){var e=d.default.Instance.weekOpenMoment+7e3*d.DAY_SECONDS-u.default.GetNowTime();if(e>1e3*d.DAY_SECONDS){var t="",n=Math.floor(e/(1e3*d.DAY_SECONDS)),o=Math.floor((e-d.DAY_SECONDS*n*1e3)/(1e3*d.HOUR_SECONDS));n>0&&(t+=n+l.default.Instance.getLanguage("days")),o>0&&(t+=o+l.default.Instance.getLanguage("hours")),this.cdLabel.string=t}else this.cdLabel.string=c.default.instance.TimeFormat(e)},t.prototype.onRefresh=function(){myGlobalThis.each(this.items,function(e){e.refresh()})},r([g(cc.Label)],t.prototype,"cdLabel",void 0),r([f],t)}(h.default);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/TimeMgr":"TimeMgr","../../Mgr/TimerHelper":"TimerHelper","../Mgr/MgrShop":"MgrShop","./IUIShopListView":"IUIShopListView"}],UIShopSymbolItem:[function(e,t,n){"use strict";cc._RF.push(t,"23913nGwo5F6pMhQFMxOMWa","UIShopSymbolItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/ItemMgr"),l=e("../CommonUI/IUIItem"),c=e("../CommonUI/UIAssetInfo"),u=e("../Mgr/AssetsMgr"),d=cc._decorator,h=d.ccclass,p=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.countLabel=null,t.light=null,t.assetId=0,t}return i(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchIcon,this),this.playSkinAnim()},t.prototype.onTouchIcon=function(){this.showAssetInfo()},t.prototype.setItemInfo=function(e){var t=e.type,n=e.id,o=e.count;if(this.assetId=n,t==a.SHOP_GOODS_TYPE.Asset){var i=u.default.Instance.getInfo(n);this.setIcon(s.default.Instance.getResIcon(i.icon)),this.setQuality(1)}this.setCount(o)},t.prototype.setCount=function(e){this.countLabel.string="x"+e},t.prototype.showAssetInfo=function(){c.default.addPop(this.assetId,this.node)},t.prototype.playSkinAnim=function(){this.light.stopAllActions(),cc.tween(this.light).by(5,{angle:-360}).repeatForever().start()},r([p(cc.Label)],t.prototype,"countLabel",void 0),r([p(cc.Node)],t.prototype,"light",void 0),r([h],t)}(l.default);n.default=f,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/ItemMgr":"ItemMgr","../CommonUI/IUIItem":"IUIItem","../CommonUI/UIAssetInfo":"UIAssetInfo","../Mgr/AssetsMgr":"AssetsMgr"}],UIShopToggle:[function(e,t,n){"use strict";cc._RF.push(t,"e15d8LkT3tKt6J8/CdAuypb","UIShopToggle");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../Mgr/GuideCore/GuideEnums"),l=e("../Mgr/GuideCore/GuideMgr"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shopType=a.ToggleShopType.Summon,t.delegate=null,t}return i(t,e),t.prototype.onLoad=function(){this.node.on("toggle",this.onToggle,this)},t.prototype.onToggle=function(){l.default.instance.checkSpecial(s.SpecialGuideEnum.TouchSkillButton),l.default.instance.checkSpecial(s.SpecialGuideEnum.TouchGearButton),l.default.instance.checkSpecial(s.SpecialGuideEnum.TouchPartnerButton)},r([d({type:cc.Enum(a.ToggleShopType)})],t.prototype,"shopType",void 0),r([u],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../Mgr/GuideCore/GuideEnums":"GuideEnums","../Mgr/GuideCore/GuideMgr":"GuideMgr"}],UISignItem:[function(e,t,n){"use strict";cc._RF.push(t,"3040b1jUrdO+4/BsxKBHmbG","UISignItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../CommonUI/UICommonRewardItem"),l=e("../Config/ItemInfo"),c=e("../Mgr/SignMgr"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.curDay=1,t.titleText=null,t.maskNode=null,t.signedNode=null,t.currentNode=null,t.rewardItem=null,t.curState=a.WeekRewardState.NotComplete,t}return i(t,e),t.prototype.start=function(){this.curState=c.default.Instance.GetReceiveState(this.curDay),this.InitView()},t.prototype.InitView=function(){this.SetTitle(),this.SetIcon(),this.SetState()},t.prototype.playAnim=function(e){var t=this;this.maskNode.active=!1,this.signedNode.active=!0,this.signedNode.opacity=0,this.signedNode.scale=2,cc.tween(this.signedNode).to(.3,{opacity:255}).to(.2,{scale:1}).union().delay(.1).call(function(){var n=t.node.x,o=t.node.y;cc.tween(t.node).to(.018,{x:n+7,y:o+9}).to(.018,{x:n+8,y:o+5}).to(.018,{x:n+5,y:o+5}).to(.018,{x:n+5,y:o+8}).to(.018,{x:n+7,y:o+7}).to(.018,{x:n+4,y:o+10}).to(.018,{x:n+10,y:o+10}).to(.018,{x:n+5,y:o+12}).to(.018,{x:n+2,y:o+2}).union().delay(.2).call(function(){t.node.x=n,t.node.y=o}).call(function(){e(),t.maskNode.active=!0}).start()}).start()},t.prototype.SetState=function(){this.currentNode&&(this.currentNode.active=this.curState>=a.WeekRewardState.Complete),this.signedNode.active=this.curState>=a.WeekRewardState.Received,this.maskNode.active=this.curState>=a.WeekRewardState.Received},t.prototype.SetTitle=function(){},t.prototype.SetIcon=function(){var e,t=c.default.Instance.GetWeekCfg(this.curDay),n=new l.default(Number(t.name),t.count);null===(e=this.rewardItem)||void 0===e||e.setUpValue(n)},r([h({type:cc.Integer,displayName:"\u5929\u6570",max:7,min:1,step:1,slide:!0})],t.prototype,"curDay",void 0),r([h(cc.Label)],t.prototype,"titleText",void 0),r([h(cc.Node)],t.prototype,"maskNode",void 0),r([h(cc.Node)],t.prototype,"signedNode",void 0),r([h(cc.Node)],t.prototype,"currentNode",void 0),r([h(s.default)],t.prototype,"rewardItem",void 0),r([d],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../CommonUI/UICommonRewardItem":"UICommonRewardItem","../Config/ItemInfo":"ItemInfo","../Mgr/SignMgr":"SignMgr"}],UISlot:[function(e,t,n){"use strict";cc._RF.push(t,"0fb6fYyA7VE8IXkPC/t/eQN","UISlot");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/BundleMgr"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lockNode=null,t.emptyNode=null,t.slotIndex=-1,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){this.lockNode.on(cc.Node.EventType.TOUCH_END,this.test,this)},t.prototype.showLock=function(){this.lockNode.active=!0},t.prototype.hideLock=function(){this.lockNode.active=!1},t.prototype.showEmpty=function(){this.emptyNode.active=!0},t.prototype.hideEmpty=function(){this.emptyNode.active=!1},t.prototype.test=function(){this.playUnlockAni(null)},t.prototype.playUnlockAni=function(e){var t=this;if(n.guideUnlockNode)return n.guideUnlockNode.active=!0,void this._playUnlockAni(e);var o=cc.find("Canvas").getChildByName("panel3");s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Common/GuideUnlock",cc.Prefab,function(i,r){i||(r.addRef(),n.guideUnlockNode=cc.instantiate(r),o.addChild(n.guideUnlockNode),t._playUnlockAni(e))})},t.prototype._playUnlockAni=function(e){var t=this,o=this.lockNode.children[this.lockNode.childrenCount-1];o.stopAllActions(),o.position=cc.Vec3.ZERO,cc.tween(this.node).repeat(4,cc.tween(this.node).by(.03,{position:cc.v3(10,0)}).by(.3,{position:cc.v3(-20,0)}).by(.3,{position:cc.v3(10,0)})).call(function(){cc.tween(o).parallel(cc.tween().by(.6,{y:-600},{easing:cc.easing.backIn}),cc.tween().by(.6,{x:80},{easing:cc.easing.sineIn})).call(function(){t.showEmpty(),t.hideLock(),e&&e(),t.checkGuide()}).start(),n.guideUnlockNode.active=!1}).start()},t.prototype.checkGuide=function(){},t.guideUnlockNode=null,r([u(cc.Node)],t.prototype,"lockNode",void 0),r([u(cc.Node)],t.prototype,"emptyNode",void 0),n=r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/BundleMgr":"BundleMgr"}],UISummonItem:[function(e,t,n){"use strict";cc._RF.push(t,"0b836g4/a5GTIum4j40/+Yy","UISummonItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/EventMgr"),l=e("../../Mgr/ItemMgr"),c=e("../../Mgr/LanguageMgr"),u=e("../../Mgr/StorageMgr"),d=e("../../Tool/Tool"),h=e("../Main_PanelOpen"),p=e("../Mgr/MgrSummon"),f=e("../Mgr/Unlock/MgrUnlock"),g=e("../UnlockTip/UnlockTipMgr"),y=e("./ShopVideoView"),m=e("./UISummonRateWindow"),v=cc._decorator,_=v.ccclass,b=v.property,S=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.summonType=a.eSUMMONTYPE.Gear,t.btnSummon11=null,t.btnSummon35=null,t.btnSummonAd=null,t.progressBar=null,t.prgressText=null,t.levelLabel=null,t.cdNode=null,t.adTitle=null,t.adCountLabel=null,t.adCd=null,t.price11Label=null,t.price35Label=null,t.btnHelp=null,t}return i(t,e),t.prototype.onLoad=function(){d.Tool.addClickEvent(this.btnSummon11,this.onClickSummon11,this),d.Tool.addClickEvent(this.btnSummon35,this.onClickSummon35,this),d.Tool.addClickEvent(this.btnSummonAd,this.onClickSummonAd,this),d.Tool.addClickEvent(this.btnHelp,this.onClickSummonRateHelp,this)},t.prototype.onClickSummon11=function(){p.default.Instance.diamondSummon(this.summonType,a.eShopSummonPrice.SUMMON_PRICE_NORMAL),this.refreshBtnStatus()},t.prototype.onClickSummon35=function(){p.default.Instance.diamondSummon(this.summonType,a.eShopSummonPrice.SUMMON_PRICE_FULL),this.refreshBtnStatus()},t.prototype.getRedDotParam=function(){return this.summonType},t.prototype.onClickSummonAd=function(){p.default.Instance.getAdCount(this.summonType)<=0||y.default.open(this.summonType)},t.prototype.onEnable=function(){this.refresh(),this.refreshAdTitle(),this.refreshAdCount(),this.refreshBtnStatus(),this.refreshBtnAdStatus(),this.checkUnlock(),this.price11Label.string=""+a.eShopSummonPrice.SUMMON_PRICE_NORMAL,this.price35Label.string=""+a.eShopSummonPrice.SUMMON_PRICE_FULL,s.EventMgr.on(a.EventType.Main_UI_Shop_SummonExpChange,this.onExpChange,this),s.EventMgr.on(a.EventType.Main_UI_Shop_SummonLevelChange,this.onSummonLvup,this),s.EventMgr.on(a.EventType.Common_Dimond_Update,this.refreshBtnStatus,this),this.schedule(this.fixedUpdate,1,cc.macro.REPEAT_FOREVER)},t.prototype.onDisable=function(){s.EventMgr.clearTarget(this),this.unscheduleAllCallbacks()},t.prototype.getSysId=function(){return this.summonType==a.eSUMMONTYPE.Gear?a.UNLOCKSYS_ID.Equip:this.summonType==a.eSUMMONTYPE.Skill?a.UNLOCKSYS_ID.Skill:this.summonType==a.eSUMMONTYPE.Partner?a.UNLOCKSYS_ID.Partner:void 0},t.prototype.getUnlockSysId=function(){return this.summonType==a.eSUMMONTYPE.Gear?a.UnlockType.summonGear:this.summonType==a.eSUMMONTYPE.Skill?a.UnlockType.skill:this.summonType==a.eSUMMONTYPE.Partner?a.UnlockType.partner:void 0},t.prototype.checkUnlock=function(){var e=f.default.Instance.isUnlock(this.getUnlockSysId()),t=this.node.getChildByName("lock");if(t&&(t.active=!e,!e)){var n=d.Tool.findNodeByName(t,"lockTip");n&&(n.getComponent(cc.Label).string=g.default.Instance.getUnlockTip(this.getSysId()))}},t.prototype.fixedUpdate=function(){this.refreshBtnAdStatus(),this.refreshAdCount()},t.prototype.refresh=function(){var e=p.default.Instance.getLvData(this.summonType);this.setLevel(e.level);var t="",n=1;e.level>=p.SUMMON_LVUP_COUNTS.length+1?(n=p.SUMMON_LVUP_COUNTS[p.SUMMON_LVUP_COUNTS.length-1],t=c.default.Instance.getLanguage("Max")):(n=p.SUMMON_LVUP_COUNTS[e.level-1],t=e.count+"/"+n),this.setProgress(e.count,n,t)},t.prototype.onExpChange=function(e){var t=this;if(this.summonType==e){var n=p.default.Instance.getLvData(this.summonType),o=p.SUMMON_LVUP_COUNTS[n.level-1],i=this.progressBar.progress;cc.tween(this.progressBar).to(.18,{progress:n.count/o},{easing:cc.easing.sineIn,onUpdate:function(e,n){var r=cc.misc.lerp(i,t.progressBar.progress,n);t.prgressText.string=Math.floor(r*o)+"/"+o}}).call(function(){t.prgressText.string=n.count+"/"+o}).start()}},t.prototype.onSummonLvup=function(e){var t=this;if(e==this.summonType){var n=p.default.Instance.getLvData(this.summonType),o=p.SUMMON_LVUP_COUNTS[n.level-1],i=this.progressBar.progress;cc.tween(this.progressBar).to(.18,{progress:1},{easing:cc.easing.sineIn,onUpdate:function(e,n){var r=cc.misc.lerp(i,t.progressBar.progress,n);t.prgressText.string=Math.floor(r*o)+"/"+o}}).call(function(){t.setLevel(n.level),t.showUpgradeTip(),n.level>=p.SUMMON_LVUP_COUNTS.length+1?(o=p.SUMMON_LVUP_COUNTS[p.SUMMON_LVUP_COUNTS.length-1],t.prgressText.string=c.default.Instance.getLanguage("Max")):(o=p.SUMMON_LVUP_COUNTS[n.level-1],i=0,t.progressBar.progress=0,cc.tween(t.progressBar).to(.18,{progress:n.count/o},{easing:cc.easing.sineIn,onUpdate:function(e,n){var r=cc.misc.lerp(i,t.progressBar.progress,n);t.prgressText.string=Math.floor(r*o)+"/"+o}}).call(function(){t.prgressText.string=n.count+"/"+o}).start())}).start()}},t.prototype.showUpgradeTip=function(){var e=p.default.Instance.getLvData(this.summonType),t=p.default.Instance.getSummonWidgetValue(e.level-1),n=p.default.Instance.getSummonWidgetValue(e.level),o=-1;if(null!=t&&null!=n){for(var i=0;i<t.length;i++){var r=t[i],a=n[i];if(0==r&&a>0){o=i;break}}var s=null;if(o>-1){var u=l.default.Instance.getQualityName(o);s=c.default.Instance.getLanguage("UpgradeTip").replace("{s}","<color=#"+l.default.Instance.getQualityColor(o+1)+">"+u+"</color>")}h.default.showSummonLvUpWindow(e.level-1,e.level,s)}},t.prototype.setProgress=function(e,t,n){this.progressBar.progress=e/t,this.prgressText.string=n},t.prototype.setLevel=function(e){this.levelLabel.string="LV"+e},t.prototype.refreshAdTitle=function(){var e=p.default.Instance.calcAdSummonCnt(this.summonType);this.adTitle.string=c.default.Instance.getLanguage("btn_Summon_count").replace("%{count}",""+e)},t.prototype.refreshBtnAdStatus=function(){if(p.default.Instance.getAdCount(this.summonType)>0){var e=p.default.Instance.getAdCd(this.summonType);this.cdNode.active=e>0,this.adCd.string=globalThisMoment.utc(1e3*e).format("mm:ss")}else this.cdNode.active=!1},t.prototype.onClickSummonRateHelp=function(){m.default.open(p.default.Instance.getLvData(this.summonType).level)},t.prototype.refreshBtnStatus=function(){var e=u.default.instance.storageData.diamond;this.price11Label.node.color=e>=a.eShopSummonPrice.SUMMON_PRICE_NORMAL?l.COLOR_WHITE:cc.color().fromHEX("ff0000"),this.price35Label.node.color=e>=a.eShopSummonPrice.SUMMON_PRICE_FULL?l.COLOR_WHITE:cc.color().fromHEX("ff0000")},t.prototype.refreshAdCount=function(){var e=p.default.Instance.getAdCount(this.summonType);this.adCountLabel.string="("+e+"/"+p.SUMMON_AD_DAILY_COUNT+")",this.btnSummonAd.getComponentInChildren(cc.Sprite).setState(e>0?cc.Sprite.State.NORMAL:cc.Sprite.State.GRAY)},r([b({type:cc.Enum(a.eSUMMONTYPE)})],t.prototype,"summonType",void 0),r([b(cc.Node)],t.prototype,"btnSummon11",void 0),r([b(cc.Node)],t.prototype,"btnSummon35",void 0),r([b(cc.Node)],t.prototype,"btnSummonAd",void 0),r([b(cc.ProgressBar)],t.prototype,"progressBar",void 0),r([b(cc.Label)],t.prototype,"prgressText",void 0),r([b(cc.Label)],t.prototype,"levelLabel",void 0),r([b(cc.Node)],t.prototype,"cdNode",void 0),r([b(cc.Label)],t.prototype,"adTitle",void 0),r([b(cc.Label)],t.prototype,"adCountLabel",void 0),r([b(cc.Label)],t.prototype,"adCd",void 0),r([b(cc.Label)],t.prototype,"price11Label",void 0),r([b(cc.Label)],t.prototype,"price35Label",void 0),r([b(cc.Node)],t.prototype,"btnHelp",void 0),r([_],t)}(cc.Component);n.default=S,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/EventMgr":"EventMgr","../../Mgr/ItemMgr":"ItemMgr","../../Mgr/LanguageMgr":"LanguageMgr","../../Mgr/StorageMgr":"StorageMgr","../../Tool/Tool":"Tool","../Main_PanelOpen":"Main_PanelOpen","../Mgr/MgrSummon":"MgrSummon","../Mgr/Unlock/MgrUnlock":"MgrUnlock","../UnlockTip/UnlockTipMgr":"UnlockTipMgr","./ShopVideoView":"ShopVideoView","./UISummonRateWindow":"UISummonRateWindow"}],UISummonRateItem:[function(e,t,n){"use strict";cc._RF.push(t,"2085cJ0bUpBw7FjsoeJG+MP","UISummonRateItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../CommonUI/UIItemPool"),s=e("../Mgr/MgrSummon"),l=e("./UIQualityItem"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.level=0,t}return i(t,e),t.prototype.setLevel=function(e){this.level=e,this.refreshUI()},t.prototype.refreshUI=function(){this.clear();for(var e=s.default.Instance.getSummonWidgetValue(this.level),t=0;t<e.length;t++){var n=this.get();n.parent=this.node;var o=n.getComponent(l.default);o.index=t,o.setLevel(this.level)}},r([u],t)}(a.default));n.default=d,cc._RF.pop()},{"../CommonUI/UIItemPool":"UIItemPool","../Mgr/MgrSummon":"MgrSummon","./UIQualityItem":"UIQualityItem"}],UISummonRateWindow:[function(e,t,n){"use strict";cc._RF.push(t,"2d609V98N9EkYYhcWM9uPsl","UISummonRateWindow");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../../Mgr/BundleMgr"),l=e("../../Res/ResPanelOpen"),c=e("../../Tool/Tool"),u=e("../CommonUI/UIItemPool"),d=e("../Mgr/MgrSummon"),h=e("./UISummonRateItem"),p=cc._decorator,f=p.ccclass,g=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageView=null,t.rateItemPool=null,t.leftBtn=null,t.rightBtn=null,t.levelText=null,t.btnClose=null,t.arrowLeft=null,t.arrowRight=null,t.defaultPageIndex=-1,t}var n;return i(t,e),n=t,t.prototype.onLoad=function(){this.pageView.node.on("page-turning",this.onPageTurning,this),c.Tool.addClickEvent(this.leftBtn,this.onPageUp,this),c.Tool.addClickEvent(this.rightBtn,this.onPageDown,this),c.Tool.addClickEvent(this.btnClose,this.close,this)},t.prototype.onEnable=function(){var e=this.node.getChildByName("base");l.default.panelOpen_BottomToTop(e)},t.prototype.initData=function(e){this.defaultPageIndex=e-1,this.refreshUi()},t.prototype.refreshUi=function(){for(var e=d.default.Instance.getSummonWidgetMaxLevel(),t=this.pageView.getPages(),n=0;n<e;n++)if(!t[n]){var o=this.rateItemPool.get(),i=n;o.getComponent(h.default).setLevel(i),this.pageView.insertPage(o,n)}this.pageView.scrollToPage(this.defaultPageIndex,.1),this.setLevelText(this.defaultPageIndex+1),this.showPageBtn()},t.prototype.setLevelText=function(e){this.levelText.string=e.toString()},t.prototype.showPageBtn=function(){var e=this.pageView.getCurrentPageIndex();this.leftBtn.active=e>0,this.rightBtn.active=e<this.pageView.getPages().length-1,this.arrowLeft.active=!this.leftBtn.active,this.arrowRight.active=!this.rightBtn.active},t.prototype.onPageUp=function(){var e=this.pageView.getCurrentPageIndex()-1;e>=0&&(this.pageView.scrollToPage(e,.1),this.setLevelText(e+1)),this.showPageBtn()},t.prototype.onPageDown=function(){var e=this.pageView.getCurrentPageIndex()+1;e<this.pageView.getPages().length&&(this.pageView.scrollToPage(e,.1),this.setLevelText(e+1)),this.showPageBtn()},t.prototype.onPageTurning=function(){var e=this.pageView.getCurrentPageIndex();this.setLevelText(e+1),this.showPageBtn()},t.prototype.close=function(){var e=this.node.getChildByName("base"),t=this;l.default.panelClose_TopToBottom(e,function(){t.node.active=!1})},t.destroyComp=function(){var e,t;null===(t=null===(e=n._component)||void 0===e?void 0:e.node)||void 0===t||t.destroy(),n._component=null},t.open=function(e){if(n._component)return n._component.initData(e),void(n._component.node.active=!0);var t=cc.find("Canvas"),o=t.getChildByName("panel2");o||(o=t),s.default.getBundleData(a.BundleName.Main).loadRes("Prefabs/Shop/UISummonRateView",cc.Prefab,function(t,i){if(t)console.error("\u53ec\u5524\u6982\u7387\u9762\u677f\u5c55\u793a\u5931\u8d25",t);else if(o&&o.isValid)if(o.getChildByName(i.name))console.warn("\u53ec\u5524\u6982\u7387\u9762\u677f\u5df2\u7ecf\u5c55\u793a\u4e86");else{i.addRef();var r=cc.instantiate(i);o.addChild(r),n._component=r.getComponent(n),n._component.initData(e)}else console.warn("\u53ec\u5524\u6982\u7387\u9762\u677f\u5c55\u793a\u5931\u8d25,\u7236\u8282\u70b9\u4e0d\u5b58\u5728")})},t._component=null,r([g(cc.PageView)],t.prototype,"pageView",void 0),r([g(u.default)],t.prototype,"rateItemPool",void 0),r([g(cc.Node)],t.prototype,"leftBtn",void 0),r([g(cc.Node)],t.prototype,"rightBtn",void 0),r([g(cc.Label)],t.prototype,"levelText",void 0),r([g(cc.Node)],t.prototype,"btnClose",void 0),r([g(cc.Node)],t.prototype,"arrowLeft",void 0),r([g(cc.Node)],t.prototype,"arrowRight",void 0),n=r([f],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Mgr/BundleMgr":"BundleMgr","../../Res/ResPanelOpen":"ResPanelOpen","../../Tool/Tool":"Tool","../CommonUI/UIItemPool":"UIItemPool","../Mgr/MgrSummon":"MgrSummon","./UISummonRateItem":"UISummonRateItem"}],UISummonResultItem:[function(e,t,n){"use strict";cc._RF.push(t,"29925oI5JdLxrhcag+sPSGL","UISummonResultItem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../CommonUI/IUIItem"),l=e("../Mgr/EquipmentMgr"),c=cc._decorator,u=c.ccclass,d=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.weaponSf=null,t.armorSf=null,t.typeSprite=null,t.glowNode=null,t}return i(t,e),t.prototype.setType=function(e,t){if(t>=a.eSUMMONTYPE.Gear)switch(l.default.Instance.getGearInfo(e).type){case a.EquipmentType.Weapon:this.typeSprite.spriteFrame=this.weaponSf;break;case a.EquipmentType.Armor:this.typeSprite.spriteFrame=this.armorSf}else this.typeSprite.spriteFrame=null},t.prototype.playGlow=function(){},r([d(cc.SpriteFrame)],t.prototype,"weaponSf",void 0),r([d(cc.SpriteFrame)],t.prototype,"armorSf",void 0),r([d(cc.Sprite)],t.prototype,"typeSprite",void 0),r([d(cc.Node)],t.prototype,"glowNode",void 0),r([u],t)}(s.default);n.default=h,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../CommonUI/IUIItem":"IUIItem","../Mgr/EquipmentMgr":"EquipmentMgr"}],UIUtil:[function(e,t,n){"use strict";cc._RF.push(t,"3c447HrGGBGUZe6bz7Dj5/e","UIUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.updateNodeWidget=function(e){for(;e&&e!==cc.director.getScene();){if(e.getComponent(cc.Widget)){e.getComponent(cc.Widget).updateAlignment(),cc._widgetManager.remove(e.getComponent(cc.Widget));break}e=e.parent}},e.isTouchInNodeRect=function(t,n){return e.getBoundingBoxToWorld(t).contains(n)},e.getBoundingBoxToWorld=function(e){return e._parent?(e._parent._updateWorldMatrix(),function(e){var t=e._contentSize.width,n=e._contentSize.height,o=cc.rect(-e._anchorPoint.x*t,-e._anchorPoint.y*n,t,n);return e._calculWorldMatrix(),o.transformMat4(o,e._worldMatrix),o}(e)):e.getBoundingBox()},e.convertToNodeSpaceAR=function(e,t,n){var o=e.convertToWorldSpaceAR(t);return n.convertToNodeSpaceAR(o)},e}();n.default=o,cc._RF.pop()},{}],UnlockCustoms:[function(e,t,n){"use strict";cc._RF.push(t,"9af47B8eoFIMJ9/nUvLY9cB","UnlockCustoms");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.isSuccess=function(){return!0},t}(e("./GuideCondition").default);n.default=r,cc._RF.pop()},{"./GuideCondition":"GuideCondition"}],UnlockSystem:[function(e,t,n){"use strict";cc._RF.push(t,"30c92leAhdMFL1lh43blG+N","UnlockSystem");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(t){var n=e.call(this)||this;return n._systemId=t,n}return i(t,e),t.prototype.isSuccess=function(){return!0},t}(e("./GuideCondition").default);n.default=r,cc._RF.pop()},{"./GuideCondition":"GuideCondition"}],UnlockTipMgr:[function(e,t,n){"use strict";cc._RF.push(t,"284c6RI1FZIB79Ya/0aXbMB","UnlockTipMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0}),n.UNLOCKSYS_LAN_ID=n.LEVEL_DIFFICULTY_NAME=void 0;var r=e("../../Config/EnumTypes"),a=e("../../Config/GameData"),s=e("../../Mgr/BaseMgr"),l=e("../../Mgr/BattleData"),c=e("../../Mgr/LanguageMgr");n.LEVEL_DIFFICULTY_NAME=["Normal","Hard","Very Hard","Hell"],n.UNLOCKSYS_LAN_ID=["","LevelUnlockTip","MineUnlockTip","TaskUnlockTip","DoubleShotUnlockTip","TripleShotUnlockTip"];var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cfg={},t.cfgByType={},t}return i(t,e),Object.defineProperty(t,"Instance",{get:function(){return t._instance||(t._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.apply(this,t))return!1;var o=a.default.getJsonObject("levelUnlock");for(var i in o){var r=o[i];for(var s in r){var l=r[s];this.cfg[l.id]=l,this.cfgByType[l.type]=l}}},t.prototype.getUnlockTip=function(e){var t=this.cfgByType[e];if(!t)return console.error("\u89e3\u9501\u63d0\u793a\u4e0d\u5b58\u5728\uff1a",e),c.default.Instance.getLanguage("Coming soon!");if(t.unlockType==r.UnlockSysType.None)return c.default.Instance.getLanguage("Coming soon!");var o="",i=n.UNLOCKSYS_LAN_ID[t.unlockType],a=c.default.Instance.getLanguage(i);if(t.unlockType==r.UnlockSysType.Level){var s=l.default.instance.getLevelInfo(parseInt(t.unlockValue)),u=c.default.Instance.getLanguage(n.LEVEL_DIFFICULTY_NAME[s.difficulty-1])+" "+s.level;o=a.replace("{s}",u)}else if(t.unlockType==r.UnlockSysType.Task){var d=parseInt(t.unlockValue)-2e4;o=a.replace("{s}",d.toString())}else o=a.replace("{s}",t.unlockValue.toString());return o},t.prototype.get=function(e){return this.cfg[e]},t.prototype.getAllType=function(){var e=[];for(var t in this.cfg){var n=this.cfg[t];e.push(n.type)}return e},t.prototype.getUnlockDataByUnlockType=function(e,t){var n=[];for(var o in this.cfg){var i=this.cfg[o];i.unlockType==e&&i.unlockValue==t&&n.push(i.id)}return n},t.prototype.getAllUnlockDataByUnlockType=function(e,t){var n=[];for(var o in this.cfg){var i=this.cfg[o];i.unlockType==e&&t>=i.unlockValue&&n.push(i.id)}return n},t.prototype.getUnlockDataBySysType=function(e){for(var t in this.cfg){var n=this.cfg[t];if(n.type==e)return n}return null},t.prototype.getUnlockDataBySysTypeAndValue=function(e,t){var n=[];for(var o in this.cfg){var i=this.cfg[o];i.type==e&&t>=Number(i.unlockValue)&&n.push(i.id)}return n},t}(s.default);n.default=u,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../../Config/GameData":"GameData","../../Mgr/BaseMgr":"BaseMgr","../../Mgr/BattleData":"BattleData","../../Mgr/LanguageMgr":"LanguageMgr"}],UserToggle:[function(e,t,n){"use strict";cc._RF.push(t,"84475hOx4JDsodBZLnQCrW+","UserToggle");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../Config/EnumTypes"),s=e("../CommonUI/CommonToggle"),l=e("../Mgr/Unlock/MgrUnlock"),c=cc._decorator,u=c.ccclass,d=c.property,h=c.menu,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unlockSysId=a.UNLOCKSYS_ID.None,t}return i(t,e),t.prototype.onLoad=function(){this.underLine=this.nameLabel.getComponent(cc.LabelOutline)||this.nameLabel.addComponent(cc.LabelOutline),this.underLine.width=3;var e=l.default.Instance.isUnlock(l.UnCorrespondence[this.unlockSysId])&&this.unlockSysId!==a.UNLOCKSYS_ID.Trait;this.setLock(!e)},t.prototype.setToggleCheck=function(e){if(this.lockNode.active)return this.nameLabel.node.color=this.lockColor,void(this.underLine.enabled=!0);this.nameLabel.node.color=e?this.selectedColor:this.normalColor,this.underLine.enabled=!e},r([d({type:cc.Enum(a.UNLOCKSYS_ID)})],t.prototype,"unlockSysId",void 0),r([u,h("Component/UserToggle")],t)}(s.default);n.default=p,cc._RF.pop()},{"../../Config/EnumTypes":"EnumTypes","../CommonUI/CommonToggle":"CommonToggle","../Mgr/Unlock/MgrUnlock":"MgrUnlock"}],VideoVipMgr:[function(e,t,n){"use strict";cc._RF.push(t,"1703dVrxWpKBIgupL+sz5pH","VideoVipMgr");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=e("../Config/GameData"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.infos=[],t}return i(t,e),Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!1,configurable:!0}),t.prototype.initJson=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!e.prototype.initJson.apply(this,t))return!1;var o=r.default.getJsonObject("videoVipAddition");for(var i in o){var a=o[i];for(var s in a){var l=a[s];this.infos.push(l)}}},t.prototype.getInfo=function(e){return this.infos[e]},t.prototype.getInfos=function(){return this.infos},t}(e("./BaseMgr").default);n.default=a,cc._RF.pop()},{"../Config/GameData":"GameData","./BaseMgr":"BaseMgr"}],WeakGuide:[function(e,t,n){"use strict";cc._RF.push(t,"55aacBrnG5EIJ/MI/P+GTYi","WeakGuide");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0}),n.WeakGuideType=void 0;var a=e("../GuideMgr");(function(e){e[e.ChildActive=0]="ChildActive",e[e.Task=1]="Task",e[e.TaskComplete=2]="TaskComplete",e[e.Boss=3]="Boss",e[e.LegionEnter=4]="LegionEnter",e[e.LegionReward=5]="LegionReward",e[e.LegionSelect=6]="LegionSelect"})(n.WeakGuideType||(n.WeakGuideType={}));var s=cc._decorator,l=s.ccclass,c=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isShow=!1,t.guideNode=null,t}return i(t,e),t.prototype.show=function(){null==this.guideNode&&(this.guideNode=cc.instantiate(a.default.instance.fingerGuideNode),this.guideNode.parent=this.node,this.guideNode.position=cc.Vec3.ZERO,this.doAction()),this.guideNode.active=!0,this.isShow=!0},t.prototype.hide=function(){this.guideNode&&(this.guideNode.destroy(),this.guideNode=null),this.isShow=!1},t.prototype.doAction=function(){},t.prototype.GetIsShow=function(){return this.isShow},t.prototype.showTxt=function(e){this.guideNode&&(this.guideNode.getChildByName("textDilalog").active=!0,this.guideNode.getChildByName("textDilalog").getComponentInChildren(cc.Label).string=e)},t.prototype.showTxt2=function(e,t){this.guideNode&&(this.guideNode.getChildByName("textDilalog2").active=!0,this.guideNode.getChildByName("textDilalog2").getComponentInChildren(cc.Label).string=e,null!=t&&(this.guideNode.getChildByName("textDilalog2").position=t))},t.prototype.setFinger=function(e,t){this.guideNode.getChildByName("finger").angle=t,this.guideNode.getChildByName("finger").position=e},t.prototype.hideFinger=function(){this.guideNode&&(this.guideNode.getChildByName("finger").active=!1)},r([l],t)}(cc.Component));n.default=c,cc._RF.pop()},{"../GuideMgr":"GuideMgr"}],"crypto-js":[function(e,t,n){(function(o){"use strict";var i;cc._RF.push(t,"c5c4aUx6XBORoNmyA38MXyj","crypto-js"),i=function(){var t,n,i,r,a,s,l,c,u,d,h=h||function(t){var n;if("undefined"!=typeof window&&window.crypto&&(n=window.crypto),!n&&"undefined"!=typeof window&&window.msCrypto&&(n=window.msCrypto),!n&&void 0!==o&&o.crypto&&(n=o.crypto),!n&&"function"==typeof e)try{n=e("crypto")}catch(y){}var i=function(){if(n){if("function"==typeof n.getRandomValues)try{return n.getRandomValues(new Uint32Array(1))[0]}catch(y){}if("function"==typeof n.randomBytes)try{return n.randomBytes(4).readInt32LE()}catch(y){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},s=a.lib={},l=s.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=s.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,o=this.sigBytes,i=e.sigBytes;if(this.clamp(),o%4)for(var r=0;r<i;r++){var a=n[r>>>2]>>>24-r%4*8&255;t[o+r>>>2]|=a<<24-(o+r)%4*8}else for(r=0;r<i;r+=4)t[o+r>>>2]=n[r>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new c.init(t,e)}}),u=a.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i++){var r=t[i>>>2]>>>24-i%4*8&255;o.push((r>>>4).toString(16)),o.push((15&r).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o+=2)n[o>>>3]|=parseInt(e.substr(o,2),16)<<24-o%8*4;return new c.init(n,t/2)}},h=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i++){var r=t[i>>>2]>>>24-i%4*8&255;o.push(String.fromCharCode(r))}return o.join("")},parse:function(e){for(var t=e.length,n=[],o=0;o<t;o++)n[o>>>2]|=(255&e.charCodeAt(o))<<24-o%4*8;return new c.init(n,t)}},p=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=s.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var n,o=this._data,i=o.words,r=o.sigBytes,a=this.blockSize,s=r/(4*a),l=(s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0))*a,u=t.min(4*l,r);if(l){for(var d=0;d<l;d+=a)this._doProcessBlock(i,d);n=i.splice(0,l),o.sigBytes-=u}return new c.init(n,u)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),g=(s.Hasher=f.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new g.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math);return function(){var e=h,t=e.lib.WordArray;function n(e,n,o){for(var i=[],r=0,a=0;a<n;a++)if(a%4){var s=o[e.charCodeAt(a-1)]<<a%4*2|o[e.charCodeAt(a)]>>>6-a%4*2;i[r>>>2]|=s<<24-r%4*8,r++}return t.create(i,r)}e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,o=this._map;e.clamp();for(var i=[],r=0;r<n;r+=3)for(var a=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,s=0;s<4&&r+.75*s<n;s++)i.push(o.charAt(a>>>6*(3-s)&63));var l=o.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var t=e.length,o=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var r=0;r<o.length;r++)i[o.charCodeAt(r)]=r}var a=o.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}return n(e,t,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){var t=h,n=t.lib,o=n.WordArray,i=n.Hasher,r=t.algo,a=[];(function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0})();var s=r.MD5=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,i=e[o];e[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var r=this._hash.words,s=e[t+0],h=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],y=e[t+5],m=e[t+6],v=e[t+7],_=e[t+8],b=e[t+9],S=e[t+10],M=e[t+11],C=e[t+12],T=e[t+13],k=e[t+14],I=e[t+15],E=r[0],w=r[1],P=r[2],R=r[3];E=l(E,w,P,R,s,7,a[0]),R=l(R,E,w,P,h,12,a[1]),P=l(P,R,E,w,p,17,a[2]),w=l(w,P,R,E,f,22,a[3]),E=l(E,w,P,R,g,7,a[4]),R=l(R,E,w,P,y,12,a[5]),P=l(P,R,E,w,m,17,a[6]),w=l(w,P,R,E,v,22,a[7]),E=l(E,w,P,R,_,7,a[8]),R=l(R,E,w,P,b,12,a[9]),P=l(P,R,E,w,S,17,a[10]),w=l(w,P,R,E,M,22,a[11]),E=l(E,w,P,R,C,7,a[12]),R=l(R,E,w,P,T,12,a[13]),P=l(P,R,E,w,k,17,a[14]),E=c(E,w=l(w,P,R,E,I,22,a[15]),P,R,h,5,a[16]),R=c(R,E,w,P,m,9,a[17]),P=c(P,R,E,w,M,14,a[18]),w=c(w,P,R,E,s,20,a[19]),E=c(E,w,P,R,y,5,a[20]),R=c(R,E,w,P,S,9,a[21]),P=c(P,R,E,w,I,14,a[22]),w=c(w,P,R,E,g,20,a[23]),E=c(E,w,P,R,b,5,a[24]),R=c(R,E,w,P,k,9,a[25]),P=c(P,R,E,w,f,14,a[26]),w=c(w,P,R,E,_,20,a[27]),E=c(E,w,P,R,T,5,a[28]),R=c(R,E,w,P,p,9,a[29]),P=c(P,R,E,w,v,14,a[30]),E=u(E,w=c(w,P,R,E,C,20,a[31]),P,R,y,4,a[32]),R=u(R,E,w,P,_,11,a[33]),P=u(P,R,E,w,M,16,a[34]),w=u(w,P,R,E,k,23,a[35]),E=u(E,w,P,R,h,4,a[36]),R=u(R,E,w,P,g,11,a[37]),P=u(P,R,E,w,v,16,a[38]),w=u(w,P,R,E,S,23,a[39]),E=u(E,w,P,R,T,4,a[40]),R=u(R,E,w,P,s,11,a[41]),P=u(P,R,E,w,f,16,a[42]),w=u(w,P,R,E,m,23,a[43]),E=u(E,w,P,R,b,4,a[44]),R=u(R,E,w,P,C,11,a[45]),P=u(P,R,E,w,I,16,a[46]),E=d(E,w=u(w,P,R,E,p,23,a[47]),P,R,s,6,a[48]),R=d(R,E,w,P,v,10,a[49]),P=d(P,R,E,w,k,15,a[50]),w=d(w,P,R,E,y,21,a[51]),E=d(E,w,P,R,C,6,a[52]),R=d(R,E,w,P,f,10,a[53]),P=d(P,R,E,w,S,15,a[54]),w=d(w,P,R,E,h,21,a[55]),E=d(E,w,P,R,_,6,a[56]),R=d(R,E,w,P,I,10,a[57]),P=d(P,R,E,w,m,15,a[58]),w=d(w,P,R,E,T,21,a[59]),E=d(E,w,P,R,g,6,a[60]),R=d(R,E,w,P,M,10,a[61]),P=d(P,R,E,w,p,15,a[62]),w=d(w,P,R,E,b,21,a[63]),r[0]=r[0]+E|0,r[1]=r[1]+w|0,r[2]=r[2]+P|0,r[3]=r[3]+R|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var r=e.floor(o/4294967296),a=o;n[15+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),n[14+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,l=s.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,o,i,r,a){var s=e+(t&n|~t&o)+i+a;return(s<<r|s>>>32-r)+t}function c(e,t,n,o,i,r,a){var s=e+(t&o|n&~o)+i+a;return(s<<r|s>>>32-r)+t}function u(e,t,n,o,i,r,a){var s=e+(t^n^o)+i+a;return(s<<r|s>>>32-r)+t}function d(e,t,n,o,i,r,a){var s=e+(n^(t|~o))+i+a;return(s<<r|s>>>32-r)+t}t.MD5=i._createHelper(s),t.HmacMD5=i._createHmacHelper(s)}(Math),n=(t=h).lib,i=n.WordArray,r=n.Hasher,a=t.algo,s=[],l=a.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],a=n[3],l=n[4],c=0;c<80;c++){if(c<16)s[c]=0|e[t+c];else{var u=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=u<<1|u>>>31}var d=(o<<5|o>>>27)+l+s[c];d+=c<20?1518500249+(i&r|~i&a):c<40?1859775393+(i^r^a):c<60?(i&r|i&a|r&a)-1894007588:(i^r^a)-899497514,l=a,a=r,r=i<<30|i>>>2,i=o,o=d}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(o+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=r._createHelper(l),t.HmacSHA1=r._createHmacHelper(l),function(e){var t=h,n=t.lib,o=n.WordArray,i=n.Hasher,r=t.algo,a=[],s=[];(function(){function t(t){for(var n=e.sqrt(t),o=2;o<=n;o++)if(!(t%o))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var o=2,i=0;i<64;)t(o)&&(i<8&&(a[i]=n(e.pow(o,.5))),s[i]=n(e.pow(o,1/3)),i++),o++})();var l=[],c=r.SHA256=i.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],a=n[3],c=n[4],u=n[5],d=n[6],h=n[7],p=0;p<64;p++){if(p<16)l[p]=0|e[t+p];else{var f=l[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,y=l[p-2],m=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;l[p]=g+l[p-7]+m+l[p-16]}var v=o&i^o&r^i&r,_=(o<<30|o>>>2)^(o<<19|o>>>13)^(o<<10|o>>>22),b=h+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&d)+s[p]+l[p];h=d,d=u,u=c,c=a+b|0,a=r,r=i,i=o,o=b+(_+v)|0}n[0]=n[0]+o|0,n[1]=n[1]+i|0,n[2]=n[2]+r|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,o=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(o/4294967296),n[15+(i+64>>>9<<4)]=o,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=i._createHelper(c),t.HmacSHA256=i._createHmacHelper(c)}(Math),function(){var e=h,t=e.lib.WordArray,n=e.enc;function o(e){return e<<8&4278255360|e>>>8&16711935}n.Utf16=n.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,o=[],i=0;i<n;i+=2){var r=t[i>>>2]>>>16-i%4*8&65535;o.push(String.fromCharCode(r))}return o.join("")},parse:function(e){for(var n=e.length,o=[],i=0;i<n;i++)o[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return t.create(o,2*n)}},n.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r+=2){var a=o(t[r>>>2]>>>16-r%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var n=e.length,i=[],r=0;r<n;r++)i[r>>>1]|=o(e.charCodeAt(r)<<16-r%2*16);return t.create(i,2*n)}}}(),function(){if("function"==typeof ArrayBuffer){var e=h.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,o=[],i=0;i<n;i++)o[i>>>2]|=e[i]<<24-i%4*8;t.call(this,o,n)}else t.apply(this,arguments)}).prototype=e}}(),function(){var e=h,t=e.lib,n=t.WordArray,o=t.Hasher,i=e.algo,r=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),a=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),s=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),l=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),c=n.create([0,1518500249,1859775393,2400959708,2840853838]),u=n.create([1352829926,1548603684,1836072691,2053994217,0]),d=i.RIPEMD160=o.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var o=t+n,i=e[o];e[o]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var d,h,_,b,S,M,C,T,k,I,E,w=this._hash.words,P=c.words,R=u.words,O=r.words,D=a.words,A=s.words,L=l.words;for(M=d=w[0],C=h=w[1],T=_=w[2],k=b=w[3],I=S=w[4],n=0;n<80;n+=1)E=d+e[t+O[n]]|0,E+=n<16?p(h,_,b)+P[0]:n<32?f(h,_,b)+P[1]:n<48?g(h,_,b)+P[2]:n<64?y(h,_,b)+P[3]:m(h,_,b)+P[4],E=(E=v(E|=0,A[n]))+S|0,d=S,S=b,b=v(_,10),_=h,h=E,E=M+e[t+D[n]]|0,E+=n<16?m(C,T,k)+R[0]:n<32?y(C,T,k)+R[1]:n<48?g(C,T,k)+R[2]:n<64?f(C,T,k)+R[3]:p(C,T,k)+R[4],E=(E=v(E|=0,L[n]))+I|0,M=I,I=k,k=v(T,10),T=C,C=E;E=w[1]+_+k|0,w[1]=w[2]+b+I|0,w[2]=w[3]+S+M|0,w[3]=w[4]+d+C|0,w[4]=w[0]+h+T|0,w[0]=E},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;t[o>>>5]|=128<<24-o%32,t[14+(o+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,r=i.words,a=0;a<5;a++){var s=r[a];r[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function f(e,t,n){return e&t|~e&n}function g(e,t,n){return(e|~t)^n}function y(e,t,n){return e&n|t&~n}function m(e,t,n){return e^(t|~n)}function v(e,t){return e<<t|e>>>32-t}e.RIPEMD160=o._createHelper(d),e.HmacRIPEMD160=o._createHmacHelper(d)}(Math),function(){var e=h,t=e.lib.Base,n=e.enc.Utf8;e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=n.parse(t));var o=e.blockSize,i=4*o;t.sigBytes>i&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),a=this._iKey=t.clone(),s=r.words,l=a.words,c=0;c<o;c++)s[c]^=1549556828,l[c]^=909522486;r.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})}(),function(){var e=h,t=e.lib,n=t.Base,o=t.WordArray,i=e.algo,r=i.SHA1,a=i.HMAC,s=i.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:r,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,i=a.create(n.hasher,e),r=o.create(),s=o.create([1]),l=r.words,c=s.words,u=n.keySize,d=n.iterations;l.length<u;){var h=i.update(t).finalize(s);i.reset();for(var p=h.words,f=p.length,g=h,y=1;y<d;y++){g=i.finalize(g),i.reset();for(var m=g.words,v=0;v<f;v++)p[v]^=m[v]}r.concat(h),c[0]++}return r.sigBytes=4*u,r}});e.PBKDF2=function(e,t,n){return s.create(n).compute(e,t)}}(),function(){var e=h,t=e.lib,n=t.Base,o=t.WordArray,i=e.algo,r=i.MD5,a=i.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:r,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,i=this.cfg,r=i.hasher.create(),a=o.create(),s=a.words,l=i.keySize,c=i.iterations;s.length<l;){n&&r.update(n),n=r.update(e).finalize(t),r.reset();for(var u=1;u<c;u++)n=r.finalize(n),r.reset();a.concat(n)}return a.sigBytes=4*l,a}});e.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)}}(),function(){var e=h,t=e.lib.WordArray,n=e.algo,o=n.SHA256,i=n.SHA224=o.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=o._createHelper(i),e.HmacSHA224=o._createHmacHelper(i)}(),function(){var e=h,t=e.lib,n=t.Base,o=t.WordArray,i=e.x64={};i.Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],i=0;i<t;i++){var r=e[i];n.push(r.high),n.push(r.low)}return o.create(n,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),o=t.length,i=0;i<o;i++)t[i]=t[i].clone();return e}})}(),function(e){var t=h,n=t.lib,o=n.WordArray,i=n.Hasher,r=t.x64.Word,a=t.algo,s=[],l=[],c=[];(function(){for(var e=1,t=0,n=0;n<24;n++){s[e+5*t]=(n+1)*(n+2)/2%64;var o=(2*e+3*t)%5;e=t%5,t=o}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var i=1,a=0;a<24;a++){for(var u=0,d=0,h=0;h<7;h++){if(1&i){var p=(1<<h)-1;p<32?d^=1<<p:u^=1<<p-32}128&i?i=i<<1^113:i<<=1}c[a]=r.create(u,d)}})();var u=[];(function(){for(var e=0;e<25;e++)u[e]=r.create()})();var d=a.SHA3=i.extend({cfg:i.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new r.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,o=this.blockSize/2,i=0;i<o;i++){var r=e[t+2*i],a=e[t+2*i+1];r=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),(w=n[i]).high^=a,w.low^=r}for(var d=0;d<24;d++){for(var h=0;h<5;h++){for(var p=0,f=0,g=0;g<5;g++)p^=(w=n[h+5*g]).high,f^=w.low;var y=u[h];y.high=p,y.low=f}for(h=0;h<5;h++){var m=u[(h+4)%5],v=u[(h+1)%5],_=v.high,b=v.low;for(p=m.high^(_<<1|b>>>31),f=m.low^(b<<1|_>>>31),g=0;g<5;g++)(w=n[h+5*g]).high^=p,w.low^=f}for(var S=1;S<25;S++){var M=(w=n[S]).high,C=w.low,T=s[S];T<32?(p=M<<T|C>>>32-T,f=C<<T|M>>>32-T):(p=C<<T-32|M>>>64-T,f=M<<T-32|C>>>64-T);var k=u[l[S]];k.high=p,k.low=f}var I=u[0],E=n[0];for(I.high=E.high,I.low=E.low,h=0;h<5;h++)for(g=0;g<5;g++){var w=n[S=h+5*g],P=u[S],R=u[(h+1)%5+5*g],O=u[(h+2)%5+5*g];w.high=P.high^~R.high&O.high,w.low=P.low^~R.low&O.low}w=n[0];var D=c[d];w.high^=D.high,w.low^=D.low}},_doFinalize:function(){var t=this._data,n=t.words,i=(this._nDataBytes,8*t.sigBytes),r=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/r)*r>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,l=s/8,c=[],u=0;u<l;u++){var d=a[u],h=d.high,p=d.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(p),c.push(h)}return new o.init(c,s)},clone:function(){for(var e=i.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=i._createHelper(d),t.HmacSHA3=i._createHmacHelper(d)}(Math),function(){var e=h,t=e.lib.Hasher,n=e.x64,o=n.Word,i=n.WordArray,r=e.algo;function a(){return o.create.apply(o,arguments)}var s=[a(1116352408,3609767458),a(1899447441,602891725),a(3049323471,3964484399),a(3921009573,2173295548),a(961987163,4081628472),a(1508970993,3053834265),a(2453635748,2937671579),a(2870763221,3664609560),a(3624381080,2734883394),a(310598401,1164996542),a(607225278,1323610764),a(1426881987,3590304994),a(1925078388,4068182383),a(2162078206,991336113),a(2614888103,633803317),a(3248222580,3479774868),a(3835390401,2666613458),a(4022224774,944711139),a(264347078,2341262773),a(604807628,2007800933),a(770255983,1495990901),a(1249150122,1856431235),a(1555081692,3175218132),a(1996064986,2198950837),a(2554220882,3999719339),a(2821834349,766784016),a(2952996808,2566594879),a(3210313671,3203337956),a(3336571891,1034457026),a(3584528711,2466948901),a(113926993,3758326383),a(338241895,168717936),a(666307205,1188179964),a(773529912,1546045734),a(1294757372,1522805485),a(1396182291,2643833823),a(1695183700,2343527390),a(1986661051,1014477480),a(2177026350,1206759142),a(2456956037,344077627),a(2730485921,1290863460),a(2820302411,3158454273),a(3259730800,3505952657),a(3345764771,106217008),a(3516065817,3606008344),a(3600352804,1432725776),a(4094571909,1467031594),a(275423344,851169720),a(430227734,3100823752),a(506948616,1363258195),a(659060556,3750685593),a(883997877,3785050280),a(958139571,3318307427),a(1322822218,3812723403),a(1537002063,2003034995),a(1747873779,3602036899),a(1955562222,1575990012),a(2024104815,1125592928),a(2227730452,2716904306),a(2361852424,442776044),a(2428436474,593698344),a(2756734187,3733110249),a(3204031479,2999351573),a(3329325298,3815920427),a(3391569614,3928383900),a(3515267271,566280711),a(3940187606,3454069534),a(4118630271,4000239992),a(116418474,1914138554),a(174292421,2731055270),a(289380356,3203993006),a(460393269,320620315),a(685471733,587496836),a(852142971,1086792851),a(1017036298,365543100),a(1126000580,2618297676),a(1288033470,3409855158),a(1501505948,4234509866),a(1607167915,987167468),a(1816402316,1246189591)],l=[];(function(){for(var e=0;e<80;e++)l[e]=a()})();var c=r.SHA512=t.extend({_doReset:function(){this._hash=new i.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],i=n[1],r=n[2],a=n[3],c=n[4],u=n[5],d=n[6],h=n[7],p=o.high,f=o.low,g=i.high,y=i.low,m=r.high,v=r.low,_=a.high,b=a.low,S=c.high,M=c.low,C=u.high,T=u.low,k=d.high,I=d.low,E=h.high,w=h.low,P=p,R=f,O=g,D=y,A=m,L=v,B=_,U=b,N=S,j=M,x=C,G=T,H=k,F=I,V=E,q=w,Q=0;Q<80;Q++){var Y,K,W=l[Q];if(Q<16)K=W.high=0|e[t+2*Q],Y=W.low=0|e[t+2*Q+1];else{var z=l[Q-15],J=z.high,X=z.low,Z=(J>>>1|X<<31)^(J>>>8|X<<24)^J>>>7,$=(X>>>1|J<<31)^(X>>>8|J<<24)^(X>>>7|J<<25),ee=l[Q-2],te=ee.high,ne=ee.low,oe=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ie=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),re=l[Q-7],ae=re.high,se=re.low,le=l[Q-16],ce=le.high,ue=le.low;K=(K=(K=Z+ae+((Y=$+se)>>>0<$>>>0?1:0))+oe+((Y+=ie)>>>0<ie>>>0?1:0))+ce+((Y+=ue)>>>0<ue>>>0?1:0),W.high=K,W.low=Y}var de,he=N&x^~N&H,pe=j&G^~j&F,fe=P&O^P&A^O&A,ge=R&D^R&L^D&L,ye=(P>>>28|R<<4)^(P<<30|R>>>2)^(P<<25|R>>>7),me=(R>>>28|P<<4)^(R<<30|P>>>2)^(R<<25|P>>>7),ve=(N>>>14|j<<18)^(N>>>18|j<<14)^(N<<23|j>>>9),_e=(j>>>14|N<<18)^(j>>>18|N<<14)^(j<<23|N>>>9),be=s[Q],Se=be.high,Me=be.low,Ce=V+ve+((de=q+_e)>>>0<q>>>0?1:0),Te=me+ge;V=H,q=F,H=x,F=G,x=N,G=j,N=B+(Ce=(Ce=(Ce=Ce+he+((de+=pe)>>>0<pe>>>0?1:0))+Se+((de+=Me)>>>0<Me>>>0?1:0))+K+((de+=Y)>>>0<Y>>>0?1:0))+((j=U+de|0)>>>0<U>>>0?1:0)|0,B=A,U=L,A=O,L=D,O=P,D=R,P=Ce+(ye+fe+(Te>>>0<me>>>0?1:0))+((R=de+Te|0)>>>0<de>>>0?1:0)|0}f=o.low=f+R,o.high=p+P+(f>>>0<R>>>0?1:0),y=i.low=y+D,i.high=g+O+(y>>>0<D>>>0?1:0),v=r.low=v+L,r.high=m+A+(v>>>0<L>>>0?1:0),b=a.low=b+U,a.high=_+B+(b>>>0<U>>>0?1:0),M=c.low=M+j,c.high=S+N+(M>>>0<j>>>0?1:0),T=u.low=T+G,u.high=C+x+(T>>>0<G>>>0?1:0),I=d.low=I+F,d.high=k+H+(I>>>0<F>>>0?1:0),w=h.low=w+q,h.high=E+V+(w>>>0<q>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,o=8*e.sigBytes;return t[o>>>5]|=128<<24-o%32,t[30+(o+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(o+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(c),e.HmacSHA512=t._createHmacHelper(c)}(),function(){var e=h,t=e.x64,n=t.Word,o=t.WordArray,i=e.algo,r=i.SHA512,a=i.SHA384=r.extend({_doReset:function(){this._hash=new o.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=r._createHelper(a),e.HmacSHA384=r._createHmacHelper(a)}(),h.lib.Cipher||function(e){var t=h,n=t.lib,o=n.Base,i=n.WordArray,r=n.BufferedBlockAlgorithm,a=t.enc,s=(a.Utf8,a.Base64),l=t.algo.EvpKDF,c=n.Cipher=r.extend({cfg:o.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:m}return function(t){return{encrypt:function(n,o,i){return e(o).encrypt(t,n,o,i)},decrypt:function(n,o,i){return e(o).decrypt(t,n,o,i)}}}}()}),u=(n.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=n.BlockCipherMode=o.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=u.CBC=function(){var t=d.extend();function n(t,n,o){var i,r=this._iv;r?(i=r,this._iv=e):i=this._prevBlock;for(var a=0;a<o;a++)t[n+a]^=i[a]}return t.Encryptor=t.extend({processBlock:function(e,t){var o=this._cipher,i=o.blockSize;n.call(this,e,t,i),o.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),t.Decryptor=t.extend({processBlock:function(e,t){var o=this._cipher,i=o.blockSize,r=e.slice(t,t+i);o.decryptBlock(e,t),n.call(this,e,t,i),this._prevBlock=r}}),t}(),f=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,o=n-e.sigBytes%n,r=o<<24|o<<16|o<<8|o,a=[],s=0;s<o;s+=4)a.push(r);var l=i.create(a,o);e.concat(l)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(n.BlockCipher=c.extend({cfg:c.cfg.extend({mode:p,padding:f}),reset:function(){var e;c.reset.call(this);var t=this.cfg,n=t.iv,o=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=o.createEncryptor:(e=o.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(o,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=o.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),y=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?i.create([1398893684,1701076831]).concat(n).concat(t):t).toString(s)},parse:function(e){var t,n=s.parse(e),o=n.words;return 1398893684==o[0]&&1701076831==o[1]&&(t=i.create(o.slice(2,4)),o.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:t})}},m=n.SerializableCipher=o.extend({cfg:o.extend({format:y}),encrypt:function(e,t,n,o){o=this.cfg.extend(o);var i=e.createEncryptor(n,o),r=i.finalize(t),a=i.cfg;return g.create({ciphertext:r,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:o.format})},decrypt:function(e,t,n,o){return o=this.cfg.extend(o),t=this._parse(t,o.format),e.createDecryptor(n,o).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(t.kdf={}).OpenSSL={execute:function(e,t,n,o){o||(o=i.random(8));var r=l.create({keySize:t+n}).compute(e,o),a=i.create(r.words.slice(t),4*n);return r.sigBytes=4*t,g.create({key:r,iv:a,salt:o})}},_=n.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:v}),encrypt:function(e,t,n,o){var i=(o=this.cfg.extend(o)).kdf.execute(n,e.keySize,e.ivSize);o.iv=i.iv;var r=m.encrypt.call(this,e,t,i.key,o);return r.mixIn(i),r},decrypt:function(e,t,n,o){o=this.cfg.extend(o),t=this._parse(t,o.format);var i=o.kdf.execute(n,e.keySize,e.ivSize,t.salt);return o.iv=i.iv,m.decrypt.call(this,e,t,i.key,o)}})}(),h.mode.CFB=function(){var e=h.lib.BlockCipherMode.extend();function t(e,t,n,o){var i,r=this._iv;r?(i=r.slice(0),this._iv=void 0):i=this._prevBlock,o.encryptBlock(i,0);for(var a=0;a<n;a++)e[t+a]^=i[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var o=this._cipher,i=o.blockSize;t.call(this,e,n,i,o),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var o=this._cipher,i=o.blockSize,r=e.slice(n,n+i);t.call(this,e,n,i,o),this._prevBlock=r}}),e}(),h.mode.ECB=((c=h.lib.BlockCipherMode.extend()).Encryptor=c.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),c.Decryptor=c.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),c),h.pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,o=4*t,i=o-n%o,r=n+i-1;e.clamp(),e.words[r>>>2]|=i<<24-r%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},h.pad.Iso10126={pad:function(e,t){var n=4*t,o=n-e.sigBytes%n;e.concat(h.lib.WordArray.random(o-1)).concat(h.lib.WordArray.create([o<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},h.pad.Iso97971={pad:function(e,t){e.concat(h.lib.WordArray.create([2147483648],1)),h.pad.ZeroPadding.pad(e,t)},unpad:function(e){h.pad.ZeroPadding.unpad(e),e.sigBytes--}},h.mode.OFB=(d=(u=h.lib.BlockCipherMode.extend()).Encryptor=u.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,i=this._iv,r=this._keystream;i&&(r=this._keystream=i.slice(0),this._iv=void 0),n.encryptBlock(r,0);for(var a=0;a<o;a++)e[t+a]^=r[a]}}),u.Decryptor=d,u),h.pad.NoPadding={pad:function(){},unpad:function(){}},function(){var e=h,t=e.lib.CipherParams,n=e.enc.Hex;e.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var o=n.parse(e);return t.create({ciphertext:o})}}}(),function(){var e=h,t=e.lib.BlockCipher,n=e.algo,o=[],i=[],r=[],a=[],s=[],l=[],c=[],u=[],d=[],p=[];(function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,h=0;for(t=0;t<256;t++){var f=h^h<<1^h<<2^h<<3^h<<4;f=f>>>8^255&f^99,o[n]=f,i[f]=n;var g=e[n],y=e[g],m=e[y],v=257*e[f]^16843008*f;r[n]=v<<24|v>>>8,a[n]=v<<16|v>>>16,s[n]=v<<8|v>>>24,l[n]=v,v=16843009*m^65537*y^257*g^16843008*n,c[f]=v<<24|v>>>8,u[f]=v<<16|v>>>16,d[f]=v<<8|v>>>24,p[f]=v,n?(n=g^e[e[e[m^g]]],h^=e[e[h]]):n=h=1}})();var f=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,i=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],a=0;a<i;a++)a<n?r[a]=t[a]:(h=r[a-1],a%n?n>6&&a%n==4&&(h=o[h>>>24]<<24|o[h>>>16&255]<<16|o[h>>>8&255]<<8|o[255&h]):(h=o[(h=h<<8|h>>>24)>>>24]<<24|o[h>>>16&255]<<16|o[h>>>8&255]<<8|o[255&h],h^=f[a/n|0]<<24),r[a]=r[a-n]^h);for(var s=this._invKeySchedule=[],l=0;l<i;l++){if(a=i-l,l%4)var h=r[a];else h=r[a-4];s[l]=l<4||a<=4?h:c[o[h>>>24]]^u[o[h>>>16&255]]^d[o[h>>>8&255]]^p[o[255&h]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,a,s,l,o)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,u,d,p,i),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,o,i,r,a,s){for(var l=this._nRounds,c=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],p=4,f=1;f<l;f++){var g=o[c>>>24]^i[u>>>16&255]^r[d>>>8&255]^a[255&h]^n[p++],y=o[u>>>24]^i[d>>>16&255]^r[h>>>8&255]^a[255&c]^n[p++],m=o[d>>>24]^i[h>>>16&255]^r[c>>>8&255]^a[255&u]^n[p++],v=o[h>>>24]^i[c>>>16&255]^r[u>>>8&255]^a[255&d]^n[p++];c=g,u=y,d=m,h=v}g=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^n[p++],y=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^n[p++],m=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^n[p++],v=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[p++],e[t]=g,e[t+1]=y,e[t+2]=m,e[t+3]=v},keySize:8});e.AES=t._createHelper(g)}(),function(){var e=h,t=e.lib,n=t.WordArray,o=t.BlockCipher,i=e.algo,r=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],s=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],u=i.DES=o.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var o=r[n]-1;t[n]=e[o>>>5]>>>31-o%32&1}for(var i=this._subKeys=[],l=0;l<16;l++){var c=i[l]=[],u=s[l];for(n=0;n<24;n++)c[n/6|0]|=t[(a[n]-1+u)%28]<<31-n%6,c[4+(n/6|0)]|=t[28+(a[n+24]-1+u)%28]<<31-n%6;for(c[0]=c[0]<<1|c[0]>>>31,n=1;n<7;n++)c[n]=c[n]>>>4*(n-1)+3;c[7]=c[7]<<5|c[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=i[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],d.call(this,4,252645135),d.call(this,16,65535),p.call(this,2,858993459),p.call(this,8,16711935),d.call(this,1,1431655765);for(var o=0;o<16;o++){for(var i=n[o],r=this._lBlock,a=this._rBlock,s=0,u=0;u<8;u++)s|=l[u][((a^i[u])&c[u])>>>0];this._lBlock=a,this._rBlock=r^s}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,d.call(this,1,1431655765),p.call(this,8,16711935),p.call(this,2,858993459),d.call(this,16,65535),d.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function d(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function p(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=o._createHelper(u);var f=i.TripleDES=o.extend({_doReset:function(){var e=this._key.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),o=e.length<4?e.slice(0,2):e.slice(2,4),i=e.length<6?e.slice(0,2):e.slice(4,6);this._des1=u.createEncryptor(n.create(t)),this._des2=u.createEncryptor(n.create(o)),this._des3=u.createEncryptor(n.create(i))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=o._createHelper(f)}(),function(){var e=h,t=e.lib.StreamCipher,n=e.algo,o=n.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,o=this._S=[],i=0;i<256;i++)o[i]=i;i=0;for(var r=0;i<256;i++){var a=i%n,s=t[a>>>2]>>>24-a%4*8&255;r=(r+o[i]+s)%256;var l=o[i];o[i]=o[r],o[r]=l}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=i.call(this)},keySize:8,ivSize:0});function i(){for(var e=this._S,t=this._i,n=this._j,o=0,i=0;i<4;i++){n=(n+e[t=(t+1)%256])%256;var r=e[t];e[t]=e[n],e[n]=r,o|=e[(e[t]+e[n])%256]<<24-8*i}return this._i=t,this._j=n,o}e.RC4=t._createHelper(o);var r=n.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)i.call(this)}});e.RC4Drop=t._createHelper(r)}(),h.mode.CTRGladman=function(){var e=h.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,o=255&e;255===t?(t=0,255===n?(n=0,255===o?o=0:++o):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=o}else e+=1<<24;return e}function n(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var o=e.Encryptor=e.extend({processBlock:function(e,t){var o=this._cipher,i=o.blockSize,r=this._iv,a=this._counter;r&&(a=this._counter=r.slice(0),this._iv=void 0),n(a);var s=a.slice(0);o.encryptBlock(s,0);for(var l=0;l<i;l++)e[t+l]^=s[l]}});return e.Decryptor=o,e}(),function(){var e=h,t=e.lib.StreamCipher,n=e.algo,o=[],i=[],r=[],a=n.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var o=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)s.call(this);for(n=0;n<8;n++)i[n]^=o[n+4&7];if(t){var r=t.words,a=r[0],l=r[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),d=c>>>16|4294901760&u,h=u<<16|65535&c;for(i[0]^=c,i[1]^=d,i[2]^=u,i[3]^=h,i[4]^=c,i[5]^=d,i[6]^=u,i[7]^=h,n=0;n<4;n++)s.call(this)}},_doProcessBlock:function(e,t){var n=this._X;s.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)o[i]=16711935&(o[i]<<8|o[i]>>>24)|4278255360&(o[i]<<24|o[i]>>>8),e[t+i]^=o[i]},blockSize:4,ivSize:2});function s(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],a=65535&o,s=o>>>16,l=((a*a>>>17)+a*s>>>15)+s*s,c=((4294901760&o)*o|0)+((65535&o)*o|0);r[n]=l^c}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}e.Rabbit=t._createHelper(a)}(),h.mode.CTR=function(){var e=h.lib.BlockCipherMode.extend(),t=e.Encryptor=e.extend({processBlock:function(e,t){var n=this._cipher,o=n.blockSize,i=this._iv,r=this._counter;i&&(r=this._counter=i.slice(0),this._iv=void 0);var a=r.slice(0);n.encryptBlock(a,0),r[o-1]=r[o-1]+1|0;for(var s=0;s<o;s++)e[t+s]^=a[s]}});return e.Decryptor=t,e}(),function(){var e=h,t=e.lib.StreamCipher,n=e.algo,o=[],i=[],r=[],a=n.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var i=0;i<4;i++)s.call(this);for(i=0;i<8;i++)o[i]^=n[i+4&7];if(t){var r=t.words,a=r[0],l=r[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),u=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),d=c>>>16|4294901760&u,h=u<<16|65535&c;for(o[0]^=c,o[1]^=d,o[2]^=u,o[3]^=h,o[4]^=c,o[5]^=d,o[6]^=u,o[7]^=h,i=0;i<4;i++)s.call(this)}},_doProcessBlock:function(e,t){var n=this._X;s.call(this),o[0]=n[0]^n[5]>>>16^n[3]<<16,o[1]=n[2]^n[7]>>>16^n[5]<<16,o[2]=n[4]^n[1]>>>16^n[7]<<16,o[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;i<4;i++)o[i]=16711935&(o[i]<<8|o[i]>>>24)|4278255360&(o[i]<<24|o[i]>>>8),e[t+i]^=o[i]},blockSize:4,ivSize:2});function s(){for(var e=this._X,t=this._C,n=0;n<8;n++)i[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<i[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<i[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<i[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<i[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<i[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<i[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<i[6]>>>0?1:0)|0,this._b=t[7]>>>0<i[7]>>>0?1:0,n=0;n<8;n++){var o=e[n]+t[n],a=65535&o,s=o>>>16,l=((a*a>>>17)+a*s>>>15)+s*s,c=((4294901760&o)*o|0)+((65535&o)*o|0);r[n]=l^c}e[0]=r[0]+(r[7]<<16|r[7]>>>16)+(r[6]<<16|r[6]>>>16)|0,e[1]=r[1]+(r[0]<<8|r[0]>>>24)+r[7]|0,e[2]=r[2]+(r[1]<<16|r[1]>>>16)+(r[0]<<16|r[0]>>>16)|0,e[3]=r[3]+(r[2]<<8|r[2]>>>24)+r[1]|0,e[4]=r[4]+(r[3]<<16|r[3]>>>16)+(r[2]<<16|r[2]>>>16)|0,e[5]=r[5]+(r[4]<<8|r[4]>>>24)+r[3]|0,e[6]=r[6]+(r[5]<<16|r[5]>>>16)+(r[4]<<16|r[4]>>>16)|0,e[7]=r[7]+(r[6]<<8|r[6]>>>24)+r[5]|0}e.RabbitLegacy=t._createHelper(a)}(),h.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){var t=e.words,n=e.sigBytes-1;for(n=e.sigBytes-1;n>=0;n--)if(t[n>>>2]>>>24-n%4*8&255){e.sigBytes=n+1;break}}},h},"object"==typeof n?t.exports=n=i():"function"==typeof define&&define.amd?define([],i):(void 0).CryptoJS=i(),cc._RF.pop()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:75}],heroLevelUpEffect:[function(e,t,n){"use strict";cc._RF.push(t,"26026f5CbZLYZQrcRL03zlx","heroLevelUpEffect");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../Config/EnumTypes"),s=e("../../../Mgr/EventMgr"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playAnim="",t}return i(t,e),t.prototype.start=function(){this.anim=this.node.getComponent(sp.Skeleton),s.EventMgr.on(a.EventType.Battle_Hero_Prop_Upgrade,this.showLevelUpEffect,this)},t.prototype.showLevelUpEffect=function(){this.anim.setAnimation(0,this.playAnim,!1)},r([u(cc.String)],t.prototype,"playAnim",void 0),r([c],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../Config/EnumTypes":"EnumTypes","../../../Mgr/EventMgr":"EventMgr"}],isExsitOneActiveCreator:[function(e,t,n){"use strict";cc._RF.push(t,"b29c3ksggZK274geU1z9+IO","isExsitOneActiveCreator");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(n,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.isSuccess=function(){return!0},t}(e("./GuideCondition").default);n.default=r,cc._RF.pop()},{"./GuideCondition":"GuideCondition"}],skill_26101:[function(e,t,n){"use strict";cc._RF.push(t,"31807Lpkm1Jd5j020B07LmB","skill_26101");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../BattleMgr"),s=e("../Monster"),l=e("./Skill"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getComponentInChildren(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.node.opacity=255;for(var t=this.anim.findAnimation("animation").duration,n=0;n<3;n++)this.scheduleOnce(function(){e.attack()},t*(.25+.25*n));this.anim.setAnimation(0,"animation",!1),this.scheduleOnce(function(){e.anim2()},t)},t.prototype.anim2=function(){cc.tween(this.node).to(.5,{opacity:0}).start()},t.prototype.attack=function(){var e=this.searchClosetTarget();e&&e.getComponent(s.default).hit(this.damage,this.isCiritcal)},t.prototype.searchClosetTarget=function(){for(var e,t=a.default.instance.getBulletAtckMonster(),n=999,o=0;o<t.length;o++)t[o].x<n&&(n=t[o].x,e=t[o]);return e},r([u],t)}(l.default));n.default=d,cc._RF.pop()},{"../BattleMgr":"BattleMgr","../Monster":"Monster","./Skill":"Skill"}],skill_26102:[function(e,t,n){"use strict";cc._RF.push(t,"dc930xL2bFIdIrJwpovWltf","skill_26102");var o,i=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__decorate||function(e,t,n,o){var i,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(r<3?i(a):r>3?i(t,n,a):i(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../BattleMgr"),s=e("../Monster"),l=e("./Skill"),c=cc._decorator,u=c.ccclass,d=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.bornAfter=function(){this.anim=this.node.getChildByName("anim").getComponent(sp.Skeleton),this.anim1()},t.prototype.anim1=function(){var e=this;this.node.opacity=255,this.anim.timeScale=a.default.battleSpeed,this.anim.setAnimation(0,"wind_snow",!0);var t=this.anim.findAnimation("wind_snow").duration/a.default.battleSpeed;this.scheduleOnce(function(){e.anim2()},t),this.scheduleOnce(function(){for(var t,n=a.default.instance.getAliveMonster(),o=0;o<n.length;o++)t=n[o].getComponent(s.default),a.default.instance.bornEffect("normal_attack",n[o].getPosition()),t.hit(e.damage/2,e.isCiritcal)},.3*t),this.scheduleOnce(function(){for(var t,n=a.default.instance.getAliveMonster(),o=0;o<n.length;o++)t=n[o].getComponent(s.default),a.default.instance.bornEffect("normal_attack",n[o].getPosition()),t.hit(e.damage/2,e.isCiritcal)},.375*t)},t.prototype.anim2=function(){cc.tween(this.node).to(.5,{opacity:0}).start()},r([u],t)}(l.default));n.default=d,cc._RF.pop()},{"../BattleMgr":"BattleMgr","../Monster":"Monster","./Skill":"Skill"}]},{},["LanguageData","LanguageLabel","CfgInfo","Bar","GameLoading","BaseStorageInfo","BundleData","PropData","EnumTypes","GameData","GearStorageInfo","HeroStorageInfo","PartnerStorageInfo","ResearchStorageInfo","ShopSummonStorageInfo","SkillStorageInfo","StorageData","Global","Loading","ChestPanel","Main_BlessPanel","Main_ChestPanel","Main_EmailPanel","Main_PlaceAwardPanel","Main_RoulettePanel","Main_SpeedUpPanel","TestPanel","UIComplete","App","BattleMgr","Battle_HeroRushMgr","Battle_RelicMgr","Bullet","Bullet_Anim","Battle_HpBar","HurtLabel","Main_CombatToast","Main_CopyInfo","Main_StageComp","UIBossBattleTip","heroLevelUpEffect","Hero","HeroPartner","Monster","Battle_Fail_Panel","Partner","SceneCrl","Hero_Skill","Main_SkillSlots","Skill","Skill_1006","Skill_1007","Skill_21103","Skill_22101","Skill_22103","Skill_23101","Skill_23102","Skill_24101","Skill_24102","Skill_24103_1","Skill_24103_2","Skill_25101","Skill_25102","Skill_25103","Skill_26103","skill_26101","skill_26102","ClearRushBoss","GoldRushBoss","UIBossView","UICollectionListItem","UICollectionSymbolItem","UICollectionToggle","UICollectionView","Alert","AlertView","AsyncQueue","BaseUI","CommonToggle","CustomProgress","FitTop","IDetailView","IUIItem","InfoPopView","ItemPool","LockItemTipComp","Shake","StrengthenResultItem","StrengthenResultWindow","ToggleToPage","UIAssetInfo","UIAssetListInfo","UIAssetReceiveItem","UIAssetReceiveView","UICommonRewardItem","UIIcon","UIItemPool","UIRewardItem","UISlot","Main_BtnBless","Main_BtnExitHeroCopy","Main_BtnPlaceAward","Main_BtnRestart","Main_BtnRoulette","Main_BtnSpeedUp","RedPoint","RedPoint_Armor","RedPoint_Collection","RedPoint_Copy","RedPoint_DailyQuestExtraReward","RedPoint_DailyQuestReward","RedPoint_Hero","RedPoint_Mastery","RedPoint_Partner","RedPoint_Relic","RedPoint_Role","RedPoint_SevenChallenge","RedPoint_Shop","RedPoint_ShopLimitItems","RedPoint_Skill","RedPoint_SummonMenu","RedPoint_Weapon","TestBtn","ItemInfo","Copy_BossRuhKeyComp","Copy_BossRushItem","Copy_ClearRushItem","Copy_ClearRushKeyComp","Copy_GoldRushItem","Copy_GoldRushKeyComp","Copy_HelpBtn","Copy_HelpPanel","Copy_HeroRushItem","Copy_HeroRushKeyComp","Copy_RewardPanel","Copy_SelectPanel","Copy_HeroItem","Copy_HeroRush_HeroSelect","Copy_HeroRush_QuitPanel","Copy_HeroRush_Result","Copy_HeroRush_Select","Copy_InHeroCopy_Panel","Domain","GearDomain","GearListDomain","PartnerDomain","PartnerSlotDomain","SkillDomain","SkillSlotDomain","GearDetailView","GearListItem","GearPanelEntrance","GearWindow","Main","Main_Menu","Main_PanelOpen","Main_UI","Main_UserProp","AssetsMgr","BlessMgr","CollectionData","MgrCollection","EquipmentMgr","ExtraRewardData","ClickCommand","GuideCommadFactroy","GuideCommand","CustomEventTarget","GlobalEventTarget","GuideCfg","GuideEnums","GuideFinger","GuideMgr","GuideTask","GuideTaskMgr","GuideTextCfg","GuideTextDialog","GuideTextUI","GuideTouch","GuideUI","GuideUnlock","ClickInRegion","GuideVerification","GuideVerificationFactory","ChildActiveWeakGuide","LogionSelectWeakGuide","TaskCompleteWeakGuide","TaskWeakGuide","WeakGuide","GuideCondition","GuideConditionFactroy","IsExistActiveProductId","IsExistBlankCoordinate","IsExistOneActiveProduct","IsFirstDead","IsPlayerCanLevelUp","NodeVisible","TaskCanFinish","UnlockCustoms","UnlockSystem","isExsitOneActiveCreator","GuideHand","GuideMask","GuideNode","GuideUnlockMask","MgrGuide","HeroMgr","MgrMastery","MgrAds","MgrQuest","MgrRing","MgrSevenChallenge","MgrShop","MgrSummon","Main_MinePanel","MineBtnRedPoint","PartnerMgr","PropMgr","IQuestProxy","QuestChain","QuestDaily","QuestSevenChallenge","RelicMgr","RelicData","RouletteMgr","SignMgr","SkillMgr","LockItem","LockShow","MgrUnlock","UIMasterResetView","UIMasteryHelperView","UIMasteryInfo","UIMasteryItem","UIMasteryView","Main_PartnerPanel","PartnerDetailWindow","PartnerListItem","PartnerSlotItem","UIPartnerTagItem","UIPartnerTagsView","Main_RolePanel","UIHeroInfo","UserToggle","ISummonResultView","IUIShopListItem","IUIShopListView","Main_ShopPanel","ShopSummonResultWindow","ShopToggle","ShopVideoView","SummonLvUpTip","UIQualityItem","UIShopLimitDaily","UIShopLimitListItem","UIShopLimitListItemFree","UIShopLimitPage","UIShopLimitWeek","UIShopSymbolItem","UIShopToggle","UISummonItem","UISummonRateItem","UISummonRateWindow","UISummonResultItem","Toast","ToastView","UnlockTipMgr","UIGradeLabel","UIGradeSprite","UIHeroLevelPropIcon","UIHeroLevelPropPop","UIHeroLevelProps","UIHeroListItem","UIHeroListView","UIHeroSkillInfo","UIHeroUnlockProp","UIQuestChain","UIQuestDailyItem","UIQuestDailyView","UIRelicCollectionItem","UIRelicCollectionItemRelicInfo","UIRelicCollectionView","UIRelicDetailToggle","UIRelicDetailView","UIRelicFindResult","UIRelicPageView","UIRelicTypeItem","UIRingBreakView","UIRingDetailView","UIRingEquipInfo","UIRingInfo","UISetSwitch","UISettingView","UIDayChallenge","UIDayChallengeItem","UIDayRewardItem","UIDayRewardView","UISevenChallengeToggle","UISevenChallengeView","SignWindow","UISignItem","CommonCandidateItem","SkillDetailWindow","SkillListItem","SkillSlotItem","SkillWindow","Event","AssetPool","BaseMgr","BattleData","BundleMgr","EventMgr","FlyItemMgr","HttpMgr","ItemMgr","LanguageMgr","RandomHelper","SoundMgr","StorageMgr","TimeMgr","TimerHelper","VideoVipMgr","MIneTipPanel","MIneTipPanel_1","MineItem","MineMgr","Mine_Panel","ResearchItem","ResearchLine","ResearchMgr","UIMine","UIMineResearch","PlatForm_tt","PlatForm_wx","Platform","PlatformConfig","ResPanelOpen","ResPrefabBorn","Btn_BackMain","Btn_Setting","AwardShowComp","CoinComp","DayUpdateLabel_Hour","DiamondComp","Fontclip","DestroyAuto","MoveLeftRight","MoveUpDown","RotationAuto","ScaleAuto","ScaleOnce","ShakeAuto","Common_Pause","Common_SignPanel","Tool","ToolNode","UIUtil","crypto-js","NumberPlus","Secrect"]);