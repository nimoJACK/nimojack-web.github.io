window.__require=function e(t,o,i){function n(l,a){if(!o[l]){if(!t[l]){var c=l.split("/");if(c=c[c.length-1],!t[c]){var d="function"==typeof __require&&__require;if(!a&&d)return d(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+l+"'")}l=c}var s=o[l]={exports:{}};t[l][0].call(s.exports,function(e){return n(t[l][1][e]||e)},s,s.exports,e,t,o,i)}return o[l].exports}for(var r="function"==typeof __require&&__require,l=0;l<i.length;l++)n(i[l]);return n}({HeroDetail_EquipView:[function(e,t,o){"use strict";cc._RF.push(t,"65ca7CQaO9BCKdUIwENDtJr","HeroDetail_EquipView");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(r<3?n(l):r>3?n(t,o,l):n(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var l=cc._decorator,a=l.ccclass,c=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),r([a],t)}(cc.Component));o.default=c,cc._RF.pop()},{}],HeroDetail_GrowBar:[function(e,t,o){"use strict";cc._RF.push(t,"2820fvUgnhCxKoKgFqQMYhv","HeroDetail_GrowBar");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(r<3?n(l):r>3?n(t,o,l):n(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Bundle1_Loading/Scripts/Comp/Bar"),a=cc._decorator,c=a.ccclass,d=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.baseBar=null,t._baseValue=0,t}return n(t,e),Object.defineProperty(t.prototype,"baseValue",{get:function(){return this._baseValue},set:function(e){this._baseValue=e,this.value>1?this._baseValue=1:this._baseValue<0&&(this._baseValue=0),this.onBaseChange()},enumerable:!1,configurable:!0}),t.prototype.onBaseChange=function(){if(this.baseBar){var e=this.baseBar.getComponent(cc.Sprite);e.type=cc.Sprite.Type.FILLED,e.fillType=cc.Sprite.FillType.HORIZONTAL,this._reversal?(e.fillStart=1-this._baseValue,e.fillRange=1):(e.fillStart=0,e.fillRange=this._baseValue)}},r([d({type:cc.Node,visible:!0,displayName:"\u8fdb\u5ea6\u6761\u7684\u57fa\u7840\u6761"})],t.prototype,"baseBar",void 0),r([c],t)}(l.default);o.default=s,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Comp/Bar":void 0}],HeroDetail_GrowView:[function(e,t,o){"use strict";cc._RF.push(t,"fdfce2htZJNr5KR2pHrUy55","HeroDetail_GrowView");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(r<3?n(l):r>3?n(t,o,l):n(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),a=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),c=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),d=e("../../../Bundle2_Main/Scripts/Mgr/RoleMgr"),s=e("../../../Bundle2_Main/SeverTest/SeverMgr"),p=e("./HeroDetail_GrowBar"),u=cc._decorator,h=u.ccclass,f=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.massItem=null,t.strItem=null,t.agileItem=null,t.speedItem=null,t.mentalItem=null,t.refreshBtn=null,t.deleteBtn=null,t.roleData=null,t}return n(t,e),t.prototype.onLoad=function(){c.Tool.addClickEvent(this.refreshBtn,this.refreshGrowProp,this),c.Tool.addClickEvent(this.deleteBtn,this.fire,this)},t.prototype.updateData=function(e){this.roleData=e;var t=d.default.getJsonData(e);this.itemDeal(this.massItem,t.mass-d.default.growPointDownValue,e.mass,t.mass),this.itemDeal(this.strItem,t.str-d.default.growPointDownValue,e.str,t.str),this.itemDeal(this.agileItem,t.agile-d.default.growPointDownValue,e.agile,t.agile),this.itemDeal(this.speedItem,t.speed-d.default.growPointDownValue,e.speed,t.speed),this.itemDeal(this.mentalItem,t.mental-d.default.growPointDownValue,e.mental,t.mental)},t.prototype.itemDeal=function(e,t,o,i){var n=e.getChildByName("bar"),r=n.getChildByName("barValue");n.getComponent(p.default).value=o/i,n.getComponent(p.default).baseValue=t/i,r.getComponent(cc.Label).string=o+"/"+i},t.prototype.refreshGrowProp=function(){s.default.instance.refreshGrowPoint(this.roleData.index)},t.prototype.fire=function(){if(-1==s.default.instance.severData.nowFormation.indexOf(this.roleData.index)){var e=d.default.getJsonData(this.roleData);a.EventMgr.event(l.EventType.Tips_Toast_Event,e.name+this.roleData.index+"\u89e3\u96c7\u6210\u529f"),s.default.instance.reduceRole(this.roleData.index)}else a.EventMgr.event(l.EventType.Tips_Toast_Event,"\u8be5\u89d2\u8272\u5728\u9635\u5bb9\u4e2d\uff0c\u65e0\u6cd5\u89e3\u96c7")},r([f(cc.Node)],t.prototype,"massItem",void 0),r([f(cc.Node)],t.prototype,"strItem",void 0),r([f(cc.Node)],t.prototype,"agileItem",void 0),r([f(cc.Node)],t.prototype,"speedItem",void 0),r([f(cc.Node)],t.prototype,"mentalItem",void 0),r([f(cc.Node)],t.prototype,"refreshBtn",void 0),r([f(cc.Node)],t.prototype,"deleteBtn",void 0),r([h],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../Bundle1_Loading/Scripts/Mgr/EventMgr":void 0,"../../../Bundle1_Loading/Scripts/Tool/Tool":void 0,"../../../Bundle2_Main/Scripts/Mgr/RoleMgr":void 0,"../../../Bundle2_Main/SeverTest/SeverMgr":void 0,"./HeroDetail_GrowBar":"HeroDetail_GrowBar"}],HeroDetail_InfoView:[function(e,t,o){"use strict";cc._RF.push(t,"16fc8InTFdIx7hFw8wYm5Ps","HeroDetail_InfoView");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(r<3?n(l):r>3?n(t,o,l):n(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),a=e("../../../Bundle1_Loading/Scripts/Mgr/CfgMgr"),c=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),d=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),s=e("../../../Bundle2_Main/Scripts/Mgr/EquipMgr"),p=e("../../../Bundle2_Main/Scripts/Mgr/IconMgr"),u=e("../../../Bundle2_Main/Scripts/Mgr/RoleMgr"),h=e("../../../Bundle2_Main/Scripts/Panel/PanelMgr"),f=e("../../../Bundle2_Main/SeverTest/SeverMgr"),g=cc._decorator,v=g.ccclass,_=g.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.nameLabel=null,t.lvLabel=null,t.hpItem=null,t.mpItem=null,t.atkItem=null,t.defItem=null,t.topAgileItem=null,t.spritItem=null,t.recoveryItem=null,t.atkSpeedItem=null,t.attackRangeItem=null,t.moveSpeedItem=null,t.aimItem=null,t.dodgeItem=null,t.critItem=null,t.critDamageItem=null,t.massItem=null,t.strItem=null,t.downAgileItem=null,t.speedItem=null,t.mentalItem=null,t.btn_upgrade=null,t.btn_add=null,t.gearNode=null,t}return n(t,e),t.prototype.onLoad=function(){for(var e=0;e<this.gearNode.children.length;e++){var t=this.gearNode.children[e];d.Tool.addClickEvent(t,this.onSlotClick,this,[e])}},t.prototype.updateData=function(e){this.roleData=e,p.default.loadIcon(e.id,this.icon);var t=a.CfgMgr.instance.getCfg("Roles").find(function(t){return t.id==e.id});this.nameLabel.string=t.name,this.lvLabel.string="\u7b49\u7ea7\uff1a"+e.level,this.itemLabelDeal(this.hpItem,u.default.calHP(e)),this.itemLabelDeal(this.mpItem,u.default.calMP(e)),this.itemLabelDeal(this.atkItem,u.default.calAtk(e)),this.itemLabelDeal(this.defItem,u.default.calDef(e)),this.itemLabelDeal(this.topAgileItem,u.default.calNimble(e)),this.itemLabelDeal(this.spritItem,u.default.calSpirt(e)),this.itemLabelDeal(this.recoveryItem,u.default.calRecovery(e)),this.itemLabelDeal(this.atkSpeedItem,100/u.default.calAtkInvertal(e)),this.itemLabelDeal(this.attackRangeItem,u.default.calRange(e)),this.itemLabelDeal(this.moveSpeedItem,u.default.calMoveSpeed(e)),this.itemLabelDeal(this.aimItem,100*u.default.calAim(e)),this.itemLabelDeal(this.dodgeItem,100*u.default.calDodge(e)),this.itemLabelDeal(this.critItem,100*u.default.calCrit(e)),this.itemLabelDeal(this.critDamageItem,100*u.default.calCritDamage(e)),this.itemLabelDeal(this.massItem,u.default.calMass(e)),this.itemLabelDeal(this.strItem,u.default.calStr(e)),this.itemLabelDeal(this.downAgileItem,u.default.calAgile(e)),this.itemLabelDeal(this.speedItem,u.default.calSpeed(e)),this.itemLabelDeal(this.mentalItem,u.default.calMental(e));for(var o=0;o<this.gearNode.children.length;o++){var i=s.default.checkSlotIsWear(this.roleData.index,o),n=this.gearNode.children[o],r=n.getChildByName("typeIcon"),l=n.getChildByName("icon");i?(r.active=!1,l.active=!0,p.default.loadIcon(i.id,l.getComponent(cc.Sprite))):(r.active=!0,l.active=!1)}this.bottomBtnUpdate()},t.prototype.itemLabelDeal=function(e,t){e.getChildByName("label").getComponent(cc.Label).string=Math.floor(t).toString()},t.prototype.onBtnUpgradeClick=function(e){var t=e[0],o=a.CfgMgr.instance.getCfg("Roles"),i=f.default.instance.localData.hasRoles[t],n=o.find(function(e){return e.id==i.id});u.default.roleUpgradeCoin>f.default.instance.localData.coin?c.EventMgr.event(l.EventType.Tips_Toast_Event,"\u91d1\u5e01\u4e0d\u8db3"):i.level>=n.levelMax?c.EventMgr.event(l.EventType.Tips_Toast_Event,"\u7b49\u7ea7\u5df2\u5230\u4e0a\u9650"):f.default.instance.upgradeRole(u.default.roleUpgradeCoin,t)},t.prototype.onBtnAddClick=function(){var e=this;h.default.showPanel("Panel_HeroAdd",function(t){t.getComponent("Panel_HeroAdd").initData(e.roleData)})},t.prototype.bottomBtnUpdate=function(){d.Tool.addClickEvent(this.btn_upgrade,this.onBtnUpgradeClick,this,[this.roleData.index]),d.Tool.addClickEvent(this.btn_add,this.onBtnAddClick,this),this.btn_upgrade.getChildByName("coin").getChildByName("label").getComponent(cc.Label).string=u.default.roleUpgradeCoin.toString(),this.btn_add.getChildByName("redPoint").opacity=this.roleData.BPPoint>0?255:0},t.prototype.onSlotClick=function(e){var t=this,o=e[0];h.default.showPanel("Panel_ArmorDetail",function(e){var i=e.getComponent("Panel_ArmorDetail"),n=t.roleData;i.initData(o,n)})},r([_(cc.Sprite)],t.prototype,"icon",void 0),r([_(cc.Label)],t.prototype,"nameLabel",void 0),r([_(cc.Label)],t.prototype,"lvLabel",void 0),r([_(cc.Node)],t.prototype,"hpItem",void 0),r([_(cc.Node)],t.prototype,"mpItem",void 0),r([_(cc.Node)],t.prototype,"atkItem",void 0),r([_(cc.Node)],t.prototype,"defItem",void 0),r([_(cc.Node)],t.prototype,"topAgileItem",void 0),r([_(cc.Node)],t.prototype,"spritItem",void 0),r([_(cc.Node)],t.prototype,"recoveryItem",void 0),r([_(cc.Node)],t.prototype,"atkSpeedItem",void 0),r([_(cc.Node)],t.prototype,"attackRangeItem",void 0),r([_(cc.Node)],t.prototype,"moveSpeedItem",void 0),r([_(cc.Node)],t.prototype,"aimItem",void 0),r([_(cc.Node)],t.prototype,"dodgeItem",void 0),r([_(cc.Node)],t.prototype,"critItem",void 0),r([_(cc.Node)],t.prototype,"critDamageItem",void 0),r([_(cc.Node)],t.prototype,"massItem",void 0),r([_(cc.Node)],t.prototype,"strItem",void 0),r([_(cc.Node)],t.prototype,"downAgileItem",void 0),r([_(cc.Node)],t.prototype,"speedItem",void 0),r([_(cc.Node)],t.prototype,"mentalItem",void 0),r([_(cc.Node)],t.prototype,"btn_upgrade",void 0),r([_(cc.Node)],t.prototype,"btn_add",void 0),r([_(cc.Node)],t.prototype,"gearNode",void 0),r([v],t)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../Bundle1_Loading/Scripts/Mgr/CfgMgr":void 0,"../../../Bundle1_Loading/Scripts/Mgr/EventMgr":void 0,"../../../Bundle1_Loading/Scripts/Tool/Tool":void 0,"../../../Bundle2_Main/Scripts/Mgr/EquipMgr":void 0,"../../../Bundle2_Main/Scripts/Mgr/IconMgr":void 0,"../../../Bundle2_Main/Scripts/Mgr/RoleMgr":void 0,"../../../Bundle2_Main/Scripts/Panel/PanelMgr":void 0,"../../../Bundle2_Main/SeverTest/SeverMgr":void 0}],HeroDetail_SkillView:[function(e,t,o){"use strict";cc._RF.push(t,"eae5acEpjFLSLTLyoqictzs","HeroDetail_SkillView");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(r<3?n(l):r>3?n(t,o,l):n(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),a=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),c=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),d=e("../../../Bundle2_Main/Scripts/Config/Main_GameData"),s=e("../../../Bundle2_Main/Scripts/Mgr/IconMgr"),p=e("../../../Bundle2_Main/Scripts/Mgr/SkillMgr"),u=e("../../../Bundle2_Main/SeverTest/SeverMgr"),h=cc._decorator,f=h.ccclass,g=h.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skillList=null,t.detailNode=null,t.btn_refresh=null,t.nowSelectIndex=0,t}return n(t,e),t.prototype.onLoad=function(){for(var e=0;e<this.skillList.childrenCount;e++)c.Tool.addClickEvent(this.skillList.children[e],this.itemClick,this,[e]);c.Tool.addClickEvent(this.btn_refresh,this.refreshSkill,this)},t.prototype.initData=function(e){this.roleData=e,this.nowSelectIndex=0,this.updateData()},t.prototype.updateData=function(){for(var e=this.roleData.ownSkill,t=0;t<this.skillList.childrenCount;t++){var o=this.skillList.children[t];if(t>=e.length)this.itemLockDeal(o);else{var i=e[t].id;this.itemDeal(o,i,t==this.nowSelectIndex)}}var n=e[this.nowSelectIndex],r=p.default.getJsonData(n.id),l=this.detailNode.getChildByName("item").getChildByName("icon").getComponent(cc.Sprite),a=this.detailNode.getChildByName("nameLabel").getComponent(cc.Label),u=this.detailNode.getChildByName("qualityLabel").getComponent(cc.Label),h=this.detailNode.getChildByName("levelLabel").getComponent(cc.Label),f=this.detailNode.getChildByName("cdLabel").getComponent(cc.Label),g=this.detailNode.getChildByName("descLabel").getComponent(cc.Label);s.default.loadIcon(n.id,l),a.string=r.name,u.string="\u54c1\u8d28\uff1a"+d.default.qualityNames[p.default.getJsonData(n.id).quality],u.node.color=c.Tool.getRgbByHex(d.default.qualityColors[p.default.getJsonData(n.id).quality]),h.node.active=!1,r.property.cd?(f.node.active=!0,f.string="\u51b7\u5374\uff1a"+r.property.cd):f.node.active=!1,g.string=p.default.getSkillDesc(n)},t.prototype.itemDeal=function(e,t,o){var i=e.getChildByName("icon").getComponent(cc.Sprite),n=e.getChildByName("select"),r=e.getChildByName("lock");s.default.loadIcon(t,i),n.active=o,r.active=!1},t.prototype.itemLockDeal=function(e){var t=e.getChildByName("lock");e.getChildByName("select").active=!1,t.active=!0},t.prototype.itemClick=function(e){var t=e[0];t>=this.roleData.ownSkill.length?a.EventMgr.event(l.EventType.Tips_Toast_Event,"\u6280\u80fd\u69fd\u672a\u89e3\u9501"):this.nowSelectIndex!=t&&(this.nowSelectIndex=t,this.updateData())},t.prototype.refreshSkill=function(){u.default.instance.refreshSkill(this.roleData.index)},r([g(cc.Node)],t.prototype,"skillList",void 0),r([g(cc.Node)],t.prototype,"detailNode",void 0),r([g(cc.Node)],t.prototype,"btn_refresh",void 0),r([f],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../Bundle1_Loading/Scripts/Mgr/EventMgr":void 0,"../../../Bundle1_Loading/Scripts/Tool/Tool":void 0,"../../../Bundle2_Main/Scripts/Config/Main_GameData":void 0,"../../../Bundle2_Main/Scripts/Mgr/IconMgr":void 0,"../../../Bundle2_Main/Scripts/Mgr/SkillMgr":void 0,"../../../Bundle2_Main/SeverTest/SeverMgr":void 0}],Panel_HeroDetail:[function(e,t,o){"use strict";cc._RF.push(t,"e2e99SNl6VBgLL8ITtcAS/r","Panel_HeroDetail");var i,n=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(l=(r<3?n(l):r>3?n(t,o,l):n(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../Bundle1_Loading/Scripts/Comp/Bar"),a=e("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),c=e("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),d=e("../../../Bundle1_Loading/Scripts/Mgr/PrefabMgr"),s=e("../../../Bundle1_Loading/Scripts/Tool/Tool"),p=e("../../../Bundle2_Main/Scripts/Mgr/RoleMgr"),u=e("../../../Bundle2_Main/Scripts/Panel/Panel"),h=e("../../../Bundle2_Main/SeverTest/SeverMgr"),f=e("./HeroDetail_GrowView"),g=e("./HeroDetail_InfoView"),v=e("./HeroDetail_SkillView"),_=cc._decorator,y=_.ccclass,m=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectBtns=[],t.selectView=[],t.rolePoint=null,t.roleNameLabel=null,t.powerLabel=null,t.levelLabel=null,t.levelBar=null,t.levelBarValue=null,t.usingNode=null,t.btn_left=null,t.btn_right=null,t.roleDataArray=[],t.nowShowArrayIndex=0,t.nowShowIndex="",t}return n(t,e),t.prototype.init=function(){for(var e=0;e<this.selectBtns.length;e++)s.Tool.addClickEvent(this.selectBtns[e],this.openView,this,[e]);this.btn_left.active=!1,this.btn_right.active=!1,s.Tool.addClickEvent(this.btn_left,this.onClickLeft,this),s.Tool.addClickEvent(this.btn_right,this.onClickRight,this)},t.prototype.openCb=function(){this.openView([0]),c.EventMgr.on(a.EventType.Role_Update_Event,this.roleUpdate,this)},t.prototype.closeCb=function(){c.EventMgr.off(a.EventType.Role_Update_Event,this.roleUpdate,this)},t.prototype.openView=function(e){for(var t=e[0],o=0;o<this.selectView.length;o++)this.selectView[o].active=o==t;for(o=0;o<this.selectBtns.length;o++)this.selectBtns[o].getChildByName("active").opacity=o==t?255:0},t.prototype.roleDataInit=function(e){this.roleData=e,this.nowShowIndex=e.index,this.leftRightBtnUpdate();var t=p.default.getJsonData(e),o=h.default.instance.localData.nowFormation;this.rolePoint.destroyAllChildren(),d.default.bornPrefab("Role_"+e.id,this.rolePoint),this.roleNameLabel.string=t.name+this.nowShowIndex,this.powerLabel.string=p.default.calPower(e).toString(),this.levelLabel.string="LV."+e.level.toString(),this.levelBar.value=e.level/t.levelMax,this.levelBarValue.string=e.level.toString()+"/"+t.levelMax.toString();for(var i=-1!=o.indexOf(e.index)?0:1,n=0;n<this.usingNode.childrenCount;n++)this.usingNode.children[n].opacity=i==n?255:0;this.node.getComponentInChildren(g.default).updateData(this.roleData),this.node.getComponentInChildren(f.default).updateData(this.roleData),this.node.getComponentInChildren(v.default).initData(this.roleData)},t.prototype.roleUpdate=function(){for(var e in this.roleDataArray.length=0,h.default.instance.localData.hasRoles)this.roleDataArray.push(h.default.instance.localData.hasRoles[e]);for(var t=0;t<this.roleDataArray.length;t++)if(this.roleDataArray[t].index==this.nowShowIndex)return this.nowShowArrayIndex=t,void this.roleDataInit(this.roleDataArray[t]);this.nowShowArrayIndex>=this.roleDataArray.length&&(this.nowShowArrayIndex=this.roleDataArray.length-1),this.roleDataInit(this.roleDataArray[this.nowShowArrayIndex])},t.prototype.onClickLeft=function(){this.nowShowArrayIndex--,this.roleDataInit(this.roleDataArray[this.nowShowArrayIndex])},t.prototype.onClickRight=function(){this.nowShowArrayIndex++,this.roleDataInit(this.roleDataArray[this.nowShowArrayIndex])},t.prototype.leftRightBtnUpdate=function(){this.nowShowArrayIndex<=0?this.btn_left.active=!1:this.btn_left.active=!0,this.nowShowArrayIndex>=this.roleDataArray.length-1?this.btn_right.active=!1:this.btn_right.active=!0},r([m([cc.Node])],t.prototype,"selectBtns",void 0),r([m([cc.Node])],t.prototype,"selectView",void 0),r([m(cc.Node)],t.prototype,"rolePoint",void 0),r([m(cc.Label)],t.prototype,"roleNameLabel",void 0),r([m(cc.Label)],t.prototype,"powerLabel",void 0),r([m(cc.Label)],t.prototype,"levelLabel",void 0),r([m(l.default)],t.prototype,"levelBar",void 0),r([m(cc.Label)],t.prototype,"levelBarValue",void 0),r([m(cc.Node)],t.prototype,"usingNode",void 0),r([m(cc.Node)],t.prototype,"btn_left",void 0),r([m(cc.Node)],t.prototype,"btn_right",void 0),r([y],t)}(u.default);o.default=b,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Comp/Bar":void 0,"../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../Bundle1_Loading/Scripts/Mgr/EventMgr":void 0,"../../../Bundle1_Loading/Scripts/Mgr/PrefabMgr":void 0,"../../../Bundle1_Loading/Scripts/Tool/Tool":void 0,"../../../Bundle2_Main/Scripts/Mgr/RoleMgr":void 0,"../../../Bundle2_Main/Scripts/Panel/Panel":void 0,"../../../Bundle2_Main/SeverTest/SeverMgr":void 0,"./HeroDetail_GrowView":"HeroDetail_GrowView","./HeroDetail_InfoView":"HeroDetail_InfoView","./HeroDetail_SkillView":"HeroDetail_SkillView"}]},{},["HeroDetail_EquipView","HeroDetail_GrowBar","HeroDetail_GrowView","HeroDetail_InfoView","HeroDetail_SkillView","Panel_HeroDetail"]);