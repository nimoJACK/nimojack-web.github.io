window.__require=function t(e,o,n){function i(a,r){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var c="function"==typeof __require&&__require;if(!r&&c)return c(s,!0);if(l)return l(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var l="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({Panel_CopyTest:[function(t,e,o){"use strict";cc._RF.push(e,"1a152CZjrlBW7DFLjjfiP+a","Panel_CopyTest");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),l=this&&this.__decorate||function(t,e,o,n){var i,l=arguments.length,a=l<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(i=t[r])&&(a=(l<3?i(a):l>3?i(e,o,a):i(e,o))||a);return l>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var a=t("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),r=t("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),s=t("../../../Bundle1_Loading/Scripts/Tool/Tool"),c=t("../../../Bundle2_Main/Scripts/Mgr/IconMgr"),p=t("../../../Bundle2_Main/Scripts/Panel/Panel"),y=t("../../../Bundle2_Main/Scripts/Panel/PanelMgr"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playerLayout=null,e.enemyLayout=null,e.goBtn=null,e.outPutHeroBtn=null,e.outPutEnemyBtn=null,e.playerRoleDatas=[],e.enemyRoleDatas=[],e}var o;return i(e,t),o=e,e.prototype.init=function(){o.instance=this,this.initList(),this.updateData(),s.Tool.addClickEvent(this.goBtn,this.go,this),s.Tool.addClickEvent(this.outPutHeroBtn,this.outPutHero,this),s.Tool.addClickEvent(this.outPutEnemyBtn,this.outPutEnemy,this)},e.prototype.initList=function(){for(var t=0;t<this.playerLayout.children.length;t++)s.Tool.addClickEvent(this.playerLayout.children[t],this.onHeroClick,this,[t]);for(t=0;t<this.enemyLayout.children.length;t++)s.Tool.addClickEvent(this.enemyLayout.children[t],this.onEnemyClick,this,[t])},e.prototype.onHeroClick=function(t){var e=t[0];y.default.showPanel("Panel_CopyTestSelect",function(t){t.getComponent("Panel_CopyTestSelect").initData(e)})},e.prototype.onEnemyClick=function(t){var e=t[0];y.default.showPanel("Panel_CopyTestSelect",function(t){t.getComponent("Panel_CopyTestSelect").initData(e+5)})},e.prototype.updateData=function(){for(var t=0;t<this.playerLayout.children.length;t++)this.playerRoleDatas.length>t?this.itemDeal(this.playerLayout.children[t],this.playerRoleDatas[t]):this.itemDealEmpty(this.playerLayout.children[t]);for(t=0;t<this.enemyLayout.children.length;t++)this.enemyRoleDatas.length>t?this.itemDeal(this.enemyLayout.children[t],this.enemyRoleDatas[t]):this.itemDealEmpty(this.enemyLayout.children[t])},e.prototype.itemDeal=function(t,e){for(var o=0;o<t.children.length;o++)t.children[o].opacity="empty"!=t.children[o].name?255:0;var n=t.getChildByName("icon"),i=(t.getChildByName("tips"),t.getChildByName("level")),l=t.getChildByName("star"),a=t.getChildByName("isChoose"),r=t.getChildByName("empty"),s=t.getChildByName("select");for(s&&(s.opacity=0),r.opacity=0,a&&(a.opacity=0),c.default.loadIcon(e.id,n.getComponent(cc.Sprite)),i.getComponent(cc.Label).string=e.level.toString(),o=0;o<l.children.length;o++)l.children[o].children[0].opacity=o<e.quality?255:0},e.prototype.itemDealEmpty=function(t){for(var e=0;e<t.children.length;e++)t.children[e].opacity="empty"==t.children[e].name?255:0},e.prototype.select=function(t,e){e<5?e>=this.playerRoleDatas.length?this.playerRoleDatas.push(t):this.playerRoleDatas[e]=t:(e-=5)>=this.enemyRoleDatas.length?this.enemyRoleDatas.push(t):this.enemyRoleDatas[e]=t,this.updateData()},e.prototype.go=function(){0!=this.playerRoleDatas.length?0!=this.enemyRoleDatas.length?(r.EventMgr.event(a.EventType.Battle_GoCopyTest_Event,this.playerRoleDatas,this.enemyRoleDatas),this.close()):r.EventMgr.event(a.EventType.Tips_Toast_Event,"\u654c\u65b9\u81f3\u5c11\u6709\u4e00\u4e2a\u89d2\u8272"):r.EventMgr.event(a.EventType.Tips_Toast_Event,"\u6211\u65b9\u81f3\u5c11\u6709\u4e00\u4e2a\u89d2\u8272")},e.prototype.outPutHero=function(){s.Tool.downloadJSON(this.playerRoleDatas,"hero.json")},e.prototype.outPutEnemy=function(){s.Tool.downloadJSON(this.enemyRoleDatas,"enemy.json")},l([d(cc.Node)],e.prototype,"playerLayout",void 0),l([d(cc.Node)],e.prototype,"enemyLayout",void 0),l([d(cc.Node)],e.prototype,"goBtn",void 0),l([d(cc.Node)],e.prototype,"outPutHeroBtn",void 0),l([d(cc.Node)],e.prototype,"outPutEnemyBtn",void 0),o=l([h],e)}(p.default);o.default=f,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../Bundle1_Loading/Scripts/Mgr/EventMgr":void 0,"../../../Bundle1_Loading/Scripts/Tool/Tool":void 0,"../../../Bundle2_Main/Scripts/Mgr/IconMgr":void 0,"../../../Bundle2_Main/Scripts/Panel/Panel":void 0,"../../../Bundle2_Main/Scripts/Panel/PanelMgr":void 0}]},{},["Panel_CopyTest"]);