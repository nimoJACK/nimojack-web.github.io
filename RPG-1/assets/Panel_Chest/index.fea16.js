window.__require=function t(e,n,o){function i(r,h){if(!n[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var a="function"==typeof __require&&__require;if(!h&&a)return a(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var d=n[r]={exports:{}};e[r][0].call(d.exports,function(t){return i(e[r][1][t]||t)},d,d.exports,t,e,n,o)}return n[r].exports}for(var s="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({Panel_Chest:[function(t,e,n){"use strict";cc._RF.push(e,"5b1b65/1e5JwKlyIul07AST","Panel_Chest");var o,i=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__decorate||function(t,e,n,o){var i,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,n,o);else for(var h=t.length-1;h>=0;h--)(i=t[h])&&(r=(s<3?i(r):s>3?i(e,n,r):i(e,n))||r);return s>3&&r&&Object.defineProperty(e,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),h=t("../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),c=t("../../../Bundle1_Loading/Scripts/Tool/Tool"),a=t("../../../Bundle2_Main/Scripts/Panel/Panel"),d=t("../../../Bundle2_Main/Scripts/Panel/PanelMgr"),l=t("../../../Bundle2_Main/SeverTest/SeverMgr"),p=cc._decorator,u=p.ccclass,C=p.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_Chest=null,e.spriteFrames_Chest=[],e.node_ChestBtns=null,e.openBtn=null,e.integralBox=null,e.nowChestIndex=0,e.chestId=[40001,40002,40003,40004],e}return i(e,t),e.prototype.init=function(){},e.prototype.openCb=function(){this.init_Btns(),h.EventMgr.on(r.EventType.Item_Update_Event,this.updateChestUI,this)},e.prototype.closeCb=function(){h.EventMgr.off(r.EventType.Item_Update_Event,this.updateChestUI,this)},e.prototype.init_Btns=function(){var t=this;this.node_ChestBtns.children.forEach(function(e,n){e.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=t.spriteFrames_Chest[n],c.Tool.addClickEvent(e,t.click_ChestBtn,t,[n])}),c.Tool.addClickEvent(this.node_Chest.getChildByName("left"),this.changeChestIndex,this,[-1]),c.Tool.addClickEvent(this.node_Chest.getChildByName("right"),this.changeChestIndex,this,[1]),c.Tool.addClickEvent(this.openBtn,this.click_OpenBtn,this),c.Tool.addClickEvent(this.integralBox,this.click_IntegralBox,this),c.Tool.addClickEvent(this.integralBox.getChildByName("btn"),this.click_IntegralBox,this),this.updateChestUI()},e.prototype.click_ChestBtn=function(t){var e=t[0];this.nowChestIndex!=e&&(this.nowChestIndex=e,this.updateChestUI())},e.prototype.changeChestIndex=function(t){var e=t[0];e<0&&0==this.nowChestIndex||e>0&&this.nowChestIndex>=this.spriteFrames_Chest.length-1||(this.nowChestIndex+=e,this.updateChestUI())},e.prototype.click_OpenBtn=function(){var t=this.chestId[this.nowChestIndex],e=l.default.instance.localData.hasItems.find(function(e){return e.id==t});if(!e||e.count<=0)h.EventMgr.event(r.EventType.Tips_Toast_Event,"\u5b9d\u7bb1\u4e0d\u8db3");else{l.default.instance.useItem(t);var n=this;d.default.showPanel("Panel_ChestOpen",function(t){t.getComponent("Panel_ChestOpen").initChest(n.nowChestIndex,n.spriteFrames_Chest[n.nowChestIndex])})}},e.prototype.click_IntegralBox=function(){},e.prototype.updateChestUI=function(){var t=this;this.node_ChestBtns.children.forEach(function(e,n){e.y=n==t.nowChestIndex?20:0,e.getChildByName("isChose").opacity=n==t.nowChestIndex?255:0;var o=0,i=t.chestId[n],s=l.default.instance.localData.hasItems.find(function(t){return t.id==i});s&&(o=s.count),e.getChildByName("num").getComponent(cc.Label).string="X"+o.toString()}),this.node_Chest.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.spriteFrames_Chest[this.nowChestIndex];var e=0,n=this.chestId[this.nowChestIndex],o=l.default.instance.localData.hasItems.find(function(t){return t.id==n});o&&(e=o.count),this.node_Chest.getChildByName("num").getComponent(cc.Label).string="X"+e.toString(),this.node_Chest.getChildByName("left").active=this.nowChestIndex>0,this.node_Chest.getChildByName("right").active=this.nowChestIndex<this.spriteFrames_Chest.length-1},e.prototype.updateIntegralBoxUI=function(){},s([C(cc.Node)],e.prototype,"node_Chest",void 0),s([C([cc.SpriteFrame])],e.prototype,"spriteFrames_Chest",void 0),s([C(cc.Node)],e.prototype,"node_ChestBtns",void 0),s([C(cc.Node)],e.prototype,"openBtn",void 0),s([C(cc.Node)],e.prototype,"integralBox",void 0),s([u],e)}(a.default);n.default=_,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../Bundle1_Loading/Scripts/Mgr/EventMgr":void 0,"../../../Bundle1_Loading/Scripts/Tool/Tool":void 0,"../../../Bundle2_Main/Scripts/Panel/Panel":void 0,"../../../Bundle2_Main/Scripts/Panel/PanelMgr":void 0,"../../../Bundle2_Main/SeverTest/SeverMgr":void 0}]},{},["Panel_Chest"]);