window.__require=function t(o,e,s){function i(a,h){if(!e[a]){if(!o[a]){var r=a.split("/");if(r=r[r.length-1],!o[r]){var l="function"==typeof __require&&__require;if(!h&&l)return l(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+a+"'")}a=r}var c=e[a]={exports:{}};o[a][0].call(c.exports,function(t){return i(o[a][1][t]||t)},c,c.exports,t,o,e,s)}return e[a].exports}for(var n="function"==typeof __require&&__require,a=0;a<s.length;a++)i(s[a]);return i}({RPG_M_EquimentTest:[function(t,o,e){"use strict";cc._RF.push(o,"b197ebU4V1ADoDrUwN7mcUG","RPG_M_EquimentTest");var s,i=this&&this.__extends||(s=function(t,o){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}s(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),n=this&&this.__decorate||function(t,o,e,s){var i,n=arguments.length,a=n<3?o:null===s?s=Object.getOwnPropertyDescriptor(o,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,o,e,s);else for(var h=t.length-1;h>=0;h--)(i=t[h])&&(a=(n<3?i(a):n>3?i(o,e,a):i(o,e))||a);return n>3&&a&&Object.defineProperty(o,e,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=t("../../../Bundle1_Loading/Scripts/Config/EnumTypes"),h=t("../../../Bundle1_Loading/Scripts/Mgr/BundleMgr"),r=t("../../../Bundle1_Loading/Scripts/Tool/Tool"),l=t("../../../Bundle2_Main/Scripts/Mgr/AnimMgr"),c=t("./RPR_M_EquimentChoose"),d=cc._decorator,u=d.ccclass,p=d.property,f=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.clothJson=null,o.faceJson=null,o.hairJson=null,o.maskJson=null,o.hatJson=null,o.swordJson=null,o.bowJson=null,o.capeJson=null,o.decorateJson=null,o.staffJson=null,o.wingsJson=null,o.classJson=null,o.clothChoose=null,o.faceChoose=null,o.hairChoose=null,o.maskChoose=null,o.hatChoose=null,o.swordChoose=null,o.bowChoose=null,o.capeChoose=null,o.decorateChoose=null,o.staffChoose=null,o.wingsChoose=null,o.classChoose=null,o}var e;return i(o,t),e=o,o.prototype.onLoad=function(){e.instance=this,this.rolePoint=this.node.getChildByName("rolePoint"),this.outPutBtn=this.node.getChildByName("outPutBtn"),r.Tool.addClickEvent(this.outPutBtn,this.onOutputClick,this),this.clothChoose.initData(this.clothJson.json,"cloth"),this.faceChoose.initData(this.faceJson.json,"face"),this.hairChoose.initData(this.hairJson.json,"hair"),this.maskChoose.initData(this.maskJson.json,"mask"),this.hatChoose.initData(this.hatJson.json,"hat"),this.swordChoose.initData(this.swordJson.json,"sword"),this.bowChoose.initData(this.bowJson.json,"bow"),this.capeChoose.initData(this.capeJson.json,"cape"),this.decorateChoose.initData(this.decorateJson.json,"decorate"),this.staffChoose.initData(this.staffJson.json,"staff"),this.wingsChoose.initData(this.wingsJson.json,"wings"),this.classChoose.initData(this.classJson.json,"class");var t=new l.AnimParts;t.cloth="Cloth_blackSuit",t.face="Face_knightMale40",t.hair="Hair_scholarMale",t.hat="Hat_blackSuit",t.mask="Mask_sherlock";var o=new l.AnimParts;o.cloth="Cloth_knightMaleJunior",o.face="Face_knightMale40",o.hair="Hair_knightMaleJunior",o.hat="Hat_knightMaleJunior",o.sword="Sword_knightMaleJunior";var s=new l.AnimParts;this.nowSuit=new l.AnimParts;var i=s;this.bornRole(i)},o.prototype.bornRole=function(t){var o=this;h.default.getBundle(a.BundleName.Main,function(e){e.load("Prefab/Role_0",cc.Prefab,function(e,s){if(e)console.error(e);else{var i=cc.instantiate(s);o.rolePoint.addChild(i),i.x=0,i.y=0,o.nowRole=i;var n=i.getChildByName("anim").getComponent(sp.Skeleton),a=new Date,h=n.animation,r=n.skeletonData,c=new sp.SkeletonData;cc.js.mixin(c,r),c._uuid=r._uuid+"_"+a.getTime()+"_copy";var d=c.name,u=c.name+"_copy";c.name=u,c.atlasText=c.atlasText.replace(d,u),c.textureNames[0]=u+".png",c.init&&c.init(),n.skeletonData=c,n.setAnimation(0,h,!0),n.setAnimation(0,t.class+"_idle",!0),o.nowSuit=t,o.changeDeal(n,t.bow,l.default.bowNames),o.changeDeal(n,t.cape,l.default.capeNames),o.changeDeal(n,t.cloth,l.default.clothNames),o.changeDeal(n,t.decorate,l.default.decorateNames),o.changeDeal(n,t.face,l.default.faceNames),o.changeDeal(n,t.hair,l.default.hairNames),o.changeDeal(n,t.hat,l.default.hatNames),o.changeDeal(n,t.mask,l.default.maskNames),o.changeDeal(n,t.staff,l.default.staffNames),o.changeDeal(n,t.sword,l.default.swordNames),o.changeDeal(n,t.wings,l.default.wingsNames)}})})},o.prototype.changeDeal=function(t,o,e){""!=o&&h.default.getBundle(o,function(o){for(var s=function(s){var i=s;o.load(e[i],cc.Texture2D,function(o,s){o?console.error(o):l.default.changeSlot(t,e[i],s)})},i=0;i<e.length;i++)s(i)})},o.prototype.switchSuit=function(t,o){var e=this.nowRole.getChildByName("anim").getComponent(sp.Skeleton);if(this.nowSuit[t]=o,"class"!=t){var s=l.default[t+"Names"];this.changeDeal(e,o,s)}else e.setAnimation(0,o+"_idle",!0)},o.prototype.closeChoose=function(){this.clothChoose.isShow=!1,this.faceChoose.isShow=!1,this.hairChoose.isShow=!1,this.maskChoose.isShow=!1,this.hatChoose.isShow=!1,this.swordChoose.isShow=!1,this.bowChoose.isShow=!1,this.capeChoose.isShow=!1,this.decorateChoose.isShow=!1,this.staffChoose.isShow=!1,this.wingsChoose.isShow=!1},o.prototype.onOutputClick=function(){console.log("\u8f93\u51fa\u5f53\u524d\u6362\u88c5\u4fe1\u606f:",JSON.stringify(this.nowSuit))},n([p(cc.JsonAsset)],o.prototype,"clothJson",void 0),n([p(cc.JsonAsset)],o.prototype,"faceJson",void 0),n([p(cc.JsonAsset)],o.prototype,"hairJson",void 0),n([p(cc.JsonAsset)],o.prototype,"maskJson",void 0),n([p(cc.JsonAsset)],o.prototype,"hatJson",void 0),n([p(cc.JsonAsset)],o.prototype,"swordJson",void 0),n([p(cc.JsonAsset)],o.prototype,"bowJson",void 0),n([p(cc.JsonAsset)],o.prototype,"capeJson",void 0),n([p(cc.JsonAsset)],o.prototype,"decorateJson",void 0),n([p(cc.JsonAsset)],o.prototype,"staffJson",void 0),n([p(cc.JsonAsset)],o.prototype,"wingsJson",void 0),n([p(cc.JsonAsset)],o.prototype,"classJson",void 0),n([p(c.default)],o.prototype,"clothChoose",void 0),n([p(c.default)],o.prototype,"faceChoose",void 0),n([p(c.default)],o.prototype,"hairChoose",void 0),n([p(c.default)],o.prototype,"maskChoose",void 0),n([p(c.default)],o.prototype,"hatChoose",void 0),n([p(c.default)],o.prototype,"swordChoose",void 0),n([p(c.default)],o.prototype,"bowChoose",void 0),n([p(c.default)],o.prototype,"capeChoose",void 0),n([p(c.default)],o.prototype,"decorateChoose",void 0),n([p(c.default)],o.prototype,"staffChoose",void 0),n([p(c.default)],o.prototype,"wingsChoose",void 0),n([p(c.default)],o.prototype,"classChoose",void 0),e=n([u],o)}(cc.Component);e.default=f,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../Bundle1_Loading/Scripts/Mgr/BundleMgr":void 0,"../../../Bundle1_Loading/Scripts/Tool/Tool":void 0,"../../../Bundle2_Main/Scripts/Mgr/AnimMgr":void 0,"./RPR_M_EquimentChoose":"RPR_M_EquimentChoose"}],RPR_M_EquimentChoose:[function(t,o,e){"use strict";cc._RF.push(o,"6b1d4NQLilKYKV23GGE0h44","RPR_M_EquimentChoose");var s,i=this&&this.__extends||(s=function(t,o){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])})(t,o)},function(t,o){function e(){this.constructor=t}s(t,o),t.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),n=this&&this.__decorate||function(t,o,e,s){var i,n=arguments.length,a=n<3?o:null===s?s=Object.getOwnPropertyDescriptor(o,e):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,o,e,s);else for(var h=t.length-1;h>=0;h--)(i=t[h])&&(a=(n<3?i(a):n>3?i(o,e,a):i(o,e))||a);return n>3&&a&&Object.defineProperty(o,e,a),a};Object.defineProperty(e,"__esModule",{value:!0});var a=t("../../../Bundle1_Loading/Scripts/Tool/Tool"),h=t("./RPG_M_EquimentTest"),r=cc._decorator,l=r.ccclass,c=(r.property,function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.isInit=!1,o.data=[],o.type="",o.isShow=!1,o.speed=2e3,o}return i(o,t),o.prototype.initData=function(t,o){this.data=t,this.type=o,this.isInit=!0,this.bgNode=this.node.getChildByName("bg"),this.maskNode=this.node.getChildByName("mask"),this.layoutNode=this.maskNode.getChildByName("scrollview").getChildByName("view").getChildByName("content");for(var e=this.data.length,s=1;s<e;s++){var i=cc.instantiate(this.layoutNode.children[0]);this.layoutNode.addChild(i)}for(s=0;s<this.layoutNode.childrenCount;s++)this.layoutNode.children[s].getChildByName("label").getComponent(cc.Label).string=this.data[s]["\u4e2d\u6587"],a.Tool.addClickEvent(this.layoutNode.children[s],this.onClickItem,this,[s],!0,!1);a.Tool.addClickEvent(this.bgNode,this.onClickShow,this,[],!0,!1)},o.prototype.onClickShow=function(){var t=!this.isShow;h.default.instance.closeChoose(),this.isShow=t,this.node.setSiblingIndex(this.node.parent.childrenCount-1)},o.prototype.onClickItem=function(t){var o=t[0];this.bgNode.getChildByName("label").getComponent(cc.Label).string=this.data[o]["\u4e2d\u6587"],h.default.instance.switchSuit(this.type,this.data[o]["\u82f1\u6587"]),this.onClickShow()},o.prototype.update=function(t){if(this.isInit){var o=this.layoutNode.height+50;o>400&&(o=400);var e=this.isShow?o:50;this.isShow?this.maskNode.height<e&&(this.maskNode.height+=this.speed*t,this.maskNode.height>e&&(this.maskNode.height=e)):this.maskNode.height>e&&(this.maskNode.height-=this.speed*t,this.maskNode.height<e&&(this.maskNode.height=e))}},n([l],o)}(cc.Component));e.default=c,cc._RF.pop()},{"../../../Bundle1_Loading/Scripts/Tool/Tool":void 0,"./RPG_M_EquimentTest":"RPG_M_EquimentTest"}]},{},["RPG_M_EquimentTest","RPR_M_EquimentChoose"]);