System.register("chunks:///_virtual/2DShow3D.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,s,a,o,h,u,c,l,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,o=e.Camera,h=e.RenderTexture,u=e.SpriteFrame,c=e.Rect,l=e.UITransform,p=e.Sprite,d=e.Component}],execute:function(){var f,m,x,T,w;s._RF.push({},"860e4GyAQpJ/pFumbHbSlQB","2DShow3D",void 0);var g=a.ccclass,v=a.property;e("DShow3D",(f=g("DShow3D"),m=v(o),f((w=t((T=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(t,"camera",w,n(t)),t.renderTexture=null,t.scaleAxis=.5,t.frame=void 0,t}r(t,e);var s=t.prototype;return s.start=function(){var e=this;this.renderTexture=new h,this.renderTexture.reset({width:375,height:667}),this.node.active=!1,this.scheduleOnce((function(){e.node.active=!0})),this.frame=new u,this.frame.texture=this.renderTexture,this.frame.rect=new c(0,0,this.renderTexture.width,this.renderTexture.height),this.frame.flipUVY=!0,this.node.getComponent(l).setContentSize(this.renderTexture.width,this.renderTexture.height),this.camera.targetTexture=this.renderTexture},s.update=function(){this.node.getComponent(p).spriteFrame=this.frame},t}(d)).prototype,"camera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=T))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/AimStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraHandler.ts","./ComposerHandler.ts","./HardLookAtHandler.ts","./BaseStage.ts"],(function(n){"use strict";var e,t,a,r,o,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){a=n.CameraHandler},function(n){r=n.ComposerHandler},function(n){o=n.HardLookAtHandler},function(n){c=n.BaseStage}],execute:function(){t._RF.push({},"9aaa9R0RxZFwrBQPW5bAcZD","AimStage",void 0);n("AimStage",function(n){function t(){for(var e,t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return(e=n.call.apply(n,[this].concat(c))||this)._handlers=[new a(e._vcam),new r(e._vcam),new o(e._vcam)],e}e(t,n);var c=t.prototype;return c.onEnable=function(){this._handlers.forEach((function(n){return n.enable=!0}))},c.onDisable=function(){this._handlers.forEach((function(n){return n.enable=!1}))},c.updateStage=function(n){var e=this._vcam.aim,t=this._handlers[e.type];t&&t.updateCamera(n)},t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/AppConfig.ts",["cc"],(function(t){"use strict";var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"0d20aYuKMNOaLpLCja1ucLs","AppConfig",void 0);t("default",{wechat:{videoAdUnitId:["adunit-58f46e673c2fa729"],interstitialAdUnitId:["adunit-c6f7cc3f4e05d3ac"],customAd:["adunit-473795cd8fb8fca2","adunit-d8b1a3ef33877866"],finishCustomAd:["adunit-c620e0a2360f4303"]}});c._RF.pop()}}}));

System.register("chunks:///_virtual/AutoScroll.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,s,e,l,o,r,c,n,a;return{setters:[function(t){i=t.applyDecoratedDescriptor,s=t.inheritsLoose,e=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.ScrollView,n=t.v2,a=t.Component}],execute:function(){var u,h,f,d;o._RF.push({},"a75d1uQdLhKfJU99KUbdLWv","AutoScroll",void 0);var p=r.ccclass,y=r.property;t("default",p("AutoScroll")((f=i((h=function(t){function i(){for(var i,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,e(i,"scrollSpeed",f,l(i)),e(i,"isVertical",d,l(i)),i.scroll=null,i.isReady=!1,i.isDown=!0,i}s(i,t);var o=i.prototype;return o.onLoad=function(){this.scroll=this.node.getComponent(c)},o.start=function(){var t=this;this.scheduleOnce((function(){t.isReady=!0}),1)},o.onEnable=function(){var t=this;this.scheduleOnce((function(){t.isReady=!0}),1)},o.onDisable=function(){this.isReady=!1},o.update=function(t){var i=this;if(this.isReady&&!this.scroll.isScrolling()){var s=this.isVertical?this.scroll.getScrollOffset().y:-this.scroll.getScrollOffset().x,e=this.isVertical?this.scroll.getMaxScrollOffset().y:this.scroll.getMaxScrollOffset().x;this.isDown?(s+=this.scrollSpeed)<e?this.isVertical?this.scroll.scrollToOffset(n(0,s)):this.scroll.scrollToOffset(n(s,0)):(this.isDown=!1,this.isReady=!1,this.scheduleOnce((function(){i.isReady=!0}),1)):(s-=this.scrollSpeed)>0?this.isVertical?this.scroll.scrollToOffset(n(0,s)):this.scroll.scrollToOffset(n(s,0)):(this.isDown=!0,this.isReady=!1,this.scheduleOnce((function(){i.isReady=!0}),1))}},i}(a)).prototype,"scrollSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),d=i(h.prototype,"isVertical",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=h))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/Bar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,a,l,o,n,s,p,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,l=e.createClass},function(e){o=e.cclegacy,n=e._decorator,s=e.Node,p=e.CCFloat,u=e.Sprite,c=e.Component}],execute:function(){var v,y,h,f,g,_,b,d,m;o._RF.push({},"bef7diNtE1G9LMs03e0/hQp","Bar",void 0);var C=n.ccclass,B=n.property,D=n.executeInEditMode,L=n.menu;e("Bar",(v=C("Bar"),y=D(!0),h=L("UI/Comp/Bar"),f=B({type:s,visible:!0,displayName:"进度条的条"}),g=B({type:p,visible:!0,displayName:"进度"}),_=B({visible:!0,displayName:"翻转"}),v(b=y(b=h((m=t((d=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,i(t,"bar",m,a(t)),t._value=0,t._reversal=!1,t}return r(t,e),t.prototype.onChange=function(){if(this.bar){var e=this.bar.getComponent(u);e.type=u.Type.FILLED,e.fillType=u.FillType.HORIZONTAL,this._reversal?(e.fillStart=1-this._value,e.fillRange=1):(e.fillStart=0,e.fillRange=this._value)}},l(t,[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.value>1?this._value=1:this.value<0&&(this._value=0),this.onChange()}},{key:"reversal",get:function(){return this._reversal},set:function(e){this._reversal=e,this.onChange()}}]),t}(c)).prototype,"bar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(d.prototype,"value",[g],Object.getOwnPropertyDescriptor(d.prototype,"value"),d.prototype),t(d.prototype,"reversal",[_],Object.getOwnPropertyDescriptor(d.prototype,"reversal"),d.prototype),b=d))||b)||b)||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/Base.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy}],execute:function(){var s;e("BaseFlag",void 0),t._RF.push({},"3be5frJskNL5ZI9D4VeEHjM","Base",void 0),function(e){e[e.None=0]="None",e[e.Enable=1]="Enable",e[e.Custom=4]="Custom"}(s||(s=e("BaseFlag",{})));e("Base",function(){function e(){this._objFlag=0}return n(e,[{key:"enable",get:function(){return!!(this._objFlag&s.Enable)},set:function(e){e?this._objFlag&s.Enable||(this._objFlag|=s.Enable,this.onEnable&&this.onEnable()):this._objFlag&s.Enable&&(this._objFlag&=~s.Enable,this.onDisable&&this.onDisable())}}]),e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BasePlatform.ts",["cc"],(function(i){"use strict";var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){var e;i("PlatformType",void 0),t._RF.push({},"d1550qjUB1Ax5sikt2CoDP0","BasePlatform",void 0),function(i){i[i.WeiXin=0]="WeiXin",i[i.Qq=1]="Qq",i[i.Vivo=2]="Vivo",i[i.Oppo=3]="Oppo",i[i.ZiJieTiaoDong=4]="ZiJieTiaoDong",i[i.Mgc=5]="Mgc",i[i.Swan=6]="Swan",i[i.Android=7]="Android",i[i.Ios=8]="Ios"}(e||(e=i("PlatformType",{})));i("default",function(){function i(){this.bannerId="",this.videoId="",this.interId="",this.gridId=[],this.existBannerAd=!1,this.existVideoAd=!1,this.existInterAd=!1,this.existGridAd=!1,this.init()}return i.prototype.init=function(){console.error("初始化平台失败")},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(t){"use strict";var e,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.Base}],execute:function(){n._RF.push({},"f3957i4i6tInKV6Rdsk1/N/","BaseStage",void 0);t("BaseStage",function(t){function n(e){var n;return(n=t.call(this)||this)._vcam=e,n}return e(n,t),n.prototype.updateStage=function(t){},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/BgStyle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./StageData.ts","./EventMgr.ts"],(function(t){"use strict";var e,n,i,r,o,a,s,c,u,l,p,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Material,c=t.MeshRenderer,u=t.Component},function(t){l=t.EventType},function(t){p=t.StageData},function(t){f=t.EventMgr}],execute:function(){var g,y,h,d,v;o._RF.push({},"72497BL0mVMYaiK2dXvWsbj","BgStyle",void 0);var S=a.ccclass,m=a.property;t("BgStyle",(g=S("BgStyle"),y=m([s]),g((v=e((d=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(e,"mats",v,r(e)),e}n(e,t);var o=e.prototype;return o.start=function(){f.on(l.UI_Style_Switch,this,this.updateBg),this.updateBg()},o.onDestroy=function(){f.off(l.UI_Style_Switch,this,this.updateBg)},o.updateBg=function(){this.node.getComponent(c).material=this.mats[p.instance.nowModelId]},e}(u)).prototype,"mats",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=d))||h));o._RF.pop()}}}));

System.register("chunks:///_virtual/BodyStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraHandler.ts","./FreeLookHandler.ts","./TrackedHandler.ts","./BaseStage.ts"],(function(e){"use strict";var n,t,a,r,o,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){a=e.CameraHandler},function(e){r=e.FreeLookHandler},function(e){o=e.TrackedHandler},function(e){c=e.BaseStage}],execute:function(){t._RF.push({},"91293QxSQ5IN51MM9zHKjye","BodyStage",void 0);e("BodyStage",function(e){function t(){for(var n,t=arguments.length,c=new Array(t),s=0;s<t;s++)c[s]=arguments[s];return(n=e.call.apply(e,[this].concat(c))||this)._handlers=[new a(n._vcam),new r(n._vcam),new o(n._vcam)],n}n(t,e);var c=t.prototype;return c.onEnable=function(){this._handlers.forEach((function(e){return e.enable=!0}))},c.onDisable=function(){this._handlers.forEach((function(e){return e.enable=!1}))},c.updateStage=function(e){var n=this._vcam.body,t=this._handlers[n.type];t&&t.updateCamera(e)},t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/BornMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,n,o,r,a,l,s,c,d,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.Node,s=e.Vec3,c=e.Quat,d=e.instantiate,u=e.Component}],execute:function(){var h,p,v,y,g,m,b,f,P,C,w,B,N;r._RF.push({},"4c103o8VTxP2o+HJt/2Plvl","BornMgr",void 0);var M=a.ccclass,S=a.property,z=a.menu;e("BornMgr",(h=M("BornMgr"),p=z("Mgr/BornMgr"),v=S({type:l,visible:!0,displayName:"首页舞台"}),y=S({type:l,visible:!0,displayName:"选关舞台"}),g=S({type:l,visible:!0,displayName:"关卡舞台"}),m=S({type:l,visible:!0,displayName:"预载体"}),h(b=p(((N=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(i=e.call.apply(e,[this].concat(r))||this).mainScene=void 0,n(i,"home",P,o(i)),n(i,"StageChoose",C,o(i)),n(i,"stage",w,o(i)),n(i,"nodePools",B,o(i)),i}t(i,e);var r=i.prototype;return r.onLoad=function(){this.init()},r.init=function(){i.instance=this,this.mainScene=this.node.scene,this.nodePools.active=!1},r.bornObjFromPool=function(e,i,t,n,o,r){var a;void 0===t&&(t=null),void 0===n&&(n=new s),void 0===o&&(o=new c),void 0===r&&(r=new s(1,1,1));for(var l=this.nodePools.getChildByName(e),u=0,h=l.children.length-1;h>=0;h--)if(l.children[h].name==i&&!l.children[h].active&&++u>1){(a=l.children[h]).active=!0;break}if(!a){var p=l.getChildByName(i);a=d(p)}return t?t.addChild(a):this.mainScene.addChild(a),a.setPosition(n),a.setRotation(o),a.setScale(r),a},r.recyleObj=function(e,i,t){var n=this.nodePools.getChildByName(i);e.name=t,e.active=!1,this.stage.addChild(e),e.setPosition(new s),n.addChild(e)},i}(u)).instance=void 0,P=i((f=N).prototype,"home",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=i(f.prototype,"StageChoose",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=i(f.prototype,"stage",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=i(f.prototype,"nodePools",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=f))||b)||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/Button3D.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./EventMgr.ts","./SoundMgr.ts"],(function(t){"use strict";var e,n,r,i,o,a,u,c,p,s,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,u=t.Component},function(t){c=t.ClickType,p=t.SoundType},function(t){s=t.EventMgr},function(t){l=t.SoundMgr}],execute:function(){var y,f,v,d;o._RF.push({},"66a5dgpdGVPE7devwcMTb8R","Button3D",void 0);var g=a.ccclass,h=a.property;t("Button3D",g("Button3D")((v=e((f=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"eventType",v,i(e)),r(e,"param",d,i(e)),e}return n(e,t),e.prototype.onClick=function(){s.event(this.eventType,this.param),this.eventType==c.StageChoose_Stage_Click?l.instacne.playSound(p.Select):l.instacne.playSound(p.Button)},e}(u)).prototype,"eventType",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d=e(f.prototype,"param",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),y=f))||y);o._RF.pop()}}}));

System.register("chunks:///_virtual/CameraHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(e){"use strict";var t,n,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){r=e.Base}],execute:function(){n._RF.push({},"afacb7lEPtHtbhSDdmkKpy2","CameraHandler",void 0);e("CameraHandler",function(e){function n(t){var n;return(n=e.call(this)||this)._vcam=t,n}return t(n,e),n.prototype.updateCamera=function(e){},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/CasingController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,r,n,o,a,l,c,u,s,m,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Vec3,c=e.randomRange,u=e.RigidBody,s=e.game,m=e.Quat,p=e.Component}],execute:function(){var h,f,b,y,g,F,d,x,w,R,z;o._RF.push({},"ca719q/Yr9HmaRsA1tO8Z7+","CasingController",void 0);var _=a.ccclass,C=a.property;e("CasingController",_("CasingController")((b=i((f=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,r(i,"minXForce",b,n(i)),r(i,"maxXForce",y,n(i)),r(i,"minYForce",g,n(i)),r(i,"maxYForce",F,n(i)),r(i,"minZForce",d,n(i)),r(i,"maxZForce",x,n(i)),r(i,"minRotation",w,n(i)),r(i,"maxRotation",R,n(i)),r(i,"despawnTime",z,n(i)),i._euler=new l(c(-180,180),c(-180,180),0),i}t(i,e);var o=i.prototype;return o.start=function(){var e=this,i=this.getComponent(u);i&&(i.applyLocalTorque(new l(c(this.minRotation,this.maxRotation),c(this.minRotation,this.maxRotation),c(this.minRotation,this.maxRotation))),i.applyLocalForce(new l(c(this.minXForce,this.maxXForce),c(this.minYForce,this.maxYForce),c(this.minZForce,this.maxZForce)))),this.scheduleOnce((function(){e.node.destroy(),s.emit("__playCasingSound")}),this.despawnTime)},o.update=function(e){this._euler.x+=2500*e,this._euler.y+=2500*e,this.node.rotation=m.fromEuler(this.node.rotation,this._euler.x,this._euler.y,this._euler.z)},i}(p)).prototype,"minXForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),y=i(f.prototype,"maxXForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),g=i(f.prototype,"minYForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),F=i(f.prototype,"maxYForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),d=i(f.prototype,"minZForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-12}}),x=i(f.prototype,"maxZForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),w=i(f.prototype,"minRotation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-360}}),R=i(f.prototype,"maxRotation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),z=i(f.prototype,"despawnTime",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=f))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/CharactorController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts"],(function(t){"use strict";var e,i,o,n,r,a,s,c,d,h,_,p,l,u,f,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Vec3,c=t.Node,d=t.Quat,h=t.SkeletalAnimation,_=t.systemEvent,p=t.SystemEvent,l=t.lerp,u=t.KeyCode,f=t.Component},function(t){m=t.EPSILON}],execute:function(){var S,v,y,E,T;r._RF.push({},"7746a+UgodEsIQnpKZLVysP","CharactorController",void 0);var g,K=a.ccclass,D=a.property;!function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=4]="LEFT",t[t.RIGHT=8]="RIGHT"}(g||(g={}));var N=new s;t("CharactorController",(S=K("CharactorController"),v=D(c),S((T=e((E=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"cameraNode",T,n(e)),e._animation=null,e._state="Idle",e._rotation=new d,e._movingSpeed=0,e._rotateSpeed=0,e._movingSpeedTo=0,e._rotationSpeedTo=0,e._direction=0,e}i(e,t);var r=e.prototype;return r.start=function(){null===this.cameraNode&&(this.cameraNode=this._getRenderScene().cameras[0].node)},r.onEnable=function(){this._animation=this.getComponent(h),_.on(p.EventType.KEY_DOWN,this._onKeyDown,this),_.on(p.EventType.KEY_UP,this._onKeyUp,this)},r.onDisable=function(){_.off(p.EventType.KEY_DOWN,this._onKeyDown,this),_.off(p.EventType.KEY_UP,this._onKeyUp,this)},r.update=function(t){this._rotateSpeed=l(this._rotateSpeed,this._rotationSpeedTo,10*t),this._movingSpeed=l(this._movingSpeed,this._movingSpeedTo,5*t),this.node.rotation=this.node.rotation.lerp(this._rotation,this._rotateSpeed*t),this.node.position=this.node.position.add(s.multiplyScalar(N,this.node.forward.negative(),this._movingSpeed*t))},r._onKeyDown=function(t){var e=this._direction;switch(t.keyCode){case u.KEY_W:e|=g.UP;break;case u.KEY_S:e|=g.DOWN;break;case u.KEY_A:e|=g.LEFT;break;case u.KEY_D:e|=g.RIGHT}this._updateDirection(e)},r._onKeyUp=function(t){var e=this._direction;switch(t.keyCode){case u.KEY_W:e&=~g.UP;break;case u.KEY_S:e&=~g.DOWN;break;case u.KEY_A:e&=~g.LEFT;break;case u.KEY_D:e&=~g.RIGHT}this._updateDirection(e)},r._updateDirection=function(t){if(this._direction!==t){if(this._direction=t,!this.cameraNode)return;var e=this.cameraNode.forward;N.set(0,0,0),this._direction&g.UP&&N.add3f(e.x,0,e.z),this._direction&g.DOWN&&N.add3f(-e.x,0,-e.z),this._direction&g.LEFT&&N.add3f(e.z,0,-e.x),this._direction&g.RIGHT&&N.add3f(-e.z,0,e.x),this._direction>0&&N.lengthSqr()>m&&(d.fromViewUp(this._rotation,N.normalize()),this._movingSpeedTo=4,this._rotationSpeedTo=5,this._setState("Running")),0===this._direction&&(this._movingSpeedTo=this._rotationSpeedTo=0,this._movingSpeed=this._rotateSpeed=0,this._setState("Idle"))}},r._setState=function(t){this._state!==t&&(this._state=t,this._animation&&this._animation.crossFade(t))},e}(f)).prototype,"cameraNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=E))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/CinestaionImpulseSource.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./Math.ts","./VCamNoise.ts","./NoiseGenerator.ts"],(function(e){"use strict";var i,t,n,o,r,s,a,u,c,l,p,m,f,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Component},function(e){u=e.cinestation},function(e){c=e.EPSILON,l=e.quarticDamp},function(e){p=e.VCamNoise,m=e.NoiseType},function(e){f=e.NoiseGenerator,h=e.NoiseProfile}],execute:function(){var y,_,d,D,I,g;r._RF.push({},"a2054HVIkhGUYOxTPABQa7g","CinestaionImpulseSource",void 0);var v=s.ccclass,b=s.property;e("CinestaionImpulseSource",(y=v("CinestaionImpulseSource"),_=b({type:p}),y((I=i((D=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(i=e.call.apply(e,[this].concat(r))||this)._generator=new f,i._impluseDecay=0,n(i,"noise",I,o(i)),n(i,"decayTime",g,o(i)),i}t(i,e);var r=i.prototype;return r.onLoad=function(){this.node.on("setImpulse",this._setImpulse,this)},r._setImpulse=function(e){void 0===e&&(e=1),this._impluseDecay=e},r.onEnable=function(){u.addImpulseSource(this)},r.onDisable=function(){u.removeImpulseSource(this)},r.generateImpulse=function(e){if(this._impluseDecay<=c)return null;this._impluseDecay=l(this._impluseDecay,0,this.decayTime,e);for(var i=this._generator.fractalNoise(this.noise,e),t=0;t<i.length;t++)i[t]*=this._impluseDecay;return i},i}(a)).prototype,"noise",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e=new p).type=m.Perlin,e.profile=h.Shake_6D,e.amplitudeGain=.5,e.frequncyGain=4,e;var e}}),g=i(D.prototype,"decayTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),d=D))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationBrain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./EventMgr.ts","./CinestationData.ts","./CinestationShareAssets.ts","./Visualization.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,l,c,u,d,p,f,m,h,C,_,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,n=e.inheritsLoose,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Enum,l=e.Vec2,c=e.Camera,u=e.utils,d=e.primitives,p=e.clamp01,f=e.lerp},function(e){m=e.EventType},function(e){h=e.EventMgr},function(e){C=e.cinestation},function(e){_=e.cinestationShareAssets},function(e){v=e.Visualization}],execute:function(){var b,g,y,w,T,D,P,B,R,I,E,M,x;e("CinestationBlendStyle",void 0),o._RF.push({},"74f8188NbxO264ejP51X1vr","CinestationBrain",void 0);var Z,z=r.ccclass,L=r.property,O=r.executionOrder,S=r.executeInEditMode;!function(e){e[e.Linear=0]="Linear"}(Z||(Z=e("CinestationBlendStyle",{})));var A=e("CinestationBlendDefinition",(b=z("CinestationBlendDefinition"),g=L({tooltip:"混合插值类型。\n目前仅支持线行插值，后续会支持更多",type:s(Z)}),y=L({tooltip:"切换时间。数值为0时，为直接切换"}),b((D=t((T=function(){i(this,"style",D,this),i(this,"time",P,this)}).prototype,"style",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Z.Linear}}),P=t(T.prototype,"time",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),w=T))||w)),H=new l;e("CinestationBrain",(B=z("CinestationBrain"),R=O(-1),I=L(A),B(E=S(E=R((x=t((M=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).__selectedCamera=null,t._material=_.viewMaterial,t._visibleInRuntime=!0,i(t,"brainBlend",x,a(t)),t.nowIndex=0,t}n(t,e);var o=t.prototype;return o.onLoad=function(){C.mainCamera=this.getComponent(c),C.lerpTime=this.brainBlend.time,h.on(m.Game_Cam_Switch,this,this.switchCam)},o._updateMesh=function(e){return u.createMesh(d.quad(),e)},o.update=function(t){e.prototype.update.call(this,t);var i=this._getActiveCamera();if(null!=i){i.updateCamera(t);var n=C.blendTime>-1?C.blendTime:this.brainBlend.time;C.lerpTime<n?(C.lerpTime+=t,this._lerpToMainCamera(i,p(C.lerpTime/this.brainBlend.time))):this._applyToMainCamera(i)}},o.switchCam=function(e){void 0===e&&(e=-1),-1!=e?this.nowIndex=e:this.nowIndex++;var t=C.vcams;t[this.nowIndex%t.length].active=!0},o._getActiveCamera=function(){var e=C.vcam=C.getPriorCamera();return this.visible=CC_EDITOR?!!this.__selectedCamera:e&&e.debug,this._setDebugProperties(CC_EDITOR?this.__selectedCamera:e),e},o._setDebugProperties=function(e){if(e&&(CC_EDITOR||e.debug)){if(e._composerChanged){e._composerChanged=!1;var t=e.aim.composer;_.__setDebugProperty("deadZoneWidth",t.deadZoneWidth),_.__setDebugProperty("deadZoneHeight",t.deadZoneHeight),_.__setDebugProperty("softZoneWidth",t.softZoneWidth),_.__setDebugProperty("softZoneHeight",t.softZoneHeight)}e.lookAt&&_.__setDebugProperty("lookatPoint",C.worldToScreen(H,e.lookaheadPosition))}},o._lerpToMainCamera=function(e,t){if(!CC_EDITOR&&C.mainCamera){var i=C.mainCamera,n=e;switch(this.brainBlend.style){case Z.Linear:i.node.worldPosition=i.node.worldPosition.lerp(n.finalPosition,t),i.node.worldRotation=i.node.worldRotation.lerp(n.finalRotation,t),i.fov=f(i.fov,n.lens.fov,t),i.near=f(i.near,n.lens.near,t),i.far=f(i.far,n.lens.far,t)}}},o._applyToMainCamera=function(e){if(!CC_EDITOR&&C.mainCamera){var t=C.mainCamera,i=e;t.node.worldPosition=i.finalPosition,t.node.worldRotation=i.finalRotation,t.fov=i.lens.fov,t.near=i.lens.near,t.far=i.lens.far}},t}(v)).prototype,"brainBlend",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new A}}),E=M))||E)||E)||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,a;return{setters:[function(e){t=e.createClass,i=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e.Vec3}],execute:function(){r._RF.push({},"8557eOKYVBCHKKtG3JMOZtJ","CinestationData",void 0);var s=new a;e("cinestation",new(function(){function e(){this._vcam=null,this._vcamSolo=null,this._virtualCameras=[],this._impulseSources=[],this.lerpTime=0,this.blendTime=-1,this.mainCamera=null}var r=e.prototype;return r.activeCamera=function(e,t){void 0===t&&(t=-1),this._vcamSolo!==e&&(this._vcamSolo=e,this.lerpTime=0,this.blendTime=t)},r.addCamera=function(e){-1===this._virtualCameras.indexOf(e)&&this._virtualCameras.push(e)},r.removeCamera=function(e){var t=this._virtualCameras.indexOf(e);-1!==t&&this._virtualCameras.splice(t,1)},r.addImpulseSource=function(e){-1===this._impulseSources.indexOf(e)&&this._impulseSources.push(e)},r.removeImpulseSource=function(e){var t=this._impulseSources.indexOf(e);-1!==t&&this._impulseSources.splice(t,1)},r.getPriorCamera=function(){return this._vcamSolo||this._virtualCameras.filter((function(e){return e.enabled})).sort((function(e,t){return t.priority-e.priority}))[0]},r.worldToScreen=function(e,t){if(this.mainCamera){var i=CC_EDITOR?cce.Camera.camera.camera:this.mainCamera.camera,r=a.transformMat4(s,t,i.matViewProj).add(a.ONE).multiplyScalar(.5);e.set(r.x,r.y)}return e},t(e,[{key:"vcam",get:function(){return null===this._vcam&&(this._vcam=this.getPriorCamera()),this._vcam},set:function(e){if(this._vcam!==e){this._vcam=e;for(var t,r=i(this._virtualCameras);!(t=r()).done;){var a=t.value;a===e?a.onActive():a.onDeActive()}}}},{key:"vcams",get:function(){return this._virtualCameras}},{key:"impulseSources",get:function(){return this._impulseSources}}]),e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationShareAssets.ts",["cc","./Effect.ts","./Effect3_4.ts"],(function(e){"use strict";var t,i,n,s,a,r,c,o,f;return{setters:[function(e){t=e.cclegacy,i=e.Material,n=e.game,s=e.Game,a=e.gfx,r=e.EffectAsset,c=e.VERSION},function(e){o=e.Effect},function(e){f=e.Effect3_4}],execute:function(){t._RF.push({},"53319txRnNOJ7hdwo/uO++u","CinestationShareAssets",void 0);var u=new i;u._uuid="cinestation-line-material";var E=new i;E._uuid="cinestation-view-material",n.on(s.EVENT_GAME_INITED,(function(){u.initialize({effectName:"unlit",defines:{USE_VERTEX_COLOR:!0},states:{primitive:a.PrimitiveMode.LINE_LIST}}),u.passes.forEach((function(e){return e.tryCompile()}));var e=Object.assign(new r,c>"3.4.0"?f:o);e.onLoaded(),E.initialize({effectAsset:e}),E.passes.forEach((function(e){return e.tryCompile()}))}));e("cinestationShareAssets",new(function(){function e(){this.viewMaterial=E,this.lineMaterial=u}return e.prototype.__setDebugProperty=function(e,t){this.viewMaterial.setProperty(e,t)},e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationSmoothPath.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./Visualization.ts"],(function(t){"use strict";var o,e,n,i,r,s,a,l,h,c,d,u,p,_,f,g,v,P;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,s=t.createClass},function(t){a=t.cclegacy,l=t._decorator,h=t.Vec3,c=t.Vec2,d=t.Node,u=t.Vec4,p=t.clamp,_=t.Color,f=t.utils},function(t){g=t.Spline,v=t.Vec3_closestPointOnSegment},function(t){P=t.Visualization}],execute:function(){var y,C,m,w,x,b,M,z,D;a._RF.push({},"234b1QMPE9PjaikyMraAdcc","CinestationSmoothPath",void 0);var A=l.ccclass,S=l.property,E=l.executeInEditMode,L=new h,I=new h,N=new h,O=new c;t("CinestationSmoothPath",(y=A("CinestationSmoothPath"),C=S({visible:!1}),m=S({visible:!1}),w=S({visible:!1}),y(x=E((M=o((b=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return o=t.call.apply(t,[this].concat(r))||this,n(o,"_looped",M,i(o)),n(o,"_localControlPoints1",z,i(o)),n(o,"_localControlPoints2",D,i(o)),o}e(o,t);var a=o.prototype;return a.onLoad=function(){if(CC_EDITOR){this.node.on(d.EventType.CHILD_ADDED,this._onChildAdded,this),this.node.on(d.EventType.CHILD_REMOVED,this._onNodeChanged,this);for(var t,o=r(this.node.children);!(t=o()).done;){var e=t.value;this._onNodeChanged(e)}}},a._onChildAdded=function(t){var o=this.node.children,e=o.length;if(2===e)t.position=new h(o[0].position).add3f(0,0,5);else if(e>2){var n=o[e-3].position,i=o[e-2].position,r=new h(i).subtract(n).normalize().multiplyScalar(5);t.position=r.add(i)}this._onNodeChanged(t)},a._onNodeChanged=function(t){var o=this;t.on(d.EventType.TRANSFORM_CHANGED,(function(){o._modelChanged=!0})),this._modelChanged=!0},a._updateControlPoints=function(){var t=this.node.children,o=t.length;if(o>1){for(var e=new Array(o),n=new Array(o),i=new Array(o),r=0;r<o;r++){e[r]=new u,n[r]=new u;var s=t[r].position;i[r]=new u(s.x,s.y,s.z,0)}this.looped?g.ComputeSmoothControlPointsLooped(i,e,n):g.ComputeSmoothControlPoints(i,e,n),this._localControlPoints1.length=o,this._localControlPoints2.length=o;for(var a=0;a<o;a++)this._localControlPoints1[a]=new h(e[a].x,e[a].y,e[a].z),this._localControlPoints2[a]=new h(n[a].x,n[a].y,n[a].z)}},a._getBoundingIndices=function(t,o){t=this._clampProgress(t);var e=this.node.children.length;return e<2?o.x=o.y=0:(o.x=Math.floor(t),o.x>=e&&(t-=this._maxProgress,o.x=0),o.y=o.x+1,o.y==e&&(this.looped?o.y=0:(--o.y,--o.x))),t},a._clampProgress=function(t){var o=this._maxProgress;return this._looped&&o>0?((t%=o)<0&&(t+=o),t):p(t,0,o)},a.evaluatePosition=function(t,o){return this.evaluateLocalPosition(t,o).add(this.node.worldPosition)},a.evaluateLocalPosition=function(t,o){var e=this.node.children;if(0===e.length)return t.set(this.node.position);var n=O.set(0,0);return o=this._getBoundingIndices(o,n),n.x===n.y?t.set(e[n.x].position):g.Bezier3(t,o-n.x,e[n.x].position,this._localControlPoints1[n.x],this._localControlPoints2[n.x],e[n.y].position)},a.findClosestPoint=function(t,o,e,n){var i=this._minProgress,r=this._maxProgress;if(e>=0){var s=Math.floor(Math.min(e,Math.max(1,(r-i)/2)));i=o-s,r=o+s+1,this.looped||(i=Math.max(i,this._minProgress),r=Math.min(r,this._maxProgress))}for(var a=o,l=1/0,c=1/p(n,1,100),d=this.evaluatePosition(L,0),u=i+c;u<=r;u+=c){var _=this.evaluatePosition(I,u),f=v(t,d,_),g=h.squaredDistance(t,h.lerp(N,d,_,f));g<l&&(l=g,a=u-(1-f)*c),d.set(_)}return a},a._updateMesh=function(t){this._updateControlPoints();for(var o=[],e=this.node.children,n=0;n<e.length;n+=.1)o.push(this.evaluateLocalPosition(new h,n));var i=[],r=[],s=[],a=[],l=new _(0,1,0,1),c=new _(.3,.3,.3,1);function d(t,o,e){t&&o&&(h.toArray(i,t,i.length),h.toArray(i,o,i.length),r.push(e.r,e.g,e.b,e.a),r.push(e.r,e.g,e.b,e.a))}for(var u=0;u+1<o.length;u++){var p=o[u],g=o[u+1],v=new h(g).subtract(p).normalize(),P=new h(v.z,v.y,-v.x).multiplyScalar(.1);0===u&&(s.push(new h(p).subtract(P)),a.push(new h(p).add(P))),s.push(new h(g).subtract(P)),a.push(new h(g).add(P)),d(new h(p).subtract(P),new h(p).add(P),l),d(p,g,c)}this._looped&&d(o[o.length-1],o[0],c);for(var y=0;y+1<s.length;y++)d(s[y],s[y+1],l);this._looped&&d(s[s.length-1],s[0],l);for(var C=0;C+1<a.length;C++)d(a[C],a[C+1],l);return this._looped&&d(a[a.length-1],a[0],l),f.createMesh({positions:i,colors:r},t)},s(o,[{key:"looped",get:function(){return this._looped},set:function(t){this._looped!==t&&(this._looped=t,this._modelChanged=!0)}},{key:"_minProgress",get:function(){return 0}},{key:"_maxProgress",get:function(){var t=this.node.children.length-1;return t<1?0:this.looped?t+1:t}}]),o}(P)).prototype,"_looped",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=o(b.prototype,"_localControlPoints1",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=o(b.prototype,"_localControlPoints2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o(b.prototype,"looped",[S],Object.getOwnPropertyDescriptor(b.prototype,"looped"),b.prototype),x=b))||x)||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/colliderCheck.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,r,c,n,l,s,i;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.createClass},function(e){c=e.cclegacy,n=e._decorator,l=e.CCFloat,s=e.RigidBody,i=e.Component}],execute:function(){var p,a,u,y;c._RF.push({},"74ba24tARNICI7dsbmSIo62","colliderCheck",void 0);var g=n.ccclass,h=n.property;e("colliderCheck",(p=g("colliderCheck"),a=h({type:l,visible:!0,displayName:"随便修改一下值触发"}),p((t((y=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))||this)._value=0,t}return o(t,e),r(t,[{key:"value",get:function(){return this._value},set:function(e){console.log(this.getComponent(s).getMask()),console.log(this.getComponent(s).getGroup()),console.log(this.getComponent(s).type),this.destroy()}}]),t}(i)).prototype,"value",[a],Object.getOwnPropertyDescriptor(y.prototype,"value"),y.prototype),u=y))||u));c._RF.pop()}}}));

System.register("chunks:///_virtual/Comp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts"],(function(t){"use strict";var o,e,n,s,i,a;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,s=t.Vec3,i=t.Component},function(t){a=t.EventMgr}],execute:function(){var r;e._RF.push({},"160ecRYCANPL4gIkVrZ3oZt","Comp",void 0);var c=n.ccclass,u=n.menu;t("Comp",c("Comp")(r=u("Comp")(r=function(t){function e(){for(var o,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return(o=t.call.apply(t,[this].concat(n))||this).move_goPos=null,o.move_Speed=1,o.isRotate=!1,o.startRot=void 0,o}o(e,t);var n=e.prototype;return n.onLoad=function(){},n.start=function(){},n.update=function(t){this.moveToUpdate(t),this.rotateSelfUpdate(t)},n.onDestroy=function(){this.unscheduleAllCallbacks(),a.clearTarget(this)},n.moveTo_Local=function(t,o){void 0===o&&(o=1),this.move_goPos=t,this.move_Speed=o},n.moveToUpdate=function(t){if(null!=this.move_goPos){var o=this.node.getPosition(),e=new s;s.subtract(e,this.move_goPos,o);var n=e.length(),i=t*this.move_Speed;n<=i?(this.node.setPosition(this.move_goPos),this.move_goPos=null):(e=e.normalize(),this.node.setPosition(o.add(e.multiplyScalar(i))))}},n.moveOff_Local=function(){this.move_goPos=null,this.move_Speed=1},n.rotateStart=function(){this.startRot||(this.startRot=this.node.getRotation()),this.isRotate=!0},n.rotateSelfUpdate=function(t){if(this.isRotate){var o=new s;this.node.getRotation().getEulerAngles(o),o.y+=180*t,this.node.setRotationFromEuler(o)}},n.rotateEnd=function(){this.startRot&&this.node.setRotation(this.startRot),this.isRotate=!1},e}(i))||r)||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/ComposerHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./Math.ts","./Predictor.ts","./CameraHandler.ts"],(function(o){"use strict";var t,a,e,n,r,i,s,c,d;return{setters:[function(o){t=o.inheritsLoose},function(o){a=o.cclegacy,e=o.Vec3,n=o.Quat},function(o){r=o.cinestation},function(o){i=o.Vec4_closeTo,s=o.SmoothDamper},function(o){c=o.Predictor},function(o){d=o.CameraHandler}],execute:function(){a._RF.push({},"ed040GtNkhPZ5yR4yNDSf5W","ComposerHandler",void 0);var l=new e,m=new e,p=new n;o("ComposerHandler",function(o){function a(){for(var t,a=arguments.length,e=new Array(a),r=0;r<a;r++)e[r]=arguments[r];return(t=o.call.apply(o,[this].concat(e))||this)._predictor=new c,t._rotation=new n,t._smoothDamper=new s,t}t(a,o);var d=a.prototype;return d.updateCamera=function(o){var t=this._vcam;if(t.lookAt){var a=t.aim.composer;e.add(m,t.lookAt.position,a.trackedObjectOffset),t.lookAt.parent&&m.add(t.lookAt.parent.worldPosition),this._predictor.predictPosition(t.lookaheadPosition,m,a.lookaheadDamping,a.lookaheadTime,o),this._clampWithDeadZone(m,t.lookaheadPosition),n.fromViewUp(this._rotation,e.subtract(m,t.node.worldPosition,m).normalize()),this._smoothDamper.Quat_smoothDamp(p,t.node.worldRotation,this._rotation,a.lookatDamping,o),i(p,t.node.worldRotation)||(t.node.worldRotation=p)}},d._clampWithDeadZone=function(o,t){var a=this._vcam.aim.composer,n=r.mainCamera;if(n){var i=n.camera,s=e.transformMat4(l,t,i.matViewProj).add(e.ONE).multiplyScalar(.5),c=a.deadZoneWidth/2,d=a.deadZoneHeight/2;o.set(.5,.5,s.z),s.x<.5-c&&(o.x+=s.x-.5+c),s.x>.5+c&&(o.x+=s.x-.5-c),s.y<.5-d&&(o.y+=s.y-.5+d),s.y>.5+d&&(o.y+=s.y-.5-d),o.multiplyScalar(2).subtract(e.ONE),o.transformMat4(i.matViewProjInv)}return o},a}(d));a._RF.pop()}}}));

System.register("chunks:///_virtual/CustomAdMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts"],(function(t){"use strict";var r,n,e;return{setters:[function(t){r=t.createClass},function(t){n=t.cclegacy},function(t){e=t.default}],execute:function(){n._RF.push({},"ec419s347BAg5UnCauMm6Br","CustomAdMgr",void 0),t("default",function(){function t(){this.gridIdArr=[],this.gridAdArr=[],this.totalCount=1,this.createIndex=0,this.showTimes=0,this.currentIndex=0}var n=t.prototype;return n.initCustomAd=function(){this.gridIdArr=e.instance.dataConfig.front_more_gezi_list,this.gridIdArr&&(this.showTimes=0,this.currentIndex=0,this.createIndex=0,this.gridIdArr=e.instance.shuffleArr(this.gridIdArr),this.totalCount=this.gridIdArr.length,this.createCustomAd())},n.getCustomAd=function(t,r,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var s=window.wx.createCustomAd({adUnitId:t,adIntervals:e.instance.dataConfig.front_more_gezi_time/1e3,style:r});return s.onError((function(t){console.log("全屏格子加载失败"),i&&i(),s.offError(),s.offLoad()})),s.onLoad((function(){console.log("全屏格子加载成功"),n&&n(),s.offError(),s.offLoad()})),s},n.createCustomAd=function(){var t=this;if(!(this.createIndex>=this.gridIdArr.length||this.gridAdArr.length>=this.totalCount))var r=this.getCustomAd(this.gridIdArr[this.createIndex],{left:0,top:70},(function(){t.gridAdArr.push(r),t.createIndex++,t.createCustomAd()}),(function(){t.createIndex++,t.createCustomAd()}))},n.showGrid=function(){},n.hideGrid=function(){},n.getIsError=function(){return this.gridAdArr.length<=0},n.getIsShow=function(){return!(this.gridAdArr.length<=0)&&this.gridAdArr[this.currentIndex].isShow()},r(t,[{key:"sysInfo",get:function(){return window.wx.getSystemInfoSync()}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/CustomInput.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,u,c,r;return{setters:[function(t){e=t.createClass},function(t){o=t.cclegacy,i=t.director,n=t.Director,s=t.systemEvent,u=t.SystemEvent,c=t.EventMouse,r=t.KeyCode}],execute:function(){o._RF.push({},"06d4dFwUDhKvpqVu9cegQYi","CustomInput",void 0);t("customInput",new(function(){function t(){this._initialized=!1,this._mouseLeft=0,this._mouseRight=0,this._mouseX=0,this._mouseY=0,this._mouseSensitivity=1,this._horizontal=0,this._vertical=0,this._buttons={}}var o=t.prototype;return o.getButton=function(t){return this._buttons[t]||0},o.initialize=function(t){void 0===t&&(t=!1),0==this._initialized&&(this._initialized=!0,t?this._requestPointerLock():this._registEvents(),i.on(n.EVENT_AFTER_UPDATE,this._onAfterUpdate,this))},o._requestPointerLock=function(){var t,e=this,o=null==(t=i.root)?void 0:t.device,n=o.canvas||o.gl&&o.gl.canvas;if(n){n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.onclick=function(){n.requestPointerLock()};var s=function(){document.pointerLockElement===n||document.mozPointerLockElement===n||document.webkitPointerLockElement?e._registEvents():e._unregistEvents()};document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.addEventListener("pointerlockchange",s,!1),document.addEventListener("mozpointerlockchange",s,!1),document.addEventListener("webkitpointerlockchange",s,!1)}},o._registEvents=function(){s.on(u.EventType.MOUSE_DOWN,this._onMouseDown,this),s.on(u.EventType.MOUSE_UP,this._onMouseUp,this),s.on(u.EventType.MOUSE_MOVE,this._onMouseMove,this),s.on(u.EventType.KEY_DOWN,this._onKeyDown,this),s.on(u.EventType.KEY_UP,this._onKeyUp,this)},o._unregistEvents=function(){s.off(u.EventType.MOUSE_DOWN,this._onMouseDown,this),s.off(u.EventType.MOUSE_UP,this._onMouseUp,this),s.off(u.EventType.MOUSE_MOVE,this._onMouseMove,this),s.off(u.EventType.KEY_DOWN,this._onKeyDown,this),s.off(u.EventType.KEY_UP,this._onKeyUp,this)},o._onMouseDown=function(t){switch(t.getButton()){case c.BUTTON_LEFT:this._mouseLeft=1;break;case c.BUTTON_RIGHT:this._mouseRight=1}},o._onMouseUp=function(t){switch(t.getButton()){case c.BUTTON_LEFT:this._mouseLeft=0;break;case c.BUTTON_RIGHT:this._mouseRight=0}},o._onMouseMove=function(t){this._mouseX=t.getDeltaX()*this._mouseSensitivity,this._mouseY=t.getDeltaY()*this._mouseSensitivity},o._onKeyDown=function(t){switch(t.keyCode){case r.KEY_W:this._vertical=1;break;case r.KEY_S:this._vertical=-1;break;case r.KEY_A:this._horizontal=1;break;case r.KEY_D:this._horizontal=-1;break;default:this._buttons[t.keyCode]=1}},o._onKeyUp=function(t){switch(t.keyCode){case r.KEY_W:case r.KEY_S:this._vertical=0;break;case r.KEY_A:case r.KEY_D:this._horizontal=0;break;default:this._buttons[t.keyCode]=0}},o._onAfterUpdate=function(){this._mouseX=0,this._mouseY=0},e(t,[{key:"mouseLeft",get:function(){return this._mouseLeft}},{key:"mouseRight",get:function(){return this._mouseRight}},{key:"mouseX",get:function(){return this._mouseX}},{key:"mouseY",get:function(){return this._mouseY}},{key:"horizontal",get:function(){return this._horizontal}},{key:"vertical",get:function(){return this._vertical}}]),t}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/DataMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StorageMgr.ts"],(function(t){"use strict";var r,n,e,o,a;return{setters:[function(t){r=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,o=t.Component},function(t){a=t.default}],execute:function(){var s,i;n._RF.push({},"a335a6PX4pL2qYSfa7ZbBLo","DataMgr",void 0);var c=e.ccclass,g=(e.property,e.menu);t("DataMgr",c("DataMgr")(s=g("Mgr/DataMgr")(((i=function(t){function n(){for(var r,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(r=t.call.apply(t,[this].concat(e))||this).strogeMgr=void 0,r}r(n,t);var e=n.prototype;return e.onLoad=function(){n.instance=this,this.strogeMgr=a.instance},e.readStroge=function(){this.strogeMgr.storageData},e.writeStorge=function(){this.strogeMgr.SaveAllStorge()},e.readJson=function(t){return t.json},n}(o)).instance=void 0,s=i))||s)||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/DebugController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts"],(function(e){"use strict";var t,o,r,n,i,l,a,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,a=e.Label,c=e.Color,s=e.Component},function(e){u=e.cinestation}],execute:function(){var b,p,f,g,h;i._RF.push({},"dccdfXDXoRFfZ4jGJUQGmTm","DebugController",void 0);var d=l.ccclass,v=l.property;e("DebugController",(b=d("DebugController"),p=v(a),b((h=t((g=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(t=e.call.apply(e,[this].concat(i))||this)._index=0,r(t,"label",h,n(t)),t}o(t,e);var i=t.prototype;return i.onDebug=function(){var e=u.vcam;e&&this.label&&(e.debug=!e.debug,this._setLabelColor(e.debug))},i.onSwitch=function(){var e=u.vcams,t=e[++this._index%e.length];t.active=!0,this._setLabelColor(t.debug)},i._setLabelColor=function(e){this.label&&(this.label.color=e?c.WHITE:c.GRAY)},t}(s)).prototype,"label",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/Donut.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./StageData.ts","./BornMgr.ts","./EventMgr.ts","./Tool.ts","./Comp.ts","./Floor.ts"],(function(e){"use strict";var t,n,o,i,s,r,a,l,c,h,d,p,u,g,v,m,f,F,b,w,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,s=e.createClass},function(e){r=e.cclegacy,a=e._decorator,l=e.CCInteger,c=e.CCFloat,h=e.Vec3,d=e.Quat,p=e.tween},function(e){u=e.FloorChangeType,g=e.FloorMoveType,v=e.EventType},function(e){m=e.StageData},function(e){f=e.BornMgr},function(e){F=e.EventMgr},function(e){b=e.default},function(e){w=e.Comp},function(e){y=e.Floor}],execute:function(){var S,x,P,_,T,E,I,O;r._RF.push({},"77040acr2xPmq97ExVnyqYV","Donut",void 0);var k=a.ccclass,C=a.property;e("Donut",(S=k("Donut"),x=C({type:l,min:0,max:4,tooltip:"0:圆饼 1:唐霜 2:撒料 3：奶油 4：樱桃"}),P=C({type:l,min:0,max:2,tooltip:"0:甜甜圈 1:大饼 2:法棍"}),_=C({type:c,visible:!0,displayName:"生成对应donut"}),S((I=t((E=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))||this).stage=void 0,t.model=void 0,o(t,"nowStep",I,i(t)),o(t,"nowModelId",O,i(t)),t._value=0,t.hasBeenFloorIndex=[],t.nextFloor=void 0,t.isHasStartTween=!1,t.goPos=void 0,t}n(t,e);var r=t.prototype;return r.init=function(e,t){void 0===e&&(e=0),this.isHasStartTween=!1,this.stage=t,this.modelInit(e),this.stepInit(),this.hasBeenFloorIndex.length=0},r.recyle=function(){this.moveOff_Local(),this.unscheduleAllCallbacks(),F.clearTarget(this),this.nextFloor=null,this.goPos=null,f.instance.recyleObj(this.node,"Stage",this.node.name)},r.modelInit=function(e){for(var t=this.node.getChildByName("Model"),n=0;n<t.children.length;n++)t.children[n].active=n==e,n==e&&(this.model=t.children[n])},r.stepInit=function(){this.nowStep=0;for(var e=0;e<this.model.children.length;e++)this.model.children[e].active=e==this.nowStep},r.stepShow=function(e){for(var t=0;t<this.model.children.length;t++)this.model.children[t].active=t<=e;this.nowStep=e},r.nextStep=function(){var e=this.nowStep+1;e>=this.model.children.length?console.warn("step加超了"):(this.nowStep=e,this.model.children[this.nowStep].active=!0)},r.beat_Stop=function(e){var n,o,i=this;o=this.node.getPosition(),this.nextFloor||(this.nextFloor=this.stage.getFloorByPos(o).getComponent(y));var s=function(e){if(e-i.nowStep>1)console.log("失败咧，不能跳过Step",i.nowStep),F.event(v.Game_Wrong_Event,{pos:i.node.getPosition(),reason:"StepWrong_"+i.nowStep+"_"+e});else if(e==i.nowStep);else if(i.nextStep(),m.instance.isFx){var t=f.instance.bornObjFromPool("FX","SteamFX",f.instance.stage,i.node.getPosition());f.instance.scheduleOnce((function(){f.instance.recyleObj(t,"FX","SteamFX")}),1)}},r=function(){i.goPos=null,i.nextFloor=null};switch((n=this.nextFloor).changeType){case u.start:!function(){if(!i.isHasStartTween){i.isHasStartTween=!0,i.model.setScale(new h(0,0,0));var e=new d;if(d.fromEuler(e,0,b.randomNumber(-90,90),0),p(i.model).to(m.instance.beatTime,{scale:new h(1,1,1),rotation:e}).start(),m.instance.isFx){var t=f.instance.bornObjFromPool("FX","StartFX",f.instance.stage,i.node.getPosition());f.instance.scheduleOnce((function(){f.instance.recyleObj(t,"FX","StartFX")}),1)}}}();break;case u.end:return void function(){i.model.setScale(new h(1,1,1));var e=new d;if(d.fromEuler(e,0,b.randomNumber(-90,90)+180,0),p(i.model).to(m.instance.beatTime,{scale:new h(0,0,0),rotation:e}).start(),i.scheduleOnce(i.recyle,1.5*m.instance.beatTime),F.event(v.Game_End_Arrive,{endPos:i.node.getPosition(),arriveDountStep:i.nowStep}),m.instance.isFx){var t=f.instance.bornObjFromPool("FX","EndFX",f.instance.stage,i.node.getPosition());f.instance.scheduleOnce((function(){f.instance.recyleObj(t,"FX","EndFX")}),1)}}();case u.step1:s(1);break;case u.step2:s(2);break;case u.step3:s(3);break;case u.step4:s(4)}switch(n.moveType){case g.go_up:this.goPos=o.add(new h(0,0,-1));break;case g.go_right:this.goPos=o.add(new h(1,0,0));break;case g.go_down:this.goPos=o.add(new h(0,0,1));break;case g.go_left:this.goPos=o.add(new h(-1,0,0));break;default:this.goPos=null}var a=this.stage.getFloorByPos(this.goPos);if(null==a)r(),F.event(v.Game_Wrong_Event,{pos:this.node.getPosition(),reason:"deadEnd"});else{if(this.nextFloor=a.getComponent(y),-1!=this.hasBeenFloorIndex.indexOf(a.getSiblingIndex())?(r(),F.event(v.Game_Wrong_Event,{pos:this.node.getPosition(),reason:"loopPath"})):this.nextFloor.moveType==g.block||this.nextFloor.moveType==g.empty?(console.log("如果下一路线，没有可以走的传送带"),r(),F.event(v.Game_Wrong_Event,{pos:this.node.getPosition(),reason:"deadEnd"})):this.nextFloor.changeType!=u.start&&this.nextFloor.changeType!=u.end||this.nextFloor.moveType!=n.moveType&&(r(),F.event(v.Game_Wrong_Event,{pos:this.node.getPosition(),reason:"deadEnd"})),this.nextFloor)for(var l=0;l<this.node.parent.children.length;l++){if(h.squaredDistance(this.node.parent.children[l].getPosition(),this.goPos)<.5&&null==this.node.parent.children[l].getComponent(t).goPos){r();break}}if(this.nextFloor)for(var c=this.nextFloor.node.getSiblingIndex(),w=0;w<e.length;w++)if(e[w]==c){i.goPos=null,i.nextFloor=null;break}}return this.nextFloor&&this.hasBeenFloorIndex.push(a.getSiblingIndex()),this.nextFloor},r.beat_Move=function(){null!=this.goPos&&this.moveTo_Local(this.goPos,1/m.instance.beatTime)},s(t,[{key:"value",get:function(){return this._value},set:function(e){this.modelInit(this.nowModelId),this.stepShow(this.nowStep)}}]),t}(w)).prototype,"nowStep",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),O=t(E.prototype,"nowModelId",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(E.prototype,"value",[_],Object.getOwnPropertyDescriptor(E.prototype,"value"),E.prototype),T=E))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/DuilianAdMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts"],(function(t){"use strict";var i,n,e,r;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},function(t){e=t.default},function(t){r=t.default}],execute:function(){n._RF.push({},"27e8fERAPBE+IR0ROUK6P70","DuilianAdMgr",void 0),t("default",function(){function t(){this.gridIdArr=[],this.gridAdArr=[],this.hadHide=!1,this.totalCount=2,this.createIndex=0,this.showTimes=0}var n=t.prototype;return n.initCustomAd=function(){e.instance.dataConfig.front_duilian_gezi_switch&&r.Instance.NewWuchu2&&(this.gridIdArr=e.instance.dataConfig.front_duilian_gezi_list,this.gridIdArr&&(this.totalCount=2,this.createIndex=0,this.createCustomAd()))},n.getCustomAd=function(t,i,n,r){var o=this;void 0===n&&(n=null),void 0===r&&(r=null);var s=window.wx.createCustomAd({adUnitId:t,adIntervals:e.instance.dataConfig.front_more_gezi_time/1e3,style:i});return s.onError((function(t){console.log("对联格子加载失败"),r&&r(),s.offError(),s.offLoad()})),s.onLoad((function(){o.hadHide||s.show(),console.log("对联格子加载成功"),n&&n(),s.offError(),s.offLoad()})),s},n.createCustomAd=function(){var t=this;if(!(this.createIndex>=this.gridIdArr.length||this.gridAdArr.length>=this.totalCount))var i={left:0==this.gridAdArr.length?0:this.sysInfo.screenWidth-65,top:120},n=this.getCustomAd(this.gridIdArr[this.createIndex],i,(function(){t.gridAdArr.push(n),t.createIndex++,t.createCustomAd()}),(function(){t.createIndex++,t.createCustomAd()}))},n.showGrid=function(){this.showTimes++},n.hideGrid=function(){this.hadHide=!0},n.getIsError=function(){return this.gridAdArr.length<=0},i(t,[{key:"sysInfo",get:function(){return window.wx.getSystemInfoSync()}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/Effect.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"5c1f5O+jLdMB4MzMWSzAOO8","Effect",void 0);e("Effect",{name:"../cinestation/art/Shaders/View",techniques:[{name:"transparent",passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendSrcAlpha:2,blendDstAlpha:4}]},program:"../cinestation/art/Shaders/View|view-vs:vert|view-fs:frag",properties:{lookatPoint:{value:[.5,.5],type:14},deadZoneWidth:{value:[.1],type:13,handleInfo:["viewParams",0,13]},deadZoneHeight:{value:[.1],type:13,handleInfo:["viewParams",1,13]},softZoneWidth:{value:[.8],type:13,handleInfo:["viewParams",2,13]},softZoneHeight:{value:[.8],type:13,handleInfo:["viewParams",3,13]},viewParams:{type:16,editor:{visible:!1,deprecated:!0},value:[0,0,.8,.8]}}}]}],shaders:[{hash:3069556386,glsl4:{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\n precision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\n    int getVertexId() {\n      return gl_VertexIndex;\n    }\n  layout(set = 2, binding = 4) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    layout(set = 2, binding = 6) uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    layout(set = 2, binding = 7) uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    layout(set = 2, binding = 8) uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    layout(location = 4) in u32vec4 a_joints;\n  layout(location = 5) in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      layout(location = 7) in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(set = 2, binding = 3) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(set = 2, binding = 2) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    layout(set = 2, binding = 5) uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(set = 2, binding = 3) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  layout(location = 8) in vec4 a_matWorld0;\n  layout(location = 9) in vec4 a_matWorld1;\n  layout(location = 10) in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    layout(location = 11) in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  layout(location = 12) in float a_dyn_batch_id;\n  layout(set = 2, binding = 0) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(set = 2, binding = 0) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\n precision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n};\nlayout(set = 1, binding = 0) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(14. * cc_screenSize.z, dpx), step(14. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl3:{vert:"\n precision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\n    in float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  layout(std140) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    in vec4 a_joints;\n  in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(std140) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(std140) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(std140) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  in vec4 a_matWorld0;\n  in vec4 a_matWorld1;\n  in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  in float a_dyn_batch_id;\n  layout(std140) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(std140) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\n precision highp float;\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(14. * cc_screenSize.z, dpx), step(14. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\n precision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\n    attribute float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  uniform vec4 cc_displacementWeights[15];\n  uniform vec4 cc_displacementTextureInfo;\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n        int pixelIndex = elementIndex;\n        vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n        vec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\n        return texture2D(tex, uv);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture2D(tex, x)),\n        decode32(texture2D(tex, y)),\n        decode32(texture2D(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    attribute vec4 a_joints;\n  attribute vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      attribute highp vec4 a_jointAnimInfo;\n    #endif\n    uniform highp vec4 cc_jointTextureInfo;\n    uniform highp vec4 cc_jointAnimInfo;\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    uniform highp vec4 cc_joints[90];\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  attribute vec4 a_matWorld0;\n  attribute vec4 a_matWorld1;\n  attribute vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    attribute vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  attribute float a_dyn_batch_id;\n  #else\n  #endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\n precision highp float;\nuniform mediump vec4 cc_screenSize;\nuniform vec4 viewParams;\n           uniform vec2 lookatPoint;\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(14. * cc_screenSize.z, dpx), step(14. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}]},statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:157,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:39}},defines:[{name:"CC_USE_MORPH",type:"boolean",defines:[]},{name:"CC_MORPH_TARGET_COUNT",type:"number",defines:["CC_USE_MORPH"],range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_USE_SKINNING",type:"boolean",defines:[]},{name:"CC_USE_BAKED_ANIMATION",type:"boolean",defines:["CC_USE_SKINNING"]},{name:"USE_INSTANCING",type:"boolean",defines:[],editor:{elevated:!0}},{name:"USE_BATCHING",type:"boolean",defines:["!USE_INSTANCING"],editor:{elevated:!0}},{name:"USE_LIGHTMAP",type:"boolean",defines:["USE_INSTANCING"]}],blocks:[{name:"Constant",members:[{name:"viewParams",type:16,count:1},{name:"lookatPoint",type:14,count:1}],defines:[],stageFlags:16,binding:0}],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2},{name:"a_tangent",type:16,count:1,defines:[],stageFlags:1,format:44,location:3},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],stageFlags:1,format:11,location:6},{name:"a_joints",type:"u32vec4",count:1,defines:["CC_USE_SKINNING"],stageFlags:1,location:4},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],stageFlags:1,format:44,location:5},{name:"a_jointAnimInfo",type:16,count:1,defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:7},{name:"a_matWorld0",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:8},{name:"a_matWorld1",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:9},{name:"a_matWorld2",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:10},{name:"a_lightingMapUVParam",type:16,count:1,defines:["USE_INSTANCING","USE_LIGHTMAP"],stageFlags:1,format:44,isInstanced:!0,location:11},{name:"a_dyn_batch_id",type:13,count:1,defines:["!USE_INSTANCING","USE_BATCHING"],stageFlags:1,format:11,location:12}],varyings:[],name:"../cinestation/art/Shaders/View|view-vs:vert|view-fs:frag"}]});n._RF.pop()}}}));

System.register("chunks:///_virtual/Effect3_4.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"15ff4tgg2VJBLCjpsM+Fdgp","Effect3_4",void 0);e("Effect3_4",{name:"../cinestation/examples/art/Shaders/View",techniques:[{name:"transparent",passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendSrcAlpha:2,blendDstAlpha:4}]},program:"../cinestation/examples/art/Shaders/View|view-vs:vert|view-fs:frag",properties:{lookatPoint:{value:[.5,.5],type:14},deadZoneWidth:{value:[.1],type:13,handleInfo:["viewParams",0,13]},deadZoneHeight:{value:[.1],type:13,handleInfo:["viewParams",1,13]},softZoneWidth:{value:[.8],type:13,handleInfo:["viewParams",2,13]},softZoneHeight:{value:[.8],type:13,handleInfo:["viewParams",3,13]},viewParams:{type:16,editor:{visible:!1,deprecated:!0},value:[0,0,.8,.8]}}}]}],shaders:[{blocks:[{name:"Constant",members:[{name:"viewParams",type:16,count:1},{name:"lookatPoint",type:14,count:1}],defines:[],stageFlags:16,binding:0}],samplerTextures:[],samplers:[],textures:[],buffers:[],images:[],subpassInputs:[],attributes:[{name:"a_position",defines:[],format:32,location:0},{name:"a_normal",defines:[],format:32,location:1},{name:"a_texCoord",defines:[],format:21,location:2},{name:"a_tangent",defines:[],format:44,location:3},{name:"a_vertexId",defines:["CC_USE_MORPH"],format:11,location:6},{name:"a_joints",defines:["CC_USE_SKINNING"],location:4},{name:"a_weights",defines:["CC_USE_SKINNING"],format:44,location:5},{name:"a_jointAnimInfo",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],format:44,isInstanced:!0,location:7},{name:"a_matWorld0",defines:["USE_INSTANCING"],format:44,isInstanced:!0,location:8},{name:"a_matWorld1",defines:["USE_INSTANCING"],format:44,isInstanced:!0,location:9},{name:"a_matWorld2",defines:["USE_INSTANCING"],format:44,isInstanced:!0,location:10},{name:"a_lightingMapUVParam",defines:["USE_INSTANCING","USE_LIGHTMAP"],format:44,isInstanced:!0,location:11},{name:"a_dyn_batch_id",defines:["!USE_INSTANCING","USE_BATCHING"],format:11,location:12}],varyings:[],fragColors:[{name:"cc_FragColor",typename:"vec4",type:16,count:1,defines:[],stageFlags:16,location:0}],hash:3775263886,glsl4:{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\n    int getVertexId() {\n      return gl_VertexIndex;\n    }\n  layout(set = 2, binding = 4) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    layout(set = 2, binding = 7) uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    layout(set = 2, binding = 8) uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    layout(set = 2, binding = 9) uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    layout(location = 4) in u32vec4 a_joints;\n  layout(location = 5) in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      layout(location = 7) in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(set = 2, binding = 3) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(set = 2, binding = 2) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    layout(set = 2, binding = 6) uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(set = 2, binding = 3) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  layout(location = 8) in vec4 a_matWorld0;\n  layout(location = 9) in vec4 a_matWorld1;\n  layout(location = 10) in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    layout(location = 11) in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  layout(location = 12) in float a_dyn_batch_id;\n  layout(set = 2, binding = 0) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(set = 2, binding = 0) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n  mediump vec4 cc_nearFar;\n  mediump vec4 cc_viewPort;\n};\nlayout(set = 1, binding = 0) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(10. * cc_screenSize.z, dpx), step(10. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl3:{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\n    in float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  layout(std140) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    in vec4 a_joints;\n  in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(std140) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(std140) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(std140) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  in vec4 a_matWorld0;\n  in vec4 a_matWorld1;\n  in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  in float a_dyn_batch_id;\n  layout(std140) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(std140) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n  mediump vec4 cc_nearFar;\n  mediump vec4 cc_viewPort;\n};\nlayout(std140) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(10. * cc_screenSize.z, dpx), step(10. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\n    attribute float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  uniform vec4 cc_displacementWeights[15];\n  uniform vec4 cc_displacementTextureInfo;\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n        int pixelIndex = elementIndex;\n        vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n        vec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\n        return texture2D(tex, uv);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture2D(tex, x)),\n        decode32(texture2D(tex, y)),\n        decode32(texture2D(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    attribute vec4 a_joints;\n  attribute vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      attribute highp vec4 a_jointAnimInfo;\n    #endif\n    uniform highp vec4 cc_jointTextureInfo;\n    uniform highp vec4 cc_jointAnimInfo;\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    uniform highp vec4 cc_joints[90];\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  attribute vec4 a_matWorld0;\n  attribute vec4 a_matWorld1;\n  attribute vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    attribute vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  attribute float a_dyn_batch_id;\n  #else\n  #endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nuniform mediump vec4 cc_screenSize;\nuniform vec4 viewParams;\n           uniform vec2 lookatPoint;\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(10. * cc_screenSize.z, dpx), step(10. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[],buffers:[],images:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}],buffers:[],images:[]},statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:157,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:41}},defines:[{name:"CC_USE_MORPH",type:"boolean",defines:[],_offset:0},{name:"CC_MORPH_TARGET_COUNT",type:"number",defines:["CC_USE_MORPH"],range:[2,8],_offset:1},{name:"CC_MORPH_PRECOMPUTED",type:"boolean",defines:["CC_USE_MORPH"],_offset:4},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean",defines:["CC_USE_MORPH"],_offset:5},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean",defines:["CC_USE_MORPH"],_offset:6},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean",defines:["CC_USE_MORPH"],_offset:7},{name:"CC_USE_SKINNING",type:"boolean",defines:[],_offset:8},{name:"CC_USE_BAKED_ANIMATION",type:"boolean",defines:["CC_USE_SKINNING"],_offset:9},{name:"USE_INSTANCING",type:"boolean",defines:[],editor:{elevated:!0},_offset:10},{name:"USE_BATCHING",type:"boolean",defines:["!USE_INSTANCING"],editor:{elevated:!0},_offset:11},{name:"USE_LIGHTMAP",type:"boolean",defines:["USE_INSTANCING"],_offset:12}],name:"../cinestation/examples/art/Shaders/View|view-vs:vert|view-fs:frag"}]});n._RF.pop()}}}));

System.register("chunks:///_virtual/EndBoxUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var n,i,e,o,r,s,a,c,u,h,l,d,f,p,m,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.ProgressBar,u=t.Quat,h=t.Tween,l=t.tween,d=t.Component},function(t){f=t.default},function(t){p=t.default},function(t){m=t.default},function(t){g=t.default}],execute:function(){var _,C,B,b,x,k,v;r._RF.push({},"df4e76W/H9O8J2rmiwm9eC/","EndBoxUI",void 0);var w=s.ccclass,I=s.property;t("default",(_=w("EndBoxUI"),C=I(a),B=I(c),_((k=n((x=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,e(n,"box",k,o(n)),e(n,"pBar",v,o(n)),n.ccb=null,n.showCallback=null,n.hadShowBanner=!1,n.preTime=0,n.rateTime=0,n.minclicknum=void 0,n.maxclicknum=void 0,n.needClick=void 0,n.isforce=!1,n.addProgerss=void 0,n.repeatCount=0,n.clickCount=0,n.lianxu_num=void 0,n.quat1=new u,n.quat2=new u,n.quat3=new u,n}i(n,t);var r=n.prototype;return r.onDisable=function(){var t=this;this.unscheduleAllCallbacks(),g.Instance.hideBannerFun(!0),this.repeatCount>0?p.Instance.com.scheduleOnce((function(){t.showUI(t.lianxu_num,t.ccb),t.repeatCount--}),.1):this.ccb&&this.ccb()},r.showUI=function(t,n){this.lianxu_num=t,this.clickCount=0,this.repeatCount<=0&&(this.repeatCount=t),this.minclicknum=Number(f.instance.dataConfig.front_box_clicks[0]),this.maxclicknum=Number(f.instance.dataConfig.front_box_clicks[1]),this.needClick=f.instance.GetRandom(this.minclicknum,this.maxclicknum-f.instance.dataConfig.front_progress_bar_reduce),this.isforce=f.instance.dataConfig.front_is_box_force,this.addProgerss=1/this.maxclicknum,console.log("this.needClick:",this.needClick),console.log("this.addProgerss:",this.addProgerss),g.Instance.hideBannerFun(!0),this.ccb=n,this.node.active=!0,this.hadShowBanner=!1,this.pBar.progress=0,this.rateTime=0,this.preTime=0,this.schedule(this.DecBar)},r.closeCB=function(){this.node.active=!1},r.clickCB=function(){var t=this;if(this.clickCount++,this.pBar.progress+=this.addProgerss,this.pBar.progress>1&&(this.pBar.progress=1),this.shakeBox(),!this.hadShowBanner){this.isforce=f.instance.dataConfig.front_is_box_force;var n=f.instance.dataConfig.front_box_hide_time/1e3,i=function(){t.hadShowBanner=!0,t.scheduleOnce((function(){g.Instance.hideBannerFun(!0),t.closeCB()}),n),m.instance.showBanner()},e=this.rateTime-this.preTime,o=f.instance.dataConfig.front_box_sulv_qujian,r=this.getRandomItemInArr(o).split("|"),s=r[0],a=r[1];if(100*this.pBar.progress>=f.instance.dataConfig.front_box_sulv_start&&parseFloat(s)<=e&&e<=parseFloat(a))return console.log("宝箱触发频率：",e),f.instance.dataConfig.front_sulv_wuchu_switch&&(this.isforce=!0,n=f.instance.dataConfig.front_fbox_hide_time/1e3),void i();if(this.preTime=this.rateTime,this.pBar.progress>=this.needClick*this.addProgerss&&!this.hadShowBanner)return console.log("宝箱触发进度"),void i();this.clickCount>=f.instance.dataConfig.front_box_click_count&&(console.log("点击次数",this.clickCount),this.clickCount=0,i())}},r.shakeBox=function(){h.stopAllByTarget(this.box),u.fromEuler(this.quat1,0,0,-10),u.fromEuler(this.quat2,0,0,10),u.fromEuler(this.quat3,0,0,0),l(this.box).to(.1,{rotation:this.quat1}).to(.2,{rotation:this.quat2}).to(.1,{rotation:this.quat3}).start()},r.DecBar=function(){this.pBar.progress-=f.instance.dataConfig.front_progress_bar_return,this.pBar.progress<0&&(this.pBar.progress=0)},r.update=function(t){this.rateTime+=t},r.GetRandom=function(t,n,i){void 0===i&&(i=!0);var e=n-t,o=Math.random()*e;return o+=t,i?Math.floor(o):o},r.getRandomItemInArr=function(t){return t[Math.floor(Math.random()*t.length)]},n}(d)).prototype,"box",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(x.prototype,"pBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=x))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/EnergyLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./StageData.ts","./EventMgr.ts"],(function(t){"use strict";var n,e,r,o,a,i,s,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.Label,a=t.Component},function(t){i=t.EventType},function(t){s=t.StageData},function(t){c=t.EventMgr}],execute:function(){var u;e._RF.push({},"3dcf386JW1InqcCsKWf9bdV","EnergyLabel",void 0);var l=r.ccclass;r.property,t("EnergyLabel",l("EnergyLabel")(u=function(t){function e(){for(var n,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(n=t.call.apply(t,[this].concat(r))||this).label=void 0,n}n(e,t);var r=e.prototype;return r.start=function(){var t=this;this.label=this.node.getComponent(o),this.label.string=s.instance.energyCount.toString(),c.on(i.UI_EnergyUpdate_Event,this,(function(){t.label.string=s.instance.energyCount.toString()}))},r.update=function(t){},e}(a))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/EnumTypes.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var o,_,n,l,a,p,i;e({ClickType:void 0,EventType:void 0,FloorBulidType:void 0,FloorChangeType:void 0,FloorEndType:void 0,FloorMoveType:void 0,SoundType:void 0}),t._RF.push({},"dcad6JkXRtI4Z7J2U/tVlIS","EnumTypes",void 0),function(e){e.Platform_Wake_Do="Platform_Wake_Do",e.Platform_Hide_Do="Platform_Hide_Do",e.Game_Cam_Switch="Game_Cam_Switch",e.Game_Step_Add="Game_Step_Add",e.Game_Wrong_Event="Game_Wrong_Event",e.Game_End_Arrive="Game_End_Arrive",e.Game_TipLabel_Show="Game_TipLabel_Show",e.UI_TipsUpdate_Event="UI_TipsUpdate_Event",e.UI_EnergyUpdate_Event="UI_EnergyUpdate_Event",e.UI_Style_Switch="UI_Style_Switch",e.Teach_Road_Build="Teach_Road_Build"}(o||(o=e("EventType",{}))),function(e){e.Home_StartGame_Click="Home_StartGame_Click",e.Home_StageChoose_Click="Home_StageChoose_Click",e.StageChoose_Stage_Click="StageChoose_Stage_Click"}(_||(_=e("ClickType",{}))),function(e){e[e.Beat=0]="Beat",e[e.BGM1=1]="BGM1",e[e.BGM2=2]="BGM2",e[e.Button=3]="Button",e[e.Change=4]="Change",e[e.Flase=5]="Flase",e[e.Put=6]="Put",e[e.Select=7]="Select",e[e.Start=8]="Start",e[e.True=9]="True",e[e.Work1=10]="Work1",e[e.Work2=11]="Work2",e[e.level1=12]="level1",e[e.level2=13]="level2",e[e.level3=14]="level3",e[e.level4=15]="level4",e[e.level5=16]="level5"}(n||(n=e("SoundType",{}))),function(e){e[e.empty=0]="empty",e[e.block=1]="block",e[e.go_down=2]="go_down",e[e.go_up=3]="go_up",e[e.go_right=4]="go_right",e[e.go_left=5]="go_left"}(l||(l=e("FloorMoveType",{}))),function(e){e[e.none=0]="none",e[e.start=1]="start",e[e.end=2]="end",e[e.step1=3]="step1",e[e.step2=4]="step2",e[e.step3=5]="step3",e[e.step4=6]="step4"}(a||(a=e("FloorChangeType",{}))),function(e){e[e.empty=0]="empty",e[e.block=1]="block",e[e.change=2]="change"}(p||(p=e("FloorBulidType",{}))),function(e){e[e.none=0]="none",e[e.step0=1]="step0",e[e.step1=2]="step1",e[e.step2=3]="step2",e[e.step3=4]="step3",e[e.step4=5]="step4"}(i||(i=e("FloorEndType",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/EventMgr.ts",["cc"],(function(t){"use strict";var n,e,r;return{setters:[function(t){n=t.cclegacy,e=t._decorator,r=t.EventTarget}],execute:function(){var c;n._RF.push({},"919d7XItUtH1rG9pGE64OF6","EventMgr",void 0);var o=e.ccclass,u=(e.property,e.menu,new r);t("EventMgr",o("EventMgr")(c=function(){function t(){}return t.event=function(t,n,e,r,c,o){u.emit(t,n,e,r,c,o)},t.on=function(t,n,e){u.on(t,e,n)},t.off=function(t,n,e){u.off(t,e,n)},t.clearTarget=function(t){u.removeAll(t)},t}())||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Events.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"47855R5MFhELIl5drKNn+/P","Events",void 0);t("CinestationEvent",{EDITOR_CHANGED:"cinestation-editor-changed",COMPOSER_CHANGED:"cinestation-composer-changed",LENS_CHANGED:"cinestation-lens-changed"});e._RF.pop()}}}));

System.register("chunks:///_virtual/ExportCrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,o,i,s,r,d,h;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,i=e.game,s=e.UITransform,r=e.view,d=e.v3,h=e.Component}],execute:function(){var l;t._RF.push({},"7de57dSE4tEJaZ954yYkzmB","ExportCrl",void 0);var c=o.ccclass;o.property,e("default",c("ExportCrl")(l=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.onLoad=function(){i.addPersistRootNode(this.node),this.node.getComponent(s).setContentSize(r.getVisibleSize()),this.node.setPosition(d(this.node.getComponent(s).contentSize.width/2,this.node.getComponent(s).contentSize.height/2,0))},o.start=function(){},o.loopTime=function(){this.node.setSiblingIndex(999)},o.showJJUI=function(e,n,t){for(var o=0;o<this.node.children.length;o++)this.node.children[o].setSiblingIndex(0);this.node.getChildByName(e).getComponent(e).showUI(t,n);for(var i=0;i<this.node.children.length;i++)if(this.node.children[i].name==e){this.node.children[i].setSiblingIndex(this.node.children.length);break}},o.closeJJUI=function(e){this.node.getChildByName(e).active=!1},o.closeAllJJUI=function(){for(var e=0;e<this.node.children.length;e++)this.node.children[e].active=!1,this.node.children[e].getComponent(this.node.children[e].name).unscheduleAllCallbacks()},t}(h))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/FinishCustomAdMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppConfig.ts","./JJMgr.ts"],(function(t){"use strict";var n,e,i,r;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){i=t.default},function(t){r=t.default}],execute:function(){e._RF.push({},"7436bmanHxL7pIkGCGrdE3+","FinishCustomAdMgr",void 0),t("default",function(){function t(){this.gridIdArr=[],this.gridAdArr=[],this.totalCount=1,this.createIndex=0}var e=t.prototype;return e.initCustomAd=function(){this.gridIdArr=i.wechat.finishCustomAd,this.createIndex=0,this.createCustomAd()},e.getCustomAd=function(t,n,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=window.wx.createCustomAd({adUnitId:t,adIntervals:r.instance.dataConfig.front_more_gezi_time/1e3,style:n});return o.onError((function(t){console.log("结算格子加载失败"),i&&i(),o.offError(),o.offLoad()})),o.onLoad((function(){console.log("结算格子加载成功"),e&&e(),o.offError(),o.offLoad()})),o},e.createCustomAd=function(){var t=this;if(!(this.createIndex>=this.gridIdArr.length||this.gridAdArr.length>=this.totalCount))var n={left:0,top:this.sysInfo.screenHeight/2-220,width:this.sysInfo.screenWidth},e=this.getCustomAd(this.gridIdArr[this.createIndex],n,(function(){t.gridAdArr.push(e),t.createIndex++,t.createCustomAd()}),(function(){t.createIndex++,t.createCustomAd()}))},e.showGrid=function(){},e.hideGrid=function(){},e.getIsError=function(){return this.gridAdArr.length<=0},n(t,[{key:"sysInfo",get:function(){return window.wx.getSystemInfoSync()}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/FinishGameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts"],(function(n){"use strict";var t,e,i,o,r,a,c,s,l,u,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.Node,s=n.Component,l=n.Sprite},function(n){u=n.default},function(n){f=n.default}],execute:function(){var h,v,d,p,m;r._RF.push({},"80640I/xFpMor6MfSekWPx9","FinishGameUI",void 0);var y=a.ccclass,g=a.property;n("default",(h=y("FinishGameUI"),v=g(c),h((m=t((p=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,i(t,"rootNode",m,o(t)),t.navId=0,t.myNavArr=[],t}e(t,n);var r=t.prototype;return r.showUI=function(){this.node.active=!0},r.onEnable=function(){this._init(),this.initNav()},r.onDisable=function(){this.unscheduleAllCallbacks()},r._init=function(){this.navId=0},r.closeCB=function(){this.node.active=!1},r.navCB=function(n,t){console.log("click id:",t),u.instance.NavigateApp(t,(function(){f.Instance.NewWuchu&&u.instance.dataConfig.front_quxiao_switch&&f.Instance.clickFinishMoreGame()}),(function(){}))},r.initNav=function(){var n=this;this.myNavArr=u.instance.shuffleArr([].concat(u.instance.navDataArr));var t=[0,1,2,3,4,5];if(t=this.getRandomItemInArrWithoutSelf(-1,t,4),!(this.myNavArr.length<=0))for(var e=Math.floor(6*Math.random()),i=Math.floor(6*Math.random()),o=function(o){var r=n.rootNode.children[o],a=r.getChildByName("icon").getComponent(l),s=r.getChildByName("finger");r.getChildByName("hot").active=-1!=t.indexOf(o);var f=u.instance.navDataArr.indexOf(n.myNavArr[o]);u.instance.loadImgByUrl(a,n.myNavArr[o].icon),s.active=e==o,r.off(c.EventType.TOUCH_END),r.on(c.EventType.TOUCH_END,(function(t){n.navCB(t,f)}),n),i==o&&n.scheduleOnce((function(){n.rotateLoop(r,.05,14)}),.5)},r=0;r<6;r++)o(r)},r.rotateLoop=function(n,t,e){},r.shuffleArr=function(n){for(var t=n.length;t;){var e=Math.floor(Math.random()*t--),i=[n[t],n[e]];n[e]=i[0],n[t]=i[1]}return n},r.getRandomItemInArrWithoutSelf=function(n,t,e){void 0===e&&(e=1);var i=[].concat(t);return i.splice(i.indexOf(n),1),(i=this.shuffleArr(i)).slice(0,e)},t}(s)).prototype,"rootNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=p))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Floor.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./StageData.ts","./BornMgr.ts","./EventMgr.ts","./SoundMgr.ts","./Tool.ts","./StageController.ts"],(function(e){"use strict";var o,n,t,i,a,d,l,s,r,c,h,u,g,y,p,f,w,v,m;return{setters:[function(e){o=e.inheritsLoose,n=e.createClass},function(e){t=e.cclegacy,i=e._decorator,a=e.Vec3,d=e.Vec2,l=e.Component},function(e){s=e.FloorMoveType,r=e.FloorChangeType,c=e.FloorBulidType,h=e.SoundType,u=e.EventType,g=e.FloorEndType},function(e){y=e.StageData},function(e){p=e.BornMgr},function(e){f=e.EventMgr},function(e){w=e.SoundMgr},function(e){v=e.default},function(e){m=e.StageController}],execute:function(){var B;t._RF.push({},"0b8efONKW9AQJa05yyyMs4m","Floor",void 0);var R=i.ccclass;i.property,e("Floor",R("Floor")(B=function(e){function t(){for(var o,n=arguments.length,t=new Array(n),i=0;i<n;i++)t[i]=arguments[i];return(o=e.call.apply(e,[this].concat(t))||this).model=void 0,o.moveType=s.empty,o.changeType=r.none,o.bulidType=c.empty,o.endType=g.none,o.nowBuild=void 0,o}o(t,e);var i=t.prototype;return i.onLoad=function(){this.model=this.node.getChildByName("Model")},i.onEnable=function(){},i.onDisable=function(){},i.init=function(){this.moveType=s.empty,this.changeType=r.none,this.bulidType=c.empty,this.changeSkin(y.instance.nowModelId)},i.recyle=function(){},i.changeSkin=function(e){void 0===e&&(e=0);for(var o=0;o<this.model.children.length;o++)this.model.children[o].active=o==e},i.buildRoad=function(e){if(this.nowBuild)this.changeRoad(e);else if(this.stage){this.moveType=e,this.bulidType=c.change,this.nowBuild=p.instance.bornObjFromPool("Stage","Road",this.stage.roadNode,this.node.getPosition());var o=this.nowBuild.getChildByName("Model");v.unactiveAllChildren(o),o.children[y.instance.nowModelId].active=!0,this.changeRoadRot(e),w.instacne.playSound(h.Put),f.event(u.Teach_Road_Build)}},i.changeRoad=function(e){this.nowBuild&&"Road"==this.nowBuild.name&&(this.moveType!=e&&w.instacne.playSound(h.Put),this.moveType=e,this.changeRoadRot(e))},i.RoadInit=function(){if(this.nowBuild){var e=this.nowBuild.getChildByName("Model");e=e.children[y.instance.nowModelId];for(var o=2;o<e.children.length;o++)e.children[o].active=!0}},i.checkRoad=function(){if(this.nowBuild){var e,o=this.node.getPosition();switch(this.moveType){case s.go_up:o=o.add(new a(0,0,-1)),e=new a(0,0,1);break;case s.go_right:o=o.add(new a(1,0,0)),e=new a(-1,0,0);break;case s.go_down:o=o.add(new a(0,0,1)),e=new a(0,0,-1);break;case s.go_left:o=o.add(new a(-1,0,0)),e=new a(1,0,0);break;default:o=null}var n=this.stage.getFloorByPos(o);if(n){var i=n.getComponent(t).nowBuild;if(i){var l=this.nowBuild;this.changeRoadModel(l,"Side_Front");var r=i.getChildByName("Model").right,c=Math.round(v.getAngle2DWay(new d(e.x,e.z),new d(r.x,r.z)));switch(-0!=c&&-180!=c||(c=Math.abs(c)),c){case 0:this.changeRoadModel(i,"Side_Front");break;case 180:this.changeRoadModel(i,"Side_Back");break;case 90:this.changeRoadModel(i,"Side_Left");break;case-90:this.changeRoadModel(i,"Side_Right");break;default:console.warn("道路判定对方的方向角度有问题",c)}}}}},i.changeRoadModel=function(e,o){var n=e.getChildByName("Model");(n=n.children[y.instance.nowModelId]).getChildByName(o).active=!1},i.deleteRoad=function(){this.nowBuild&&"Road"==this.nowBuild.name&&(p.instance.recyleObj(this.nowBuild,"Stage","Road"),this.nowBuild=null,this.moveType=s.empty,this.bulidType=c.empty)},i.changeRoadRot=function(e){var o=this.nowBuild.getChildByName("Model");switch(e){case s.go_up:o.setRotationFromEuler(new a(0,90,0));break;case s.go_down:o.setRotationFromEuler(new a(0,-90,0));break;case s.go_left:o.setRotationFromEuler(new a(0,180,0));break;case s.go_right:o.setRotationFromEuler(new a(0,0,0));break;default:console.warn("Floor_铺路方向未知",e)}},n(t,[{key:"stage",get:function(){return this.node.parent.parent.getComponent(m)}}]),t}(l))||B);t._RF.pop()}}}));

System.register("chunks:///_virtual/FollowController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,l,e,i,r,n,s,c,a;return{setters:[function(o){t=o.applyDecoratedDescriptor,l=o.inheritsLoose,e=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){r=o.cclegacy,n=o._decorator,s=o.Node,c=o.Vec3,a=o.Component}],execute:function(){var f,u,w,p,d;r._RF.push({},"c6148hIAtlGKL1ARBsaihCi","FollowController",void 0);var h=n.ccclass,y=n.property;o("FollowController",(f=h("FollowController"),u=y(s),f((d=t((p=function(o){function t(){for(var t,l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=o.call.apply(o,[this].concat(r))||this)._followOffset=new c,e(t,"follow",d,i(t)),t}l(t,o);var r=t.prototype;return r.onLoad=function(){this.follow&&c.subtract(this._followOffset,this.node.worldPosition,this.follow.worldPosition)},r.update=function(o){this.follow&&(this.node.worldPosition=c.add(this.node.worldPosition,this.follow.worldPosition,this._followOffset))},t}(a)).prototype,"follow",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=p))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/Fontclip.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,n,o,s,a,p,c,l,u,h,y,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,a=e._decorator,p=e.CCFloat,c=e.SpriteFrame,l=e.Node,u=e.Sprite,h=e.Rect,y=e.UITransform,f=e.Vec3,b=e.Component}],execute:function(){var g,v,d,m,_,C,F,w,z,O,X,D,P,k,j,N,I,S;s._RF.push({},"15c1cOMq9hNFYnUkQHabVYz","Fontclip",void 0);var x=a.ccclass,A=a.property,M=a.executeInEditMode,R=a.menu;e("Fontclip",(g=x("Fontclip"),v=M(!0),d=R("UI/Comp/Fontclip"),m=A({visible:!0,displayName:"value"}),_=A({visible:!1,serializable:!0}),C=A({visible:!0,displayName:"sheet"}),F=A({visible:!1,serializable:!0}),w=A({type:p,visible:!0,displayName:"spaceX"}),z=A({type:p,visible:!1,serializable:!0}),O=A({visible:!1,serializable:!0}),X=A(c),g(D=v(D=d((t((P=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,r(t,"_value",k,n(t)),r(t,"_sheet",j,n(t)),r(t,"_spaceX",N,n(t)),r(t,"_isCenter",I,n(t)),r(t,"spriteFrame",S,n(t)),t}i(t,e);var s=t.prototype;return s.onEnable=function(){this.change()},s.start=function(){this.change()},s.change=function(){for(var e=0;e<this.node.children.length;e++)this.node.children[e].destroy();var t=Array.from(this.value),i=Array.from(this.sheet),r=this.spriteFrame.width,n=this.spriteFrame.height,o=r/i.length,s=0;this.isCenter&&(s=-(t.length-1)*o/2);for(var a=0;a<t.length;a++){var p=new l(t[a]);p.layer=this.node.layer;var c=p.addComponent(u);this.node.addChild(p),c.spriteFrame=this.spriteFrame.clone();var b=i.indexOf(t[a]);c.spriteFrame.rect=new h(o*b,0,o,n),p.getComponent(y).setContentSize(o,n),p.setPosition(new f(s+a*o+this._spaceX*a,0,0))}},o(t,[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.change()}},{key:"sheet",get:function(){return this._sheet},set:function(e){this._sheet=e,this.change()}},{key:"spaceX",get:function(){return this._spaceX},set:function(e){this._spaceX=e,this.change()}},{key:"isCenter",get:function(){return this._isCenter},set:function(e){this._isCenter=e,this.change()}}]),t}(b)).prototype,"value",[m],Object.getOwnPropertyDescriptor(P.prototype,"value"),P.prototype),k=t(P.prototype,"_value",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0123456789.:"}}),t(P.prototype,"sheet",[C],Object.getOwnPropertyDescriptor(P.prototype,"sheet"),P.prototype),j=t(P.prototype,"_sheet",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0123456789.:"}}),t(P.prototype,"spaceX",[w],Object.getOwnPropertyDescriptor(P.prototype,"spaceX"),P.prototype),N=t(P.prototype,"_spaceX",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(P.prototype,"isCenter",[A],Object.getOwnPropertyDescriptor(P.prototype,"isCenter"),P.prototype),I=t(P.prototype,"_isCenter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=t(P.prototype,"spriteFrame",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=P))||D)||D)||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/FPSController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./CustomInput.ts","./StateController.ts"],(function(t){"use strict";var e,o,n,i,s,r,u,a,l,h;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Vec3,s=t.Quat,r=t.KeyCode,u=t.Component},function(t){a=t.SmoothDamper},function(t){l=t.customInput},function(t){h=t.StateController}],execute:function(){var p;o._RF.push({},"0f7c14ApUhDOa9W10fwkwuy","FPSController",void 0);var c=n.ccclass,m=(n.property,new i),_=new i,d=new i,S=new s;t("FPSController",c("FPSController")(p=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this)._euler=new i,e._speedSmoothDamper=new a,e._eulerSmoothDamper=new a,e._moveSpeed=new i,e._state=null,e}e(o,t);var n=o.prototype;return n.onLoad=function(){l.initialize(!0),this._state=this.getComponentInChildren(h),s.toEuler(this._euler,this.node.worldRotation)},n.update=function(t){var e=this._state;e&&(this._updateRotation(e,t),this._updatePosition(e,t),this._updateState(e,t))},n._updateRotation=function(t,e){m.set(this._euler).subtract3f(l.mouseX,l.mouseY,0),this._eulerSmoothDamper.Vec3_smoothDamp(this._euler,this._euler,m,l.mouseRight?1:.2,e),s.fromEuler(S,this._euler.y,this._euler.x,0),this.node.worldRotation=S},n._updatePosition=function(t,e){_.set(l.horizontal,0,l.vertical),i.transformQuat(_,_,this.node.worldRotation),_.y=0,_.normalize(),_.multiplyScalar(l.mouseRight?1.5:3),this._speedSmoothDamper.Vec3_smoothDamp(this._moveSpeed,this._moveSpeed,_,.1,e),i.multiplyScalar(d,this._moveSpeed,e),this.node.worldPosition=this.node.worldPosition.add(d)},n._updateState=function(t,e){l.getButton(r.KEY_R)?t.setState(h.RELOAD_OUTOF_AMMO):(t.setValue("moveSpeed",this._moveSpeed.length()),t.setValue("mouseRight",l.mouseRight),t.setValue("mouseLeft",l.mouseLeft))},o}(u))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/FreeLookHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./Base.ts","./CameraHandler.ts"],(function(t){"use strict";var e,o,a,i,n,s,l,h,c,r,_,u,p,d,f,m,D,v,g,b;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,a=t.Vec3,i=t.Vec2,n=t.systemEvent,s=t.SystemEvent,l=t.sys,h=t.EventMouse,c=t.view,r=t.toRadian,_=t.clamp},function(t){u=t.EPSILON,p=t.Vec3_setFromSpherical,d=t.quarticDamp,f=t.Vec3_setFromMatrixColumn,m=t.Vec3_closeTo,D=t.Spherical,v=t.SmoothDamper},function(t){g=t.BaseFlag},function(t){b=t.CameraHandler}],execute:function(){o._RF.push({},"1d097iHg4pBDLtSMsYjfxFc","FreeLookHandler",void 0);var P,E=Math.abs,M=Math.tan;!function(t){t[t.None=0]="None",t[t.RotateZoom=g.Custom<<0]="RotateZoom",t[t.Pan=g.Custom<<1]="Pan"}(P||(P={}));var S=new a,w=new a,y=new i,F=new a,T=new a,O=new i,L=new i,U=new i,j=new i;t("FreeLookHandler",function(t){function o(){for(var e,o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this)._button=-1,e._rotateDelta=new i,e._panDelta=new i,e._panDeltaPrevious=new i,e._panFrame=0,e._panEnable=1,e._distanceScale=1,e._spherical=new D,e._smoothDamper=new v,e}e(o,t);var g=o.prototype;return g.onEnable=function(){n.on(s.EventType.MOUSE_DOWN,this._onMouseDown,this),n.on(s.EventType.MOUSE_UP,this._onMouseUp,this),n.on(s.EventType.MOUSE_WHEEL,this._onMouseWheel,this),n.on(s.EventType.MOUSE_MOVE,this._onMouseMove,this),n.on(s.EventType.TOUCH_MOVE,this._onTouchMove,this),n.on(s.EventType.TOUCH_END,this._onTouchEnd,this)},g.onDisable=function(){n.off(s.EventType.MOUSE_DOWN,this._onMouseDown,this),n.off(s.EventType.MOUSE_UP,this._onMouseUp,this),n.off(s.EventType.MOUSE_WHEEL,this._onMouseWheel,this),n.off(s.EventType.MOUSE_MOVE,this._onMouseMove,this),n.off(s.EventType.TOUCH_MOVE,this._onTouchMove,this),n.off(s.EventType.TOUCH_END,this._onTouchEnd,this)},g._getPreviousLocation=function(t,e){return t.getPreviousLocation(e)},g._getLocation=function(t,e){return t.getLocation(e)},g._onTouchMove=function(t,e){if(l.isMobile){var o=e.getAllTouches();1===o.length?(this._rotateDelta.add(this._calculateRotateDelta(y,this._getPreviousLocation(e,O),this._getLocation(e,L))),this._objFlag|=P.RotateZoom):o.length>1&&(this._getPreviousLocation(o[0],U),this._getPreviousLocation(o[1],j),this._getLocation(o[0],O),this._getLocation(o[1],L),this._distanceScale*=this._calculateDistanceScale(i.distance(U,j)/i.distance(O,L)),this._objFlag|=P.RotateZoom,U.add(j).multiplyScalar(.5),O.add(L).multiplyScalar(.5),this._setPanDelta(this._calculatePanDelta(y,U,O)))}},g._onTouchEnd=function(t,e){this._panFrame<=5&&(this._panEnable=1,this._panDelta.set(this._panDeltaPrevious),this._objFlag|=P.Pan)},g._onMouseDown=function(t){this._button=t.getButton()},g._onMouseUp=function(t){this._button=-1},g._onMouseWheel=function(t){t.getScrollY()>0?(this._distanceScale*=this._calculateDistanceScale(.95),this._objFlag|=P.RotateZoom):t.getScrollY()<0&&(this._distanceScale*=this._calculateDistanceScale(1/.95),this._objFlag|=P.RotateZoom)},g._onMouseMove=function(t){switch(this._button){case h.BUTTON_LEFT:this._rotateDelta.add(this._calculateRotateDelta(y,this._getPreviousLocation(t,O),this._getLocation(t,L))),this._objFlag|=P.RotateZoom;break;case h.BUTTON_MIDDLE:this._setPanDelta(this._calculatePanDelta(y,this._getPreviousLocation(t,O),this._getLocation(t,L)))}},g._setPanDelta=function(t){(this._objFlag&P.Pan||E(t.x)+E(t.y)>u)&&(this._objFlag|=P.Pan,this._panFrame=0,this._panEnable=0,this._panDelta.add(t),this._panDeltaPrevious.set(this._panDelta))},g._calculateDistanceScale=function(t){return t},g._calculateRotateDelta=function(t,e,o){var a=this._vcam.body.freelook;return i.subtract(t,o,e).multiplyScalar(.1*a.rotateSpeed*Math.PI/c.getVisibleSizeInPixel().height),t},g._calculatePanDelta=function(t,e,o){var a=this._vcam.body.freelook;return i.subtract(t,o,e).multiplyScalar(a.panSpeed/c.getVisibleSizeInPixel().height),t},g.updateCamera=function(t){var e=this._vcam,o=e.body.freelook,i=0,n=0;if(o.forbidX&&(this._rotateDelta.x=0,n++),o.forbidY&&(this._rotateDelta.y=0,n++),o.forbidZ&&(this._distanceScale=1,n++),n>=3&&(this._objFlag&=~P.RotateZoom),o.forbidPan&&(this._panDelta.set(0,0),this._objFlag&=~P.Pan),e.lookAt){var s=e.aim.composer;if(a.add(S,e.lookAt.worldPosition,s.trackedObjectOffset),this._objFlag&P.RotateZoom){a.subtract(w,e.node.worldPosition,S);var l=2*w.length()*M(r(.5*e.lens.fov)),h=this._rotateDelta.x*l,c=this._rotateDelta.y*l;this._spherical.setFromVec3(w),this._spherical.theta=this._spherical.theta-h,this._spherical.phi=_(this._spherical.phi+c,u,Math.PI-u),this._spherical.radius=this._spherical.radius*this._distanceScale,p(w,this._spherical),e.node.worldPosition=w.add(S),this._rotateDelta.multiplyScalar(d(1,0,o.rotateSmoothing,t)),this._distanceScale=1,E(h)+E(c)<=u&&(this._objFlag&=~P.RotateZoom),i++}if(this._objFlag&P.Pan){a.subtract(w,e.node.worldPosition,S),f(F,e.node.worldMatrix,0),f(T,e.node.worldMatrix,1);var D=2*w.length()*M(r(.5*e.lens.fov)),v=s.trackedObjectOffset;v.subtract(F.multiplyScalar(this._panDelta.x*D)),v.subtract(T.multiplyScalar(this._panDelta.y*D)),a.add(S,e.lookAt.worldPosition,v),e.node.worldPosition=w.add(S),this._panDelta.multiplyScalar(d(1,0,o.panSmoothing,t)*this._panEnable),E(this._panDelta.x)+E(this._panDelta.y)<=u&&(this._objFlag&=~P.Pan),i++}this._panFrame<10&&this._panFrame++}e.follow&&(i>0&&a.subtract(o.followOffset,e.node.worldPosition,e.follow.worldPosition),a.add(w,e.follow.worldPosition,o.followOffset),o.followDamping>0?this._smoothDamper.Vec3_smoothDamp(S,e.node.worldPosition,w,o.followDamping,t):S.set(w),m(S,e.node.worldPosition)||(e.node.worldPosition=S))},o}(b));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./UMTrack.ts","./HomeController.ts","./Donut.ts","./Floor.ts","./StageController.ts","./StageChoose.ts","./EnumTypes.ts","./StageClass.ts","./StageData.ts","./Platform.ts","./Tool.ts","./ScaleTween.ts","./BornMgr.ts","./EventMgr.ts","./SoundMgr.ts"],(function(e){"use strict";var t,n,i,o,a,s,h,r,c,l,d,g,u,f,p,v,S,m,w,y,T,C,b,I,_,R,O,k,P,D,N,M,B,U,x,G,E,L,F,A,W,H,J;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,h=e.Node,r=e.resources,c=e.Vec3,l=e.Sprite,d=e.input,g=e.Input,u=e.Vec2,f=e.geometry,p=e.PhysicsSystem,v=e.MeshRenderer,S=e.Color,m=e.tween,w=e.Animation,y=e.Component,T=e.UITransform},function(e){C=e.cinestation},function(e){b=e.UMTrack},function(e){I=e.HomeController},function(e){_=e.Donut},function(e){R=e.Floor},function(e){O=e.StageController},function(e){k=e.StageChoose},function(e){P=e.EventType,D=e.ClickType,N=e.SoundType,M=e.FloorBulidType,B=e.FloorMoveType},function(e){U=e.FloorData,x=e.RoadData,G=e.default},function(e){E=e.StageData},function(e){L=e.default},function(e){F=e.default},function(e){A=e.ScaleTween},function(e){W=e.BornMgr},function(e){H=e.EventMgr},function(e){J=e.SoundMgr}],execute:function(){var z,V,j,X,Z,q,K,Q,Y,$,ee,te,ne,ie,oe,ae,se,he,re,ce,le,de,ge,ue,fe,pe,ve,Se,me,we;a._RF.push({},"7b372oinhlHeoFVI2p6iZbU","GameMgr",void 0);var ye=s.ccclass,Te=s.property;e("GameMgr",(z=ye("GameMgr"),V=Te(h),j=Te(h),X=Te(h),Z=Te(k),q=Te(I),K=Te(h),Q=Te(h),Y=Te(h),$=Te(h),ee=Te(h),te=Te(h),ne=Te(h),ie=Te(h),z(((we=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=e.call.apply(e,[this].concat(a))||this).stage=void 0,i(t,"selectNode",se,o(t)),t.stageJson=void 0,i(t,"stageUI",he,o(t)),i(t,"stageChooseUI",re,o(t)),i(t,"stageChoose",ce,o(t)),i(t,"home",le,o(t)),i(t,"targetShowImage",de,o(t)),i(t,"targetShowDonuts",ge,o(t)),i(t,"energyPanel",ue,o(t)),i(t,"tipsPanel",fe,o(t)),i(t,"energyBtn",pe,o(t)),i(t,"TeachNode",ve,o(t)),i(t,"TipsNode",Se,o(t)),i(t,"errorFinger",me,o(t)),t.nowGoPlace="game",t.isLevelStart=!1,t.nowLevel=1,t.nowStage=1,t.isPlayedTeachSound=!1,t.nowRound=0,t.camRay=void 0,t.lastPoint=null,t.nowSlideWay="up",t.isDeleteRoad=!1,t.wrongAnimTween=void 0,t.orignalStep=void 0,t.steps=[],t.stepMax=100,t.nowLastStepIndex=0,t.isTipsOn=!1,t.beatTime=1,t.animSpeed=1,t.skinId=0,t.arriveDonutStep=[],t.arriveDountFloorIndex=[],t}n(t,e);var a=t.prototype;return a.start=function(){t.instance=this,this.firstIn(),this.energyPanel.active=!1,this.tipsPanel.active=!1;var e=(new Date).getTime()-E.instance.lastTime,n=Math.floor(e/6e4);if(E.instance.energyCount<10){var i=E.instance.energyCount+n;i>10&&(i=10),E.instance.energyCount=i,H.event(P.UI_EnergyUpdate_Event)}E.instance.lastTime=(new Date).getTime(),this.schedule((function(){if(E.instance.energyCount<10){var e=E.instance.energyCount+1;e>10&&(e=10),H.event(P.UI_EnergyUpdate_Event),E.instance.energyCount=e}E.instance.lastTime=(new Date).getTime()}),60),this.schedule(this.gameUpdate,.1)},a.EventOn=function(){},a.onDisable=function(){this.unscheduleAllCallbacks(),H.clearTarget(this)},a.firstIn=function(){this.goHome()},a.getStageData=function(e,t,n){for(var i="stageJson/level"+e.toString()+"/level"+e.toString()+"_"+t.toString(),o=this,a=0;a<O.stages.length;a++)if(O.stages[a].node.active){this.stage=O.stages[a];for(var s=0;s<O.stages.length;s++)O.stages[s].node.active=s==a;break}r.load(i,(function(e,t){o.stageJson=t,n()}))},a.startGame=function(){this.homeGoGame()},a.goHome=function(){E.instance.updateLevel(),this.levelEnd(),this.nowGoPlace="home",this.stageUI.active=!1,this.stageChooseUI.active=!1,this.targetShowImage.setScale(c.ZERO),E.instance.isRoadUvMove=!0,this.home.On(),H.event(P.Game_Cam_Switch,0),H.on(D.Home_StageChoose_Click,this,this.homeGoStageChoos),H.on(D.Home_StartGame_Click,this,this.startGame),H.off(D.StageChoose_Stage_Click,this,this.goGame),J.instacne.playMusic(N.BGM1),this.energyBtn.active=!0,b.instance.trackEvent("Home_In")},a.backStageChoose=function(){this.goStageChoose(this.nowLevel)},a.homeGoStageChoos=function(){this.goStageChoose(E.instance.nowModelId+1)},a.homeGoGame=function(){this.goGame(E.instance.level)},a.goStageChoose=function(e){void 0===e&&(e=1),this.levelEnd(),this.home.On(),this.nowGoPlace="stageChoose",this.stageChoose.init(e),this.stageUI.active=!1,this.targetShowImage.setScale(c.ZERO),this.stageChooseUI.active=!0,E.instance.isRoadUvMove=!1,H.event(P.Game_Cam_Switch,1),H.off(D.Home_StageChoose_Click,this,this.homeGoStageChoos),H.on(D.StageChoose_Stage_Click,this,this.goGame),H.off(D.Home_StartGame_Click,this,this.startGame),J.instacne.playMusic(N.BGM1),this.energyBtn.active=!0},a.goGame=function(e,t){if(void 0===e&&(e=null),void 0===t&&(t=!1),e>E.instance.level&&(console.log("去的关卡没解锁"),e=E.instance.level),!t){if(E.instance.energyCount<1)return void(this.energyPanel.active=!0);var n=E.instance.energyCount-1;E.instance.energyCount=n}this.isTipsOn=!1,this.levelEnd(),console.log("触发goGame",e),H.off(D.StageChoose_Stage_Click,this,this.goGame),this.home.Off(),this.nowGoPlace="game",this.targetShowImage.setScale(c.ONE),this.stageUI.active=!0,this.stageChooseUI.active=!1,E.instance.isRoadUvMove=!1,H.event(P.Game_Cam_Switch,2),H.off(D.Home_StartGame_Click,this,this.startGame),H.off(D.Home_StageChoose_Click,this,this.homeGoStageChoos),null==e?this.levelInit(1,1):this.levelInit(Math.floor((e-1)/12)+1,1+(e-1)%12),J.instacne.playMusic(N.BGM2),this.energyBtn.active=!0,b.instance.trackEvent("Stage_In",{level:e})},a.levelInit=function(e,t){var n=this,i=this;this.nowLevel=e,this.nowStage=t,E.instance.isShowEndDonut=this.nowLevel<=2,E.instance.nowModelId=e-1;for(var o=this.stageUI.getChildByName("RightLayout"),a=[],s=0;s<o.children.length;s++)a.push(o.children[s].getComponent(l));var h=["#b390ff","#79fed3","#ff8787"];o.getComponent(l).color=F.d3_getRgbByHex(["#fff3ff","#e8ffef","#ffdfba"][E.instance.nowModelId]);for(var r=0;r<a.length;r++)a[r].color=F.d3_getRgbByHex(h[E.instance.nowModelId]);H.event(P.UI_Style_Switch),this.getStageData(e,t,(function(){var e=function(){var e;i.stepInit(),i.isLevelStart=!0,i.roundInit(),F.unactiveAllChildren(i.targetShowDonuts);for(var t=0;t<5;t++)n.TipsNode.children[t].active=!1;E.instance.targetTipsMaxX=0;for(var o=0;o<i.stage.endSteps.length;o++){i.targetShowDonuts.children[o].active=!0,(e=i.targetShowDonuts.children[o].getComponent(_)).modelInit(E.instance.nowModelId),e.stepShow(i.stage.endSteps[o]);var a=n.TipsNode.children[o];a.active=i.stage.endSteps[o]>0;var s=[145,320,470,630],h=i.stage.endSteps[o]-1;if(s[h]>E.instance.targetTipsMaxX&&(E.instance.targetTipsMaxX=s[h]),a.getComponent(T).contentSize.set([125,345,525,700][h],78),a.active){var r=a.getChildByName("Show");r.children[0].active=!0;for(var c=r.children.length-1;c>=1;c--){var l=Math.floor((r.children.length-1-c+1)/2);r.children[c].active=l<=h||0==c}}}};"Level"==i.stage.node.parent.name?i.stage.bornStageObj(null,e):(console.log("读json生成关卡"),i.stage.bornStageObj(i.stageJson,e))})),this.isPlayedTeachSound=!1},a.levelEnd=function(){this.unschedule(this.winMusicLoop),this.dountStop(),this.stepOff(),this.controlOff(),J.instacne.stopVoice(),this.isLevelStart=!1},a.teach1Do_1=function(){this.TeachNode.children[0].children[1].active=!1,this.TeachNode.children[0].children[2].active=!0,H.off(P.Teach_Road_Build,this,this.teach1Do_1)},a.teach2Do_1=function(){this.TeachNode.children[1].children[1].active=!1,H.off(P.Teach_Road_Build,this,this.teach2Do_1)},a.teachRoundInit=function(){if(F.unactiveAllChildren(this.TeachNode),1==this.nowLevel)switch(this.nowStage){case 1:this.TeachNode.children[0].active=!0,this.TeachNode.children[0].children[0].active=!0,this.TeachNode.children[0].children[1].active=!0,H.on(P.Teach_Road_Build,this,this.teach1Do_1),this.TeachNode.children[0].children[2].active=!1,this.isPlayedTeachSound||(this.scheduleOnce((function(){J.instacne.playVoice(N.level1)}),.5),this.isPlayedTeachSound=!0);break;case 2:this.TeachNode.children[1].active=!0,this.TeachNode.children[1].children[0].active=!0,this.TeachNode.children[1].children[1].active=!0,H.on(P.Teach_Road_Build,this,this.teach2Do_1),this.isPlayedTeachSound||(this.scheduleOnce((function(){J.instacne.playVoice(N.level2)}),.5),this.isPlayedTeachSound=!0);break;case 3:this.TeachNode.children[2].active=!0,this.TeachNode.children[2].children[0].active=!0,this.TeachNode.children[2].children[1].active=!1,this.isPlayedTeachSound||(this.scheduleOnce((function(){J.instacne.playVoice(N.level3)}),.5),this.isPlayedTeachSound=!0);break;case 6:this.TeachNode.children[3].active=!0,this.isPlayedTeachSound||(this.scheduleOnce((function(){J.instacne.playVoice(N.level4)}),.5),this.isPlayedTeachSound=!0);break;case 8:this.TeachNode.children[4].active=!0,this.isPlayedTeachSound||(this.scheduleOnce((function(){J.instacne.playVoice(N.level5)}),.5),this.isPlayedTeachSound=!0)}},a.teachRoundInRun=function(){if(1==this.nowLevel)switch(this.nowStage){case 1:this.TeachNode.children[0].active=!1;break;case 2:this.TeachNode.children[1].active=!1;break;case 3:this.TeachNode.children[2].children[0].active=!1,this.TeachNode.children[2].children[1].active=!0;break;case 6:this.TeachNode.children[3].active=!1;break;case 8:this.TeachNode.children[4].active=!1}},a.roundInit=function(){var e=this,t=this.stageUI.getChildByName("RightLayout");F.unactiveAllChildren(t);var n=[];switch(this.nowRound){case 0:this.errorFinger.active=!1,console.log("铺路阶段"),this.controlOn(),this.wrongOrRightJudgeOff(),E.instance.isRoadUvMove=!1,n=["BackStageChoose","Start","BackStep","Clear"];for(var i=0;i<t.children.length;i++){var o=t.children[i];o.active=-1!=n.indexOf(o.name)}t.active=!0,this.stageUI.getChildByName("ContinueBtn").active=!1;for(var a=0;a<this.targetShowDonuts.children.length;a++)this.targetShowDonuts.children[a].getComponent(_).rotateEnd();this.teachRoundInit();break;case 1:this.beatSlowDown(),console.log("看甜甜圈阶段"),this.controlOff(),this.wrongOrRightJudgeInit(),E.instance.isRoadUvMove=!0,n=["BackStageChoose","Stop","SpeedUp","SpeedDown"];for(var s=0;s<t.children.length;s++){var h=t.children[s];h.active=-1!=n.indexOf(h.name),"Stop"==h.name&&(h.getComponent(A).enabled=!1)}this.teachRoundInRun();break;case 2:F.unactiveAllChildren(this.TeachNode),console.log("已成功随时退出阶段"),this.offSelect(),this.wrongOrRightJudgeOff(),this.beatSlowDown(),t.active=!1,E.instance.isRoadUvMove=!0,this.stageUI.getChildByName("ContinueBtn").active=!0;break;case 3:console.log("甜甜圈报错阶段"),this.wrongOrRightJudgeOff(),E.instance.isRoadUvMove=!0,n=["BackStageChoose","Stop","SpeedUp","SpeedDown"];for(var r=0;r<t.children.length;r++){var c=t.children[r];c.active=-1!=n.indexOf(c.name),"Stop"==c.name&&(c.getComponent(A).enabled=!0)}d.on(g.EventType.TOUCH_START,this.backBuild,this),this.scheduleOnce((function(){E.instance.isFirstError=!1,e.errorFinger.active=!0;var t=C.mainCamera.convertToUINode(e.selectNode.getWorldPosition(),e.stageUI);e.errorFinger.setPosition(t)}))}},a.backBuild=function(){this.dountStop(),d.off(g.EventType.TOUCH_START,this.backBuild,this)},a.roundChange=function(e){this.nowRound=e,this.roundInit()},a.nextLevel=function(){var e=this;if(2==this.nowRound)if(E.instance.energyCount<1)this.energyPanel.active=!0;else{var t=E.instance.energyCount-1;E.instance.energyCount=t,this.scheduleOnce((function(){if(e.nowStage++,e.nowStage>12){var t=e.nowLevel+1;e.nowStage=1,t>3?(t=3,e.goStageChoose(t)):e.goGame(12*(t-1)+e.nowStage,!0)}else e.goGame(12*(e.nowLevel-1)+e.nowStage,!0)}))}},a.gameUpdate=function(){if(0==this.nowRound&&this.isLevelStart){for(var e=0;e<this.stage.floor.length;e++)this.stage.floor[e].RoadInit();for(var t=0;t<this.stage.floor.length;t++)this.stage.floor[t].checkRoad()}},a.controlOn=function(){this.controlOff(),this.offSelect(),this.camRayInit()},a.controlOff=function(){this.camRayOff()},a.camRayInit=function(){d.on(g.EventType.TOUCH_START,this.camRayCheck,this),d.on(g.EventType.TOUCH_MOVE,this.camRayCheck,this),d.on(g.EventType.TOUCH_END,this.offCheck,this),d.on(g.EventType.TOUCH_CANCEL,this.offCheck,this)},a.camRayCheck=function(e){if(null==this.lastPoint)this.lastPoint=e.getLocation();else{var t=new u,n=this.lastPoint,i=e.getLocation();u.subtract(t,i,n);if(u.lengthSqr(t)>=.1){var o=Math.atan2(-t.y,t.x)/Math.PI*180,a="none";switch(o>-135&&o<-45?a="up":o>-45&&o<45?a="right":o<135&&o>45?a="down":(o<-135||o>135)&&(a="left"),a){case"none":break;default:this.nowSlideWay=a}}this.lastPoint=i}this.camRay=new f.Ray,C.mainCamera.screenPointToRay(e.getLocation().x,e.getLocation().y,this.camRay),p.instance.raycastClosest(this.camRay,1,1e3,!0)?this.rayCheck(p.instance.raycastClosestResult):this.rayCheck(null)},a.camRayOff=function(){this.lastPoint=null,d.off(g.EventType.TOUCH_START,this.camRayCheck,this),d.off(g.EventType.TOUCH_MOVE,this.camRayCheck,this)},a.changeBuildOrDelete=function(){this.isDeleteRoad=!this.isDeleteRoad},a.rayCheck=function(e){switch(this.nowGoPlace){case"home":break;case"game":this.rayCheck_game(e);break;case"stageChoose":break;default:console.warn("射线检测不知道你在哪个场景",this.nowGoPlace)}},a.offCheck=function(){this.offSelect()},a.rayCheck_game=function(e){if(null!=e){var t=e.collider.node.parent,n=t.getComponent(R),i=t.getPosition();i.x*=this.stage.node.scale.x,i.z*=this.stage.node.scale.z,this.activeSelcet(i,n.bulidType!=M.block);var o=B.go_up;switch(this.nowSlideWay){case"up":o=B.go_up;break;case"down":o=B.go_down;break;case"left":o=B.go_left;break;case"right":o=B.go_right}n.bulidType==M.empty?this.isDeleteRoad||(n.buildRoad(o),this.stepAdd()):n.bulidType==M.change&&(this.isDeleteRoad?(n.deleteRoad(),this.stepAdd()):(n.changeRoad(o),this.stepAdd()))}else this.offSelect()},a.activeSelcet=function(e,t){this.selectNode.setPosition(e);var n=this.selectNode.getComponentInChildren(v),i=n.material.passes[0].getHandle("mainColor");t?n.material.passes[0].setUniform(i,new S(0,255,255,125)):n.material.passes[0].setUniform(i,new S(255,0,0,125)),this.selectNode.active=!0},a.selectWrongAnimOn=function(e){this.selectNode.setPosition(e);var t=this.selectNode.getComponentInChildren(v),n=t.material.passes[0].getHandle("mainColor"),i=new S(255,0,0,0);t.material.passes[0].setUniform(n,i),this.selectNode.active=!0,this.wrongAnimTween=m({a:0}).to(.5,{a:125},{onUpdate:function(e){i.a=e.a,t.material.passes[0].setUniform(n,i)}}).to(.5,{a:0},{onUpdate:function(e){i.a=e.a,t.material.passes[0].setUniform(n,i)}}).union().repeatForever().start()},a.selectWrongAnimOff=function(){this.wrongAnimTween&&this.wrongAnimTween.stop()},a.offSelect=function(){this.selectNode.active=!1,this.selectWrongAnimOff()},a.stepInit=function(){this.steps.length=0,this.nowLastStepIndex=0,H.on(P.Game_Step_Add,this,this.stepAdd),this.remeberOrignalStep()},a.remeberOrignalStep=function(){for(var e=[],t=[],n=0;n<this.stage.floor.length;n++){var i=this.stage.floor[n];e.push(new U(i.node.getPosition(),i.moveType,i.changeType,i.bulidType)),i.nowBuild&&"Road"==i.nowBuild.name?t.push(new x(i.nowBuild.getPosition(),i.nowBuild.getRotation())):t.push(null)}var o=new G(e,t);this.orignalStep=o},a.stepAdd=function(){for(var e=[],t=[],n=0;n<this.stage.floor.length;n++){var i=this.stage.floor[n];e.push(new U(i.node.getPosition(),i.moveType,i.changeType,i.bulidType)),i.nowBuild&&"Road"==i.nowBuild.name?t.push(new x(i.nowBuild.getPosition(),i.nowBuild.getRotation())):t.push(null)}var o=new G(e,t),a=this.nowLastStepIndex-1;a>0&&this.steps.splice(0,a),this.nowLastStepIndex=0,this.steps.length>0&&JSON.stringify(this.steps[0])==JSON.stringify(o)||(this.steps.length>=this.stepMax&&this.steps.pop(),this.steps.unshift(o))},a.stepOff=function(){H.off(P.Game_Step_Add,this,this.stepAdd)},a.setStageByStepData=function(e){for(var t=0;t<e.floorDatas.length;t++){var n=e.floorDatas[t],i=this.stage.getFloorByPos(n.pos);if(i){var o=i.getComponent(R);null==e.roadDatas[t]?o.nowBuild&&o.deleteRoad():o.nowBuild?o.changeRoad(n.moveType):o.buildRoad(n.moveType),o.moveType=n.moveType,o.changeType=n.changeType,o.bulidType=n.bulidType}else console.log("Floor not found",n.pos,this.stage)}},a.getLastStep=function(){if(this.nowLastStepIndex++,this.nowLastStepIndex<this.steps.length){var e=this.steps[this.nowLastStepIndex];this.setStageByStepData(e)}else this.getInitStep(),this.nowLastStepIndex=this.steps.length},a.getNextStep=function(){if(this.nowLastStepIndex--,this.nowLastStepIndex>=0){var e=this.steps[this.nowLastStepIndex];this.setStageByStepData(e)}else this.nowLastStepIndex++},a.getInitStep=function(){this.setStageByStepData(this.orignalStep),this.stepAdd()},a.showStageTip=function(){var e=this;if(this.isTipsOn)L.instance.showToast("你已经使用过提示了");else{var t=this;if(E.instance.tipsCount>0){var n=E.instance.tipsCount-1;E.instance.tipsCount=n,function(){t.getInitStep();for(var n=0;n<t.stage.tipsRoadPos.length;n++)t.stage.getFloorByPos(t.stage.tipsRoadPos[n]).getComponent(R).buildRoad(t.stage.tipsRoadWay[n]);t.steps.length=0,t.nowLastStepIndex=0,t.remeberOrignalStep(),e.isTipsOn=!0}()}else this.showTipsPanel()}},a.showTipsPanel=function(){this.tipsPanel.active=!0},a.closeTipsPanel=function(){this.tipsPanel.active=!1},a.videoTips=function(){var e=this;L.instance.showVideo((function(){var t=E.instance.tipsCount+1;E.instance.tipsCount=t,L.instance.showToast("获得1次提示"),e.closeTipsPanel()}),(function(){}))},a.showEnergy=function(){this.energyPanel.active=!0},a.closeEnergy=function(){this.energyPanel.active=!1},a.videoGetEnergy=function(){var e=this;L.instance.showVideo((function(){var t=E.instance.energyCount+5;E.instance.energyCount=t,L.instance.showToast("获得5体力"),e.closeEnergy()}),(function(){}))},a.dountStart=function(){this.beatTime=E.instance.beatTime,this.roundChange(1),this.beatStop();for(var e=0;e<this.stage.endFloors.length;e++){var t=this.stage.endFloors[e],n=t.node.getPosition();switch(t.moveType){case B.go_up:n.add(new c(0,0,1));break;case B.go_down:n.add(new c(0,0,-1));break;case B.go_left:n.add(new c(1,0,0));break;case B.go_right:n.add(new c(-1,0,0));break;default:console.log("没加")}var i=this.stage.getFloorByPos(n);if(null!=i){var o=i.getComponent(R);o.moveType!=B.empty&&o.moveType!=B.block||this.winOrWrong(!1,t.node.getPosition(),"结尾需要连接道路")}}J.instacne.playSound(N.Start)},a.beatStop=function(){if(this.beatTime=E.instance.beatTime,0!=this.nowRound){this.animSpeed=1/(3*E.instance.beatTime);for(var e=0;e<this.stage.machine.length;e++){var t=this.stage.machine[e].getComponentInChildren(w);t.play("Machine"),t.getState("Machine").speed=this.animSpeed}for(var n=0;n<this.stage.startFloors.length;n++){for(var i=!1,o=0;o<this.stage.dountNode.children.length;o++){if(c.squaredDistance(this.stage.dountNode.children[o].getPosition(),this.stage.startFloors[n].node.getPosition())<.5&&null==this.stage.dountNode.children[o].getComponent(_).goPos){i=!0;break}}if(!i)W.instance.bornObjFromPool("Stage","Donut",this.stage.dountNode,this.stage.startFloors[n].node.getPosition()).getComponent(_).init(E.instance.nowModelId,this.stage)}for(var a=[],s=0;s<this.stage.dountNode.children.length;s++){var h=this.stage.dountNode.children[s].getComponent(_).beat_Stop(a);h&&a.push(h.node.getSiblingIndex())}J.instacne.playSound(N.Beat),this.scheduleOnce(this.beatMove,1.5*this.beatTime)}},a.beatMove=function(){if(this.beatTime=E.instance.beatTime,0!=this.nowRound){for(var e=0;e<this.stage.dountNode.children.length;e++){this.stage.dountNode.children[e].getComponent(_).beat_Move()}this.scheduleOnce(this.beatStop,1.5*this.beatTime)}},a.beatSpeedUp=function(){E.instance.beatTime=.05,this.animSpeed=1/(3*E.instance.beatTime);for(var e=0;e<this.stage.machine.length;e++){this.stage.machine[e].getComponentInChildren(w).getState("Machine").speed=this.animSpeed}E.instance.isFx=!1},a.beatSlowDown=function(){E.instance.beatTime=.25,this.animSpeed=1/(3*E.instance.beatTime);for(var e=0;e<this.stage.machine.length;e++){this.stage.machine[e].getComponentInChildren(w).getState("Machine").speed=this.animSpeed}E.instance.isFx=!0},a.dountStop=function(){if(this.unschedule(this.beatMove),this.unschedule(this.beatStop),this.stage){for(var e=this.stage.dountNode.children.length-1;e>=0;e--){this.stage.dountNode.children[e].getComponent(_).recyle()}this.roundChange(0);for(var t=0;t<this.stage.machine.length;t++){this.stage.machine[t].getComponentInChildren(w).play("Empty")}}},a.wrongOrRightJudgeInit=function(){this.wrongOrRightJudgeOff(),H.on(P.Game_End_Arrive,this,this.endArriveJudge),H.on(P.Game_Wrong_Event,this,this.wrongInfoJudge),this.arriveDonutStep.length=0,this.arriveDountFloorIndex.length=0},a.endArriveJudge=function(e){var t=e.endPos,n=e.arriveDountStep,i=this.stage.endFloors,o=this.stage.getFloorByPos(t);switch(E.instance.isShowEndDonut?0:1){case 0:for(var a=0;a<i.length;a++){var s=i[a].node.getSiblingIndex();if(-1==this.arriveDountFloorIndex.indexOf(s)&&s==o.getSiblingIndex()){if(this.arriveDountFloorIndex.push(s),i[a].endType-1!=n)return void this.winOrWrong(!1,i[a].node.getPosition());this.arriveDonutStep.push(n);for(var h=void 0,r=0;r<this.targetShowDonuts.children.length;r++)if(n==(h=this.targetShowDonuts.children[r].getComponent(_)).nowStep&&!h.isRotate){h.rotateStart(),J.instacne.playSound(N.True);break}break}}this.arriveDountFloorIndex.length>=i.length&&(this.arriveDonutStep.length>=i.length?this.winOrWrong(!0):this.winOrWrong(!1));break;case 1:for(var c=0;c<i.length;c++){var l=i[c].node.getSiblingIndex();if(-1==this.arriveDountFloorIndex.indexOf(l)&&l==o.getSiblingIndex()){this.arriveDountFloorIndex.push(l),this.arriveDonutStep.push(n);for(var d=void 0,g=0;g<this.targetShowDonuts.children.length;g++)if(n==(d=this.targetShowDonuts.children[g].getComponent(_)).nowStep&&!d.isRotate){d.rotateStart(),J.instacne.playSound(N.True);break}break}}if(this.arriveDountFloorIndex.length>=i.length){for(var u=F.cloneArray(this.arriveDonutStep),f=0,p=0;p<i.length;p++){var v=i[p].endType-1,S=u.indexOf(v);-1==S||(u.splice(S,1),f++)}f==i.length?this.winOrWrong(!0):this.winOrWrong(!1)}break;default:console.warn("arriveCheckType Wrong")}},a.wrongInfoJudge=function(e){var t=e.pos,n=e.reason.split("_");switch(n[0]){case"loopPath":console.log("失败loopPath"),this.winOrWrong(!1,t);break;case"deadEnd":console.log("失败deadEnd"),this.winOrWrong(!1,t);break;case"StepWrong":console.log("失败StepWrong",n[1],n[2]),this.winOrWrong(!1,t);break;default:console.warn("wrongInfoJudge type error",e)}},a.winMusicLoop=function(){J.instacne.playMusic(N.Work2)},a.winOrWrong=function(e,t,n){if(1==this.nowRound)if(e){J.instacne.playMusic(N.Work1);var i=12*(this.nowLevel-1)+this.nowStage;i>=E.instance.level&&E.instance.passLevel(),b.instance.trackEvent("Stage_Finish",{level:i}),this.roundChange(2),this.scheduleOnce(this.winMusicLoop,16)}else t?this.selectWrongAnimOn(t):console.warn("错误提示位置为空,如果不是设计如此，请检查填入值"),n?H.event(P.Game_TipLabel_Show,n):console.warn("错误提示文字为空,如果不是设计如此，请检查填入值"),this.roundChange(3),J.instacne.playSound(N.Flase)},a.wrongOrRightJudgeOff=function(){H.off(P.Game_End_Arrive,this,this.endArriveJudge),H.off(P.Game_Wrong_Event,this,this.wrongInfoJudge)},a.playBtnSound=function(){J.instacne.playSound(N.Button)},t}(y)).instance=void 0,se=t((ae=we).prototype,"selectNode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=t(ae.prototype,"stageUI",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=t(ae.prototype,"stageChooseUI",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ce=t(ae.prototype,"stageChoose",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),le=t(ae.prototype,"home",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=t(ae.prototype,"targetShowImage",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=t(ae.prototype,"targetShowDonuts",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=t(ae.prototype,"energyPanel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=t(ae.prototype,"tipsPanel",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=t(ae.prototype,"energyBtn",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ve=t(ae.prototype,"TeachNode",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=t(ae.prototype,"TipsNode",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),me=t(ae.prototype,"errorFinger",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe=ae))||oe));a._RF.pop()}}}));

System.register("chunks:///_virtual/GridUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var n,i,c,e,a,s,o,r,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,c=t._decorator,e=t.Component},function(t){a=t.default},function(t){s=t.default},function(t){o=t.default},function(t){r=t.default},function(t){h=t.default}],execute:function(){var d;i._RF.push({},"0dfda1dSlxH5KlORPyKdl2Q","GridUI",void 0);var l=c.ccclass;c.property,t("default",l("GridUI")(d=function(t){function i(){for(var n,i=arguments.length,c=new Array(i),e=0;e<i;e++)c[e]=arguments[e];return(n=t.call.apply(t,[this].concat(c))||this).ccb=null,n.hadClick=!1,n.isShowHide=!1,n}n(i,t);var c=i.prototype;return c.onDisable=function(){this.unscheduleAllCallbacks(),this.ccb&&this.ccb()},c.showUI=function(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),this.ccb=t,i||o.Instance.NewWuchu2&&s.instance.dataConfig.front_all_gezi_switch?(a.instance.showGrid(),n&&o.Instance.NewWuchu&&s.instance.dataConfig.front_wx_chaping_switch&&r.instance.showInterAd(),this.node.active=!0,this.hadClick=!1,this.isShowHide=!1,this.isShowHide=100*Math.random()<s.instance.dataConfig.front_hot_youxi,s.instance.dataConfig.is_allow_area&&o.Instance.allowScene()&&this.isShowHide&&h.Instance.showHideBanner()):this.ccb&&this.ccb()},c.continueBtnCB=function(){o.Instance.NewWuchu&&this.isShowHide&&!this.hadClick?this.hadClick=!0:(h.Instance.clearShowHideBanner(),a.instance.hideGrid(),this.node.active=!1)},i}(e))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/GridUI2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var n,i,e,c,s,a,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,c=t.Component},function(t){s=t.default},function(t){a=t.default},function(t){o=t.default},function(t){r=t.default}],execute:function(){var h;i._RF.push({},"cdc62eeIYZLe5xXGUsb477K","GridUI2",void 0);var u=e.ccclass;e.property,t("default",u("GridUI2")(h=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),c=0;c<i;c++)e[c]=arguments[c];return(n=t.call.apply(t,[this].concat(e))||this).ccb=null,n.hadClick=!1,n.isShowHide=!1,n}n(i,t);var e=i.prototype;return e.onDisable=function(){this.unscheduleAllCallbacks(),this.ccb&&this.ccb()},e.showUI=function(t,n){this.ccb=t,o.Instance.NewWuchu2&&a.instance.dataConfig.front_gezi_two_switch?(s.instance.showGrid(),this.node.active=!0,this.hadClick=!1,this.isShowHide=!1,this.isShowHide=100*Math.random()<a.instance.dataConfig.front_hot_tuijian,a.instance.dataConfig.is_allow_area&&o.Instance.allowScene()&&this.isShowHide&&r.Instance.showHideBanner()):this.ccb&&this.ccb()},e.continueBtnCB=function(){o.Instance.NewWuchu&&this.isShowHide&&!this.hadClick?this.hadClick=!0:(r.Instance.clearShowHideBanner(),s.instance.hideGrid(),this.node.active=!1)},e.adBtnCB=function(){this.continueBtnCB()},i}(c))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/GridUI3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var n,i,c,e,s,a,o,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,c=t._decorator,e=t.Component},function(t){s=t.default},function(t){a=t.default},function(t){o=t.default},function(t){h=t.default}],execute:function(){var r;i._RF.push({},"f4d32yLQ4hFGJDz6cNmp51R","GridUI3",void 0);var u=c.ccclass;c.property,t("default",u("GridUI3")(r=function(t){function i(){for(var n,i=arguments.length,c=new Array(i),e=0;e<i;e++)c[e]=arguments[e];return(n=t.call.apply(t,[this].concat(c))||this).ccb=null,n.hadClick=!1,n.isShowHide=!1,n}n(i,t);var c=i.prototype;return c.onDisable=function(){this.unscheduleAllCallbacks(),this.ccb&&this.ccb()},c.showUI=function(t){this.ccb=t,o.Instance.NewWuchu2&&a.instance.dataConfig.front_play_gezi_switch?(s.instance.showGrid(),this.node.active=!0,this.hadClick=!1,this.isShowHide=!1,this.isShowHide=100*Math.random()<a.instance.dataConfig.front_hot_xiaochengxu,a.instance.dataConfig.is_allow_area&&o.Instance.allowScene()&&this.isShowHide&&h.Instance.showHideBanner()):this.ccb&&this.ccb()},c.continueBtnCB=function(){o.Instance.NewWuchu&&this.isShowHide&&!this.hadClick?this.hadClick=!0:(h.Instance.clearShowHideBanner(),s.instance.hideGrid(),this.node.active=!1)},c.adBtnCB=function(){this.continueBtnCB()},i}(e))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/GridUI4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var n,i,c,e,s,a,o,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,c=t._decorator,e=t.Component},function(t){s=t.default},function(t){a=t.default},function(t){o=t.default},function(t){h=t.default}],execute:function(){var r;i._RF.push({},"aa08aVYJXpArovnELS81Mhd","GridUI4",void 0);var u=c.ccclass;c.property,t("default",u("GridUI4")(r=function(t){function i(){for(var n,i=arguments.length,c=new Array(i),e=0;e<i;e++)c[e]=arguments[e];return(n=t.call.apply(t,[this].concat(c))||this).ccb=null,n.hadClick=!1,n.isShowHide=!1,n.hadShow=void 0,n}n(i,t);var c=i.prototype;return c.onDisable=function(){this.unscheduleAllCallbacks(),this.ccb&&this.ccb()},c.showUI=function(t,n){this.ccb=t,o.Instance.NewWuchu2&&a.instance.dataConfig.front_gezi_two_switch?(this.node.active=!0,this.schedule(this.testGrid,1),this.hadClick=!1,h.Instance.showHideBanner()):this.ccb&&this.ccb()},c.testGrid=function(){s.instance.gridAdArr.length>0&&!this.hadShow&&(this.hadShow=!0,s.instance.showGrid())},c.continueBtnCB=function(){!o.Instance.NewWuchu||this.hadClick?(h.Instance.clearShowHideBanner(),s.instance.hideGrid(),this.unschedule(this.testGrid),this.node.active=!1):this.hadClick=!0},c.adBtnCB=function(){this.continueBtnCB()},i}(e))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/HardLookAtHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./CameraHandler.ts"],(function(o){"use strict";var t,e,n,r,a,i;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o.Vec3,r=o.Quat},function(o){a=o.Vec4_closeTo},function(o){i=o.CameraHandler}],execute:function(){e._RF.push({},"6b941On3J1Ihqyi0Yu8PlLi","HardLookAtHandler",void 0);var s=new n,d=new n,l=new r;o("HardLookAtHandler",function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e.prototype.updateCamera=function(o){var t=this._vcam;if(t.lookAt){var e=t.aim.hardLookat;n.add(s,t.lookAt.position,e.trackedObjectOffset),t.lookAt.parent&&s.add(t.lookAt.parent.worldPosition),t.lookaheadPosition.set(s),n.subtract(d,t.node.worldPosition,s).normalize(),r.fromViewUp(l,d),a(l,t.node.worldRotation)||(t.node.worldRotation=l)}},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/HomeController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./StageData.ts","./BornMgr.ts","./Tool.ts","./Comp.ts","./Donut.ts","./Button3D.ts"],(function(e){"use strict";var t,o,n,i,r,a,s,l,d,c,h,u,p,m,v,f,g,y,C,N,w,M,_,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.createClass},function(e){a=e.cclegacy,s=e._decorator,l=e.CCInteger,d=e.CCFloat,c=e.Vec3,h=e.input,u=e.Input,p=e.geometry,m=e.PhysicsSystem,v=e.MeshRenderer,f=e.Vec4,g=e.find},function(e){y=e.cinestation},function(e){C=e.StageData},function(e){N=e.BornMgr},function(e){w=e.default},function(e){M=e.Comp},function(e){_=e.Donut},function(e){b=e.Button3D}],execute:function(){var I,P,S,T,D,B,O,R,k;a._RF.push({},"ea4e89977RK55rnAqfpq65T","HomeController",void 0);var F=s.ccclass,A=s.property;e("HomeController",(I=F("HomeController"),P=A({type:l}),S=A({type:l}),T=A({type:d,visible:!0,displayName:"生成场景"}),D=A({type:d,visible:!0,displayName:"删除场景"}),I((R=t((O=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"width",R,i(t)),n(t,"height",k,i(t)),t.moveDelta=.25,t.moveIndex=0,t.move_goPos=null,t.move_Speed=1,t._value=0,t._value2=0,t}o(t,e);var a=t.prototype;return a.start=function(){for(var e=0;e<this.donutNode.children.length;e++){var t=this.donutNode.children[e].getComponent(_);t.nowModelId=w.randomInt(0,2),t.nowStep=w.randomInt(1,4),t.modelInit(t.nowModelId),t.node.getChildByName("Model").setRotationFromEuler(new c(0,w.randomNumber(-90,90),0)),t.stepShow(t.nowStep)}this.bornFloor(this.width,this.height)},a.On=function(){var e;this.dountMove(),this.schedule(this.dountMove,3*this.moveDelta),this.rayInit();for(var t=0;t<this.roadNode.children.length;t++)e=this.roadNode.children[t].getChildByName("Model"),w.unactiveAllChildren(e),e.children[C.instance.nowModelId].active=!0},a.Off=function(){this.unscheduleAllCallbacks(),this.rayOff()},a.rayInit=function(){h.on(u.EventType.TOUCH_START,this.rayCheck,this)},a.rayOff=function(){h.off(u.EventType.TOUCH_START,this.rayCheck,this)},a.rayCheck=function(e){var t=new p.Ray;if(y.mainCamera.screenPointToRay(e.getLocation().x,e.getLocation().y,t),m.instance.raycastClosest(t,4,1e3,!0))m.instance.raycastClosestResult.collider.node.parent.getComponent(b).onClick()},a.bornFloor=function(e,t){this.sceneNode.destroyAllChildren();for(var o=this.sceneNode,n=new c(-e/2+.5,0,-t/2+.5),i=0;i<e;i++)for(var r=0;r<t;r++){var a=n.clone();a.x+=i,a.z+=r;var s=this.bornMgr.bornObjFromPool("Stage","Floor",o,a).getChildByName("Model");w.unactiveAllChildren(s),s.children[C.instance.nowModelId].active=!0}},a.dountMove=function(){this.moveIndex++;for(var e=0;e<this.donutNode.children.length;e++){var t=this.donutNode.children[e],o=(e+this.moveIndex)%this.roadNode.children.length,n=t.getComponent(_);if(0==o){var i=this.roadNode.children[0].getPosition();t.setPosition(i),n.nowModelId=w.randomInt(0,2),n.nowStep=w.randomInt(1,4),n.modelInit(n.nowModelId),n.node.getChildByName("Model").setRotationFromEuler(new c(0,w.randomNumber(-90,90),0)),n.stepShow(n.nowStep)}else{var r=this.roadNode.children[o].getPosition();n.moveTo_Local(r,1/this.moveDelta)}}},a.update=function(e){if(this.moveToUpdate(e),C.instance.isRoadUvMove){var t=this.roadNode.children[0].getChildByName("Model").children[C.instance.nowModelId].getChildByName("Up").getComponent(v),o=t.getMaterial(0).passes[0].getHandle("tilingOffset"),n=new f;t.getMaterial(0).passes[0].getUniform(o,n),n.w-=1.5*e*.25/C.instance.beatTime,n.y=.9,t.getMaterial(0).passes[0].setUniform(o,n)}},a.moveTo_Local=function(e,t){void 0===t&&(t=1),this.move_goPos=e,this.move_Speed=t},a.moveToUpdate=function(e){if(null!=this.move_goPos){var t=this.node.getPosition(),o=new c;c.subtract(o,this.move_goPos,t);var n=o.length(),i=e*this.move_Speed;n<=i?(this.node.setPosition(this.move_goPos),this.move_goPos=null):(o=o.normalize(),this.node.setPosition(t.add(o.multiplyScalar(i))))}},a.moveOff_Local=function(){this.move_goPos=null,this.move_Speed=1},r(t,[{key:"bornMgr",get:function(){return g("StageNode").getComponent(N)}},{key:"sceneNode",get:function(){return this.node.getChildByName("SceneNode")}},{key:"roadNode",get:function(){return this.node.getChildByName("RoadNode")}},{key:"donutNode",get:function(){return this.node.getChildByName("DonutNode")}},{key:"value",get:function(){return this._value},set:function(e){this.bornFloor(this.width,this.height)}},{key:"value2",get:function(){return this._value2},set:function(e){this.sceneNode.destroyAllChildren()}}]),t}(M)).prototype,"width",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=t(O.prototype,"height",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(O.prototype,"value",[T],Object.getOwnPropertyDescriptor(O.prototype,"value"),O.prototype),t(O.prototype,"value2",[D],Object.getOwnPropertyDescriptor(O.prototype,"value2"),O.prototype),B=O))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/ImpulseStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./NoiseGenerator.ts","./BaseStage.ts"],(function(e){"use strict";var t,s,n,o,r,i;return{setters:[function(e){t=e.inheritsLoose,s=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){o=e.cinestation},function(e){r=e.NoiseGenerator},function(e){i=e.BaseStage}],execute:function(){n._RF.push({},"f21dbKN87dMO5qpMLHdGsc/","ImpulseStage",void 0);e("ImpulseStage",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.updateStage=function(e){for(var t,n=this._vcam,i=n.impulse,u=s(o.impulseSources);!(t=u()).done;){var a=t.value;if(a.node.layer&i.source){var c=a.generateImpulse(e);c&&r.ApplyNoise(c,n)}}},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/InterstitialAdUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var e,n,i,r,s,o,a,c,u,h,l,d,f,p,m,g,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,a=t.Node,c=t.ProgressBar,u=t.Quat,h=t.Tween,l=t.tween,d=t.Component},function(t){f=t.default},function(t){p=t.default},function(t){m=t.default},function(t){g=t.default},function(t){_=t.default}],execute:function(){var b,C,B,x,v,w,k;s._RF.push({},"f8a21SuRo5ISan4Crrw3Ks3","InterstitialAdUI",void 0);var I=o.ccclass,T=o.property;t("default",(b=I("InterstitialAdUI"),C=T(a),B=T(c),b((w=e((v=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,i(e,"box",w,r(e)),i(e,"pBar",k,r(e)),e.ccb=null,e.showCallback=null,e.hadShowBanner=!1,e.preTime=0,e.rateTime=0,e.minclicknum=void 0,e.maxclicknum=void 0,e.needClick=void 0,e.isforce=!1,e.addProgerss=void 0,e.repeatCount=0,e.isRepeat=void 0,e.lianxu_num=void 0,e.quat1=new u,e.quat2=new u,e.quat3=new u,e}n(e,t);var s=e.prototype;return s.onDisable=function(){var t=this;this.unscheduleAllCallbacks(),_.Instance.hideBannerFun(!0),this.repeatCount>0?m.Instance.com.scheduleOnce((function(){t.showUI(t.isRepeat,t.lianxu_num,t.ccb),t.repeatCount--}),.1):this.ccb&&this.ccb()},s.showUI=function(t,e,n){this.lianxu_num=e,this.isRepeat=t,t&&this.repeatCount<=0&&(this.repeatCount=e),this.minclicknum=Number(p.instance.dataConfig.front_box_clicks[0]),this.maxclicknum=Number(p.instance.dataConfig.front_box_clicks[1]),this.needClick=p.instance.GetRandom(this.minclicknum,this.maxclicknum-p.instance.dataConfig.front_progress_bar_reduce),this.isforce=p.instance.dataConfig.front_is_box_force,this.addProgerss=1/this.maxclicknum,console.log("this.needClick:",this.needClick),console.log("this.addProgerss:",this.addProgerss),this.ccb=n,this.node.active=!0,this.hadShowBanner=!1,this.pBar.progress=0,this.rateTime=0,this.preTime=0,this.schedule(this.DecBar),g.instance.showBanner()},s.closeCB=function(){this.node.active=!1},s.onCloseInter=function(){},s.clickCB=function(){var t=this;if(this.pBar.progress+=this.addProgerss,this.pBar.progress>1&&(this.pBar.progress=1),this.shakeBox(),!this.hadShowBanner){this.isforce=p.instance.dataConfig.front_is_box_force;var e=p.instance.dataConfig.front_box_hide_time/1e3,n=function(){t.hadShowBanner=!0,t.scheduleOnce((function(){f.instance.getIsShow()||(t.repeatCount=0),t.closeCB()}),e),g.instance.showInterAd()},i=this.rateTime-this.preTime,r=p.instance.dataConfig.front_box_sulv_qujian,s=this.getRandomItemInArr(r).split("|"),o=s[0],a=s[1];if(100*this.pBar.progress>=p.instance.dataConfig.front_box_sulv_start&&parseFloat(o)<=i&&i<=parseFloat(a))return console.log("宝箱触发频率：",i),p.instance.dataConfig.front_sulv_wuchu_switch&&(this.isforce=!0,e=p.instance.dataConfig.front_fbox_hide_time/1e3),void n();this.preTime=this.rateTime,this.pBar.progress>=this.needClick*this.addProgerss&&!this.hadShowBanner&&(console.log("宝箱触发进度"),n())}},s.shakeBox=function(){h.stopAllByTarget(this.box),u.fromEuler(this.quat1,0,0,-10),u.fromEuler(this.quat2,0,0,10),u.fromEuler(this.quat3,0,0,0),l(this.box).to(.1,{rotation:this.quat1}).to(.2,{rotation:this.quat2}).to(.1,{rotation:this.quat3}).start()},s.DecBar=function(){this.pBar.progress-=p.instance.dataConfig.front_progress_bar_return,this.pBar.progress<0&&(this.pBar.progress=0)},s.update=function(t){this.rateTime+=t},s.GetRandom=function(t,e,n){void 0===n&&(n=!0);var i=e-t,r=Math.random()*i;return r+=t,n?Math.floor(r):r},s.getRandomItemInArr=function(t){return t[Math.floor(Math.random()*t.length)]},e}(d)).prototype,"box",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(v.prototype,"pBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=v))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/IVCam.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"15037D3BZVK3LlfNfJfNhch","IVCam",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/JJMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./jiujiu_sdk_conf.mjs_cjs=&original=.js","./jiujiu_sdk.min.mjs_cjs=&original=.js","./jiujiu_pull_sdk.min.mjs_cjs=&original=.js","./CustomAdMgr.ts","./DuilianAdMgr.ts","./FinishCustomAdMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts","./UMTrack.ts"],(function(t){"use strict";var i,n,a,r,e;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy,a=t._decorator,r=t.loader,e=t.SpriteFrame},null,null,null,null,null,null,null,null,null,null],execute:function(){var o,s;t("SceneDir",void 0),n._RF.push({},"38cb7OqDnxCvLb5ThetVf7F","JJMgr",void 0);var l,u=a.ccclass;a.property;!function(t){t.SCENE_FRIENDGAME="FriendGameUI",t.SCENE_SCROLLUI="ScrollUI",t.SCENE_RECOMMENDUI="RecommendUI",t.SCENE_FULLGAMEUI="FullGameUI",t.SCENE_FINISHGAMEUI="FinishGameUI",t.SCENE_DRAWUI="DrawUI",t.SCENE_PROGRAMUI="ProgramUI",t.SCENE_WECHATUI="WeChatUI",t.SCENE_STARTNAVUI="StartNavUI",t.SCENE_GAMENAVUI="GameNavUI",t.SCENE_MADUI1="MadUI1",t.SCENE_MADUI2="MadUI2",t.SCENE_HALLUI="HallUI"}(l||(l=t("SceneDir",{})));var c=function(){this.appid=void 0,this.icon=void 0,this.path=void 0,this.title=void 0,this.subtitle=void 0,this.id=void 0};t("default",u("JJMgr")(((s=function(){function t(){this.dataConfig={},this.navDataArr=[],this.isFinished=!1,this.shareConfig=void 0}var n=t.prototype;return n.initJJ=function(t){t&&t()},n.updateDataConfig=function(t){var i=t.data;for(var n in this.dataConfig.is_allow_area=t.is_allow_area,this.dataConfig.is_allow_export=t.is_allow_export,this.dataConfig.front_wuchu_scene=t.front_wuchu_scene,i)this.dataConfig[n]=i[n].config_val;console.log(this.dataConfig)},n.updateNavData=function(t){this.navDataArr=[];for(var i=0;i<t.length;i++){var n=t[i],a=new c;a.appid=n.channel_game_appid,a.title=n.channel_game_name,a.path=n.path,a.subtitle=n.originality.copywriting,a.icon=n.originality.material,a.id=n.originality.id,this.navDataArr.push(a)}},n.JJSendEvent=function(t,i){},n.NavigateApp=function(t,i,n,a){},n.getSubtitle=function(t){return this.navDataArr[t].subtitle&&""!=this.navDataArr[t].subtitle?this.navDataArr[t].subtitle:this.navDataArr[t].title},n.loadImgByUrl=function(t,i,n,a){void 0===n&&(n="png"),r.load({url:i,type:n},(function(i,n){!i&&t&&n&&t.spriteFrame&&(t.spriteFrame=new e,t.spriteFrame.texture=n,a&&a())}))},n.loadSpriteFrame=function(t,i,n){r.loadRes(t,e,(function(t,a){i.spriteFrame=a,n&&n()}))},n.shuffleArr=function(t){for(var i=t.length;i;){var n=Math.floor(Math.random()*i--),a=[t[i],t[n]];t[n]=a[0],t[i]=a[1]}return t},n.GetRandom=function(t,i,n){void 0===n&&(n=!0);var a=i-t+1,r=Math.random()*a;return r+=t,n?Math.floor(r):r},i(t,[{key:"shareContext",get:function(){return this.shareConfig},set:function(t){this.shareConfig=t}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,o=s))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/JJWxTrap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DuilianAdMgr.ts","./ExportCrl.ts","./FinishCustomAdMgr.ts","./JJMgr.ts","./EndBoxUI.ts","./FinishGameUI.ts","./GridUI.ts","./GridUI2.ts","./GridUI3.ts","./GridUI4.ts","./RunUI.ts","./StartBoxUI.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(n){"use strict";var t,e,o,i,a,s,c,r,u,h,d,f,w,l,_,g,m;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,o=n.find},function(n){i=n.default},function(n){a=n.default},function(n){s=n.default},function(n){c=n.default},function(n){r=n.default},function(n){u=n.default},function(n){h=n.default},function(n){d=n.default},function(n){f=n.default},function(n){w=n.default},function(n){l=n.default},function(n){_=n.default},function(n){g=n.default},function(n){m=n.default}],execute:function(){e._RF.push({},"0b7f71mekdODZV20fn3yQ+y","JJWxTrap",void 0),n("default",function(){function n(){this.isSplash=!1,this.gridInt=void 0,this.dataConfig=c.instance.dataConfig,this._levelObj=void 0,this._Level=0,this.moreGameBtn=void 0,this.drawBtn=void 0}var e=n.prototype;return e.allowScene=function(){if(!this.dataConfig.front_wuchu_scene)return!0;var n=window.wx.getEnterOptionsSync().scene,t=window.wx.getEnterOptionsSync().query,e=Number(localStorage.getItem("localScene"));e||(e=n,localStorage.setItem("localScene",e.toString()),t.wxgamecid&&localStorage.setItem("wxgamecid",t.wxgamecid.toString())),this.dataConfig.front_first_scv_swtich&&(n=e);var o=localStorage.getItem("wxgamecid");this.dataConfig.front_is_source||(o="true");var i=this.dataConfig.front_wuchu_scene.toString();if(-1==i.search("|"))return parseInt(i)!=n;for(var a=i.split("|"),s=0;s<a.length;s++){if(parseInt(a[s])==n&&o)return!0}return!1},e.inHomePage=function(t,e){var o=this;console.log("本地保存场景值：",localStorage.getItem("localScene")),console.log("本地保存路径值：",localStorage.getItem("wxgamecid")),console.log("allowScene:",this.allowScene()),this.moreGameBtn=t,this.drawBtn=e,t&&this.com.schedule(n.Instance.updateMoreGameBtn,.1),e&&this.com.schedule(n.Instance.updateDrawBtn,.1),i.instance.hideGrid(),new Promise((function(t,e){!o.isSplash&&n.Instance.NewWuchu2&&c.instance.dataConfig.front_home_hot_tuijian?o.showGridUI4((function(){t(0)}),!0):t(0)})).then((function(t){return new Promise((function(t,e){!o.isSplash&&n.Instance.NewWuchu2&&100*Math.random()<c.instance.dataConfig.front_home_vi_chance?(g.instance.showVideoAd(null,(function(){})),t(1)):t(1)}))})).then((function(t){return new Promise((function(t,e){!o.isSplash&&n.Instance.NewWuchu2&&100*Math.random()<c.instance.dataConfig.front_home_box_chance?o.showHomeBox((function(){t(2)})):t(2)}))})).then((function(n){return new Promise((function(n,t){o.gridInt=setInterval((function(){o.testGrid()}),1e3),n(3)}))})).then((function(n){m.Instance.showBannerFun2(),o.isSplash=!0}))},e.testGrid=function(){i.instance.gridAdArr.length>0&&(i.instance.showGrid(),clearInterval(this.gridInt))},e.updateMoreGameBtn=function(){n.Instance.moreGameBtn.active=n.Instance.NewWuchu2&&c.instance.dataConfig.front_haowan_switch},e.updateDrawBtn=function(){n.Instance.drawBtn.active=n.Instance.NewWuchu2&&c.instance.dataConfig.front_chouti_switch},e.clickShop=function(){i.instance.hideGrid(),m.Instance.hideBannerFun(!0),this.com.unschedule(n.Instance.updateMoreGameBtn),this.com.unschedule(n.Instance.updateDrawBtn)},e.clickStartGame=function(t){var e=this;i.instance.hideGrid(),m.Instance.hideBannerFun(!0),this.com.unschedule(n.Instance.updateMoreGameBtn),this.com.unschedule(n.Instance.updateDrawBtn),n.Instance.NewWuchu2?new Promise((function(n,t){e.showGridUI3((function(){n(0)}))})).then((function(n){return new Promise((function(n,t){100*Math.random()<c.instance.dataConfig.front_start_vi_chance?(g.instance.showVideoAd(null,(function(n){})),n(1)):n(1)}))})).then((function(n){return new Promise((function(n,t){e.showStartBox((function(){n(2)}))}))})).then((function(n){g.instance.showGameGridAd(),t&&t()})):t&&t()},e.clickHomeMoreGame=function(){i.instance.hideGrid(),m.Instance.hideBannerFun(!0),this.showGridUI((function(){i.instance.showGrid(),g.instance.showBanner()}),!1,!0)},e.clickDraw=function(){i.instance.hideGrid(),m.Instance.hideBannerFun(!0),this.showGridUI((function(){i.instance.showGrid(),g.instance.showBanner()}),!1,!0)},e.clickFinishMoreGame=function(){var n=this;o("CanvasJJ/ExportNode/FinishGameUI").active=!1,o("CanvasJJ/ExportNode/ScrollUI").active=!1,s.instance.hideGrid(),g.instance.hideGameGridAd(),m.Instance.hideBannerFun(!0),this.showGridUI((function(){g.instance.showGameGridAd(),!g.instance.showBanner()&&n.NewWuchu&&c.instance.dataConfig.front_daochulan_switch&&n.showFinishScroll(),n.dataConfig.front_jiesuanye_switch&&n.NewWuchu&&(100*Math.random()<n.dataConfig.front_daochu_gezi_chance?n.showFinishExport():s.instance.showGrid())}),!1,!0)},e.showGameBanner=function(){this.NewWuchu&&c.instance.dataConfig.front_game_banner_switch&&m.Instance.showBannerFun2()},e.showGameOver=function(n){var t=this;g.instance.hideGameGridAd(),m.Instance.hideBannerFun(!0),this.showGridUI((function(){t.showEndBox(n)}),!0)},e.showFinishUI=function(t){m.Instance.hideBannerFun(!0),g.instance.showGameGridAd(),t&&(t.active=n.Instance.NewWuchu&&c.instance.dataConfig.front_chouti_switch),m.Instance.showBannerFun2(),this.NewWuchu&&c.instance.dataConfig.front_daochulan_switch&&this.showFinishScroll(),this.dataConfig.front_jiesuanye_switch&&this.NewWuchu&&(100*Math.random()<this.dataConfig.front_daochu_gezi_chance?this.showFinishExport():s.instance.showGrid()),n.Instance.NewWuchu&&c.instance.dataConfig.front_jiesaunye_chaping_switch&&g.instance.showInterAd()},e.closeFinishUI=function(n){var t=this;s.instance.hideGrid(),g.instance.hideGameGridAd(),m.Instance.hideBannerFun(!0),o("CanvasJJ/ExportNode/FinishGameUI").active=!1,o("CanvasJJ/ExportNode/ScrollUI").active=!1,new Promise((function(n,e){t.NewWuchu2&&100*Math.random()<c.instance.dataConfig.front_jiesuanye_vi_chance?g.instance.showVideoAd(null,(function(t){n(1)})):n(1)})).then((function(n){return new Promise((function(n,e){t.showGridUI2((function(){setTimeout((function(){n(2)}),100),t.dataConfig.front_wx_ad_switch&&t.NewWuchu&&g.instance.showInterAd()}),!0)}))})).then((function(t){n&&n()}))},e.showGridUI=function(n,t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),o("CanvasJJ/ExportNode/GridUI").getComponent(h).showUI(n,t,e)},e.showGridUI2=function(n,t){void 0===t&&(t=!1),o("CanvasJJ/ExportNode/GridUI2").getComponent(d).showUI(n,t)},e.showGridUI3=function(n){o("CanvasJJ/ExportNode/GridUI3").getComponent(f).showUI(n)},e.showGridUI4=function(n,t){void 0===t&&(t=!1),o("CanvasJJ/ExportNode/GridUI4").getComponent(w).showUI(n,t)},e.showRunUI=function(n){o("CanvasJJ/ExportNode/RunUI").getComponent(l).showUI(n)},e.showFinishExport=function(){o("CanvasJJ/ExportNode/FinishGameUI").getComponent(u).showUI()},e.showFinishScroll=function(){o("CanvasJJ/ExportNode/ScrollUI").active=!0},e.showHomeBox=function(n){o("CanvasJJ/ExportNode/StartBoxUI").getComponent(_).showUI(!1,c.instance.dataConfig.front_fbox_lianxu_num,n)},e.showStartBox=function(t){console.log("开始按钮",c.instance.dataConfig.front_fbox_wuchu_change,c.instance.dataConfig.front_level_fbox_num,this.Level,n.Instance.NewWuchu2),this.getRandom0To100<c.instance.dataConfig.front_fbox_wuchu_change&&c.instance.dataConfig.front_level_fbox_num<=this.Level&&n.Instance.NewWuchu2?1==c.instance.dataConfig.front_fbox_status?o("CanvasJJ/ExportNode/EndBoxUI").getComponent(r).showUI(c.instance.dataConfig.front_fbox_lianxu_num,t):2==c.instance.dataConfig.front_fbox_status?o("CanvasJJ/ExportNode/StartBoxUI").getComponent(_).showUI(!0,c.instance.dataConfig.front_fbox_lianxu_num,t):t&&t():t&&t()},e.showEndBox=function(t){this.getRandom0To100<c.instance.dataConfig.front_tbox_wuchu_change&&c.instance.dataConfig.front_level_tbox_num<=this.Level&&n.Instance.NewWuchu2?1==c.instance.dataConfig.front_tbox_status?o("CanvasJJ/ExportNode/EndBoxUI").getComponent(r).showUI(c.instance.dataConfig.front_tbox_lianxu_num,t):2==c.instance.dataConfig.front_tbox_status?o("CanvasJJ/ExportNode/StartBoxUI").getComponent(_).showUI(!0,c.instance.dataConfig.front_tbox_lianxu_num,t):t&&t():t&&t()},e.getRandomIndex=function(){return Math.floor(Math.random()*c.instance.navDataArr.length)},e.inGame=function(t,e){t&&(t.active=n.Instance.NewWuchu&&c.instance.dataConfig.front_chouti_switch),e&&(e.active=n.Instance.NewWuchu&&c.instance.dataConfig.front_jingxi_gezi_switch)},t(n,[{key:"Level",get:function(){return this._Level},set:function(n){this._Level=n}},{key:"NewWuchu",get:function(){return!0}},{key:"NewWuchu2",get:function(){return c.instance.dataConfig.is_allow_area&&this.allowScene()}},{key:"com",get:function(){return o("CanvasJJ/ExportNode").getComponent(a)}},{key:"getRandom0To100",get:function(){return 100*Math.random()}}],[{key:"Instance",get:function(){return n._instance||(n._instance=new n),n._instance}}]),n}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/JoystickComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./TouchMgr.ts"],(function(t){"use strict";var i,o,s,e,n,h,c,r,a,y,u,f,g,v,l,x,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,s=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){n=t.cclegacy,h=t._decorator,c=t.view,r=t.Node,a=t.UITransform,y=t.lerp,u=t.input,f=t.Input,g=t.Vec2,v=t.Vec3,l=t.Component},function(t){x=t.EventMgr},function(t){T=t.TouchEventType}],execute:function(){var p,P,d,U,I,M,E;n._RF.push({},"9c9c5EcvclD6olyMcroCqfD","JoystickComponent",void 0);var j=h.ccclass,m=h.property,C=h.menu,L=c.getVisibleSize();t("JoystickComponent",(p=j("JoystickComponent"),P=C("UI/Comp/JoystickComponent"),d=m(r),p(U=P(((E=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),h=0;h<o;h++)n[h]=arguments[h];return i=t.call.apply(t,[this].concat(n))||this,s(i,"teachUI",M,e(i)),i.joyBg=void 0,i.joystick=void 0,i.firstTouchPoint=void 0,i.isPressed=void 0,i.canMove=!0,i.angle=void 0,i.joyBgSize=void 0,i.xAxis=0,i.yAxis=0,i.stopSpeed=.1,i.firstTouchId=void 0,i}o(i,t);var n=i.prototype;return n.onEnable=function(){L=c.getVisibleSize(),this.joyBg=this.node,this.joyBgSize=this.joyBg.getComponent(a).contentSize,this.joystick=this.joyBg.children[0];var t=this.joyBg.getPosition();t.x=0,t.y=-L.height/2+375,this.joyBg.setPosition(t);var o=this.joystick.getPosition();o.x=0,o.y=0,this.joystick.setPosition(o),this.controlOn(),i.instance=this,this.teachUI.active=!1},n.update=function(t){this.isPressed||(Math.abs(this.xAxis)<this.stopSpeed?this.xAxis=0:this.xAxis=y(this.xAxis,0,.1),Math.abs(this.yAxis)<this.stopSpeed?this.yAxis=0:this.yAxis=y(this.yAxis,0,.1)),x.event(T.joyAxis,[this.xAxis,this.yAxis])},n.onDestroy=function(){x.clearTarget(this),this.controlOff()},n.controlOn=function(){u.on(f.EventType.TOUCH_START,this.onMouseDownEvent,this),u.on(f.EventType.TOUCH_MOVE,this.onMouseMoveEvent,this),u.on(f.EventType.TOUCH_END,this.onMouseUpEvent,this),u.on(f.EventType.TOUCH_END,this.onMouseUpEvent,this)},n.controlOff=function(){u.off(f.EventType.TOUCH_START,this.onMouseDownEvent,this),u.off(f.EventType.TOUCH_MOVE,this.onMouseMoveEvent,this),u.off(f.EventType.TOUCH_END,this.onMouseUpEvent,this),u.off(f.EventType.TOUCH_END,this.onMouseUpEvent,this)},n.onMouseDownEvent=function(t){if(!this.firstTouchId){this.firstTouchId=t.getID(),this.firstTouchPoint=new g(t.getUILocation().x,t.getUILocation().y);var i=this.joyBg.getPosition();i.x=this.firstTouchPoint.x-L.width/2,i.y=this.firstTouchPoint.y-L.height/2,this.joyBg.setPosition(i);var o=this.joystick.getPosition();o.x=0,o.y=0,this.joystick.setPosition(o),this.isPressed=!0}},n.onMouseUpEvent=function(t){if(this.firstTouchId==t.getID()){this.firstTouchId=null,this.isPressed=!1;var i=this.joyBg.getPosition();i.x=0,i.y=-L.height/2+375,this.joyBg.setPosition(i),this.joystick.setPosition(new v(0,0,0))}},n.onMouseMoveEvent=function(t){this.firstTouchId==t.getID()&&this.moveCtrl(t)},n.moveCtrl=function(t){if(this.isPressed){var i=new g(0,-1),o=new g(t.getUILocation().x-this.firstTouchPoint.x,t.getUILocation().y-this.firstTouchPoint.y),s=g.len(o),e=this.joyBgSize.width/2;if(0==s)this.canMove=!1;else{this.joyBg.setPosition(new v(this.firstTouchPoint.x-L.width/2,this.firstTouchPoint.y-L.height/2,0)),this.canMove=s>5;var n=g.dot(i,o)/(g.len(i)*g.len(o)),h=Math.acos(n);this.angle=180*h/Math.PI,t.getUILocation().x<this.firstTouchPoint.x&&(this.angle=-this.angle);var c=t.getUILocation().x-this.firstTouchPoint.x,r=t.getUILocation().y-this.firstTouchPoint.y,a=new g(c,r);a.lengthSqr()>e*e?a.normalize():a.multiplyScalar(1/e),this.xAxis=a.x,this.yAxis=a.y}if(this.canMove){var y=this.joystick.getPosition();if(t.getUILocation().x<this.firstTouchPoint.x?y.x=Math.max(-e,t.getUILocation().x-this.firstTouchPoint.x):t.getUILocation().x>this.firstTouchPoint.x&&(y.x=Math.min(e,t.getUILocation().x-this.firstTouchPoint.x)),t.getUILocation().y<this.firstTouchPoint.y?y.y=Math.max(-e,t.getUILocation().y-this.firstTouchPoint.y):t.getUILocation().y>this.firstTouchPoint.y&&(y.y=Math.min(e,t.getUILocation().y-this.firstTouchPoint.y)),this.joystick.setPosition(y),s>e){var u=new g(t.getUILocation().x-this.firstTouchPoint.x,t.getUILocation().y-this.firstTouchPoint.y);g.normalize(u,u),g.multiplyScalar(u,u.clone(),e),this.joystick.setPosition(new v(e+u.x-this.joyBgSize.width/2,e+u.y-this.joyBgSize.height/2,0))}}}},i}(l)).instance=void 0,M=i((I=E).prototype,"teachUI",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U=I))||U)||U));n._RF.pop()}}}));

System.register("chunks:///_virtual/JsonToScene.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,a,r,s,n,i,l,p,c,u,y,v,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,i=e._decorator,l=e.Node,p=e.JsonAsset,c=e.CCFloat,u=e.Vec3,y=e.Quat,v=e.instantiate,f=e.Component}],execute:function(){var b,h,d,g,m,F,w,J,z,C,S,T;n._RF.push({},"1c3dfjwmchLR6MHTvf3xOM4","JsonToScene",void 0);var _=i.ccclass,N=i.property,j=i.menu;e("JsonToScene",(b=_("JsonToScene"),h=j("Tool/JsonToScene"),d=N({type:l,visible:!0,displayName:"生成节点"}),g=N({type:p,visible:!0,displayName:"场景数据"}),m=N({type:l,visible:!0,displayName:"Prefab节点"}),F=N({type:c,visible:!0,displayName:"随便修改一下值生成"}),w=N({type:c,visible:!0,displayName:"随便修改一下值删除场景"}),b(J=h((C=t((z=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return t=e.call.apply(e,[this].concat(s))||this,a(t,"stage",C,r(t)),a(t,"sceneJson",S,r(t)),a(t,"prefab",T,r(t)),t._value=0,t._value2=0,t}return o(t,e),t.prototype.bornScene=function(){var e=this.sceneJson.json;if(this.stage.destroyAllChildren(),e)for(var t=0;t<e.length;t++){var o=e[t].name.split(" ")[0],a=new u(parseFloat(e[t].pos.x),parseFloat(e[t].pos.y),parseFloat(e[t].pos.z)),r=new y(parseFloat(e[t].rot.x),parseFloat(e[t].rot.y),parseFloat(e[t].rot.z),parseFloat(e[t].rot.w)),s=new u(parseFloat(e[t].sca.x),parseFloat(e[t].sca.y),parseFloat(e[t].sca.z)),n=v(this.prefab.getChildByName(o));this.stage.addChild(n),n.position=a,n.rotation=r,n.scale=s}else console.warn("缺失场景数据")},s(t,[{key:"value",get:function(){return this._value},set:function(e){this.bornScene()}},{key:"value2",get:function(){return this._value2},set:function(e){this.stage.destroyAllChildren()}}]),t}(f)).prototype,"stage",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=t(z.prototype,"sceneJson",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(z.prototype,"prefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(z.prototype,"value",[F],Object.getOwnPropertyDescriptor(z.prototype,"value"),z.prototype),t(z.prototype,"value2",[w],Object.getOwnPropertyDescriptor(z.prototype,"value2"),z.prototype),J=z))||J)||J));n._RF.pop()}}}));

System.register("chunks:///_virtual/Load.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./UMTrack.ts","./Platform.ts","./PlatForm_wx.ts","./Bar.ts"],(function(n){"use strict";var e,o,t,a,i,r,c,u,l,s,d,f,p,g,y,b,h;return{setters:[function(n){e=n.applyDecoratedDescriptor,o=n.inheritsLoose,t=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){i=n.cclegacy,r=n._decorator,c=n.EventTarget,u=n.Node,l=n.game,s=n.assetManager,d=n.Component,f=n.director},function(n){p=n.default},function(n){g=n.UMTrack},function(n){y=n.default},function(n){b=n.default},function(n){h=n.Bar}],execute:function(){var m,v,w,S,k,D,L,N;i._RF.push({},"9ba23UKv6VKBaRDHIrm1VNu","Load",void 0);var P=r.ccclass,B=r.property,R=r.menu,_=new c;n("Load",(m=P("Load"),v=R("UI/Load"),w=B({type:h,displayName:"进度条"}),S=B(u),m(k=v((L=e((D=function(n){function e(){for(var e,o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return e=n.call.apply(n,[this].concat(i))||this,t(e,"bar",L,a(e)),t(e,"unDestroyNode",N,a(e)),e}o(e,n);var i=e.prototype;return i.onLoad=function(){l.addPersistRootNode(this.unDestroyNode),window.wx?this.unDestroyNode.addComponent(b):this.unDestroyNode.addComponent(y),p.instance.initJJ((function(){g.instance.trackEvent("Loading_In")}))},i.start=function(){var n=this,e="Game",o=["Game"],t=function(){_.on("loadRes",(function(e){n.bar.value=e}),n),f.preloadScene(e,(function(n,e){_.emit("loadRes",n/e)}),(function(){_.off("loadRes"),f.loadScene(e)}))};if(window.wx)console.log("进入微信分包"),this.loadSubpackagesSync(o,t);else{console.log("进入本地加载Bundle");for(var a=o.length,i=0;i<a;i++)s.loadBundle(o[i],(function(){0==--a&&t()}))}},i.loadSubPackage=function(n,e){y.instance.loadSubPackage(n,e)},i.loadSubpackagesSync=function(n,e){for(var o=this,t=n.length,a=function(a){o.loadSubPackage(n[a],(function(o){s.loadBundle(n[a],(function(){o&&0==--t&&(console.log("全部分包加载完成"),e&&e())}))}))},i=0;i<t;i++)a(i)},e}(d)).prototype,"bar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(D.prototype,"unDestroyNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=D))||k)||k));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./my-mesh.ts","./AppConfig.ts","./AutoScroll.ts","./BasePlatform.ts","./CustomAdMgr.ts","./DuilianAdMgr.ts","./ExportCrl.ts","./FinishCustomAdMgr.ts","./JJMgr.ts","./jiujiu_pull_sdk.min.mjs_cjs=&original=.js","./jiujiu_sdk.min.mjs_cjs=&original=.js","./jiujiu_sdk_conf.mjs_cjs=&original=.js","./JJWxTrap.ts","./RotateLoop.ts","./ScaleLoop.ts","./UMTrack.ts","./EndBoxUI.ts","./FinishGameUI.ts","./GridUI.ts","./GridUI2.ts","./GridUI3.ts","./GridUI4.ts","./InterstitialAdUI.ts","./RunUI.ts","./ScrollUI.ts","./StartBoxUI.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts","./Comp.ts","./Button3D.ts","./HomeController.ts","./StageChoose.ts","./Donut.ts","./Floor.ts","./StageController.ts","./colliderCheck.ts","./EnumTypes.ts","./StageClass.ts","./StageData.ts","./StorageData.ts","./StorageMgr.ts","./BornMgr.ts","./DataMgr.ts","./EventMgr.ts","./GameMgr.ts","./SoundMgr.ts","./TouchMgr.ts","./PlatForm_wx.ts","./Platform.ts","./JsonToScene.ts","./NodeTool.ts","./SwitchMat.ts","./Tool.ts","./2DShow3D.ts","./Bar.ts","./BgStyle.ts","./EnergyLabel.ts","./Fontclip.ts","./JoystickComponent.ts","./ProfilerBg.ts","./ScaleTween.ts","./TargetTips.ts","./TipsLabel.ts","./UIStyle.ts","./videoToggle.ts","./Load.ts","./StartMenu.ts","./CharactorController.ts","./DebugController.ts","./CasingController.ts","./FPSController.ts","./StateController.ts","./WeaponController.ts","./FollowController.ts","./SphereController.ts","./CustomInput.ts","./CinestaionImpulseSource.ts","./CinestationBrain.ts","./CinestationData.ts","./CinestationShareAssets.ts","./CinestationSmoothPath.ts","./Effect.ts","./Effect3_4.ts","./Events.ts","./Math.ts","./Types.ts","./Visualization.ts","./Base.ts","./IVCam.ts","./VCamAim.ts","./VCamAutoDolly.ts","./VCamBody.ts","./VCamComposer.ts","./VCamFreeLook.ts","./VCamHardLook.ts","./VCamImpulse.ts","./VCamLens.ts","./VCamNoise.ts","./VCamTracked.ts","./CameraHandler.ts","./ComposerHandler.ts","./FreeLookHandler.ts","./HardLookAtHandler.ts","./NoiseHandler.ts","./TrackedHandler.ts","./NoiseGenerator.ts","./Predictor.ts","./AimStage.ts","./BaseStage.ts","./BodyStage.ts","./ImpulseStage.ts","./NoiseStage.ts","./VirtualCamera.ts","./MW_2DFollow3D.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Math.ts",["cc"],(function(t){"use strict";var r,n,e,o,i,a;return{setters:[function(t){r=t.cclegacy,n=t.Quat,e=t.clamp01,o=t.Vec3,i=t.clamp,a=t.Vec4}],execute:function(){t({Quat_exponentialDamp:function(t,r,e,o,i){return n.lerp(t,r,e,_(0,1,o,i))},Quat_quarticDamp:function(t,r,e,o,i){return n.lerp(t,r,e,z(0,1,o,i))},Vec3_closeTo:function(t,r){return p(t.x-r.x)+p(t.y-r.y)+p(t.z-r.z)<=l},Vec3_closestPointOnSegment:function(t,r,n){var i=o.subtract(y,n,r),a=o.lengthSqr(i);if(a<l)return 0;return e(o.dot(o.subtract(d,t,r),i)/a)},Vec3_setFromMatrixColumn:function(t,r,n){switch(n){case 0:t.x=r.m00,t.y=r.m01,t.z=r.m02;break;case 1:t.x=r.m04,t.y=r.m05,t.z=r.m06;break;case 2:t.x=r.m08,t.y=r.m09,t.z=r.m10}return t},Vec3_setFromSpherical:function(t,r){var n=r.radius,e=r.phi,o=r.theta,i=h(e)*n;return t.x=i*h(o),t.y=v(e)*n,t.z=i*v(o),t},Vec4_closeTo:function(t,r){return p(t.x-r.x)+p(t.y-r.y)+p(t.z-r.z)+p(t.w-r.w)<=l},closeTo:function(t,r){return p(t-r)<=l},exponentialDamp:_,quarticDamp:z}),r._RF.push({},"85d4azs+0dHJIZE5Rr15Ay/","Math",void 0);var u=Math.sqrt,s=Math.atan2,c=Math.acos,h=Math.sin,v=Math.cos,f=Math.floor,m=Math.min,p=Math.abs;n.lerp=function(t,r,o,i){return n.dot(r,o)<0&&n.set(o,-o.x,-o.y,-o.z,-o.w),i=e(i),t.x=r.x+i*(o.x-r.x),t.y=r.y+i*(o.y-r.y),t.z=r.z+i*(o.z-r.z),t.w=r.w+i*(o.w-r.w),n.normalize(t,t),t},n.prototype.lerp=function(t,r){return n.lerp(this,this,t,r)};var l=t("EPSILON",1e-4),y=new o,d=new o;var x=Math.log(.01);function _(t,r,n,e){var o=-x/n;return t+(r-t)*(1-Math.exp(-o*e))}function z(t,r,n,e){var o=1-m(e,n)/n,i=o*o;return t+(r-t)*(1-i*i)}t("SmoothDamper",function(){function t(){this._velocity=0}var r=t.prototype;return r.smoothDamp=function(t,r,n,e,o){var a=2/(n=Math.max(1e-4,n)),u=a*o,s=1/(1+u+.48*u*u+.235*u*u*u),c=t-r,h=r,v=e*n;r=t-(c=i(c,-v,v));var f=(this._velocity+a*c)*o;this._velocity=(this._velocity-a*f)*s;var m=r+(c+f)*s;return h-t>0==m>h&&(m=h,this._velocity=(m-h)/o),m},r.Quat_smoothDamp=function(t,r,e,o,i){return n.lerp(t,r,e,this.smoothDamp(0,1,o,1/0,i))},r.Vec3_smoothDamp=function(t,r,n,e,i){return o.lerp(t,r,n,this.smoothDamp(0,1,e,1/0,i))},t}()),t("Spherical",function(){function t(t,r,n){void 0===t&&(t=1),void 0===r&&(r=0),void 0===n&&(n=0),this.radius=void 0,this.phi=void 0,this.theta=void 0,this.radius=t,this.phi=r,this.theta=n}var r=t.prototype;return r.setFromVec3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},r.setFromCartesianCoords=function(t,r,n){return this.radius=u(t*t+r*r+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=s(t,n),this.phi=c(i(r/this.radius,-1,1))),this},t}());t("Perlin",function(){function t(){}return t.Noise=function(r,n,e){var o=t._Fade,i=t._Grad,a=t._Lerp,u=t._Permutation;if(void 0!==n&&void 0!==e){var s=f(r),c=f(n),h=f(e),v=255&s,m=255&c,p=255&h;n-=c,e-=h;var l=o(r-=s),y=o(n),d=o(e),x=u[v]+m,_=u[x]+p,z=u[x+1]+p,w=u[v+1]+m,M=u[w]+p,C=u[w+1]+p;return a(d,a(y,a(l,i(u[_],r,n,e),i(u[M],r-1,n,e)),a(l,i(u[z],r,n-1,e),i(u[C],r-1,n-1,e))),a(y,a(l,i(u[_+1],r,n,e-1),i(u[M+1],r-1,n,e-1)),a(l,i(u[z+1],r,n-1,e-1),i(u[C+1],r-1,n-1,e-1))))}if(void 0!==n){var S=f(r),D=f(n),F=255&S,V=255&D;n-=D;var A=o(r-=S),P=o(n),g=u[F]+V&255,b=u[F+1]+V&255;return a(P,a(A,i(u[g],r,n),i(u[b],r-1,n)),a(A,i(u[g+1],r,n-1),i(u[b+1],r-1,n-1)))}var q=f(r),L=255&q;return a(o(r-=q),i(u[L],r),i(u[L+1],r-1))},t.Fbm=function(r,n,e,o){var i=0,a=.5,u=t.Noise;if(void 0!==e&&void 0!==o)for(var s=0;s<r;s++)i+=a*u(n,e,o),n*=2,e*=2,o*=2,a*=.5;else if(void 0!==e)for(var c=0;c<r;c++)i+=a*u(n,e),n*=2,e*=2,a*=.5;else for(var h=0;h<r;h++)i+=a*u(n),n*=2,a*=.5;return i},t._Fade=function(t){return t*t*t*(t*(6*t-15)+10)},t._Lerp=function(t,r,n){return r+t*(n-r)},t._Grad=function(t,r,n,e){if(void 0!==n&&void 0!==e){var o=15&t,i=o<8?r:n,a=o<4?n:12==o||14==o?r:e;return(0==(1&o)?i:-i)+(0==(2&o)?a:-a)}return void 0!==n?(0==(1&t)?r:-r)+(0==(2&t)?n:-n):0==(1&t)?r:-r},t}())._Permutation=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,151];t("Spline",function(){function t(){}return t.Bezier3=function(t,r,n,o,i,a){var u=1-(r=e(r)),s=u*u*u,c=3*u*u*r,h=3*u*r*r,v=r*r*r;return t.set(s*n.x+c*o.x+h*i.x+v*a.x,s*n.y+c*o.y+h*i.y+v*a.y,s*n.z+c*o.z+h*i.z+v*a.z)},t.ComputeSmoothControlPoints=function(t,r,n){var e=t.length;if(e<=2)2==e?(a.lerp(r[0],t[0],t[1],.33333),a.lerp(n[0],t[0],t[1],.66666)):1==e&&(r[0]=n[0]=t[0]);else for(var o=new Array(e),i=new Array(e),u=new Array(e),s=new Array(e),c=t,h=r,v=n,f=["x","y","z","w"],m=0;m<4;++m){var p=f[m],l=e-1;o[0]=0,i[0]=2,u[0]=1,s[0]=c[0][p]+2*c[1][p];for(var y=1;y<l-1;++y)o[y]=1,i[y]=4,u[y]=1,s[y]=4*c[y][p]+2*c[y+1][p];o[l-1]=2,i[l-1]=7,u[l-1]=0,s[l-1]=8*c[l-1][p]+c[l][p];for(var d=1;d<l;++d){var x=o[d]/i[d-1];i[d]=i[d]-x*u[d-1],s[d]=s[d]-x*s[d-1]}h[l-1][p]=s[l-1]/i[l-1];for(var _=l-2;_>=0;--_)h[_][p]=(s[_]-u[_]*h[_+1][p])/i[_];for(var z=0;z<l;z++)v[z][p]=2*c[z+1][p]-h[z+1][p];v[l-1][p]=.5*(c[l][p]+h[l-1][p])}},t.ComputeSmoothControlPointsLooped=function(r,n,e){var o=r.length;if(o<2)1==o&&(n[0]=e[0]=r[0]);else{for(var i=Math.min(4,o-1),u=o+2*i,s=new Array(u),c=new Array(u),h=new Array(u),v=0;v<i;++v)s[v]=r[o-(i-v)],s[o+i+v]=r[v];for(var f=0;f<o;++f)s[f+i]=r[f];for(var m=0;m<u;++m)c[m]=new a,h[m]=new a;t.ComputeSmoothControlPoints(s,c,h);for(var p=0;p<o;++p)n[p]=c[p+i],e[p]=h[p+i]}},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/MW_2DFollow3D.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var o,n,t,i,r,a,l,c,s;return{setters:[function(e){o=e.applyDecoratedDescriptor,n=e.inheritsLoose,t=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,l=e.CameraComponent,c=e.Node,s=e.Component}],execute:function(){var u,p,d,h,f,y,_;r._RF.push({},"f9a6aVk1b9AK6KxvgUdr3qw","MW_2DFollow3D",void 0);var v=a.ccclass,m=a.property;e("MW2DFollow3D",(u=v("MW2DFollow3D"),p=m({type:l}),d=m(c),u((y=o((f=function(e){function o(){for(var o,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return o=e.call.apply(e,[this].concat(r))||this,t(o,"Camera_3D",y,i(o)),t(o,"CanvasNode",_,i(o)),o._cameraComonent=new l,o}n(o,e);var r=o.prototype;return r.onLoad=function(){this._init()},r.start=function(){},r._init=function(){this._changeLayer()},r._initCamera=function(){},r._changeLayer=function(){this.node.layer=1<<25;for(var e=0;e<this.node.children.length;e++)this.node.children[e].layer=1<<25},r.follow=function(e,o){var n=e.getWorldPosition(),t=this._cameraComonent.convertToUINode(n,this.CanvasNode);console.log(t,n),this.node.setPosition(t.add(o))},o}(s)).prototype,"Camera_3D",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=o(f.prototype,"CanvasNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h=f))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/my-mesh.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r,s,i,o,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,r=e._decorator,s=e.MeshRenderer,i=e.primitives,o=e.utils,c=e.Component}],execute:function(){var u;n._RF.push({},"e4b69m3xKRF2KFKr53lxlYx","my-mesh",void 0);var h=r.ccclass;r.property,e("MyMesh",h("MyMesh")(u=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.start=function(){var e=this.node.getComponent(s);if(e){var t=i.plane({width:10,length:10,widthSegments:100,lengthSegments:100});e.mesh=o.createMesh(t)}},n}(c))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/NodeTool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,r,i,n,l,a,s,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized,n=e.createClass},function(e){l=e.cclegacy,a=e._decorator,s=e.RigidBody,c=e.CCFloat,p=e.Component}],execute:function(){var u,d,y,g,h,v;l._RF.push({},"903547VTVxKBZsgAVuXi7i5","NodeTool",void 0);var f=a.ccclass,B=a.property;e("NodeTool",(u=f("NodeTool"),d=B(s),y=B({type:c,visible:!0,displayName:"随便修改一下值触发"}),u((v=t((h=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,r(t,"rigidBody",v,i(t)),t._value=0,t}return o(t,e),n(t,[{key:"value",get:function(){return this._value},set:function(e){for(var t=0;t<this.node.children.length;t++){var o=this.node.children[t].getChildByName("collider").addComponent(s);o.type=this.rigidBody.type,o.group=this.rigidBody.group}this.destroy()}}]),t}(p)).prototype,"rigidBody",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(h.prototype,"value",[y],Object.getOwnPropertyDescriptor(h.prototype,"value"),h.prototype),g=h))||g));l._RF.pop()}}}));

System.register("chunks:///_virtual/NoiseGenerator.ts",["cc","./Math.ts"],(function(e){"use strict";var t,n,o,i,r;return{setters:[function(e){t=e.cclegacy,n=e.Quat,o=e.Vec3,i=e.lerp},function(e){r=e.Perlin}],execute:function(){e("NoiseProfile",void 0),t._RF.push({},"92aa29Tdz9E3rHRk99/eeeT","NoiseGenerator",void 0);var a,s=Math.cos,l=2*Math.PI,d=[[[.1,7,0,.75,3,0,1.2,1,0],[.15,4,0,.8,1,0,1.4,.8,0],[0,0,0,0,0,0,0,0,0]],[[5.83,.09,1,9.17,.14,1,57.17,.15,1],[1.8,.059,1,11.35,.041,1,54.17,.048,1],[2.38,.017,1,10.52,.009,1,63.76,.016,1],[3.2,.011,1,7.7,.009,1,51.51,.002,1],[1.9,.059,1,9.1,.04,0,55.54,.05,1],[3.33,.021,1,9.22,.009,1,58.55,.017,1]],[[.2,15,0,.9,5,0,2,2,0],[.25,7,0,1,3,0,0,1,0],[0,0,0,0,0,0,0,0,0]],[[.15,7,0,.8,4,0,1.2,1,0],[.1,5,0,.75,2,0,1.5,.8,0],[0,0,0,0,0,0,0,0,0]],[[.4,10,0,1.44,5,0,2.49,3,0],[.06,10,0,.73,3,0,2,1,0],[0,0,0,0,0,0,0,0,0]],[[.2,4,0,.4,2,0,.7,1,0],[.15,2,0,.5,2,0,.6,1,0],[0,0,0,0,0,0,0,0,0]],[[.39,6.19,0,1.75,1.84,0,2,2.3,0],[.15,3,0,.9,.5,0,1.4,.5,0],[.1,1,0,0,0,0,0,0,0]],[[.15,12,0,.6,5,0,1.5,1,0],[.1,5,0,.45,4,0,1.2,1,0],[0,0,0,0,0,0,0,0,0]],[[.5,17.46,0,.94,12.47,0,1.2,4,0],[.25,5,0,.5,4,0,1.3,2,0],[.1,0,0,.4,1,0,0,0,0]]];!function(e){e[e.Noise_CM_4=0]="Noise_CM_4",e[e.Shake_6D=1]="Shake_6D",e[e.Handheld_normal_extreme=2]="Handheld_normal_extreme",e[e.Handheld_normal_mild=3]="Handheld_normal_mild",e[e.Handheld_normal_strong=4]="Handheld_normal_strong",e[e.Handheld_tele_mild=5]="Handheld_tele_mild",e[e.Handheld_tele_strong=6]="Handheld_tele_strong",e[e.Handheld_wideangle_mild=7]="Handheld_wideangle_mild",e[e.Handheld_wideangle_strong=8]="Handheld_wideangle_strong"}(a||(a=e("NoiseProfile",{})));var _=new n,c=new o;e("NoiseGenerator",function(){function e(){this._time=0,this._values=[0,0,0,0,0,0],this._noiseOffsets=[0,0,0]}var t=e.prototype;return t.reset=function(){var e=this;this._time=0,this._noiseOffsets.forEach((function(t,n){return e._noiseOffsets[n]=i(-1e3,1e3,Math.random())}))},t.fractalNoise=function(t,n){for(var o=this._time+=n*t.frequncyGain,i=d[t.profile]||d[0],r=this._values.fill(0),a=this._noiseOffsets,s=0;s<i.length;s++){var l=i[s];r[s]=e.Noise(o,l[0],l[1],l[2],a[0])+e.Noise(o,l[3],l[4],l[5],a[1])+e.Noise(o,l[6],l[7],l[8],a[2]),r[s]*=t.amplitudeGain}return r},e.Noise=function(e,t,n,o,i){return void 0===i&&(i=0),o?.5*s(l*e*t+i)*n:r.Noise(e*t+i)*n},e.ApplyNoise=function(e,t){n.fromEuler(_,e[0],e[1],e[2]),o.set(c,e[3],e[4],e[5]),o.transformQuat(c,c,t.node.worldRotation),n.multiply(t.correctRotation,t.correctRotation,_),o.add(t.correctPosition,t.correctPosition,c)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/NoiseHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NoiseGenerator.ts","./CameraHandler.ts"],(function(e){"use strict";var n,r,t,o;return{setters:[function(e){n=e.inheritsLoose},function(e){r=e.cclegacy},function(e){t=e.NoiseGenerator},function(e){o=e.CameraHandler}],execute:function(){r._RF.push({},"0e3a0pD3pxPJZCwuB99++oU","NoiseHandler",void 0);e("NoiseHandler",function(e){function r(){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=e.call.apply(e,[this].concat(o))||this)._generator=new t,n}n(r,e);var o=r.prototype;return o.onEnable=function(){this._generator.reset()},o.updateCamera=function(e){var n=this._vcam,r=this._generator.fractalNoise(n.noise,e);t.ApplyNoise(r,n)},r}(o));r._RF.pop()}}}));

System.register("chunks:///_virtual/NoiseStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraHandler.ts","./NoiseHandler.ts","./BaseStage.ts"],(function(e){"use strict";var n,t,a,r,s;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){a=e.CameraHandler},function(e){r=e.NoiseHandler},function(e){s=e.BaseStage}],execute:function(){t._RF.push({},"9e1ccSzYTVCrL6k6/zwvvky","NoiseStage",void 0);e("NoiseStage",function(e){function t(){for(var n,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return(n=e.call.apply(e,[this].concat(s))||this)._handlers=[new a(n._vcam),new r(n._vcam)],n}n(t,e);var s=t.prototype;return s.onEnable=function(){this._handlers.forEach((function(e){return e.enable=!0}))},s.updateStage=function(e){var n=this._vcam.noise,t=this._handlers[n.type];t&&t.updateCamera(e)},t}(s));t._RF.pop()}}}));

System.register("chunks:///_virtual/PlatForm_wx.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WxPlatform.ts","./Platform.ts"],(function(t){"use strict";var o,i,n,e;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.default},function(t){e=t.default}],execute:function(){i._RF.push({},"1cc50XoJhFFOboXBQ09plo7","PlatForm_wx",void 0);t("default",function(t){function i(){return t.apply(this,arguments)||this}o(i,t);var e=i.prototype;return e.onLoad=function(){t.prototype.onLoad.call(this),this.platformApi=window.wx,this.showShareMenuWithTicket(!0),this.regisiterWXShareCallback()},e.showToast=function(t,o){void 0===o&&(o=1500),window.wx.showToast({title:t,icon:"none",duration:o,image:"",mask:!1,success:function(){},fail:function(){},complete:function(){}})},e.showShareMenuWithTicket=function(t){window.wx.showShareMenu({withShareTicket:t,success:function(){},fail:function(){},complete:function(){}})},e.regisiterWXShareCallback=function(){if(window.wx){var t={title:"分享",image:""};window.wx.onShareAppMessage((function(){return console.log("用户点击了转发按钮"),{title:t.title,imageUrl:t.image,query:"share_id=1",success:function(t){},fail:function(){}}}))}},e.showVideo=function(t,o){n.instance.showVideoAd(t)},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/Platform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./EventMgr.ts"],(function(t){"use strict";var o,i,n,e,s,r;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,e=t.Component},function(t){s=t.EventType},function(t){r=t.EventMgr}],execute:function(){var a,c;i._RF.push({},"b52cdxF8T1Od5EkqXHskyJw","Platform",void 0);var l=n.ccclass;t("default",l("Platform")(((c=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(o=t.call.apply(t,[this].concat(n))||this).isSubPackage=!0,o.isVibrate=!0,o.platformApi=void 0,o}o(i,t);var n=i.prototype;return n.onLoad=function(){i.instance=this},n.loadSubPackage=function(t,o,i){this.platformApi&&this.isSubPackage?this.platformApi.loadSubpackage({name:t,success:function(i){console.log("分包加载成功：",t),o.call(!0,i)},fail:function(i){console.error("分包加载失败：",t,JSON.stringify(i)),o.call(!1,i)}}).onProgressUpdate((function(t){i&&i(t.progress)})):(console.log("没有平台API"),o(!0))},n.showToast=function(t,o){void 0===o&&(o=1e3),console.log(t,o.toString()+"ms")},n.vibrateShort=function(){this.platformApi&&this.isVibrate&&this.platformApi.vibrateShort()},n.vibrateLong=function(){this.platformApi&&this.isVibrate&&this.platformApi.vibrateLong()},n.regisiterCallback=function(){this.platformApi&&(this.platformApi.offShow(this.onShowEvent),this.platformApi.onShow(this.onShowEvent),this.platformApi.offHide(this.onHideEvent),this.platformApi.onHide(this.onHideEvent))},n.onShowEvent=function(t){r.event(s.Platform_Wake_Do,t)},n.onHideEvent=function(t){r.event(s.Platform_Hide_Do,t)},n.showVideo=function(t,o){this.showToast("无视频，默认发放奖励"),t&&t()},i}(e)).instance=void 0,a=c))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/Predictor.ts",["cc","./Math.ts"],(function(t){"use strict";var i,e,o;return{setters:[function(t){i=t.cclegacy,e=t.Vec3},function(t){o=t.SmoothDamper}],execute:function(){i._RF.push({},"c8d6930H0tIwYdCiSEhw5fJ","Predictor",void 0);var s=new e;t("Predictor",function(){function t(){this._prePos=null,this._velocity=new e,this._dampingVelocity=new e,this._smoothDamper=new o}return t.prototype.predictPosition=function(t,i,o,c,r){return null===this._prePos?(this._prePos=new e(i),t.set(i)):(e.subtract(this._velocity,i,this._prePos).multiplyScalar(1/r),this._smoothDamper.Vec3_smoothDamp(this._dampingVelocity,this._dampingVelocity,this._velocity,o,r),this._prePos.set(i),e.multiplyScalar(s,this._dampingVelocity,c),e.add(t,i,s)),t},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/ProfilerBg.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,o,i,n;return{setters:[function(t){r=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.isDisplayStats,n=t.Component}],execute:function(){var c;e._RF.push({},"cdef7Li0v9ItYor+0kEwE+4","ProfilerBg",void 0);var s=o.ccclass;o.property,t("ProfilerBg",s("ProfilerBg")(c=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.update=function(){this.node.active=i()},e}(n))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/RotateLoop.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,r,n,i,a,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,u=t.Quat,c=t.Component}],execute:function(){var s,l,p,f;i._RF.push({},"0afa6Tmq7VA1b5TmLrh73qC","RotateLoop",void 0);var h=a.ccclass,d=a.property;t("default",h("RotateLoop")((p=e((l=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,r(e,"duration",p,n(e)),r(e,"angle",f,n(e)),e.quat=new u,e}o(e,t);var i=e.prototype;return i.start=function(){},i.update=function(t){u.rotateZ(this.quat,this.node.getRotation(),-1/15),this.node.setRotation(this.quat)},e}(c)).prototype,"duration",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=e(l.prototype,"angle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),s=l))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/RunUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(n){"use strict";var t,e,i,c,a,o,s,r,u,l,h,d,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,c=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,s=n.Node,r=n.Animation,u=n.Component},function(n){l=n.default},function(n){h=n.default},function(n){d=n.default},function(n){f=n.default}],execute:function(){var p,C,g,R,b;a._RF.push({},"f6d82FFNM9AN4CbUkKi1ko1","RunUI",void 0);var y=o.ccclass,m=o.property;n("default",(p=y("RunUI"),C=m(s),p((b=t((R=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a))||this,i(t,"Man",b,c(t)),t.ccb=null,t.hadClick=!1,t}e(t,n);var a=t.prototype;return a.onDisable=function(){this.unscheduleAllCallbacks(),this.ccb&&this.ccb()},a.showUI=function(n){this.ccb=n,h.Instance.NewWuchu&&l.instance.dataConfig.front_run_switch?(this.Man.getComponent(r).getState("RenRun").speed=.4,this.Man.getComponent(r).play("RenIdle"),this.Man.children[0].getComponent(r).play("Ren"),this.hadClick=!1,d.instance.showBanner(),this.node.active=!0):this.ccb&&this.ccb()},a.continueBtnCB=function(){var n=this;this.hadClick||(this.hadClick=!0,f.Instance.hideBannerFun(!0),this.Man.getComponent(r).play("RenRun"),this.scheduleOnce((function(){n.node.active=!1}),1.5))},a.adBtnCB=function(){var n=this;this.hadClick||d.instance.showVideoAd((function(){n.Man.children[0].getComponent(r).play("Ren1"),n.Man.getComponent(r).getState("RenRun").speed=.4,n.continueBtnCB()}),(function(){n.hadClick=!1}))},t}(u)).prototype,"Man",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=R))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScaleLoop.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,a,o,c,l,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Tween,l=e.tween,s=e.v3,u=e.Component}],execute:function(){var p,f,g,h,S;a._RF.push({},"246fenS1MtHwp4bZ/jx74nP","ScaleLoop",void 0);var y=o.ccclass,b=o.property;e("default",y("ScaleLoop")((g=t((f=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"originScale",g,n(t)),i(t,"targetScale",h,n(t)),i(t,"scaleDuration",S,n(t)),t}return r(t,e),t.prototype.start=function(){c.stopAllByTarget(this.node),l(this.node).to(this.scaleDuration,{scale:s(this.targetScale,this.targetScale,0)}).to(.2,{scale:s(this.originScale,this.originScale,0)}).union().repeatForever().start()},t}(u)).prototype,"originScale",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=t(f.prototype,"targetScale",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.1}}),S=t(f.prototype,"scaleDuration",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),p=f))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/ScaleTween.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,o,c,r,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,c=e.tween,r=e.Vec3,a=e.Component}],execute:function(){var s;n._RF.push({},"d59030Cq+lEjK/1xsiW78N2","ScaleTween",void 0);var i=o.ccclass;o.property,e("ScaleTween",i("ScaleTween")(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).t=void 0,t}t(n,e);var o=n.prototype;return o.onEnable=function(){var e=this,t=c(this.node.getScale()).to(.5,new r(1.2,1.2,1.2),{onUpdate:function(t){e.node.setScale(t)}}).to(.5,new r(1,1,1),{onUpdate:function(t){e.node.setScale(t)}}).union();this.t=t.repeatForever().start()},o.onDisable=function(){this.t.stop(),this.node.scale=new r(1,1,1)},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts"],(function(t){"use strict";var n,e,r,i,o,a,c,l,s,u,f,h,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Node,l=t.Component,s=t.instantiate,u=t.v3,f=t.Sprite},function(t){h=t.default},function(t){p=t.default}],execute:function(){var d,v,g,m,A,y,I;o._RF.push({},"031b7VcdSJJzpl/U/4pTZPt","ScrollUI",void 0);var C=a.ccclass,b=a.property;t("default",(d=C("ScrollUI"),v=b(c),g=b(c),d((y=n((A=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o))||this,r(n,"item",y,i(n)),r(n,"content",I,i(n)),n.myNavArr=[],n.fingerArr=[],n.hotArr=[],n}e(n,t);var o=n.prototype;return o.onEnable=function(){this.myNavArr=[].concat(h.instance.navDataArr);for(var t=[],n=[],e=0;e<h.instance.navDataArr.length;e++)t.push(e),n.push(e);this.hotArr=this.getRandomItemInArrWithoutSelf(-1,t,6),this.fingerArr=this.getRandomItemInArrWithoutSelf(-1,n,6),this._init()},o.onDisable=function(){this.unscheduleAllCallbacks(),this.content.destroyAllChildren()},o._init=function(){for(var t=this,n=function(n){var e=s(t.item);e.active=!0,e.setPosition(u(0,0,0)),t.content.addChild(e);var r=e.getChildByName("icon").getComponent(f),i=e.getChildByName("finger"),o=e.getChildByName("hot");i.active=-1!=t.fingerArr.indexOf(n),o.active=-1!=t.hotArr.indexOf(n),h.instance.loadImgByUrl(r,t.myNavArr[n].icon),e.on(c.EventType.TOUCH_END,(function(e){t.navCB(n)}),t)},e=0;e<this.myNavArr.length;e++)n(e)},o.navCB=function(t){console.log("click id:",t),h.instance.NavigateApp(t,(function(){p.Instance.NewWuchu&&h.instance.dataConfig.front_quxiao_switch&&p.Instance.clickFinishMoreGame()}),(function(){}))},o.shuffleArr=function(t){for(var n=t.length;n;){var e=Math.floor(Math.random()*n--),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}return t},o.getRandomItemInArrWithoutSelf=function(t,n,e){void 0===e&&(e=1);var r=[].concat(n);return r.splice(r.indexOf(t),1),(r=this.shuffleArr(r)).slice(0,e)},n}(l)).prototype,"item",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(A.prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=A))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/SoundMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var o,e,t,n,c,u,r,s,a;return{setters:[function(i){o=i.applyDecoratedDescriptor,e=i.inheritsLoose,t=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){c=i.cclegacy,u=i._decorator,r=i.AudioClip,s=i.AudioSource,a=i.Component}],execute:function(){var l,p,d,h,S,y,g;c._RF.push({},"b0b1dbls6BHU7AFoanj1Trg","SoundMgr",void 0);var f=u.ccclass,v=u.property,m=u.menu;u.requireComponent,i("SoundMgr",(l=f("SoundMgr"),p=m("Mgr/SoundMgr"),d=v({type:[r]}),l(h=p(((g=function(i){function o(){for(var o,e=arguments.length,c=new Array(e),u=0;u<e;u++)c[u]=arguments[u];return o=i.call.apply(i,[this].concat(c))||this,t(o,"clips",y,n(o)),o.auidoSource=void 0,o.voiceSource=void 0,o.hasPlayingSound=[],o}e(o,i);var c=o.prototype;return c.onLoad=function(){o.instacne=this,this.auidoSource=this.node.getComponent(s),this.auidoSource||(this.auidoSource=this.node.addComponent(s)),this.voiceSource=this.node.getChildByName("Voice").getComponent(s)},c.playSound=function(i,o){var e=this;if(void 0===o&&(o=1),-1==this.hasPlayingSound.indexOf(i)){this.hasPlayingSound.push(i),this.auidoSource.playOneShot(this.clips[i],o);var t=.25*this.clips[i].getDuration();this.scheduleOnce((function(){e.hasPlayingSound.splice(e.hasPlayingSound.indexOf(i),1)}),t)}},c.playMusic=function(i){this.auidoSource.clip.name!=this.clips[i].name&&(this.auidoSource.stop(),this.auidoSource.clip=this.clips[i],this.auidoSource.play())},c.playVoice=function(i){this.voiceSource.clip=this.clips[i],this.voiceSource.play()},c.stopVoice=function(){this.voiceSource.stop()},o}(a)).instacne=void 0,y=o((S=g).prototype,"clips",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=S))||h)||h));c._RF.pop()}}}));

System.register("chunks:///_virtual/SphereController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,n,r,i,s;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,r=e.Vec3,i=e.tween,s=e.Component}],execute:function(){var c;o._RF.push({},"657c3fUNq5HCJcQBKCjO//j","SphereController",void 0);var u=n.ccclass;n.property,e("SphereController",u("SphereController")(c=function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o.prototype.onLoad=function(){var e=this,t=this.node.position,o=new r(t.x,7,t.z),n=new r(t.x,1.25,t.z);i(this.node).to(1,{position:n},{easing:"quartIn"}).call((function(){e.node.emit("setImpulse")})).to(1,{position:o},{easing:"quadOut"}).union().repeatForever().start()},o}(s))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/StageChoose.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./StageData.ts","./SoundMgr.ts","./Comp.ts","./Donut.ts"],(function(t){"use strict";var e,n,i,o,a,r,s,l,h,c,u,p,f,d,w,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,s=t.Node,l=t.Material,h=t.MeshRenderer,c=t.Animation,u=t.Vec3},function(t){p=t.SoundType},function(t){f=t.StageData},function(t){d=t.SoundMgr},function(t){w=t.Comp},function(t){g=t.Donut}],execute:function(){var m,v,y,S,X,b,M,C,B,T,D;a._RF.push({},"1e739Vv+/VB6LKrquuPchXB","StageChoose",void 0);var z=r.ccclass,L=r.property;t("StageChoose",(m=z("StageChoose"),v=L(s),y=L(s),S=L(l),X=L(l),m((C=e((M=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).selfTween=void 0,e.nowX=0,i(e,"leftBtn",C,o(e)),i(e,"rightBtn",B,o(e)),i(e,"transMat",T,o(e)),i(e,"normalMat",D,o(e)),e}n(e,t);var a=e.prototype;return a.init=function(t){void 0===t&&(t=1),this.nowX=10-10*t,this.nowX<-20&&(this.nowX=-20),this.updateTween(),this.updateShow()},a.updateShow=function(){for(var t=f.instance.level-1,e=this.node.getComponentsInChildren(g),n=0;n<e.length;n++)n<12?e[n].modelInit(0):n<24?e[n].modelInit(1):e[n].modelInit(2),n<t?e[n].stepShow(1):e[n].stepShow(0),e[n].model.children[0].getComponent(h).material=n>t?this.transMat:this.normalMat},a.clickLeft=function(){this.nowX+=10,this.nowX>0?this.nowX=0:d.instacne.playSound(p.Change),this.updateTween()},a.clickRight=function(){this.nowX-=10,this.nowX<-20?this.nowX=-20:d.instacne.playSound(p.Change),this.updateTween()},a.updateTween=function(){this.leftBtn.active=0!=this.nowX,this.rightBtn.active=-20!=this.nowX;for(var t=Math.abs(Math.floor(this.nowX/10)),e=0;e<this.node.children.length;e++)this.node.children[e].getComponent(c).play(t==e?"open":"close");this.moveOff_Local(),this.moveTo_Local(new u(this.nowX,0,0),20)},e}(w)).prototype,"leftBtn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B=e(M.prototype,"rightBtn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=e(M.prototype,"transMat",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=e(M.prototype,"normalMat",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=M))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/StageClass.ts",["cc","./EnumTypes.ts"],(function(t){"use strict";var s,o,i,e;return{setters:[function(t){s=t.cclegacy},function(t){o=t.FloorMoveType,i=t.FloorChangeType,e=t.FloorBulidType}],execute:function(){s._RF.push({},"c5f3cSQ8itLg69yRiqLM80O","StageClass",void 0);t("default",(function(t,s){this.floorDatas=[],this.roadDatas=[],this.floorDatas=t,this.roadDatas=s})),t("FloorData",(function(t,s,a,n){this.pos=void 0,this.moveType=o.empty,this.changeType=i.none,this.bulidType=e.empty,this.pos=t,this.moveType=s,this.changeType=a,this.bulidType=n})),t("RoadData",(function(t,s){this.pos=void 0,this.rot=void 0,this.pos=t,this.rot=s}));s._RF.pop()}}}));

System.register("chunks:///_virtual/StageController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VirtualCamera.ts","./EnumTypes.ts","./StageData.ts","./BornMgr.ts","./Tool.ts","./Comp.ts","./Donut.ts","./Floor.ts"],(function(e){"use strict";var t,o,n,r,i,s,a,h,l,d,c,p,u,g,y,b,f,m,v,C,N,w,F,T,S,P;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass},function(e){s=e.cclegacy,a=e._decorator,h=e.CCInteger,l=e.CCFloat,d=e.Vec3,c=e.CurveRange,p=e.ParticleSystem,u=e.GradientRange,g=e.Quat,y=e.find},function(e){b=e.VirtualCamera},function(e){f=e.FloorBulidType,m=e.FloorMoveType,v=e.FloorChangeType,C=e.FloorEndType},function(e){N=e.StageData},function(e){w=e.BornMgr},function(e){F=e.default},function(e){T=e.Comp},function(e){S=e.Donut},function(e){P=e.Floor}],execute:function(){var _,k,R,M,I,B,O,j,x,z;s._RF.push({},"1ab76n4e01E6blqCM28Tk5y","StageController",void 0);var E=a.ccclass,D=a.property;e("StageController",(_=E("StageController"),k=D({type:h}),R=D({type:h}),M=D({type:l,visible:!0,displayName:"生成场景"}),I=D({type:l,visible:!0,displayName:"删除场景"}),_(((z=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,n(t,"width",j,r(t)),n(t,"height",x,r(t)),t._floor=[],t.startFloors=[],t.endFloors=[],t.tipsRoadPos=[],t.tipsRoadWay=[],t.machine=[],t.endSteps=[],t.firstFloorIndex=0,t._value=0,t._value2=0,t}o(t,e);var s=t.prototype;return s.onLoad=function(){t.stages.push(this)},s.stageObjInit=function(){this.startFloors.length=0,this.endFloors.length=0,this.tipsRoadPos.length=0,this.tipsRoadWay.length=0,this.machine.length=0,this.endSteps.length=0;for(var e=0;e<this.cubeNode.children.length;e++){var t=void 0,o=void 0,n=void 0,r=void 0;switch(this.cubeNode.children[e].name.split("-")[0]){case"Start":t=this.cubeNode.children[e],(o=this.getFloorByPos(t.getPosition()).getComponent(P)).bulidType=f.block,o.moveType=this.cubeGetWay(t.forward),o.changeType=v.start,this.startFloors.push(o);break;case"End":t=this.cubeNode.children[e],(o=this.getFloorByPos(t.getPosition()).getComponent(P)).bulidType=f.block,o.moveType=this.cubeGetWay(t.forward),o.changeType=v.end;var i=t.getComponentInChildren(S);if(i){switch(console.log("这次的结尾条件有",i.nowStep),this.endSteps.push(i.nowStep),i.nowStep){case 0:o.endType=C.step0;break;case 1:o.endType=C.step1;break;case 2:o.endType=C.step2;break;case 3:o.endType=C.step3;break;case 4:o.endType=C.step4;break;default:console.warn("结尾条件判定出现位置步骤",i.nowStep)}i.node.active=N.instance.isShowEndDonut}else console.log("这次的结尾条件没有甜甜圈"),o.endType=C.none;this.endFloors.push(o);break;case"Step1_Machine":n=(t=this.cubeNode.children[e]).getPosition(),(o=this.getFloorByPos(n).getComponent(P)).bulidType=f.block,o.moveType=m.block,o.changeType=v.none,(r=this.getFloorByPos(n.add(t.right)).getComponent(P)).bulidType=f.empty,r.moveType=m.empty,r.changeType=v.step1,this.machine.push(t);break;case"Step2_Machine":n=(t=this.cubeNode.children[e]).getPosition(),(o=this.getFloorByPos(n).getComponent(P)).bulidType=f.block,o.moveType=m.block,o.changeType=v.none,(r=this.getFloorByPos(n.add(t.right)).getComponent(P)).bulidType=f.empty,r.moveType=m.empty,r.changeType=v.step2,this.machine.push(t);break;case"Step3_Machine":n=(t=this.cubeNode.children[e]).getPosition(),(o=this.getFloorByPos(n).getComponent(P)).bulidType=f.block,o.moveType=m.block,o.changeType=v.none,(r=this.getFloorByPos(n.add(t.right)).getComponent(P)).bulidType=f.empty,r.moveType=m.empty,r.changeType=v.step3,this.machine.push(t);break;case"Step4_Machine":n=(t=this.cubeNode.children[e]).getPosition(),(o=this.getFloorByPos(n).getComponent(P)).bulidType=f.block,o.moveType=m.block,o.changeType=v.none,(r=this.getFloorByPos(n.add(t.right)).getComponent(P)).bulidType=f.empty,r.moveType=m.empty,r.changeType=v.step4,this.machine.push(t);break;case"Block":n=(t=this.cubeNode.children[e]).getPosition(),(o=this.getFloorByPos(n).getComponent(P)).bulidType=f.block,o.moveType=m.block,o.changeType=v.none;break;default:console.warn("未设定方块类型")}}for(var s=this.roadNode.children.length-1;s>=0;s--)this.tipsRoadPos.push(this.roadNode.children[s].getPosition()),this.tipsRoadWay.push(this.cubeGetWay(this.roadNode.children[s].forward));this.roadNode.destroyAllChildren()},s.bornStageObj=function(e,t){var o=this;void 0===e&&(e=null);for(var n=0;n<this.sceneNode.children.length;n++)w.instance.recyleObj(this.sceneNode.children[n],"Scene",this.sceneNode.children[n].name);for(var r=0;r<this.cubeNode.children.length;r++)w.instance.recyleObj(this.cubeNode.children[r],"Stage",this.cubeNode.children[r].name);for(var i=0;i<this.roadNode.children.length;i++)w.instance.recyleObj(this.roadNode.children[i],"Stage",this.roadNode.children[i].name);for(var s=0;s<this.dountNode.children.length;s++)this.dountNode.children[s].getComponent(S).recyle();this.scheduleOnce((function(){e?o.bornStageFromJson(e):o.readStageToJsonStr(),o.scheduleOnce((function(){o.stageObjInit(),t&&t()}))}))},s.cubeGetWay=function(e){var t=Math.atan2(-e.z,e.x)/Math.PI*180,o="none";switch(t>-135&&t<-45?o="up":t>-45&&t<45?o="right":t<135&&t>45?o="down":(t<-135||t>135)&&(o="left"),o){case"up":return m.go_left;case"right":return m.go_down;case"down":return m.go_right;case"left":return m.go_up;default:return m.go_right}},s.getFloorByPos=function(e){if(null==e)return null;var t=.1;if(e.x<-this.width/2+.5-t||e.x>this.width/2-.5+t||e.z<-this.height/2+.5-t||e.z>this.height/2-.5+t)return null;var o=this.sceneNode,n=e.x-o.children[this.firstFloorIndex].getPosition().x,r=e.z-o.children[this.firstFloorIndex].getPosition().z;if(n=Math.round(10*n)/10,r=Math.round(10*r)/10,n%1==0&&r%1==0){var i=this.firstFloorIndex+n*this.height+r;return i>=this.firstFloorIndex+this.width*this.height?null:o.children[i]}return null},s.bornFloor=function(e,t){this.sceneNode.destroyAllChildren();var o=this.sceneNode;this._floor.length=0;var n=new d(-e/2+.5,0,-t/2+.5);this.firstFloorIndex=0;for(var r=0;r<e;r++)for(var i=0;i<t;i++){var s=n.clone();s.x+=r,s.z+=i;var a=this.bornMgr.bornObjFromPool("Stage","Floor",o,s).getComponent(P);a.init(),this._floor.push(a)}var h,l=-e/2+.5,c=e/2-.5,p=-t/2+.5,u=t/2-.5,g="WallCorner_1_1",y="WallCorner_1_2",b=this.bornMgr.bornObjFromPool("Scene",g,o,new d(l,0,p)),f=this.bornMgr.bornObjFromPool("Scene",g,o,new d(l,0,u)),m=this.bornMgr.bornObjFromPool("Scene",g,o,new d(c,0,p)),v=this.bornMgr.bornObjFromPool("Scene",g,o,new d(c,0,u));this.setCorner_1Rot(b),this.setCorner_1Rot(f),this.setCorner_1Rot(m),this.setCorner_1Rot(v);for(var C=p+1;C<=u-1;C++)h=this.bornMgr.bornObjFromPool("Scene",y,o,new d(l-.62,0,C)),this.setCorner_2Rot(h,0);for(var N=p+1;N<=u-1;N++)h=this.bornMgr.bornObjFromPool("Scene",y,o,new d(c+.62,0,N)),this.setCorner_2Rot(h,180);for(var w=l+1;w<=c-1;w++)h=this.bornMgr.bornObjFromPool("Scene",y,o,new d(w,0,p-.62)),this.setCorner_2Rot(h,-90);for(var F=l+1;F<=c-1;F++)h=this.bornMgr.bornObjFromPool("Scene",y,o,new d(F,0,u+.62)),this.setCorner_2Rot(h,90)},s.setCorner_1Rot=function(e){var t=e.getPosition();t.x<0&&t.z<0?e.setRotationFromEuler(0,-90,0):t.x>0&&t.z<0?e.setRotationFromEuler(0,180,0):t.x>0&&t.z>0&&e.setRotationFromEuler(0,90,0),F.unactiveAllChildren(e),e.children[N.instance.nowModelId].active=!0},s.setCorner_2Rot=function(e,t){e.setRotationFromEuler(0,t,0),F.unactiveAllChildren(e),e.children[N.instance.nowModelId].active=!0},s.bornStageFromJson=function(e){var t=e.json;this.width=t.width,this.height=t.height,this.bornFloor(t.width,t.height),this.cubeNode.destroyAllChildren(),this.roadNode.destroyAllChildren();for(var o=0;o<t.cubeNode.length;o++){var n=t.cubeNode[o],r=w.instance.bornObjFromPool("Stage",n.name,this.cubeNode,n.pos,n.rot);if("End"==n.name){var i=r.getComponentInChildren(S);i.nowStep=n.endType,i.nowModelId=N.instance.nowModelId,i.modelInit(N.instance.nowModelId),i.stepShow(n.endType)}}for(var s=0;s<t.roadNode.length;s++){var a=t.roadNode[s];w.instance.bornObjFromPool("Stage",a.name,this.roadNode,a.pos,a.rot)}this.cam.setPosition(new d(0,10,3.1)),this.cam.setRotationFromEuler(new d(-75,0,0));var h=this.cam.getComponent(b),l=40;this.height>4&&(l+=5*(this.height-4)),h.lens.fov=l,h.lens.near=.1,h.lens.far=1e3;var g=this.node.getChildByName("GroundBaseCloud"),y=new c;y.constant=2*this.width;var f=new c;f.constant=2*this.height;var m=g.children[0].getComponent(p);m.startSizeX=y,m.startSizeZ=f;var v=new u;v.color=F.d3_getRgbByHex(["#fde6fe","#daffe5","#ffc794"][N.instance.nowModelId]),v.mode=0,m.startColor=v,m.clear(),m.play()},s.readStageToJsonStr=function(){for(var e={width:this.width,height:this.height,cubeNode:[],roadNode:[],camInfo:{pos:new d,rot:new g,fov:37,near:.1,far:1e3}},t=0;t<this.cubeNode.children.length;t++){var o=this.cubeNode.children[t];if(o.active){var n=null;if("End"==this.cubeNode.children[t].name.split("-")[0]){var r=this.cubeNode.children[t].getComponentInChildren(S);r&&(n=r.nowStep)}var i={name:o.name.split("-")[0],pos:o.getPosition(),rot:o.getRotation(),endType:n};e.cubeNode.push(i)}}for(var s=0;s<this.roadNode.children.length;s++){var a=this.roadNode.children[s];if(a.active){var h={name:a.name.split("-")[0],pos:a.getPosition(),rot:a.getRotation()};e.roadNode.push(h)}}e.camInfo.pos=this.cam.getPosition(),e.camInfo.rot=this.cam.getRotation();var l=this.cam.getComponent(b);e.camInfo.fov=l.lens.fov,e.camInfo.near=l.lens.near,e.camInfo.far=l.lens.far,console.log(JSON.stringify(e))},i(t,[{key:"bornMgr",get:function(){return y("StageNode").getComponent(w)}},{key:"sceneNode",get:function(){return this.node.getChildByName("SceneNode")}},{key:"roadNode",get:function(){return this.node.getChildByName("RoadNode")}},{key:"dountNode",get:function(){return this.node.getChildByName("DountNode")}},{key:"cubeNode",get:function(){return this.node.getChildByName("CubeNode")}},{key:"cam",get:function(){return this.node.getChildByName("Cam")}},{key:"floor",get:function(){if(0==this._floor.length)for(var e=this.width*this.height,t=0;t<e;t++)this._floor.push(this.sceneNode.children[t].getComponent(P));return this._floor}},{key:"value",get:function(){return this._value},set:function(e){this.bornFloor(this.width,this.height)}},{key:"value2",get:function(){return this._value2},set:function(e){this.sceneNode.destroyAllChildren()}}]),t}(T)).stages=[],j=t((O=z).prototype,"width",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),x=t(O.prototype,"height",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(O.prototype,"value",[M],Object.getOwnPropertyDescriptor(O.prototype,"value"),O.prototype),t(O.prototype,"value2",[I],Object.getOwnPropertyDescriptor(O.prototype,"value2"),O.prototype),B=O))||B));s._RF.pop()}}}));

System.register("chunks:///_virtual/StageData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./EnumTypes.ts","./StorageMgr.ts"],(function(t){"use strict";var e,n,a,s,o,r,i,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass},function(t){a=t.cclegacy,s=t._decorator,o=t.Component},function(t){r=t.EventMgr},function(t){i=t.EventType},function(t){c=t.default}],execute:function(){var l,u;a._RF.push({},"31214YUdnlMHIMPYWERVwut","StageData",void 0);var g=s.ccclass;s.property,t("StageData",g("StageData")(((u=function(t){function a(){for(var e,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).beatTime=.25,e.nowModelId=0,e.isShowEndDonut=!1,e.isRoadUvMove=!0,e.nowLevel=1,e.targetTipsMaxX=0,e.isFx=!0,e}e(a,t);var s=a.prototype;return s.onLoad=function(){a.instance=this,this.updateLevel()},s.passLevel=function(){c.instance.storageData.level++,c.instance.storageData.level>36&&(c.instance.storageData.level=36),console.log("通关",c.instance.storageData.level),c.instance.SaveAllStorge(),this.updateLevel()},s.updateLevel=function(){var t=c.instance.storageData.level;this.nowModelId=t<=12?0:t<=24?1:2},n(a,[{key:"level",get:function(){return c.instance.storageData.level}},{key:"lastTime",get:function(){return c.instance.storageData.lastTime},set:function(t){c.instance.storageData.lastTime=t,c.instance.SaveAllStorge()}},{key:"tipsCount",get:function(){return c.instance.storageData.tipsCount},set:function(t){c.instance.storageData.tipsCount=t,c.instance.SaveAllStorge(),r.event(i.UI_TipsUpdate_Event)}},{key:"energyCount",get:function(){return c.instance.storageData.energyCount},set:function(t){c.instance.storageData.energyCount=t,c.instance.SaveAllStorge(),r.event(i.UI_EnergyUpdate_Event)}},{key:"isFirstError",get:function(){return c.instance.storageData.isFirstError},set:function(t){c.instance.storageData.isFirstError=t,c.instance.SaveAllStorge()}}]),a}(o)).instance=void 0,l=u))||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/StartBoxUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var i,n,e,o,s,r,a,c,u,h,l,d,f,p,m,g,_;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Node,c=t.ProgressBar,u=t.Quat,h=t.Tween,l=t.tween,d=t.Component},function(t){f=t.default},function(t){p=t.default},function(t){m=t.default},function(t){g=t.default},function(t){_=t.default}],execute:function(){var C,b,B,x,k,v,w;s._RF.push({},"b0157ssWNtAxaIU6RwO1Rvo","StartBoxUI",void 0);var I=r.ccclass,T=r.property;t("default",(C=I("StartBoxUI"),b=T(a),B=T(c),C((v=i((k=function(t){function i(){for(var i,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,e(i,"box",v,o(i)),e(i,"pBar",w,o(i)),i.ccb=null,i.showCallback=null,i.hadShowBanner=!1,i.preTime=0,i.rateTime=0,i.minclicknum=void 0,i.maxclicknum=void 0,i.needClick=void 0,i.isforce=!1,i.addProgerss=void 0,i.repeatCount=0,i.isRepeat=void 0,i.clickCount=0,i.lianxu_num=void 0,i.quat1=new u,i.quat2=new u,i.quat3=new u,i}n(i,t);var s=i.prototype;return s.onDisable=function(){var t=this;this.unscheduleAllCallbacks(),f.instance.hideGrid(),_.Instance.hideBannerFun(!0),this.repeatCount>0?m.Instance.com.scheduleOnce((function(){t.showUI(t.isRepeat,t.lianxu_num,t.ccb),t.repeatCount--}),.1):this.ccb&&this.ccb()},s.showUI=function(t,i,n){this.clickCount=0,this.lianxu_num=i,this.isRepeat=t,t&&this.repeatCount<=0&&(this.repeatCount=i),this.minclicknum=Number(p.instance.dataConfig.front_box_clicks[0]),this.maxclicknum=Number(p.instance.dataConfig.front_box_clicks[1]),this.needClick=p.instance.GetRandom(this.minclicknum,this.maxclicknum-p.instance.dataConfig.front_progress_bar_reduce),this.isforce=p.instance.dataConfig.front_is_box_force,this.addProgerss=1/this.maxclicknum,console.log("this.needClick:",this.needClick),console.log("this.addProgerss:",this.addProgerss),this.ccb=n,this.node.active=!0,this.hadShowBanner=!1,this.pBar.progress=0,this.rateTime=0,this.preTime=0,this.schedule(this.DecBar),g.instance.showBanner()},s.closeCB=function(){this.node.active=!1},s.clickCB=function(){var t=this;if(this.clickCount++,this.pBar.progress+=this.addProgerss,this.pBar.progress>1&&(this.pBar.progress=1),this.shakeBox(),!this.hadShowBanner){this.isforce=p.instance.dataConfig.front_is_box_force;var i=p.instance.dataConfig.front_box_hide_time/1e3,n=function(){t.hadShowBanner=!0,t.scheduleOnce((function(){f.instance.getIsShow()||(t.repeatCount=0),f.instance.hideGrid(),t.closeCB()}),i),f.instance.showGrid()},e=this.rateTime-this.preTime,o=p.instance.dataConfig.front_box_sulv_qujian,s=this.getRandomItemInArr(o).split("|"),r=s[0],a=s[1];if(100*this.pBar.progress>=p.instance.dataConfig.front_box_sulv_start&&parseFloat(r)<=e&&e<=parseFloat(a))return console.log("宝箱触发频率：",e),p.instance.dataConfig.front_sulv_wuchu_switch&&(this.isforce=!0,i=p.instance.dataConfig.front_fbox_hide_time/1e3),void n();if(this.preTime=this.rateTime,this.pBar.progress>=this.needClick*this.addProgerss&&!this.hadShowBanner)return console.log("宝箱触发进度"),void n();this.clickCount>=p.instance.dataConfig.front_box_click_count&&(console.log("点击次数",this.clickCount),this.clickCount=0,n())}},s.shakeBox=function(){h.stopAllByTarget(this.box),u.fromEuler(this.quat1,0,0,-10),u.fromEuler(this.quat2,0,0,10),u.fromEuler(this.quat3,0,0,0),l(this.box).to(.1,{rotation:this.quat1}).to(.2,{rotation:this.quat2}).to(.1,{rotation:this.quat3}).start()},s.DecBar=function(){this.pBar.progress-=p.instance.dataConfig.front_progress_bar_return,this.pBar.progress<0&&(this.pBar.progress=0)},s.update=function(t){this.rateTime+=t},s.GetRandom=function(t,i,n){void 0===n&&(n=!0);var e=i-t,o=Math.random()*e;return o+=t,n?Math.floor(o):o},s.getRandomItemInArr=function(t){return t[Math.floor(Math.random()*t.length)]},i}(d)).prototype,"box",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(k.prototype,"pBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=k))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/StartMenu.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,u;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,u=t.Component}],execute:function(){var c,o;n._RF.push({},"36dd3dUb6hE7IQKahYTEUuR","StartMenu",void 0);var s=r.ccclass,i=(r.property,r.menu);t("StartMenu",s("StartMenu")(c=i("UI/StartMenu")(((o=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n}(u)).instance=void 0,c=o))||c)||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/StateController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,a,n,r,u,s,l,c,_,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,u=e.AudioClip,s=e.Animation,l=e.AudioSource,c=e.game,_=e.randomRangeInt,h=e.Component}],execute:function(){var d,S,m,I,p,f,A,g,E,b,y,L,M,O;n._RF.push({},"d41cfxJDflJ6pMNnUJOfdPw","StateController",void 0);var F=r.ccclass,R=r.property;e("StateController",(d=F("StateController"),S=R(u),m=R(u),I=R(u),p=R(u),f=R([u]),d(((O=function(e){function t(){for(var i,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return i=e.call.apply(e,[this].concat(r))||this,o(i,"shootSound",E,a(i)),o(i,"walkSound",b,a(i)),o(i,"aimInSound",y,a(i)),o(i,"reloadSound",L,a(i)),o(i,"casingSounds",M,a(i)),i._state=t.IDLE,i._values={},i._animFinshed=!1,i._animation=null,i._audioSource=null,i}i(t,e);var n=t.prototype;return n.onLoad=function(){var e,t=this;this._animation=this.getComponent(s),null==(e=this._animation)||e.on(s.EventType.FINISHED,(function(){t._animFinshed=!0})),this._audioSource=this.getComponent(l),c.on("__playCasingSound",this._onPlayCasing,this)},n.onDestroy=function(){c.off("__playCasingSound",this._onPlayCasing,this)},n._onPlayCasing=function(){if(this._audioSource){var e=_(0,this.casingSounds.length-1);this._audioSource.playOneShot(this.casingSounds[e])}},n.getState=function(){return this._state},n.setState=function(e,i,o){if(void 0===i&&(i=!1),(this._state!==e||i)&&(this._state=e,this._animation&&(this._animation.crossFade(e,o),this._animFinshed=!1),this._audioSource))switch(e){case t.WALK:this._audioSource.clip=this.walkSound,this._audioSource.loop=!0,this._audioSource.play();break;case t.IDLE:this._audioSource.stop();break;case t.AIM_FIRE:case t.FIRE:this.shootSound&&this._audioSource.playOneShot(this.shootSound);break;case t.AIM_IN:this.aimInSound&&this._audioSource.playOneShot(this.aimInSound);break;case t.RELOAD_OUTOF_AMMO:this.reloadSound&&this._audioSource.playOneShot(this.reloadSound)}},n.getValue=function(e){return this._values[e]},n.setValue=function(e,t){this._values[e]=t},n.update=function(){var e=this._state,i=this._values;switch(e){case t.IDLE:i.mouseLeft?e=t.FIRE:i.mouseRight?e=t.AIM_IN:i.moveSpeed>.2&&(e=t.WALK);break;case t.WALK:i.mouseRight?e=t.AIM_IN:i.moveSpeed<=.2&&(e=t.IDLE);break;case t.AIM_IN:i.mouseRight?i.mouseLeft&&(e=t.AIM_FIRE):e=t.AIM_OUT;break;case t.AIM_OUT:e=i.moveSpeed>.2?t.WALK:t.IDLE;break;case t.FIRE:i.mouseLeft||(e=t.IDLE);break;case t.AIM_FIRE:i.mouseLeft||(e=i.mouseRight?t.AIM_FIRE_POSE:t.IDLE);break;case t.AIM_FIRE_POSE:i.mouseRight||(e=t.AIM_OUT);break;case t.RELOAD_OUTOF_AMMO:this._animFinshed&&(e=t.IDLE)}this.setState(e)},t}(h)).AIM_IN="Armature|aim_in",O.AIM_OUT="Armature|aim_out",O.AIM_FIRE="Armature|aim_fire",O.AIM_FIRE_POSE="Armature|aim_fire_pose",O.IDLE="Armature|idle",O.WALK="Armature|walk",O.FIRE="Armature|fire",O.RELOAD_OUTOF_AMMO="Armature|reload_out_of_ammo",E=t((g=O).prototype,"shootSound",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(g.prototype,"walkSound",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(g.prototype,"aimInSound",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(g.prototype,"reloadSound",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(g.prototype,"casingSounds",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=g))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/StorageData.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d1a6cBAhKVCHJz+zf+x1hVE","StorageData",void 0);t("StorageData",(function(){this.playCount=0,this.level=1,this.tipsCount=1,this.energyCount=10,this.lastTime=(new Date).getTime(),this.isFirstError=!0,this.gameVersion="0.9.5"}));e._RF.pop()}}}));

System.register("chunks:///_virtual/StorageMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StorageData.ts"],(function(t){"use strict";var e,a,o,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){a=t.cclegacy,o=t._decorator,r=t.Component},function(t){s=t.StorageData}],execute:function(){var i,n;a._RF.push({},"297d6QSqxVIBbENI6KY6hRY","StorageMgr",void 0);var g=o.ccclass;o.property,o.menu,t("default",g("StorageMgr")(((n=function(t){function a(){for(var e,a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).storageData=new s,e.storageName=new s,e}e(a,t);var o=a.prototype;return o.onLoad=function(){if(a.instance=this,this.init(),null==this.storageData.gameVersion||this.storageData.gameVersion!=(new s).gameVersion)for(var t in console.log("清理存档"),localStorage.clear(),this.storageData=new s,this.storageName=new s,this.storageData)this.writeStorage(t,this.storageName[t]),console.log("初始化缓存数据",t,this.storageName[t]),this.storageName[t]=t},o.init=function(){for(var t in this.storageData){var e=this.readStorage(t);e?(this.storageData[t]=JSON.parse(e),console.log("加载缓存数据",t,this.storageData[t])):(this.writeStorage(t,this.storageName[t]),console.log("初始化缓存数据",t,this.storageName[t])),this.storageName[t]=t}},o.writeStorage=function(t,e){localStorage.setItem(t,JSON.stringify(e)),this.storageData[t]=e},o.readStorage=function(t){return localStorage.getItem(t)},o.removeStorage=function(t){localStorage.removeItem(t)},o.SaveAllStorge=function(){for(var t in this.storageData)this.writeStorage(t,this.storageData[t])},a}(r)).instance=void 0,i=n))||i);a._RF.pop()}}}));

System.register("chunks:///_virtual/SwitchMat.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,n,r,i,o,s,c,l,p,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,n=t.inheritsLoose,r=t.assertThisInitialized,i=t.createClass},function(t){o=t.cclegacy,s=t._decorator,c=t.MeshRenderer,l=t.CCFloat,p=t.Material,u=t.Component}],execute:function(){var h,f,g,y,d,m,b,M,v,D,w,C,B,I,z,_;o._RF.push({},"6c0a7BePH5M+L1b3LMe265D","SwitchMat",void 0);var L=s.ccclass,P=s.property,S=t("matData",(h=L("matData"),f=P({displayName:"name"}),g=P({type:[c],displayName:"renders"}),h((m=e((d=function(){a(this,"name",m,this),a(this,"renders",b,this)}).prototype,"name",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=e(d.prototype,"renders",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=d))||y));t("SwitchMat",(M=L("SwitchMat"),v=P({type:l,visible:!0,displayName:"更新材质"}),D=P({type:l,visible:!0,displayName:"获取子节点信息"}),w=P(p),C=P([S]),M((e((I=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._changeMatButton=0,a(e,"baseMat",z,r(e)),a(e,"matDatas",_,r(e)),e}n(e,t);var o=e.prototype;return o.onLoad=function(){},o.getInfo=function(){var t=this.node.children;this.matDatas=[];for(var e=0;e<t.length;e++){console.log(e);var a=new S;a.name=t[e].name,a.renders=t[e].getComponentsInChildren(c),this.matDatas.push(a)}},o.changeMat=function(){this.node.children;var t,e=this.baseMat.passes[1].getHandle("baseColorMap");this.baseMat.passes[1].getUniform(e,t),console.log(t);for(var a=0;a<this.matDatas.length;a++);},i(e,[{key:"changeMatButton",get:function(){return 0},set:function(t){this._changeMatButton=0,this.changeMat()}},{key:"getChildInfo",get:function(){return 0},set:function(t){this.getInfo()}}]),e}(u)).prototype,"changeMatButton",[v],Object.getOwnPropertyDescriptor(I.prototype,"changeMatButton"),I.prototype),e(I.prototype,"getChildInfo",[D],Object.getOwnPropertyDescriptor(I.prototype,"getChildInfo"),I.prototype),z=e(I.prototype,"baseMat",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(I.prototype,"matDatas",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=I))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/TargetTips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Comp.ts","./StageData.ts"],(function(t){"use strict";var n,e,i,o,s,a,r,c,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,o=t.Vec3,s=t.input,a=t.Input,r=t.Component},function(t){c=t.Comp},function(t){u=t.StageData}],execute:function(){var l;e._RF.push({},"4fe96zMkK9Lf6p8Xtvd0YRC","TargetTips",void 0);var p=i.ccclass;i.property,t("TargetTips",p("TargetTips")(l=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).all=void 0,n.isOut=!1,n}n(e,t);var i=e.prototype;return i.onLoad=function(){this.all=this.node.getChildByName("All").getComponent(c),this.In()},i.In=function(){this.isOut&&(this.isOut=!1,this.all.moveTo_Local(new o(35,0,0),3e3),s.off(a.EventType.TOUCH_START,this.In,this))},i.Out=function(){if(!this.isOut){this.isOut=!0;var t=new o(u.instance.targetTipsMaxX,0,0);this.all.moveTo_Local(t,3e3),s.on(a.EventType.TOUCH_START,this.In,this)}},e}(r))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/TipsLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./StageData.ts","./EventMgr.ts"],(function(t){"use strict";var n,e,i,s,o,a,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,s=t.Label,o=t.Component},function(t){a=t.EventType},function(t){r=t.StageData},function(t){c=t.EventMgr}],execute:function(){var u;e._RF.push({},"dfc8by4pvJOYZzYa4iwNn4w","TipsLabel",void 0);var l=i.ccclass;i.property,t("TipsLabel",l("TipsLabel")(u=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(n=t.call.apply(t,[this].concat(i))||this).label=void 0,n}n(e,t);var i=e.prototype;return i.start=function(){var t=this;this.label=this.node.getComponent(s),this.label.string=r.instance.tipsCount.toString(),c.on(a.UI_TipsUpdate_Event,this,(function(){t.label.string=r.instance.tipsCount.toString()}))},i.update=function(t){},e}(o))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Tool.ts",["cc"],(function(n){"use strict";var r,e,t,o;return{setters:[function(n){r=n.cclegacy,e=n._decorator,t=n.Vec2,o=n.Color}],execute:function(){var c;r._RF.push({},"3378deDU0pKDZeS1ht/W+jO","Tool",void 0);e.ccclass,e.property;var l=e.menu;n("default",l("Tool/Tool")(c=function(){function n(){}return n.d3_FindNodeByName=function(n,r){var e=null;return function n(t){for(var o=0;o<t.children.length;o++){if(t.children[o].name==r)return void(e=t.children[o]);n(t.children[o])}}(n),e},n.d3_FindNodeHasName=function(n,r){var e=null;return function n(t){for(var o=0;o<t.children.length;o++){if(-1!=t.children[o].name.indexOf(r))return void(e=t.children[o]);n(t.children[o])}}(n),e},n.d3_FindAllNodeHasName=function(n,r){var e=[];return function n(t){for(var o=0;o<t.children.length;o++)-1!=t.children[o].name.indexOf(r)&&e.push(t.children[o]),n(t.children[o])}(n),e},n.unactiveAllChildren=function(n){for(var r=0;r<n.children.length;r++)n.children[r].active=!1},n.vector2Reduce=function(n,r){return new t(n.x-r.x,n.y-r.y)},n.getAngle2DWay=function(n,r){var e=t.dot(n,r),o=t.len(n)*t.len(r),c=180*Math.acos(e/o)/Math.PI,l=n.x*r.y-r.x*n.y;return l>0?c*=1:l<0?c*=-1:c=c,c},n.getRandomInArray=function(n){if(n.length){var r=Math.random()*n.length;return n[r=Math.floor(r)]}return console.error("传入错误参数,返回空"),null},n.getRandomByArray_Precent=function(n,r){if(n.length!=r.length)return console.log("长度不一致",n,r),null;for(var e=0,t=0;t<r.length;t++)e+=r[t];for(var o=0,c=Math.random(),l=0;l<r.length;l++)if(c<=(o+=r[l]/e))return n[l];return null},n.getPrecentFromWeight=function(n){for(var r=0,e=0;e<n.length;e++)r+=n[e];for(var t=0,o=[],c=0;c<n.length;c++)0==r?(o.push(1/n.length),console.log("比重传入全部都是0，返回平均数组")):(t=n[c]/r,o.push(t));return o},n.randomNumber=function(n,r){return n+(r-n)*Math.random()},n.randomInt=function(n,r){return Math.floor(n+(r+1-n)*Math.random())},n.halfPercent=function(){return Math.random()<.5},n.percent=function(n){return Math.random()<n},n.cloneArray=function(n){return[].concat(n)},n.d3_getRgbByHex=function(n){var r=[],e=[],t=n.replace(/#/,"");if(3==t.length){for(var c=[],l=0;l<3;l++)c.push(t.charAt(l)+t.charAt(l));t=c.join("")}for(l=0;l<3;l++)r[l]="0x"+t.substr(2*l,2),e.push(parseInt(r[l]));return new o(e[0],e[1],e[2],255)},n}())||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/TouchMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./Tool.ts","./EventMgr.ts"],(function(t){"use strict";var i,n,e,o,s,c,h,a,r,g,d,l,u;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy,e=t._decorator,o=t.geometry,s=t.view,c=t.Vec2,h=t.input,a=t.Input,r=t.PhysicsSystem,g=t.Component},function(t){d=t.cinestation},function(t){l=t.default},function(t){u=t.EventMgr}],execute:function(){var y,T;t("TouchEventType",void 0),n._RF.push({},"034e3b33zdA+5k3ZdMJZ7Xa","TouchMgr",void 0);var f,w=e.ccclass,v=(e.property,e.menu),I=o.Ray,A=s.getVisibleSize();!function(t){t.start="touchStart",t.move="touchMove",t.end="touchEnd",t.getAxis="GetAxis",t.slideWay="slideWay",t.singleTouchStart="singleTouchStart",t.singleTouchMove="singleTouchMove",t.singleTouchEnd="singleTouchEnd",t.secondTouchStart="secondTouchStart",t.secondTouchMove="secondTouchMove",t.secondTouchEnd="secondTouchEnd",t.getAxisAlways="getAxisAlways",t.joyAxis="joyAxis",t.keyDown="keyDown",t.camRayClickCheck="camRayClickCheck"}(f||(f=t("TouchEventType",{})));t("TouchMgr",w("TouchMgr")(y=v("Mgr/TouchMgr")(((T=function(t){function n(){for(var i,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(i=t.call.apply(t,[this].concat(e))||this).firstId=-1,i.secondId=-1,i.firstOriginalPoint=new c,i.secondOriginalPoint=new c,i.isSecond=!1,i.startPos=void 0,i.nowPos=void 0,i.isDown=void 0,i.touchTimer=void 0,i.orignalHorizontal=0,i.orignalAxis=0,i.orignalHorizontalAlways=0,i.orignalAxisAlways=0,i.camRay=void 0,i}i(n,t);var e=n.prototype;return e.onLoad=function(){n.instance=this},e.onEnable=function(){h.on(a.EventType.TOUCH_START,this.onTouchStart,this),h.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this),h.on(a.EventType.TOUCH_END,this.onTouchEnd,this),h.on(a.EventType.TOUCH_END,this.onTouchEnd,this),h.on(a.EventType.KEY_DOWN,this.keyDown,this),A=s.getVisibleSize()},e.onDisable=function(){u.clearTarget(this)},e.keyDown=function(t){u.event(f.keyDown,t.keyCode)},e.onTouchStart=function(t){0==this.isSecond?-1==this.firstId?(this.checkOut(t),this.firstId=t.getID(),u.event(f.singleTouchStart,t),this.firstOriginalPoint=new c(t.getLocationX()/A.width,t.getLocationY()/A.height)):this.firstId!=t.getID()&&-1==this.secondId&&(this.secondId=t.getID(),this.isSecond=!0,u.event(f.secondTouchStart,t),this.secondOriginalPoint=new c(t.getLocationX()/A.width,t.getLocationY()/A.height)):-1==this.firstId?(this.firstId=t.getID(),this.firstOriginalPoint=new c(t.getLocationX()/A.width,t.getLocationY()/A.height)):-1==this.secondId&&(this.secondId=t.getID(),this.secondOriginalPoint=new c(t.getLocationX()/A.width,t.getLocationY()/A.height)),this.checkOutAlways(t)},e.onTouchMove=function(t){if(0==this.isSecond)t.getID()==this.firstId&&(this.checkWay(t),this.checkOut(t),u.event(f.singleTouchMove,t));else if(-1!=this.firstId&&-1!=this.secondId){var i,n={distance:0,angle:0},e=l.vector2Reduce(this.secondOriginalPoint,this.firstOriginalPoint),o=c.len(e);if(t.getID()==this.firstId?i=l.vector2Reduce(this.secondOriginalPoint,new c(t.getLocation().x/A.width,t.getLocation().y/A.height)):t.getID()==this.secondId&&(i=l.vector2Reduce(new c(t.getLocation().x/A.width,t.getLocation().y/A.height),this.firstOriginalPoint)),i){var s=c.len(i);n.distance=s-o,n.angle=l.getAngle2DWay(e,i),u.event(f.secondTouchMove,n)}}t.getID()==this.firstId&&(this.firstOriginalPoint=new c(new c(t.getLocation().x/A.width,t.getLocation().y/A.height))),t.getID()==this.secondId&&(this.secondOriginalPoint=new c(new c(t.getLocation().x/A.width,t.getLocation().y/A.height))),this.checkWayAlways(t)},e.onTouchEnd=function(t){this.checkOutAlways(t),t.getID()==this.firstId&&(this.firstOriginalPoint=new c(new c(t.getLocation().x/A.width,t.getLocation().y/A.height))),t.getID()==this.secondId&&(this.secondOriginalPoint=new c(new c(t.getLocation().x/A.width,t.getLocation().y/A.height))),0==this.isSecond?t.getID()==this.firstId&&(this.checkOut(t),u.event(f.singleTouchEnd,t),this.firstId=-1):(t.getID()==this.firstId&&(this.firstId=-1),t.getID()==this.secondId&&(this.secondId=-1),-1==this.firstId&&-1==this.secondId&&(this.isSecond=!1))},e.WayCheck=function(){var t=l.vector2Reduce(this.nowPos,this.startPos);if(c.len(t)>100){Math.atan2(t.y,t.x),Math.PI;this.isDown=!1}this.startPos=this.nowPos},e.onDestroy=function(){this.touchTimer&&clearTimeout(this.touchTimer)},e.checkWay=function(t){var i=t.getLocationX()-this.orignalHorizontal,n=t.getLocationY()-this.orignalAxis;u.event(f.getAxis,[{x:i,y:n}])},e.checkOut=function(t){this.orignalHorizontal=t.stageX,this.orignalAxis=t.stageY},e.checkWayAlways=function(t){var i=t.getLocation().x/A.width-this.orignalHorizontalAlways,n=t.getLocation().y/A.height-this.orignalAxisAlways;this.checkOutAlways(t),u.event(f.getAxisAlways,[{x:i,y:n}])},e.checkOutAlways=function(t){this.orignalHorizontalAlways=t.getLocation().x/A.width,this.orignalAxisAlways=t.getLocation().y/A.height},e.camRayInit=function(){h.on(a.EventType.TOUCH_START,this.onTouchStart,this)},e.camRayCheck=function(t){this.camRay=new I,d.mainCamera.screenPointToRay(t.getLocation().x,t.getLocation().y,this.camRay),r.instance.raycastClosest(this.camRay,1,1e3,!0)?u.event(f.camRayClickCheck,r.instance.raycastClosestResult):u.event(f.camRayClickCheck,null)},e.camRayOff=function(){h.off(a.EventType.TOUCH_START,this.onTouchStart,this)},n}(g)).instance=void 0,y=T))||y)||y);n._RF.pop()}}}));

System.register("chunks:///_virtual/TrackedHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./CameraHandler.ts"],(function(o){"use strict";var e,r,t,a,n,s;return{setters:[function(o){e=o.inheritsLoose},function(o){r=o.cclegacy,t=o.Vec3},function(o){a=o.quarticDamp,n=o.Vec3_closeTo},function(o){s=o.CameraHandler}],execute:function(){r._RF.push({},"394f8KsH69BrKYjKrRxsXm7","TrackedHandler",void 0);var i=new t;o("TrackedHandler",function(o){function r(){return o.apply(this,arguments)||this}return e(r,o),r.prototype.updateCamera=function(o){var e=this._vcam,r=e.body.tracked;if(r.path){if(r.autoDolly.enable&&e.follow){var t=e.follow.worldPosition,s=r.path.findClosestPoint(t,r.progress,r.autoDolly.searchRadius,r.autoDolly.searchResolution);r.progress=a(r.progress,s,r.damping,o)}r.path.evaluatePosition(i,r.progress)}n(i,e.node.worldPosition)||(e.node.worldPosition=i)},r}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/Types.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"40519iR4mJJb649sETbQDxH","Types",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/UIStyle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./StageData.ts","./EventMgr.ts","./Tool.ts"],(function(t){"use strict";var e,n,o,i,r,s,c,a,f,l,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Sprite,a=t.Component},function(t){f=t.EventType},function(t){l=t.StageData},function(t){u=t.EventMgr},function(t){p=t.default}],execute:function(){var d,g,y;r._RF.push({},"14cbfem0EJOfqZEdiFdk7i8","UIStyle",void 0);var h=s.ccclass,S=s.property;t("UIStyle",h("UIStyle")((y=e((g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"isBg",y,i(e)),e.color=["#b390ff","#79fed3","#ff8787"],e.bgColor=["#fff3ff","#e8ffef","#ffdfba"],e}n(e,t);var r=e.prototype;return r.start=function(){u.on(f.UI_Style_Switch,this,this.updateSprite),this.updateSprite()},r.onDestroy=function(){u.off(f.UI_Style_Switch,this,this.updateSprite)},r.updateSprite=function(){this.isBg?this.node.getComponent(c).color=p.d3_getRgbByHex(this.bgColor[l.instance.nowModelId]):this.node.getComponent(c).color=p.d3_getRgbByHex(this.color[l.instance.nowModelId])},e}(a)).prototype,"isBg",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=g))||d);r._RF.pop()}}}));

System.register("chunks:///_virtual/UMTrack.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,c,e;return{setters:[function(n){t=n.createClass},function(n){c=n.cclegacy,e=n._decorator}],execute:function(){var r,i;c._RF.push({},"66481x39YFPPLMhufOD40BX","UMTrack",void 0);var o=e.ccclass;e.property,n("UMTrack",o("UMTrack")(((i=function(){function n(){}var c=n.prototype;return c.init=function(){},c.trackEvent=function(n,t){},c.onStart=function(n,t){},c.onEnd=function(n,t){},c.onInitLevel=function(n,t){},c.onSetLevel=function(n,t){},t(n,null,[{key:"instance",get:function(){return null===n._instance&&(n._instance=new n),n._instance},set:function(t){n._instance=t}}]),n}())._instance=null,r=i))||r);c._RF.pop()}}}));

System.register("chunks:///_virtual/VCamAim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VCamComposer.ts","./VCamHardLook.ts"],(function(e){"use strict";var t,o,r,i,n,a,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e._decorator,n=e.Enum},function(e){a=e.VCamComposer},function(e){p=e.VCamHardLook}],execute:function(){var c,s,u,m,l,f,y,C,b;e("AimType",void 0),r._RF.push({},"b5ce9A29MhBxp+Y4Lc9reA0","VCamAim",void 0);var h,d=i.ccclass,A=i.property;!function(e){e[e.None=0]="None",e[e.Composer=1]="Composer",e[e.HardLookAt=2]="HardLookAt"}(h||(h=e("AimType",{})));e("VCamAim",(c=d("VCamAim"),s=A({type:n(h)}),u=A({type:a,visible:function(){return this.type===h.Composer}}),m=A({type:p,visible:function(){return this.type===h.HardLookAt}}),c((y=t((f=function(){o(this,"type",y,this),o(this,"composer",C,this),o(this,"hardLookat",b,this)}).prototype,"type",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.Composer}}),C=t(f.prototype,"composer",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),b=t(f.prototype,"hardLookat",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),l=f))||l));r._RF.pop()}}}));

System.register("chunks:///_virtual/VCamAutoDolly.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts"],(function(e){"use strict";var t,i,o,r,n,s,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.createClass,o=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e._decorator,s=e.game},function(e){a=e.CinestationEvent}],execute:function(){var u,c,l,p,h,y,_,b,R,f,D,C;r._RF.push({},"6faa8Kj6xFD/Y2h9t5y/JgK","VCamAutoDolly",void 0);var g=n.ccclass,d=n.property;e("VCamAutoDoly",(u=g("VCamAutoDoly"),c=d({visible:!1}),l=d({visible:!1}),p=d({visible:!1}),h=d({tooltip:"开启自动定位"}),y=d({tooltip:"当前位置两侧搜索的片段数量。\n数值为0时，搜索整个路径"}),_=d({tooltip:"将轨道分成多个片段来搜索。\n数值越大，结果越精确，性能消耗也越大"}),u((f=t((R=function(){function e(){o(this,"_enable",f,this),o(this,"_searchRadius",D,this),o(this,"_searchResolution",C,this)}return i(e,[{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,CC_EDITOR&&s.emit(a.EDITOR_CHANGED))}},{key:"searchRadius",get:function(){return this._searchRadius},set:function(e){this._searchRadius!==e&&(this._searchRadius=e,CC_EDITOR&&s.emit(a.EDITOR_CHANGED))}},{key:"searchResolution",get:function(){return this._searchResolution},set:function(e){this._searchResolution!==e&&(this._searchResolution=e,CC_EDITOR&&s.emit(a.EDITOR_CHANGED))}}]),e}()).prototype,"_enable",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=t(R.prototype,"_searchRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),C=t(R.prototype,"_searchResolution",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),t(R.prototype,"enable",[h],Object.getOwnPropertyDescriptor(R.prototype,"enable"),R.prototype),t(R.prototype,"searchRadius",[y],Object.getOwnPropertyDescriptor(R.prototype,"searchRadius"),R.prototype),t(R.prototype,"searchResolution",[_],Object.getOwnPropertyDescriptor(R.prototype,"searchResolution"),R.prototype),b=R))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/VCamBody.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts","./VCamFreeLook.ts","./VCamTracked.ts"],(function(e){"use strict";var t,r,i,o,n,a,c,p,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,i=e.initializerDefineProperty},function(e){o=e.cclegacy,n=e._decorator,a=e.Enum,c=e.game},function(e){p=e.CinestationEvent},function(e){u=e.VCamFreeLook},function(e){s=e.VCamTracked}],execute:function(){var y,l,f,d,m,b,k,h,C,v;e("BodyType",void 0),o._RF.push({},"98051KqNLZKB5mU2JZrUz3P","VCamBody",void 0);var _,g=n.ccclass,T=n.property;!function(e){e[e.None=0]="None",e[e.FreeLook=1]="FreeLook",e[e.Tracked=2]="Tracked"}(_||(_=e("BodyType",{})));e("VCamBody",(y=g("VCamBody"),l=T({visible:!1}),f=T({animatable:!1,type:a(_)}),d=T({animatable:!1,type:u,visible:function(){return this.type===_.FreeLook}}),m=T({type:s,visible:function(){return this.type===_.Tracked}}),y((h=t((k=function(){function e(){i(this,"_type",h,this),i(this,"freelook",C,this),i(this,"tracked",v,this)}return r(e,[{key:"type",get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e,CC_EDITOR&&c.emit(p.EDITOR_CHANGED))}}]),e}()).prototype,"_type",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.None}}),t(k.prototype,"type",[f],Object.getOwnPropertyDescriptor(k.prototype,"type"),k.prototype),C=t(k.prototype,"freelook",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),v=t(k.prototype,"tracked",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),b=k))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/VCamComposer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts"],(function(t){"use strict";var e,i,o,n,r,a,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,o=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t._decorator,a=t.game,s=t.Vec3},function(t){p=t.CinestationEvent}],execute:function(){var l,h,d,u,c,f,g,b,y,Z,_,m,C,O,D,H,k,W,E,w,v,P,R;n._RF.push({},"a20f4DBjy1CkIZ+lahC6hYS","VCamComposer",void 0);var z=r.ccclass,j=r.property;t("VCamComposer",(l=z("VCamComposer"),h=j({visible:!1}),d=j({visible:!1}),u=j({visible:!1}),c=j({visible:!1}),f=j({tooltip:"从LookAt目标的中心作局部空间的位置偏移。 \n所需区域不是跟踪目标的中心时，微调跟踪目标的位置"}),g=j({tooltip:"根据LookAt目标的运动速度，动态调整偏移量。\n预估了目标将在未来几秒内出现的位置",range:[0,1],step:.1,slide:!0}),b=j({tooltip:"控制预估的阻尼系数。\n数值越大阻尼越强，预测越滞后，可以消除因为预测带来的抖动",range:[.1,2],step:.1,slide:!0}),y=j({tooltip:"瞄准目标的阻尼系数。\n数值越小，可以更快的将目标保持在死区，数值越大，瞄准速度越慢。",range:[.1,2],step:.1,slide:!0}),Z=j({tooltip:"死区宽度。\n如果目标在死区内，相机则不会旋转",range:[0,1],step:.01,slide:!0}),_=j({tooltip:"死区高度。\n如果目标在死区内，相机则不会旋转",range:[0,1],step:.01,slide:!0}),m=j({tooltip:"软区宽度。\n如果目标在软区内，相机将在lookatDamping指定时间内旋转到死区",range:[0,1],step:.01,slide:!0}),C=j({tooltip:"软区高度。\n如果目标在软区内，相机将在lookatDamping指定时间内旋转到死区",range:[0,1],step:.01,slide:!0}),l((H=e((D=function(){function t(){o(this,"_deadZoneWidth",H,this),o(this,"_deadZoneHeight",k,this),o(this,"_softZoneWidth",W,this),o(this,"_softZoneHeight",E,this),o(this,"trackedObjectOffset",w,this),o(this,"lookaheadTime",v,this),o(this,"lookaheadDamping",P,this),o(this,"lookatDamping",R,this)}return i(t,[{key:"deadZoneWidth",get:function(){return this._deadZoneWidth},set:function(t){this._deadZoneWidth!==t&&(this._deadZoneWidth=t,CC_EDITOR&&a.emit(p.COMPOSER_CHANGED))}},{key:"deadZoneHeight",get:function(){return this._deadZoneHeight},set:function(t){this._deadZoneHeight!==t&&(this._deadZoneHeight=t,CC_EDITOR&&a.emit(p.COMPOSER_CHANGED))}},{key:"softZoneWidth",get:function(){return this._softZoneWidth},set:function(t){this._softZoneWidth!==t&&(this._softZoneWidth=t,CC_EDITOR&&a.emit(p.COMPOSER_CHANGED))}},{key:"softZoneHeight",get:function(){return this._softZoneHeight},set:function(t){this._softZoneHeight!==t&&(this._softZoneHeight=t,CC_EDITOR&&a.emit(p.COMPOSER_CHANGED))}}]),t}()).prototype,"_deadZoneWidth",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),k=e(D.prototype,"_deadZoneHeight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),W=e(D.prototype,"_softZoneWidth",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),E=e(D.prototype,"_softZoneHeight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),w=e(D.prototype,"trackedObjectOffset",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),v=e(D.prototype,"lookaheadTime",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),P=e(D.prototype,"lookaheadDamping",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),R=e(D.prototype,"lookatDamping",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),e(D.prototype,"deadZoneWidth",[Z],Object.getOwnPropertyDescriptor(D.prototype,"deadZoneWidth"),D.prototype),e(D.prototype,"deadZoneHeight",[_],Object.getOwnPropertyDescriptor(D.prototype,"deadZoneHeight"),D.prototype),e(D.prototype,"softZoneWidth",[m],Object.getOwnPropertyDescriptor(D.prototype,"softZoneWidth"),D.prototype),e(D.prototype,"softZoneHeight",[C],Object.getOwnPropertyDescriptor(D.prototype,"softZoneHeight"),D.prototype),O=D))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/VCamFreeLook.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,r,n;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,r=e._decorator,n=e.Vec3}],execute:function(){var a,l,p,u,b,s,f,c,m,h,g,d,w,y,z,S,F,k,v,D,L,V,C;o._RF.push({},"0b999naWjlKBKlbbhrzf9kj","VCamFreeLook",void 0);var P=r.ccclass,_=r.property;e("VCamFreeLook",(a=P("VCamFreeLook"),l=_({tooltip:"禁止水平方向旋转",animatable:!1}),p=_({tooltip:"禁止垂直方向旋转",animatable:!1}),u=_({tooltip:"禁止相机推移",animatable:!1}),b=_({tooltip:"禁止相机平移",animatable:!1}),s=_({tooltip:"旋转速度",animatable:!1,range:[.1,5],step:.1,slide:!0}),f=_({tooltip:"旋转平滑系数。\n数值越大旋转惯性越大",animatable:!1,range:[.1,5],step:.1,slide:!0}),c=_({tooltip:"平移速度",animatable:!1,range:[.1,5],step:.1,slide:!0}),m=_({tooltip:"平移平滑系数。\n数值越大平移惯性越大",animatable:!1,range:[.1,5],step:.1,slide:!0}),h=_({tooltip:"与Follow目标之间的位移，初始值为(0,0,-10)"}),g=_({tooltip:"跟随阻尼系数。\n数字越小相机越灵敏，越大越迟顿",animatable:!1,range:[0,5],step:.1,slide:!0}),a((y=t((w=function(){i(this,"forbidX",y,this),i(this,"forbidY",z,this),i(this,"forbidZ",S,this),i(this,"forbidPan",F,this),i(this,"rotateSpeed",k,this),i(this,"rotateSmoothing",v,this),i(this,"panSpeed",D,this),i(this,"panSmoothing",L,this),i(this,"followOffset",V,this),i(this,"followDamping",C,this)}).prototype,"forbidX",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=t(w.prototype,"forbidY",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=t(w.prototype,"forbidZ",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=t(w.prototype,"forbidPan",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=t(w.prototype,"rotateSpeed",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=t(w.prototype,"rotateSmoothing",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),D=t(w.prototype,"panSpeed",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=t(w.prototype,"panSmoothing",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),V=t(w.prototype,"followOffset",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n(0,0,-10)}}),C=t(w.prototype,"followDamping",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=w))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/VCamHardLook.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,o,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){o=e.cclegacy,a=e._decorator,c=e.Vec3}],execute:function(){var i,n,s,u,l;o._RF.push({},"47535R8yGBJapZG+5BzZbdz","VCamHardLook",void 0);var p=a.ccclass,f=a.property;e("VCamHardLook",(i=p("VCamHardLook"),n=f({tooltip:"从LookAt目标的中心作局部空间的位置偏移。 \n所需区域不是跟踪目标的中心时，微调跟踪目标的位置"}),i((l=t((u=function(){r(this,"trackedObjectOffset",l,this)}).prototype,"trackedObjectOffset",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),s=u))||s));o._RF.pop()}}}));

System.register("chunks:///_virtual/VCamImpulse.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,u,i,n,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){u=e.cclegacy,i=e._decorator,n=e.Enum,c=e.Layers}],execute:function(){var s,o,a,p,l;u._RF.push({},"8f0fdpmkflDmIp1ZB3EmmMS","VCamImpulse",void 0);var m=i.ccclass,f=i.property;e("VCamImpulse",(s=m("VCamImpulse"),o=f({type:n(c.Enum)}),s((l=r((p=function(){t(this,"source",l,this)}).prototype,"source",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Enum.DEFAULT}}),a=p))||a));u._RF.pop()}}}));

System.register("chunks:///_virtual/VCamLens.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts"],(function(t){"use strict";var e,r,i,n,o,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.createClass,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t._decorator,a=t.game},function(t){s=t.CinestationEvent}],execute:function(){var p,c,f,u,l,_,y,h,v;n._RF.push({},"1b0c6SIESZLp7YflAThQCmy","VCamLens",void 0);var b=o.ccclass,C=o.property;t("VCamLens",(p=b("VCamLens"),c=C({visible:!1}),f=C({visible:!1}),u=C({visible:!1}),p((y=e((_=function(){function t(){i(this,"_fov",y,this),i(this,"_near",h,this),i(this,"_far",v,this)}return r(t,[{key:"fov",get:function(){return this._fov},set:function(t){this._fov!==t&&(this._fov=t,CC_EDITOR&&a.emit(s.LENS_CHANGED))}},{key:"near",get:function(){return this._near},set:function(t){this._near!==t&&(this._near=t,CC_EDITOR&&a.emit(s.LENS_CHANGED))}},{key:"far",get:function(){return this._far},set:function(t){this._far!==t&&(this._far=t,CC_EDITOR&&a.emit(s.LENS_CHANGED))}}]),t}()).prototype,"_fov",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),h=e(_.prototype,"_near",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=e(_.prototype,"_far",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),e(_.prototype,"fov",[C],Object.getOwnPropertyDescriptor(_.prototype,"fov"),_.prototype),e(_.prototype,"near",[C],Object.getOwnPropertyDescriptor(_.prototype,"near"),_.prototype),e(_.prototype,"far",[C],Object.getOwnPropertyDescriptor(_.prototype,"far"),_.prototype),l=_))||l));n._RF.pop()}}}));

System.register("chunks:///_virtual/VCamNoise.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NoiseGenerator.ts"],(function(e){"use strict";var i,t,n,r,o,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e._decorator,o=e.Enum},function(e){u=e.NoiseProfile}],execute:function(){var l,a,s,c,p,f,y,N,b,h,m;e("NoiseType",void 0),n._RF.push({},"64113KNDFdCe5TQiq+NPHCc","VCamNoise",void 0);var v,d=r.ccclass,g=r.property;!function(e){e[e.None=0]="None",e[e.Perlin=1]="Perlin"}(v||(v=e("NoiseType",{})));e("VCamNoise",(l=d("VCamNoise"),a=g({type:o(v)}),s=g({tooltip:"多种预置噪声参数",type:o(u),visible:function(){return this.type!==v.None}}),c=g({tooltip:"幅度增益。数值越大相机晃动幅度越明显",visible:function(){return this.type!==v.None}}),p=g({tooltip:"频率增益。数值越大相机晃动频率越高",visible:function(){return this.type!==v.None}}),l((N=i((y=function(){t(this,"type",N,this),t(this,"profile",b,this),t(this,"amplitudeGain",h,this),t(this,"frequncyGain",m,this)}).prototype,"type",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.None}}),b=i(y.prototype,"profile",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.Noise_CM_4}}),h=i(y.prototype,"amplitudeGain",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=i(y.prototype,"frequncyGain",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=y))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/VCamTracked.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationSmoothPath.ts","./Events.ts","./VCamAutoDolly.ts"],(function(t){"use strict";var e,r,i,o,n,a,s,p,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.createClass,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t._decorator,a=t.game},function(t){s=t.CinestationSmoothPath},function(t){p=t.CinestationEvent},function(t){l=t.VCamAutoDoly}],execute:function(){var u,c,g,h,m,f,y,b,C,d,D,_;o._RF.push({},"28daaTaX7tIHIg1KeO3hzdb","VCamTracked",void 0);var v=n.ccclass,T=n.property;t("VCamTracked",(u=v("VCamTracked"),c=T({visible:!1}),g=T({tooltip:"相机移动的路径。\n此属性必须是CinestationSmoothPath",animatable:!1,type:s}),h=T({tooltip:"移动进度。\n数值0表示第一个位置点，数值1表示第二个位置点，以此类推。"}),m=T({tooltip:"跟随阻尼系数。\n数字越小相机越灵敏，越大越迟顿",animatable:!1,range:[.1,5],step:.1,slide:!0}),f=T({animatable:!1,type:l}),u((C=e((b=function(){function t(){i(this,"_progress",C,this),i(this,"path",d,this),i(this,"damping",D,this),i(this,"autoDolly",_,this)}return r(t,[{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,CC_EDITOR&&a.emit(p.EDITOR_CHANGED))}}]),t}()).prototype,"_progress",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=e(b.prototype,"path",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(b.prototype,"progress",[h],Object.getOwnPropertyDescriptor(b.prototype,"progress"),b.prototype),D=e(b.prototype,"damping",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=e(b.prototype,"autoDolly",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),y=b))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/videoToggle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var o,t,i,r,n,c,a,l,s;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,a=e.Node,l=e.Toggle,s=e.Component}],execute:function(){var u,p,g,d,v;n._RF.push({},"80e55OdRYtLGKa9VvN83FSy","videoToggle",void 0);var h=c.ccclass,f=c.property;e("videoToggle",(u=h("videoToggle"),p=f(a),u((v=o((d=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return o=e.call.apply(e,[this].concat(n))||this,i(o,"backNode",v,r(o)),o}return t(o,e),o.prototype.onChange=function(){this.backNode.active=this.getComponent(l).isChecked},o}(s)).prototype,"backNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=d))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/VirtualCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./Events.ts","./Visualization.ts","./VCamAim.ts","./VCamBody.ts","./VCamImpulse.ts","./VCamLens.ts","./VCamNoise.ts","./AimStage.ts","./BodyStage.ts","./ImpulseStage.ts","./NoiseStage.ts"],(function(t){"use strict";var e,o,n,i,r,a,s,l,u,c,f,p,h,d,g,y,_,m,w,b,C,v,k,A,R,D,E,P,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){s=t.cclegacy,l=t._decorator,u=t.Node,c=t.Vec3,f=t.Quat,p=t.game,h=t.view,d=t.Mat4,g=t.toRadian,y=t.utils},function(t){_=t.cinestation},function(t){m=t.CinestationEvent},function(t){w=t.Visualization},function(t){b=t.VCamAim},function(t){C=t.VCamBody,v=t.BodyType},function(t){k=t.VCamImpulse},function(t){A=t.VCamLens},function(t){R=t.VCamNoise},function(t){D=t.AimStage},function(t){E=t.BodyStage},function(t){P=t.ImpulseStage},function(t){I=t.NoiseStage}],execute:function(){var V,O,S,z,T,N,B,H,L,M,F,G,j,x,J,Q,U,q,K,W,X,Y,Z;s._RF.push({},"e84d7HSHCRNU4Jgu1AdeBGI","VirtualCamera",void 0);var $=l.ccclass,tt=l.property,et=l.executeInEditMode;t("VirtualCamera",(V=$("VirtualCamera"),O=tt({visible:!1}),S=tt({visible:!1}),z=tt({tooltip:"在运行时显示死区和软区"}),T=tt({tooltip:"虚拟相机优先级。\n数值越大优先级越高，默认值是10"}),N=tt({tooltip:"瞄准目标",type:u}),B=tt({tooltip:"跟踪目标",type:u}),H=tt({type:A}),L=tt({type:C}),M=tt({animatable:!1,type:b}),F=tt({animatable:!1,type:R}),G=tt({animatable:!1,type:k}),V(j=et((J=e((x=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._editorChanged=!0,e._composerChanged=!0,e._visibleDefault=!1,n(e,"_lookAt",J,i(e)),n(e,"_follow",Q,i(e)),n(e,"debug",U,i(e)),n(e,"priority",q,i(e)),n(e,"lens",K,i(e)),n(e,"body",W,i(e)),n(e,"aim",X,i(e)),n(e,"noise",Y,i(e)),n(e,"impulse",Z,i(e)),e._stages=[new E(i(e)),new D(i(e)),new I(i(e)),new P(i(e))],e._finalPosition=new c,e._finalRotation=new f,e._correctPosition=new c,e._correctRotation=new f,e._lookaheadPosition=new c,e}o(e,t);var s=e.prototype;return s.onLoad=function(){var t=this;CC_EDITOR&&(p.on(m.LENS_CHANGED,(function(){return t._modelChanged=!0})),p.on(m.EDITOR_CHANGED,(function(){return t._editorChanged=!0})),p.on(m.COMPOSER_CHANGED,(function(){return t._composerChanged=!0})),this.node.on(u.EventType.TRANSFORM_CHANGED,this._onTransformChanged,this))},s._onTransformChanged=function(t){if(this.follow&&t&u.TransformBit.POSITION)switch(this.body.type){case v.Tracked:this._editorChanged=!0;break;case v.FreeLook:c.subtract(this.body.freelook.followOffset,this.node.worldPosition,this.follow.worldPosition),this._editorChanged=!0}},s.onEnable=function(){t.prototype.onEnable.call(this),_.addCamera(this)},s.onDisable=function(){t.prototype.onDisable.call(this),_.removeCamera(this),this.onDeActive()},s.onActive=function(){this._stages.forEach((function(t){return t.enable=!0}))},s.onDeActive=function(){this._stages.forEach((function(t){return t.enable=!1}))},s.updateCamera=function(t){if(!CC_EDITOR||this._isChangedInEditor()){f.identity(this._correctRotation),c.zero(this._correctPosition);for(var e,o=r(this._stages);!(e=o()).done;){e.value.updateStage(t)}}},s._isChangedInEditor=function(){return!!this._editorChanged&&(this._editorChanged=!1,!0)},s._updateMesh=function(t){for(var e=[new c(-1,-1,-1),new c(1,-1,-1),new c(-1,1,-1),new c(1,1,-1),new c(-1,-1,1),new c(1,-1,1),new c(-1,1,1),new c(1,1,1)],o=this.lens,n=h.getDesignResolutionSize(),i=d.perspective(new d,g(o.fov),n.width/n.height,o.near,o.far).invert(),r=0;r<8;r++)e[r].transformMat4(i);for(var a=[],s=[],l=0;l<8;l++)for(var u=0;u<3;u++)c.toArray(a,e[l],a.length),c.toArray(a,e[l^1<<u],a.length),s.push(1,1,1,1),s.push(1,1,1,1);return y.createMesh({positions:a,colors:s},t)},a(e,[{key:"lookAt",get:function(){return this._lookAt},set:function(t){this._lookAt=t,this._editorChanged=CC_EDITOR}},{key:"follow",get:function(){return this._follow},set:function(t){this._follow=t,this._editorChanged=CC_EDITOR}},{key:"active",get:function(){return _.vcam===this},set:function(t){_.activeCamera(t?this:null)}},{key:"correctPosition",get:function(){return this._correctPosition}},{key:"correctRotation",get:function(){return this._correctRotation}},{key:"finalPosition",get:function(){return c.add(this._finalPosition,this.node.worldPosition,this._correctPosition)}},{key:"finalRotation",get:function(){return f.multiply(this._finalRotation,this.node.worldRotation,this._correctRotation)}},{key:"lookaheadPosition",get:function(){return this._lookaheadPosition}}]),e}(w)).prototype,"_lookAt",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(x.prototype,"_follow",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(x.prototype,"debug",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=e(x.prototype,"priority",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(x.prototype,"lookAt",[N],Object.getOwnPropertyDescriptor(x.prototype,"lookAt"),x.prototype),e(x.prototype,"follow",[B],Object.getOwnPropertyDescriptor(x.prototype,"follow"),x.prototype),K=e(x.prototype,"lens",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new A}}),W=e(x.prototype,"body",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new C}}),X=e(x.prototype,"aim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b}}),Y=e(x.prototype,"noise",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new R}}),Z=e(x.prototype,"impulse",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new k}}),j=x))||j)||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/Visualization.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationShareAssets.ts"],(function(e){"use strict";var t,i,n,s,o,l,h,a;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,s=e._decorator,o=e.director,l=e.renderer,h=e.Component},function(e){a=e.cinestationShareAssets}],execute:function(){var d;n._RF.push({},"33adaQlUqdEy5hcZt+9bHhU","Visualization",void 0);var r=s.ccclass;s.property,e("Visualization",r("Visualization")(d=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this)._modelChanged=!1,t._mesh=null,t._model=null,t._material=a.lineMaterial,t._visibleInRuntime=CC_EDITOR,t._visibleDefault=!0,t}t(n,e);var s=n.prototype;return s.onEnable=function(){this._visibleInRuntime&&(this._createModel(),this._attachToScene())},s.onDisable=function(){this._visibleInRuntime&&this._detachFromScene()},s._attachToScene=function(){this._model&&this.node&&this.node.scene&&(this._model.scene&&this._detachFromScene(),this._getRenderScene().addModel(this._model))},s._detachFromScene=function(){this._model&&this._model.scene&&this._model.scene.removeModel(this._model)},s._createModel=function(){this._model||(this._model=o.root.createModel(l.scene.Model),this._model.node=this._model.transform=this.node,this._model.enabled=this._visibleDefault,this._modelChanged=!0)},s.update=function(e){this._modelChanged&&this._model&&(this._modelChanged=!1,this._mesh=this._updateMesh(this._mesh),this._mesh&&this._model.initSubModel(0,this._mesh.renderingSubMeshes[0],this._material))},s._updateMesh=function(e){return e},i(n,[{key:"visible",get:function(){return!!this._model&&this._model.enabled},set:function(e){this._model&&(this._model.enabled=e)}}]),n}(h))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomInput.ts","./StateController.ts"],(function(t){"use strict";var e,n,i,o,r,a,s,l,u,c,p,f,h,m,g,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Camera,l=t.Node,u=t.Prefab,c=t.Vec3,p=t.lerp,f=t.clamp,h=t.instantiate,m=t.Component},function(t){g=t.customInput},function(t){w=t.StateController}],execute:function(){var y,v,_,b,C,d,P,S,R,I;r._RF.push({},"c0716SCpO9GEZo32AffHxgX","WeaponController",void 0);var M=a.ccclass,z=a.property;t("WeaponController",(y=M("WeaponController"),v=z(s),_=z(l),b=z(u),y((P=e((d=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._swaySmoothness=4,e._swayMovement=new c,e._state=null,e._fireInterval=0,i(e,"gunCamera",P,o(e)),i(e,"fireRate",S,o(e)),i(e,"casingSpawnPoint",R,o(e)),i(e,"casingPrefab",I,o(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){this._state=this.getComponent(w)},r.update=function(t){if(this.gunCamera){var e=g.mouseRight?20:40;this.gunCamera.fov=p(this.gunCamera.fov,e,10*t)}if(this._swayMovement.set(g.mouseX,g.mouseY).multiplyScalar(5e-4),this._swayMovement.x=f(this._swayMovement.x,-.06,.06),this._swayMovement.y=f(this._swayMovement.y,-.06,.06),this.node.position=this.node.position.lerp(this._swayMovement,t*this._swaySmoothness),this._state&&g.mouseLeft&&(this._fireInterval+=t,this._fireInterval>=1/this.fireRate&&(this._fireInterval=0,this._state.setState(g.mouseRight?w.AIM_FIRE:w.FIRE,!0,0),this.casingPrefab&&this.casingSpawnPoint))){var n=h(this.casingPrefab);n.parent=this.node.scene,n.worldPosition=this.casingSpawnPoint.worldPosition,n.worldRotation=this.casingSpawnPoint.worldRotation}},e}(m)).prototype,"gunCamera",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(d.prototype,"fireRate",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 16}}),R=e(d.prototype,"casingSpawnPoint",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(d.prototype,"casingPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=d))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/WxPlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./AppConfig.ts","./BasePlatform.ts","./JJMgr.ts","./WxPlatformBannerAd.ts"],(function(n){"use strict";var i,t,e,o,r,d,a;return{setters:[function(n){i=n.inheritsLoose,t=n.createClass},function(n){e=n.cclegacy},function(n){o=n.WECHAT},null,function(n){r=n.default},function(n){d=n.default},function(n){a=n.default}],execute:function(){e._RF.push({},"94a82hcI5VDmJQGpuTAXQQQ","WxPlatform",void 0),n("default",function(n){function e(){for(var i,t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return(i=n.call.apply(n,[this].concat(e))||this).shareCallBack=void 0,i.sysInfo=void 0,i.bannerSize=void 0,i.bannerTopFactor=0,i.videoAd=void 0,i.isForceShowVideo=void 0,i.videoEndCallback=void 0,i.videoCloseCallback=void 0,i.interAd=void 0,i.interAdOnClose=null,i.homeGridAds=void 0,i.gameGridAd=void 0,i.singleGridAd=void 0,i}i(e,n);var r=e.prototype;return r.init=function(){},r.initAd=function(){},r.setBannerTop=function(n){a.Instance.setBannerTop(n)},r.showBanner=function(){return a.Instance.showBanner()},r.hideBanner=function(){a.Instance.hideBanner()},r.loadVideoAd=function(){},r.showVideoAd=function(n,i,t){return n&&n(),void(i&&i())},r.createInterAd=function(){},r.showInterAd=function(n){this.interAd&&this.interAd.show()},r.createHomeCustomAd=function(n){},r.createGameCustomAd=function(){},r.createSingleCustomAd=function(){},r.showHomeGridAd=function(){},r.hideHomeGridAd=function(){},r.showGameGridAd=function(){if(this.gameGridAd&&d.instance.dataConfig.front_dangezi_switch)for(var n=0;n<this.gameGridAd.length;n++)this.gameGridAd[n].show()},r.hideGameGridAd=function(){if(this.gameGridAd)for(var n=0;n<this.gameGridAd.length;n++)this.gameGridAd[n].hide()},r.showSingleGridAd=function(){},r.hideSingleGridAd=function(){},r.getGridPos=function(n,i){void 0===i&&(i=120);var t={width:20,height:20};return n%2==0?(t.left=20,t.top=i):(t.left=this.sysInfo.windowWidth-90,t.top=i),t},r.getSystemInfoSync=function(){},r.showShareMenuWithTicket=function(n){window.wx.showShareMenu({withShareTicket:n,success:function(){},fail:function(){},complete:function(){}})},r.regisiterWXShareCallback=function(){},r.showToast=function(n,i){},r.shareGame=function(n){},r.playVibrateShort=function(){},r.playVibrateLong=function(){},r.showModal=function(n){},r.WxOnHide=function(n){},r.WxOffHide=function(n){n&&o&&window.wx.offHide(n)},r.WxOnShow=function(n){},r.WxOffShow=function(n){n&&o&&window.wx.offShow(n)},r.aldSendEvent=function(n,i){console.log("埋点：",n)},r.aldSendTest=function(n,i){},r.aldSendOpenid=function(n){},r.JJBannerAdShowCount=function(){},r.JJSendVideoAdCount=function(n,i){},r.JJShareAppMessage=function(n,i){window.wx.JJShareAppMessage((function(){return{title:n.title,imageUrl:n.imageUrl,id:n.id}})).then((function(n){i(n)}))},r.JJOnShareAppMessage=function(n){window.wx.JJOnShareAppMessage((function(){return{title:n.title,imageUrl:n.imageUrl,id:n.id}}))},t(e,[{key:"bannerLoadError",get:function(){return a.Instance.isLoadBannerError},set:function(n){}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(r))._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/WxPlatformBannerAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts"],(function(n){"use strict";var e,r,t,s;return{setters:[function(n){e=n.createClass},function(n){r=n.cclegacy},function(n){t=n.default},function(n){s=n.default}],execute:function(){r._RF.push({},"51a2ft6sXpGUbTT7jXb3RY+","WxPlatformBannerAd",void 0),n("default",function(){function n(){this._sysInfo=void 0,this.isLoadBannerError=!1,this.bannerIds=void 0,this.bannerAdArr=[],this.bannerTimeArr=[],this.bannerErrorArr=[],this.bannerCountArr=[],this.currentIndex=0,this.indexTime=0,this.showBanner=void 0,this.hideBanner=void 0}var r=n.prototype;return r.initAd=function(n){void 0===n&&(n=[]),this.bannerIds=[],this.bannerIds=this.bannerIds.concat(t.instance.shuffleArr(n)),this.showBanner=this.showBannerFun,this.hideBanner=this.hideBannerFun,this.createBannerAd()},r.createBannerAd=function(){this.bannerAdArr=[],this.bannerTimeArr=[],this.bannerErrorArr=[],this.currentIndex=0;for(var n=0;n<this.bannerIds.length;n++){this.bannerErrorArr.push(!1),this.bannerTimeArr.push(0),this.bannerCountArr.push(0);var e=this.getBannerAd(n);this.bannerAdArr.push(e)}},r.getBannerAd=function(n,e){var r=this;void 0===e&&(e=!1),console.log("创建banner：",n);var s=window.wx.createBannerAd({adUnitId:e?this.getRandomItemInArr(this.bannerIds):this.bannerIds[n],style:{top:.8*this.sysInfo.screenHeight,width:.8*this.sysInfo.screenWidth,left:this.sysInfo.screenWidth/2-150},adIntervals:t.instance.dataConfig.front_banner_auto_refresh_time/1e3});return s.onError((function(){console.log("banner加载失败：",n),r.bannerErrorArr[n]=!0})),s.onLoad((function(){console.log("banner加载成功:",n),r.bannerErrorArr[n]=!1})),s.onResize((function(){s.style.top=r.sysInfo.screenHeight-s.style.realHeight,s.style.left=0})),s},r.getIsAllError=function(){for(var n=!0,e=0;e<this.bannerErrorArr.length;e++)if(!this.bannerErrorArr[e]){n=!1;break}return n},r.showBannerFun=function(){this.currentIndex>=this.bannerAdArr.length&&(this.currentIndex=0),this.bannerCountArr[this.currentIndex]>=t.instance.dataConfig.front_banner_refresh_num&&(this.bannerCountArr[this.currentIndex]=0,this.currentIndex++,this.currentIndex>=this.bannerAdArr.length&&(this.currentIndex=0));for(var e=0;e<this.bannerErrorArr.length&&0!=this.bannerErrorArr[e];e++);for(var r=0;r<this.bannerErrorArr.length&&this.bannerErrorArr[this.currentIndex];r++)this.bannerTimeArr[this.currentIndex]=0,this.bannerCountArr[this.currentIndex]=0,this.bannerAdArr[this.currentIndex]=this.getBannerAd(this.currentIndex),this.currentIndex++,this.currentIndex>=this.bannerAdArr.length&&(this.currentIndex=0);return this.hideBannerFun(),console.log("当前展示的bannerId：",this.currentIndex),this.bannerAdArr[this.currentIndex]&&(this.bannerAdArr[this.currentIndex].show(),this.bannerCountArr[this.currentIndex]++),s.Instance.com.unschedule(n.Instance.updateBannerTime),s.Instance.com.schedule(n.Instance.updateBannerTime,.1),!0},r.showBannerFun2=function(){this.hideBannerFun(),this.showBannerFun()},r.showBannerFun2Fun=function(){this.showBannerFun()},r.hideBannerFun=function(e){s.Instance.com.unschedule(n.Instance.updateBannerTime);for(var r=0;r<this.bannerAdArr.length;r++)this.bannerAdArr[r]&&this.bannerAdArr[r].hide();e&&this.hideBannerFun2()},r.hideBannerFun2=function(){},r.checkBannerTimeOut=function(){var e=t.instance.dataConfig.front_banner_refresh_time;s.Instance.NewWuchu2||(e=3e4),this.bannerTimeArr[this.currentIndex]>=e/1e3&&(s.Instance.com.unschedule(n.Instance.updateBannerTime),this.hideBannerFun(),this.bannerAdArr[this.currentIndex].destroy(),this.bannerTimeArr[this.currentIndex]=0,this.bannerErrorArr[this.currentIndex]=!0,this.bannerAdArr[this.currentIndex]=this.getBannerAd(this.currentIndex),this.bannerAdArr[this.currentIndex].show(),s.Instance.com.schedule(n.Instance.updateBannerTime,.1))},r.updateBannerTime=function(){var e=n.Instance;e.bannerTimeArr[e.currentIndex]+=.1,e.checkBannerTimeOut()},r.countIndexTime=function(){s.Instance.com.schedule(n.Instance.updateIndexTime,.1)},r.updateIndexTime=function(){var e=n.Instance;e.indexTime+=.1,e.indexTime>=t.instance.dataConfig.front_assign_banner_time/1e3&&(e.hideBannerFun(),e.currentIndex++,e.showBannerFun(),e.indexTime=0)},r.stopCountIndexTime=function(){s.Instance.com.unschedule(n.Instance.updateIndexTime)},r.showHideBanner=function(){s.Instance.com.scheduleOnce(n.Instance.showHideBannerShow,t.instance.dataConfig.front_gezi_time/1e3)},r.showHideBannerShow=function(){n.Instance.showBannerFun(),s.Instance.com.scheduleOnce(n.Instance.showHideBannerHide,1)},r.showHideBannerHide=function(){n.Instance.hideBannerFun(),s.Instance.com.scheduleOnce(n.Instance.showHideBannerShow,t.instance.dataConfig.front_gezi_time/1e3)},r.clearShowHideBanner=function(){s.Instance.com.unschedule(n.Instance.showHideBannerHide),s.Instance.com.unschedule(n.Instance.showHideBannerShow),n.Instance.hideBannerFun()},r.getRandomIndex=function(n){for(var e=[],r=0;r<this.bannerIds.length;r++)e.push(r);return this.getRandomItemInArrWithoutSelf(n,e)[0]},r.setBannerTop=function(n){},r.shuffleArr=function(n){for(var e=n.length;e;){var r=Math.floor(Math.random()*e--),t=[n[e],n[r]];n[r]=t[0],n[e]=t[1]}return n},r.getRandomItemInArrWithoutSelf=function(n,e,r){void 0===r&&(r=1);var t=[].concat(e);return t.splice(t.indexOf(n),1),(t=this.shuffleArr(t)).slice(0,r)},r.getRandomItemInArr=function(n){return n[Math.floor(Math.random()*n.length)]},e(n,[{key:"sysInfo",get:function(){return this._sysInfo||(this._sysInfo=window.wx.getSystemInfoSync()),this._sysInfo}}],[{key:"Instance",get:function(){return n._instance||(n._instance=new n),n._instance}}]),n}())._instance=void 0,r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});