System.register("chunks:///_virtual/2DShow3D.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,s,a,o,h,u,c,l,p,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,o=e.Camera,h=e.RenderTexture,u=e.SpriteFrame,c=e.Rect,l=e.UITransform,p=e.Sprite,d=e.Component}],execute:function(){var f,m,x,T,w;s._RF.push({},"860e4GyAQpJ/pFumbHbSlQB","2DShow3D",void 0);var g=a.ccclass,v=a.property;e("DShow3D",(f=g("DShow3D"),m=v(o),f((w=t((T=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(t,"camera",w,n(t)),t.renderTexture=null,t.scaleAxis=.5,t.frame=void 0,t}r(t,e);var s=t.prototype;return s.start=function(){var e=this;this.renderTexture=new h,this.renderTexture.reset({width:375,height:667}),this.node.active=!1,this.scheduleOnce((function(){e.node.active=!0})),this.frame=new u,this.frame.texture=this.renderTexture,this.frame.rect=new c(0,0,this.renderTexture.width,this.renderTexture.height),this.frame.flipUVY=!0,this.node.getComponent(l).setContentSize(this.renderTexture.width,this.renderTexture.height),this.camera.targetTexture=this.renderTexture},s.update=function(){this.node.getComponent(p).spriteFrame=this.frame},t}(d)).prototype,"camera",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=T))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/Aim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./EventMgr.ts","./Tool.ts"],(function(t){"use strict";var i,e,s,o,h,n,a,d,l,r,c;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,s=t._decorator,o=t.Label,h=t.Vec3,n=t.Sprite,a=t.Color,d=t.Component},function(t){l=t.EventType},function(t){r=t.EventMgr},function(t){c=t.default}],execute:function(){var m;e._RF.push({},"3fc3cZmd4xCNblb85TZBkRb","Aim",void 0);var u=s.ccclass;s.property,t("Aim",u("Aim")(m=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return(i=t.call.apply(t,[this].concat(s))||this).baseNode=void 0,i.hitNode=void 0,i.skillHitNode=void 0,i.damageValue=void 0,i.shootAxis=0,i.shootReduceAxis=2,i.hitReduceAxis=2,i.nowRot=new h,i.targetRot=new h,i.hitAxis=0,i.targetName="",i.damageNumber=0,i.damageUpdateTime=0,i}i(e,t);var s=e.prototype;return s.onLoad=function(){this.baseNode=this.node.getChildByName("base"),this.hitNode=this.node.getChildByName("hit"),this.skillHitNode=this.node.getChildByName("skillHit"),this.damageValue=this.node.getChildByName("damageValue").getComponent(o),this.baseNode.active=!0,this.hitNode.active=!0,this.skillHitOff()},s.start=function(){r.on(l.Game_Aim_Shoot,this,this.shoot),r.on(l.Game_Aim_Hit,this,this.hit),r.on(l.Game_Aim_SkillHit_On,this,this.skillHitOn),r.on(l.Game_Aim_SkillHit_Off,this,this.skillHitOff),r.on(l.Game_Aim_Lock,this,this.lock),r.on(l.Game_Aim_UnLock,this,this.unLock),r.on(l.Game_Player_Atk,this,this.damageValueUpdate)},s.update=function(t){this.shootAxis-=t*this.shootReduceAxis,this.shootAxis<0&&(this.shootAxis=0);var i=25+30*this.shootAxis;this.baseNode.children[0].setPosition(new h(0,i,0)),this.baseNode.children[1].setPosition(new h(0,-i,0)),this.baseNode.children[2].setPosition(new h(i,0,0)),this.baseNode.children[3].setPosition(new h(-i,0,0)),this.nowRot.lerp(this.targetRot,10*t),this.baseNode.setRotationFromEuler(this.nowRot);var e=new h(0,0,this.nowRot.z+45);this.hitNode.setRotationFromEuler(e),this.hitAxis-=t*this.hitReduceAxis,this.hitAxis<0&&(this.hitAxis=0),i=30+10*Math.pow(this.hitAxis,2),this.hitNode.children[0].setPosition(new h(0,i,0)),this.hitNode.children[1].setPosition(new h(0,-i,0)),this.hitNode.children[2].setPosition(new h(i,0,0)),this.hitNode.children[3].setPosition(new h(-i,0,0));for(var s=0;s<this.hitNode.children.length;s++)this.hitNode.children[s].getComponent(n).color=new a(255,255,255,255*this.hitAxis);if(this.damageNumber>0){var o=(new Date).getTime()-this.damageUpdateTime,d=1,l=1;o<200?(d=o/200*.5+1,l=1):o<500?(d=1.5-(o-200)/300*.5,l=1):o<2e3?(d=1,l=1):o<3e3?(d=1,l=1-(o-2e3)/1e3):(d=1,l=0,this.damageNumber=0,this.targetName=""),this.damageValue.color=new a(255,255,0,255*l),this.damageValue.node.setScale(new h(d,d,d))}else{this.damageValue.color=new a(255,255,0,0),this.damageValue.node.setScale(new h(1,1,1))}},s.unLock=function(){this.targetRot=new h(0,0,0)},s.lock=function(){this.targetRot=new h(0,0,45)},s.shoot=function(t){this.shootAxis+=t,this.shootAxis>1&&(this.shootAxis=1)},s.hit=function(){this.hitAxis=1},s.skillHitOn=function(){this.skillHitNode.active=!0},s.skillHitOff=function(){this.skillHitNode.active=!1},s.damageValueUpdate=function(t,i){t!=this.targetName&&(this.damageNumber=0,this.targetName=t),this.damageNumber+=Math.floor(i)+c.randomInt(-20,20),this.damageValue.string=this.damageNumber.toString(),this.damageUpdateTime=(new Date).getTime()},e}(d))||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/AimStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraHandler.ts","./ComposerHandler.ts","./HardLookAtHandler.ts","./BaseStage.ts"],(function(n){"use strict";var e,t,a,r,o,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy},function(n){a=n.CameraHandler},function(n){r=n.ComposerHandler},function(n){o=n.HardLookAtHandler},function(n){c=n.BaseStage}],execute:function(){t._RF.push({},"9aaa9R0RxZFwrBQPW5bAcZD","AimStage",void 0);n("AimStage",function(n){function t(){for(var e,t=arguments.length,c=new Array(t),i=0;i<t;i++)c[i]=arguments[i];return(e=n.call.apply(n,[this].concat(c))||this)._handlers=[new a(e._vcam),new r(e._vcam),new o(e._vcam)],e}e(t,n);var c=t.prototype;return c.onEnable=function(){this._handlers.forEach((function(n){return n.enable=!0}))},c.onDisable=function(){this._handlers.forEach((function(n){return n.enable=!1}))},c.updateStage=function(n){var e=this._vcam.aim,t=this._handlers[e.type];t&&t.updateCamera(n)},t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/AppConfig.ts",["cc"],(function(t){"use strict";var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"0d20aYuKMNOaLpLCja1ucLs","AppConfig",void 0);t("default",{wechat:{videoAdUnitId:["adunit-acdd6cb9af015fc2"],interstitialAdUnitId:[""],customAd:["",""],finishCustomAd:[""]}});i._RF.pop()}}}));

System.register("chunks:///_virtual/AssetMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Platform.ts"],(function(a){"use strict";var n,i,s,o,e,t,r,c,l,d;return{setters:[function(a){n=a.inheritsLoose},function(a){i=a.cclegacy,s=a._decorator,o=a.assetManager,e=a.Prefab,t=a.instantiate,r=a.game,c=a.BufferAsset,l=a.Component},function(a){d=a.default}],execute:function(){var u,g;i._RF.push({},"42374uvGGtHxakQ0OnO9tcP","AssetMgr",void 0);var P=s.ccclass;s.property,a("AssetMgr",P("AssetMgr")(((g=function(a){function i(){for(var n,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return(n=a.call.apply(a,[this].concat(s))||this).sceneSubPackageUrl="02_Stage",n.dinasor1SubPackgeUrl="03_Dinasor1",n.dinasor2SubPackgeUrl="04_Dinasor2",n.dinasor3SubPackgeUrl="05_Dinasor3",n.dinasor4SubPackgeUrl="06_Dinasor4",n.dinasor6SubPackgeUrl="08_Dinasor6",n.isSceneBundle=!1,n.isNavMapDataSmall=!1,n.isNavMapDataBig=!1,n.isNavMapDataSmall_P=!1,n.isNavMapDataBig_P=!1,n.isDinasor1Bundle=!1,n.isDinasor2Bundle=!1,n.isDinasor3Bundle=!1,n.isDinasor4Bundle=!1,n.isDinasor6Bundle=!1,n.loadAsset=[],n}n(i,a);var s=i.prototype;return s.onLoad=function(){i.instance=this},s.start=function(){d.instance.loadSubPackage(this.sceneSubPackageUrl,this.scenePackageEnd.bind(this)),d.instance.loadSubPackage(this.dinasor1SubPackgeUrl,this.dinasor1PackageEnd.bind(this)),d.instance.loadSubPackage(this.dinasor4SubPackgeUrl,this.dinasor4PackageEnd.bind(this))},s.startLoadSound=function(){o.getBundle("01_Home").preload("Prefabs/Sound",e,(function(a,n){console.log("声音加载完毕"),o.getBundle("01_Home").load("Prefabs/Sound",e,(function(a,n){var i=t(n);r.addPersistRootNode(i)}))}))},s.scenePackageEnd=function(){var a=this;o.loadBundle(this.sceneSubPackageUrl,(function(){a.isSceneBundle=!0,console.log("场景资源加载完毕");var n=o.getBundle("02_Stage");n.preload("Data/scene/nav-mesh-small",c,(function(){}),(function(){a.isNavMapDataSmall=!0})),n.preload("Data/scene/nav-mesh-big",c,(function(){}),(function(){a.isNavMapDataBig=!0})),n.preload("Data/scene-P/nav-mesh-small",c,(function(){}),(function(){a.isNavMapDataSmall_P=!0})),n.preload("Data/scene-P/nav-mesh-big",c,(function(){}),(function(){a.isNavMapDataBig_P=!0})),a.loadOtherDinasor()}))},s.dinasor1PackageEnd=function(){var a=this;o.loadBundle(this.dinasor1SubPackgeUrl,(function(n,i){i.preload("Dinasor_1",e,(function(n,i){a.isDinasor1Bundle=!0,console.log("恐龙1加载完毕"),a.loadOtherDinasor()}))}))},s.dinasor2PackageEnd=function(){var a=this;o.loadBundle(this.dinasor2SubPackgeUrl,(function(n,i){i.preload("Dinasor_2",e,(function(n,i){a.isDinasor2Bundle=!0,console.log("恐龙2加载完毕")}))}))},s.dinasor3PackageEnd=function(){var a=this;o.loadBundle(this.dinasor3SubPackgeUrl,(function(n,i){i.preload("Dinasor_3",e,(function(n,i){a.isDinasor3Bundle=!0,console.log("恐龙3加载完毕")}))}))},s.dinasor4PackageEnd=function(){var a=this;o.loadBundle(this.dinasor4SubPackgeUrl,(function(n,i){i.preload("Dinasor_4",e,(function(n,i){a.isDinasor4Bundle=!0,console.log("恐龙4加载完毕"),a.loadOtherDinasor()}))}))},s.dinasor6PackageEnd=function(){var a=this;o.loadBundle(this.dinasor6SubPackgeUrl,(function(n,i){i.preload("Dinasor_6",e,(function(n,i){a.isDinasor6Bundle=!0,console.log("恐龙6加载完毕")}))}))},s.loadOtherDinasor=function(){this.isDinasor1Bundle&&this.isDinasor4Bundle&&this.isSceneBundle&&(d.instance.loadSubPackage(this.dinasor2SubPackgeUrl,this.dinasor2PackageEnd.bind(this)),d.instance.loadSubPackage(this.dinasor3SubPackgeUrl,this.dinasor3PackageEnd.bind(this)),d.instance.loadSubPackage(this.dinasor6SubPackgeUrl,this.dinasor6PackageEnd.bind(this)))},i}(l)).instance=null,u=g))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/AtkUpBuff.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolComp.ts"],(function(t){"use strict";var n,o,i,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t._decorator,e=t.Animation},function(t){r=t.PoolComp}],execute:function(){var c;o._RF.push({},"5dcb6zIXwdBE4SKrYkvnoKp","AtkUpBuff",void 0);var u=i.ccclass;i.property,t("AtkUpBuff",u("AtkUpBuff")(c=function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).anim=void 0,n}n(o,t);var i=o.prototype;return i.firstBorn=function(){this.anim=this.node.getComponent(e)},i.clear=function(){},i.init=function(){this.node.active=!0,this.anim.play()},i.recyle=function(){this.node.active=!1},o}(r))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/attribute-defines.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"94eea0qL7tIYZDZNUN4PCRC","attribute-defines",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/AutoScroll.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,s,e,l,o,r,c,n,a;return{setters:[function(t){i=t.applyDecoratedDescriptor,s=t.inheritsLoose,e=t.initializerDefineProperty,l=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,c=t.ScrollView,n=t.v2,a=t.Component}],execute:function(){var u,h,f,d;o._RF.push({},"a75d1uQdLhKfJU99KUbdLWv","AutoScroll",void 0);var p=r.ccclass,y=r.property;t("default",p("AutoScroll")((f=i((h=function(t){function i(){for(var i,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,e(i,"scrollSpeed",f,l(i)),e(i,"isVertical",d,l(i)),i.scroll=null,i.isReady=!1,i.isDown=!0,i}s(i,t);var o=i.prototype;return o.onLoad=function(){this.scroll=this.node.getComponent(c)},o.start=function(){var t=this;this.scheduleOnce((function(){t.isReady=!0}),1)},o.onEnable=function(){var t=this;this.scheduleOnce((function(){t.isReady=!0}),1)},o.onDisable=function(){this.isReady=!1},o.update=function(t){var i=this;if(this.isReady&&!this.scroll.isScrolling()){var s=this.isVertical?this.scroll.getScrollOffset().y:-this.scroll.getScrollOffset().x,e=this.isVertical?this.scroll.getMaxScrollOffset().y:this.scroll.getMaxScrollOffset().x;this.isDown?(s+=this.scrollSpeed)<e?this.isVertical?this.scroll.scrollToOffset(n(0,s)):this.scroll.scrollToOffset(n(s,0)):(this.isDown=!1,this.isReady=!1,this.scheduleOnce((function(){i.isReady=!0}),1)):(s-=this.scrollSpeed)>0?this.isVertical?this.scroll.scrollToOffset(n(0,s)):this.scroll.scrollToOffset(n(s,0)):(this.isDown=!0,this.isReady=!1,this.scheduleOnce((function(){i.isReady=!0}),1))}},i}(a)).prototype,"scrollSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),d=i(h.prototype,"isVertical",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),u=h))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/Bar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,a,l,o,n,s,p,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,l=e.createClass},function(e){o=e.cclegacy,n=e._decorator,s=e.Node,p=e.CCFloat,u=e.Sprite,c=e.Component}],execute:function(){var v,y,h,f,g,_,b,d,m;o._RF.push({},"bef7diNtE1G9LMs03e0/hQp","Bar",void 0);var C=n.ccclass,B=n.property,D=n.executeInEditMode,L=n.menu;e("Bar",(v=C("Bar"),y=D(!0),h=L("UI/Comp/Bar"),f=B({type:s,visible:!0,displayName:"进度条的条"}),g=B({type:p,visible:!0,displayName:"进度"}),_=B({visible:!0,displayName:"翻转"}),v(b=y(b=h((m=t((d=function(e){function t(){for(var t,r=arguments.length,l=new Array(r),o=0;o<r;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,i(t,"bar",m,a(t)),t._value=0,t._reversal=!1,t}return r(t,e),t.prototype.onChange=function(){if(this.bar){var e=this.bar.getComponent(u);e.type=u.Type.FILLED,e.fillType=u.FillType.HORIZONTAL,this._reversal?(e.fillStart=1-this._value,e.fillRange=1):(e.fillStart=0,e.fillRange=this._value)}},l(t,[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.value>1?this._value=1:this.value<0&&(this._value=0),this.onChange()}},{key:"reversal",get:function(){return this._reversal},set:function(e){this._reversal=e,this.onChange()}}]),t}(c)).prototype,"bar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(d.prototype,"value",[g],Object.getOwnPropertyDescriptor(d.prototype,"value"),d.prototype),t(d.prototype,"reversal",[_],Object.getOwnPropertyDescriptor(d.prototype,"reversal"),d.prototype),b=d))||b)||b)||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/Base.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.createClass},function(e){t=e.cclegacy}],execute:function(){var s;e("BaseFlag",void 0),t._RF.push({},"3be5frJskNL5ZI9D4VeEHjM","Base",void 0),function(e){e[e.None=0]="None",e[e.Enable=1]="Enable",e[e.Custom=4]="Custom"}(s||(s=e("BaseFlag",{})));e("Base",function(){function e(){this._objFlag=0}return n(e,[{key:"enable",get:function(){return!!(this._objFlag&s.Enable)},set:function(e){e?this._objFlag&s.Enable||(this._objFlag|=s.Enable,this.onEnable&&this.onEnable()):this._objFlag&s.Enable&&(this._objFlag&=~s.Enable,this.onDisable&&this.onDisable())}}]),e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BasePlatform.ts",["cc"],(function(i){"use strict";var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){var e;i("PlatformType",void 0),t._RF.push({},"d1550qjUB1Ax5sikt2CoDP0","BasePlatform",void 0),function(i){i[i.WeiXin=0]="WeiXin",i[i.Qq=1]="Qq",i[i.Vivo=2]="Vivo",i[i.Oppo=3]="Oppo",i[i.ZiJieTiaoDong=4]="ZiJieTiaoDong",i[i.Mgc=5]="Mgc",i[i.Swan=6]="Swan",i[i.Android=7]="Android",i[i.Ios=8]="Ios"}(e||(e=i("PlatformType",{})));i("default",function(){function i(){this.bannerId="",this.videoId="",this.interId="",this.gridId=[],this.existBannerAd=!1,this.existVideoAd=!1,this.existInterAd=!1,this.existGridAd=!1,this.init()}return i.prototype.init=function(){console.error("初始化平台失败")},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(t){"use strict";var e,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){s=t.Base}],execute:function(){n._RF.push({},"f3957i4i6tInKV6Rdsk1/N/","BaseStage",void 0);t("BaseStage",function(t){function n(e){var n;return(n=t.call(this)||this)._vcam=e,n}return e(n,t),n.prototype.updateStage=function(t){},n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-composite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./behavior-node-entity.ts"],(function(t){"use strict";var i,n,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.BehaviorEntity}],execute:function(){n._RF.push({},"fc7c1rKdnpPDrBExoUlF1Ix","behavior-composite",void 0);t("BehaviorComposite",function(t){function n(i,n,o){var s;return(s=t.call(this,i,n,o)||this).isComposite=!0,s.lastRunning=-1,s.isComposite=!0,s.lastRunning=-1,s}i(n,t);var o=n.prototype;return o.abort=function(){if(-1!=this.lastRunning){var i=this.children[this.lastRunning];this.lastRunning=-1,i&&i.abort()}return t.prototype.abort.call(this)},o.reset=function(){t.prototype.reset.call(this),this.lastRunning=-1},o.disable=function(){t.prototype.disable.call(this),this.lastRunning=-1},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-conditional.ts",["./rollupPluginModLoBabelHelpers.js","cc","./behavior-decorator.ts"],(function(o){"use strict";var t,n,i;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy},function(o){i=o.BehaviorDecorator}],execute:function(){n._RF.push({},"c3b96to9KJIQpOHVON0RIIK","behavior-conditional",void 0);o("BehaviorConditional",function(o){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=o.call.apply(o,[this].concat(i))||this).isCondition=!0,t}return t(n,o),n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-decorator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./behavior-node-element.ts"],(function(e){"use strict";var t,o,r;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy},function(e){r=e.BehaviorElement}],execute:function(){o._RF.push({},"b1634+KPlZCK5vjGPuoU/tn","behavior-decorator",void 0);e("BehaviorDecorator",function(e){function o(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this).isCondition=!1,t}return t(o,e),o}(r));o._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-event-declaration.ts",["cc","./utils.ts"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.cclegacy},function(t){n=t.utils}],execute:function(){t("CloneEventOption",(function(){return n.clone(i)})),e._RF.push({},"87489uw7WxIWLzQjS3xbEnz","behavior-event-declaration",void 0);var i=t("BehaviorEventOption",{node:{uuid:"",name:"",path:""},component:{uuid:"",name:""},method:"",data:""});e._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-event-delegate.ts",["cc","./behavior-event-handler.ts"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.BehaviorEventHandler}],execute:function(){t._RF.push({},"350f34LjONEe4Bsh3TtuUL0","behavior-event-delegate",void 0);e("BehaviorEventDelegate",function(){function e(e,t,n){this._events=null,this._context=null,this._btNode=null,this._onEnterHandler=null,this._onExitHandler=null,this._onEnableHandler=null,this._onDisableHandler=null,this._onUpdateHandler=null,e&&t&&n&&(this._btNode=e,this._events=t,this._context=n,this._onEnterHandler=this.createHandler(t.onEnter),this._onExitHandler=this.createHandler(t.onExit),this._onUpdateHandler=this.createHandler(t.onUpdate),this._onEnableHandler=this.createHandler(t.onEnable),this._onDisableHandler=this.createHandler(t.onDisable))}var t=e.prototype;return t.createHandler=function(e){var t;if(!e||null==(t=e.node)||!t.path)return null;var a=this._context.getTargetByPath(e.node.path);if(!a)return console.warn("getTargetByUUID error: path =",e.node.path),null;var r=new n;return r.target=a,r.component=e.component.name,r.handler=e.method,r.customEventData=e.data,r},t.onEnter=function(){var e;null==(e=this._onEnterHandler)||e.emit([this._btNode])},t.onEnable=function(){var e;null==(e=this._onEnableHandler)||e.emit([this._btNode])},t.onUpdate=function(e){return this._onUpdateHandler&&(e=this._onUpdateHandler.invoke(this._btNode,e)),e},t.onDisable=function(){var e;null==(e=this._onDisableHandler)||e.emit([this._btNode])},t.onExit=function(){var e;null==(e=this._onExitHandler)||e.emit([this._btNode])},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-event-handler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.isValid,i=t.js,o=t.EventHandler}],execute:function(){n._RF.push({},"8944dzqBeNNa7bSbmlbD8cX","behavior-event-handler",void 0);t("BehaviorEventHandler",function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.invoke=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var o=this.target;if(r(o)){this._genCompIdIfNeeded();var s=i._getClassById(this._componentId),a=o.getComponent(s);if(r(a)){var u=a[this.handler];if("function"==typeof u){null!=this.customEventData&&""!==this.customEventData&&(e=e.slice()).push(this.customEventData);var c=u.apply(a,e);return c}}}},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-node-element.ts",["./rollupPluginModLoBabelHelpers.js","cc","./behavior-node.ts"],(function(e){"use strict";var t,n,o;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){o=e.BehaviorNode}],execute:function(){n._RF.push({},"bfa1fnFY/pJ0LgS+JRadAPW","behavior-node-element",void 0);e("BehaviorElement",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.execute=function(t){return t=this.update(t),this.status=t=e.prototype.execute.call(this,t),t},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-node-entity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./behavior-node.ts","./behavior-status.ts"],(function(t){"use strict";var e,i,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.BehaviorNode},function(t){s=t.BehaviorStatus}],execute:function(){i._RF.push({},"d187f0y0otP66VEvQnR2vCS","behavior-node-entity",void 0);t("BehaviorEntity",function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).statusCondition=s.None,e}e(i,t);var n=i.prototype;return n.abort=function(){return this.status==s.Running&&this.disable(),t.prototype.abort.call(this)},n.execute=function(t){return void 0===t&&(t=this.status==s.Running?s.Running:s.None),(t=this.executeCondition(t))==s.Failure?(this.status==s.Running&&this.disable(),this.status=t,this.status):(this.enter(),this.status!=s.Running&&this.enable(),this.executeServices(t),this.status=t=this.update(t),this.logLifeStatus("execute"),this.status=t=this.executeDecorator(t),t==s.Running||(s.Failure,this.disable()),this.exit(),this.status)},n.executeCondition=function(t){for(var e=this.decorators,i=e.length-1;i>=0;i--){var n=e[i];n.isCondition&&(t=n.execute(t))}return this.statusCondition=t,t},n.executeDecorator=function(t){for(var e=this.decorators,i=e.length-1;i>=0;i--){var n=e[i];n.isCondition||(t=n.execute(t))}return t},n.executeServices=function(t){for(var e=this.services,i=e.length-1;i>=0;i--){e[i].update(t)}},n.checkCondition=function(t){for(var e=!1,i=this.decorators,n=i.length-1;n>=0;n--){var s=i[n];s.isCondition&&(t=s.execute(t))}return this.statusCondition!=t&&(e=!0),e},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-node-interface.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"db4c2Jq5ZFCn4XOQx2mAUkz","behavior-node-interface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-node.ts",["./rollupPluginModLoBabelHelpers.js","cc","./logger.ts","./behavior-event-delegate.ts","./behavior-status.ts"],(function(t){"use strict";var e,i,s,r,n,o,a;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){s=t.cclegacy,r=t.js},function(t){n=t.logger},function(t){o=t.BehaviorEventDelegate},function(t){a=t.BehaviorStatus}],execute:function(){s._RF.push({},"561acKJzndDgIHFTIxljzJ3","behavior-node",void 0);t("BehaviorNode",function(){function t(i,s,r){if(this.delegate=null,this.parent=null,this.owner=null,this.status=a.None,this.config=null,this.$context=null,this.decorators=[],this.services=[],this.children=[],this.interrupters=new Set,this.isCondition=!1,this._isEnabled=!1,this.parent=i,this.owner=i,s){if(this.config=s,this.$context=r,this.delegate=new o(this,this.options.events,r),this.children=[],s.children)for(var u,l=e(s.children);!(u=l()).done;){var h,c=u.value,d=(null==(h=c.config)?void 0:h.label)||{};if(d.uuid){var f=t.deserializeNode(this,c,r);f?this.children.push(f):n.error("Can't find class by uuid: ",d.uuid)}}if(this.decorators=[],this.services=[],s.elements)for(var p,g=e(s.elements);!(p=g()).done;){var v=p.value,b=v.config||{};if(b.uuid){var E=t.deserializeNode(this,v,r,!0);E?"decorator"===v.type?this.decorators.push(E):"service"===v.type&&this.services.push(E):n.error("Can't find class by uuid: ",b.uuid)}}}else n.error("Behavior::constructor error -- config is null")}t.deserializeNode=function(t,e,i,s){void 0===s&&(s=!1);var o=e.config||{};o.label&&(o=o.label);var a=r._getClassById(o.uuid);if(!a)return null;var u=new a(t,e,i);s&&(u.parent=t.parent);var l=o.properties||{};for(var h in l){var c=l[h];if(void 0===u[h])"bt.SharedDynamic"==c.TYPE&&(c.path?u[h]=i.getTargetByPath(c.path):u[h]=c.default);else if(c.TYPE){if("cc.Enum"==c.TYPE)u[h]=c.default;else if("cc.Node"==c.TYPE)c.path&&(u[h]=i.getTargetByPath(c.path));else if(c.TYPE.startsWith("bt.Shared"))if("bt.SharedDynamic"==c.TYPE)c.path?u[h]=i.getTargetByPath(c.path):u[h]=c.default;else{var d=i.blackboard.getVariable(c.default);u[h]=d}}else u[h]=c.default;void 0!==u[h]&&null!=u[h]||n.warn("Behavior ["+u.options.order+"]-[deserialize] ["+u.options.title+"]: key="+h+", value="+u[h])}return u.load(),u};var s=t.prototype;return s.load=function(){this.logLifeStatus("load")},s.destroy=function(){this.clearInterrupter(),this.logLifeStatus("destroy")},s.enter=function(){this.logLifeStatus("enter"),this.delegate.onEnter()},s.exit=function(){this.logLifeStatus("exit"),this.delegate.onExit()},s.enable=function(){this.logLifeStatus("enable"),this._isEnabled||(this._isEnabled=!0,this.delegate.onEnable())},s.disable=function(){this.logLifeStatus("disable"),this._isEnabled&&(this._isEnabled=!1,this.delegate.onDisable())},s.update=function(t){return this.onUpdate(t)},s.execute=function(t){return this.onExecute(t)},s.onUpdate=function(t){return this.logLifeStatus("update",t),this.delegate.onUpdate(t)},s.onExecute=function(t){return this.logLifeStatus("execute",t),t},s.abort=function(){return this.status=a.Abort,this.onAbort()},s.onAbort=function(){return this.logLifeStatus("abort",this.status),this.status},s.interrupt=function(){return this.onInterrupt(),!1},s.onInterrupt=function(){return this.logLifeStatus("interrupt",this.status),this.status},s.reset=function(){this.status=a.None;for(var t,i=e(this.decorators);!(t=i()).done;){t.value.reset()}for(var s,r=e(this.services);!(s=r()).done;){s.value.reset()}for(var n,o=e(this.children);!(n=o()).done;){n.value.reset()}},s.addInterrupter=function(t){this.interrupters.has(t)||this.interrupters.add(t)},s.removeInterrupter=function(t){this.interrupters.has(t)&&this.interrupters.delete(t)},s.clearInterrupter=function(){this.interrupters.clear()},s.logLifeStatus=function(t,e){void 0===e&&(e=this.status);var i="log"+t.substr(0,1).toUpperCase()+t.substr(1);this.$context.logOptions[i]&&this.$context.logTaskChanges&&n.log("Behavior-Tick ["+this.options.order+"]-["+t+"] ["+this.options.title+"] : status = "+a[e]+". "+this.getAppendedLog(t,e))},s.logLifeInfo=function(t,e){var i="log"+t.substr(0,1).toUpperCase()+t.substr(1);this.$context.logOptions[i]&&this.$context.logTaskChanges&&n.log("Behavior-Tick ["+this.options.order+"]-["+t+"] ["+this.options.title+"] : info = "+e+" ")},s.getAppendedLog=function(t,e){return""},i(t,[{key:"options",get:function(){var t=this.config?this.config.config:{};return t.label?t.label:t}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-parallel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./behavior-composite.ts","./behavior-status.ts"],(function(t){"use strict";var e,i,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){n=t.BehaviorComposite},function(t){r=t.BehaviorStatus}],execute:function(){i._RF.push({},"725ccmzywxHH61AYdRrNPR8","behavior-parallel",void 0);t("BehaviorParallel",function(t){function i(e,i,n){var r;return(r=t.call(this,e,i,n)||this).threshold=null,r._cacheStatus=[],r._cacheStatus=[],r}e(i,t);var n=i.prototype;return n.update=function(e){if(this.interrupt())return t.prototype.update.call(this,e);var i=this.threshold&&"number"==typeof this.threshold.value?this.threshold.value:0;0==i||i>this.children.length?i=this.children.length:i<0&&(i=0);for(var n=0,s=0,h=0;h<this.children.length;h++)null!=this._cacheStatus[h]&&this._cacheStatus[h]!==r.Running||(e=this.children[h].execute(),this._cacheStatus[h]=e,e===r.Running&&s++),this._cacheStatus[h]===r.Success&&n++;return e=0===s?n===i?r.Success:r.Failure:r.Running,t.prototype.update.call(this,e)},n.interrupt=function(){var t=this._cacheStatus.filter((function(t){return t==r.Running}));if(this.interrupters.size>0&&t.length>0)for(var e=0;e<this.children.length;e++){var i=this.children[e];if(i.status!=r.Running&&this.interrupters.has(i))if(i.checkCondition(i.statusCondition))return this.onInterrupt(),this.abort(),!0}return!1},n.abort=function(){if(this._cacheStatus.length>0){for(var e=0;e<this._cacheStatus.length;e++){this._cacheStatus[e]==r.Running&&(this._cacheStatus[e]=r.None,this.children[e].abort())}this._cacheStatus.length=0}return t.prototype.abort.call(this)},n.reset=function(){t.prototype.reset.call(this),this._cacheStatus.length=0},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-selector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./behavior-composite.ts","./behavior-status.ts"],(function(t){"use strict";var i,n,e,r;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.BehaviorComposite},function(t){r=t.BehaviorStatus}],execute:function(){n._RF.push({},"32365qfSvpB75sCQ9KTMEPJ","behavior-selector",void 0);t("BehaviorSelector",function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var e=n.prototype;return e.update=function(i){if(this.interrupt())return t.prototype.update.call(this,i);var n=this.lastRunning>=0?this.lastRunning:0;this.lastRunning=-1;for(var e=n;e<this.children.length;e++)if((i=this.children[e].execute())!==r.Failure){if(i===r.Success)break;if(i===r.Running){this.lastRunning=e;break}}return t.prototype.update.call(this,i)},e.interrupt=function(){var t=this.lastRunning>=0?this.lastRunning:0;if(this.interrupters.size>0&&t>0)for(var i=0;i<t;i++){var n=this.children[i];if(this.interrupters.has(n))if(n.checkCondition(n.statusCondition))return this.onInterrupt(),this.abort(),!0}return!1},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-sequence.ts",["./rollupPluginModLoBabelHelpers.js","cc","./behavior-composite.ts","./behavior-status.ts"],(function(t){"use strict";var i,n,e,r;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.BehaviorComposite},function(t){r=t.BehaviorStatus}],execute:function(){n._RF.push({},"59a0ckxD3NHC5bvEydtFVXP","behavior-sequence",void 0);t("BehaviorSequence",function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var e=n.prototype;return e.update=function(i){if(this.interrupt())return t.prototype.update.call(this,i);var n=this.lastRunning>=0?this.lastRunning:0;for(this.lastRunning=-1;n<this.children.length&&(i=this.children[n].execute())!==r.Failure;n++)if(i!==r.Success&&i===r.Running){this.lastRunning=n;break}return t.prototype.update.call(this,i)},e.interrupt=function(){var t=this.lastRunning>=0?this.lastRunning:0;if(this.interrupters.size>0&&t>0)for(var i=0;i<t;i++){var n=this.children[i];if(this.interrupters.has(n))if(n.checkCondition(n.statusCondition))return this.onInterrupt(),this.abort(),!0}return!1},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-service.ts",["./rollupPluginModLoBabelHelpers.js","cc","./behavior-node-element.ts"],(function(e){"use strict";var t,i,r;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy},function(e){r=e.BehaviorElement}],execute:function(){i._RF.push({},"d33b7DahC1GAJkKGM7y7wV7","behavior-service",void 0);e("BehaviorService",function(e){function i(){return e.apply(this,arguments)||this}return t(i,e),i.prototype.execute=function(t){return t=e.prototype.execute.call(this,t),t=this.update(t)},i}(r));i._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-status.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var u;t("BehaviorStatus",void 0),e._RF.push({},"8fed9E3uKNFf59dFBWzHpf9","behavior-status",void 0),function(t){t[t.None=0]="None",t[t.Success=1]="Success",t[t.Failure=2]="Failure",t[t.Running=3]="Running",t[t.Abort=4]="Abort"}(u||(u=t("BehaviorStatus",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-task.ts",["./rollupPluginModLoBabelHelpers.js","cc","./behavior-node-entity.ts","./behavior-status.ts"],(function(t){"use strict";var e,i,o,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy},function(t){o=t.BehaviorEntity},function(t){n=t.BehaviorStatus}],execute:function(){i._RF.push({},"a226aAMoitM67DLVGDh9F5z","behavior-task",void 0);t("BehaviorTask",function(t){function i(){return t.apply(this,arguments)||this}return e(i,t),i.prototype.update=function(e){return e=n.Failure,t.prototype.update.call(this,e)},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-tree-interface.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"effa6ManatGXYSPAP9u5VPm","behavior-tree-interface",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/behavior-tree-utils.ts",["cc","./logger.ts"],(function(e){"use strict";var t,r;return{setters:[function(e){t=e.cclegacy},function(e){r=e.logger}],execute:function(){t._RF.push({},"598daak/ABKr4ZMjXNx1U7L","behavior-tree-utils",void 0);e("BehaviorTreeUtils",function(){function e(){this._targetNodes=null,this._targetNodes=new Map}var t=e.prototype;return t.setTarget=function(e,t){this._targetNodes.set(e,t)},t.getTarget=function(e){if(!e)return null;var t=this._targetNodes.get(e);return t||console.warn("getTarget null. uuid="+e),t},t.getTargetByPath=function(e,t){return t?e.getChildByPath(t):null},t.initAllTarget=function(e,t){if(e&&0!=t.length){for(var n=[e];t.length>0&&n.length>0;)for(var i=n.shift().children,u=0;u<i.length;u++){var a,l=i[u],s=null==(a=l._prefab)?void 0:a.fileId,o=!1;if(s)for(var f=t.length-1;f>=0;f--){var g=t[f];if(g.indexOf(s)>=0){this.setTarget(g,l),t.splice(f,1),o=!0;break}}else{var h=t.indexOf(l.uuid);h>=0&&(this.setTarget(l.uuid,l),t.splice(h,1),o=!0)}o||n.push(l)}t.length>0&&r.warn("Unable to find reference node by uuids: ",t.join(","))}},t.searchTargetByUUID=function(e,t){if(!t||!e)return null;var r=e.uuid==t?e:null;if(r)return r;for(var n=[e];!r&&n.length>0;)for(var i=n.shift().children,u=0;u<i.length;u++){var a=i[u];if(a.uuid==t){r=a;break}n.push(a)}return r},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BehaviorButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.Component}],execute:function(){var i;o._RF.push({},"57329UxP9VOAa8MciTPhIOm","BehaviorButton",void 0);var u=n.ccclass,c=n.disallowMultiple;t("default",u("BehaviorButton")(i=c(i=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o}(r))||i)||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/BehaviorManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main.ts","./behavior-status.ts"],(function(n){"use strict";var e,t,i,s,a,o,r;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,i=n._decorator,s=n.Node,a=n.game,o=n.Component},null,function(n){r=n.BehaviorStatus}],execute:function(){var u,h;t._RF.push({},"aadd8eJap1D2qpqCKlsIqzq","BehaviorManager",void 0);var c=i.ccclass;n("default",c("BehaviorManager")(((h=function(n){function t(){var e;return(e=n.call(this)||this).running=new Set,e.suspend=new Set,e.deltaTime=0,e.ticks=0,e.deltaTime=0,e.ticks=0,e}e(t,n),t.getInstance=function(){if(!t._instance){var n=new s("[BehaviorManager]"),e=n.addComponent(t);t._instance=e,a.addPersistRootNode(n)}return t._instance};var i=t.prototype;return i.addBehavior=function(n){n.startWhenEnabled?this.resumeBehavior(n):this.pauseBehavior(n)},i.removeBehavior=function(n){this.running.has(n)&&this.running.delete(n),this.suspend.has(n)&&this.suspend.delete(n)},i.runBehavior=function(n){this.addBehavior(n)},i.pauseBehavior=function(n){this.suspend.has(n)||(n.onPause(),this.suspend.add(n)),this.running.has(n)&&this.running.delete(n)},i.resumeBehavior=function(n){this.running.has(n)||(n.onResume(),this.running.add(n)),this.suspend.has(n)&&this.suspend.delete(n)},i.stopBehavior=function(n){this.running.has(n)&&(n.onStop(),this.running.delete(n)),this.suspend.has(n)||this.suspend.add(n)},i.tick=function(n){var e=this;this.deltaTime+=n,this.ticks+=1,this.running.forEach((function(t){t.onTick(n)!=r.Running&&(t.restartWhenComplete?t.onRestart():(t.onFinished(),e.stopBehavior(t)))}))},i.update=function(n){this.tick(n)},i.onEnable=function(){var n=this;this.suspend.forEach((function(e){e.isSuspended&&n.resumeBehavior(e)}))},i.onDisable=function(){var n=this;this.running.forEach((function(e){e.pauseWhenDisabled&&n.pauseBehavior(e)}))},t}(o))._instance=null,u=h))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/BehaviorTree.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main.ts","./BehaviorButton.ts","./BehaviorManager.ts","./behavior-status.ts","./behavior-tree-utils.ts","./blackboard.ts","./logger.ts","./behavior-node.ts"],(function(t){"use strict";var e,i,o,n,r,s,a,l,u,c,h,d,f,p,g,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){s=t.cclegacy,a=t._decorator,l=t.JsonAsset,u=t.Component},null,function(t){c=t.default},function(t){h=t.default},function(t){d=t.BehaviorStatus},function(t){f=t.BehaviorTreeUtils},function(t){p=t.Blackboard},function(t){g=t.logger},function(t){b=t.BehaviorNode}],execute:function(){var v,m,y,T,_,B,k,C,w,z,D,R,E,j,A,S;s._RF.push({},"e021fzRX91CZbfisWd9maoE","BehaviorTree",void 0);var W=a.ccclass,x=a.property,O=a.requireComponent,P=a.disallowMultiple,L={logEnter:!1,logExit:!1,logEnable:!1,logDisable:!1,logLoad:!1,logDestroy:!1,logUpdate:!1,logExecute:!0,logAbort:!1};t("default",(v=W("BehaviorTree"),m=O(c),y=x({type:l,tooltip:"绑定行为树编辑器数据资源"}),T=x({tooltip:"节点激活时开始运行"}),_=x({tooltip:"节点禁用时暂停运行"}),B=x({tooltip:"当一次行为树全部结束时，重新开始执行该行为树"}),k=x({tooltip:"当重新开始执行行为树时，重置各节点数据"}),C=x({tooltip:"输出行为树执行日志"}),v(w=m(w=P((D=e((z=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"jsonAsset",D,n(e)),o(e,"startWhenEnabled",R,n(e)),o(e,"pauseWhenDisabled",E,n(e)),o(e,"restartWhenComplete",j,n(e)),o(e,"resetValuesOnRestart",A,n(e)),o(e,"logTaskChanges",S,n(e)),e.isSuspended=!1,e.isCompleted=!1,e.status=d.None,e.blackboard=null,e._utils=null,e._root=null,e.logOptions=void 0,e.duration=0,e.deltaTime=0,e.timestamp=null,e.ticks=0,e}i(e,t);var s=e.prototype;return s.getTargetRoot=function(){return this.node},s.getTargetByUUID=function(t){var e;return null==(e=this._utils)?void 0:e.getTarget(t)},s.getTargetByPath=function(t){var e;return null==(e=this._utils)?void 0:e.getTargetByPath(this.node,t)},s.onLoad=function(){var t;if(null!=(t=this.jsonAsset)&&t.json){this.logOptions=L;var e=this.jsonAsset.json;e.refs;this._utils=new f,this.blackboard=new p(this,e.blackboard),this.loadTree(e)&&this._manager.runBehavior(this)}},s.onDestroy=function(){this._root&&this._manager.removeBehavior(this)},s.loadTree=function(t){var e;if(null==t||!t.root)return g.error("load failed -- tree is invalid"),!1;var i=(null==(e=t.root.config)?void 0:e.label)||{};if(i.uuid){var o=b.deserializeNode(null,t.root,this);if(o)return this._root=o,!0;g.error("Can't find class by uuid: ",i.uuid)}return!1},s.onTick=function(t){if(this._root)return this.deltaTime=t,this.duration+=t,this.ticks+=1,this.logTaskChanges&&g.log("[ Execute BehaviorTree -- "+this._root.options.title+" ]"),this.status=this._root.execute(),this.status;g.error("tick failed -- root is null")},s.onFinished=function(){this.isCompleted=!0},s.onRestart=function(){this.isCompleted=!1,this.resetValuesOnRestart&&this._root.reset()},s.onPause=function(){this.isSuspended=!0},s.onResume=function(){this.isSuspended=!1},s.onStop=function(){this.isSuspended=!1,this.isCompleted=!1},r(e,[{key:"_manager",get:function(){return h.getInstance()}}]),e}(u)).prototype,"jsonAsset",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(z.prototype,"startWhenEnabled",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),E=e(z.prototype,"pauseWhenDisabled",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=e(z.prototype,"restartWhenComplete",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=e(z.prototype,"resetValuesOnRestart",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=e(z.prototype,"logTaskChanges",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=z))||w)||w)||w));s._RF.pop()}}}));

System.register("chunks:///_virtual/blackboard-declaration.ts",["cc"],(function(e){"use strict";var t,a;return{setters:[function(e){t=e.cclegacy,a=e.Enum}],execute:function(){t._RF.push({},"1cc92DWh91DaZ5/gyQo0OKu","blackboard-declaration",void 0);e("ENotifyObserver",a({OnValueChange:"OnValueChange",OnResultChange:"OnResultChange"})),e("EAbortType",a({None:0,Self:-1,LowerPriority:-1,Both:-1})),e("EQueryKey",a({IsEqualTo:0,IsNotEqualTo:-1,IsSet:-1,IsNotSet:-1}));t._RF.pop()}}}));

System.register("chunks:///_virtual/blackboard.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var a,t,r,i;return{setters:[function(e){a=e.inheritsLoose},function(e){t=e.cclegacy,r=e.js,i=e.EventTarget}],execute:function(){t._RF.push({},"95e19cn//tIRo3IxyglgCxw","blackboard",void 0);var l=console;e("Blackboard",function(e){function t(a,t){var r;return(r=e.call(this)||this).context=null,r.variables=null,r.data=null,r.init(a,t),r}a(t,e);var i=t.prototype;return i.init=function(e,a){this.context=e,this.data=a;var t=null==a?void 0:a.variables;if(t){this.variables={};for(var i=0;i<t.length;i++){var n=t[i],s=n.value;if(null!=s&&s.TYPE)if(s.TYPE.startsWith("bt.Shared")){var o=r.getClassByName(s.TYPE);if(o){var u=new o(this,n.name);if("bt.SharedNode"==s.TYPE){if(s.path){var v=e.getTargetByPath(s.path);u.value=v}}else u.value=s.default;this.variables[n.name]=u}else l.error("getClassByName error: ",n)}else l.error("invalid type: ",n);else l.error("invalid type: ",n)}}},i.getVariable=function(e){return this.variables[e]},i.setVariableValue=function(e,a){var t=this.getVariable(e);t?t.value=a:l.error("getVariable error: ",e)},t}(i));t._RF.pop()}}}));

System.register("chunks:///_virtual/BodyStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraHandler.ts","./FreeLookHandler.ts","./TrackedHandler.ts","./BaseStage.ts"],(function(e){"use strict";var n,t,a,r,o,c;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){a=e.CameraHandler},function(e){r=e.FreeLookHandler},function(e){o=e.TrackedHandler},function(e){c=e.BaseStage}],execute:function(){t._RF.push({},"91293QxSQ5IN51MM9zHKjye","BodyStage",void 0);e("BodyStage",function(e){function t(){for(var n,t=arguments.length,c=new Array(t),s=0;s<t;s++)c[s]=arguments[s];return(n=e.call.apply(e,[this].concat(c))||this)._handlers=[new a(n._vcam),new r(n._vcam),new o(n._vcam)],n}n(t,e);var c=t.prototype;return c.onEnable=function(){this._handlers.forEach((function(e){return e.enable=!0}))},c.onDisable=function(){this._handlers.forEach((function(e){return e.enable=!1}))},c.updateStage=function(e){var n=this._vcam.body,t=this._handlers[n.type];t&&t.updateCamera(e)},t}(c));t._RF.pop()}}}));

System.register("chunks:///_virtual/btclass.ts",["cc","./behavior-composite.ts","./behavior-conditional.ts","./behavior-decorator.ts","./behavior-event-declaration.ts","./behavior-parallel.ts","./behavior-selector.ts","./behavior-sequence.ts","./behavior-service.ts","./behavior-task.ts","./shared-variable.ts","./preprocess-class.ts","./tools.ts"],(function(e){"use strict";var s,t,a,l,r,n;return{setters:[function(e){s=e.cclegacy,t=e.js,a=e.CCClass},null,null,null,null,null,null,null,null,null,null,null,function(e){l=e.makeSmartClassDecorator,r=e.CACHE_KEY,n=e.emptyDecoratorFn}],execute:function(){s._RF.push({},"1aabe9fggxCH6/CGCKiwuwr","btclass",void 0);var o=window.cc;e("ccclass",l((function(e,s){var l=t.getSuper(e);l===Object&&(l=null);var n={name:s,extends:l,ctor:e},c=e[r];if(c){var i=c.proto;i&&t.mixin(n,i),e[r]=void 0}var u=a(n),v=o._RF.peek();if(v&&v.cls==e)return t._setClassId(v.uuid,u),u;console.warn("invalid btclass: ",e.name)}))),e("delegate",n);s._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet_Ball.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolMgr.ts","./Hero.ts","./PoolComp.ts","./SoundMgr.ts","./EnumTypes.ts"],(function(t){"use strict";var e,i,a,s,n,o,h,l,c,r,f,u,d;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,a=t._decorator,s=t.Animation,n=t.Vec3,o=t.CurveRange,h=t.Quat,l=t.game},function(t){c=t.PoolMgr},function(t){r=t.Hero},function(t){f=t.PoolComp},function(t){u=t.SoundMgr},function(t){d=t.SoundType}],execute:function(){var S;i._RF.push({},"e6336GcFoBDApdib2B9edGT","Bullet_Ball",void 0);var v=a.ccclass;a.property,t("Bullet_Ball",v("Bullet_Ball")(S=function(t){function i(){for(var e,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))||this).anim=void 0,e.fx=void 0,e.chargeBall=void 0,e.relaseBall=void 0,e.hitEffect1=void 0,e.hitEffect2=void 0,e.nowScale=0,e.maxScale=3,e.isMove=!1,e.dis=0,e.maxDis=100,e.way=new n(0,0,1),e.bulletSpeed=100,e.hitTarget=void 0,e.damage=1,e.borner=void 0,e}e(i,t);var a=i.prototype;return a.firstBorn=function(){this.anim=this.node.getComponent(s),this.chargeBall=this.node.getChildByPath("Charge/Force"),this.relaseBall=this.node.getChildByName("Relase").children[0],this.hitEffect1=this.node.getChildByName("HitEffect").children[0],this.hitEffect2=this.hitEffect1.children[0]},a.clear=function(){},a.init=function(){this.isMove=!1,this.node.active=!0,this.nowScale=0;var t=new n(this.nowScale,this.nowScale,this.nowScale);this.chargeBall.setScale(t),this.relaseBall.setScale(t),this.hitEffect1.setScale(t.multiplyScalar(2)),this.hitEffect2.setScale(t),this.playCharge(),this.borner=null},a.recyle=function(){if(this.isMove=!1,this.node.active=!1,this.fx){var t=new o;t.constant=0,this.fx.rateOverTime=t;var e=new o;e.constant=10,this.fx.rateOverDistance=e}this.dis=0},a.update=function(t){if(this.isMove){var e=this.node.getPosition(),i=t*this.bulletSpeed;e.add(this.way.clone().multiplyScalar(i)),this.node.setPosition(e),this.dis+=i,this.dis+i>=this.maxDis&&this.hitDo()}},a.hitInit=function(t,e,i,a){void 0===i&&(i=1),void 0===a&&(a=100),this.hitTarget=t,this.damage=i,this.maxDis=e,this.bulletSpeed=a,this.isMove=!0,this.playShoot()},a.hitDo=function(){var t=this;if(this.hitTarget){var e=this.hitTarget.getComponent(r);e&&e.hurt(this.damage,this.borner),this.playHitEffect()}this.scheduleOnce((function(){c.instance.recyleObj(t)}),1),this.isMove=!1},a.addScale=function(t){if(this.nowScale+=t,this.nowScale>this.maxScale&&(this.nowScale=this.maxScale),this.fx){var e=new o;e.constant=this.nowScale,this.fx.startSizeX=e,this.fx.startSizeY=e,this.fx.startSizeZ=e}else{var i=new n(this.nowScale,this.nowScale,this.nowScale),a=this.chargeBall.getWorldRotation();h.rotateY(a,a,2*Math.PI*l.deltaTime),h.rotateX(a,a,2*Math.PI*l.deltaTime),this.chargeBall.setWorldRotation(a),this.chargeBall.setScale(i),this.relaseBall.setScale(i),this.hitEffect1.setScale(i.multiplyScalar(2)),this.hitEffect2.setScale(i)}},a.playCharge=function(){if(this.fx){var t=new o;t.constant=20,this.fx.rateOverTime=t,this.nowScale=1;var e=new o;e.constant=this.nowScale,this.fx.startSizeX=e,this.fx.startSizeY=e,this.fx.startSizeZ=e;var i=new o;i.constant=0,this.fx.rateOverDistance=i,this.fx.simulationSpace=1}this.anim.play("Charge"),u.instacne&&u.instacne.playChargeSound()},a.playShoot=function(){if(this.fx){this.isMove=!0;var t=new o;t.constant=0,this.fx.rateOverTime=t;var e=new o;e.constant=10,this.fx.rateOverDistance=e,this.fx.simulationSpace=0}this.anim.play("Relase"),u.instacne&&(u.instacne.stopChargeSound(),u.instacne.playSound(d.LaserShot))},a.playHitEffect=function(){this.anim.play("Hit")},i}(f))||S);i._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet_Line.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolMgr.ts","./PoolComp.ts"],(function(t){"use strict";var n,e,o,i,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator},function(t){i=t.PoolMgr},function(t){c=t.PoolComp}],execute:function(){var r;e._RF.push({},"c9dc5jq3S5EcJo5w0NaI1wQ","Bullet_Line",void 0);var u=o.ccclass;o.property,t("Bullet_Line",u("Bullet_Line")(r=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.firstBorn=function(){},o.clear=function(){},o.init=function(){var t=this;this.node.active=!0,this.scheduleOnce((function(){i.instance.recyleObj(t)}),.5)},o.recyle=function(){this.node.active=!1},o.updateLine=function(){},e}(c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet_ShotGun.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./PoolMgr.ts","./PoolComp.ts"],(function(t){"use strict";var n,e,o,i,c,a,r,s,l,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Animation,c=t.Vec3,a=t.Quat},function(t){r=t.default},function(t){s=t.PoolMgr,l=t.PoolObjType},function(t){u=t.PoolComp}],execute:function(){var f;e._RF.push({},"dbba4e/4b9FYqQaa+EUeq2B","Bullet_ShotGun",void 0);var d=o.ccclass;o.property,t("Bullet_ShotGun",d("Bullet_ShotGun")(f=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).anim=void 0,n}n(e,t);var o=e.prototype;return o.firstBorn=function(){this.anim=this.node.getComponent(i)},o.clear=function(){},o.init=function(){var t=this;this.node.active=!0,this.playShootEffect(),this.scheduleOnce((function(){s.instance.recyleObj(t)}),3)},o.recyle=function(){this.node.active=!1},o.updateLine=function(){},o.playShootEffect=function(){this.anim.play("ShootEffect")},o.playHitEffect=function(t){if(c.squaredDistance(r.player.node.getWorldPosition(),t)<=r.fireEffect_RangeSqr){var n=s.instance.getObj(l.HitEffect);if(n.node){this.node.scene.addChild(n.node),n.node.setWorldPosition(t);var e=this.node.getWorldRotation(),o=new a;a.rotateAroundLocal(o,e,n.node.right,Math.PI/2),n.node.setWorldRotation(o),this.scheduleOnce((function(){s.instance.recyleObj(n)}),1)}}},e}(u))||f);e._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./PoolMgr.ts","./Hero.ts","./PoolComp.ts","./Tool.ts"],(function(t){"use strict";var e,i,o,n,r,s,a,l,c,f,d,u,h,p,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Prefab,l=t.Vec3,c=t.Quat},function(t){f=t.default},function(t){d=t.PoolMgr,u=t.PoolObjType},function(t){h=t.Hero},function(t){p=t.PoolComp},function(t){g=t.default}],execute:function(){var v,y,m,P,b,D,E,M;r._RF.push({},"74f2ekVP91Br55VJLP5IAUD","Bullet",void 0);var T=s.ccclass,w=s.property;t("Bullet",(v=T("Bullet"),y=w({type:a}),m=w({type:a}),v(((M=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,o(e,"hitEffect",D,n(e)),o(e,"fireEffect",E,n(e)),e.isMove=!1,e.dis=0,e.maxDis=100,e.way=new l(0,0,1),e.bulletSpeed=100,e.hitTarget=void 0,e.damage=1,e.borner=void 0,e}i(e,t);var r=e.prototype;return r.firstBorn=function(){},r.clear=function(){},r.init=function(){this.isMove=!0,this.node.active=!0,this.borner=null},r.recyle=function(){this.isMove=!1,this.node.active=!1,this.dis=0},r.update=function(t){if(this.isMove){var e=this.node.getPosition(),i=t*this.bulletSpeed;e.add(this.way.clone().multiplyScalar(i)),this.node.setPosition(e),this.dis+=i,this.dis+i>=this.maxDis&&this.hitDo()}},r.hitInit=function(t,e,i,o){void 0===i&&(i=1),void 0===o&&(o=100),this.hitTarget=t,this.damage=i,this.maxDis=e,this.bulletSpeed=o,this.isMove=!0},r.hitDo=function(){var t=this;if(this.hitTarget){var e=this.hitTarget.getComponent(h);e&&e.hurt(this.damage,this.borner),this.playHitEffect(this.node.getWorldPosition())}this.scheduleOnce((function(){d.instance.recyleObj(t)})),this.isMove=!1},r.playShootEffect=function(t,e){if(l.squaredDistance(f.player.node.getWorldPosition(),t)<=f.fireEffect_RangeSqr){var i=d.instance.getObj(u.FireEffect);this.node.scene.addChild(i.node),i.node.setWorldPosition(t),i.node.lookAt(e);var o=i.node.getRotation(),n=new c;c.rotateAroundLocal(n,o,new l(0,0,-1),g.randomNumber(-Math.PI,Math.PI)),i.node.setRotation(n)}},r.playHitEffect=function(t){if(l.squaredDistance(f.player.node.getWorldPosition(),t)<=f.fireEffect_RangeSqr){if((new Date).getTime()-e.lastHitEffectTime<.032)return;e.lastHitEffectTime=(new Date).getTime();var i=d.instance.getObj(u.HitEffect);this.node.scene.addChild(i.node),i.node.setWorldPosition(t);var o=this.node.getWorldRotation(),n=new c;c.rotateAroundLocal(n,o,this.node.right,Math.PI/2),i.node.setWorldRotation(n)}},e}(p)).lastHitEffectTime=0,D=e((b=M).prototype,"hitEffect",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(b.prototype,"fireEffect",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=b))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/CameraHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Base.ts"],(function(e){"use strict";var t,n,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy},function(e){r=e.Base}],execute:function(){n._RF.push({},"afacb7lEPtHtbhSDdmkKpy2","CameraHandler",void 0);e("CameraHandler",function(e){function n(t){var n;return(n=e.call(this)||this)._vcam=t,n}return t(n,e),n.prototype.updateCamera=function(e){},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/CasingController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,r,n,o,a,l,c,u,s,m,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Vec3,c=e.randomRange,u=e.RigidBody,s=e.game,m=e.Quat,p=e.Component}],execute:function(){var h,f,b,y,g,F,d,x,w,R,z;o._RF.push({},"ca719q/Yr9HmaRsA1tO8Z7+","CasingController",void 0);var _=a.ccclass,C=a.property;e("CasingController",_("CasingController")((b=i((f=function(e){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=e.call.apply(e,[this].concat(o))||this,r(i,"minXForce",b,n(i)),r(i,"maxXForce",y,n(i)),r(i,"minYForce",g,n(i)),r(i,"maxYForce",F,n(i)),r(i,"minZForce",d,n(i)),r(i,"maxZForce",x,n(i)),r(i,"minRotation",w,n(i)),r(i,"maxRotation",R,n(i)),r(i,"despawnTime",z,n(i)),i._euler=new l(c(-180,180),c(-180,180),0),i}t(i,e);var o=i.prototype;return o.start=function(){var e=this,i=this.getComponent(u);i&&(i.applyLocalTorque(new l(c(this.minRotation,this.maxRotation),c(this.minRotation,this.maxRotation),c(this.minRotation,this.maxRotation))),i.applyLocalForce(new l(c(this.minXForce,this.maxXForce),c(this.minYForce,this.maxYForce),c(this.minZForce,this.maxZForce)))),this.scheduleOnce((function(){e.node.destroy(),s.emit("__playCasingSound")}),this.despawnTime)},o.update=function(e){this._euler.x+=2500*e,this._euler.y+=2500*e,this.node.rotation=m.fromEuler(this.node.rotation,this._euler.x,this._euler.y,this._euler.z)},i}(p)).prototype,"minXForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 25}}),y=i(f.prototype,"maxXForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),g=i(f.prototype,"minYForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),F=i(f.prototype,"maxYForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),d=i(f.prototype,"minZForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-12}}),x=i(f.prototype,"maxZForce",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 12}}),w=i(f.prototype,"minRotation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-360}}),R=i(f.prototype,"maxRotation",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),z=i(f.prototype,"despawnTime",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=f))||h);o._RF.pop()}}}));

System.register("chunks:///_virtual/CharactorController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts"],(function(t){"use strict";var e,i,o,n,r,a,s,c,d,h,_,p,l,u,f,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Vec3,c=t.Node,d=t.Quat,h=t.SkeletalAnimation,_=t.systemEvent,p=t.SystemEvent,l=t.lerp,u=t.KeyCode,f=t.Component},function(t){m=t.EPSILON}],execute:function(){var S,v,y,E,T;r._RF.push({},"7746a+UgodEsIQnpKZLVysP","CharactorController",void 0);var g,K=a.ccclass,D=a.property;!function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=4]="LEFT",t[t.RIGHT=8]="RIGHT"}(g||(g={}));var N=new s;t("CharactorController",(S=K("CharactorController"),v=D(c),S((T=e((E=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"cameraNode",T,n(e)),e._animation=null,e._state="Idle",e._rotation=new d,e._movingSpeed=0,e._rotateSpeed=0,e._movingSpeedTo=0,e._rotationSpeedTo=0,e._direction=0,e}i(e,t);var r=e.prototype;return r.start=function(){null===this.cameraNode&&(this.cameraNode=this._getRenderScene().cameras[0].node)},r.onEnable=function(){this._animation=this.getComponent(h),_.on(p.EventType.KEY_DOWN,this._onKeyDown,this),_.on(p.EventType.KEY_UP,this._onKeyUp,this)},r.onDisable=function(){_.off(p.EventType.KEY_DOWN,this._onKeyDown,this),_.off(p.EventType.KEY_UP,this._onKeyUp,this)},r.update=function(t){this._rotateSpeed=l(this._rotateSpeed,this._rotationSpeedTo,10*t),this._movingSpeed=l(this._movingSpeed,this._movingSpeedTo,5*t),this.node.rotation=this.node.rotation.lerp(this._rotation,this._rotateSpeed*t),this.node.position=this.node.position.add(s.multiplyScalar(N,this.node.forward.negative(),this._movingSpeed*t))},r._onKeyDown=function(t){var e=this._direction;switch(t.keyCode){case u.KEY_W:e|=g.UP;break;case u.KEY_S:e|=g.DOWN;break;case u.KEY_A:e|=g.LEFT;break;case u.KEY_D:e|=g.RIGHT}this._updateDirection(e)},r._onKeyUp=function(t){var e=this._direction;switch(t.keyCode){case u.KEY_W:e&=~g.UP;break;case u.KEY_S:e&=~g.DOWN;break;case u.KEY_A:e&=~g.LEFT;break;case u.KEY_D:e&=~g.RIGHT}this._updateDirection(e)},r._updateDirection=function(t){if(this._direction!==t){if(this._direction=t,!this.cameraNode)return;var e=this.cameraNode.forward;N.set(0,0,0),this._direction&g.UP&&N.add3f(e.x,0,e.z),this._direction&g.DOWN&&N.add3f(-e.x,0,-e.z),this._direction&g.LEFT&&N.add3f(e.z,0,-e.x),this._direction&g.RIGHT&&N.add3f(-e.z,0,e.x),this._direction>0&&N.lengthSqr()>m&&(d.fromViewUp(this._rotation,N.normalize()),this._movingSpeedTo=4,this._rotationSpeedTo=5,this._setState("Running")),0===this._direction&&(this._movingSpeedTo=this._rotationSpeedTo=0,this._movingSpeed=this._rotateSpeed=0,this._setState("Idle"))}},r._setState=function(t){this._state!==t&&(this._state=t,this._animation&&this._animation.crossFade(t))},e}(f)).prototype,"cameraNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=E))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/CinestaionImpulseSource.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./Math.ts","./VCamNoise.ts","./NoiseGenerator.ts"],(function(e){"use strict";var i,t,n,o,r,s,a,u,c,l,p,m,f,h;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,s=e._decorator,a=e.Component},function(e){u=e.cinestation},function(e){c=e.EPSILON,l=e.quarticDamp},function(e){p=e.VCamNoise,m=e.NoiseType},function(e){f=e.NoiseGenerator,h=e.NoiseProfile}],execute:function(){var y,_,d,D,I,g;r._RF.push({},"a2054HVIkhGUYOxTPABQa7g","CinestaionImpulseSource",void 0);var v=s.ccclass,b=s.property;e("CinestaionImpulseSource",(y=v("CinestaionImpulseSource"),_=b({type:p}),y((I=i((D=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return(i=e.call.apply(e,[this].concat(r))||this)._generator=new f,i._impluseDecay=0,n(i,"noise",I,o(i)),n(i,"decayTime",g,o(i)),i}t(i,e);var r=i.prototype;return r.onLoad=function(){this.node.on("setImpulse",this._setImpulse,this)},r._setImpulse=function(e){void 0===e&&(e=1),this._impluseDecay=e},r.onEnable=function(){u.addImpulseSource(this)},r.onDisable=function(){u.removeImpulseSource(this)},r.generateImpulse=function(e){if(this._impluseDecay<=c)return null;this._impluseDecay=l(this._impluseDecay,0,this.decayTime,e);for(var i=this._generator.fractalNoise(this.noise,e),t=0;t<i.length;t++)i[t]*=this._impluseDecay;return i},i}(a)).prototype,"noise",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e=new p).type=m.Perlin,e.profile=h.Shake_6D,e.amplitudeGain=.5,e.frequncyGain=4,e;var e}}),g=i(D.prototype,"decayTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),d=D))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationBrain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./CinestationShareAssets.ts","./Visualization.ts"],(function(e){"use strict";var t,i,n,a,o,r,s,l,c,u,d,p,f,m,_,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,n=e.inheritsLoose,a=e.createClass},function(e){o=e.cclegacy,r=e._decorator,s=e.Enum,l=e.Vec2,c=e.Camera,u=e.utils,d=e.primitives,p=e.clamp01,f=e.lerp},function(e){m=e.cinestation},function(e){_=e.cinestationShareAssets},function(e){C=e.Visualization}],execute:function(){var h,b,y,v,g,D,P,B,T,w,R,M;e("CinestationBlendStyle",void 0),o._RF.push({},"74f8188NbxO264ejP51X1vr","CinestationBrain",void 0);var O,Z=r.ccclass,E=r.property,I=r.executionOrder,L=r.executeInEditMode;!function(e){e[e.Linear=0]="Linear"}(O||(O=e("CinestationBlendStyle",{})));var A=e("CinestationBlendDefinition",(h=Z("CinestationBlendDefinition"),b=E({tooltip:"混合插值类型。\n目前仅支持线行插值，后续会支持更多",type:s(O)}),y=E({tooltip:"切换时间。数值为0时，为直接切换"}),h((D=t((g=function(){i(this,"style",D,this),i(this,"time",P,this)}).prototype,"style",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return O.Linear}}),P=t(g.prototype,"time",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 4}}),v=g))||v)),S=new l;e("CinestationBrain",(B=Z("CinestationBrain"),T=I(-1),w=E(A),B(R=L(R=T((t((M=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(t=e.call.apply(e,[this].concat(n))||this).__selectedCamera=null,t._material=_.viewMaterial,t._brainBlend=new A,t._visibleInRuntime=!0,t}n(t,e);var i=t.prototype;return i.onLoad=function(){m.mainCamera=this.getComponent(c),m.lerpTime=this._brainBlend.time},i._updateMesh=function(e){return u.createMesh(d.quad(),e)},i.update=function(t){e.prototype.update.call(this,t);var i=this._getActiveCamera();if(null!=i){i.updateCamera(t);var n=m.blendTime>-1?m.blendTime:this.brainBlend.time;m.lerpTime<n?(m.lerpTime+=t,this._lerpToMainCamera(i,p(m.lerpTime/this._brainBlend.time))):this._applyToMainCamera(i)}},i._getActiveCamera=function(){var e=m.vcam=m.getPriorCamera();return this.visible=CC_EDITOR?!!this.__selectedCamera:e&&e.debug,this._setDebugProperties(CC_EDITOR?this.__selectedCamera:e),e},i._setDebugProperties=function(e){if(e&&(CC_EDITOR||e.debug)){if(e._composerChanged){e._composerChanged=!1;var t=e.aim.composer;_.__setDebugProperty("deadZoneWidth",t.deadZoneWidth),_.__setDebugProperty("deadZoneHeight",t.deadZoneHeight),_.__setDebugProperty("softZoneWidth",t.softZoneWidth),_.__setDebugProperty("softZoneHeight",t.softZoneHeight)}e.lookAt&&_.__setDebugProperty("lookatPoint",m.worldToScreen(S,e.lookaheadPosition))}},i._lerpToMainCamera=function(e,t){if(!CC_EDITOR&&m.mainCamera){var i=m.mainCamera,n=e;switch(this._brainBlend.style){case O.Linear:i.node.worldPosition=i.node.worldPosition.lerp(n.finalPosition,t),i.node.worldRotation=i.node.worldRotation.lerp(n.finalRotation,t),i.fov=f(i.fov,n.lens.fov,t),i.near=f(i.near,n.lens.near,t),i.far=f(i.far,n.lens.far,t)}}},i._applyToMainCamera=function(e){if(!CC_EDITOR&&m.mainCamera){var t=m.mainCamera,i=e;t.node.worldPosition=i.finalPosition,t.node.worldRotation=i.finalRotation,t.fov=i.lens.fov,t.near=i.lens.near,t.far=i.lens.far}},a(t,[{key:"brainBlend",get:function(){return this._brainBlend}}]),t}(C)).prototype,"brainBlend",[w],Object.getOwnPropertyDescriptor(M.prototype,"brainBlend"),M.prototype),R=M))||R)||R)||R));o._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,a;return{setters:[function(e){t=e.createClass,i=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e.Vec3}],execute:function(){r._RF.push({},"8557eOKYVBCHKKtG3JMOZtJ","CinestationData",void 0);var s=new a;e("cinestation",new(function(){function e(){this._vcam=null,this._vcamSolo=null,this._virtualCameras=[],this._impulseSources=[],this.lerpTime=0,this.blendTime=-1,this.mainCamera=null}var r=e.prototype;return r.activeCamera=function(e,t){void 0===t&&(t=-1),this._vcamSolo!==e&&(this._vcamSolo=e,this.lerpTime=0,this.blendTime=t)},r.addCamera=function(e){-1===this._virtualCameras.indexOf(e)&&this._virtualCameras.push(e)},r.removeCamera=function(e){var t=this._virtualCameras.indexOf(e);-1!==t&&this._virtualCameras.splice(t,1)},r.addImpulseSource=function(e){-1===this._impulseSources.indexOf(e)&&this._impulseSources.push(e)},r.removeImpulseSource=function(e){var t=this._impulseSources.indexOf(e);-1!==t&&this._impulseSources.splice(t,1)},r.getPriorCamera=function(){return this._vcamSolo||this._virtualCameras.filter((function(e){return e.enabled})).sort((function(e,t){return t.priority-e.priority}))[0]},r.worldToScreen=function(e,t){if(this.mainCamera){var i=CC_EDITOR?cce.Camera.camera.camera:this.mainCamera.camera,r=a.transformMat4(s,t,i.matViewProj).add(a.ONE).multiplyScalar(.5);e.set(r.x,r.y)}return e},t(e,[{key:"vcam",get:function(){return null===this._vcam&&(this._vcam=this.getPriorCamera()),this._vcam},set:function(e){if(this._vcam!==e){this._vcam=e;for(var t,r=i(this._virtualCameras);!(t=r()).done;){var a=t.value;a===e?a.onActive():a.onDeActive()}}}},{key:"vcams",get:function(){return this._virtualCameras}},{key:"impulseSources",get:function(){return this._impulseSources}}]),e}()));r._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationShareAssets.ts",["cc","./Effect.ts","./Effect3_4.ts"],(function(e){"use strict";var t,i,n,s,a,r,c,o,f;return{setters:[function(e){t=e.cclegacy,i=e.Material,n=e.game,s=e.Game,a=e.gfx,r=e.EffectAsset,c=e.VERSION},function(e){o=e.Effect},function(e){f=e.Effect3_4}],execute:function(){t._RF.push({},"53319txRnNOJ7hdwo/uO++u","CinestationShareAssets",void 0);var u=new i;u._uuid="cinestation-line-material";var E=new i;E._uuid="cinestation-view-material",n.on(s.EVENT_GAME_INITED,(function(){u.initialize({effectName:"unlit",defines:{USE_VERTEX_COLOR:!0},states:{primitive:a.PrimitiveMode.LINE_LIST}}),u.passes.forEach((function(e){return e.tryCompile()}));var e=Object.assign(new r,c>"3.4.0"?f:o);e.onLoaded(),E.initialize({effectAsset:e}),E.passes.forEach((function(e){return e.tryCompile()}))}));e("cinestationShareAssets",new(function(){function e(){this.viewMaterial=E,this.lineMaterial=u}return e.prototype.__setDebugProperty=function(e,t){this.viewMaterial.setProperty(e,t)},e}()));t._RF.pop()}}}));

System.register("chunks:///_virtual/CinestationSmoothPath.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./Visualization.ts"],(function(t){"use strict";var o,e,n,i,r,s,a,l,h,c,d,u,p,_,f,g,v,P;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,s=t.createClass},function(t){a=t.cclegacy,l=t._decorator,h=t.Vec3,c=t.Vec2,d=t.Node,u=t.Vec4,p=t.clamp,_=t.Color,f=t.utils},function(t){g=t.Spline,v=t.Vec3_closestPointOnSegment},function(t){P=t.Visualization}],execute:function(){var y,C,m,w,x,b,M,z,D;a._RF.push({},"234b1QMPE9PjaikyMraAdcc","CinestationSmoothPath",void 0);var A=l.ccclass,S=l.property,E=l.executeInEditMode,L=new h,I=new h,N=new h,O=new c;t("CinestationSmoothPath",(y=A("CinestationSmoothPath"),C=S({visible:!1}),m=S({visible:!1}),w=S({visible:!1}),y(x=E((M=o((b=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return o=t.call.apply(t,[this].concat(r))||this,n(o,"_looped",M,i(o)),n(o,"_localControlPoints1",z,i(o)),n(o,"_localControlPoints2",D,i(o)),o}e(o,t);var a=o.prototype;return a.onLoad=function(){if(CC_EDITOR){this.node.on(d.EventType.CHILD_ADDED,this._onChildAdded,this),this.node.on(d.EventType.CHILD_REMOVED,this._onNodeChanged,this);for(var t,o=r(this.node.children);!(t=o()).done;){var e=t.value;this._onNodeChanged(e)}}},a._onChildAdded=function(t){var o=this.node.children,e=o.length;if(2===e)t.position=new h(o[0].position).add3f(0,0,5);else if(e>2){var n=o[e-3].position,i=o[e-2].position,r=new h(i).subtract(n).normalize().multiplyScalar(5);t.position=r.add(i)}this._onNodeChanged(t)},a._onNodeChanged=function(t){var o=this;t.on(d.EventType.TRANSFORM_CHANGED,(function(){o._modelChanged=!0})),this._modelChanged=!0},a._updateControlPoints=function(){var t=this.node.children,o=t.length;if(o>1){for(var e=new Array(o),n=new Array(o),i=new Array(o),r=0;r<o;r++){e[r]=new u,n[r]=new u;var s=t[r].position;i[r]=new u(s.x,s.y,s.z,0)}this.looped?g.ComputeSmoothControlPointsLooped(i,e,n):g.ComputeSmoothControlPoints(i,e,n),this._localControlPoints1.length=o,this._localControlPoints2.length=o;for(var a=0;a<o;a++)this._localControlPoints1[a]=new h(e[a].x,e[a].y,e[a].z),this._localControlPoints2[a]=new h(n[a].x,n[a].y,n[a].z)}},a._getBoundingIndices=function(t,o){t=this._clampProgress(t);var e=this.node.children.length;return e<2?o.x=o.y=0:(o.x=Math.floor(t),o.x>=e&&(t-=this._maxProgress,o.x=0),o.y=o.x+1,o.y==e&&(this.looped?o.y=0:(--o.y,--o.x))),t},a._clampProgress=function(t){var o=this._maxProgress;return this._looped&&o>0?((t%=o)<0&&(t+=o),t):p(t,0,o)},a.evaluatePosition=function(t,o){return this.evaluateLocalPosition(t,o).add(this.node.worldPosition)},a.evaluateLocalPosition=function(t,o){var e=this.node.children;if(0===e.length)return t.set(this.node.position);var n=O.set(0,0);return o=this._getBoundingIndices(o,n),n.x===n.y?t.set(e[n.x].position):g.Bezier3(t,o-n.x,e[n.x].position,this._localControlPoints1[n.x],this._localControlPoints2[n.x],e[n.y].position)},a.findClosestPoint=function(t,o,e,n){var i=this._minProgress,r=this._maxProgress;if(e>=0){var s=Math.floor(Math.min(e,Math.max(1,(r-i)/2)));i=o-s,r=o+s+1,this.looped||(i=Math.max(i,this._minProgress),r=Math.min(r,this._maxProgress))}for(var a=o,l=1/0,c=1/p(n,1,100),d=this.evaluatePosition(L,0),u=i+c;u<=r;u+=c){var _=this.evaluatePosition(I,u),f=v(t,d,_),g=h.squaredDistance(t,h.lerp(N,d,_,f));g<l&&(l=g,a=u-(1-f)*c),d.set(_)}return a},a._updateMesh=function(t){this._updateControlPoints();for(var o=[],e=this.node.children,n=0;n<e.length;n+=.1)o.push(this.evaluateLocalPosition(new h,n));var i=[],r=[],s=[],a=[],l=new _(0,1,0,1),c=new _(.3,.3,.3,1);function d(t,o,e){t&&o&&(h.toArray(i,t,i.length),h.toArray(i,o,i.length),r.push(e.r,e.g,e.b,e.a),r.push(e.r,e.g,e.b,e.a))}for(var u=0;u+1<o.length;u++){var p=o[u],g=o[u+1],v=new h(g).subtract(p).normalize(),P=new h(v.z,v.y,-v.x).multiplyScalar(.1);0===u&&(s.push(new h(p).subtract(P)),a.push(new h(p).add(P))),s.push(new h(g).subtract(P)),a.push(new h(g).add(P)),d(new h(p).subtract(P),new h(p).add(P),l),d(p,g,c)}this._looped&&d(o[o.length-1],o[0],c);for(var y=0;y+1<s.length;y++)d(s[y],s[y+1],l);this._looped&&d(s[s.length-1],s[0],l);for(var C=0;C+1<a.length;C++)d(a[C],a[C+1],l);return this._looped&&d(a[a.length-1],a[0],l),f.createMesh({positions:i,colors:r},t)},s(o,[{key:"looped",get:function(){return this._looped},set:function(t){this._looped!==t&&(this._looped=t,this._modelChanged=!0)}},{key:"_minProgress",get:function(){return 0}},{key:"_maxProgress",get:function(){var t=this.node.children.length-1;return t<1?0:this.looped?t+1:t}}]),o}(P)).prototype,"_looped",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=o(b.prototype,"_localControlPoints1",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=o(b.prototype,"_localControlPoints2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o(b.prototype,"looped",[S],Object.getOwnPropertyDescriptor(b.prototype,"looped"),b.prototype),x=b))||x)||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/CircleBar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,l,a,n,o,s,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,l=e.assertThisInitialized,a=e.createClass},function(e){n=e.cclegacy,o=e._decorator,s=e.Sprite,c=e.CCFloat,p=e.Component}],execute:function(){var u,y,v,f,h,b;n._RF.push({},"69119QstPhOxbARLgmGmk+H","CircleBar",void 0);var C=o.ccclass,g=o.property;e("CircleBar",(u=C("CircleBar"),y=g({type:s,visible:!0}),v=g({type:c,visible:!0,displayName:"进度"}),u((b=t((h=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return t=e.call.apply(e,[this].concat(a))||this,i(t,"bar",b,l(t)),t._value=0,t}return r(t,e),a(t,[{key:"value",get:function(){return this._value},set:function(e){if(this._value=e,this.value>1?this._value=1:this.value<0&&(this._value=0),this.bar){var t=this.bar.getComponent(s);t.type=s.Type.FILLED,t.fillCenter.x=.5,t.fillCenter.y=.5,t.fillType=s.FillType.RADIAL,t.fillStart=.25,t.fillRange=-this._value}}}]),t}(p)).prototype,"bar",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(h.prototype,"value",[v],Object.getOwnPropertyDescriptor(h.prototype,"value"),h.prototype),f=h))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/colliderCheck.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,r,c,n,s,i,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.createClass},function(e){c=e.cclegacy,n=e._decorator,s=e.CCFloat,i=e.RigidBody,l=e.Component}],execute:function(){var p,a,u,h;c._RF.push({},"74ba24tARNICI7dsbmSIo62","colliderCheck",void 0);var y=n.ccclass,g=n.property;e("colliderCheck",(p=y("colliderCheck"),a=g({type:s,visible:!0,displayName:"随便修改一下值触发"}),p((t((h=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))||this)._value=0,t}o(t,e);var c=t.prototype;return c.start=function(){this.check()},c.check=function(){console.log("mask",this.getComponent(i).getMask()),console.log("group",this.getComponent(i).getGroup()),console.log("type",this.getComponent(i).type)},r(t,[{key:"value",get:function(){return this._value},set:function(e){this.check(),this.destroy()}}]),t}(l)).prototype,"value",[a],Object.getOwnPropertyDescriptor(h.prototype,"value"),h.prototype),u=h))||u));c._RF.pop()}}}));

System.register("chunks:///_virtual/ComposerHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./Math.ts","./Predictor.ts","./CameraHandler.ts"],(function(o){"use strict";var t,a,e,n,r,i,s,c,d;return{setters:[function(o){t=o.inheritsLoose},function(o){a=o.cclegacy,e=o.Vec3,n=o.Quat},function(o){r=o.cinestation},function(o){i=o.Vec4_closeTo,s=o.SmoothDamper},function(o){c=o.Predictor},function(o){d=o.CameraHandler}],execute:function(){a._RF.push({},"ed040GtNkhPZ5yR4yNDSf5W","ComposerHandler",void 0);var l=new e,m=new e,p=new n;o("ComposerHandler",function(o){function a(){for(var t,a=arguments.length,e=new Array(a),r=0;r<a;r++)e[r]=arguments[r];return(t=o.call.apply(o,[this].concat(e))||this)._predictor=new c,t._rotation=new n,t._smoothDamper=new s,t}t(a,o);var d=a.prototype;return d.updateCamera=function(o){var t=this._vcam;if(t.lookAt){var a=t.aim.composer;e.add(m,t.lookAt.position,a.trackedObjectOffset),t.lookAt.parent&&m.add(t.lookAt.parent.worldPosition),this._predictor.predictPosition(t.lookaheadPosition,m,a.lookaheadDamping,a.lookaheadTime,o),this._clampWithDeadZone(m,t.lookaheadPosition),n.fromViewUp(this._rotation,e.subtract(m,t.node.worldPosition,m).normalize()),this._smoothDamper.Quat_smoothDamp(p,t.node.worldRotation,this._rotation,a.lookatDamping,o),i(p,t.node.worldRotation)||(t.node.worldRotation=p)}},d._clampWithDeadZone=function(o,t){var a=this._vcam.aim.composer,n=r.mainCamera;if(n){var i=n.camera,s=e.transformMat4(l,t,i.matViewProj).add(e.ONE).multiplyScalar(.5),c=a.deadZoneWidth/2,d=a.deadZoneHeight/2;o.set(.5,.5,s.z),s.x<.5-c&&(o.x+=s.x-.5+c),s.x>.5+c&&(o.x+=s.x-.5-c),s.y<.5-d&&(o.y+=s.y-.5+d),s.y>.5+d&&(o.y+=s.y-.5-d),o.multiplyScalar(2).subtract(e.ONE),o.transformMat4(i.matViewProjInv)}return o},a}(d));a._RF.pop()}}}));

System.register("chunks:///_virtual/Conditional.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./behavior-conditional.ts"],(function(t){"use strict";var n,i,o,e,c;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy},null,function(t){o=t.ccclass,e=t.delegate},function(t){c=t.BehaviorConditional}],execute:function(){var r;i._RF.push({},"4d930L3FnhCv71nra+1BGRk","Conditional",void 0);t("Conditional",o("bt.Conditional")(r=e()(r=function(t){function i(){return t.apply(this,arguments)||this}return n(i,t),i.prototype.execute=function(n){return t.prototype.execute.call(this,n)},i}(c))||r)||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/ConditionalFilter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./behavior-status.ts","./btclass.ts","./property.ts","./shared-boolean.ts","./behavior-conditional.ts"],(function(t){"use strict";var e,i,r,n,o,l,a,s,c,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy},null,function(t){l=t.BehaviorStatus},function(t){a=t.ccclass,s=t.delegate},function(t){c=t.property},function(t){u=t.SharedBoolean},function(t){p=t.BehaviorConditional}],execute:function(){var f,h,d,y,v,b;o._RF.push({},"af7c4rIqLhGK6XwHK/SZ/ry","ConditionalFilter",void 0);t("ConditionalFilter",(f=a("bt.ConditionalFilter"),h=s(),d=c({type:u,tooltip:"Filter by shared variable / 根据共享变量值进行条件过滤"}),f(y=h((b=e((v=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"filter",b,n(e)),e}return i(e,t),e.prototype.execute=function(e){var i;this.filter&&(e=null!=(i=this.filter)&&i.value?l.Success:l.Failure);return t.prototype.execute.call(this,e)},e}(p)).prototype,"filter",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=v))||y)||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/ConditionalInverter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./behavior-status.ts","./btclass.ts","./behavior-conditional.ts"],(function(t){"use strict";var n,e,i,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},null,function(t){i=t.BehaviorStatus},function(t){o=t.ccclass},function(t){r=t.BehaviorConditional}],execute:function(){var s;e._RF.push({},"d859ahQW6VIxatfaZ96fDkw","ConditionalInverter",void 0);t("ConditionalInverter",o("bt.ConditionalInverter")(s=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.execute=function(n){return n==i.Success?n=i.Failure:n==i.Failure&&(n=i.Success),t.prototype.execute.call(this,n)},e}(r))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/CustomAdMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts"],(function(t){"use strict";var r,n,e;return{setters:[function(t){r=t.createClass},function(t){n=t.cclegacy},function(t){e=t.default}],execute:function(){n._RF.push({},"ec419s347BAg5UnCauMm6Br","CustomAdMgr",void 0),t("default",function(){function t(){this.gridIdArr=[],this.gridAdArr=[],this.totalCount=1,this.createIndex=0,this.showTimes=0,this.currentIndex=0}var n=t.prototype;return n.initCustomAd=function(){this.gridIdArr=e.instance.dataConfig.front_more_gezi_list,this.gridIdArr&&(this.showTimes=0,this.currentIndex=0,this.createIndex=0,this.gridIdArr=e.instance.shuffleArr(this.gridIdArr),this.totalCount=this.gridIdArr.length,this.createCustomAd())},n.getCustomAd=function(t,r,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var s=window.wx.createCustomAd({adUnitId:t,adIntervals:e.instance.dataConfig.front_more_gezi_time/1e3,style:r});return s.onError((function(t){console.log("全屏格子加载失败"),i&&i(),s.offError(),s.offLoad()})),s.onLoad((function(){console.log("全屏格子加载成功"),n&&n(),s.offError(),s.offLoad()})),s},n.createCustomAd=function(){var t=this;if(!(this.createIndex>=this.gridIdArr.length||this.gridAdArr.length>=this.totalCount))var r=this.getCustomAd(this.gridIdArr[this.createIndex],{left:0,top:70},(function(){t.gridAdArr.push(r),t.createIndex++,t.createCustomAd()}),(function(){t.createIndex++,t.createCustomAd()}))},n.showGrid=function(){},n.hideGrid=function(){},n.getIsError=function(){return this.gridAdArr.length<=0},n.getIsShow=function(){return!(this.gridAdArr.length<=0)&&this.gridAdArr[this.currentIndex].isShow()},r(t,[{key:"sysInfo",get:function(){return window.wx.getSystemInfoSync()}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/CustomInput.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,n,s,u,c,r;return{setters:[function(t){e=t.createClass},function(t){o=t.cclegacy,i=t.director,n=t.Director,s=t.systemEvent,u=t.SystemEvent,c=t.EventMouse,r=t.KeyCode}],execute:function(){o._RF.push({},"06d4dFwUDhKvpqVu9cegQYi","CustomInput",void 0);t("customInput",new(function(){function t(){this._initialized=!1,this._mouseLeft=0,this._mouseRight=0,this._mouseX=0,this._mouseY=0,this._mouseSensitivity=1,this._horizontal=0,this._vertical=0,this._buttons={}}var o=t.prototype;return o.getButton=function(t){return this._buttons[t]||0},o.initialize=function(t){void 0===t&&(t=!1),0==this._initialized&&(this._initialized=!0,t?this._requestPointerLock():this._registEvents(),i.on(n.EVENT_AFTER_UPDATE,this._onAfterUpdate,this))},o._requestPointerLock=function(){var t,e=this,o=null==(t=i.root)?void 0:t.device,n=o.canvas||o.gl&&o.gl.canvas;if(n){n.requestPointerLock=n.requestPointerLock||n.mozRequestPointerLock||n.webkitRequestPointerLock,n.onclick=function(){n.requestPointerLock()};var s=function(){document.pointerLockElement===n||document.mozPointerLockElement===n||document.webkitPointerLockElement?e._registEvents():e._unregistEvents()};document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.addEventListener("pointerlockchange",s,!1),document.addEventListener("mozpointerlockchange",s,!1),document.addEventListener("webkitpointerlockchange",s,!1)}},o._registEvents=function(){s.on(u.EventType.MOUSE_DOWN,this._onMouseDown,this),s.on(u.EventType.MOUSE_UP,this._onMouseUp,this),s.on(u.EventType.MOUSE_MOVE,this._onMouseMove,this),s.on(u.EventType.KEY_DOWN,this._onKeyDown,this),s.on(u.EventType.KEY_UP,this._onKeyUp,this)},o._unregistEvents=function(){s.off(u.EventType.MOUSE_DOWN,this._onMouseDown,this),s.off(u.EventType.MOUSE_UP,this._onMouseUp,this),s.off(u.EventType.MOUSE_MOVE,this._onMouseMove,this),s.off(u.EventType.KEY_DOWN,this._onKeyDown,this),s.off(u.EventType.KEY_UP,this._onKeyUp,this)},o._onMouseDown=function(t){switch(t.getButton()){case c.BUTTON_LEFT:this._mouseLeft=1;break;case c.BUTTON_RIGHT:this._mouseRight=1}},o._onMouseUp=function(t){switch(t.getButton()){case c.BUTTON_LEFT:this._mouseLeft=0;break;case c.BUTTON_RIGHT:this._mouseRight=0}},o._onMouseMove=function(t){this._mouseX=t.getDeltaX()*this._mouseSensitivity,this._mouseY=t.getDeltaY()*this._mouseSensitivity},o._onKeyDown=function(t){switch(t.keyCode){case r.KEY_W:this._vertical=1;break;case r.KEY_S:this._vertical=-1;break;case r.KEY_A:this._horizontal=1;break;case r.KEY_D:this._horizontal=-1;break;default:this._buttons[t.keyCode]=1}},o._onKeyUp=function(t){switch(t.keyCode){case r.KEY_W:case r.KEY_S:this._vertical=0;break;case r.KEY_A:case r.KEY_D:this._horizontal=0;break;default:this._buttons[t.keyCode]=0}},o._onAfterUpdate=function(){this._mouseX=0,this._mouseY=0},e(t,[{key:"mouseLeft",get:function(){return this._mouseLeft}},{key:"mouseRight",get:function(){return this._mouseRight}},{key:"mouseX",get:function(){return this._mouseX}},{key:"mouseY",get:function(){return this._mouseY}},{key:"horizontal",get:function(){return this._horizontal}},{key:"vertical",get:function(){return this._vertical}}]),t}()));o._RF.pop()}}}));

System.register("chunks:///_virtual/DataClass.ts",["cc"],(function(t){"use strict";var i,e,s;return{setters:[function(t){i=t.cclegacy,e=t.Vec2,s=t.Vec3}],execute:function(){i._RF.push({},"15a68dExfpBEIKGcN1SbSU5","DataClass",void 0);t("TowerUIData",(function(t,i,e){void 0===i&&(i=0),void 0===e&&(e=0),this.progress=0,this.towerId=0,this.isShow=!1,this.isShow=t,this.progress=i,this.towerId=e})),t("TopState_PeopleCount",(function(t,i){this.playerCount=0,this.enemyCount=0,this.playerCount=t,this.enemyCount=i})),t("TopState_Score",(function(t,i){this.playerScore=0,this.enemyScore=0,this.playerScore=t,this.enemyScore=i})),t("Cam_Default_Data",(function(t,i,o,h,a){this.minYAxisHeight=1,this.maxYAXISHeight=5,this.rotXY=new e,this.camPos=new s,this.camRot=new s,this.minYAxisHeight=t,this.maxYAXISHeight=i,this.rotXY=o,this.camPos=h,this.camRot=a})),t("Hero_Kill_Data",(function(t,i,e,s){this.camp=void 0,this.deadName=void 0,this.killerName=void 0,this.hurtHeroNames=[],this.camp=t,this.deadName=i,this.killerName=e,this.hurtHeroNames=s}));i._RF.pop()}}}));

System.register("chunks:///_virtual/DebugController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts"],(function(e){"use strict";var t,o,r,n,i,l,a,c,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,a=e.Label,c=e.Color,s=e.Component},function(e){u=e.cinestation}],execute:function(){var b,p,f,g,h;i._RF.push({},"dccdfXDXoRFfZ4jGJUQGmTm","DebugController",void 0);var d=l.ccclass,v=l.property;e("DebugController",(b=d("DebugController"),p=v(a),b((h=t((g=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(t=e.call.apply(e,[this].concat(i))||this)._index=0,r(t,"label",h,n(t)),t}o(t,e);var i=t.prototype;return i.onDebug=function(){var e=u.vcam;e&&this.label&&(e.debug=!e.debug,this._setLabelColor(e.debug))},i.onSwitch=function(){var e=u.vcams,t=e[++this._index%e.length];t.active=!0,this._setLabelColor(t.debug)},i._setLabelColor=function(e){this.label&&(this.label.color=e?c.WHITE:c.GRAY)},t}(s)).prototype,"label",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/Decorator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./behavior-decorator.ts"],(function(t){"use strict";var e,o,r,c,n;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy},null,function(t){r=t.ccclass,c=t.delegate},function(t){n=t.BehaviorDecorator}],execute:function(){var u;o._RF.push({},"337ccG8GiZNvZRj2auHv58h","Decorator",void 0);t("Decorator",r("bt.Decorator")(u=c()(u=function(t){function o(){return t.apply(this,arguments)||this}return e(o,t),o.prototype.execute=function(e){return t.prototype.execute.call(this,e)},o}(n))||u)||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/DuilianAdMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts"],(function(t){"use strict";var i,n,e,r;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},function(t){e=t.default},function(t){r=t.default}],execute:function(){n._RF.push({},"27e8fERAPBE+IR0ROUK6P70","DuilianAdMgr",void 0),t("default",function(){function t(){this.gridIdArr=[],this.gridAdArr=[],this.hadHide=!1,this.totalCount=2,this.createIndex=0,this.showTimes=0}var n=t.prototype;return n.initCustomAd=function(){e.instance.dataConfig.front_duilian_gezi_switch&&r.Instance.NewWuchu2&&(this.gridIdArr=e.instance.dataConfig.front_duilian_gezi_list,this.gridIdArr&&(this.totalCount=2,this.createIndex=0,this.createCustomAd()))},n.getCustomAd=function(t,i,n,r){var o=this;void 0===n&&(n=null),void 0===r&&(r=null);var s=window.wx.createCustomAd({adUnitId:t,adIntervals:e.instance.dataConfig.front_more_gezi_time/1e3,style:i});return s.onError((function(t){console.log("对联格子加载失败"),r&&r(),s.offError(),s.offLoad()})),s.onLoad((function(){o.hadHide||s.show(),console.log("对联格子加载成功"),n&&n(),s.offError(),s.offLoad()})),s},n.createCustomAd=function(){var t=this;if(!(this.createIndex>=this.gridIdArr.length||this.gridAdArr.length>=this.totalCount))var i={left:0==this.gridAdArr.length?0:this.sysInfo.screenWidth-65,top:120},n=this.getCustomAd(this.gridIdArr[this.createIndex],i,(function(){t.gridAdArr.push(n),t.createIndex++,t.createCustomAd()}),(function(){t.createIndex++,t.createCustomAd()}))},n.showGrid=function(){this.showTimes++},n.hideGrid=function(){this.hadHide=!0},n.getIsError=function(){return this.gridAdArr.length<=0},i(t,[{key:"sysInfo",get:function(){return window.wx.getSystemInfoSync()}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/Effect.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"5c1f5O+jLdMB4MzMWSzAOO8","Effect",void 0);e("Effect",{name:"../cinestation/art/Shaders/View",techniques:[{name:"transparent",passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendSrcAlpha:2,blendDstAlpha:4}]},program:"../cinestation/art/Shaders/View|view-vs:vert|view-fs:frag",properties:{lookatPoint:{value:[.5,.5],type:14},deadZoneWidth:{value:[.1],type:13,handleInfo:["viewParams",0,13]},deadZoneHeight:{value:[.1],type:13,handleInfo:["viewParams",1,13]},softZoneWidth:{value:[.8],type:13,handleInfo:["viewParams",2,13]},softZoneHeight:{value:[.8],type:13,handleInfo:["viewParams",3,13]},viewParams:{type:16,editor:{visible:!1,deprecated:!0},value:[0,0,.8,.8]}}}]}],shaders:[{hash:3069556386,glsl4:{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\n precision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\n    int getVertexId() {\n      return gl_VertexIndex;\n    }\n  layout(set = 2, binding = 4) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    layout(set = 2, binding = 6) uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    layout(set = 2, binding = 7) uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    layout(set = 2, binding = 8) uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    layout(location = 4) in u32vec4 a_joints;\n  layout(location = 5) in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      layout(location = 7) in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(set = 2, binding = 3) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(set = 2, binding = 2) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    layout(set = 2, binding = 5) uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(set = 2, binding = 3) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  layout(location = 8) in vec4 a_matWorld0;\n  layout(location = 9) in vec4 a_matWorld1;\n  layout(location = 10) in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    layout(location = 11) in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  layout(location = 12) in float a_dyn_batch_id;\n  layout(set = 2, binding = 0) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(set = 2, binding = 0) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\n precision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n};\nlayout(set = 1, binding = 0) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(14. * cc_screenSize.z, dpx), step(14. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl3:{vert:"\n precision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\n    in float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  layout(std140) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    in vec4 a_joints;\n  in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(std140) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(std140) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(std140) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  in vec4 a_matWorld0;\n  in vec4 a_matWorld1;\n  in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  in float a_dyn_batch_id;\n  layout(std140) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(std140) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\n precision highp float;\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n};\nlayout(std140) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(14. * cc_screenSize.z, dpx), step(14. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\n precision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\n    attribute float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  uniform vec4 cc_displacementWeights[15];\n  uniform vec4 cc_displacementTextureInfo;\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n        int pixelIndex = elementIndex;\n        vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n        vec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\n        return texture2D(tex, uv);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture2D(tex, x)),\n        decode32(texture2D(tex, y)),\n        decode32(texture2D(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    attribute vec4 a_joints;\n  attribute vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      attribute highp vec4 a_jointAnimInfo;\n    #endif\n    uniform highp vec4 cc_jointTextureInfo;\n    uniform highp vec4 cc_jointAnimInfo;\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    uniform highp vec4 cc_joints[90];\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  attribute vec4 a_matWorld0;\n  attribute vec4 a_matWorld1;\n  attribute vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    attribute vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  attribute float a_dyn_batch_id;\n  #else\n  #endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\n precision highp float;\nuniform mediump vec4 cc_screenSize;\nuniform vec4 viewParams;\n           uniform vec2 lookatPoint;\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(14. * cc_screenSize.z, dpx), step(14. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}]},statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:157,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:39}},defines:[{name:"CC_USE_MORPH",type:"boolean",defines:[]},{name:"CC_MORPH_TARGET_COUNT",type:"number",defines:["CC_USE_MORPH"],range:[2,8]},{name:"CC_MORPH_PRECOMPUTED",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean",defines:["CC_USE_MORPH"]},{name:"CC_USE_SKINNING",type:"boolean",defines:[]},{name:"CC_USE_BAKED_ANIMATION",type:"boolean",defines:["CC_USE_SKINNING"]},{name:"USE_INSTANCING",type:"boolean",defines:[],editor:{elevated:!0}},{name:"USE_BATCHING",type:"boolean",defines:["!USE_INSTANCING"],editor:{elevated:!0}},{name:"USE_LIGHTMAP",type:"boolean",defines:["USE_INSTANCING"]}],blocks:[{name:"Constant",members:[{name:"viewParams",type:16,count:1},{name:"lookatPoint",type:14,count:1}],defines:[],stageFlags:16,binding:0}],samplerTextures:[],attributes:[{name:"a_position",type:15,count:1,defines:[],stageFlags:1,format:32,location:0},{name:"a_normal",type:15,count:1,defines:[],stageFlags:1,format:32,location:1},{name:"a_texCoord",type:14,count:1,defines:[],stageFlags:1,format:21,location:2},{name:"a_tangent",type:16,count:1,defines:[],stageFlags:1,format:44,location:3},{name:"a_vertexId",type:13,count:1,defines:["CC_USE_MORPH"],stageFlags:1,format:11,location:6},{name:"a_joints",type:"u32vec4",count:1,defines:["CC_USE_SKINNING"],stageFlags:1,location:4},{name:"a_weights",type:16,count:1,defines:["CC_USE_SKINNING"],stageFlags:1,format:44,location:5},{name:"a_jointAnimInfo",type:16,count:1,defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:7},{name:"a_matWorld0",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:8},{name:"a_matWorld1",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:9},{name:"a_matWorld2",type:16,count:1,defines:["USE_INSTANCING"],stageFlags:1,format:44,isInstanced:!0,location:10},{name:"a_lightingMapUVParam",type:16,count:1,defines:["USE_INSTANCING","USE_LIGHTMAP"],stageFlags:1,format:44,isInstanced:!0,location:11},{name:"a_dyn_batch_id",type:13,count:1,defines:["!USE_INSTANCING","USE_BATCHING"],stageFlags:1,format:11,location:12}],varyings:[],name:"../cinestation/art/Shaders/View|view-vs:vert|view-fs:frag"}]});n._RF.pop()}}}));

System.register("chunks:///_virtual/Effect3_4.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"15ff4tgg2VJBLCjpsM+Fdgp","Effect3_4",void 0);e("Effect3_4",{name:"../cinestation/examples/art/Shaders/View",techniques:[{name:"transparent",passes:[{blendState:{targets:[{blend:!0,blendSrc:2,blendDst:4,blendSrcAlpha:2,blendDstAlpha:4}]},program:"../cinestation/examples/art/Shaders/View|view-vs:vert|view-fs:frag",properties:{lookatPoint:{value:[.5,.5],type:14},deadZoneWidth:{value:[.1],type:13,handleInfo:["viewParams",0,13]},deadZoneHeight:{value:[.1],type:13,handleInfo:["viewParams",1,13]},softZoneWidth:{value:[.8],type:13,handleInfo:["viewParams",2,13]},softZoneHeight:{value:[.8],type:13,handleInfo:["viewParams",3,13]},viewParams:{type:16,editor:{visible:!1,deprecated:!0},value:[0,0,.8,.8]}}}]}],shaders:[{blocks:[{name:"Constant",members:[{name:"viewParams",type:16,count:1},{name:"lookatPoint",type:14,count:1}],defines:[],stageFlags:16,binding:0}],samplerTextures:[],samplers:[],textures:[],buffers:[],images:[],subpassInputs:[],attributes:[{name:"a_position",defines:[],format:32,location:0},{name:"a_normal",defines:[],format:32,location:1},{name:"a_texCoord",defines:[],format:21,location:2},{name:"a_tangent",defines:[],format:44,location:3},{name:"a_vertexId",defines:["CC_USE_MORPH"],format:11,location:6},{name:"a_joints",defines:["CC_USE_SKINNING"],location:4},{name:"a_weights",defines:["CC_USE_SKINNING"],format:44,location:5},{name:"a_jointAnimInfo",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION","USE_INSTANCING"],format:44,isInstanced:!0,location:7},{name:"a_matWorld0",defines:["USE_INSTANCING"],format:44,isInstanced:!0,location:8},{name:"a_matWorld1",defines:["USE_INSTANCING"],format:44,isInstanced:!0,location:9},{name:"a_matWorld2",defines:["USE_INSTANCING"],format:44,isInstanced:!0,location:10},{name:"a_lightingMapUVParam",defines:["USE_INSTANCING","USE_LIGHTMAP"],format:44,isInstanced:!0,location:11},{name:"a_dyn_batch_id",defines:["!USE_INSTANCING","USE_BATCHING"],format:11,location:12}],varyings:[],fragColors:[{name:"cc_FragColor",typename:"vec4",type:16,count:1,defines:[],stageFlags:16,location:0}],hash:3775263886,glsl4:{vert:"#extension GL_EXT_shader_explicit_arithmetic_types_int32: require\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nlayout(location = 0) in vec3 a_position;\nlayout(location = 1) in vec3 a_normal;\nlayout(location = 2) in vec2 a_texCoord;\nlayout(location = 3) in vec4 a_tangent;\n#if CC_USE_MORPH\n    int getVertexId() {\n      return gl_VertexIndex;\n    }\n  layout(set = 2, binding = 4) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    layout(set = 2, binding = 7) uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    layout(set = 2, binding = 8) uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    layout(set = 2, binding = 9) uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    layout(location = 4) in u32vec4 a_joints;\n  layout(location = 5) in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      layout(location = 7) in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(set = 2, binding = 3) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(set = 2, binding = 2) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    layout(set = 2, binding = 6) uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(set = 2, binding = 3) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  layout(location = 8) in vec4 a_matWorld0;\n  layout(location = 9) in vec4 a_matWorld1;\n  layout(location = 10) in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    layout(location = 11) in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  layout(location = 12) in float a_dyn_batch_id;\n  layout(set = 2, binding = 0) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(set = 2, binding = 0) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(set = 0, binding = 0) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(set = 0, binding = 1) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n  mediump vec4 cc_nearFar;\n  mediump vec4 cc_viewPort;\n};\nlayout(set = 1, binding = 0) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(10. * cc_screenSize.z, dpx), step(10. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl3:{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nin vec3 a_position;\nin vec3 a_normal;\nin vec2 a_texCoord;\nin vec4 a_tangent;\n#if CC_USE_MORPH\n    in float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  layout(std140) uniform CCMorph {\n    vec4 cc_displacementWeights[15];\n    vec4 cc_displacementTextureInfo;\n  };\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int pixelIndex) {\n        ivec2 texSize = textureSize(tex, 0);\n        return texelFetch(tex, ivec2(pixelIndex % texSize.x, pixelIndex / texSize.x), 0);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture(tex, x)),\n        decode32(texture(tex, y)),\n        decode32(texture(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    in vec4 a_joints;\n  in vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      in highp vec4 a_jointAnimInfo;\n    #endif\n    layout(std140) uniform CCSkinningTexture {\n      highp vec4 cc_jointTextureInfo;\n    };\n    layout(std140) uniform CCSkinningAnimation {\n      highp vec4 cc_jointAnimInfo;\n    };\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    layout(std140) uniform CCSkinning {\n      highp vec4 cc_joints[30 * 3];\n    };\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  in vec4 a_matWorld0;\n  in vec4 a_matWorld1;\n  in vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    in vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  in float a_dyn_batch_id;\n  layout(std140) uniform CCLocalBatched {\n    highp mat4 cc_matWorlds[10];\n  };\n#else\n  layout(std140) uniform CCLocal {\n    highp mat4 cc_matWorld;\n    highp mat4 cc_matWorldIT;\n    highp vec4 cc_lightingMapUVParam;\n  };\n#endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nlayout(std140) uniform CCGlobal {\n  highp   vec4 cc_time;\n  mediump vec4 cc_screenSize;\n  mediump vec4 cc_nativeSize;\n};\nlayout(std140) uniform CCCamera {\n  highp   mat4 cc_matView;\n  highp   mat4 cc_matViewInv;\n  highp   mat4 cc_matProj;\n  highp   mat4 cc_matProjInv;\n  highp   mat4 cc_matViewProj;\n  highp   mat4 cc_matViewProjInv;\n  highp   vec4 cc_cameraPos;\n  mediump vec4 cc_screenScale;\n  mediump vec4 cc_exposure;\n  mediump vec4 cc_mainLitDir;\n  mediump vec4 cc_mainLitColor;\n  mediump vec4 cc_ambientSky;\n  mediump vec4 cc_ambientGround;\n  mediump vec4 cc_fogColor;\n  mediump vec4 cc_fogBase;\n  mediump vec4 cc_fogAdd;\n  mediump vec4 cc_nearFar;\n  mediump vec4 cc_viewPort;\n};\nlayout(std140) uniform Constant {\n  vec4 viewParams;\n  vec2 lookatPoint;\n};\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(10. * cc_screenSize.z, dpx), step(10. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nlayout(location = 0) out vec4 cc_FragColor;\nvoid main() { cc_FragColor = frag(); }"},glsl1:{vert:"\nprecision highp float;\nhighp float decode32 (highp vec4 rgba) {\n  rgba = rgba * 255.0;\n  highp float Sign = 1.0 - (step(128.0, (rgba[3]) + 0.5)) * 2.0;\n  highp float Exponent = 2.0 * (mod(float(int((rgba[3]) + 0.5)), 128.0)) + (step(128.0, (rgba[2]) + 0.5)) - 127.0;\n  highp float Mantissa = (mod(float(int((rgba[2]) + 0.5)), 128.0)) * 65536.0 + rgba[1] * 256.0 + rgba[0] + 8388608.0;\n  return Sign * exp2(Exponent - 23.0) * Mantissa;\n}\nstruct StandardVertInput {\n  highp vec4 position;\n  vec3 normal;\n  vec4 tangent;\n};\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec2 a_texCoord;\nattribute vec4 a_tangent;\n#if CC_USE_MORPH\n    attribute float a_vertexId;\n    int getVertexId() {\n      return int(a_vertexId);\n    }\n  uniform vec4 cc_displacementWeights[15];\n  uniform vec4 cc_displacementTextureInfo;\n  vec2 getPixelLocation(vec2 textureResolution, int pixelIndex) {\n    float pixelIndexF = float(pixelIndex);\n    float x = mod(pixelIndexF, textureResolution.x);\n    float y = floor(pixelIndexF / textureResolution.x);\n    return vec2(x, y);\n  }\n  vec2 getPixelCoordFromLocation(vec2 location, vec2 textureResolution) {\n    return (vec2(location.x, location.y) + .5) / textureResolution;\n  }\n  #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n        int pixelIndex = elementIndex;\n        vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n        vec2 uv = getPixelCoordFromLocation(location, cc_displacementTextureInfo.xy);\n        return texture2D(tex, uv);\n      }\n  #else\n    vec4 fetchVec3ArrayFromTexture(sampler2D tex, int elementIndex) {\n      int pixelIndex = elementIndex * 4;\n      vec2 location = getPixelLocation(cc_displacementTextureInfo.xy, pixelIndex);\n      vec2 x = getPixelCoordFromLocation(location + vec2(0.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 y = getPixelCoordFromLocation(location + vec2(1.0, 0.0), cc_displacementTextureInfo.xy);\n      vec2 z = getPixelCoordFromLocation(location + vec2(2.0, 0.0), cc_displacementTextureInfo.xy);\n      return vec4(\n        decode32(texture2D(tex, x)),\n        decode32(texture2D(tex, y)),\n        decode32(texture2D(tex, z)),\n        1.0\n      );\n    }\n  #endif\n  float getDisplacementWeight(int index) {\n    int quot = index / 4;\n    int remainder = index - quot * 4;\n    if (remainder == 0) {\n      return cc_displacementWeights[quot].x;\n    } else if (remainder == 1) {\n      return cc_displacementWeights[quot].y;\n    } else if (remainder == 2) {\n      return cc_displacementWeights[quot].z;\n    } else {\n      return cc_displacementWeights[quot].w;\n    }\n  }\n  vec3 getVec3DisplacementFromTexture(sampler2D tex, int vertexIndex) {\n  #if CC_MORPH_PRECOMPUTED\n    return fetchVec3ArrayFromTexture(tex, vertexIndex).rgb;\n  #else\n    vec3 result = vec3(0, 0, 0);\n    int nVertices = int(cc_displacementTextureInfo.z);\n    for (int iTarget = 0; iTarget < CC_MORPH_TARGET_COUNT; ++iTarget) {\n      result += (fetchVec3ArrayFromTexture(tex, nVertices * iTarget + vertexIndex).rgb * getDisplacementWeight(iTarget));\n    }\n    return result;\n  #endif\n  }\n  #if CC_MORPH_TARGET_HAS_POSITION\n    uniform sampler2D cc_PositionDisplacements;\n    vec3 getPositionDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_PositionDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    uniform sampler2D cc_NormalDisplacements;\n    vec3 getNormalDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_NormalDisplacements, vertexId);\n    }\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    uniform sampler2D cc_TangentDisplacements;\n    vec3 getTangentDisplacement(int vertexId) {\n      return getVec3DisplacementFromTexture(cc_TangentDisplacements, vertexId);\n    }\n  #endif\n  void applyMorph (inout StandardVertInput attr) {\n    int vertexId = getVertexId();\n  #if CC_MORPH_TARGET_HAS_POSITION\n    attr.position.xyz = attr.position.xyz + getPositionDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_NORMAL\n    attr.normal.xyz = attr.normal.xyz + getNormalDisplacement(vertexId);\n  #endif\n  #if CC_MORPH_TARGET_HAS_TANGENT\n    attr.tangent.xyz = attr.tangent.xyz + getTangentDisplacement(vertexId);\n  #endif\n  }\n  void applyMorph (inout vec4 position) {\n  #if CC_MORPH_TARGET_HAS_POSITION\n    position.xyz = position.xyz + getPositionDisplacement(getVertexId());\n  #endif\n  }\n#endif\n#if CC_USE_SKINNING\n    attribute vec4 a_joints;\n  attribute vec4 a_weights;\n  #if CC_USE_BAKED_ANIMATION\n    #if USE_INSTANCING\n      attribute highp vec4 a_jointAnimInfo;\n    #endif\n    uniform highp vec4 cc_jointTextureInfo;\n    uniform highp vec4 cc_jointAnimInfo;\n    uniform highp sampler2D cc_jointTexture;\n      #else\n    uniform highp vec4 cc_joints[90];\n  #endif\n  #if CC_USE_BAKED_ANIMATION\n    #if CC_DEVICE_SUPPORT_FLOAT_TEXTURE\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 3.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 3.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y));\n        vec4 v2 = texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y));\n        vec4 v3 = texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y));\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #else\n      mat4 getJointMatrix (float i) {\n              #if USE_INSTANCING\n                highp float j = 12.0 * (a_jointAnimInfo.x * a_jointAnimInfo.y + i) + a_jointAnimInfo.z;\n              #else\n                highp float j = 12.0 * (cc_jointAnimInfo.x * cc_jointTextureInfo.y + i) + cc_jointTextureInfo.z;\n              #endif\n              highp float invSize = cc_jointTextureInfo.w;\n              highp float y = floor(j * invSize);\n              highp float x = floor(j - y * cc_jointTextureInfo.x);\n              y = (y + 0.5) * invSize;\n        vec4 v1 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 0.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 1.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 2.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 3.5) * invSize, y)))\n        );\n        vec4 v2 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 4.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 5.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 6.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 7.5) * invSize, y)))\n        );\n        vec4 v3 = vec4(\n          decode32(texture2D(cc_jointTexture, vec2((x + 8.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 9.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 10.5) * invSize, y))),\n          decode32(texture2D(cc_jointTexture, vec2((x + 11.5) * invSize, y)))\n        );\n        return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n      }\n    #endif\n  #else\n    mat4 getJointMatrix (float i) {\n      int idx = int(i);\n      vec4 v1 = cc_joints[idx * 3];\n      vec4 v2 = cc_joints[idx * 3 + 1];\n      vec4 v3 = cc_joints[idx * 3 + 2];\n      return mat4(vec4(v1.xyz, 0.0), vec4(v2.xyz, 0.0), vec4(v3.xyz, 0.0), vec4(v1.w, v2.w, v3.w, 1.0));\n    }\n  #endif\n  mat4 skinMatrix () {\n    vec4 joints = vec4(a_joints);\n    return getJointMatrix(joints.x) * a_weights.x\n         + getJointMatrix(joints.y) * a_weights.y\n         + getJointMatrix(joints.z) * a_weights.z\n         + getJointMatrix(joints.w) * a_weights.w;\n  }\n  void CCSkin (inout vec4 position) {\n    mat4 m = skinMatrix();\n    position = m * position;\n  }\n  void CCSkin (inout StandardVertInput attr) {\n    mat4 m = skinMatrix();\n    attr.position = m * attr.position;\n    attr.normal = (m * vec4(attr.normal, 0.0)).xyz;\n    attr.tangent.xyz = (m * vec4(attr.tangent.xyz, 0.0)).xyz;\n  }\n#endif\n#if USE_INSTANCING\n  attribute vec4 a_matWorld0;\n  attribute vec4 a_matWorld1;\n  attribute vec4 a_matWorld2;\n  #if USE_LIGHTMAP\n    attribute vec4 a_lightingMapUVParam;\n  #endif\n#elif USE_BATCHING\n  attribute float a_dyn_batch_id;\n  #else\n  #endif\nvec4 vert() {\n  vec4 position;\n      position = vec4(a_position, 1.0);\n    #if CC_USE_MORPH\n      applyMorph(position);\n    #endif\n    #if CC_USE_SKINNING\n      CCSkin(position);\n    #endif\n  return vec4(position.xyz * 2., 1.0);\n}\nvoid main() { gl_Position = vert(); }",frag:"\nprecision highp float;\nuniform mediump vec4 cc_screenSize;\nuniform vec4 viewParams;\n           uniform vec2 lookatPoint;\nfloat sdf_union(float a, float b) {\n  return min(a, b);\n}\nfloat sdf_intersect(float a, float b) {\n  return max(a, b);\n}\nvec4 frag () {\n  vec2  uv = gl_FragCoord.xy * cc_screenSize.zw;\n  float dx = abs(uv.x - 0.5) * 2.;\n  float dy = abs(uv.y - 0.5) * 2.;\n  float dpx = abs(uv.x - lookatPoint.x) * 2.;\n  float dpy = abs(uv.y - lookatPoint.y) * 2.;\n  float softZoneWidth = max(viewParams.x, viewParams.z);\n  float softZoneHeight = max(viewParams.y, viewParams.w);\n  float deadZone = sdf_intersect(step(viewParams.x, dx), step(viewParams.y, dy));\n  float softZone = sdf_intersect(step(softZoneWidth, dx), step(softZoneHeight, dy));\n  float deadZoneLine0 = sdf_intersect(1. - step(viewParams.x, dx), step(viewParams.x + 7. * cc_screenSize.z, dx));\n  float deadZoneLine1 = sdf_intersect(1. - step(viewParams.y, dy), step(viewParams.y + 7. * cc_screenSize.w, dy));\n  float softZoneLine0 = sdf_intersect(1. - step(softZoneWidth, dx), step(softZoneWidth + 7. * cc_screenSize.z, dx));\n  float softZoneLine1 = sdf_intersect(1. - step(softZoneHeight, dy), step(softZoneHeight + 7. * cc_screenSize.w, dy));\n  vec4  color = vec4(1,0,0,0.15);\n  color = mix(vec4(0,0.7,1,0.15), color, softZone);\n  color = mix(vec4(0), color, deadZone);\n  color = mix(vec4(0,0.7,1,0.3), color, sdf_union(deadZoneLine0, deadZoneLine1));\n  color = mix(vec4(1,0,0,0.3), color, sdf_union(softZoneLine0, softZoneLine1));\n  color = mix(vec4(1,1,0,1), color, sdf_intersect(step(10. * cc_screenSize.z, dpx), step(10. * cc_screenSize.z, dpy * cc_screenSize.y/cc_screenSize.x)));\n  return color;\n}\nvoid main() { gl_FragColor = frag(); }"},builtins:{globals:{blocks:[{name:"CCGlobal",defines:[]},{name:"CCCamera",defines:[]}],samplerTextures:[],buffers:[],images:[]},locals:{blocks:[{name:"CCMorph",defines:["CC_USE_MORPH"]},{name:"CCSkinningTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinningAnimation",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]},{name:"CCSkinning",defines:["CC_USE_SKINNING","!CC_USE_BAKED_ANIMATION"]},{name:"CCLocalBatched",defines:["!USE_INSTANCING","USE_BATCHING"]},{name:"CCLocal",defines:["!USE_INSTANCING","!USE_BATCHING"]}],samplerTextures:[{name:"cc_PositionDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_POSITION"]},{name:"cc_NormalDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_NORMAL"]},{name:"cc_TangentDisplacements",defines:["CC_USE_MORPH","CC_MORPH_TARGET_HAS_TANGENT"]},{name:"cc_jointTexture",defines:["CC_USE_SKINNING","CC_USE_BAKED_ANIMATION"]}],buffers:[],images:[]},statistics:{CC_EFFECT_USED_VERTEX_UNIFORM_VECTORS:157,CC_EFFECT_USED_FRAGMENT_UNIFORM_VECTORS:41}},defines:[{name:"CC_USE_MORPH",type:"boolean",defines:[],_offset:0},{name:"CC_MORPH_TARGET_COUNT",type:"number",defines:["CC_USE_MORPH"],range:[2,8],_offset:1},{name:"CC_MORPH_PRECOMPUTED",type:"boolean",defines:["CC_USE_MORPH"],_offset:4},{name:"CC_MORPH_TARGET_HAS_POSITION",type:"boolean",defines:["CC_USE_MORPH"],_offset:5},{name:"CC_MORPH_TARGET_HAS_NORMAL",type:"boolean",defines:["CC_USE_MORPH"],_offset:6},{name:"CC_MORPH_TARGET_HAS_TANGENT",type:"boolean",defines:["CC_USE_MORPH"],_offset:7},{name:"CC_USE_SKINNING",type:"boolean",defines:[],_offset:8},{name:"CC_USE_BAKED_ANIMATION",type:"boolean",defines:["CC_USE_SKINNING"],_offset:9},{name:"USE_INSTANCING",type:"boolean",defines:[],editor:{elevated:!0},_offset:10},{name:"USE_BATCHING",type:"boolean",defines:["!USE_INSTANCING"],editor:{elevated:!0},_offset:11},{name:"USE_LIGHTMAP",type:"boolean",defines:["USE_INSTANCING"],_offset:12}],name:"../cinestation/examples/art/Shaders/View|view-vs:vert|view-fs:frag"}]});n._RF.pop()}}}));

System.register("chunks:///_virtual/EndBoxUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var n,i,e,o,r,s,a,c,u,h,l,d,f,p,m,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.ProgressBar,u=t.Quat,h=t.Tween,l=t.tween,d=t.Component},function(t){f=t.default},function(t){p=t.default},function(t){m=t.default},function(t){g=t.default}],execute:function(){var _,C,B,b,x,k,v;r._RF.push({},"df4e76W/H9O8J2rmiwm9eC/","EndBoxUI",void 0);var w=s.ccclass,I=s.property;t("default",(_=w("EndBoxUI"),C=I(a),B=I(c),_((k=n((x=function(t){function n(){for(var n,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,e(n,"box",k,o(n)),e(n,"pBar",v,o(n)),n.ccb=null,n.showCallback=null,n.hadShowBanner=!1,n.preTime=0,n.rateTime=0,n.minclicknum=void 0,n.maxclicknum=void 0,n.needClick=void 0,n.isforce=!1,n.addProgerss=void 0,n.repeatCount=0,n.clickCount=0,n.lianxu_num=void 0,n.quat1=new u,n.quat2=new u,n.quat3=new u,n}i(n,t);var r=n.prototype;return r.onDisable=function(){var t=this;this.unscheduleAllCallbacks(),g.Instance.hideBannerFun(!0),this.repeatCount>0?p.Instance.com.scheduleOnce((function(){t.showUI(t.lianxu_num,t.ccb),t.repeatCount--}),.1):this.ccb&&this.ccb()},r.showUI=function(t,n){this.lianxu_num=t,this.clickCount=0,this.repeatCount<=0&&(this.repeatCount=t),this.minclicknum=Number(f.instance.dataConfig.front_box_clicks[0]),this.maxclicknum=Number(f.instance.dataConfig.front_box_clicks[1]),this.needClick=f.instance.GetRandom(this.minclicknum,this.maxclicknum-f.instance.dataConfig.front_progress_bar_reduce),this.isforce=f.instance.dataConfig.front_is_box_force,this.addProgerss=1/this.maxclicknum,console.log("this.needClick:",this.needClick),console.log("this.addProgerss:",this.addProgerss),g.Instance.hideBannerFun(!0),this.ccb=n,this.node.active=!0,this.hadShowBanner=!1,this.pBar.progress=0,this.rateTime=0,this.preTime=0,this.schedule(this.DecBar)},r.closeCB=function(){this.node.active=!1},r.clickCB=function(){var t=this;if(this.clickCount++,this.pBar.progress+=this.addProgerss,this.pBar.progress>1&&(this.pBar.progress=1),this.shakeBox(),!this.hadShowBanner){this.isforce=f.instance.dataConfig.front_is_box_force;var n=f.instance.dataConfig.front_box_hide_time/1e3,i=function(){t.hadShowBanner=!0,t.scheduleOnce((function(){g.Instance.hideBannerFun(!0),t.closeCB()}),n),m.instance.showBanner()},e=this.rateTime-this.preTime,o=f.instance.dataConfig.front_box_sulv_qujian,r=this.getRandomItemInArr(o).split("|"),s=r[0],a=r[1];if(100*this.pBar.progress>=f.instance.dataConfig.front_box_sulv_start&&parseFloat(s)<=e&&e<=parseFloat(a))return console.log("宝箱触发频率：",e),f.instance.dataConfig.front_sulv_wuchu_switch&&(this.isforce=!0,n=f.instance.dataConfig.front_fbox_hide_time/1e3),void i();if(this.preTime=this.rateTime,this.pBar.progress>=this.needClick*this.addProgerss&&!this.hadShowBanner)return console.log("宝箱触发进度"),void i();this.clickCount>=f.instance.dataConfig.front_box_click_count&&(console.log("点击次数",this.clickCount),this.clickCount=0,i())}},r.shakeBox=function(){h.stopAllByTarget(this.box),u.fromEuler(this.quat1,0,0,-10),u.fromEuler(this.quat2,0,0,10),u.fromEuler(this.quat3,0,0,0),l(this.box).to(.1,{rotation:this.quat1}).to(.2,{rotation:this.quat2}).to(.1,{rotation:this.quat3}).start()},r.DecBar=function(){this.pBar.progress-=f.instance.dataConfig.front_progress_bar_return,this.pBar.progress<0&&(this.pBar.progress=0)},r.update=function(t){this.rateTime+=t},r.GetRandom=function(t,n,i){void 0===i&&(i=!0);var e=n-t,o=Math.random()*e;return o+=t,i?Math.floor(o):o},r.getRandomItemInArr=function(t){return t[Math.floor(Math.random()*t.length)]},n}(d)).prototype,"box",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(x.prototype,"pBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=x))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/EndUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./StorageMgr.ts","./Platform.ts","./Tool.ts"],(function(t){"use strict";var n,i,e,o,a,d,r,s,l,c;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,o=t.Label,a=t.director,d=t.Component},function(t){r=t.default},function(t){s=t.default},function(t){l=t.default},function(t){c=t.default}],execute:function(){var h;i._RF.push({},"bdf8dA/hYVO2LTax0dIjKZA","EndUI",void 0);var g=e.ccclass;e.property,t("EndUI",g("EndUI")(h=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),o=0;o<i;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).win=void 0,n.lose=void 0,n.normalBtn=void 0,n.videoBtn=void 0,n.rankAdd=0,n.coinAdd=0,n}n(i,t);var e=i.prototype;return e.onLoad=function(){this.win=this.node.getChildByPath("title/win"),this.lose=this.node.getChildByPath("title/fail"),this.normalBtn=this.node.getChildByName("normalBtn"),this.videoBtn=this.node.getChildByName("videoBtn"),this.lose.active=!1,this.win.active=!0},e.onEnable=function(){this.win.active=r.isWin,this.lose.active=!r.isWin},e.start=function(){c.d2_AddClickEvent(this.normalBtn,this,this.onNormalBtnClick),c.d2_AddClickEvent(this.videoBtn,this,this.onVideoBtnClick)},e.dataUpdate=function(t,n,i){this.node.getChildByPath("kill/Label").getComponent(o).string="击杀数："+t.toString()+"\n助攻数："+n.toString(),this.node.getChildByPath("dead/Label").getComponent(o).string="死亡数："+i.toString();var e=50*t+25*n,a=500-5*i;this.node.getChildByPath("kill/award/Label").getComponent(o).string=e.toString(),this.node.getChildByPath("dead/award/Label").getComponent(o).string=a.toString(),s.instance.changeGold(e+a),this.coinAdd=e+a;var d=50+2*t+n;r.isWin&&(d*=2),this.node.getChildByPath("rank/award/Label").getComponent(o).string=d.toString(),s.instance.changeRank(d),this.rankAdd=d;for(var l=0,c=0;c<r.rankScore.length;c++)if(s.instance.storageData.rankPoint<r.rankScore[c]){l=c;break}for(var h=this.node.getChildByPath("rank/icon"),g=0;g<h.children.length;g++)h.children[g].active=g==l;this.node.getChildByPath("rank/Label").getComponent(o).string="段位等级："+(l+1).toString()},e.onNormalBtnClick=function(){a.loadScene("Home")},e.onVideoBtnClick=function(){var t=this;l.instance.showVideo((function(){s.instance.changeGold(t.coinAdd),s.instance.changeRank(t.rankAdd),l.instance.showToast("成功双倍领取金币与段位"),a.loadScene("Home")}),(function(){}))},i}(d))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/EnumTypes.ts",["cc"],(function(e){"use strict";var _;return{setters:[function(e){_=e.cclegacy}],execute:function(){var a,i,t,m,o,l,n,r;e({CampType:void 0,ClickType:void 0,DinasorAnimType:void 0,DinasorType:void 0,EventType:void 0,ItemType:void 0,SoundType:void 0,TeachStepType:void 0}),_._RF.push({},"dcad6JkXRtI4Z7J2U/tVlIS","EnumTypes",void 0),function(e){e.Platform_Wake_Do="Platform_Wake_Do",e.Platform_Hide_Do="Platform_Hide_Do",e.Game_Cam_Switch="Game_Cam_Switch",e.Player_Ctr_CamRot="Player_Ctr_CamRot",e.Player_Ctr_Move="Player_Ctr_Move",e.Player_Ctr_FireOn="Player_Ctr_FireOn",e.Player_Ctr_FireOff="Player_Ctr_FireOff",e.Tower_UI_Update="Tower_UI_Update",e.TopState_Alive_Update="TopState_Alive_Update",e.TopState_Score_Update="TopState_Score_Update",e.Game_FireBtn_CD="Game_FireBtn_CD",e.Game_Over_Event="Game_Over_Event",e.Game_Player_Select="Game_Player_Select",e.Game_Player_Dead="Game_Player_Dead",e.Game_TowerUI_Show="Game_TowerUI_Show",e.Game_Aim_Shoot="Game_Aim_Shoot",e.Game_Aim_Hit="Game_Aim_Hit",e.Game_Aim_SkillHit_On="Game_Aim_SkillHit_On",e.Game_Aim_SkillHit_Off="Game_Aim_SkillHit_Off",e.Game_Aim_Lock="Game_Aim_Lock",e.Game_Aim_UnLock="Game_Aim_UnLock",e.Game_Player_Atk="Game_Player_Atk",e.Game_HeroDie_Event="Game_HeroDie_Event",e.Game_Player_Kill="Game_Player_Kill",e.Game_Player_Support="Game_Player_Support",e.Game_Player_Hurt="Game_Player_Hurt",e.Game_Skill1_Bite="Game_Skill1_Bite",e.Game_Skill4_Sweep="Game_Skill4_Sweep",e.Game_Skill5_Hit="Game_Skill5_Hit",e.Game_Skill2_Aim_Open="Game_Skill2_Aim_Open",e.Game_Skill2_Aim_Close="Game_Skill2_Aim_Close",e.Game_Skill2_Aim_Update="Game_Skill2_Aim_Update",e.Game_Charge_Open="Game_Charge_Open",e.Game_Charge_Close="Game_Charge_Close",e.Game_Charge_Update="Game_Charge_Update",e.Game_Teach_Add="Game_Teach_Add",e.Game_Teach_Skill="Game_Teach_Skill",e.Game_Teach_Item="Game_Teach_Item"}(a||(a=e("EventType",{}))),function(e){e[e.Button=0]="Button",e[e.Charge=1]="Charge",e[e.D1Die=2]="D1Die",e[e.D2Die=3]="D2Die",e[e.D3Die=4]="D3Die",e[e.D4Die=5]="D4Die",e[e.D6Die=6]="D6Die",e[e.DashHit=7]="DashHit",e[e.Heavy1=8]="Heavy1",e[e.Heavy2=9]="Heavy2",e[e.Invisible=10]="Invisible",e[e.KillConfirmed=11]="KillConfirmed",e[e.LaserShot=12]="LaserShot",e[e.Light1=13]="Light1",e[e.Light2=14]="Light2",e[e.MachineGun=15]="MachineGun",e[e.menuBGM=16]="menuBGM",e[e.ShotGun=17]="ShotGun",e[e.SniperGun=18]="SniperGun",e[e.SpeedDown=19]="SpeedDown",e[e.SpeedUp=20]="SpeedUp",e[e.Whip=21]="Whip"}(i||(i=e("SoundType",{}))),function(e){e.Idle="Idle",e.Run="Run",e.Die="Die",e.Skill="Skill",e.Tap="Tap"}(t||(t=e("DinasorAnimType",{}))),m||(m=e("ClickType",{})),function(e){e[e.Player=0]="Player",e[e.Enemy=1]="Enemy"}(o||(o=e("CampType",{}))),function(e){e[e.Dinasor1=0]="Dinasor1",e[e.Dinasor2=1]="Dinasor2",e[e.Dinasor3=2]="Dinasor3",e[e.Dinasor4=3]="Dinasor4",e[e.Dinasor5=4]="Dinasor5",e[e.Dinasor6=5]="Dinasor6"}(l||(l=e("DinasorType",{}))),function(e){e[e.Sheild=0]="Sheild",e[e.SpeedUp=1]="SpeedUp",e[e.AtkUp=2]="AtkUp",e[e.Heal=3]="Heal"}(n||(n=e("ItemType",{}))),function(e){e[e.chooseDinasor=0]="chooseDinasor",e[e.moveCam=1]="moveCam",e[e.goPoint1=2]="goPoint1",e[e.goPoint2=3]="goPoint2",e[e.goPoint3=4]="goPoint3",e[e.getItem1=5]="getItem1",e[e.getItem2=6]="getItem2",e[e.getItem3=7]="getItem3",e[e.killEnemy=8]="killEnemy",e[e.End=9]="End"}(r||(r=e("TeachStepType",{}))),_._RF.pop()}}}));

System.register("chunks:///_virtual/EventMgr.ts",["cc"],(function(t){"use strict";var n,e,r;return{setters:[function(t){n=t.cclegacy,e=t._decorator,r=t.EventTarget}],execute:function(){var c;n._RF.push({},"919d7XItUtH1rG9pGE64OF6","EventMgr",void 0);var o=e.ccclass,u=(e.property,e.menu,new r);t("EventMgr",o("EventMgr")(c=function(){function t(){}return t.event=function(t,n,e,r,c,o){u.emit(t,n,e,r,c,o)},t.on=function(t,n,e){u.on(t,e,n)},t.off=function(t,n,e){u.off(t,e,n)},t.clearTarget=function(t){u.removeAll(t)},t}())||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Events.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"47855R5MFhELIl5drKNn+/P","Events",void 0);t("CinestationEvent",{EDITOR_CHANGED:"cinestation-editor-changed",COMPOSER_CHANGED:"cinestation-composer-changed",LENS_CHANGED:"cinestation-lens-changed"});e._RF.pop()}}}));

System.register("chunks:///_virtual/ExportCrl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,o,i,s,r,d,h;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,i=e.game,s=e.UITransform,r=e.view,d=e.v3,h=e.Component}],execute:function(){var l;t._RF.push({},"7de57dSE4tEJaZ954yYkzmB","ExportCrl",void 0);var c=o.ccclass;o.property,e("default",c("ExportCrl")(l=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var o=t.prototype;return o.onLoad=function(){i.addPersistRootNode(this.node),this.node.getComponent(s).setContentSize(r.getVisibleSize()),this.node.setPosition(d(this.node.getComponent(s).contentSize.width/2,this.node.getComponent(s).contentSize.height/2,0))},o.start=function(){},o.loopTime=function(){this.node.setSiblingIndex(999)},o.showJJUI=function(e,n,t){for(var o=0;o<this.node.children.length;o++)this.node.children[o].setSiblingIndex(0);this.node.getChildByName(e).getComponent(e).showUI(t,n);for(var i=0;i<this.node.children.length;i++)if(this.node.children[i].name==e){this.node.children[i].setSiblingIndex(this.node.children.length);break}},o.closeJJUI=function(e){this.node.getChildByName(e).active=!1},o.closeAllJJUI=function(){for(var e=0;e<this.node.children.length;e++)this.node.children[e].active=!1,this.node.children[e].getComponent(this.node.children[e].name).unscheduleAllCallbacks()},t}(h))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/Face.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolMgr.ts","./PoolComp.ts"],(function(t){"use strict";var e,n,o,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){c=t.PoolMgr},function(t){i=t.PoolComp}],execute:function(){var r;n._RF.push({},"96331c1oqZOBKyYyBmpm2Te","Face",void 0);var s=o.ccclass;o.property,t("Face",s("Face")(r=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.firstBorn=function(){},o.clear=function(){},o.init=function(){var t=this;this.node.active=!0,this.scheduleOnce((function(){c.instance.recyleObj(t)}),4)},o.recyle=function(){this.node.active=!1},n}(i))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/FinishCustomAdMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AppConfig.ts","./JJMgr.ts"],(function(t){"use strict";var n,e,i,r;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},function(t){i=t.default},function(t){r=t.default}],execute:function(){e._RF.push({},"7436bmanHxL7pIkGCGrdE3+","FinishCustomAdMgr",void 0),t("default",function(){function t(){this.gridIdArr=[],this.gridAdArr=[],this.totalCount=1,this.createIndex=0}var e=t.prototype;return e.initCustomAd=function(){this.gridIdArr=i.wechat.finishCustomAd,this.createIndex=0,this.createCustomAd()},e.getCustomAd=function(t,n,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=window.wx.createCustomAd({adUnitId:t,adIntervals:r.instance.dataConfig.front_more_gezi_time/1e3,style:n});return o.onError((function(t){console.log("结算格子加载失败"),i&&i(),o.offError(),o.offLoad()})),o.onLoad((function(){console.log("结算格子加载成功"),e&&e(),o.offError(),o.offLoad()})),o},e.createCustomAd=function(){var t=this;if(!(this.createIndex>=this.gridIdArr.length||this.gridAdArr.length>=this.totalCount))var n={left:0,top:this.sysInfo.screenHeight/2-220,width:this.sysInfo.screenWidth},e=this.getCustomAd(this.gridIdArr[this.createIndex],n,(function(){t.gridAdArr.push(e),t.createIndex++,t.createCustomAd()}),(function(){t.createIndex++,t.createCustomAd()}))},e.showGrid=function(){},e.hideGrid=function(){},e.getIsError=function(){return this.gridAdArr.length<=0},n(t,[{key:"sysInfo",get:function(){return window.wx.getSystemInfoSync()}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/FinishGameUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts"],(function(n){"use strict";var t,e,i,o,r,a,c,s,l,u,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.Node,s=n.Component,l=n.Sprite},function(n){u=n.default},function(n){f=n.default}],execute:function(){var h,v,d,p,m;r._RF.push({},"80640I/xFpMor6MfSekWPx9","FinishGameUI",void 0);var y=a.ccclass,g=a.property;n("default",(h=y("FinishGameUI"),v=g(c),h((m=t((p=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,i(t,"rootNode",m,o(t)),t.navId=0,t.myNavArr=[],t}e(t,n);var r=t.prototype;return r.showUI=function(){this.node.active=!0},r.onEnable=function(){this._init(),this.initNav()},r.onDisable=function(){this.unscheduleAllCallbacks()},r._init=function(){this.navId=0},r.closeCB=function(){this.node.active=!1},r.navCB=function(n,t){console.log("click id:",t),u.instance.NavigateApp(t,(function(){f.Instance.NewWuchu&&u.instance.dataConfig.front_quxiao_switch&&f.Instance.clickFinishMoreGame()}),(function(){}))},r.initNav=function(){var n=this;this.myNavArr=u.instance.shuffleArr([].concat(u.instance.navDataArr));var t=[0,1,2,3,4,5];if(t=this.getRandomItemInArrWithoutSelf(-1,t,4),!(this.myNavArr.length<=0))for(var e=Math.floor(6*Math.random()),i=Math.floor(6*Math.random()),o=function(o){var r=n.rootNode.children[o],a=r.getChildByName("icon").getComponent(l),s=r.getChildByName("finger");r.getChildByName("hot").active=-1!=t.indexOf(o);var f=u.instance.navDataArr.indexOf(n.myNavArr[o]);u.instance.loadImgByUrl(a,n.myNavArr[o].icon),s.active=e==o,r.off(c.EventType.TOUCH_END),r.on(c.EventType.TOUCH_END,(function(t){n.navCB(t,f)}),n),i==o&&n.scheduleOnce((function(){n.rotateLoop(r,.05,14)}),.5)},r=0;r<6;r++)o(r)},r.rotateLoop=function(n,t,e){},r.shuffleArr=function(n){for(var t=n.length;t;){var e=Math.floor(Math.random()*t--),i=[n[t],n[e]];n[e]=i[0],n[t]=i[1]}return n},r.getRandomItemInArrWithoutSelf=function(n,t,e){void 0===e&&(e=1);var i=[].concat(t);return i.splice(i.indexOf(n),1),(i=this.shuffleArr(i)).slice(0,e)},t}(s)).prototype,"rootNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=p))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/FireEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolComp.ts"],(function(t){"use strict";var e,c,n,o;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy,n=t._decorator},function(t){o=t.PoolComp}],execute:function(){var i;c._RF.push({},"0ccfbTUZ0FJ/Lqw0A/cba0N","FireEffect",void 0);var r=n.ccclass;n.property,t("FireEffect",r("FireEffect")(i=function(t){function c(){return t.apply(this,arguments)||this}e(c,t);var n=c.prototype;return n.firstBorn=function(){},n.clear=function(){},n.init=function(){this.node.active=!0},n.recyle=function(){this.node.active=!1},c}(o))||i);c._RF.pop()}}}));

System.register("chunks:///_virtual/FollowController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,l,e,i,r,n,s,c,a;return{setters:[function(o){t=o.applyDecoratedDescriptor,l=o.inheritsLoose,e=o.initializerDefineProperty,i=o.assertThisInitialized},function(o){r=o.cclegacy,n=o._decorator,s=o.Node,c=o.Vec3,a=o.Component}],execute:function(){var f,u,w,p,d;r._RF.push({},"c6148hIAtlGKL1ARBsaihCi","FollowController",void 0);var h=n.ccclass,y=n.property;o("FollowController",(f=h("FollowController"),u=y(s),f((d=t((p=function(o){function t(){for(var t,l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(t=o.call.apply(o,[this].concat(r))||this)._followOffset=new c,e(t,"follow",d,i(t)),t}l(t,o);var r=t.prototype;return r.onLoad=function(){this.follow&&c.subtract(this._followOffset,this.node.worldPosition,this.follow.worldPosition)},r.update=function(o){this.follow&&(this.node.worldPosition=c.add(this.node.worldPosition,this.follow.worldPosition,this._followOffset))},t}(a)).prototype,"follow",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=p))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/Fontclip.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,r,n,o,s,a,p,c,l,u,h,y,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,a=e._decorator,p=e.CCFloat,c=e.SpriteFrame,l=e.Node,u=e.Sprite,h=e.Rect,y=e.UITransform,f=e.Vec3,b=e.Component}],execute:function(){var g,v,d,m,_,C,F,w,z,O,X,D,P,k,j,N,I,S;s._RF.push({},"15c1cOMq9hNFYnUkQHabVYz","Fontclip",void 0);var x=a.ccclass,A=a.property,M=a.executeInEditMode,R=a.menu;e("Fontclip",(g=x("Fontclip"),v=M(!0),d=R("UI/Comp/Fontclip"),m=A({visible:!0,displayName:"value"}),_=A({visible:!1,serializable:!0}),C=A({visible:!0,displayName:"sheet"}),F=A({visible:!1,serializable:!0}),w=A({type:p,visible:!0,displayName:"spaceX"}),z=A({type:p,visible:!1,serializable:!0}),O=A({visible:!1,serializable:!0}),X=A(c),g(D=v(D=d((t((P=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,r(t,"_value",k,n(t)),r(t,"_sheet",j,n(t)),r(t,"_spaceX",N,n(t)),r(t,"_isCenter",I,n(t)),r(t,"spriteFrame",S,n(t)),t}i(t,e);var s=t.prototype;return s.onEnable=function(){this.change()},s.start=function(){this.change()},s.change=function(){for(var e=0;e<this.node.children.length;e++)this.node.children[e].destroy();var t=Array.from(this.value),i=Array.from(this.sheet),r=this.spriteFrame.width,n=this.spriteFrame.height,o=r/i.length,s=0;this.isCenter&&(s=-(t.length-1)*o/2);for(var a=0;a<t.length;a++){var p=new l(t[a]);p.layer=this.node.layer;var c=p.addComponent(u);this.node.addChild(p),c.spriteFrame=this.spriteFrame.clone();var b=i.indexOf(t[a]);c.spriteFrame.rect=new h(o*b,0,o,n),p.getComponent(y).setContentSize(o,n),p.setPosition(new f(s+a*o+this._spaceX*a,0,0))}},o(t,[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.change()}},{key:"sheet",get:function(){return this._sheet},set:function(e){this._sheet=e,this.change()}},{key:"spaceX",get:function(){return this._spaceX},set:function(e){this._spaceX=e,this.change()}},{key:"isCenter",get:function(){return this._isCenter},set:function(e){this._isCenter=e,this.change()}}]),t}(b)).prototype,"value",[m],Object.getOwnPropertyDescriptor(P.prototype,"value"),P.prototype),k=t(P.prototype,"_value",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0123456789.:"}}),t(P.prototype,"sheet",[C],Object.getOwnPropertyDescriptor(P.prototype,"sheet"),P.prototype),j=t(P.prototype,"_sheet",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"0123456789.:"}}),t(P.prototype,"spaceX",[w],Object.getOwnPropertyDescriptor(P.prototype,"spaceX"),P.prototype),N=t(P.prototype,"_spaceX",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),t(P.prototype,"isCenter",[A],Object.getOwnPropertyDescriptor(P.prototype,"isCenter"),P.prototype),I=t(P.prototype,"_isCenter",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=t(P.prototype,"spriteFrame",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=P))||D)||D)||D));s._RF.pop()}}}));

System.register("chunks:///_virtual/ForceFailure.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./behavior-status.ts","./btclass.ts","./behavior-decorator.ts"],(function(t){"use strict";var e,r,c,o,u;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},null,function(t){c=t.BehaviorStatus},function(t){o=t.ccclass},function(t){u=t.BehaviorDecorator}],execute:function(){var i;r._RF.push({},"0c445cwFwlFJIy1bJtPqjcb","ForceFailure",void 0);t("ForceFailure",o("bt.ForceFailure")(i=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.execute=function(e){return e=c.Failure,t.prototype.execute.call(this,e)},r}(u))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/ForceInterrupter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./property.ts","./blackboard-declaration.ts","./shared-variable.ts","./behavior-decorator.ts"],(function(t){"use strict";var e,r,i,o,a,n,l,s,u,c,p,h,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy},null,function(t){n=t.ccclass},function(t){l=t.property},function(t){s=t.ENotifyObserver,u=t.EAbortType,c=t.EQueryKey},function(t){p=t.SharedDynamic,h=t.SharedVariable},function(t){y=t.BehaviorDecorator}],execute:function(){var f,b,g,v,d,T,_,S,E,k,m,I,V;a._RF.push({},"84cc7xNzHpN+6XMX/fg4L5x","ForceInterrupter",void 0);t("ForceInterrupter",(f=n("bt.ForceInterrupter"),b=l({type:s,tooltip:"触发时机（比较结果改变时/黑板键的值改变时）"}),g=l({type:u,tooltip:"中断类型（Self：中断自身分支；LowerPriority：中断低优先级的兄弟分支）"}),v=l({type:c,tooltip:"比较方式"}),d=l({type:p,tooltip:"用于与 {{target}} 对应黑板键的值进行比较"}),T=l({type:h,tooltip:"指定黑板键"}),f((E=e((S=function(t){function e(){for(var e,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];return e=t.call.apply(t,[this].concat(a))||this,i(e,"notifyType",E,o(e)),i(e,"abortType",k,o(e)),i(e,"keyQuery",m,o(e)),i(e,"targetValue",I,o(e)),i(e,"target",V,o(e)),e._isSet=!1,e._isEqual=!1,e}r(e,t);var a=e.prototype;return a.load=function(){var e,r;t.prototype.load.call(this),this.$context.blackboard.on(s.OnValueChange,this.onValueChange,this),this._isSet=void 0!==(null==(e=this.target)?void 0:e.value),this._isEqual=(null==(r=this.target)?void 0:r.value)==this.targetValue},a.destroy=function(){this.$context.blackboard.targetOff(this),this.reset(),t.prototype.destroy.call(this)},a.reset=function(){this._isSet=!1,this._isEqual=!1},a.onValueChange=function(t,e){if(this.abortType!==u.None&&this.target&&this.target.name==t.name){if(this.notifyType==s.OnValueChange){if(this.target.value==e)return}else if(this.notifyType==s.OnResultChange){var r=void 0!==(null==t?void 0:t.value);if(this.keyQuery==c.IsSet&&r){if(this._isSet==r)return}else if(this.keyQuery==c.IsNotSet&&!r&&this._isSet==r)return;this._isSet=r;var i=(null==t?void 0:t.value)==this.targetValue;if(this.keyQuery==c.IsEqualTo&&i){if(this._isEqual==i)return}else if(this.keyQuery==c.IsNotEqualTo&&!i&&this._isEqual==i)return;this._isEqual=i}this.abortType!=u.LowerPriority&&this.abortType!=u.Both||this.parent.abort(),this.abortType!=u.Self&&this.abortType!=u.Both||this.owner.abort()}},a.execute=function(e){return t.prototype.execute.call(this,e)},e}(y)).prototype,"notifyType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.OnValueChange}}),k=e(S.prototype,"abortType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.None}}),m=e(S.prototype,"keyQuery",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.IsEqualTo}}),I=e(S.prototype,"targetValue",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),V=e(S.prototype,"target",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=S))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/ForceRunning.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./behavior-status.ts","./btclass.ts","./behavior-decorator.ts"],(function(n){"use strict";var t,e,o,i,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy},null,function(n){o=n.BehaviorStatus},function(n){i=n.ccclass},function(n){r=n.BehaviorDecorator}],execute:function(){var u;e._RF.push({},"b7669siUSlIOpyiRz9musn0","ForceRunning",void 0);n("ForceRunning",i("bt.ForceRunning")(u=function(n){function e(){return n.apply(this,arguments)||this}return t(e,n),e.prototype.execute=function(t){return t=o.Running,n.prototype.execute.call(this,t)},e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/ForceSuccessful.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./behavior-status.ts","./btclass.ts","./behavior-decorator.ts"],(function(t){"use strict";var e,c,s,u,o;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy},null,function(t){s=t.BehaviorStatus},function(t){u=t.ccclass},function(t){o=t.BehaviorDecorator}],execute:function(){var r;c._RF.push({},"ef4acEffpdO1IBYSHuf4GgQ","ForceSuccessful",void 0);t("ForceSuccessful",u("bt.ForceSuccessful")(r=function(t){function c(){return t.apply(this,arguments)||this}return e(c,t),c.prototype.execute=function(e){return e=s.Success,t.prototype.execute.call(this,e)},c}(o))||r);c._RF.pop()}}}));

System.register("chunks:///_virtual/FPSController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./CustomInput.ts","./StateController.ts"],(function(t){"use strict";var e,o,n,i,s,r,u,a,l,h;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Vec3,s=t.Quat,r=t.KeyCode,u=t.Component},function(t){a=t.SmoothDamper},function(t){l=t.customInput},function(t){h=t.StateController}],execute:function(){var p;o._RF.push({},"0f7c14ApUhDOa9W10fwkwuy","FPSController",void 0);var c=n.ccclass,m=(n.property,new i),_=new i,d=new i,S=new s;t("FPSController",c("FPSController")(p=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this)._euler=new i,e._speedSmoothDamper=new a,e._eulerSmoothDamper=new a,e._moveSpeed=new i,e._state=null,e}e(o,t);var n=o.prototype;return n.onLoad=function(){l.initialize(!0),this._state=this.getComponentInChildren(h),s.toEuler(this._euler,this.node.worldRotation)},n.update=function(t){var e=this._state;e&&(this._updateRotation(e,t),this._updatePosition(e,t),this._updateState(e,t))},n._updateRotation=function(t,e){m.set(this._euler).subtract3f(l.mouseX,l.mouseY,0),this._eulerSmoothDamper.Vec3_smoothDamp(this._euler,this._euler,m,l.mouseRight?1:.2,e),s.fromEuler(S,this._euler.y,this._euler.x,0),this.node.worldRotation=S},n._updatePosition=function(t,e){_.set(l.horizontal,0,l.vertical),i.transformQuat(_,_,this.node.worldRotation),_.y=0,_.normalize(),_.multiplyScalar(l.mouseRight?1.5:3),this._speedSmoothDamper.Vec3_smoothDamp(this._moveSpeed,this._moveSpeed,_,.1,e),i.multiplyScalar(d,this._moveSpeed,e),this.node.worldPosition=this.node.worldPosition.add(d)},n._updateState=function(t,e){l.getButton(r.KEY_R)?t.setState(h.RELOAD_OUTOF_AMMO):(t.setValue("moveSpeed",this._moveSpeed.length()),t.setValue("mouseRight",l.mouseRight),t.setValue("mouseLeft",l.mouseLeft))},o}(u))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/FreeLookHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./Base.ts","./CameraHandler.ts"],(function(t){"use strict";var e,o,a,i,n,s,l,h,c,r,_,u,p,d,f,m,D,v,g,b;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,a=t.Vec3,i=t.Vec2,n=t.systemEvent,s=t.SystemEvent,l=t.sys,h=t.EventMouse,c=t.view,r=t.toRadian,_=t.clamp},function(t){u=t.EPSILON,p=t.Vec3_setFromSpherical,d=t.quarticDamp,f=t.Vec3_setFromMatrixColumn,m=t.Vec3_closeTo,D=t.Spherical,v=t.SmoothDamper},function(t){g=t.BaseFlag},function(t){b=t.CameraHandler}],execute:function(){o._RF.push({},"1d097iHg4pBDLtSMsYjfxFc","FreeLookHandler",void 0);var P,E=Math.abs,M=Math.tan;!function(t){t[t.None=0]="None",t[t.RotateZoom=g.Custom<<0]="RotateZoom",t[t.Pan=g.Custom<<1]="Pan"}(P||(P={}));var S=new a,w=new a,y=new i,F=new a,T=new a,O=new i,L=new i,U=new i,j=new i;t("FreeLookHandler",function(t){function o(){for(var e,o=arguments.length,a=new Array(o),n=0;n<o;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this)._button=-1,e._rotateDelta=new i,e._panDelta=new i,e._panDeltaPrevious=new i,e._panFrame=0,e._panEnable=1,e._distanceScale=1,e._spherical=new D,e._smoothDamper=new v,e}e(o,t);var g=o.prototype;return g.onEnable=function(){n.on(s.EventType.MOUSE_DOWN,this._onMouseDown,this),n.on(s.EventType.MOUSE_UP,this._onMouseUp,this),n.on(s.EventType.MOUSE_WHEEL,this._onMouseWheel,this),n.on(s.EventType.MOUSE_MOVE,this._onMouseMove,this),n.on(s.EventType.TOUCH_MOVE,this._onTouchMove,this),n.on(s.EventType.TOUCH_END,this._onTouchEnd,this)},g.onDisable=function(){n.off(s.EventType.MOUSE_DOWN,this._onMouseDown,this),n.off(s.EventType.MOUSE_UP,this._onMouseUp,this),n.off(s.EventType.MOUSE_WHEEL,this._onMouseWheel,this),n.off(s.EventType.MOUSE_MOVE,this._onMouseMove,this),n.off(s.EventType.TOUCH_MOVE,this._onTouchMove,this),n.off(s.EventType.TOUCH_END,this._onTouchEnd,this)},g._getPreviousLocation=function(t,e){return t.getPreviousLocation(e)},g._getLocation=function(t,e){return t.getLocation(e)},g._onTouchMove=function(t,e){if(l.isMobile){var o=e.getAllTouches();1===o.length?(this._rotateDelta.add(this._calculateRotateDelta(y,this._getPreviousLocation(e,O),this._getLocation(e,L))),this._objFlag|=P.RotateZoom):o.length>1&&(this._getPreviousLocation(o[0],U),this._getPreviousLocation(o[1],j),this._getLocation(o[0],O),this._getLocation(o[1],L),this._distanceScale*=this._calculateDistanceScale(i.distance(U,j)/i.distance(O,L)),this._objFlag|=P.RotateZoom,U.add(j).multiplyScalar(.5),O.add(L).multiplyScalar(.5),this._setPanDelta(this._calculatePanDelta(y,U,O)))}},g._onTouchEnd=function(t,e){this._panFrame<=5&&(this._panEnable=1,this._panDelta.set(this._panDeltaPrevious),this._objFlag|=P.Pan)},g._onMouseDown=function(t){this._button=t.getButton()},g._onMouseUp=function(t){this._button=-1},g._onMouseWheel=function(t){t.getScrollY()>0?(this._distanceScale*=this._calculateDistanceScale(.95),this._objFlag|=P.RotateZoom):t.getScrollY()<0&&(this._distanceScale*=this._calculateDistanceScale(1/.95),this._objFlag|=P.RotateZoom)},g._onMouseMove=function(t){switch(this._button){case h.BUTTON_LEFT:this._rotateDelta.add(this._calculateRotateDelta(y,this._getPreviousLocation(t,O),this._getLocation(t,L))),this._objFlag|=P.RotateZoom;break;case h.BUTTON_MIDDLE:this._setPanDelta(this._calculatePanDelta(y,this._getPreviousLocation(t,O),this._getLocation(t,L)))}},g._setPanDelta=function(t){(this._objFlag&P.Pan||E(t.x)+E(t.y)>u)&&(this._objFlag|=P.Pan,this._panFrame=0,this._panEnable=0,this._panDelta.add(t),this._panDeltaPrevious.set(this._panDelta))},g._calculateDistanceScale=function(t){return t},g._calculateRotateDelta=function(t,e,o){var a=this._vcam.body.freelook;return i.subtract(t,o,e).multiplyScalar(.1*a.rotateSpeed*Math.PI/c.getVisibleSizeInPixel().height),t},g._calculatePanDelta=function(t,e,o){var a=this._vcam.body.freelook;return i.subtract(t,o,e).multiplyScalar(a.panSpeed/c.getVisibleSizeInPixel().height),t},g.updateCamera=function(t){var e=this._vcam,o=e.body.freelook,i=0,n=0;if(o.forbidX&&(this._rotateDelta.x=0,n++),o.forbidY&&(this._rotateDelta.y=0,n++),o.forbidZ&&(this._distanceScale=1,n++),n>=3&&(this._objFlag&=~P.RotateZoom),o.forbidPan&&(this._panDelta.set(0,0),this._objFlag&=~P.Pan),e.lookAt){var s=e.aim.composer;if(a.add(S,e.lookAt.worldPosition,s.trackedObjectOffset),this._objFlag&P.RotateZoom){a.subtract(w,e.node.worldPosition,S);var l=2*w.length()*M(r(.5*e.lens.fov)),h=this._rotateDelta.x*l,c=this._rotateDelta.y*l;this._spherical.setFromVec3(w),this._spherical.theta=this._spherical.theta-h,this._spherical.phi=_(this._spherical.phi+c,u,Math.PI-u),this._spherical.radius=this._spherical.radius*this._distanceScale,p(w,this._spherical),e.node.worldPosition=w.add(S),this._rotateDelta.multiplyScalar(d(1,0,o.rotateSmoothing,t)),this._distanceScale=1,E(h)+E(c)<=u&&(this._objFlag&=~P.RotateZoom),i++}if(this._objFlag&P.Pan){a.subtract(w,e.node.worldPosition,S),f(F,e.node.worldMatrix,0),f(T,e.node.worldMatrix,1);var D=2*w.length()*M(r(.5*e.lens.fov)),v=s.trackedObjectOffset;v.subtract(F.multiplyScalar(this._panDelta.x*D)),v.subtract(T.multiplyScalar(this._panDelta.y*D)),a.add(S,e.lookAt.worldPosition,v),e.node.worldPosition=w.add(S),this._panDelta.multiplyScalar(d(1,0,o.panSmoothing,t)*this._panEnable),E(this._panDelta.x)+E(this._panDelta.y)<=u&&(this._objFlag&=~P.Pan),i++}this._panFrame<10&&this._panFrame++}e.follow&&(i>0&&a.subtract(o.followOffset,e.node.worldPosition,e.follow.worldPosition),a.add(w,e.follow.worldPosition,o.followOffset),o.followDamping>0?this._smoothDamper.Vec3_smoothDamp(S,e.node.worldPosition,w,o.followDamping,t):S.set(w),m(S,e.node.worldPosition)||(e.node.worldPosition=S))},o}(b));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameData.ts",["cc","./DataClass.ts","./EnumTypes.ts"],(function(e){"use strict";var a,i,_,s,n,t;return{setters:[function(e){a=e.cclegacy,i=e.Vec2,_=e.Vec3,s=e.Color},function(e){n=e.Cam_Default_Data},function(e){t=e.TeachStepType}],execute:function(){a._RF.push({},"edee8jn8lBL95uzt7YMQkUC","GameData",void 0);var l=e("default",(function(){}));l.teachStep=t.chooseDinasor,l.cam=null,l.enemyDamageAxis=[.25,.25,.45,.7,.8,.9,1],l.aiMove=!0,l.aiAttack=!0,l.aiSkill=!0,l.aiEmoji=!0,l.isSdkOk=!1,l.isWin=!1,l.rankScore=[100,250,450,700,1e3,1350,1750],l.playerScore=0,l.enemyScore=0,l.winScore=3e3,l.killWinScore=30,l.checkPoint=void 0,l.itemRefreshTime=5,l.tower_addScore_perSecond=5,l.cam_default_data_small=new n(1,5,new i(0,180),new _(0,2.7,-10),new _(-20,180,0)),l.cam_default_data_big=new n(3,10,new i(0,180),new _(0,5.4,-20),new _(-20,180,0)),l.cam_default_data_small_teach=new n(1,5,new i(0,90),new _(0,2.7,-10),new _(-20,180,0)),l.player=void 0,l.heros=[],l.players=[],l.enemies=[],l.ais=[],l.towers=[],l.playerColor=new s(0,188,254,255),l.enemyColor=new s(255,0,0,255),l.tower_controlTime=5,l.tower_controlBackTime=5,l.enemyFindRange=50,l.autoAim_DistanceSqr=1e4,l.camRot_MinX=-40,l.camRot_MaxX=60,l.camRot_Yaxis=2,l.camRot_Xaxis=2,l.sceneObj_Mask=2,l.player_mask=8,l.enemy_mask=4,l.npc_mask=16,l.fireEffect_RangeSqr=1e4,l.dinasor1_hp=15e3,l.dinasor2_hp=12e3,l.dinasor3_hp=1e4,l.dinasor4_hp=2e4,l.dinasor5_hp=23500,l.dinasor6_hp=25e3,l.dinasor1_speed=20,l.dinasor2_speed=20,l.dinasor3_speed=20,l.dinasor4_speed=15,l.dinasor5_speed=12,l.dinasor6_speed=15,l.dinasor1_atk=[0,2080],l.dinasor2_atk=[1150,1150],l.dinasor3_atk=[500,5e3],l.dinasor4_atk=[150,150],l.dinasor5_atk=[1500,1500],l.dinasor6_atk=[1e3,9e3],l.dinasor1_atk_interval=.5,l.dinasor2_atk_interval=1,l.dinasor3_atk_interval=1,l.dinasor4_atk_interval=.05,l.dinasor5_atk_interval=1,l.dinasor6_atk_interval=1,l.dinasor1_atk_distance=100,l.dinasor2_atk_distance=500,l.dinasor3_atk_distance=250,l.dinasor4_atk_distance=250,l.dinasor5_atk_distance=500,l.dinasor6_atk_distance=250,l.skill_1_speedAxis=2,l.skill_1_time=10,l.skill_1_cd=20,l.skill_1_distanceSqr=25,l.skill_1_damage=4e3,l.skill_1_heal=4e3,l.skill_2_cd=1,l.skill_2_damageAxis=2,l.skill_3_cd=20,l.skill_3_time=10,l.skill_3_speedAxis=1.5,l.skill_3_damageAxis=2,l.skill_4_cd=20,l.skill_4_damage=3500,l.skill_4_rangeSqr=225,l.skill_4_time=10,l.skill_4_defendAxis=.75,l.skill_5_cd=20,l.skill_5_damage=4e3,l.skill_5_rangeSqr=100,l.skill_5_speedAxis=2,l.skill_5_time=10,l.attackBuff_Time=10,l.attackBuff_addAxis=.1,l.attackBuff_maxAxis=.5,a._RF.pop()}}}));

System.register("chunks:///_virtual/GameLoadingUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./StorageMgr.ts","./Bar.ts"],(function(t){"use strict";var e,i,n,a,o,s,r,l;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,a=t.Label,o=t.Component},function(t){s=t.default},function(t){r=t.default},function(t){l=t.Bar}],execute:function(){var h;i._RF.push({},"4c10eaedJhNG6jgnnJGLij7","GameLoadingUI",void 0);var c=n.ccclass;n.property,t("GameLoadingUI",c("GameLoadingUI")(h=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).timeLabel=null,e.icons1=void 0,e.icons2=void 0,e.bars=[],e.winTargetLabel=void 0,e.searchPlayer=void 0,e.timeCount=0,e.nowValue=0,e}e(i,t);var n=i.prototype;return n.onLoad=function(){this.timeLabel=this.node.getChildByPath("searchPlayer/label").getComponent(a),this.icons1=this.node.getChildByPath("title_2/icons_1"),this.icons2=this.node.getChildByPath("title_2/icons_2"),this.bars=this.node.getChildByName("title_2").getComponentsInChildren(l),this.winTargetLabel=this.node.getChildByName("title_1").getComponentInChildren(a),this.searchPlayer=this.node.getChildByName("searchPlayer")},n.start=function(){var t=this;if(this.timeLabel.string=this.timeCount.toString()+" 秒",this.schedule((function(){t.timeCount++,t.timeLabel.string=t.timeCount.toString()+" 秒"}),1),0==r.instance.storageData.playCount){this.winTargetLabel.string="完成新手教程",this.searchPlayer.active=!1,this.node.getChildByPath("title_2/roundTime").active=!1;var e=this.node.getChildByName("Tips_2"),i=e.children[0].getComponent(a),n=e.children[1].getComponent(a);i.string="恐龙训练营",n.string="基础是通往恐龙之王的第一步"}else this.winTargetLabel.string="率先击杀"+s.killWinScore.toString()+"名敌人"},n.updateProgress=function(t){t>this.nowValue+.008?this.nowValue+=.008:this.nowValue=t;for(var e=Math.floor(this.nowValue/.15),i=0;i<this.icons1.children.length;i++)this.icons1.children[i].active=i>=e&&i<e+6,this.icons2.children[i].active=i>=e&&i<e+6;for(var n=0;n<this.bars.length;n++)this.bars[n].value=this.nowValue},i}(o))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NavMeshMgr.ts","./PlayerCtr.ts","./Hero.ts","./Item.ts","./Tower.ts","./DataClass.ts","./EnumTypes.ts","./GameData.ts","./UMTrack.ts","./Tool.ts","./EndUI.ts","./HpBar.ts","./AssetMgr.ts","./EventMgr.ts","./PoolMgr.ts","./SoundMgr.ts","./StorageMgr.ts"],(function(e){"use strict";var t,i,a,n,o,h,s,r,c,l,d,p,m,g,y,v,u,f,C,S,P,B,I,k,N,U,_,T,H,w,E,L,M;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,a=e._decorator,n=e.find,o=e.instantiate,h=e.Vec3,s=e.Line,r=e.Vec2,c=e.game,l=e.Component},function(e){d=e.NavMeshMgr},function(e){p=e.PlayerCtr},function(e){m=e.Hero},function(e){g=e.Item},function(e){y=e.Tower},function(e){v=e.TopState_PeopleCount,u=e.TopState_Score},function(e){f=e.CampType,C=e.EventType,S=e.DinasorType,P=e.TeachStepType,B=e.SoundType},function(e){I=e.default},function(e){k=e.UMTrack},function(e){N=e.default},function(e){U=e.EndUI},function(e){_=e.HpBar},function(e){T=e.AssetMgr},function(e){H=e.EventMgr},function(e){w=e.PoolObjType,E=e.PoolMgr},function(e){L=e.SoundMgr},function(e){M=e.default}],execute:function(){var b;i._RF.push({},"52bf7hYAZxA4JvqhpmN5TL4","GameMgr",void 0);var D=a.ccclass;a.property,e("GameMgr",D("GameMgr")(b=function(e){function i(){for(var t,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).mainScene=void 0,t.navMeshMgr=void 0,t.heroNode=void 0,t.heros=void 0,t.hpBars=void 0,t.sceneNode=void 0,t.towers=void 0,t.playerCtr=void 0,t.playerHero=void 0,t.gameUI=void 0,t.endUI=void 0,t.selectUI=void 0,t.tower_Small_UIs=void 0,t.backChooseBtn=void 0,t.PlayFeedback=void 0,t.playerHeroDieCount=0,t.isEnd=!1,t.roundStartTime=0,t.checkIndex=0,t.playerKillCount=0,t.enemyKillCount=0,t.playerHeroKillCount=0,t.playerHeroSupportCount=0,t.teachPoint=void 0,t.teachPath=void 0,t.topState=void 0,t.fireBtn=void 0,t.skillBtn=void 0,t.teachHand=void 0,t.joyStick=void 0,t.teachLine=void 0,t.teachBg=void 0,t.teach_rotStartRot=new r,t}t(i,e);var a=i.prototype;return a.onLoad=function(){var e=n("Canvas");e.active=!0,this.gameUI=e.getChildByName("GameUI"),this.endUI=e.getChildByName("EndUI"),this.selectUI=e.getChildByName("SelectUI"),this.backChooseBtn=this.gameUI.getChildByName("BackChooseBtn"),I.checkPoint=this.node.parent.getChildByName("CheckPoint"),this.gameUI.active=!0,this.endUI.active=!1,this.selectUI.active=!0},a.start=function(){var e=this,t=0==M.instance.storageData.playCount;console.log("数值初始化"),I.playerScore=0,I.enemyScore=0,console.log("主场景获取"),this.mainScene=this.node.parent,console.log("寻路系统获取"),this.navMeshMgr=this.node.getComponentInChildren(d),console.log("玩家单位获取"),this.heroNode=this.mainScene.getChildByName("HeroNode"),this.playerCtr=this.heroNode.getChildByName("Player").getComponent(p),this.playerHero=this.playerCtr.getComponent(m),I.player=this.playerHero,this.playerHero.node.active=!1;var i=this.heroNode.getChildByName("Npc1"),a=this.heroNode.getChildByName("Enemy1");if(!t){for(var s=0;s<4;s++){var r=o(i);r.name="Npc"+(s+2).toString(),this.heroNode.addChild(r),r.setWorldPosition(i.getWorldPosition())}for(var c=0;c<5;c++){var l=o(a);l.name="Enemy"+(c+2).toString(),this.heroNode.addChild(l),l.setWorldPosition(a.getWorldPosition())}}this.heros=this.heroNode.getComponentsInChildren(m),I.heros=this.heros,console.log("血条UI获取");var g=n("Canvas");this.hpBars=g.getChildByPath("GameUI/HpBars");for(var y=this.hpBars.children[0],v=1;v<this.heros.length;v++){var u=o(y);this.hpBars.addChild(u),u.setPosition(new h(-200,500,0))}console.log("场景节点获取");var S=this.mainScene.getChildByName("Scene"),P=this.mainScene.getChildByName("Scene-P");if(this.sceneNode=t?P:S,P.active=t,S.active=!t,console.log("在各路径点生成道具"),!t){for(var B=[w.AtkUp,w.Heal,w.Sheild,w.SpeedUp],k=0;k<I.checkPoint.children.length;k++)if(N.percent(.5)){var U=I.checkPoint.children[k],_=E.instance.getObj(N.getRandomInArray(B));U.addChild(_.node),_.node.setPosition(h.ZERO)}this.schedule(this.bornItem,I.itemRefreshTime)}console.log("获取阵营与AI分类");for(var T=[],L=[],b=[],D=0;D<this.heros.length;D++)this.heros[D].camp==f.Player?(this.heros[D].isPlayerCtrl||b.push(this.heros[D]),L.push(this.heros[D])):this.heros[D].camp==f.Enemy&&(T.push(this.heros[D]),b.push(this.heros[D]));I.players=L,I.enemies=T,I.ais=b,console.log("塔UI_小获取"),H.on(C.Game_Player_Select,this,this.startGame),H.on(C.Game_Player_Dead,this,this.playerDie),H.on(C.Game_HeroDie_Event,this,this.updateKill),N.d2_AddClickEvent(this.backChooseBtn,this,(function(){I.player.die(null),e.addKillCount(f.Player),e.playerDie()})),this.teachInit()},a.startGame=function(e){var t=this;H.off(C.Game_Player_Select,this,this.startGame),this.playerHero.node.active=!0,this.scheduleOnce((function(){t.selectUI.active=!1}));var i=0,a=e;this.playerHero.modelInit(a,this.hpBars.children[i].getComponent(_)),i++,console.log("恐龙"+(a+1)+"生成：",i);var n=[S.Dinasor1];T.instance.isDinasor2Bundle&&n.push(S.Dinasor2),T.instance.isDinasor4Bundle&&n.push(S.Dinasor4),0==M.instance.storageData.playCount&&(n=[S.Dinasor4]);for(var o=0;o<I.ais.length;o++){var h=N.getRandomInArray(n);I.ais[o].modelInit(h,this.hpBars.children[i].getComponent(_)),i++}this.playerCtr.controlOn(),L.instacne&&L.instacne.setMuiscVolume(.5),0!=M.instance.storageData.playCount&&(k.instance.trackEvent("Game_Start"),this.roundStartTime=(new Date).getTime())},a.reBornPlayer=function(e){H.off(C.Game_Player_Select,this,this.reBornPlayer);var t=e;this.selectUI.active=!1,this.playerHero.reBorn(t),this.playerCtr.controlOn(),L.instacne&&L.instacne.setMuiscVolume(.5)},a.playerDie=function(){this.playerHeroDieCount++,this.playerCtr.controlOff(),this.selectUI.active=!0,H.on(C.Game_Player_Select,this,this.reBornPlayer),L.instacne&&L.instacne.setMuiscVolume(1)},a.gameOver=function(e){var t=this;if(!this.isEnd){if(I.teachStep==P.killEnemy&&this.addTeachStep(),0!=M.instance.storageData.playCount){k.instance.trackEvent("Game_Finish");var i=Math.floor(((new Date).getTime()-this.roundStartTime)/1e3);k.instance.trackEvent("Game_Time",i.toString())}else k.instance.trackEvent("Teach_Finish_All");this.isEnd=!0,this.gameUI.parent.getChildByName("TopState").active=!1,this.scheduleOnce((function(){t.playerCtr.controlOff()}),2),I.isWin=e,this.endUI.active=!0,this.endUI.getComponent(U).dataUpdate(this.playerHeroKillCount,this.playerHeroSupportCount,this.playerHeroDieCount),M.instance.addPlayCount()}},a.update=function(e){this.AISightUpdate(),this.checkAlive()},a.lateUpdate=function(e){},a.AISightUpdate=function(){this.heros[this.checkIndex].checkUpdate(),this.checkIndex++,this.checkIndex>=this.heros.length&&(this.checkIndex=0)},a.checkAlive=function(){for(var e=0,t=0,i=0;i<I.players.length;i++)I.players[i].isDead||e++;for(var a=0;a<I.enemies.length;a++)I.enemies[a].isDead||t++;H.event(C.TopState_Alive_Update,new v(e,t))},a.towerScoreUpdate=function(){if(!this.isEnd){for(var e=0;e<I.towers.length;e++){switch(I.towers[e].getComponent(y).nowState){case-1:I.enemyScore+=I.tower_addScore_perSecond;break;case 1:I.playerScore+=I.tower_addScore_perSecond}}I.playerScore>=I.winScore&&(I.playerScore=I.winScore,this.gameOver(!0)),I.enemyScore>=I.winScore&&(I.enemyScore=I.winScore,this.gameOver(!1)),H.event(C.TopState_Score_Update,new u(I.playerScore,I.enemyScore))}},a.bornItem=function(){for(var e=[w.AtkUp,w.Heal,w.Sheild,w.SpeedUp],t=0;t<I.checkPoint.children.length;t++){var i=I.checkPoint.children[t];if(0==i.children.length){var a=E.instance.getObj(N.getRandomInArray(e));i.addChild(a.node),a.node.setPosition(h.ZERO);break}}},a.addKillCount=function(e){I.teachStep<P.killEnemy||(e==f.Enemy?this.playerKillCount++:e==f.Player&&this.enemyKillCount++,this.updateKillCount())},a.updateKillCount=function(){if(!this.isEnd){var e=0==M.instance.storageData.playCount?1:I.killWinScore;this.playerKillCount>=e?(this.playerKillCount=e,this.gameOver(!0)):this.enemyKillCount>=e&&(this.enemyKillCount=e,this.gameOver(!1)),H.event(C.TopState_Score_Update,new u(this.playerKillCount,this.enemyKillCount))}},a.updateKill=function(e){this.addKillCount(e.camp),"Player"==e.killerName?(this.playerHeroKillCount++,H.event(C.Game_Player_Kill),L.instacne&&L.instacne.playSound(B.KillConfirmed)):-1!=e.hurtHeroNames.indexOf("Player")&&(this.playerHeroSupportCount++,H.event(C.Game_Player_Support))},a.teachInit=function(){if(0==M.instance.storageData.playCount){I.teachStep=P.chooseDinasor,this.teachPoint=this.sceneNode.getChildByName("HeroNode-P"),this.teachPath=this.sceneNode.getChildByName("TechPath"),this.teachLine=this.node.parent.getChildByName("TeachLine").getComponent(s),this.topState=this.gameUI.parent.getChildByName("TopState"),this.topState.active=!1,this.backChooseBtn.active=!1,this.gameUI.getChildByName("CoolBtn").active=!1,this.gameUI.getChildByName("SadBtn").active=!1,this.gameUI.getChildByName("HappyBtn").active=!1,this.teachBg=this.gameUI.parent.getChildByName("teachBg"),this.fireBtn=this.gameUI.getChildByName("FireBtn"),this.skillBtn=this.gameUI.getChildByName("SkillBtn"),this.fireBtn.active=!1,this.skillBtn.active=!1,this.teachHand=this.gameUI.parent.getChildByName("teachHand"),this.teachHand.active=!0,N.activeIndexInChildren(this.teachHand,0),this.joyStick=this.gameUI.getChildByName("JoyStick"),I.aiMove=!1,I.aiAttack=!1,I.aiSkill=!1,I.aiEmoji=!1,I.player.node.setWorldPosition(this.teachPoint.getChildByName("Player").getWorldPosition()),H.on(C.Game_Teach_Add,this,this.addTeachStep);var e=this.heroNode.getChildByName("Npc1"),t=this.heroNode.getChildByName("Enemy1");e.setWorldPosition(this.teachPoint.getChildByName("Npc").getWorldPosition()),t.setWorldPosition(this.teachPoint.getChildByName("Enemy").getWorldPosition());for(var i=this.teachPath.getComponentsInChildren(g),a=0;a<i.length;a++)i[a].firstBorn(),i[a].init();this.schedule(this.teachUpdate)}else this.teachHand=this.gameUI.parent.getChildByName("teachHand"),this.teachHand.active=!1,I.teachStep=P.End,I.aiMove=!0,I.aiAttack=!0,I.aiSkill=!0,I.aiEmoji=!0},a.teachUpdate=function(){var e,t,i=I.player.node.getWorldPosition();switch(I.teachStep){case P.moveCam:var a=r.distance(this.teach_rotStartRot,I.player.targetRot);a>15&&a<90&&this.addTeachStep();break;case P.goPoint1:t=this.teachPath.children[0].getWorldPosition(),(e=h.distance(i,t))>5?(this.teachLine.tile=new r(e/2,1),this.teachLine.offset=new r(this.teachLine.offset.x-c.deltaTime,0),this.teachLine.positions=[i,t]):this.addTeachStep();break;case P.goPoint2:t=this.teachPath.children[1].getWorldPosition(),(e=h.distance(i,t))>5?(this.teachLine.tile=new r(e/2,1),this.teachLine.offset=new r(this.teachLine.offset.x-c.deltaTime,0),this.teachLine.positions=[i,t]):this.addTeachStep();break;case P.goPoint3:t=this.teachPath.children[2].getWorldPosition(),(e=h.distance(i,t))>5?(this.teachLine.tile=new r(e/2,1),this.teachLine.offset=new r(this.teachLine.offset.x-c.deltaTime,0),this.teachLine.positions=[i,t]):this.addTeachStep();break;case P.getItem1:t=this.teachPath.children[3].getWorldPosition(),(e=h.distance(i,t))>5?(this.teachLine.tile=new r(e/2,1),this.teachLine.offset=new r(this.teachLine.offset.x-c.deltaTime,0),this.teachLine.positions=[i,t]):this.addTeachStep();break;case P.getItem2:t=this.teachPath.children[4].getWorldPosition(),(e=h.distance(i,t))>5?(this.teachLine.tile=new r(e/2,1),this.teachLine.offset=new r(this.teachLine.offset.x-c.deltaTime,0),this.teachLine.positions=[i,t]):this.addTeachStep();break;case P.getItem3:t=this.teachPath.children[5].getWorldPosition(),(e=h.distance(i,t))>5?(this.teachLine.tile=new r(e/2,1),this.teachLine.offset=new r(this.teachLine.offset.x-c.deltaTime,0),this.teachLine.positions=[i,t]):this.addTeachStep()}},a.addTeachStep=function(){switch(I.teachStep++,I.teachStep){case P.moveCam:N.activeIndexInChildren(this.teachHand,1),this.teachBg.active=!0,this.teach_rotStartRot=I.cam_default_data_small_teach.rotXY.clone();break;case P.goPoint1:this.teachHand.children[1].active=!1,this.teachHand.children[2].active=!0;var e=this.joyStick.getPosition();e.y+=200,this.teachHand.children[2].getChildByName("hand").setPosition(e),this.teachBg.active=!1;break;case P.goPoint2:this.teachHand.children[4].active=!0,this.teachHand.children[2].active=!1,this.teachPath.children[0].children[0].active=!1;break;case P.goPoint3:this.teachPath.children[1].children[0].active=!1;break;case P.getItem1:this.teachPath.children[2].children[0].active=!1;break;case P.getItem2:case P.getItem3:break;case P.killEnemy:this.teachLine.destroy(),this.fireBtn.active=!0,this.skillBtn.active=!0,this.teachHand.children[4].active=!1,this.teachHand.children[3].active=!0;break;case P.End:this.teachHand.children[3].active=!1;break;default:console.warn("未知步骤",I.teachStep)}k.instance.trackEvent("Teach_Finish_"+I.teachStep.toString())},i}(l))||b);i._RF.pop()}}}));

System.register("chunks:///_virtual/GridUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var n,i,c,e,a,s,o,r,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,c=t._decorator,e=t.Component},function(t){a=t.default},function(t){s=t.default},function(t){o=t.default},function(t){r=t.default},function(t){h=t.default}],execute:function(){var d;i._RF.push({},"0dfda1dSlxH5KlORPyKdl2Q","GridUI",void 0);var l=c.ccclass;c.property,t("default",l("GridUI")(d=function(t){function i(){for(var n,i=arguments.length,c=new Array(i),e=0;e<i;e++)c[e]=arguments[e];return(n=t.call.apply(t,[this].concat(c))||this).ccb=null,n.hadClick=!1,n.isShowHide=!1,n}n(i,t);var c=i.prototype;return c.onDisable=function(){this.unscheduleAllCallbacks(),this.ccb&&this.ccb()},c.showUI=function(t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),this.ccb=t,i||o.Instance.NewWuchu2&&s.instance.dataConfig.front_all_gezi_switch?(a.instance.showGrid(),n&&o.Instance.NewWuchu&&s.instance.dataConfig.front_wx_chaping_switch&&r.instance.showInterAd(),this.node.active=!0,this.hadClick=!1,this.isShowHide=!1,this.isShowHide=100*Math.random()<s.instance.dataConfig.front_hot_youxi,s.instance.dataConfig.is_allow_area&&o.Instance.allowScene()&&this.isShowHide&&h.Instance.showHideBanner()):this.ccb&&this.ccb()},c.continueBtnCB=function(){o.Instance.NewWuchu&&this.isShowHide&&!this.hadClick?this.hadClick=!0:(h.Instance.clearShowHideBanner(),a.instance.hideGrid(),this.node.active=!1)},i}(e))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/GridUI2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var n,i,e,c,s,a,o,r;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t._decorator,c=t.Component},function(t){s=t.default},function(t){a=t.default},function(t){o=t.default},function(t){r=t.default}],execute:function(){var h;i._RF.push({},"cdc62eeIYZLe5xXGUsb477K","GridUI2",void 0);var u=e.ccclass;e.property,t("default",u("GridUI2")(h=function(t){function i(){for(var n,i=arguments.length,e=new Array(i),c=0;c<i;c++)e[c]=arguments[c];return(n=t.call.apply(t,[this].concat(e))||this).ccb=null,n.hadClick=!1,n.isShowHide=!1,n}n(i,t);var e=i.prototype;return e.onDisable=function(){this.unscheduleAllCallbacks(),this.ccb&&this.ccb()},e.showUI=function(t,n){this.ccb=t,o.Instance.NewWuchu2&&a.instance.dataConfig.front_gezi_two_switch?(s.instance.showGrid(),this.node.active=!0,this.hadClick=!1,this.isShowHide=!1,this.isShowHide=100*Math.random()<a.instance.dataConfig.front_hot_tuijian,a.instance.dataConfig.is_allow_area&&o.Instance.allowScene()&&this.isShowHide&&r.Instance.showHideBanner()):this.ccb&&this.ccb()},e.continueBtnCB=function(){o.Instance.NewWuchu&&this.isShowHide&&!this.hadClick?this.hadClick=!0:(r.Instance.clearShowHideBanner(),s.instance.hideGrid(),this.node.active=!1)},e.adBtnCB=function(){this.continueBtnCB()},i}(c))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/GridUI3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var n,i,c,e,s,a,o,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,c=t._decorator,e=t.Component},function(t){s=t.default},function(t){a=t.default},function(t){o=t.default},function(t){h=t.default}],execute:function(){var r;i._RF.push({},"f4d32yLQ4hFGJDz6cNmp51R","GridUI3",void 0);var u=c.ccclass;c.property,t("default",u("GridUI3")(r=function(t){function i(){for(var n,i=arguments.length,c=new Array(i),e=0;e<i;e++)c[e]=arguments[e];return(n=t.call.apply(t,[this].concat(c))||this).ccb=null,n.hadClick=!1,n.isShowHide=!1,n}n(i,t);var c=i.prototype;return c.onDisable=function(){this.unscheduleAllCallbacks(),this.ccb&&this.ccb()},c.showUI=function(t){this.ccb=t,o.Instance.NewWuchu2&&a.instance.dataConfig.front_play_gezi_switch?(s.instance.showGrid(),this.node.active=!0,this.hadClick=!1,this.isShowHide=!1,this.isShowHide=100*Math.random()<a.instance.dataConfig.front_hot_xiaochengxu,a.instance.dataConfig.is_allow_area&&o.Instance.allowScene()&&this.isShowHide&&h.Instance.showHideBanner()):this.ccb&&this.ccb()},c.continueBtnCB=function(){o.Instance.NewWuchu&&this.isShowHide&&!this.hadClick?this.hadClick=!0:(h.Instance.clearShowHideBanner(),s.instance.hideGrid(),this.node.active=!1)},c.adBtnCB=function(){this.continueBtnCB()},i}(e))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/GridUI4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var n,i,c,e,s,a,o,h;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,c=t._decorator,e=t.Component},function(t){s=t.default},function(t){a=t.default},function(t){o=t.default},function(t){h=t.default}],execute:function(){var r;i._RF.push({},"aa08aVYJXpArovnELS81Mhd","GridUI4",void 0);var u=c.ccclass;c.property,t("default",u("GridUI4")(r=function(t){function i(){for(var n,i=arguments.length,c=new Array(i),e=0;e<i;e++)c[e]=arguments[e];return(n=t.call.apply(t,[this].concat(c))||this).ccb=null,n.hadClick=!1,n.isShowHide=!1,n.hadShow=void 0,n}n(i,t);var c=i.prototype;return c.onDisable=function(){this.unscheduleAllCallbacks(),this.ccb&&this.ccb()},c.showUI=function(t,n){this.ccb=t,o.Instance.NewWuchu2&&a.instance.dataConfig.front_gezi_two_switch?(this.node.active=!0,this.schedule(this.testGrid,1),this.hadClick=!1,h.Instance.showHideBanner()):this.ccb&&this.ccb()},c.testGrid=function(){s.instance.gridAdArr.length>0&&!this.hadShow&&(this.hadShow=!0,s.instance.showGrid())},c.continueBtnCB=function(){!o.Instance.NewWuchu||this.hadClick?(h.Instance.clearShowHideBanner(),s.instance.hideGrid(),this.unschedule(this.testGrid),this.node.active=!1):this.hadClick=!0},c.adBtnCB=function(){this.continueBtnCB()},i}(e))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/HardLookAtHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./CameraHandler.ts"],(function(o){"use strict";var t,e,n,r,a,i;return{setters:[function(o){t=o.inheritsLoose},function(o){e=o.cclegacy,n=o.Vec3,r=o.Quat},function(o){a=o.Vec4_closeTo},function(o){i=o.CameraHandler}],execute:function(){e._RF.push({},"6b941On3J1Ihqyi0Yu8PlLi","HardLookAtHandler",void 0);var s=new n,d=new n,l=new r;o("HardLookAtHandler",function(o){function e(){return o.apply(this,arguments)||this}return t(e,o),e.prototype.updateCamera=function(o){var t=this._vcam;if(t.lookAt){var e=t.aim.hardLookat;n.add(s,t.lookAt.position,e.trackedObjectOffset),t.lookAt.parent&&s.add(t.lookAt.parent.worldPosition),t.lookaheadPosition.set(s),n.subtract(d,t.node.worldPosition,s).normalize(),r.fromViewUp(l,d),a(l,t.node.worldRotation)||(t.node.worldRotation=l)}},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/HealEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolComp.ts"],(function(t){"use strict";var n,e,o,i,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,i=t.Animation},function(t){c=t.PoolComp}],execute:function(){var r;e._RF.push({},"33d10QHUbdLxLDWMnqDRviF","HealEffect",void 0);var a=o.ccclass;o.property,t("HealEffect",a("HealEffect")(r=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(n=t.call.apply(t,[this].concat(o))||this).anim=void 0,n}n(e,t);var o=e.prototype;return o.firstBorn=function(){this.anim=this.node.getComponent(i)},o.clear=function(){},o.init=function(){this.node.active=!0,this.anim.play()},o.recyle=function(){this.node.active=!1},e}(c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Hero_Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./GameData.ts","./Hero.ts"],(function(t){"use strict";var e,n,r,o,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){o=t.CampType},function(t){s=t.default},function(t){c=t.Hero}],execute:function(){var i;n._RF.push({},"628d9WYUBBOd6iZ3xCtmgYa","Hero_Enemy",void 0);var u=r.ccclass;r.property,t("default",u("Hero_Enemy")(i=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onLoadInit=function(){var t=this;this.camp=o.Enemy,this.isPlayerCtrl=!1,this.scheduleOnce((function(){t.checkInit(s.players,s.sceneObj_Mask)}))},n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/Hero_Npc.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./GameData.ts","./Hero.ts"],(function(e){"use strict";var t,n,c,r,o,s;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e._decorator},function(e){r=e.CampType},function(e){o=e.default},function(e){s=e.Hero}],execute:function(){var i;n._RF.push({},"ca753IWEo5Pzrp2EeLvK6TT","Hero_Npc",void 0);var u=c.ccclass;c.property,e("default",u("Hero_Npc")(i=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.onLoadInit=function(){var e=this;this.camp=r.Player,this.isPlayerCtrl=!1,this.scheduleOnce((function(){e.checkInit(o.enemies,o.sceneObj_Mask)}))},n}(s))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/Hero_Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./GameData.ts","./Hero.ts"],(function(t){"use strict";var e,n,r,o,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator},function(t){o=t.CampType},function(t){s=t.default},function(t){c=t.Hero}],execute:function(){var i;n._RF.push({},"0e7841/VRhKPa6JilO+REtH","Hero_Player",void 0);var a=r.ccclass;r.property,t("default",a("Hero_Player")(i=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),n.prototype.onLoadInit=function(){var t=this;this.camp=o.Player,this.isPlayerCtrl=!0,this.scheduleOnce((function(){t.checkInit(s.ais,s.sceneObj_Mask)}))},n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/Hero.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NavMeshAgent.ts","./NavMeshMgr.ts","./DataClass.ts","./EnumTypes.ts","./GameData.ts","./AssetMgr.ts","./EventMgr.ts","./PoolMgr.ts","./SoundMgr.ts","./StorageMgr.ts","./Platform.ts","./Tool.ts","./Bar.ts","./MainCamera.ts","./PlayerCtr.ts"],(function(i){"use strict";var t,e,s,n,a,h,l,o,r,f,d,c,u,m,g,_,k,p,S,y,v,B,C,O,D,w,A,P,x,T,R,I,H,b,F,E,W,M,U,G,N,Y,j;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,s=i._decorator,n=i.geometry,a=i.Collider,h=i.CameraComponent,l=i.assetManager,o=i.Prefab,r=i.instantiate,f=i.SphereCollider,d=i.Vec3,c=i.Vec2,u=i.Quat,m=i.PhysicsSystem,g=i.lerp,_=i.SkeletalAnimation,k=i.ParticleSystem,p=i.RigidBody,S=i.find,y=i.Label,v=i.MeshRenderer,B=i.Color,C=i.Component},function(i){O=i.NavMeshAgent},function(i){D=i.NavMeshMgr},function(i){w=i.Hero_Kill_Data},function(i){A=i.DinasorType,P=i.EventType,x=i.DinasorAnimType,T=i.SoundType,R=i.CampType},function(i){I=i.default},function(i){H=i.AssetMgr},function(i){b=i.EventMgr},function(i){F=i.PoolObjType,E=i.PoolMgr},function(i){W=i.SoundMgr},function(i){M=i.default},function(i){U=i.default},function(i){G=i.default},function(i){N=i.Bar},function(i){Y=i.MainCamera},function(i){j=i.PlayerCtr}],execute:function(){var X;e._RF.push({},"cb4309+5NFPKKHyuoHnPhmO","Hero",void 0);var z=s.ccclass,L=n.Ray;i("Hero",z("Hero")(X=function(i){function e(){for(var t,e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];return(t=i.call.apply(i,[this].concat(s))||this).camYAxis=void 0,t.camXAxis=void 0,t.cam=void 0,t.camRayNode=void 0,t.colliders=void 0,t.buffShow=void 0,t.faceShow=void 0,t.camp=R.Player,t.aimMask=I.enemy_mask,t.bornPos=null,t.model=void 0,t.dinasorType=A.Dinasor1,t.isBig=!1,t.bulletType=F.Bullet_4,t.baseSpeed=0,t.agent=void 0,t.moveSpeed=20,t.xAxis=0,t.yAxis=0,t.isPlayerCtrl=!1,t.nowRot=new c,t.targetRot=new c,t.camSetRotY=new d,t.camSetRotX=new d,t.disWay=0,t.minYAxisHeight=1,t.maxYAXISHeight=0,t.camCheckRay=new L,t.anim=void 0,t.moveAnimAxis=0,t.isDeadAnim=!1,t.isSkillAnim=!1,t.gun=[],t.gunPos=[],t.fireEffect=[],t.gunRay=new L,t.gunHitPoint=new d,t.hitTarget=void 0,t.hitFollowTarget=void 0,t.isFire=!1,t.fireCD=.1,t.fireRange=50,t.fireDamage=[1,1],t.isChargeFire=!1,t.nowGunIndex=0,t.nowFireTime=0,t.nowCharingBullet=[],t.nowHp=0,t.maxHp=1,t.isDead=!1,t.hpBar=void 0,t.playerHpBar=void 0,t.hurtHeroNames=[],t.checkTargets=[],t.inSightTargets=[],t.closestTarget=null,t.checkMask=I.sceneObj_Mask,t.isSkill1On=!1,t.isSkill1Hit=!1,t.skill1CD=0,t.isSkill2On=!1,t.skill2CD=0,t.isSkill3On=!1,t.skill3CD=0,t.isSkill4On=!1,t.skill4CD=0,t.skill4HitTargets=[],t.isSkill5On=!1,t.skill5CD=0,t.skill5HitTargets=[],t.albleoHandle=1073745924,t.isStealthOn=!1,t.isAttackBuffOn=!1,t.attackBuff_addAxis=0,t.isAttackBuff_Item_On=!1,t.attackBuff_Item_Time=10,t.attackBuff_Item_addAxis=.5,t.isSpeedBuff_Item_On=!1,t.speedBuff_Item_Time=10,t.speedBuff_Item_addAxis=.5,t.isDefendBuff_Item_On=!1,t.defendBuff_Item_Time=10,t.defendBuff_Item_reduceAxis=.5,t.speedBuff=null,t.attackBuff=null,t.defendBuff=null,t.isEmojiOn=!1,t.healBuffTime=2,t.healBuff=null,t}t(e,i);var s=e.prototype;return s.onLoad=function(){this.camYAxis=G.d3_FindNodeByName(this.node,"CamY"),this.camXAxis=G.d3_FindNodeByName(this.camYAxis,"CamX"),this.cam=G.d3_FindNodeByName(this.camXAxis,"Camera"),this.camRayNode=G.d3_FindNodeByName(this.camXAxis,"rayNode"),this.model=this.node.getChildByName("Model"),this.colliders=this.node.getComponents(a),this.buffShow=this.node.getChildByName("BuffShow"),this.faceShow=this.node.getChildByName("FaceShow"),this.onLoadInit()},s.onLoadInit=function(){},s.start=function(){this.campInit(),this.nowGunIndex=0;var i=this.node.getComponentInChildren(h);i&&i.onLoad()},s.modelInit=function(i,t){var e=this;null==this.bornPos&&(this.bornPos=this.node.getWorldPosition()),this.hpBar=t,this.dinasorDataInit(i);var s="0"+(3+i).toString()+"_Dinasor"+(1+i).toString(),n="Dinasor_"+(1+i).toString(),a=this;l.getBundle(s).load(n,o,(function(i,t){var s=r(t),n=a.model;n.destroyAllChildren(),n.addChild(s);a.scheduleOnce((function i(){if(D.instance.isWorkingSmall&&D.instance.isWorkingBig){a.camInit(),a.moveInit(),a.animInit(),a.gunInit();var t=["#00FFFF","#FF5353"];if(e.dinasorType==A.Dinasor1||e.dinasorType==A.Dinasor2||e.dinasorType==A.Dinasor4)if(e.isPlayerCtrl)for(var s=e.model.getComponentsInChildren(v),n=0;n<s.length;n++)for(var h=s[n].materials,l=0;l<h.length;l++){var o=h[l],r=o.passes[0].getHandle("lineWidth");o.passes[0].setUniform(r,0),r=o.passes[0].getHandle("baseColor"),o.passes[0].setUniform(r,new B(0,0,0,255))}else for(var f=e.model.getComponentsInChildren(v),d=0;d<f.length;d++)for(var c=f[d].materials,u=0;u<c.length;u++){var m=c[u],g=m.passes[0].getHandle("lineWidth");m.passes[0].setUniform(g,50),g=m.passes[0].getHandle("baseColor"),m.passes[0].setUniform(g,G.d3_getRgbByHex(t[e.camp]))}}else a.scheduleOnce(i)}))}))},s.dinasorDataInit=function(i){switch(i){case A.Dinasor1:this.hpInit(I.dinasor1_hp),this.fireDamage=I.dinasor1_atk,this.fireCD=I.dinasor1_atk_interval,this.fireRange=I.dinasor1_atk_distance,this.baseSpeed=I.dinasor1_speed,this.isChargeFire=!1,this.isBig=!1,this.isPlayerCtrl&&this.getComponent(j).changeSkillIcon(1);break;case A.Dinasor2:this.hpInit(I.dinasor2_hp),this.fireDamage=I.dinasor2_atk,this.fireCD=I.dinasor2_atk_interval,this.fireRange=I.dinasor2_atk_distance,this.baseSpeed=I.dinasor2_speed,this.isChargeFire=!1,this.isBig=!1,this.isPlayerCtrl&&this.getComponent(j).changeSkillIcon(2);break;case A.Dinasor3:this.hpInit(I.dinasor3_hp),this.fireDamage=I.dinasor3_atk,this.fireCD=I.dinasor3_atk_interval,this.fireRange=I.dinasor3_atk_distance,this.baseSpeed=I.dinasor3_speed,this.isChargeFire=!0,this.isBig=!1,this.isPlayerCtrl&&this.getComponent(j).changeSkillIcon(3);break;case A.Dinasor4:this.hpInit(I.dinasor4_hp),this.fireDamage=I.dinasor4_atk,this.fireCD=I.dinasor4_atk_interval,this.fireRange=I.dinasor4_atk_distance,this.baseSpeed=I.dinasor4_speed,this.isChargeFire=!1,this.isBig=!0,this.isPlayerCtrl&&(this.getComponent(j).changeSkillIcon(4),this.fireDamage=I.dinasor4_atk);break;case A.Dinasor5:this.hpInit(I.dinasor5_hp),this.fireDamage=I.dinasor5_atk,this.fireCD=I.dinasor5_atk_interval,this.fireRange=I.dinasor5_atk_distance,this.baseSpeed=I.dinasor5_speed,this.isChargeFire=!1,this.isBig=!0,this.isPlayerCtrl&&this.getComponent(j).changeSkillIcon(2);break;case A.Dinasor6:this.hpInit(I.dinasor6_hp),this.fireDamage=I.dinasor6_atk,this.fireCD=I.dinasor6_atk_interval,this.fireRange=I.dinasor6_atk_distance,this.baseSpeed=I.dinasor6_speed,this.isChargeFire=!0,this.isBig=!0,this.isPlayerCtrl&&this.getComponent(j).changeSkillIcon(5);break;default:console.warn("初始化：未知恐龙品种"),this.hpInit()}var t;switch(i){case A.Dinasor1:t=F.Bullet_1;break;case A.Dinasor2:t=F.Bullet_2;break;case A.Dinasor3:t=F.Bullet_3;break;case A.Dinasor4:t=F.Bullet_4;break;case A.Dinasor5:t=F.Bullet_5;break;case A.Dinasor6:t=F.Bullet_6;break;default:t=F.Bullet_4}this.bulletType=t;var e=this.getComponent(f);this.isBig?(e.center=new d(0,3,0),e.radius=5):(e.center=new d(0,1.5,0),e.radius=2),e.isTrigger=!0,this.dinasorType=i,this.skill1CD=0,this.skill2CD=0,this.skill3CD=0,this.skill4CD=0,this.isPlayerCtrl&&(this.isChargeFire?b.event(P.Game_Charge_Open):b.event(P.Game_Charge_Close)),this.faceShow.setPosition(new d(0,this.isBig?7:5,0))},s.update=function(i){this.camCheckUpdate(i),this.Skill_1_Update(i),this.Skill_2_Update(i),this.Skill_3_Update(i),this.Skill_4_Update(i),this.Skill_5_Update(i)},s.lateUpdate=function(i){this.moveUpdate(i),this.camRotUpdate(i),this.animUpdate(i),this.gunUpdate(i),this.fireUpdate(i),this.hpUpdate(i)},s.moveInit=function(){this.agent=this.getComponent(O),this.agent.isBig=this.isBig,this.agent.isPlayerMove=this.isPlayerCtrl,this.agent.init(),this.moveSpeed=this.baseSpeed,this.agent.setAgentMaxSpeed(this.moveSpeed)},s.moveCtrl_forPlayer=function(i){this.xAxis=i[0],this.yAxis=i[1]},s.moveUpdate=function(i){if(i>.032&&(i=.032),this.agent&&!this.isDead)if(this.isPlayerCtrl){var t=this.xAxis,e=this.yAxis,s=this.cam.forward.clone();s.y=0,s.multiplyScalar(1e3*e);var n=this.cam.right.clone();n.y=0,n.multiplyScalar(1e3*t);var a=new d;this.moveSpeed=this.baseSpeed,this.isSpeedBuff_Item_On&&(this.moveSpeed*=this.speedBuff_Item_addAxis+1),this.isSkill1On&&(this.moveSpeed*=I.skill_1_speedAxis),this.isSkill3On&&(this.moveSpeed*=I.skill_3_speedAxis),this.isSkill5On&&(this.moveSpeed*=I.skill_5_speedAxis),this.moveSpeed>40&&(this.moveSpeed=40),a=this.isSkill2On?d.normalize(a,s.add(n)).multiplyScalar(5*i):d.normalize(a,s.add(n)).multiplyScalar(this.moveSpeed*i),this.agent.goWay=a;var h=G.getAngle2DWay(new c(0,1),new c(s.x,s.z)),l=c.lengthSqr(new c(t,e));l>.01&&this.model.setRotationFromEuler(new d(0,-h,0)),this.moveAnimAxis=l}else{this.moveSpeed=this.baseSpeed,this.isSpeedBuff_Item_On&&(this.moveSpeed*=this.speedBuff_Item_addAxis+1),this.isSkill1On&&(this.moveSpeed*=I.skill_1_speedAxis),this.isSkill3On&&(this.moveSpeed*=I.skill_3_speedAxis),this.isSkill5On&&(this.moveSpeed*=I.skill_5_speedAxis),this.moveSpeed>40&&(this.moveSpeed=40),-1!=this.agent.agentIndex&&(this.isSkill2On?this.agent.setAgentMaxSpeed(5):this.agent.setAgentMaxSpeed(this.moveSpeed));var o=this.agent.getAgentVelocity();if(o){var r=G.getAngle2DWay(new c(0,1),new c(o.x,o.z));if(r){var f=new u;u.fromEuler(f,0,-r,0),this.model.setRotation(this.model.getRotation().lerp(f,10*i)),this.moveAnimAxis=o.length()/this.agent.getAgentMaxSpeed(),this.moveAnimAxis||(this.moveAnimAxis=0)}else this.moveAnimAxis=0}}},s.moveToTaregtPos_AI=function(i){this.agent.setTarget(i)},s.camInit=function(){var i=this.isBig?I.cam_default_data_big:I.cam_default_data_small;if(0==M.instance.storageData.playCount&&(i=I.cam_default_data_small_teach,this.model.setRotationFromEuler(new d(0,90,0))),this.targetRot.y=i.rotXY.y,this.targetRot.x=i.rotXY.x,this.nowRot.y=this.targetRot.y,this.nowRot.x=this.targetRot.x,this.maxYAXISHeight=i.maxYAXISHeight,this.minYAxisHeight=i.minYAxisHeight,this.isPlayerCtrl){this.camYAxis.setPosition(new d(0,this.maxYAXISHeight,0));var t=new u;u.fromEuler(t,0,this.targetRot.y,0),this.camYAxis.setRotation(t),u.fromEuler(t,this.targetRot.x,0,0),this.camXAxis.setRotation(t),this.camRayNode.setPosition(i.camPos),this.cam.setPosition(i.camPos),u.fromEuler(t,i.camRot.x,i.camRot.y,i.camRot.z),this.camRayNode.setRotation(t),this.cam.setRotation(t);var e=this.camRayNode.getWorldPosition(),s=this.camYAxis.getWorldPosition(),n=new d;d.subtract(n,s,e),this.disWay=n.length()}},s.camRot_ForPlayer=function(i,t){if(void 0===t&&(t=!1),t){this.gunRay.d=this.cam.forward.clone(),this.gunRay.o=this.cam.getWorldPosition();var s=new d;if(this.gunRay.computeHit(s,3),this.gunRay.o=s,m.instance.raycastClosest(this.gunRay,this.aimMask,this.fireRange,!0)){var n=m.instance.raycastClosestResult.collider.node,a=n.getComponent(e);a&&(a.isStealthOn||a.isDead||(this.hitFollowTarget=n))}else this.hitFollowTarget=null}else this.hitFollowTarget=null;this.targetRot.y-=360*i.y*I.camRot_Yaxis,this.targetRot.x-=90*i.x*I.camRot_Xaxis},s.camRotUpdate=function(i){this.targetRot.x>I.camRot_MaxX?this.targetRot.x=I.camRot_MaxX:this.targetRot.x<I.camRot_MinX&&(this.targetRot.x=I.camRot_MinX);var t=40*i;t>1&&(t=1);var e=new u;u.fromEuler(e,0,this.targetRot.y,0);var s=new u;u.fromEuler(s,this.targetRot.x,0,0),this.camYAxis.setRotation(this.camYAxis.getRotation().lerp(e,t)),this.camXAxis.setRotation(this.camXAxis.getRotation().lerp(s,t))},s.camCheckUpdate=function(i){if(this.isPlayerCtrl&&I.cam){var t=I.cam,s=5*i;if(this.isSkill2On)return t.fov=g(t.fov,40,s),t.far=g(t.far,500,s),this.cam.setPosition(this.cam.getPosition().lerp(new d,s)),void this.camYAxis.setPosition(this.camYAxis.getPosition().lerp(new d(0,(this.maxYAXISHeight+this.minYAxisHeight)/2,0),s));t.fov=g(t.fov,60,s),t.far=g(t.far,300,s);var n=I.sceneObj_Mask,a=this.camRayNode.getWorldPosition(),h=this.camYAxis.getWorldPosition(),l=new d;d.subtract(l,a,h),l.normalize();var o=new L(h.x,h.y,h.z,l.x,l.y,l.z);m.instance.raycast(o,n,this.disWay,!0);for(var r=m.instance.raycastResults,f=this.disWay,u=0;u<r.length;u++){var _=r[u].distance;_<f&&(f=_)}(f-=.25)<0&&(f=0);var k=f/this.disWay,p=new d;if(this.camYAxis.setPosition(this.camYAxis.getPosition().lerp(new d(0,this.minYAxisHeight+k*(this.maxYAXISHeight-this.minYAxisHeight),0),s)),o.computeHit(p,k*this.disWay),this.cam.setWorldPosition(this.cam.getWorldPosition().lerp(p,s)),this.hitFollowTarget){b.event(P.Game_Aim_Lock);var S=this.hitFollowTarget.getComponent(e);if(!S||S.isDead||-1==this.inSightTargets.indexOf(S)||S.isStealthOn)this.hitFollowTarget=null;else{var y=new d,v=this.hitFollowTarget.getWorldPosition();if(v.y+=S.minYAxisHeight,d.subtract(y,v,this.cam.getWorldPosition()),y.lengthSqr()>I.autoAim_DistanceSqr)this.hitFollowTarget=null;else{var B=0,C=G.getAngle2DWay(new c(-this.camYAxis.forward.x,-this.camYAxis.forward.z),new c(y.x,y.z));B=C?this.targetRot.y-C:this.targetRot.y,this.targetRot.y=B;var O=G.d3_getProjection(y,this.cam.right.clone());C=G.d3_getAngle(O,this.cam.forward.clone());var D=new d;d.cross(D,O,this.cam.forward.clone()),d.dot(D,this.cam.right.clone())<0&&(C*=-1),C+this.targetRot.x>I.camRot_MaxX?C=I.camRot_MaxX-this.targetRot.x:C+this.targetRot.x<I.camRot_MinX&&(C=I.camRot_MinX+this.targetRot.x),this.targetRot.x+=C}}}else b.event(P.Game_Aim_UnLock)}},s.animInit=function(){this.anim=this.model.getComponentInChildren(_),this.isDeadAnim=!1},s.animUpdate=function(i){if(this.anim&&!this.isDeadAnim){var t=x.Idle;if(this.moveAnimAxis>0){t=x.Run;var e=1;switch(this.dinasorType){case A.Dinasor1:case A.Dinasor2:case A.Dinasor3:case A.Dinasor4:case A.Dinasor5:case A.Dinasor6:e=10;break;default:console.warn("未知的龙类型")}var s=this.moveSpeed/e;this.anim.getState(t).speed=s,this.isPlayerCtrl&&W.instacne&&(this.isBig?W.instacne.playSound(G.halfPercent()?T.Heavy1:T.Heavy2):W.instacne.playSound(G.halfPercent()?T.Light1:T.Light2))}else t=x.Idle;this.isSkillAnim&&(t=x.Skill),this.isDead&&(t=x.Die,this.isDeadAnim=!0),this.anim.getState(t).isPlaying||this.anim.play(t)}},s.gunInit=function(){this.gun=G.d3_FindAllNodeByName(this.model,"Gun"),this.gunPos=G.d3_FindAllNodeByName(this.model,"GunPos");for(var i=0;i<this.fireEffect.length;i++)E.instance.recyleObj(this.fireEffect[i]);this.fireEffect.length=0;for(var t=0;t<this.gunPos.length;t++)this.fireEffect.push(E.instance.getObj(F.FireEffect)),this.gunPos[t].addChild(this.fireEffect[t].node),this.fireEffect[t].node.setPosition(d.ZERO),this.fireEffect[t].node.setRotation(new u)},s.gunUpdate=function(i){if(this.gun&&!this.isDead){var t=new d;if(this.isPlayerCtrl){this.gunRay.d=this.cam.forward.clone(),this.gunRay.o=this.cam.getWorldPosition();var s=new d;this.gunRay.computeHit(s,3),this.gunRay.o=s,m.instance.raycastClosest(this.gunRay,this.aimMask,this.fireRange,!0)?(t=m.instance.raycastClosestResult.hitPoint.clone(),this.hitTarget=m.instance.raycastClosestResult.collider.node):(this.gunRay.computeHit(t,this.fireRange),this.hitTarget=null)}else if(this.hitFollowTarget&&!this.isDead){if(this.hitFollowTarget.getComponent(e).isDead){this.hitFollowTarget=null;for(var n=0;n<this.gunPos.length;n++)t=this.gunPos[n].getWorldPosition().add(this.model.forward.clone().multiplyScalar(-this.fireRange));this.hitTarget=null,this.fireOff()}else{(t=this.hitFollowTarget.getWorldPosition()).y+=1;for(var a=new d,h=0;h<this.gunPos.length;h++)d.subtract(a,t,this.gunPos[h].getWorldPosition()),a.lengthSqr()>this.fireRange*this.fireRange?(t=this.gunPos[h].getWorldPosition().add(this.model.forward.clone().multiplyScalar(-this.fireRange)),this.fireOff()):(this.gunRay.o=this.gunPos[h].getWorldPosition(),this.gunRay.d=a.normalize(),m.instance.raycastClosest(this.gunRay,this.aimMask,this.fireRange,!0)?(t=m.instance.raycastClosestResult.hitPoint.clone(),this.hitTarget=m.instance.raycastClosestResult.collider.node):this.hitTarget=this.hitFollowTarget,this.fireOn())}}else{for(var l=0;l<this.gunPos.length;l++)t=this.gunPos[l].getWorldPosition().add(this.model.forward.clone().multiplyScalar(-this.fireRange));this.hitTarget=null,this.fireOff()}this.gunAim(t)}},s.gunAim=function(i){var t=new d;if(1==this.gun.length)for(var e=0;e<this.gun.length;e++){d.subtract(t,i,this.gun[e].getWorldPosition());var s=new d(0,1,0),n=this.gun[e].parent.up.clone(),a=G.d3_getProjection(t,s),h=G.d3_getProjection(n,s),l=G.getAngle2DWay(new c(a.x,a.z),new c(h.x,h.z));this.gun[e].setRotationFromEuler(new d(l-180,0,0))}else if(2==this.gun.length)for(var o=0;o<this.gun.length;o++){d.subtract(t,i,this.gun[o].getWorldPosition());var r=this.gun[o].parent.forward.clone(),f=G.getAngle2DWay(new c(t.x,t.z),new c(r.x,r.z));this.gun[o].setRotationFromEuler(new d(0,f+180,0))}this.gunHitPoint=i},s.fireOn=function(){this.isDead||(this.isFire=!0,this.isPlayerCtrl&&this.dinasorType==A.Dinasor4&&W.instacne&&W.instacne.playMachineGunSound())},s.fireUpdate=function(i){if(!this.isDead){if(this.nowFireTime<=0){if(this.isFire)if(this.isChargeFire)this.fireCharge(i);else if(this.isSkill2On&&this.isPlayerCtrl){if(this.hitTarget){var t=this.hitTarget.getComponent(e);t&&!t.isDead&&this.fire()}}else this.fire()}else this.nowFireTime-=i,this.nowFireTime<0&&(this.nowFireTime=0);if(this.isPlayerCtrl){if(this.nowFireTime<=0){if(this.isChargeFire)this.isFire&&this.fireCharge(i);else if(this.hitTarget){var s=this.hitTarget.getComponent(e);s&&!s.isDead&&this.fire()}}else this.nowFireTime-=i,this.nowFireTime<0&&(this.nowFireTime=0);b.event(P.Game_FireBtn_CD,this.nowFireTime/this.fireCD)}else if(this.nowFireTime<=0){if(this.isFire)if(this.isChargeFire)this.fireCharge(i);else if(this.isSkill2On&&this.isPlayerCtrl){if(this.hitTarget){var n=this.hitTarget.getComponent(e);n&&!n.isDead&&this.fire()}}else this.fire()}else this.nowFireTime-=i,this.nowFireTime<0&&(this.nowFireTime=0)}},s.fireOff=function(){this.isChargeFire&&this.isFire&&this.nowFireTime<=0&&this.fire(),this.isFire=!1,this.isPlayerCtrl&&this.dinasorType==A.Dinasor4&&W.instacne&&W.instacne.stopMachineGunSound()},s.fire=function(){this.nowFireTime=this.fireCD;var i=1,t=this.nowGunIndex,s=this.nowGunIndex;this.isChargeFire&&(t=0,s=this.gunPos.length-1);for(var n=t;n<=s&&!(n>=this.gunPos.length);n++){var a,h=this.gunPos[n].getWorldPosition(),l=1,o=this.dinasorType==A.Dinasor4||this.dinasorType==A.Dinasor2||this.dinasorType==A.Dinasor5;a=d.distance(h,this.gunHitPoint),this.dinasorType==A.Dinasor1&&(l=a/this.fireRange)>1&&(l=1);var r=void 0;if(this.isChargeFire||(r=this.fireDamage[1]-(this.fireDamage[1]-this.fireDamage[0])*l,this.isAttackBuff_Item_On&&(r*=this.attackBuff_Item_addAxis+1)),this.isSkill2On&&(r*=I.skill_2_damageAxis),this.hitTarget&&this.isPlayerCtrl&&this.hitTarget.getComponent(e)&&b.event(P.Game_Aim_Hit),o){var f=E.instance.getObj(this.bulletType);f.node.setWorldPosition(h);var c=void 0;if(this.dinasorType==A.Dinasor4){var u=a/100;c=new d(this.gunHitPoint.x+G.randomNumber(-u,u),this.gunHitPoint.y+G.randomNumber(-u,u),this.gunHitPoint.z+G.randomNumber(-u,u))}else c=this.gunHitPoint;f.node.lookAt(c);var m=f.node.forward.clone();f.way=m,f.borner=this,d.squaredDistance(I.player.node.getWorldPosition(),h)<=I.fireEffect_RangeSqr&&this.fireEffect[n].getComponentInChildren(k).play(),f.hitInit(this.hitTarget,a,r,400)}else if(this.isChargeFire){if(this.nowCharingBullet.length>0){var g=this.nowCharingBullet[n];g.node.setWorldPosition(h),g.node.lookAt(this.gunHitPoint),g.way=g.node.forward.clone(),g.borner=this,i=1+4*(l=g.nowScale/g.maxScale),r=this.fireDamage[0]+(this.fireDamage[1]-this.fireDamage[0])*l/this.gun.length,this.isAttackBuffOn&&(r*=this.attackBuff_addAxis+1),this.isAttackBuff_Item_On&&(r*=this.attackBuff_Item_addAxis+1),this.isSkill3On&&(r*=I.skill_3_damageAxis),g.hitInit(this.hitTarget,a,r,400),b.event(P.Game_Charge_Update,0)}}else{var _=E.instance.getObj(this.bulletType);if(_.node.setWorldPosition(h),_.node.lookAt(this.gunHitPoint),_.playHitEffect(this.gunHitPoint),this.hitTarget){var p=this.hitTarget.getComponent(e);p&&p.hurt(r,this)}}}if(this.nowCharingBullet.length=0,this.nowGunIndex++,this.nowGunIndex>=this.gunPos.length&&(this.nowGunIndex=0),this.isPlayerCtrl){U.instance.vibrateShort();var S=.35,y=.1;switch(this.dinasorType){case A.Dinasor1:S=.65,y=.5;break;case A.Dinasor2:S=.5,y=.5,this.isSkill2On&&(S=1,y=1);break;case A.Dinasor3:y=S=.2*i;break;case A.Dinasor4:S=.175,y=.1;break;case A.Dinasor5:S=.5,y=.5,this.isSkill2On&&(S=1,y=1);break;case A.Dinasor6:y=S=.2*i;break;default:console.warn("后坐力参数没有对应恐龙类型",this.dinasorType)}I.cam.getComponent(Y).camUpPush(y),b.event(P.Game_Aim_Shoot,S)}var v=null;if(this.dinasorType==A.Dinasor1?v=T.ShotGun:this.dinasorType==A.Dinasor2&&(v=T.SniperGun),null!=v){var B=(1e4-d.squaredDistance(this.node.getWorldPosition(),I.player.node.getWorldPosition()))/1e4;B>0&&W.instacne&&W.instacne.playSoundNoLimted(v,B)}},s.fireCharge=function(i){if(0==this.nowCharingBullet.length)for(var t=0;t<this.gun.length;t++){var e=E.instance.getObj(this.bulletType);this.nowCharingBullet.push(e)}for(var s=0;s<this.gunPos.length;s++)this.nowCharingBullet[s].node.setWorldPosition(this.gunPos[s].getWorldPosition());for(var n=0;n<this.nowCharingBullet.length;n++)this.nowCharingBullet[n].addScale(i/2);this.isPlayerCtrl&&this.nowCharingBullet.length>0&&b.event(P.Game_Charge_Update,this.nowCharingBullet[0].nowScale/this.nowCharingBullet[0].maxScale)},s.campInit=function(){var i=this.getComponent(p);switch(this.camp){case R.Player:this.aimMask=I.enemy_mask,this.isPlayerCtrl?i.setGroup(I.player_mask):i.setGroup(I.npc_mask);break;case R.Enemy:this.aimMask=I.player_mask+I.npc_mask,i.setGroup(I.enemy_mask)}this.aimMask+=I.sceneObj_Mask},s.hpInit=function(i){void 0===i&&(i=100),this.getComponent(j)&&this.hpBar&&(this.hpBar.node.active=!1,this.hpBar=null,this.playerHpBar||(this.playerHpBar=S("Canvas").getChildByPath("GameUI/PlayerHpBar").getComponent(N))),this.hpBar&&this.hpBar.changeColor(this.camp),this.maxHp=i,this.nowHp=this.maxHp,this.isDead=!1,this.hurtHeroNames.length=0;for(var t=0;t<this.colliders.length;t++)this.colliders[t].enabled=!0},s.hpUpdate=function(i){var t=I.cam;if(this.hpBar)if(this.isDead)this.hpBar.node.active=!1;else{var e=new d,s=(250-(e=d.subtract(e,this.node.getWorldPosition(),t.node.getWorldPosition())).length())/250;if(s<0&&(s=0),-1==I.player.inSightTargets.indexOf(this))this.hpBar.node.active=!1;else if(s>.25){var n=G.getAngle2DWay(new c(e.x,e.z),new c(t.node.forward.x,t.node.forward.z));n&&(Math.abs(n)>100?this.hpBar.node.active=!1:(this.hpBar.node.setScale(new d(s,s,s)),this.hpBar.node.active=!0,this.hpBar.follow(t,this.node,new d(0,(this.minYAxisHeight+this.maxYAXISHeight)/2,0)),this.hpBar.value=this.nowHp/this.maxHp))}else this.hpBar.node.active=!1}else this.playerHpBar&&(this.playerHpBar.value=this.nowHp/this.maxHp,this.playerHpBar.node.getComponentInChildren(y).string=Math.floor(this.nowHp).toString())},s.heal=function(i){this.isDead||(this.nowHp+=i,this.nowHp>this.maxHp&&(this.nowHp=this.maxHp))},s.hurt=function(i,t){if(!this.isDead){if(this.isSkill4On&&(i*=1-I.skill_4_defendAxis),this.isDefendBuff_Item_On&&(i*=1-this.defendBuff_Item_reduceAxis),this.isPlayerCtrl){for(var e=0,s=0;s<I.rankScore.length;s++)if(M.instance.storageData.rankPoint<I.rankScore[s]){e=s;break}i*=I.enemyDamageAxis[e]}if(i=Math.floor(i),this.nowHp-=i,this.nowHp<0&&(this.nowHp=0,this.die(t)),t){"Player"==t.node.name&&b.event(P.Game_Player_Atk,this.node.name,i);var n=this.hurtHeroNames.indexOf(t.node.name);-1!=n&&this.hurtHeroNames.splice(n,1),this.hurtHeroNames.unshift(t.node.name)}this.isPlayerCtrl&&b.event(P.Game_Player_Hurt)}},s.die=function(i){var t=this;if(!this.isDead){this.isDead=!0;for(var e=0;e<this.colliders.length;e++)this.colliders[e].enabled=!1;if(this.hitFollowTarget=null,this.inSightTargets.length=0,this.Skill_1_End(),this.Skill_2_End(),this.Skill_3_End(),this.Skill_4_End(),this.stealth_Off(),this.isSkillAnim=!1,this.agent.die(),this.attackBuff_Item_Off(),this.speedUpBuff_Item_Off(),this.defendBuff_Item_Off(),this.speedBuff_Off(),this.attackBuff_Off(),this.defendBuff_Off(),this.healBuff_Off(),this.nowCharingBullet.length>0){for(var s=0;s<this.nowCharingBullet.length;s++)E.instance.recyleObj(this.nowCharingBullet[s]);this.nowCharingBullet.length=0}if(i){var n=this.hurtHeroNames.indexOf(i.node.name);-1!=n&&this.hurtHeroNames.splice(n,1);var a=new w(this.camp,this.node.name,i.node.name,this.hurtHeroNames);b.event(P.Game_HeroDie_Event,a)}var h=(1e4-d.squaredDistance(this.node.getWorldPosition(),I.player.node.getWorldPosition()))/1e4,l=null;switch(this.dinasorType){case A.Dinasor1:l=T.D1Die;break;case A.Dinasor2:l=T.D2Die;break;case A.Dinasor3:l=T.D3Die;break;case A.Dinasor4:l=T.D4Die;break;case A.Dinasor5:break;case A.Dinasor6:l=T.D6Die}i&&h>0&&null!=l&&W.instacne&&W.instacne.playSound(l,h),i&&this.scheduleOnce((function(){if(t.isPlayerCtrl)b.event(P.Game_Player_Dead);else{var i=[A.Dinasor1];H.instance.isDinasor2Bundle&&i.push(A.Dinasor2),H.instance.isDinasor4Bundle&&i.push(A.Dinasor4),t.reBorn(G.getRandomInArray(i))}}),3)}},s.reBorn=function(i){var t=this.bornPos;if(this.node.setWorldPosition(t),this.isPlayerCtrl){var e=new u;u.fromEuler(e,0,180,0),this.model.setRotation(e);var s=new u;u.fromEuler(s,0,180,0);var n=new u;u.fromEuler(n,0,0,0),this.camYAxis.setRotation(s),this.camXAxis.setRotation(n)}this.start(),this.dinasorDataInit(i),i?this.modelInit(i,this.hpBar):this.modelInit(this.dinasorType,this.hpBar),this.Skill_2_End()},s.checkInit=function(i,t){this.checkTargets=i,this.checkMask=t},s.checkUpdate=function(){if(this.inSightTargets.length=0,!this.isDead){var i=this.checkMask,t=this.node.getWorldPosition();t.y+=this.isBig?3:1.5;var e=new d,s=[],n=this.isPlayerCtrl?500:this.isSkill2On?2*I.enemyFindRange:I.enemyFindRange;this.closestTarget=null;for(var a=[],h=0;h<this.checkTargets.length;h++)if(!this.checkTargets[h].isDead){var l=this.checkTargets[h].node.getWorldPosition();l.y+=this.checkTargets[h].isBig?3:1.5;var o=(e=d.subtract(e,l,t)).length();e.normalize();var r=new L(t.x,t.y,t.z,e.x,e.y,e.z);if(this.isPlayerCtrl);else if(this.checkTargets[h].isStealthOn)continue;m.instance.raycast(r,i,o,!0)?this.isPlayerCtrl:this.isPlayerCtrl?(this.inSightTargets.push(this.checkTargets[h]),s.push(this.checkTargets[h].node.name)):(o<n&&(n=o,this.closestTarget=this.checkTargets[h]),a.push(this.checkTargets[h]))}this.isPlayerCtrl}},s.Skill_1_On=function(){this.skill1CD>0||this.isDead||this.isSkill1On||(this.isSkill1On=!0,this.isSkill1Hit=!0,this.skill1CD=I.skill_1_cd,this.scheduleOnce(this.Skill_1_End,I.skill_1_time),this.speedBuff_On(),this.attackBuff_On(),this.isPlayerCtrl&&W.instacne&&W.instacne.playSound(T.SpeedUp))},s.Skill_1_Update=function(i){if(this.skill1CD-=i,this.skill1CD<0&&(this.skill1CD=0),this.isSkill1On){if(this.isDead)return void this.Skill_1_End();if(this.isSkill1Hit)for(var t=this.camp==R.Player?I.enemies:I.players,e=0;e<t.length;e++)if(!t[e].isDead&&d.squaredDistance(this.node.getWorldPosition(),t[e].node.getWorldPosition())<I.skill_1_distanceSqr){this.isSkill1Hit=!1,this.heal(I.skill_1_heal);var s=I.skill_1_damage;this.isAttackBuff_Item_On&&(s*=this.attackBuff_Item_addAxis+1),t[e].hurt(s,this),this.healBuff_On(),this.unschedule(this.Skill_1_End),this.Skill_1_End(),this.Skill_1_AnimDo();break}}},s.Skill_1_AnimDo=function(){this.isSkillAnim=!0,this.isPlayerCtrl&&b.event(P.Game_Skill1_Bite),this.scheduleOnce(this.Skill_1_AnimEnd,.6)},s.Skill_1_AnimEnd=function(){this.isPlayerCtrl,this.isSkillAnim=!1},s.Skill_1_End=function(){this.unschedule(this.Skill_1_End),this.isSkill1On=!1,this.isSkill1Hit=!1,this.attackBuff_Off(),this.isPlayerCtrl&&W.instacne&&W.instacne.playSound(T.SpeedDown)},s.Skill_2_On=function(){this.skill2CD>0||this.isDead||(this.skill2CD=I.skill_2_cd,this.isSkillAnim=!0,this.isSkill2On=!0,this.scheduleOnce(this.Skill_2_Do,.25),this.attackBuff_On(),this.isPlayerCtrl&&b.event(P.Game_Skill2_Aim_Open))},s.Skill_2_Update=function(i){this.skill2CD-=i,this.skill2CD<0&&(this.skill2CD=0),this.isPlayerCtrl&&!this.isDead&&this.isSkill2On&&b.event(P.Game_Skill2_Aim_Update,1-this.nowFireTime/this.fireCD)},s.Skill_2_Do=function(){this.isPlayerCtrl&&(this.model.active=!1)},s.Skill_2_End=function(){this.skill2CD>0||(this.skill2CD=I.skill_2_cd,this.unschedule(this.Skill_2_Do),this.attackBuff_Off(),this.isSkill2On=!1,this.model.active=!0,this.isSkillAnim=!1,this.isPlayerCtrl&&b.event(P.Game_Skill2_Aim_Close))},s.Skill_3_On=function(){this.skill3CD>0||(this.isSkill3On=!0,this.skill3CD=I.skill_3_cd,this.scheduleOnce(this.Skill_3_End,I.skill_3_time),this.speedBuff_On(),this.attackBuff_On(),this.stealth_On(),this.isPlayerCtrl&&W.instacne&&W.instacne.playSound(T.Invisible))},s.Skill_3_Update=function(i){this.skill3CD-=i,this.skill3CD<0&&(this.skill3CD=0),this.isSkill3On?(this.stealth_On(),this.isSkillAnim=this.moveAnimAxis>0):this.dinasorType==A.Dinasor3&&(this.isSkillAnim=!1)},s.Skill_3_End=function(){this.isSkill3On&&(this.unschedule(this.Skill_3_End),this.isSkill3On=!1,this.stealth_Off())},s.Skill_4_On=function(){this.skill4CD>0||(this.isSkill4On=!0,this.skill4CD=I.skill_4_cd,this.isSkillAnim=!0,this.scheduleOnce(this.Skill_4_AnimEnd,.7),this.scheduleOnce(this.Skill_4_End,I.skill_4_time),this.skill4HitTargets.length=0,this.defendBuff_On(),this.isPlayerCtrl&&W.instacne&&W.instacne.playSound(T.Whip))},s.Skill_4_Update=function(i){if(this.skill4CD-=i,this.skill4CD<0&&(this.skill4CD=0),this.isSkillAnim&&this.isSkill4On)for(var t=this.camp==R.Player?I.enemies:I.players,e=0;e<t.length;e++)if(!t[e].isDead&&-1==this.skill4HitTargets.indexOf(t[e])&&d.squaredDistance(this.node.getWorldPosition(),t[e].node.getWorldPosition())<I.skill_4_rangeSqr){var s=I.skill_4_damage;this.isAttackBuff_Item_On&&(s*=this.attackBuff_Item_addAxis+1),t[e].hurt(s,this),this.skill4HitTargets.push(t[e]),this.isPlayerCtrl&&b.event(P.Game_Skill4_Sweep)}},s.Skill_4_AnimEnd=function(){this.isSkillAnim=!1,this.isPlayerCtrl},s.Skill_4_End=function(){this.isSkill4On=!1,this.unschedule(this.Skill_4_End),this.unschedule(this.Skill_4_AnimEnd),this.Skill_4_AnimEnd()},s.Skill_5_On=function(){this.skill5CD>0||(this.isSkill5On=!0,this.skill5CD=I.skill_5_cd,this.skill5HitTargets.length=0,this.scheduleOnce(this.Skill_5_End,I.skill_5_time),this.speedBuff_On(),this.isPlayerCtrl&&(b.event(P.Game_Aim_SkillHit_On),W.instacne&&W.instacne.playSound(T.SpeedUp)))},s.Skill_5_Update=function(i){if(this.skill5CD-=i,this.skill5CD<0&&(this.skill5CD=0),this.isSkill5On&&!this.isDead)for(var t=this.camp==R.Player?I.enemies:I.players,e=0;e<t.length;e++)if(-1==this.skill5HitTargets.indexOf(t[e])&&!t[e].isDead&&d.squaredDistance(this.node.getWorldPosition(),t[e].node.getWorldPosition())<I.skill_5_rangeSqr){var s=I.skill_5_damage;this.isAttackBuffOn&&(s*=this.attackBuff_addAxis+1),this.isAttackBuff_Item_On&&(s*=this.attackBuff_Item_addAxis+1),t[e].hurt(s,this),this.Skill_5_Anim_Do(),this.AttackBuffOn(),this.skill5HitTargets.push(t[e])}},s.Skill_5_Anim_Do=function(){this.isSkillAnim=!0,this.unschedule(this.Skill_5_Anim_End),this.scheduleOnce(this.Skill_5_Anim_End,.8),this.isPlayerCtrl&&(W.instacne&&W.instacne.playSound(T.DashHit),b.event(P.Game_Skill5_Hit))},s.Skill_5_Anim_End=function(){this.isSkillAnim=!1},s.Skill_5_End=function(){this.isSkill5On=!1,this.isPlayerCtrl&&(b.event(P.Game_Aim_SkillHit_Off),W.instacne&&W.instacne.playSound(T.SpeedDown))},s.stealth_On=function(){if(!this.isStealthOn&&!this.isDead){this.isStealthOn=!0;for(var i=this.model.getComponentsInChildren(v),t=0;t<i.length;t++)for(var e=i[t].materials,s=0;s<e.length;s++)null!=this.defendBuff?e[s].passes[0].setUniform(this.albleoHandle,new B(255,255,255,201)):e[s].passes[0].setUniform(this.albleoHandle,new B(255,255,255,100))}},s.stealth_Off=function(){if(this.isStealthOn){this.isStealthOn=!1;for(var i=this.model.getComponentsInChildren(v),t=0;t<i.length;t++)for(var e=i[t].materials,s=0;s<e.length;s++)e[s].passes[0].setUniform(this.albleoHandle,new B(255,255,255,255))}},s.AttackBuffOn=function(){this.isAttackBuffOn=!0,this.attackBuff_addAxis+=I.attackBuff_addAxis,this.attackBuff_addAxis>I.attackBuff_maxAxis&&(this.attackBuff_addAxis=I.attackBuff_maxAxis),this.attackBuff_On(),this.scheduleOnce(this.AttackBuffOff,I.attackBuff_Time)},s.AttackBuffOff=function(){this.isAttackBuffOn=!1,this.attackBuff_addAxis=0},s.attackBuff_Item_On=function(){this.attackBuff_Item_Off(),this.isAttackBuff_Item_On=!0,this.attackBuff_On(),this.scheduleOnce(this.attackBuff_Item_Off,this.attackBuff_Item_Time)},s.attackBuff_Item_Off=function(){this.attackBuff_Off(),this.unschedule(this.attackBuff_Item_Off),this.isAttackBuff_Item_On=!1},s.speedUpBuff_Item_On=function(){this.speedUpBuff_Item_Off(),this.isSpeedBuff_Item_On=!0,this.speedBuff_On(),this.isPlayerCtrl&&W.instacne&&W.instacne.playSound(T.SpeedUp),this.scheduleOnce(this.speedUpBuff_Item_Off,this.speedBuff_Item_Time)},s.speedUpBuff_Item_Off=function(){this.unschedule(this.speedUpBuff_Item_Off),this.isSpeedBuff_Item_On=!1},s.defendBuff_Item_On=function(){if(this.defendBuff_Item_Off(),this.isDefendBuff_Item_On=!0,this.defendBuff_On(),this.isStealthOn)for(var i=this.model.getComponentsInChildren(v),t=0;t<i.length;t++)for(var e=i[t].materials,s=0;s<e.length;s++)e[s].passes[0].setUniform(this.albleoHandle,new B(255,255,255,201));this.scheduleOnce(this.defendBuff_Item_Off,this.defendBuff_Item_Time)},s.defendBuff_Item_Off=function(){if(this.isStealthOn)for(var i=this.model.getComponentsInChildren(v),t=0;t<i.length;t++)for(var e=i[t].materials,s=0;s<e.length;s++)e[s].passes[0].setUniform(this.albleoHandle,new B(255,255,255,100));this.unschedule(this.defendBuff_Item_Off),this.isDefendBuff_Item_On=!1},s.speedBuff_On=function(i){},s.speedBuff_Off=function(){},s.attackBuff_On=function(i){void 0===i&&(i=10),this.attackBuff_Off(),this.attackBuff=E.instance.getObj(this.isBig?F.Power_L:F.Power_S),this.buffShow.addChild(this.attackBuff.node),this.attackBuff.node.setPosition(d.ZERO),this.scheduleOnce(this.attackBuff_Off,i)},s.attackBuff_Off=function(){null!=this.attackBuff&&(E.instance.recyleObj(this.attackBuff),this.attackBuff=null),this.unschedule(this.attackBuff_Off)},s.defendBuff_On=function(i){void 0===i&&(i=10),this.defendBuff_Off(),this.defendBuff=E.instance.getObj(this.isBig?F.Shield_L:F.Shield_S),this.buffShow.addChild(this.defendBuff.node),this.defendBuff.node.setPosition(d.ZERO),this.scheduleOnce(this.defendBuff_Off,i)},s.defendBuff_Off=function(){null!=this.defendBuff&&(E.instance.recyleObj(this.defendBuff),this.defendBuff=null),this.unschedule(this.defendBuff_Off)},s.emoji_On=function(i){if(!this.isEmojiOn){this.isEmojiOn=!0;var t=E.instance.getObj(i);this.faceShow.addChild(t.node),t.node.setPosition(d.ZERO),this.scheduleOnce(this.emoji_Off,3)}},s.emoji_Off=function(){this.unschedule(this.emoji_Off),this.isEmojiOn=!1},s.healBuff_On=function(){this.healBuff_Off(),this.healBuff=E.instance.getObj(this.isBig?F.Heal_L:F.Heal_S),this.buffShow.addChild(this.healBuff.node),this.healBuff.node.setPosition(d.ZERO),this.scheduleOnce(this.healBuff_Off,this.healBuffTime)},s.healBuff_Off=function(){null!=this.healBuff&&(E.instance.recyleObj(this.healBuff),this.healBuff=null),this.unschedule(this.healBuff_Off)},e}(C))||X);e._RF.pop()}}}));

System.register("chunks:///_virtual/HitEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolMgr.ts","./PoolComp.ts"],(function(t){"use strict";var n,e,o,c,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator},function(t){c=t.PoolMgr},function(t){i=t.PoolComp}],execute:function(){var r;e._RF.push({},"b4610M+g8hJiJQ7qB9WB3kx","HitEffect",void 0);var s=o.ccclass;o.property,t("HitEffect",s("HitEffect")(r=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var o=e.prototype;return o.firstBorn=function(){},o.clear=function(){},o.init=function(){var t=this;this.node.active=!0,this.scheduleOnce((function(){c.instance.recyleObj(t)}),.35)},o.recyle=function(){this.node.active=!1},e}(i))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/Home.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./GameData.ts","./AssetMgr.ts","./SoundMgr.ts","./StorageMgr.ts","./Platform.ts","./UMTrack.ts","./Tool.ts","./GameLoadingUI.ts"],(function(t){"use strict";var a,n,i,e,s,o,r,h,c,d,l,g,u,C,m,D,k;return{setters:[function(t){a=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,e=t.Label,s=t.director,o=t.Sprite,r=t.Color,h=t.Component},function(t){c=t.DinasorType},function(t){d=t.default},function(t){l=t.AssetMgr},function(t){g=t.SoundMgr},function(t){u=t.default},function(t){C=t.default},function(t){m=t.UMTrack},function(t){D=t.default},function(t){k=t.GameLoadingUI}],execute:function(){var v;n._RF.push({},"25292nGtKVIsKhGaAekn9sV","Home",void 0);var B=i.ccclass;i.property,t("Home",B("Home")(v=function(t){function n(){for(var a,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];return(a=t.call.apply(t,[this].concat(i))||this).gameScene="Stage",a.home=void 0,a.startBtn=void 0,a.buyBtn=void 0,a.gameLoading=void 0,a.dinasor_1=void 0,a.dinasor_2=void 0,a.dinasor_3=void 0,a.dinasor_4=void 0,a.dinasor_6=void 0,a.goldLabel=void 0,a.rankPanel=void 0,a.showPanel=void 0,a.dataList=void 0,a.dataPanel=void 0,a.choosePanel=void 0,a.teachHand=void 0,a.isLoadEnd=!1,a.isStarting=!1,a.activeColor=new r(82,155,255,255),a.unactiveColor=new r(255,234,217,255),a.dinasorName=["霰弹迅猛龙","狙击龙王龙","激光单脊龙","加特林甲龙","无畏三角龙"],a.skillName=["撕咬猛冲","狙击手模式","光学隐身","装甲横扫","战争猛冲"],a.skillDetail=["加快移动速度并撕咬靠近的敌方玩家,造成大量伤害并恢复自身血量","进入瞄准模式, 大幅度增加伤害,但是降低自身移动速度,再次使用技能可以解除瞄准模式","使自身隐身并且提高移动速度, 在隐身模式下可以增加伤害","横扫附近所有的敌人,并且暂时减少大量受到的伤害","快速的向前方冲刺,撞击路途上所有的敌人, 每次撞击都可以提高自身的攻击力"],a.nowChoooseDinasor=c.Dinasor1,a}a(n,t);var i=n.prototype;return i.onLoad=function(){this.startBtn=this.node.getChildByPath("Home/startBtn"),this.gameLoading=this.node.getChildByName("GameLoading"),this.home=this.node.getChildByName("Home"),this.goldLabel=this.node.getChildByPath("Home/gold/Label").getComponent(e),this.rankPanel=this.node.getChildByPath("Home/rank"),this.showPanel=this.home.getChildByName("showPanel"),this.dataPanel=this.home.getChildByName("dataPanel"),this.dataList=this.dataPanel.getChildByName("dataList"),this.choosePanel=this.home.getChildByName("choosePanel"),this.buyBtn=this.home.getChildByName("buyBtn"),this.teachHand=this.home.getChildByName("teachHand"),g.instacne&&g.instacne.setMuiscVolume(1)},i.checkNewData=function(){for(var t=0,a=0;a<d.rankScore.length;a++)if(u.instance.storageData.rankPoint<d.rankScore[a]){t=a;break}t>=2&&u.instance.unlockDinasor(c.Dinasor2),t>=4&&u.instance.unlockDinasor(c.Dinasor3)},i.start=function(){this.checkNewData(),this.updateUI(),this.gameLoading.active=!1,this.btnEventOn(),this.chooseBtnClick([0]),0==u.instance.storageData.playCount?(console.log("进入新手教程环节"),this.teachHand.setPosition(this.startBtn.getPosition())):1==u.instance.storageData.playCount&&this.teachHand.setPosition(this.startBtn.getPosition())},i.btnEventOn=function(){D.d2_AddClickEvent(this.startBtn,this,this.onStartBtnClick),D.d2_AddClickEvent(this.buyBtn,this,this.onBuyBtnClick);for(var t=this.choosePanel.getChildByName("layout"),a=0;a<t.children.length;a++)D.d2_AddClickEvent(t.children[a],this,this.chooseBtnClick,[a])},i.update=function(){var t=this;if(!this.isLoadEnd&&this.isStarting){var a=[l.instance.isDinasor1Bundle,l.instance.isDinasor2Bundle,l.instance.isSceneBundle];0==u.instance.storageData.playCount?(a.push(l.instance.isNavMapDataSmall_P),a.push(l.instance.isNavMapDataBig_P)):(a.push(l.instance.isNavMapDataSmall),a.push(l.instance.isNavMapDataBig));for(var n=0,i=1/a.length,e=0;e<a.length;e++)a[e]&&(n+=i);n*=.75;var o=this.gameLoading.getComponent(k);n>=.75?(this.isLoadEnd=!0,s.preloadScene(this.gameScene,(function(t,a){o.updateProgress(n+t/a*.25)}),(function(){s.loadScene(t.gameScene)}))):o.updateProgress(n)}},i.onStartBtnClick=function(){this.isStarting=!0,this.gameLoading.active=!0,0==u.instance.storageData.playCount?m.instance.trackEvent("Teach_In"):m.instance.trackEvent("Match_in")},i.onDinasorClick=function(t){var a=t[0]-1;if(1==u.instance.storageData.hasDinosaur[a])C.instance.showToast("该恐龙已解锁");else switch(a){case c.Dinasor2:C.instance.showToast("段位等级2级解锁");break;case c.Dinasor3:C.instance.showToast("段位等级5级解锁");break;case c.Dinasor4:C.instance.showToast("3次视频试用或10000金币解锁"),u.instance.storageData.gold>=1e4&&(u.instance.changeGold(-1e4),u.instance.unlockDinasor(a),this.updateUI());break;case c.Dinasor6:C.instance.showToast("5次视频试用或20000金币解锁"),u.instance.storageData.gold>=2e4&&(u.instance.changeGold(-2e4),u.instance.unlockDinasor(a),this.updateUI())}},i.updateUI=function(){var t=u.instance.storageData.gold;this.goldLabel.string=t.toString();for(var a=0,n=0;n<d.rankScore.length;n++)if(u.instance.storageData.rankPoint<d.rankScore[n]){a=n;break}for(var i=this.rankPanel.getChildByName("icon_bg"),s=0;s<i.children.length;s++)i.children[s].active=s==a;this.rankPanel.getChildByName("rankLabel").getComponent(e).string="段位等级："+(a+1).toString(),this.rankPanel.getChildByPath("rankValue/Label").getComponent(e).string=u.instance.storageData.rankPoint.toString()+" / "+d.rankScore[a],this.choosePanelUpdate()},i.dinasorBtnUpdate=function(){var t=this.dinasor_2.getChildByName("lock"),a=this.dinasor_3.getChildByName("lock"),n=this.dinasor_4.getChildByName("lock"),i=this.dinasor_6.getChildByName("lock");t.active=0==u.instance.storageData.hasDinosaur[c.Dinasor2],a.active=0==u.instance.storageData.hasDinosaur[c.Dinasor3],n.active=0==u.instance.storageData.hasDinosaur[c.Dinasor4],i.active=0==u.instance.storageData.hasDinosaur[c.Dinasor6];var s=u.instance.storageData.hasDinosaurVideoCount;n.getChildByPath("video/Label").getComponent(e).string=s[c.Dinasor4]+" / 3",i.getChildByPath("video/Label").getComponent(e).string=s[c.Dinasor6]+" / 5"},i.choosePanelUpdate=function(){var t=this.choosePanel.getChildByName("layout"),a=t.children[1].getChildByName("lock"),n=t.children[2].getChildByName("lock"),i=t.children[3].getChildByName("lock"),s=t.children[4].getChildByName("lock");a.active=0==u.instance.storageData.hasDinosaur[c.Dinasor2],n.active=0==u.instance.storageData.hasDinosaur[c.Dinasor3],i.active=0==u.instance.storageData.hasDinosaur[c.Dinasor4],s.active=0==u.instance.storageData.hasDinosaur[c.Dinasor6],i.getChildByPath("label").getComponent(e).string="10000",s.getChildByPath("label").getComponent(e).string="20000"},i.chooseBtnClick=function(t){for(var a=t[0],n=this.choosePanel.getChildByName("layout"),i=0;i<n.children.length;i++){n.children[i].getComponent(o).color=i==a?this.activeColor:this.unactiveColor}a>=c.Dinasor5&&a++,this.showDinasor(a)},i.showDinasor=function(t){this.nowChoooseDinasor=t;var a=1==u.instance.storageData.hasDinosaur[t],n=t;this.buyBtn.active=!a,t==c.Dinasor6&&n--;for(var i=0;i<this.showPanel.children.length;i++)this.showPanel.children[i].active=i==n;var s=this.dataPanel.getChildByName("title_1").getComponent(e),o=this.dataPanel.getChildByName("unlock_1"),r=this.dataPanel.getChildByName("barrel"),h=this.dataPanel.getChildByName("bullet"),l=this.dataPanel.getChildByName("scope"),g=this.dataPanel.getChildByName("armor"),C=this.dataPanel.getChildByName("helmet"),m=this.dataPanel.getChildByName("engine"),k=this.dataPanel.getChildByName("skillIcon"),v=this.dataPanel.getChildByName("title_5").getComponent(e),B=this.dataPanel.getChildByName("skillLabel").getComponent(e);s.string=this.dinasorName[n],o.active=a,D.activeIndexInChildren(r,n),D.activeIndexInChildren(h,n),D.activeIndexInChildren(l,n),D.activeIndexInChildren(g,n),D.activeIndexInChildren(C,n),D.activeIndexInChildren(m,n);var p=0;switch(t){case c.Dinasor1:p=0;break;case c.Dinasor2:p=1;break;case c.Dinasor3:p=2;break;case c.Dinasor4:p=3;break;case c.Dinasor6:p=4}D.activeIndexInChildren(k,p),v.string=this.skillName[p],B.string=this.skillDetail[p];var y=this.dataList.getChildByName("hp").getComponentInChildren(e),_=this.dataList.getChildByName("speed").getComponentInChildren(e),P=this.dataList.getChildByName("damage").getComponentInChildren(e),S=this.dataList.getChildByName("range").getComponentInChildren(e),f=this.dataList.getChildByName("aim").getComponentInChildren(e);switch(t){case c.Dinasor1:y.string=d.dinasor1_hp.toString(),_.string=d.dinasor1_speed.toString(),P.string=d.dinasor1_atk[0].toString()+"~"+d.dinasor1_atk[1].toString(),S.string=d.dinasor1_atk_distance.toString(),f.string="50%";break;case c.Dinasor2:y.string=d.dinasor2_hp.toString(),_.string=d.dinasor2_speed.toString(),P.string=d.dinasor2_atk[1].toString(),S.string=d.dinasor2_atk_distance.toString(),f.string="90%";break;case c.Dinasor3:y.string=d.dinasor3_hp.toString(),_.string=d.dinasor3_speed.toString(),P.string=d.dinasor3_atk[0].toString()+"~"+d.dinasor3_atk[1].toString(),S.string=d.dinasor3_atk_distance.toString(),f.string="80%";break;case c.Dinasor4:y.string=d.dinasor4_hp.toString(),_.string=d.dinasor4_speed.toString(),P.string=(d.dinasor4_atk[1]*(1/d.dinasor4_atk_interval)).toString(),S.string=d.dinasor4_atk_distance.toString(),f.string="60%";break;case c.Dinasor6:y.string=d.dinasor6_hp.toString(),_.string=d.dinasor6_speed.toString(),P.string=d.dinasor6_atk[0].toString()+"~"+d.dinasor6_atk[1].toString(),S.string=d.dinasor6_atk_distance.toString(),f.string="80%"}},i.onBuyBtnClick=function(){console.log("购买恐龙");var t=this.nowChoooseDinasor;switch(t){case c.Dinasor2:C.instance.showToast("段位等级3级解锁");break;case c.Dinasor3:C.instance.showToast("段位等级5级解锁");break;case c.Dinasor4:u.instance.storageData.gold>=1e4?(u.instance.changeGold(-1e4),u.instance.unlockDinasor(t),this.updateUI(),m.instance.trackEvent("Menu_Buy")):C.instance.showToast("金币不足");break;case c.Dinasor6:u.instance.storageData.gold>=2e4?(u.instance.changeGold(-2e4),u.instance.unlockDinasor(t),this.updateUI(),m.instance.trackEvent("Menu_Buy")):C.instance.showToast("金币不足")}},n}(h))||v);n._RF.pop()}}}));

System.register("chunks:///_virtual/HpBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./GameData.ts","./Bar.ts"],(function(o){"use strict";var n,e,t,r,a,c,i,s;return{setters:[function(o){n=o.inheritsLoose},function(o){e=o.cclegacy,t=o._decorator,r=o.Color,a=o.Sprite},function(o){c=o.CampType},function(o){i=o.default},function(o){s=o.Bar}],execute:function(){var l;e._RF.push({},"3fa9dDR4N1IRLoHzq5luTWb","HpBar",void 0);var u=t.ccclass;t.property,o("HpBar",u("HpBar")(l=function(o){function e(){return o.apply(this,arguments)||this}n(e,o);var t=e.prototype;return t.start=function(){},t.update=function(o){},t.changeColor=function(o){var n=new r(255,0,0,255);switch(o){case c.Player:n=i.playerColor;break;case c.Enemy:n=i.enemyColor}for(var e=0;e<this.node.children.length;e++)this.node.children[e].getComponent(a).color=n},t.changeAlpha=function(o){for(var n=this.node.getComponentsInChildren(a),e=0;e<n.length;e++){var t=n[e].color.clone();t.a=255*o,n[e].color=t}},t.follow=function(o,n,e){if(o){var t=n.getWorldPosition(),r=o.convertToUINode(t.add(e),this.node.parent);this.node.setPosition(r)}else console.warn("HpBar:跟随摄像机丢失")},e}(s))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/HurtEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./EventMgr.ts"],(function(t){"use strict";var n,r,e,o,c,i,u;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,e=t._decorator,o=t.Animation,c=t.Component},function(t){i=t.EventType},function(t){u=t.EventMgr}],execute:function(){var a;r._RF.push({},"056cf8rI+xOa7gEPpAMBmH+","HurtEffect",void 0);var s=e.ccclass;e.property,t("HurtEffect",s("HurtEffect")(a=function(t){function r(){for(var n,r=arguments.length,e=new Array(r),o=0;o<r;o++)e[o]=arguments[o];return(n=t.call.apply(t,[this].concat(e))||this).anim=void 0,n}n(r,t);var e=r.prototype;return e.onLoad=function(){this.anim=this.getComponent(o)},e.start=function(){u.on(i.Game_Player_Hurt,this,this.playHurt)},e.onDestroy=function(){u.clearTarget(this)},e.update=function(t){},e.playHurt=function(){this.anim.play()},r}(c))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/Idle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./behavior-status.ts","./behavior-task.ts"],(function(t){"use strict";var n,e,s,i,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},null,function(t){s=t.ccclass},function(t){i=t.BehaviorStatus},function(t){u=t.BehaviorTask}],execute:function(){var o;e._RF.push({},"1c46dvoGYRMwIvpHqM2pAfV","Idle",void 0);t("Idle",s("bt.Idle")(o=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.update=function(t){return t=i.Running,this.onUpdate(t)},e}(u))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/ImpulseStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./NoiseGenerator.ts","./BaseStage.ts"],(function(e){"use strict";var t,s,n,o,r,i;return{setters:[function(e){t=e.inheritsLoose,s=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy},function(e){o=e.cinestation},function(e){r=e.NoiseGenerator},function(e){i=e.BaseStage}],execute:function(){n._RF.push({},"f21dbKN87dMO5qpMLHdGsc/","ImpulseStage",void 0);e("ImpulseStage",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),n.prototype.updateStage=function(e){for(var t,n=this._vcam,i=n.impulse,u=s(o.impulseSources);!(t=u()).done;){var a=t.value;if(a.node.layer&i.source){var c=a.generateImpulse(e);c&&r.ApplyNoise(c,n)}}},n}(i));n._RF.pop()}}}));

System.register("chunks:///_virtual/Interrupter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./property.ts","./blackboard-declaration.ts","./behavior-decorator.ts"],(function(t){"use strict";var r,e,o,i,n,a,c,p,s;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy},null,function(t){a=t.ccclass},function(t){c=t.property},function(t){p=t.EAbortType},function(t){s=t.BehaviorDecorator}],execute:function(){var l,u,y,h,f;n._RF.push({},"b7632MgaNFI7po3/OStKHXa","Interrupter",void 0);t("Interrupter",(l=a("bt.Interrupter"),u=c({type:p,tooltip:"中断类型（Self：中断自身分支；LowerPriority：中断低优先级的兄弟分支）"}),l((f=r((h=function(t){function r(){for(var r,e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return r=t.call.apply(t,[this].concat(n))||this,o(r,"abortType",f,i(r)),r}e(r,t);var n=r.prototype;return n.load=function(){if(t.prototype.load.call(this),this.abortType!=p.LowerPriority&&this.abortType!=p.Both||this.parent.addInterrupter(this.owner),this.abortType==p.Self||this.abortType==p.Both)for(var r=this.owner.children,e=r.length-1,o=0;o<e;o++){var i=r[o];this.owner.addInterrupter(i)}},n.destroy=function(){t.prototype.destroy.call(this)},n.execute=function(r){return t.prototype.execute.call(this,r)},r}(s)).prototype,"abortType",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return p.None}}),y=h))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/InterstitialAdUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var e,n,i,r,s,o,a,c,u,h,l,d,f,p,m,g,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,a=t.Node,c=t.ProgressBar,u=t.Quat,h=t.Tween,l=t.tween,d=t.Component},function(t){f=t.default},function(t){p=t.default},function(t){m=t.default},function(t){g=t.default},function(t){_=t.default}],execute:function(){var b,C,B,x,v,w,k;s._RF.push({},"f8a21SuRo5ISan4Crrw3Ks3","InterstitialAdUI",void 0);var I=o.ccclass,T=o.property;t("default",(b=I("InterstitialAdUI"),C=T(a),B=T(c),b((w=e((v=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,i(e,"box",w,r(e)),i(e,"pBar",k,r(e)),e.ccb=null,e.showCallback=null,e.hadShowBanner=!1,e.preTime=0,e.rateTime=0,e.minclicknum=void 0,e.maxclicknum=void 0,e.needClick=void 0,e.isforce=!1,e.addProgerss=void 0,e.repeatCount=0,e.isRepeat=void 0,e.lianxu_num=void 0,e.quat1=new u,e.quat2=new u,e.quat3=new u,e}n(e,t);var s=e.prototype;return s.onDisable=function(){var t=this;this.unscheduleAllCallbacks(),_.Instance.hideBannerFun(!0),this.repeatCount>0?m.Instance.com.scheduleOnce((function(){t.showUI(t.isRepeat,t.lianxu_num,t.ccb),t.repeatCount--}),.1):this.ccb&&this.ccb()},s.showUI=function(t,e,n){this.lianxu_num=e,this.isRepeat=t,t&&this.repeatCount<=0&&(this.repeatCount=e),this.minclicknum=Number(p.instance.dataConfig.front_box_clicks[0]),this.maxclicknum=Number(p.instance.dataConfig.front_box_clicks[1]),this.needClick=p.instance.GetRandom(this.minclicknum,this.maxclicknum-p.instance.dataConfig.front_progress_bar_reduce),this.isforce=p.instance.dataConfig.front_is_box_force,this.addProgerss=1/this.maxclicknum,console.log("this.needClick:",this.needClick),console.log("this.addProgerss:",this.addProgerss),this.ccb=n,this.node.active=!0,this.hadShowBanner=!1,this.pBar.progress=0,this.rateTime=0,this.preTime=0,this.schedule(this.DecBar),g.instance.showBanner()},s.closeCB=function(){this.node.active=!1},s.onCloseInter=function(){},s.clickCB=function(){var t=this;if(this.pBar.progress+=this.addProgerss,this.pBar.progress>1&&(this.pBar.progress=1),this.shakeBox(),!this.hadShowBanner){this.isforce=p.instance.dataConfig.front_is_box_force;var e=p.instance.dataConfig.front_box_hide_time/1e3,n=function(){t.hadShowBanner=!0,t.scheduleOnce((function(){f.instance.getIsShow()||(t.repeatCount=0),t.closeCB()}),e),g.instance.showInterAd()},i=this.rateTime-this.preTime,r=p.instance.dataConfig.front_box_sulv_qujian,s=this.getRandomItemInArr(r).split("|"),o=s[0],a=s[1];if(100*this.pBar.progress>=p.instance.dataConfig.front_box_sulv_start&&parseFloat(o)<=i&&i<=parseFloat(a))return console.log("宝箱触发频率：",i),p.instance.dataConfig.front_sulv_wuchu_switch&&(this.isforce=!0,e=p.instance.dataConfig.front_fbox_hide_time/1e3),void n();this.preTime=this.rateTime,this.pBar.progress>=this.needClick*this.addProgerss&&!this.hadShowBanner&&(console.log("宝箱触发进度"),n())}},s.shakeBox=function(){h.stopAllByTarget(this.box),u.fromEuler(this.quat1,0,0,-10),u.fromEuler(this.quat2,0,0,10),u.fromEuler(this.quat3,0,0,0),l(this.box).to(.1,{rotation:this.quat1}).to(.2,{rotation:this.quat2}).to(.1,{rotation:this.quat3}).start()},s.DecBar=function(){this.pBar.progress-=p.instance.dataConfig.front_progress_bar_return,this.pBar.progress<0&&(this.pBar.progress=0)},s.update=function(t){this.rateTime+=t},s.GetRandom=function(t,e,n){void 0===n&&(n=!0);var i=e-t,r=Math.random()*i;return r+=t,n?Math.floor(r):r},s.getRandomItemInArr=function(t){return t[Math.floor(Math.random()*t.length)]},e}(d)).prototype,"box",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(v.prototype,"pBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=v))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/Inverter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./behavior-status.ts","./btclass.ts","./behavior-decorator.ts"],(function(t){"use strict";var e,r,n,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy},null,function(t){n=t.BehaviorStatus},function(t){c=t.ccclass},function(t){s=t.BehaviorDecorator}],execute:function(){var u;r._RF.push({},"1c7eeM24ORNuLjT/Wv26orE","Inverter",void 0);t("Inverter",c("bt.Inverter")(u=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r.prototype.execute=function(e){return e==n.Success?e=n.Failure:e==n.Failure&&(e=n.Success),t.prototype.execute.call(this,e)},r}(s))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/Item.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./EventMgr.ts","./PoolMgr.ts","./PoolComp.ts","./Hero.ts"],(function(e){"use strict";var t,n,r,i,o,a,c,s,u,l,p,f,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Enum,s=e.Collider},function(e){u=e.ItemType,l=e.EventType},function(e){p=e.EventMgr},function(e){f=e.PoolMgr},function(e){d=e.PoolComp},function(e){h=e.Hero}],execute:function(){var y,m,g,v,_;o._RF.push({},"d1483sHHz5PPaZA+A+1Nl42","Item",void 0);var I=a.ccclass,b=a.property;e("Item",(y=I("Item"),m=b({type:c(u)}),y((_=t((v=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"type",_,i(t)),t.addWay=1,t}n(t,e);var o=t.prototype;return o.firstBorn=function(){this.node.getComponent(s).on("onTriggerEnter",this.onTriggerEnter,this)},o.clear=function(){},o.init=function(){this.node.active=!0,this.addWay=1},o.recyle=function(){this.node.active=!1},o.update=function(e){},o.onTriggerEnter=function(e){f.instance.recyleObj(this);var t=e.otherCollider.node.getComponent(h);if(t&&!t.isDead){switch(this.type){case u.SpeedUp:t.speedUpBuff_Item_On();break;case u.Heal:t.heal(5e3),t.healBuff_On();break;case u.Sheild:t.defendBuff_Item_On();break;case u.AtkUp:t.attackBuff_Item_On()}p.event(l.Game_Teach_Item)}},t}(d)).prototype,"type",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.Heal}}),g=v))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/IVCam.ts",["cc"],(function(){"use strict";var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"15037D3BZVK3LlfNfJfNhch","IVCam",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/JJMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./jiujiu_sdk_conf.mjs_cjs=&original=.js","./jiujiu_sdk.min.mjs_cjs=&original=.js","./jiujiu_pull_sdk.min.mjs_cjs=&original=.js","./JJWxTrap.ts","./WxPlatform.ts","./UMTrack.ts"],(function(t){"use strict";var i,a,n,r,e;return{setters:[function(t){i=t.createClass},function(t){a=t.cclegacy,n=t._decorator,r=t.loader,e=t.SpriteFrame},null,null,null,null,null,null],execute:function(){var o,s;t("SceneDir",void 0),a._RF.push({},"38cb7OqDnxCvLb5ThetVf7F","JJMgr",void 0);var l,u=n.ccclass;n.property;!function(t){t.SCENE_FRIENDGAME="FriendGameUI",t.SCENE_SCROLLUI="ScrollUI",t.SCENE_RECOMMENDUI="RecommendUI",t.SCENE_FULLGAMEUI="FullGameUI",t.SCENE_FINISHGAMEUI="FinishGameUI",t.SCENE_DRAWUI="DrawUI",t.SCENE_PROGRAMUI="ProgramUI",t.SCENE_WECHATUI="WeChatUI",t.SCENE_STARTNAVUI="StartNavUI",t.SCENE_GAMENAVUI="GameNavUI",t.SCENE_MADUI1="MadUI1",t.SCENE_MADUI2="MadUI2",t.SCENE_HALLUI="HallUI"}(l||(l=t("SceneDir",{})));var c=function(){this.appid=void 0,this.icon=void 0,this.path=void 0,this.title=void 0,this.subtitle=void 0,this.id=void 0};t("default",u("JJMgr")(((s=function(){function t(){this.dataConfig={},this.navDataArr=[],this.isFinished=!1,this.shareConfig=void 0}var a=t.prototype;return a.initJJ=function(t){t&&t()},a.updateDataConfig=function(t){var i=t.data;for(var a in this.dataConfig.is_allow_area=t.is_allow_area,this.dataConfig.is_allow_export=t.is_allow_export,this.dataConfig.front_wuchu_scene=t.front_wuchu_scene,i)this.dataConfig[a]=i[a].config_val;console.log(this.dataConfig)},a.updateNavData=function(t){this.navDataArr=[];for(var i=0;i<t.length;i++){var a=t[i],n=new c;n.appid=a.channel_game_appid,n.title=a.channel_game_name,n.path=a.path,n.subtitle=a.originality.copywriting,n.icon=a.originality.material,n.id=a.originality.id,this.navDataArr.push(n)}},a.JJSendEvent=function(t,i){},a.NavigateApp=function(t,i,a,n){},a.getSubtitle=function(t){return this.navDataArr[t].subtitle&&""!=this.navDataArr[t].subtitle?this.navDataArr[t].subtitle:this.navDataArr[t].title},a.loadImgByUrl=function(t,i,a,n){void 0===a&&(a="png"),r.load({url:i,type:a},(function(i,a){!i&&t&&a&&t.spriteFrame&&(t.spriteFrame=new e,t.spriteFrame.texture=a,n&&n())}))},a.loadSpriteFrame=function(t,i,a){r.loadRes(t,e,(function(t,n){i.spriteFrame=n,a&&a()}))},a.shuffleArr=function(t){for(var i=t.length;i;){var a=Math.floor(Math.random()*i--),n=[t[i],t[a]];t[a]=n[0],t[i]=n[1]}return t},a.GetRandom=function(t,i,a){void 0===a&&(a=!0);var n=i-t+1,r=Math.random()*n;return r+=t,a?Math.floor(r):r},i(t,[{key:"shareContext",get:function(){return this.shareConfig},set:function(t){this.shareConfig=t}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,o=s))||o);a._RF.pop()}}}));

System.register("chunks:///_virtual/JJWxTrap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DuilianAdMgr.ts","./ExportCrl.ts","./FinishCustomAdMgr.ts","./JJMgr.ts","./EndBoxUI.ts","./FinishGameUI.ts","./GridUI.ts","./GridUI2.ts","./GridUI3.ts","./GridUI4.ts","./RunUI.ts","./StartBoxUI.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(n){"use strict";var t,e,o,i,a,s,c,r,u,h,d,f,w,l,_,g,m;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,o=n.find},function(n){i=n.default},function(n){a=n.default},function(n){s=n.default},function(n){c=n.default},function(n){r=n.default},function(n){u=n.default},function(n){h=n.default},function(n){d=n.default},function(n){f=n.default},function(n){w=n.default},function(n){l=n.default},function(n){_=n.default},function(n){g=n.default},function(n){m=n.default}],execute:function(){e._RF.push({},"0b7f71mekdODZV20fn3yQ+y","JJWxTrap",void 0),n("default",function(){function n(){this.isSplash=!1,this.gridInt=void 0,this.dataConfig=c.instance.dataConfig,this._levelObj=void 0,this._Level=0,this.moreGameBtn=void 0,this.drawBtn=void 0}var e=n.prototype;return e.allowScene=function(){if(!this.dataConfig.front_wuchu_scene)return!0;var n=window.wx.getEnterOptionsSync().scene,t=window.wx.getEnterOptionsSync().query,e=Number(localStorage.getItem("localScene"));e||(e=n,localStorage.setItem("localScene",e.toString()),t.wxgamecid&&localStorage.setItem("wxgamecid",t.wxgamecid.toString())),this.dataConfig.front_first_scv_swtich&&(n=e);var o=localStorage.getItem("wxgamecid");this.dataConfig.front_is_source||(o="true");var i=this.dataConfig.front_wuchu_scene.toString();if(-1==i.search("|"))return parseInt(i)!=n;for(var a=i.split("|"),s=0;s<a.length;s++){if(parseInt(a[s])==n&&o)return!0}return!1},e.inHomePage=function(t,e){var o=this;console.log("本地保存场景值：",localStorage.getItem("localScene")),console.log("本地保存路径值：",localStorage.getItem("wxgamecid")),console.log("allowScene:",this.allowScene()),this.moreGameBtn=t,this.drawBtn=e,t&&this.com.schedule(n.Instance.updateMoreGameBtn,.1),e&&this.com.schedule(n.Instance.updateDrawBtn,.1),i.instance.hideGrid(),new Promise((function(t,e){!o.isSplash&&n.Instance.NewWuchu2&&c.instance.dataConfig.front_home_hot_tuijian?o.showGridUI4((function(){t(0)}),!0):t(0)})).then((function(t){return new Promise((function(t,e){!o.isSplash&&n.Instance.NewWuchu2&&100*Math.random()<c.instance.dataConfig.front_home_vi_chance?(g.instance.showVideoAd(null,(function(){})),t(1)):t(1)}))})).then((function(t){return new Promise((function(t,e){!o.isSplash&&n.Instance.NewWuchu2&&100*Math.random()<c.instance.dataConfig.front_home_box_chance?o.showHomeBox((function(){t(2)})):t(2)}))})).then((function(n){return new Promise((function(n,t){o.gridInt=setInterval((function(){o.testGrid()}),1e3),n(3)}))})).then((function(n){m.Instance.showBannerFun2(),o.isSplash=!0}))},e.testGrid=function(){i.instance.gridAdArr.length>0&&(i.instance.showGrid(),clearInterval(this.gridInt))},e.updateMoreGameBtn=function(){n.Instance.moreGameBtn.active=n.Instance.NewWuchu2&&c.instance.dataConfig.front_haowan_switch},e.updateDrawBtn=function(){n.Instance.drawBtn.active=n.Instance.NewWuchu2&&c.instance.dataConfig.front_chouti_switch},e.clickShop=function(){i.instance.hideGrid(),m.Instance.hideBannerFun(!0),this.com.unschedule(n.Instance.updateMoreGameBtn),this.com.unschedule(n.Instance.updateDrawBtn)},e.clickStartGame=function(t){var e=this;i.instance.hideGrid(),m.Instance.hideBannerFun(!0),this.com.unschedule(n.Instance.updateMoreGameBtn),this.com.unschedule(n.Instance.updateDrawBtn),n.Instance.NewWuchu2?new Promise((function(n,t){e.showGridUI3((function(){n(0)}))})).then((function(n){return new Promise((function(n,t){100*Math.random()<c.instance.dataConfig.front_start_vi_chance?(g.instance.showVideoAd(null,(function(n){})),n(1)):n(1)}))})).then((function(n){return new Promise((function(n,t){e.showStartBox((function(){n(2)}))}))})).then((function(n){g.instance.showGameGridAd(),t&&t()})):t&&t()},e.clickHomeMoreGame=function(){i.instance.hideGrid(),m.Instance.hideBannerFun(!0),this.showGridUI((function(){i.instance.showGrid(),g.instance.showBanner()}),!1,!0)},e.clickDraw=function(){i.instance.hideGrid(),m.Instance.hideBannerFun(!0),this.showGridUI((function(){i.instance.showGrid(),g.instance.showBanner()}),!1,!0)},e.clickFinishMoreGame=function(){var n=this;o("CanvasJJ/ExportNode/FinishGameUI").active=!1,o("CanvasJJ/ExportNode/ScrollUI").active=!1,s.instance.hideGrid(),g.instance.hideGameGridAd(),m.Instance.hideBannerFun(!0),this.showGridUI((function(){g.instance.showGameGridAd(),!g.instance.showBanner()&&n.NewWuchu&&c.instance.dataConfig.front_daochulan_switch&&n.showFinishScroll(),n.dataConfig.front_jiesuanye_switch&&n.NewWuchu&&(100*Math.random()<n.dataConfig.front_daochu_gezi_chance?n.showFinishExport():s.instance.showGrid())}),!1,!0)},e.showGameBanner=function(){this.NewWuchu&&c.instance.dataConfig.front_game_banner_switch&&m.Instance.showBannerFun2()},e.showGameOver=function(n){var t=this;g.instance.hideGameGridAd(),m.Instance.hideBannerFun(!0),this.showGridUI((function(){t.showEndBox(n)}),!0)},e.showFinishUI=function(t){m.Instance.hideBannerFun(!0),g.instance.showGameGridAd(),t&&(t.active=n.Instance.NewWuchu&&c.instance.dataConfig.front_chouti_switch),m.Instance.showBannerFun2(),this.NewWuchu&&c.instance.dataConfig.front_daochulan_switch&&this.showFinishScroll(),this.dataConfig.front_jiesuanye_switch&&this.NewWuchu&&(100*Math.random()<this.dataConfig.front_daochu_gezi_chance?this.showFinishExport():s.instance.showGrid()),n.Instance.NewWuchu&&c.instance.dataConfig.front_jiesaunye_chaping_switch&&g.instance.showInterAd()},e.closeFinishUI=function(n){var t=this;s.instance.hideGrid(),g.instance.hideGameGridAd(),m.Instance.hideBannerFun(!0),o("CanvasJJ/ExportNode/FinishGameUI").active=!1,o("CanvasJJ/ExportNode/ScrollUI").active=!1,new Promise((function(n,e){t.NewWuchu2&&100*Math.random()<c.instance.dataConfig.front_jiesuanye_vi_chance?g.instance.showVideoAd(null,(function(t){n(1)})):n(1)})).then((function(n){return new Promise((function(n,e){t.showGridUI2((function(){setTimeout((function(){n(2)}),100),t.dataConfig.front_wx_ad_switch&&t.NewWuchu&&g.instance.showInterAd()}),!0)}))})).then((function(t){n&&n()}))},e.showGridUI=function(n,t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),o("CanvasJJ/ExportNode/GridUI").getComponent(h).showUI(n,t,e)},e.showGridUI2=function(n,t){void 0===t&&(t=!1),o("CanvasJJ/ExportNode/GridUI2").getComponent(d).showUI(n,t)},e.showGridUI3=function(n){o("CanvasJJ/ExportNode/GridUI3").getComponent(f).showUI(n)},e.showGridUI4=function(n,t){void 0===t&&(t=!1),o("CanvasJJ/ExportNode/GridUI4").getComponent(w).showUI(n,t)},e.showRunUI=function(n){o("CanvasJJ/ExportNode/RunUI").getComponent(l).showUI(n)},e.showFinishExport=function(){o("CanvasJJ/ExportNode/FinishGameUI").getComponent(u).showUI()},e.showFinishScroll=function(){o("CanvasJJ/ExportNode/ScrollUI").active=!0},e.showHomeBox=function(n){o("CanvasJJ/ExportNode/StartBoxUI").getComponent(_).showUI(!1,c.instance.dataConfig.front_fbox_lianxu_num,n)},e.showStartBox=function(t){console.log("开始按钮",c.instance.dataConfig.front_fbox_wuchu_change,c.instance.dataConfig.front_level_fbox_num,this.Level,n.Instance.NewWuchu2),this.getRandom0To100<c.instance.dataConfig.front_fbox_wuchu_change&&c.instance.dataConfig.front_level_fbox_num<=this.Level&&n.Instance.NewWuchu2?1==c.instance.dataConfig.front_fbox_status?o("CanvasJJ/ExportNode/EndBoxUI").getComponent(r).showUI(c.instance.dataConfig.front_fbox_lianxu_num,t):2==c.instance.dataConfig.front_fbox_status?o("CanvasJJ/ExportNode/StartBoxUI").getComponent(_).showUI(!0,c.instance.dataConfig.front_fbox_lianxu_num,t):t&&t():t&&t()},e.showEndBox=function(t){this.getRandom0To100<c.instance.dataConfig.front_tbox_wuchu_change&&c.instance.dataConfig.front_level_tbox_num<=this.Level&&n.Instance.NewWuchu2?1==c.instance.dataConfig.front_tbox_status?o("CanvasJJ/ExportNode/EndBoxUI").getComponent(r).showUI(c.instance.dataConfig.front_tbox_lianxu_num,t):2==c.instance.dataConfig.front_tbox_status?o("CanvasJJ/ExportNode/StartBoxUI").getComponent(_).showUI(!0,c.instance.dataConfig.front_tbox_lianxu_num,t):t&&t():t&&t()},e.getRandomIndex=function(){return Math.floor(Math.random()*c.instance.navDataArr.length)},e.inGame=function(t,e){t&&(t.active=n.Instance.NewWuchu&&c.instance.dataConfig.front_chouti_switch),e&&(e.active=n.Instance.NewWuchu&&c.instance.dataConfig.front_jingxi_gezi_switch)},t(n,[{key:"Level",get:function(){return this._Level},set:function(n){this._Level=n}},{key:"NewWuchu",get:function(){return!0}},{key:"NewWuchu2",get:function(){return c.instance.dataConfig.is_allow_area&&this.allowScene()}},{key:"com",get:function(){return o("CanvasJJ/ExportNode").getComponent(a)}},{key:"getRandom0To100",get:function(){return 100*Math.random()}}],[{key:"Instance",get:function(){return n._instance||(n._instance=new n),n._instance}}]),n}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/JoystickComponent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./TouchMgr.ts"],(function(t){"use strict";var i,o,s,e,n,h,c,r,y,a,u,f,x,v,g,l,p,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,s=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){n=t.cclegacy,h=t._decorator,c=t.view,r=t.Node,y=t.Vec3,a=t.UITransform,u=t.Vec2,f=t.lerp,x=t.KeyCode,v=t.input,g=t.Input,l=t.Component},function(t){p=t.EventMgr},function(t){T=t.TouchEventType}],execute:function(){var A,P,d,E,k,U,C;n._RF.push({},"9c9c5EcvclD6olyMcroCqfD","JoystickComponent",void 0);var M=h.ccclass,I=h.property,j=h.menu,_=c.getVisibleSize();t("JoystickComponent",(A=M("JoystickComponent"),P=j("UI/Comp/JoystickComponent"),d=I(r),A(E=P(((C=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),h=0;h<o;h++)n[h]=arguments[h];return(i=t.call.apply(t,[this].concat(n))||this).startPoint=new y,i.joyBg=void 0,i.joystick=void 0,i.firstTouchPoint=void 0,i.isPressed=void 0,i.canMove=!0,i.angle=void 0,i.joyBgSize=void 0,s(i,"touchArea",U,e(i)),i.xAxis=0,i.yAxis=0,i.stopSpeed=.1,i.keyXAxis=0,i.keyYAxis=0,i.firstTouchId=void 0,i}o(i,t);var n=i.prototype;return n.onEnable=function(){_=c.getVisibleSize(),this.startPoint=this.node.getPosition(),this.joyBg=this.node,this.joyBgSize=this.joyBg.getComponent(a).contentSize,this.joystick=this.joyBg.children[0];var t=this.joyBg.getPosition();t.x=0,t.y=-_.height/2+375,this.joyBg.setPosition(t);var o=this.joystick.getPosition();o.x=0,o.y=0,this.joystick.setPosition(o),this.controlOn(),i.instance=this},n.update=function(t){if(0!=this.keyXAxis||0!=this.keyYAxis){var i=new u(this.keyXAxis,this.keyYAxis);i.normalize(),this.xAxis=i.x,this.yAxis=i.y}this.isPressed||(Math.abs(this.xAxis)<this.stopSpeed?this.xAxis=0:this.xAxis=f(this.xAxis,0,.1),Math.abs(this.yAxis)<this.stopSpeed?this.yAxis=0:this.yAxis=f(this.yAxis,0,.1)),p.event(T.joyAxis,[this.xAxis,this.yAxis])},n.onDestroy=function(){p.clearTarget(this),this.controlOff()},n.keyCtrl=function(t){t.keyCode==x.KEY_W&&(this.keyYAxis+=1),t.keyCode==x.KEY_S&&(this.keyYAxis-=1),t.keyCode==x.KEY_A&&(this.keyXAxis-=1),t.keyCode==x.KEY_D&&(this.keyXAxis+=1)},n.keyUp=function(t){t.keyCode==x.KEY_W&&(this.keyYAxis=0),t.keyCode==x.KEY_S&&(this.keyYAxis=0),t.keyCode==x.KEY_A&&(this.keyXAxis=0),t.keyCode==x.KEY_D&&(this.keyXAxis=0)},n.controlOn=function(){v.on(g.EventType.KEY_DOWN,this.keyCtrl,this),v.on(g.EventType.KEY_UP,this.keyUp,this),this.touchArea.on(r.EventType.TOUCH_START,this.onMouseDownEvent,this),this.touchArea.on(r.EventType.TOUCH_MOVE,this.onMouseMoveEvent,this),this.touchArea.on(r.EventType.TOUCH_END,this.onMouseUpEvent,this),this.touchArea.on(r.EventType.TOUCH_CANCEL,this.onMouseUpEvent,this)},n.controlOff=function(){v.off(g.EventType.KEY_DOWN,this.keyCtrl,this),v.off(g.EventType.KEY_UP,this.keyUp,this),this.touchArea.off(r.EventType.TOUCH_START,this.onMouseDownEvent,this),this.touchArea.off(r.EventType.TOUCH_MOVE,this.onMouseMoveEvent,this),this.touchArea.off(r.EventType.TOUCH_END,this.onMouseUpEvent,this),this.touchArea.off(r.EventType.TOUCH_CANCEL,this.onMouseUpEvent,this)},n.onMouseDownEvent=function(t){if(!this.firstTouchId){this.firstTouchId=t.getID(),this.firstTouchPoint=new u(t.getUILocation().x,t.getUILocation().y);var i=this.joyBg.getPosition();i.x=this.firstTouchPoint.x-_.width/2,i.y=this.firstTouchPoint.y-_.height/2,this.joyBg.setPosition(i);var o=this.joystick.getPosition();o.x=0,o.y=0,this.joystick.setPosition(o),this.isPressed=!0}},n.onMouseUpEvent=function(t){this.firstTouchId==t.getID()&&(this.firstTouchId=null,this.isPressed=!1,this.joystick.setPosition(new y(0,0,0)))},n.onMouseMoveEvent=function(t){this.firstTouchId==t.getID()&&this.moveCtrl(t)},n.moveCtrl=function(t){if(this.isPressed){var i=new u(0,-1),o=new u(t.getUILocation().x-this.firstTouchPoint.x,t.getUILocation().y-this.firstTouchPoint.y),s=u.len(o),e=this.joyBgSize.width/2;if(0==s)this.canMove=!1;else{this.joyBg.setPosition(new y(this.firstTouchPoint.x-_.width/2,this.firstTouchPoint.y-_.height/2,0)),this.canMove=s>5;var n=u.dot(i,o)/(u.len(i)*u.len(o)),h=Math.acos(n);this.angle=180*h/Math.PI,t.getUILocation().x<this.firstTouchPoint.x&&(this.angle=-this.angle);var c=t.getUILocation().x-this.firstTouchPoint.x,r=t.getUILocation().y-this.firstTouchPoint.y,a=new u(c,r);a.lengthSqr()>e*e?a.normalize():a.multiplyScalar(1/e),this.xAxis=a.x,this.yAxis=a.y}if(this.canMove){var f=this.joystick.getPosition();if(t.getUILocation().x<this.firstTouchPoint.x?f.x=Math.max(-e,t.getUILocation().x-this.firstTouchPoint.x):t.getUILocation().x>this.firstTouchPoint.x&&(f.x=Math.min(e,t.getUILocation().x-this.firstTouchPoint.x)),t.getUILocation().y<this.firstTouchPoint.y?f.y=Math.max(-e,t.getUILocation().y-this.firstTouchPoint.y):t.getUILocation().y>this.firstTouchPoint.y&&(f.y=Math.min(e,t.getUILocation().y-this.firstTouchPoint.y)),this.joystick.setPosition(f),s>e){var x=new u(t.getUILocation().x-this.firstTouchPoint.x,t.getUILocation().y-this.firstTouchPoint.y);u.normalize(x,x),u.multiplyScalar(x,x.clone(),e),this.joystick.setPosition(new y(e+x.x-this.joyBgSize.width/2,e+x.y-this.joyBgSize.height/2,0))}}}},i}(l)).instance=void 0,U=i((k=C).prototype,"touchArea",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=k))||E)||E));n._RF.pop()}}}));

System.register("chunks:///_virtual/JsonToScene.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,r,a,s,n,i,l,p,c,u,y,f,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,s=e.createClass},function(e){n=e.cclegacy,i=e._decorator,l=e.Node,p=e.JsonAsset,c=e.CCFloat,u=e.Vec3,y=e.Quat,f=e.instantiate,v=e.Component}],execute:function(){var b,d,h,g,m,F,w,S,J,z,C,T;n._RF.push({},"1c3dfjwmchLR6MHTvf3xOM4","JsonToScene",void 0);var _=i.ccclass,N=i.property,P=i.menu;e("JsonToScene",(b=_("JsonToScene"),d=P("Tool/JsonToScene"),h=N({type:l,visible:!0,displayName:"生成节点"}),g=N({type:p,visible:!0,displayName:"场景数据"}),m=N({type:l,visible:!0,displayName:"Prefab节点"}),F=N({type:c,visible:!0,displayName:"随便修改一下值生成"}),w=N({type:c,visible:!0,displayName:"随便修改一下值删除场景"}),b(S=d((z=t((J=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),n=0;n<o;n++)s[n]=arguments[n];return t=e.call.apply(e,[this].concat(s))||this,r(t,"stage",z,a(t)),r(t,"sceneJson",C,a(t)),r(t,"prefab",T,a(t)),t._value=0,t._value2=0,t}o(t,e);var n=t.prototype;return n.onLoad=function(){this.bornScene(),this.prefab.destroy()},n.bornScene=function(){var e=this.sceneJson.json;if(this.stage.destroyAllChildren(),e)for(var t=0;t<e.length;t++){var o=e[t].name.split(" ")[0],r=new u(parseFloat(e[t].pos.x),parseFloat(e[t].pos.y),parseFloat(e[t].pos.z)),a=new y(parseFloat(e[t].rot.x),parseFloat(e[t].rot.y),parseFloat(e[t].rot.z),parseFloat(e[t].rot.w)),s=new u(parseFloat(e[t].sca.x),parseFloat(e[t].sca.y),parseFloat(e[t].sca.z)),n=f(this.prefab.getChildByName(o));this.stage.addChild(n),n.setWorldPosition(r),n.setWorldRotation(a),n.setScale(s)}else console.warn("缺失场景数据")},s(t,[{key:"value",get:function(){return this._value},set:function(e){this.bornScene()}},{key:"value2",get:function(){return this._value2},set:function(e){this.stage.destroyAllChildren()}}]),t}(v)).prototype,"stage",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=t(J.prototype,"sceneJson",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(J.prototype,"prefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(J.prototype,"value",[F],Object.getOwnPropertyDescriptor(J.prototype,"value"),J.prototype),t(J.prototype,"value2",[w],Object.getOwnPropertyDescriptor(J.prototype,"value2"),J.prototype),S=J))||S)||S));n._RF.pop()}}}));

System.register("chunks:///_virtual/KillList.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./EventMgr.ts"],(function(e){"use strict";var n,t,i,o,r,l,a,c,s,d,p,h,u;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,i=e._decorator,o=e.Sprite,r=e.Color,l=e.instantiate,a=e.Vec3,c=e.Animation,s=e.Label,d=e.Component},function(e){p=e.EventType,h=e.CampType},function(e){u=e.EventMgr}],execute:function(){var m;t._RF.push({},"502d0/9pP5KjK8qqLGuzXBN","KillList",void 0);var g=i.ccclass;i.property,e("KillList",g("KillList")(m=function(e){function t(){return e.apply(this,arguments)||this}n(t,e);var i=t.prototype;return i.onLoad=function(){this.node.children[0].getComponent(o).color=new r(255,255,255,0)},i.start=function(){u.on(p.Game_HeroDie_Event,this,this.bornNewInfo)},i.bornNewInfo=function(e){for(var n,t=0;t<this.node.children.length;t++)if(0==this.node.children[t].getComponent(o).color.a){n=this.node.children[t];break}n||(n=l(this.node.children[0]),this.node.addChild(n),n.setPosition(new a(0,-50*(this.node.children.length-1),0))),n.getComponent(c).play("killerList_Info");var i=n.getChildByName("killerName").getComponent(s),d=n.getChildByName("deadName").getComponent(s),p=n.getChildByName("bg");i.string=e.killerName,d.string=e.deadName,i.color=e.camp!=h.Player?new r(50,180,255,255):new r(255,50,50,255),d.color=e.camp==h.Player?new r(50,180,255,255):new r(255,50,50,255),p.children[0].active=e.camp!=h.Player,p.children[1].active=e.camp==h.Player},i.update=function(e){},t}(d))||m);t._RF.pop()}}}));

System.register("chunks:///_virtual/KillTips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./EventMgr.ts"],(function(o){"use strict";var t,n,r,i,e,s,l,p,c;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,r=o._decorator,i=o.Sprite,e=o.Color,s=o.Animation,l=o.Component},function(o){p=o.EventType},function(o){c=o.EventMgr}],execute:function(){var u;n._RF.push({},"cfa88MMfapAtYM+UliWlO4q","KillTips",void 0);var a=r.ccclass;r.property,o("KillTips",a("KillTips")(u=function(o){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=o.call.apply(o,[this].concat(r))||this).kill_word=void 0,t.support_word=void 0,t}t(n,o);var r=n.prototype;return r.onLoad=function(){this.kill_word=this.node.getChildByName("kill_word"),this.support_word=this.node.getChildByName("support_word")},r.start=function(){this.kill_word.getComponent(i).color=new e(255,255,255,0),this.support_word.getComponent(i).color=new e(255,255,255,0),c.on(p.Game_Player_Kill,this,this.showKill),c.on(p.Game_Player_Support,this,this.showSupport)},r.onDestroy=function(){c.clearTarget(this)},r.showKill=function(){var o=this.kill_word.getComponent(s),t=this.support_word.getComponent(s);o.play(),t.stop(),this.support_word.getComponent(i).color=new e(255,255,255,0)},r.showSupport=function(){var o=this.kill_word.getComponent(s),t=this.support_word.getComponent(s);o.stop(),t.play(),this.kill_word.getComponent(i).color=new e(255,255,255,0)},n}(l))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Load.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./AssetMgr.ts","./Platform.ts","./PlatForm_wx.ts","./UMTrack.ts","./Bar.ts"],(function(o){"use strict";var t,e,n,a,r,i,s,c,l,u,d,f,p,g,y,h,b,v;return{setters:[function(o){t=o.applyDecoratedDescriptor,e=o.inheritsLoose,n=o.initializerDefineProperty,a=o.assertThisInitialized},function(o){r=o.cclegacy,i=o._decorator,s=o.EventTarget,c=o.Node,l=o.game,u=o.assetManager,d=o.Component,f=o.director},function(o){p=o.default},function(o){g=o.AssetMgr},function(o){y=o.default},function(o){h=o.default},function(o){b=o.UMTrack},function(o){v=o.Bar}],execute:function(){var m,S,k,L,w,D,N,P;r._RF.push({},"9ba23UKv6VKBaRDHIrm1VNu","Load",void 0);var B=i.ccclass,R=i.property,_=i.menu,M=new s;o("Load",(m=B("Load"),S=_("UI/Load"),k=R({type:v,displayName:"进度条"}),L=R(c),m(w=S((N=t((D=function(o){function t(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=o.call.apply(o,[this].concat(r))||this,n(t,"bar",N,a(t)),n(t,"unDestroyNode",P,a(t)),t.startScene="Home",t.firstLoadUrl=["01_Home"],t.isSdkOk=!1,t}e(t,o);var r=t.prototype;return r.onLoad=function(){l.addPersistRootNode(this.unDestroyNode),window.wx?this.unDestroyNode.addComponent(h):this.unDestroyNode.addComponent(y),p.isSdkOk=!0,console.log("sdk加载完成")},r.start=function(){this.startLoad(),b.instance.trackEvent("Load_in")},r.startLoad=function(){var o=this,t=this.startScene,e=this.firstLoadUrl,n=function(){g.instance.startLoadSound(),M.on("loadRes",(function(t){o.bar&&(o.bar.value=t)}),o),f.preloadScene(t,(function(o,t){M.emit("loadRes",o/t)}),(function(){M.off("loadRes"),f.loadScene(t)}))};if(window.wx)console.log("进入微信分包"),this.loadSubpackagesSync(e,n);else{console.log("进入本地加载Bundle");var a=e.length;if(0==a)n();else for(var r=0;r<a;r++)u.loadBundle(e[r],(function(){0==--a&&n()}))}},r.loadSubPackage=function(o,t){y.instance.loadSubPackage(o,t)},r.loadSubpackagesSync=function(o,t){var e=this,n=o.length;if(0==n)return console.log("全部分包加载完成"),void(t&&t());for(var a=function(a){e.loadSubPackage(o[a],(function(e){u.loadBundle(o[a],(function(){e&&0==--n&&(console.log("全部分包加载完成"),t&&t())}))}))},r=0;r<n;r++)a(r)},t}(d)).prototype,"bar",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(D.prototype,"unDestroyNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=D))||w)||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/Log.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./property.ts","./shared-string.ts","./logger.ts","./behavior-status.ts","./behavior-task.ts"],(function(t){"use strict";var e,s,i,n,r,o,a,u,c,l,p,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){r=t.cclegacy},null,function(t){o=t.ccclass,a=t.delegate},function(t){u=t.property},function(t){c=t.SharedString},function(t){l=t.logger},function(t){p=t.BehaviorStatus},function(t){g=t.BehaviorTask}],execute:function(){var h,f,y,d,v,b;r._RF.push({},"116019tPZREe7GOBui/GuKW","Log",void 0);t("Log",(h=o("bt.Log"),f=a(),y=u({type:c}),h(d=f((b=e((v=function(t){function e(){for(var e,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"message",b,n(e)),e}return s(e,t),e.prototype.update=function(t){return this.message&&l.log("["+this.options.title+"]-["+this.options.order+"] : message = ["+this.message.value+"]"),t=p.Success,this.onUpdate(t)},e}(g)).prototype,"message",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=v))||d)||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/logger.ts",["cc"],(function(o){"use strict";var e;return{setters:[function(o){e=o.cclegacy}],execute:function(){e._RF.push({},"37b5dGw2dRA+oN4mt8o31yV","logger",void 0);o("logger",{log:console.log.bind(console,"[LOG]"),warn:console.warn.bind(console,"[WARN]"),error:console.error.bind(console,"[ERROR]"),debug:console.debug.bind(console,"[DEBUG]")});e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AppConfig.ts","./AutoScroll.ts","./BasePlatform.ts","./CustomAdMgr.ts","./DuilianAdMgr.ts","./ExportCrl.ts","./FinishCustomAdMgr.ts","./JJMgr.ts","./jiujiu_pull_sdk.min.mjs_cjs=&original=.js","./jiujiu_sdk.min.mjs_cjs=&original=.js","./jiujiu_sdk_conf.mjs_cjs=&original=.js","./JJWxTrap.ts","./RotateLoop.ts","./ScaleLoop.ts","./EndBoxUI.ts","./FinishGameUI.ts","./GridUI.ts","./GridUI2.ts","./GridUI3.ts","./GridUI4.ts","./InterstitialAdUI.ts","./RunUI.ts","./ScrollUI.ts","./StartBoxUI.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts","./MainCamera.ts","./PoolComp.ts","./Bullet.ts","./Bullet_Ball.ts","./Bullet_Line.ts","./Bullet_ShotGun.ts","./FireEffect.ts","./HitEffect.ts","./NpcAI.ts","./PlayerCtr.ts","./Hero.ts","./Hero_Enemy.ts","./Hero_Npc.ts","./Hero_Player.ts","./AtkUpBuff.ts","./Face.ts","./HealEffect.ts","./Item.ts","./ShieldBuff.ts","./SpeedBuff.ts","./Tower.ts","./DataClass.ts","./EnumTypes.ts","./GameData.ts","./StorageData.ts","./AssetMgr.ts","./EventMgr.ts","./GameMgr.ts","./PoolMgr.ts","./SoundMgr.ts","./StorageMgr.ts","./TouchMgr.ts","./PlatForm_wx.ts","./Platform.ts","./UMTrack.ts","./JsonToScene.ts","./NodeTool.ts","./SceneToJson.ts","./SwitchMat.ts","./Tool.ts","./colliderCheck.ts","./2DShow3D.ts","./Bar.ts","./CircleBar.ts","./Fontclip.ts","./JoystickComponent.ts","./ScaleTween.ts","./SkillBtn.ts","./videoToggle.ts","./EndUI.ts","./Aim.ts","./GameLoadingUI.ts","./HpBar.ts","./HurtEffect.ts","./KillList.ts","./KillTips.ts","./Map.ts","./PlayFeedBack.ts","./SelectUI.ts","./Test.ts","./TopState.ts","./TowerUI.ts","./TowerUI_Small.ts","./Home.ts","./Load.ts","./NavMesh.ts","./NavMeshAgent.ts","./NavMeshData.ts","./NavMeshExport.ts","./NavMeshMgr.ts","./CharactorController.ts","./DebugController.ts","./CasingController.ts","./FPSController.ts","./StateController.ts","./WeaponController.ts","./FollowController.ts","./SphereController.ts","./CustomInput.ts","./CinestaionImpulseSource.ts","./CinestationBrain.ts","./CinestationData.ts","./CinestationShareAssets.ts","./CinestationSmoothPath.ts","./Effect.ts","./Effect3_4.ts","./Events.ts","./Math.ts","./Types.ts","./Visualization.ts","./Base.ts","./IVCam.ts","./VCamAim.ts","./VCamAutoDolly.ts","./VCamBody.ts","./VCamComposer.ts","./VCamFreeLook.ts","./VCamHardLook.ts","./VCamImpulse.ts","./VCamLens.ts","./VCamNoise.ts","./VCamTracked.ts","./CameraHandler.ts","./ComposerHandler.ts","./FreeLookHandler.ts","./HardLookAtHandler.ts","./NoiseHandler.ts","./TrackedHandler.ts","./NoiseGenerator.ts","./Predictor.ts","./AimStage.ts","./BaseStage.ts","./BodyStage.ts","./ImpulseStage.ts","./NoiseStage.ts","./VirtualCamera.ts","./BehaviorButton.ts","./BehaviorManager.ts","./BehaviorTree.ts","./behavior-composite.ts","./behavior-conditional.ts","./behavior-decorator.ts","./behavior-event-declaration.ts","./behavior-event-delegate.ts","./behavior-event-handler.ts","./behavior-node-element.ts","./behavior-node-entity.ts","./behavior-node-interface.ts","./behavior-node.ts","./behavior-parallel.ts","./behavior-selector.ts","./behavior-sequence.ts","./behavior-service.ts","./behavior-status.ts","./behavior-task.ts","./behavior-tree-interface.ts","./behavior-tree-utils.ts","./blackboard-declaration.ts","./blackboard.ts","./shared-array.ts","./shared-boolean.ts","./shared-custom.ts","./shared-node.ts","./shared-number.ts","./shared-string.ts","./shared-variable.ts","./attribute-defines.ts","./btclass.ts","./preprocess-class.ts","./property.ts","./tools.ts","./main2.ts","./logger.ts","./utils.ts","./TestCondition.ts","./TestDecorator.ts","./TestService.ts","./TestTask.ts","./main.ts","./Parallel.ts","./Selector.ts","./Sequence.ts","./Conditional.ts","./ConditionalFilter.ts","./ConditionalInverter.ts","./Decorator.ts","./ForceFailure.ts","./ForceInterrupter.ts","./ForceRunning.ts","./ForceSuccessful.ts","./Interrupter.ts","./Inverter.ts","./RandomSuccessful.ts","./Repeater.ts","./main3.ts","./Service.ts","./Idle.ts","./Log.ts","./Task.ts","./Wait.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["cc","./main2.ts","./main3.ts","./behavior-composite.ts","./behavior-selector.ts","./behavior-sequence.ts","./behavior-parallel.ts","./behavior-conditional.ts","./behavior-decorator.ts","./behavior-node.ts","./behavior-node-entity.ts","./behavior-service.ts","./behavior-status.ts","./behavior-task.ts","./behavior-tree-utils.ts","./blackboard.ts","./blackboard-declaration.ts","./shared-array.ts","./shared-boolean.ts","./shared-node.ts","./shared-custom.ts","./shared-number.ts","./shared-string.ts","./shared-variable.ts","./btclass.ts","./property.ts","./utils.ts","./logger.ts","./Parallel.ts","./Selector.ts","./Sequence.ts","./Conditional.ts","./Decorator.ts","./ForceFailure.ts","./ForceInterrupter.ts","./ForceSuccessful.ts","./Interrupter.ts","./Inverter.ts","./Repeater.ts","./Service.ts","./Idle.ts","./Log.ts","./Task.ts","./Wait.ts"],(function(e){"use strict";var r;return{setters:[function(e){r=e.cclegacy},null,null,function(r){e("BehaviorComposite",r.BehaviorComposite)},function(r){e("BehaviorSelector",r.BehaviorSelector)},function(r){e("BehaviorSequence",r.BehaviorSequence)},function(r){e("BehaviorParallel",r.BehaviorParallel)},function(r){e("BehaviorConditional",r.BehaviorConditional)},function(r){e("BehaviorDecorator",r.BehaviorDecorator)},function(r){e("BehaviorNode",r.BehaviorNode)},function(r){e("BehaviorEntity",r.BehaviorEntity)},function(r){e("BehaviorService",r.BehaviorService)},function(r){e("BehaviorStatus",r.BehaviorStatus)},function(r){e("BehaviorTask",r.BehaviorTask)},function(r){e("BehaviorTreeUtils",r.BehaviorTreeUtils)},function(r){e("Blackboard",r.Blackboard)},function(r){var t={};t.EAbortType=r.EAbortType,t.ENotifyObserver=r.ENotifyObserver,t.EQueryKey=r.EQueryKey,e(t)},function(r){e("SharedArray",r.SharedArray)},function(r){e("SharedBoolean",r.SharedBoolean)},function(r){e("SharedNode",r.SharedNode)},function(r){e("SharedCustom",r.SharedCustom)},function(r){e("SharedNumber",r.SharedNumber)},function(r){e("SharedString",r.SharedString)},function(r){var t={};t.SharedDynamic=r.SharedDynamic,t.SharedVariable=r.SharedVariable,e(t)},function(r){var t={};t.ccclass=r.ccclass,t.delegate=r.delegate,e(t)},function(r){e("property",r.property)},function(r){e("utils",r.utils)},function(r){e("logger",r.logger)},function(r){e("Parallel",r.Parallel)},function(r){e("Selector",r.Selector)},function(r){e("Sequence",r.Sequence)},function(r){e("Conditional",r.Conditional)},function(r){e("Decorator",r.Decorator)},function(r){e("ForceFailure",r.ForceFailure)},function(r){e("ForceInterrupter",r.ForceInterrupter)},function(r){e("ForceSuccessful",r.ForceSuccessful)},function(r){e("Interrupter",r.Interrupter)},function(r){e("Inverter",r.Inverter)},function(r){e("Repeater",r.Repeater)},function(r){e("Service",r.Service)},function(r){e("Idle",r.Idle)},function(r){e("Log",r.Log)},function(r){e("Task",r.Task)},function(r){e("Wait",r.Wait)}],execute:function(){r._RF.push({},"289827SzWpFd6nyoZKNqVpp","main",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/main2.ts",["cc","./behavior-composite.ts","./behavior-selector.ts","./behavior-sequence.ts","./behavior-parallel.ts","./behavior-conditional.ts","./behavior-decorator.ts","./behavior-node.ts","./behavior-node-entity.ts","./behavior-service.ts","./behavior-status.ts","./behavior-task.ts","./behavior-tree-interface.ts","./behavior-tree-utils.ts","./blackboard.ts","./blackboard-declaration.ts","./shared-array.ts","./shared-boolean.ts","./shared-node.ts","./shared-custom.ts","./shared-number.ts","./shared-string.ts","./shared-variable.ts","./btclass.ts","./property.ts","./utils.ts","./logger.ts"],(function(e){"use strict";var r;return{setters:[function(e){r=e.cclegacy},function(r){e("BehaviorComposite",r.BehaviorComposite)},function(r){e("BehaviorSelector",r.BehaviorSelector)},function(r){e("BehaviorSequence",r.BehaviorSequence)},function(r){e("BehaviorParallel",r.BehaviorParallel)},function(r){e("BehaviorConditional",r.BehaviorConditional)},function(r){e("BehaviorDecorator",r.BehaviorDecorator)},function(r){e("BehaviorNode",r.BehaviorNode)},function(r){e("BehaviorEntity",r.BehaviorEntity)},function(r){e("BehaviorService",r.BehaviorService)},function(r){e("BehaviorStatus",r.BehaviorStatus)},function(r){e("BehaviorTask",r.BehaviorTask)},null,function(r){e("BehaviorTreeUtils",r.BehaviorTreeUtils)},function(r){e("Blackboard",r.Blackboard)},function(r){var o={};o.EAbortType=r.EAbortType,o.ENotifyObserver=r.ENotifyObserver,o.EQueryKey=r.EQueryKey,e(o)},function(r){e("SharedArray",r.SharedArray)},function(r){e("SharedBoolean",r.SharedBoolean)},function(r){e("SharedNode",r.SharedNode)},function(r){e("SharedCustom",r.SharedCustom)},function(r){e("SharedNumber",r.SharedNumber)},function(r){e("SharedString",r.SharedString)},function(r){var o={};o.SharedDynamic=r.SharedDynamic,o.SharedVariable=r.SharedVariable,e(o)},function(r){var o={};o.ccclass=r.ccclass,o.delegate=r.delegate,e(o)},function(r){e("property",r.property)},function(r){e("utils",r.utils)},function(r){e("logger",r.logger)}],execute:function(){r._RF.push({},"3cf28uQHLlEw6vk4w9KA679","main",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/main3.ts",["cc","./Parallel.ts","./Selector.ts","./Sequence.ts","./Conditional.ts","./Decorator.ts","./ForceFailure.ts","./ForceInterrupter.ts","./ForceSuccessful.ts","./Interrupter.ts","./Inverter.ts","./Repeater.ts","./Service.ts","./Idle.ts","./Log.ts","./Task.ts","./Wait.ts"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy},function(t){e("Parallel",t.Parallel)},function(t){e("Selector",t.Selector)},function(t){e("Sequence",t.Sequence)},function(t){e("Conditional",t.Conditional)},function(t){e("Decorator",t.Decorator)},function(t){e("ForceFailure",t.ForceFailure)},function(t){e("ForceInterrupter",t.ForceInterrupter)},function(t){e("ForceSuccessful",t.ForceSuccessful)},function(t){e("Interrupter",t.Interrupter)},function(t){e("Inverter",t.Inverter)},function(t){e("Repeater",t.Repeater)},function(t){e("Service",t.Service)},function(t){e("Idle",t.Idle)},function(t){e("Log",t.Log)},function(t){e("Task",t.Task)},function(t){e("Wait",t.Wait)}],execute:function(){t._RF.push({},"b439eVj61hCYammYdFmJ95R","main",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/MainCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts"],(function(t){"use strict";var o,e,a,s,i,n,r,h;return{setters:[function(t){o=t.inheritsLoose},function(t){e=t.cclegacy,a=t._decorator,s=t.CameraComponent,i=t.Quat,n=t.Vec3,r=t.Component},function(t){h=t.default}],execute:function(){var u;e._RF.push({},"24faco54ARDMbGaB8BqsSxG","MainCamera",void 0);var c=a.ccclass;a.property,t("MainCamera",c("MainCamera")(u=function(t){function e(){for(var o,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return(o=t.call.apply(t,[this].concat(a))||this).rotEular=new n,o.targetRot=new i,o.nowRotXoffset=0,o.shakeTime=void 0,o.shakeAmount=void 0,o.decreaseFactor=void 0,o.originalPos=void 0,o.target=void 0,o}o(e,t);var a=e.prototype;return a.onLoad=function(){h.cam=this.node.getComponent(s),console.log("摄像机已同步到全局变量")},a.start=function(){},a.camUpPush=function(t){this.node.getRotation().getEulerAngles(this.rotEular),this.nowRotXoffset+=t,i.fromEuler(this.targetRot,this.rotEular.x+this.nowRotXoffset,this.rotEular.y,this.rotEular.z),this.node.setRotation(this.targetRot),this.schedule(this.camUpPushUpdate)},a.camUpPushUpdate=function(t){this.nowRotXoffset-=5*t,this.nowRotXoffset<0&&(this.nowRotXoffset=0,this.unschedule(this.camUpPushUpdate)),i.fromEuler(this.targetRot,this.rotEular.x+this.nowRotXoffset,this.rotEular.y,this.rotEular.z),this.node.setRotation(this.targetRot)},a.shakeCam_Short=function(){this.d3_objectShake(this.node,.1,.25)},a.d3_objectShake=function(t,o,e){void 0===o&&(o=1),void 0===e&&(e=.7),this.shakeTime=o,this.shakeAmount=e,this.decreaseFactor=1,this.originalPos=t.getPosition(),this.target=t,this.schedule(this.updateShake)},a.updateShake=function(){if(this.shakeTime>0){var t=new n;n.multiplyScalar(t,this.randomPos(),this.shakeAmount),n.add(t,this.originalPos,t),this.target.setPosition(t),this.shakeTime-=.02*this.decreaseFactor}else this.shakeTime=0,this.target.setPosition(this.originalPos),this.unschedule(this.updateShake)},a.randomPos=function(){var t=Math.random()>.5?Math.random():-Math.random(),o=Math.random()>.5?Math.random():-Math.random();return new n(t,o,0)},e}(r))||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Map.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts"],(function(t){"use strict";var e,n,i,s,o,a,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.instantiate,o=t.Vec3,a=t.Component},function(t){r=t.default}],execute:function(){var l;n._RF.push({},"43b4cQy4dZMbaerxbY1a/Sx","Map",void 0);var h=i.ccclass;i.property,t("Map",h("Map")(l=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).playerPoint=void 0,e.npcPoints=[],e.enmeyPoints=[],e}e(n,t);var i=n.prototype;return i.onLoad=function(){this.playerPoint=this.node.getChildByName("playerPoint")},i.start=function(){this.npcPoints.push(this.node.getChildByName("npcPoint")),this.enmeyPoints.push(this.node.getChildByName("enemyPoint"));for(var t=0;t<r.players.length-2;t++){var e=s(this.npcPoints[0]);this.node.addChild(e),this.npcPoints.push(e)}for(var n=0;n<r.enemies.length-1;n++){var i=s(this.enmeyPoints[0]);this.node.addChild(i),this.enmeyPoints.push(i)}},i.update=function(){this.setPoint(r.player,this.playerPoint);for(var t=0,e=0;e<r.players.length;e++)r.players[e].isPlayerCtrl||(this.setPoint(r.players[e],this.npcPoints[t]),t++);for(var n=0;n<r.enemies.length;n++)this.setPoint(r.enemies[n],this.enmeyPoints[n])},i.setPoint=function(t,e){t.isDead?e.setScale(o.ZERO):e.setScale(o.ONE);var n=t.node.getWorldPosition(),i=new o;t.model.getRotation().getEulerAngles(i);var s=.7*(n.x-10)-40,a=-.65*(n.z-60)-120;e.setPosition(new o(s,a,0));var r=i.y-180;e.setRotationFromEuler(new o(0,0,r))},n}(a))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/Math.ts",["cc"],(function(t){"use strict";var r,n,e,o,i,a;return{setters:[function(t){r=t.cclegacy,n=t.Quat,e=t.clamp01,o=t.Vec3,i=t.clamp,a=t.Vec4}],execute:function(){t({Quat_exponentialDamp:function(t,r,e,o,i){return n.lerp(t,r,e,_(0,1,o,i))},Quat_quarticDamp:function(t,r,e,o,i){return n.lerp(t,r,e,z(0,1,o,i))},Vec3_closeTo:function(t,r){return p(t.x-r.x)+p(t.y-r.y)+p(t.z-r.z)<=l},Vec3_closestPointOnSegment:function(t,r,n){var i=o.subtract(y,n,r),a=o.lengthSqr(i);if(a<l)return 0;return e(o.dot(o.subtract(d,t,r),i)/a)},Vec3_setFromMatrixColumn:function(t,r,n){switch(n){case 0:t.x=r.m00,t.y=r.m01,t.z=r.m02;break;case 1:t.x=r.m04,t.y=r.m05,t.z=r.m06;break;case 2:t.x=r.m08,t.y=r.m09,t.z=r.m10}return t},Vec3_setFromSpherical:function(t,r){var n=r.radius,e=r.phi,o=r.theta,i=h(e)*n;return t.x=i*h(o),t.y=v(e)*n,t.z=i*v(o),t},Vec4_closeTo:function(t,r){return p(t.x-r.x)+p(t.y-r.y)+p(t.z-r.z)+p(t.w-r.w)<=l},closeTo:function(t,r){return p(t-r)<=l},exponentialDamp:_,quarticDamp:z}),r._RF.push({},"85d4azs+0dHJIZE5Rr15Ay/","Math",void 0);var u=Math.sqrt,s=Math.atan2,c=Math.acos,h=Math.sin,v=Math.cos,f=Math.floor,m=Math.min,p=Math.abs;n.lerp=function(t,r,o,i){return n.dot(r,o)<0&&n.set(o,-o.x,-o.y,-o.z,-o.w),i=e(i),t.x=r.x+i*(o.x-r.x),t.y=r.y+i*(o.y-r.y),t.z=r.z+i*(o.z-r.z),t.w=r.w+i*(o.w-r.w),n.normalize(t,t),t},n.prototype.lerp=function(t,r){return n.lerp(this,this,t,r)};var l=t("EPSILON",1e-4),y=new o,d=new o;var x=Math.log(.01);function _(t,r,n,e){var o=-x/n;return t+(r-t)*(1-Math.exp(-o*e))}function z(t,r,n,e){var o=1-m(e,n)/n,i=o*o;return t+(r-t)*(1-i*i)}t("SmoothDamper",function(){function t(){this._velocity=0}var r=t.prototype;return r.smoothDamp=function(t,r,n,e,o){var a=2/(n=Math.max(1e-4,n)),u=a*o,s=1/(1+u+.48*u*u+.235*u*u*u),c=t-r,h=r,v=e*n;r=t-(c=i(c,-v,v));var f=(this._velocity+a*c)*o;this._velocity=(this._velocity-a*f)*s;var m=r+(c+f)*s;return h-t>0==m>h&&(m=h,this._velocity=(m-h)/o),m},r.Quat_smoothDamp=function(t,r,e,o,i){return n.lerp(t,r,e,this.smoothDamp(0,1,o,1/0,i))},r.Vec3_smoothDamp=function(t,r,n,e,i){return o.lerp(t,r,n,this.smoothDamp(0,1,e,1/0,i))},t}()),t("Spherical",function(){function t(t,r,n){void 0===t&&(t=1),void 0===r&&(r=0),void 0===n&&(n=0),this.radius=void 0,this.phi=void 0,this.theta=void 0,this.radius=t,this.phi=r,this.theta=n}var r=t.prototype;return r.setFromVec3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},r.setFromCartesianCoords=function(t,r,n){return this.radius=u(t*t+r*r+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=s(t,n),this.phi=c(i(r/this.radius,-1,1))),this},t}());t("Perlin",function(){function t(){}return t.Noise=function(r,n,e){var o=t._Fade,i=t._Grad,a=t._Lerp,u=t._Permutation;if(void 0!==n&&void 0!==e){var s=f(r),c=f(n),h=f(e),v=255&s,m=255&c,p=255&h;n-=c,e-=h;var l=o(r-=s),y=o(n),d=o(e),x=u[v]+m,_=u[x]+p,z=u[x+1]+p,w=u[v+1]+m,M=u[w]+p,C=u[w+1]+p;return a(d,a(y,a(l,i(u[_],r,n,e),i(u[M],r-1,n,e)),a(l,i(u[z],r,n-1,e),i(u[C],r-1,n-1,e))),a(y,a(l,i(u[_+1],r,n,e-1),i(u[M+1],r-1,n,e-1)),a(l,i(u[z+1],r,n-1,e-1),i(u[C+1],r-1,n-1,e-1))))}if(void 0!==n){var S=f(r),D=f(n),F=255&S,V=255&D;n-=D;var A=o(r-=S),P=o(n),g=u[F]+V&255,b=u[F+1]+V&255;return a(P,a(A,i(u[g],r,n),i(u[b],r-1,n)),a(A,i(u[g+1],r,n-1),i(u[b+1],r-1,n-1)))}var q=f(r),L=255&q;return a(o(r-=q),i(u[L],r),i(u[L+1],r-1))},t.Fbm=function(r,n,e,o){var i=0,a=.5,u=t.Noise;if(void 0!==e&&void 0!==o)for(var s=0;s<r;s++)i+=a*u(n,e,o),n*=2,e*=2,o*=2,a*=.5;else if(void 0!==e)for(var c=0;c<r;c++)i+=a*u(n,e),n*=2,e*=2,a*=.5;else for(var h=0;h<r;h++)i+=a*u(n),n*=2,a*=.5;return i},t._Fade=function(t){return t*t*t*(t*(6*t-15)+10)},t._Lerp=function(t,r,n){return r+t*(n-r)},t._Grad=function(t,r,n,e){if(void 0!==n&&void 0!==e){var o=15&t,i=o<8?r:n,a=o<4?n:12==o||14==o?r:e;return(0==(1&o)?i:-i)+(0==(2&o)?a:-a)}return void 0!==n?(0==(1&t)?r:-r)+(0==(2&t)?n:-n):0==(1&t)?r:-r},t}())._Permutation=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180,151];t("Spline",function(){function t(){}return t.Bezier3=function(t,r,n,o,i,a){var u=1-(r=e(r)),s=u*u*u,c=3*u*u*r,h=3*u*r*r,v=r*r*r;return t.set(s*n.x+c*o.x+h*i.x+v*a.x,s*n.y+c*o.y+h*i.y+v*a.y,s*n.z+c*o.z+h*i.z+v*a.z)},t.ComputeSmoothControlPoints=function(t,r,n){var e=t.length;if(e<=2)2==e?(a.lerp(r[0],t[0],t[1],.33333),a.lerp(n[0],t[0],t[1],.66666)):1==e&&(r[0]=n[0]=t[0]);else for(var o=new Array(e),i=new Array(e),u=new Array(e),s=new Array(e),c=t,h=r,v=n,f=["x","y","z","w"],m=0;m<4;++m){var p=f[m],l=e-1;o[0]=0,i[0]=2,u[0]=1,s[0]=c[0][p]+2*c[1][p];for(var y=1;y<l-1;++y)o[y]=1,i[y]=4,u[y]=1,s[y]=4*c[y][p]+2*c[y+1][p];o[l-1]=2,i[l-1]=7,u[l-1]=0,s[l-1]=8*c[l-1][p]+c[l][p];for(var d=1;d<l;++d){var x=o[d]/i[d-1];i[d]=i[d]-x*u[d-1],s[d]=s[d]-x*s[d-1]}h[l-1][p]=s[l-1]/i[l-1];for(var _=l-2;_>=0;--_)h[_][p]=(s[_]-u[_]*h[_+1][p])/i[_];for(var z=0;z<l;z++)v[z][p]=2*c[z+1][p]-h[z+1][p];v[l-1][p]=.5*(c[l][p]+h[l-1][p])}},t.ComputeSmoothControlPointsLooped=function(r,n,e){var o=r.length;if(o<2)1==o&&(n[0]=e[0]=r[0]);else{for(var i=Math.min(4,o-1),u=o+2*i,s=new Array(u),c=new Array(u),h=new Array(u),v=0;v<i;++v)s[v]=r[o-(i-v)],s[o+i+v]=r[v];for(var f=0;f<o;++f)s[f+i]=r[f];for(var m=0;m<u;++m)c[m]=new a,h[m]=new a;t.ComputeSmoothControlPoints(s,c,h);for(var p=0;p<o;++p)n[p]=c[p+i],e[p]=h[p+i]}},t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/NavMesh.ts",["./rollupPluginModLoBabelHelpers.js","cc","./recast.mjs_cjs=&original=.js","./recast.js"],(function(e){"use strict";var t,s,i,a,n,r,o,h,c,u;return{setters:[function(e){t=e.createClass},function(e){s=e.cclegacy,i=e._decorator,a=e.MeshRenderer,n=e.Vec3,r=e.gfx,o=e.math,h=e.geometry,c=e.assetManager},null,function(e){u=e.default}],execute:function(){var g;e("MeshDebugDataType",void 0),s._RF.push({},"bd5f4A/A2xDaLznJLaUgQdf","NavMesh",void 0);var l,p=i.ccclass,_=(i.property,e("NavMesh",p("NavMesh")(g=function(){function e(){this._recast=null,this._navMesh=null,this._config=null,this._positions=[],this._indices=[],this._timeStep=1/60,this._tempVec=void 0,this._tempVec1=void 0,this._tempVec2=void 0}var s=e.prototype;return s.init=function(e){void 0===e&&(e=null),this._recast=new u,this._navMesh=new this._recast.NavMesh,this._tempVec=new this._recast.Vec3,this._tempVec1=new this._recast.Vec3,this._tempVec2=new this._recast.Vec3,this.setDefaultConfig(),e&&e()},s.setConfig=function(e){this._config=e},s.setDefaultConfig=function(){this._config={tileSize:0,borderSize:1,cs:.2,ch:.2,walkableSlopeAngle:90,walkableHeight:1,walkableClimb:1,walkableRadius:1,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1}},s.addStaticModle=function(e){if(e&&e.getComponent(a)){var t=e.getComponent(a);if(t&&t.mesh){var s=e.getWorldMatrix();this.updateBaseDatas(t.mesh,s)}}},s.addStaticMesh=function(e){if(e&&e.mesh){var t=e.node.getWorldMatrix();this.updateBaseDatas(e.mesh,t)}},s.addTerrain=function(e){for(var t=[],s=e.node.getWorldMatrix(),i=e.getBlocks(),a=0;a<i.length;a++){var n=this.getTerrainMeshData(e,i[a],s);t=t.concat(n)}this.mergeVector(t)},s.getTerrainMeshData=function(e,t,s){for(var i=[],a=t.getIndex(),r=32,o=1;o<33;++o)for(var h=1;h<33;++h){var c=a[0]*r+(h-1),u=a[1]*r+(o-1),g=new n(1,1,1);n.transformMat4(g,e.getPosition(c,u),s),c=a[0]*r+(h-1),u=a[1]*r+o;var l=new n(1,1,1);n.transformMat4(l,e.getPosition(c,u),s),c=a[0]*r+h,u=a[1]*r+(o-1);var p=new n(1,1,1);n.transformMat4(p,e.getPosition(c,u),s),c=a[0]*r+h,u=a[1]*r+o;var _=new n(1,1,1);n.transformMat4(_,e.getPosition(c,u),s),i.push(g),i.push(l),i.push(_),i.push(g),i.push(_),i.push(p)}return i},s.updateBaseDatas=function(e,t){for(var s=e.readAttribute(0,r.AttributeName.ATTR_POSITION),i=[],a=0;a<s.length;a++)i.push(s[a]);var o=[];e.copyIndices(0,o);var h=[];if(o.length>0)for(var c=0;c<o.length;c++){var u=3*o[c];h.push(i[u]),h.push(i[u+1]),h.push(i[u+2])}else h=i;for(var g=[],l=new n(1,1,1),p=0;p<h.length;p+=3)l=new n(h[p],h[p+1],h[p+2]),n.transformMat4(l,l,t),g.push(l);this.mergeVector(g)},s.mergeVector=function(e){for(var t=this._positions.length/3,s=0;s<e.length;s+=3){for(var i,a=[e[s],e[s+1],e[s+2]],n=0;n<a.length;n++)this._positions.push(a[n].x),this._positions.push(a[n].y),this._positions.push(a[n].z);var r=[t,t+1,t+2];(i=this._indices).push.apply(i,r),t=this._positions.length/3}},s.clean=function(){this._positions=[],this._indices=[]},s.build=function(){var e=new this._recast.rcConfig;e.cs=this._config.cs,e.ch=this._config.ch,e.borderSize=this._config.borderSize,e.tileSize=this._config.tileSize,e.walkableSlopeAngle=this._config.walkableSlopeAngle,e.walkableHeight=this._config.walkableHeight,e.walkableClimb=this._config.walkableClimb,e.walkableRadius=this._config.walkableRadius,e.maxEdgeLen=this._config.maxEdgeLen,e.maxSimplificationError=this._config.maxSimplificationError,e.minRegionArea=this._config.minRegionArea,e.mergeRegionArea=this._config.mergeRegionArea,e.maxVertsPerPoly=this._config.maxVertsPerPoly,e.detailSampleDist=this._config.detailSampleDist,e.detailSampleMaxError=this._config.detailSampleMaxError;var t=(new Date).getTime();this._navMesh.build(this._positions,this._positions.length/3,this._indices,this._indices.length,e),console.log("_navMesh.build 耗时："+((new Date).getTime()-t)/1e3+"s")},s.getNavMeshDebugData=function(e){void 0===e&&(e=l.SURFACE);var t,s,i=this._navMesh.getDebugNavMesh(),a=i.getTriangleCount(),r=[],o=[];for(t=0;t<3*a;t++)r.push(t);for(t=0;t<a;t++)for(s=0;s<3;s++){var h=i.getTriangle(t).getPoint(s);o.push(h.x,h.y,h.z)}for(var c=[],u=0;u<r.length;u++){var g=3*r[u],p=new n(o[g],o[g+1],o[g+2]);c.push(p)}return e==l.SURFACE?this.getNavMeshDebugSurfaceData(c):this.getNavMeshDebugLineData(c)},s.getNavMeshDebugSurfaceData=function(e){for(var t=[],s=[],i=0;i<e.length;i+=3){var a=[e[i],e[i+1],e[i+2]];n.subtract(new n,a[0],a[1]).cross(n.subtract(new n,a[2],a[1])).y>0&&(a=a.reverse());for(var r=0;r<a.length;r++)t.push(a[r].x),t.push(a[r].y),t.push(a[r].z),s.push(0),s.push(1),s.push(0)}return{positions:t,normals:s}},s.getNavMeshDebugLineData=function(e,t){void 0===t&&(t=.02);for(var s=[],i=[],a=0;a<e.length;a+=3){var r=[e[a],e[a+1],e[a+2]];n.subtract(new n,r[0],r[1]).cross(n.subtract(new n,r[2],r[1])).y>0&&(r=r.reverse());for(var c=t/2,u=o.toRadian(90),g=0;g<r.length;g++){var l=r[g].clone(),p=r[g+1>=r.length?0:g+1].clone(),_=new h.Ray;h.Ray.fromPoints(_,l,p);var f=new n;_.computeHit(f,c);var v=n.rotateY(new n,f,l,-u),m=n.rotateY(new n,f,l,u);h.Ray.fromPoints(_,p,l),_.computeHit(f,c);var d=n.rotateY(new n,f,p,u),w=n.rotateY(new n,f,p,-u),M=[v,d,m],y=n.subtract(new n,M[0],M[1]).cross(n.subtract(new n,M[2],M[1]));y.y>0&&(M=M.reverse());for(var b=0;b<M.length;b++)s.push(M[b].x),s.push(M[b].y),s.push(M[b].z),i.push(0),i.push(1),i.push(0);M=[],M=[d,w,m],(y=n.subtract(new n,M[0],M[1]).cross(n.subtract(new n,M[2],M[1]))).y>0&&(M=M.reverse());for(var x=0;x<M.length;x++)s.push(M[x].x),s.push(M[x].y),s.push(M[x].z),i.push(0),i.push(1),i.push(0)}}return{positions:s,normals:i}},s.getNavMeshData=function(){var e=this._navMesh.getNavmeshData(),t=new Uint8Array(this._recast.HEAPU8.buffer,e.dataPointer,e.size),s=new Uint8Array(e.size);return s.set(t),this.navMesh.freeNavmeshData(e),s},s.loadNavMeshData=function(e,t){c.getBundle("02_Stage").load(e,(function(e,s){if(e)return console.log("err :",e),void(t&&t(null));var i=s.buffer(),a=new Uint8Array(i);t&&t(a)}))},s.buildFromNavMeshData=function(e){var t=e.length*e.BYTES_PER_ELEMENT,s=this._recast._malloc(t),i=new Uint8Array(this._recast.HEAPU8.buffer,s,t);i.set(e);var a=new this._recast.NavmeshData;a.dataPointer=i.byteOffset,a.size=e.length,this.navMesh.buildFromNavmeshData(a),this._recast._free(i.byteOffset)},s.findPath=function(e,t){var s=this.getClosestPoint(e);this._tempVec1.x=s.x,this._tempVec1.y=s.y,this._tempVec1.z=s.z;var i=this.getClosestPoint(t);this._tempVec2.x=i.x,this._tempVec2.y=i.y,this._tempVec2.z=i.z;for(var a=this._navMesh.computePath(this._tempVec1,this._tempVec2),r=a.getPointCount(),o=[],h=0;h<r;h++){var c=a.getPoint(h);o.push(new n(c.x,c.y,c.z))}return o},s.getClosestPoint=function(e){this._tempVec.x=e.x,this._tempVec.y=e.y,this._tempVec.z=e.z;var t=this._navMesh.getClosestPoint(this._tempVec);return new n(t.x,t.y,t.z)},s.initCrowd=function(e,t){return new _(this,e,t)},s.setTimeStep=function(e){void 0===e&&(e=1/60),this._timeStep=e},s.getTimeStep=function(){return this._timeStep},s.addCylinderObstacle=function(e,t,s){return this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this.navMesh.addCylinderObstacle(this._tempVec1,t,s)},s.addBoxObstacle=function(e,t,s){return this._tempVec1.x=e.x,this._tempVec1.y=e.y,this._tempVec1.z=e.z,this._tempVec2.x=t.x,this._tempVec2.y=t.y,this._tempVec2.z=t.z,this.navMesh.addBoxObstacle(this._tempVec1,this._tempVec2,s)},s.removeObstacle=function(e){this.navMesh.removeObstacle(e)},s.update=function(e){this._navMesh&&this._navMesh.update(e)},t(e,[{key:"recast",get:function(){return this._recast}},{key:"navMesh",get:function(){return this._navMesh}}]),e}())||g),e("NavMeshCorwd",function(){function e(e,t,s){this._navMeshMgr=null,this._recastCrowd={},this._agents=[],this._tempVec=void 0,this._navMeshMgr=e,this._tempVec=new e.recast.Vec3,this._recastCrowd=new this._navMeshMgr.recast.Crowd(t,s,this._navMeshMgr.navMesh.getNavMesh())}var t=e.prototype;return t.addAgent=function(e,t){var s=new this._navMeshMgr.recast.dtCrowdAgentParams;s.radius=t.radius,s.height=t.height,s.maxAcceleration=t.maxAcceleration,s.maxSpeed=t.maxSpeed,s.collisionQueryRange=t.collisionQueryRange,s.pathOptimizationRange=t.pathOptimizationRange,s.separationWeight=t.separationWeight,s.updateFlags=0,s.obstacleAvoidanceType=3,s.queryFilterType=0,s.userData=0;var i=this._recastCrowd.addAgent(new this._navMeshMgr.recast.Vec3(e.x,e.y,e.z),s);return this._agents.push(i),i},t.getAgentPosition=function(e){var t=this._recastCrowd.getAgentPosition(e);return new n(t.x,t.y,t.z)},t.getAgentNextTargetPath=function(e){var t=this._recastCrowd.getAgentNextTargetPath(e);return new n(t.x,t.y,t.z)},t.getAgentVelocity=function(e){var t=this._recastCrowd.getAgentVelocity(e);return new n(t.x,t.y,t.z)},t.agentMoveTarget=function(e,t){this._tempVec.x=t.x,this._tempVec.y=t.y,this._tempVec.z=t.z,this._recastCrowd.agentGoto(e,this._tempVec)},t.agentTeleport=function(e,t){this._recastCrowd.agentTeleport(e,new this._navMeshMgr.recast.Vec3(t.x,t.y,t.z))},t.removeAgent=function(e){this._recastCrowd.removeAgent(e)},t.getAgents=function(){return this._agents},t.update=function(e){this._recastCrowd.update(e)},t.destroy=function(){this._recastCrowd.destroy()},t.getAgentState=function(e){return this._recastCrowd.getAgentState(e)},t.getAgentParameters=function(e){return this._recastCrowd.getAgentParameters(e)},t.setAgentParameters=function(e,t){this._recastCrowd.setAgentParameters(e,t)},e}()));!function(e){e[e.SURFACE=0]="SURFACE",e[e.LINE=1]="LINE"}(l||(l=e("MeshDebugDataType",{}))),s._RF.pop()}}}));

System.register("chunks:///_virtual/NavMeshAgent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NavMeshMgr.ts"],(function(e){"use strict";var t,n,i,s,a,g;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,i=e._decorator,s=e.Vec3,a=e.Component},function(e){g=e.NavMeshMgr}],execute:function(){var c;n._RF.push({},"3104bYWYUxO2qvwVL+j9YUx","NavMeshAgent",void 0);var o=i.ccclass;i.property,e("NavMeshAgent",o("NavMeshAgent")(c=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).isBig=!1,t.agentIndex=-1,t.isPlayerMove=!1,t.goWay=new s(0,0,0),t}t(n,e);var i=n.prototype;return i.start=function(){},i.init=function(){g.instance&&g.instance.agentInit(this)},i.die=function(){g.instance&&g.instance.removeAgent(this),this.agentIndex=-1},i.update=function(e){if(-1!=this.agentIndex&&this.isPlayerMove){var t=this.node.getPosition();t.add(this.goWay),g.instance&&g.instance.agentTeleport(this.agentIndex,t,this.isBig)}},i.setTarget=function(e,t){-1!=this.agentIndex&&g.instance&&g.instance.agentMoveTarget(this.agentIndex,e,this.isBig)},i.teleport=function(e){-1!=this.agentIndex&&g.instance&&g.instance.agentTeleport(this.agentIndex,e,this.isBig)},i.getAgentVelocity=function(){return-1==this.agentIndex?null:g.instance?g.instance.getAgentVelocity(this.agentIndex,this.isBig):void 0},i.getAgentMaxSpeed=function(){return-1==this.agentIndex?null:g.instance?g.instance.getAgentParameters(this.agentIndex,this.isBig).maxSpeed:void 0},i.setAgentMaxSpeed=function(e){if(-1!=this.agentIndex){if(g.instance){var t=g.instance.getAgentParameters(this.agentIndex,this.isBig);t.maxSpeed=e,g.instance.setAgentParameters(this.agentIndex,t,this.isBig)}}else console.warn("没set到",this.node.name,this.agentIndex)},n}(a))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/NavMeshData.ts",["cc","./GameData.ts"],(function(e){"use strict";var a,i;return{setters:[function(e){a=e.cclegacy},function(e){i=e.default}],execute:function(){a._RF.push({},"23d3c00N0NGl5Iv6MBLIzIm","NavMeshData",void 0);e("nav_map_config_small",{cs:.8,ch:.8,walkableSlopeAngle:20,walkableHeight:2,walkableClimb:2,walkableRadius:.25,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:.5,mergeRegionArea:30,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1,tileSize:0,borderSize:0}),e("nav_map_config_big",{cs:.8,ch:.8,walkableSlopeAngle:20,walkableHeight:4,walkableClimb:2,walkableRadius:3,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:.5,mergeRegionArea:30,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1,tileSize:0,borderSize:0}),e("agent_config_small",{radius:1,height:1,maxAcceleration:Number.MAX_VALUE,maxSpeed:i.dinasor1_speed,collisionQueryRange:10,pathOptimizationRange:0,separationWeight:0}),e("agent_config_big",{radius:3,height:1,maxAcceleration:Number.MAX_VALUE,maxSpeed:i.dinasor1_speed,collisionQueryRange:10,pathOptimizationRange:0,separationWeight:0});a._RF.pop()}}}));

System.register("chunks:///_virtual/NavMeshExport.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NavMesh.ts","./NavMeshData.ts"],(function(e){"use strict";var t,a,i,n,s,r,o,h,l,u,v,c,p,g,M,d,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,s=e.createClass},function(e){r=e.cclegacy,o=e._decorator,h=e.Material,l=e.Node,u=e.CCFloat,v=e.MeshRenderer,c=e.utils,p=e.gfx,g=e.Component},function(e){M=e.NavMesh,d=e.MeshDebugDataType},function(e){f=e.nav_map_config_big,b=e.nav_map_config_small}],execute:function(){var y,m,N,D,_,C,E,w,x,T,F,I;r._RF.push({},"e4886JFeFFLe4STrVc7HatQ","NavMeshExport",void 0);var S=o.ccclass,z=o.property,P=o.executeInEditMode;e("NavMeshExport",(y=S("NavMeshExport"),m=P(!0),N=z(h),D=z(l),_=z({type:u,visible:!0,displayName:"nav生成"}),C=z({type:u,visible:!0,displayName:"nav导出"}),y(E=m((x=t((w=function(e){function t(){for(var t,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,i(t,"material",x,n(t)),i(t,"debugNode",T,n(t)),i(t,"isBig",F,n(t)),i(t,"isTeach",I,n(t)),t._value=0,t._value1=0,t.navMeshMgr=void 0,t.navData=void 0,t}a(t,e);var r=t.prototype;return r.navMeshInit=function(){this.navMeshMgr=new M,this.navMeshMgr.init(),this.setNavMeshConfig(),this.startNavMesh()},r.navMeshExport=function(){if(this.navData){var e=this.isBig?"nav-mesh-big.bin":"nav-mesh-small.bin";this.navData=this.navMeshMgr.getNavMeshData();var t="db://assets/Game/02_Stage/Data/scene/";this.isTeach&&(t="db://assets/Game/02_Stage/Data/scene-P/"),Editor.Message.send("asset-db","create-asset",t+e,this.navData)}},r.setNavMeshConfig=function(){var e=this.isBig?f:b;this.navMeshMgr.setConfig(e)},r.startNavMesh=function(){for(var e=this.node.getComponentsInChildren(v),t=0;t<e.length;t++)e[t].node.parent.active&&this.navMeshMgr.addStaticMesh(e[t]);this.navMeshMgr.build();var a=this.navMeshMgr.getNavMeshDebugData(d.SURFACE);this.navData=this.navMeshMgr.getNavMeshData(),this.createDebugMesh(a.positions,a.normals)},r.createDebugMesh=function(e,t){this.debugNode.destroyAllChildren();var a=new l,i=a.addComponent(v),n=c.createMesh({positions:e,primitiveMode:p.PrimitiveMode.TRIANGLE_LIST,normals:t});i.mesh=n,i.setMaterial(this.material,0),this.debugNode.addChild(a)},s(t,[{key:"value",get:function(){return this._value},set:function(e){this.navMeshInit()}},{key:"value1",get:function(){return this._value},set:function(e){this.navMeshExport()}}]),t}(g)).prototype,"material",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(w.prototype,"debugNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(w.prototype,"isBig",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=t(w.prototype,"isTeach",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),t(w.prototype,"value",[_],Object.getOwnPropertyDescriptor(w.prototype,"value"),w.prototype),t(w.prototype,"value1",[C],Object.getOwnPropertyDescriptor(w.prototype,"value1"),w.prototype),E=w))||E)||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/NavMeshMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StorageMgr.ts","./NavMesh.ts","./NavMeshData.ts"],(function(e){"use strict";var t,i,n,s,a,o,r,g,l,h,c,u,d,M,v,_,p,m,f,b,D,w,y,B;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,r=e._decorator,g=e.Material,l=e.Enum,h=e.CCBoolean,c=e.Vec3,u=e.Node,d=e.MeshRenderer,M=e.utils,v=e.gfx,_=e.Component},function(e){p=e.default},function(e){m=e.MeshDebugDataType,f=e.NavMesh,b=e.NavMeshCorwd},function(e){D=e.nav_map_config_small,w=e.nav_map_config_big,y=e.agent_config_big,B=e.agent_config_small}],execute:function(){var S,N,C,P,T,A,k,W,I,L,x,z;o._RF.push({},"055f2LL3L1CV5Y4I4UDCblU","NavMeshMgr",void 0);var O=r.ccclass,F=r.property;e("NavMeshMgr",(S=O("NavMeshMgr"),N=F(g),C=F({type:l(m)}),P=F({serializable:!0}),T=F({type:h,visible:!0}),A=F({serializable:!0}),S(((z=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).agents=[],t._navMeshMgrSmall=null,t._navMeshMgrBig=null,n(t,"material",I,s(t)),n(t,"_debugDataType",L,s(t)),t.isWorkingSmall=!1,t.isWorkingBig=!1,n(t,"_isDebug",x,s(t)),t._corwdSmall=void 0,t._corwdBig=void 0,t}i(t,e);var o=t.prototype;return o.getClosestPoint=function(e,t){return t?this._navMeshMgrBig.getClosestPoint(e):this._navMeshMgrSmall.getClosestPoint(e)},o.agentInit=function(e){this.agents.push(e),this.isWorkingSmall&&this.isWorkingBig&&this.addAgent(e)},o.addAgent=function(e){var t,i,n;e.isBig?(t=this._navMeshMgrBig,i=y,n=this._corwdBig):(t=this._navMeshMgrSmall,i=B,n=this._corwdSmall);var s=t.getClosestPoint(e.node.getPosition());e.node.setPosition(s);var a=i;e.agentIndex=n.addAgent(s,a)},o.removeAgent=function(e){var t=this.agents.indexOf(e);this.agents.splice(t,1),(e.isBig?this._corwdBig:this._corwdSmall).removeAgent(e.agentIndex)},o.agentMoveTarget=function(e,t,i){var n=i?this._corwdBig:this._corwdSmall,s=this.getClosestPoint(t,i);n.agentMoveTarget(e,s)},o.getAgentVelocity=function(e,t){return(t?this._corwdBig:this._corwdSmall).getAgentVelocity(e)},o.getAgentParameters=function(e,t){return(t?this._corwdBig:this._corwdSmall).getAgentParameters(e)},o.setAgentParameters=function(e,t,i){(i?this._corwdBig:this._corwdSmall).setAgentParameters(e,t)},o.agentTeleport=function(e,t,i){var n=i?this._corwdBig:this._corwdSmall,s=this.getClosestPoint(t,i);c.squaredDistance(s,this.node.getWorldPosition())<4e5&&n.agentTeleport(e,s)},o.onLoad=function(){t.instance=this,console.log("寻路系统：开始初始化"),this._navMeshMgrSmall=new f,this._navMeshMgrSmall.init(),this._navMeshMgrBig=new f,this._navMeshMgrBig.init(),this.setNavMeshConfig(),this.startNavMesh()},o.lateUpdate=function(e){if(this.isWorkingSmall&&this._corwdSmall&&this.isWorkingBig&&this._corwdBig){this._corwdSmall.update(e),this._corwdBig.update(e);for(var t=0;t<this.agents.length;t++)if(-1!=this.agents[t].agentIndex){var i=(this.agents[t].isBig?this._corwdBig:this._corwdSmall).getAgentPosition(this.agents[t].agentIndex);this.agents[t].node.setPosition(i)}}},o.setNavMeshConfig=function(){this._navMeshMgrSmall.setConfig(D),this._navMeshMgrBig.setConfig(w)},o.startNavMesh=function(){var e=(new Date).getTime(),t=this,i=function(){if(t.isWorkingSmall&&t.isWorkingBig){t._corwdSmall=new b(t._navMeshMgrSmall,12,1),t._corwdBig=new b(t._navMeshMgrBig,12,3);for(var e=0;e<t.agents.length;e++)t.addAgent(t.agents[e])}},n="Data/scene/";0==p.instance.storageData.playCount&&(n="Data/scene-P/"),this._navMeshMgrSmall.loadNavMeshData(n+"nav-mesh-small",(function(n){t._navMeshMgrSmall.buildFromNavMeshData(n);var s="寻路系统小龙：初始化完成，耗时:"+((new Date).getTime()-e)/1e3+"s";console.log(s),t.isWorkingSmall=!0,i()})),this._navMeshMgrBig.loadNavMeshData(n+"nav-mesh-big",(function(n){t._navMeshMgrBig.buildFromNavMeshData(n);var s="寻路系统大龙：初始化完成，耗时:"+((new Date).getTime()-e)/1e3+"s";console.log(s),t.isWorkingBig=!0,i()}))},o.showDebug=function(){if(this.isDebug&&this.isWorkingSmall){var e=this._navMeshMgrSmall.getNavMeshDebugData(this._debugDataType);e&&this.createDebugMesh(e.positions,e.normals)}else this.debugNode.destroyAllChildren()},o.createDebugMesh=function(e,t){this.debugNode.destroyAllChildren();var i=new u,n=i.addComponent(d),s=M.createMesh({positions:e,primitiveMode:v.PrimitiveMode.TRIANGLE_LIST,normals:t});n.mesh=s,n.setMaterial(this.material,0),this.debugNode.addChild(i)},a(t,[{key:"debugNode",get:function(){return this.node}},{key:"debugDataType",get:function(){return this._debugDataType},set:function(e){this._debugDataType=e,this.showDebug()}},{key:"isDebug",get:function(){return this._isDebug},set:function(e){this._isDebug=e,this.showDebug()}}]),t}(_)).instance=void 0,I=t((W=z).prototype,"material",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),t(W.prototype,"debugDataType",[C],Object.getOwnPropertyDescriptor(W.prototype,"debugDataType"),W.prototype),L=t(W.prototype,"_debugDataType",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.LINE}}),t(W.prototype,"isDebug",[T],Object.getOwnPropertyDescriptor(W.prototype,"isDebug"),W.prototype),x=t(W.prototype,"_isDebug",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=W))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/NodeTool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,r,n,s,a,i,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.createClass},function(e){n=e.cclegacy,s=e._decorator,a=e.CCFloat,i=e.MeshRenderer,c=e.Component}],execute:function(){var l,p,u,d;n._RF.push({},"903547VTVxKBZsgAVuXi7i5","NodeTool",void 0);var h=s.ccclass,y=s.property;e("NodeTool",(l=h("NodeTool"),p=y({type:a,visible:!0,displayName:"随便修改一下值触发"}),l((t((d=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this)._value=0,t}return o(t,e),r(t,[{key:"value",get:function(){return this._value},set:function(e){for(var t=this.node.getComponentsInChildren(i),o=0;o<t.length;o++)t[o].shadowCastingMode=0,t[o].lightmapSettings.castShadow=!1;this.destroy()}}]),t}(c)).prototype,"value",[p],Object.getOwnPropertyDescriptor(d.prototype,"value"),d.prototype),u=d))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/NoiseGenerator.ts",["cc","./Math.ts"],(function(e){"use strict";var t,n,o,i,r;return{setters:[function(e){t=e.cclegacy,n=e.Quat,o=e.Vec3,i=e.lerp},function(e){r=e.Perlin}],execute:function(){e("NoiseProfile",void 0),t._RF.push({},"92aa29Tdz9E3rHRk99/eeeT","NoiseGenerator",void 0);var a,s=Math.cos,l=2*Math.PI,d=[[[.1,7,0,.75,3,0,1.2,1,0],[.15,4,0,.8,1,0,1.4,.8,0],[0,0,0,0,0,0,0,0,0]],[[5.83,.09,1,9.17,.14,1,57.17,.15,1],[1.8,.059,1,11.35,.041,1,54.17,.048,1],[2.38,.017,1,10.52,.009,1,63.76,.016,1],[3.2,.011,1,7.7,.009,1,51.51,.002,1],[1.9,.059,1,9.1,.04,0,55.54,.05,1],[3.33,.021,1,9.22,.009,1,58.55,.017,1]],[[.2,15,0,.9,5,0,2,2,0],[.25,7,0,1,3,0,0,1,0],[0,0,0,0,0,0,0,0,0]],[[.15,7,0,.8,4,0,1.2,1,0],[.1,5,0,.75,2,0,1.5,.8,0],[0,0,0,0,0,0,0,0,0]],[[.4,10,0,1.44,5,0,2.49,3,0],[.06,10,0,.73,3,0,2,1,0],[0,0,0,0,0,0,0,0,0]],[[.2,4,0,.4,2,0,.7,1,0],[.15,2,0,.5,2,0,.6,1,0],[0,0,0,0,0,0,0,0,0]],[[.39,6.19,0,1.75,1.84,0,2,2.3,0],[.15,3,0,.9,.5,0,1.4,.5,0],[.1,1,0,0,0,0,0,0,0]],[[.15,12,0,.6,5,0,1.5,1,0],[.1,5,0,.45,4,0,1.2,1,0],[0,0,0,0,0,0,0,0,0]],[[.5,17.46,0,.94,12.47,0,1.2,4,0],[.25,5,0,.5,4,0,1.3,2,0],[.1,0,0,.4,1,0,0,0,0]]];!function(e){e[e.Noise_CM_4=0]="Noise_CM_4",e[e.Shake_6D=1]="Shake_6D",e[e.Handheld_normal_extreme=2]="Handheld_normal_extreme",e[e.Handheld_normal_mild=3]="Handheld_normal_mild",e[e.Handheld_normal_strong=4]="Handheld_normal_strong",e[e.Handheld_tele_mild=5]="Handheld_tele_mild",e[e.Handheld_tele_strong=6]="Handheld_tele_strong",e[e.Handheld_wideangle_mild=7]="Handheld_wideangle_mild",e[e.Handheld_wideangle_strong=8]="Handheld_wideangle_strong"}(a||(a=e("NoiseProfile",{})));var _=new n,c=new o;e("NoiseGenerator",function(){function e(){this._time=0,this._values=[0,0,0,0,0,0],this._noiseOffsets=[0,0,0]}var t=e.prototype;return t.reset=function(){var e=this;this._time=0,this._noiseOffsets.forEach((function(t,n){return e._noiseOffsets[n]=i(-1e3,1e3,Math.random())}))},t.fractalNoise=function(t,n){for(var o=this._time+=n*t.frequncyGain,i=d[t.profile]||d[0],r=this._values.fill(0),a=this._noiseOffsets,s=0;s<i.length;s++){var l=i[s];r[s]=e.Noise(o,l[0],l[1],l[2],a[0])+e.Noise(o,l[3],l[4],l[5],a[1])+e.Noise(o,l[6],l[7],l[8],a[2]),r[s]*=t.amplitudeGain}return r},e.Noise=function(e,t,n,o,i){return void 0===i&&(i=0),o?.5*s(l*e*t+i)*n:r.Noise(e*t+i)*n},e.ApplyNoise=function(e,t){n.fromEuler(_,e[0],e[1],e[2]),o.set(c,e[3],e[4],e[5]),o.transformQuat(c,c,t.node.worldRotation),n.multiply(t.correctRotation,t.correctRotation,_),o.add(t.correctPosition,t.correctPosition,c)},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/NoiseHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NoiseGenerator.ts","./CameraHandler.ts"],(function(e){"use strict";var n,r,t,o;return{setters:[function(e){n=e.inheritsLoose},function(e){r=e.cclegacy},function(e){t=e.NoiseGenerator},function(e){o=e.CameraHandler}],execute:function(){r._RF.push({},"0e3a0pD3pxPJZCwuB99++oU","NoiseHandler",void 0);e("NoiseHandler",function(e){function r(){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=e.call.apply(e,[this].concat(o))||this)._generator=new t,n}n(r,e);var o=r.prototype;return o.onEnable=function(){this._generator.reset()},o.updateCamera=function(e){var n=this._vcam,r=this._generator.fractalNoise(n.noise,e);t.ApplyNoise(r,n)},r}(o));r._RF.pop()}}}));

System.register("chunks:///_virtual/NoiseStage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CameraHandler.ts","./NoiseHandler.ts","./BaseStage.ts"],(function(e){"use strict";var n,t,a,r,s;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},function(e){a=e.CameraHandler},function(e){r=e.NoiseHandler},function(e){s=e.BaseStage}],execute:function(){t._RF.push({},"9e1ccSzYTVCrL6k6/zwvvky","NoiseStage",void 0);e("NoiseStage",function(e){function t(){for(var n,t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];return(n=e.call.apply(e,[this].concat(s))||this)._handlers=[new a(n._vcam),new r(n._vcam)],n}n(t,e);var s=t.prototype;return s.onEnable=function(){this._handlers.forEach((function(e){return e.enable=!0}))},s.updateStage=function(e){var n=this._vcam.noise,t=this._handlers[n.type];t&&t.updateCamera(e)},t}(s));t._RF.pop()}}}));

System.register("chunks:///_virtual/NpcAI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NavMeshMgr.ts","./EnumTypes.ts","./GameData.ts","./PoolMgr.ts","./Tool.ts","./Hero.ts","./Tower.ts"],(function(e){"use strict";var o,t,n,i,r,s,a,h,l,c,g,u,d;return{setters:[function(e){o=e.inheritsLoose},function(e){t=e.cclegacy,n=e._decorator,i=e.Vec3,r=e.Component},function(e){s=e.NavMeshMgr},function(e){a=e.CampType,h=e.DinasorType},function(e){l=e.default},function(e){c=e.PoolObjType},function(e){g=e.default},function(e){u=e.Hero},function(e){d=e.Tower}],execute:function(){var m;t._RF.push({},"a4a1eXuYBFAopecEcdav20S","NpcAI",void 0);var T=n.ccclass;n.property,e("NpcAI",T("NpcAI")(m=function(e){function t(){for(var o,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return(o=e.call.apply(e,[this].concat(n))||this).aimHero=void 0,o.targetPoses=[],o.targetIndex=0,o.hero=void 0,o.nowTargetPos=null,o.targetTower=null,o}o(t,e);var n=t.prototype;return n.onLoad=function(){},n.start=function(){this.hero=this.node.getComponent(u),this.emojiShow(),this.scheduleOnce(this.skillUse,g.randomInt(15,30))},n.lateUpdate=function(e){this.hero.isDead?this.nowTargetPos=null:(this.hero.agent&&-1!=this.hero.agent.agentIndex&&(this.nowTargetPos?(i.squaredDistance(this.nowTargetPos,this.node.getWorldPosition())<100||this.hero.agent.getAgentVelocity().lengthSqr()<1)&&(this.nowTargetPos=null):l.aiMove&&this.goPoint()),l.aiAttack&&this.searchTarget())},n.goTower=function(){for(var e,o=[],t=0;t<l.towers.length;t++){var n=l.towers[t].getComponent(d);if(0==n.nowState||n.nowState==(this.hero.camp==a.Player?-1:1)){if(-1!=n.herosInTower.indexOf(this.hero)){o=[t];break}o.push(t)}}e=o.length>0?g.getRandomInArray(o):g.randomInt(0,4);var r=new i,s=g.randomNumber(15,20),h=l.towers[e],c=g.randomNumber(0,2*Math.PI);r.x=h.getWorldPosition().x+Math.cos(c)*s,r.z=h.getWorldPosition().z+Math.sin(c)*s,r.y=h.getWorldPosition().y,this.nowTargetPos=r,this.targetTower=h.getComponent(d),this.hero.moveToTaregtPos_AI(this.nowTargetPos)},n.goPoint=function(){var e=new i,o=l.checkPoint.children[g.randomInt(0,l.checkPoint.children.length-1)];e.x=o.getWorldPosition().x,e.z=o.getWorldPosition().z,e.y=o.getWorldPosition().y,this.nowTargetPos=s.instance.getClosestPoint(e,this.hero.isBig),this.hero.moveToTaregtPos_AI(this.nowTargetPos)},n.emojiShow=function(){var e=this;l.aiEmoji&&(this.scheduleOnce((function(){e.scheduleOnce(e.emojiShow,g.randomNumber(5,10))})),this.hero.emoji_On(g.randomInt(c.Cool,c.Sad)))},n.skillUse=function(){var e=this;l.aiSkill&&this.scheduleOnce((function(){switch(e.hero.dinasorType){case h.Dinasor1:e.hero.Skill_1_On(),e.scheduleOnce(e.skillUse,l.skill_1_cd+g.randomNumber(5,20));break;case h.Dinasor2:e.hero.isSkill2On?(e.hero.Skill_2_End(),e.scheduleOnce(e.skillUse,g.randomInt(15,30))):(e.hero.Skill_2_On(),e.scheduleOnce(e.skillUse,g.randomInt(5,10)));break;case h.Dinasor4:e.hero.Skill_4_On(),e.scheduleOnce(e.skillUse,g.randomInt(30,60));break;case h.Dinasor5:e.hero.isSkill2On?e.hero.Skill_2_End():e.hero.Skill_2_On()}}))},n.searchTarget=function(){var e=this.hero.closestTarget;if(this.hero.hitFollowTarget){var o=this.hero.hitFollowTarget.getComponent(u);o.isPlayerCtrl||-1==this.hero.inSightTargets.indexOf(o)||(e=o)}e?(this.aimTarget(e),this.hero.camp,a.Enemy):this.aimTarget(null)},n.aimTarget=function(e){e&&!e.isDead?this.hero.hitFollowTarget=e.node:this.hero.hitFollowTarget=null},t}(r))||m);t._RF.pop()}}}));

System.register("chunks:///_virtual/Parallel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./property.ts","./shared-number.ts","./behavior-parallel.ts"],(function(e){"use strict";var r,t,l,n,i,a,o,s,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,l=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy},null,function(e){a=e.ccclass},function(e){o=e.property},function(e){s=e.SharedNumber},function(e){c=e.BehaviorParallel}],execute:function(){var u,p,h,f,y;i._RF.push({},"9c55eEnAU5MQ6P8rjZaM2YO","Parallel",void 0);e("Parallel",(u=a("bt.Parallel"),p=o({type:s,tooltip:"0 全部成功 -1 全部失败  XXX 指定数目"}),u((y=r((f=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return r=e.call.apply(e,[this].concat(i))||this,l(r,"threshold",y,n(r)),r}return t(r,e),r}(c)).prototype,"threshold",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/PlatForm_wx.ts",["./rollupPluginModLoBabelHelpers.js","cc","./WxPlatform.ts","./Platform.ts","./SoundMgr.ts"],(function(t){"use strict";var n,o,i,e,c,a;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,i=t.game},function(t){e=t.default},function(t){c=t.default},function(t){a=t.SoundMgr}],execute:function(){o._RF.push({},"1cc50XoJhFFOboXBQ09plo7","PlatForm_wx",void 0);t("default",function(t){function o(){for(var n,o=arguments.length,i=new Array(o),e=0;e<o;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).videoId="adunit-acdd6cb9af015fc2",n}n(o,t);var s=o.prototype;return s.onLoad=function(){t.prototype.onLoad.call(this),this.platformApi=window.wx,this.showShareMenuWithTicket(!0),this.regisiterWXShareCallback()},s.showToast=function(t,n){void 0===n&&(n=1500),window.wx.showToast({title:t,icon:"none",duration:n,image:"",mask:!1,success:function(){},fail:function(){},complete:function(){}})},s.showShareMenuWithTicket=function(t){window.wx.showShareMenu({withShareTicket:t,success:function(){},fail:function(){},complete:function(){}})},s.regisiterWXShareCallback=function(){if(window.wx){var t={title:"分享",image:""};window.wx.onShareAppMessage((function(){return console.log("用户点击了转发按钮"),{title:t.title,imageUrl:t.image,query:"share_id=1",success:function(t){},fail:function(){}}}))}},s.showVideo=function(t,n){i.pause(),a.instacne&&a.instacne.auidoSource.stop(),e.instance.showVideoAd((function(){}),(function(o){o?(t&&t(),c.instance.showToast("视频激励观看成功")):(n&&n(),c.instance.showToast("视频激励观看失败")),i.resume(),a.instacne&&a.instacne.auidoSource.play()}))},o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/Platform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./EventMgr.ts"],(function(t){"use strict";var o,i,n,e,s,r;return{setters:[function(t){o=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator,e=t.Component},function(t){s=t.EventType},function(t){r=t.EventMgr}],execute:function(){var a,c;i._RF.push({},"b52cdxF8T1Od5EkqXHskyJw","Platform",void 0);var l=n.ccclass;t("default",l("Platform")(((c=function(t){function i(){for(var o,i=arguments.length,n=new Array(i),e=0;e<i;e++)n[e]=arguments[e];return(o=t.call.apply(t,[this].concat(n))||this).isSubPackage=!0,o.isVibrate=!0,o.platformApi=void 0,o}o(i,t);var n=i.prototype;return n.onLoad=function(){i.instance=this},n.loadSubPackage=function(t,o,i){this.platformApi&&this.isSubPackage?this.platformApi.loadSubpackage({name:t,success:function(i){console.log("分包加载成功：",t),o.call(!0,i)},fail:function(i){console.error("分包加载失败：",t,JSON.stringify(i)),o.call(!1,i)}}).onProgressUpdate((function(t){i&&i(t.progress)})):(console.log("没有平台API"),o(!0))},n.showToast=function(t,o){void 0===o&&(o=1e3),console.log(t,o.toString()+"ms")},n.vibrateShort=function(){this.platformApi&&this.isVibrate&&this.platformApi.vibrateShort()},n.vibrateLong=function(){this.platformApi&&this.isVibrate&&this.platformApi.vibrateLong()},n.regisiterCallback=function(){this.platformApi&&(this.platformApi.offShow(this.onShowEvent),this.platformApi.onShow(this.onShowEvent),this.platformApi.offHide(this.onHideEvent),this.platformApi.onHide(this.onHideEvent))},n.onShowEvent=function(t){r.event(s.Platform_Wake_Do,t)},n.onHideEvent=function(t){r.event(s.Platform_Hide_Do,t)},n.showVideo=function(t,o){this.showToast("无视频，默认发放奖励"),t&&t()},i}(e)).instance=void 0,a=c))||a);i._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerCtr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./GameData.ts","./EventMgr.ts","./PoolMgr.ts","./TouchMgr.ts","./Tool.ts","./CircleBar.ts","./SkillBtn.ts","./Hero.ts"],(function(t){"use strict";var i,e,o,n,s,h,r,a,l,c,f,C,_,d,y,T,v,k,m,p,u,O;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,n=t.view,s=t.find,h=t.Node,r=t.Input,a=t.assetManager,l=t.SpriteFrame,c=t.Sprite,f=t.Vec2,C=t.Component},function(t){_=t.EventType,d=t.DinasorType},function(t){y=t.default},function(t){T=t.EventMgr},function(t){v=t.PoolObjType},function(t){k=t.TouchEventType},function(t){m=t.default},function(t){p=t.CircleBar},function(t){u=t.SkillBtn},function(t){O=t.Hero}],execute:function(){var g;e._RF.push({},"829afvpKsJPtp8tag5ngyJx","PlayerCtr",void 0);var B=o.ccclass,E=(o.property,n.getVisibleSize());t("PlayerCtr",B("PlayerCtr")(g=function(t){function e(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).camControlNode=void 0,i.fireBtn=void 0,i.skillBtn=void 0,i.cool=void 0,i.happy=void 0,i.sad=void 0,i.hero=void 0,i.firstTouchId=null,i.orignalHorizontalAlways=0,i.orignalAxisAlways=0,i.camCtr_moveVec2=new f,i}i(e,t);var o=e.prototype;return o.onLoad=function(){E=n.getVisibleSize();var t=s("Canvas");this.camControlNode=t.getChildByPath("GameUI/CamControlNode"),this.fireBtn=t.getChildByPath("GameUI/FireBtn"),this.skillBtn=t.getChildByPath("GameUI/SkillBtn"),this.cool=t.getChildByPath("GameUI/CoolBtn"),this.happy=t.getChildByPath("GameUI/HappyBtn"),this.sad=t.getChildByPath("GameUI/SadBtn");for(var i=0;i<2;i++)this.fireBtn.children[i].active=0==i;this.camControlNode||console.warn("玩家摄像机操控Node找不到")},o.start=function(){T.on(_.Game_FireBtn_CD,this,this.fireBtnCDUpdate)},o.fireBtnCDUpdate=function(t){this.fireBtn.getComponent(p).value=t},o.lateUpdate=function(t){this.skillUIUpdate(t)},o.controlOn=function(){this.hero=this.node.getComponent(O),this.hero&&(T.on(k.joyAxis,this,this.moveCtrl),this.camControlNode.on(h.EventType.TOUCH_START,this.camCtr_CheckOn,this),this.camControlNode.on(h.EventType.TOUCH_END,this.camCtr_CheckOff,this),this.camControlNode.on(h.EventType.TOUCH_CANCEL,this.camCtr_CheckOff,this),this.camControlNode.on(h.EventType.TOUCH_MOVE,this.camCtr_TouchMove,this),this.fireBtn.on(h.EventType.TOUCH_START,this.camCtr_CheckOn,this),this.fireBtn.on(h.EventType.TOUCH_END,this.camCtr_CheckOff,this),this.fireBtn.on(h.EventType.TOUCH_CANCEL,this.camCtr_CheckOff,this),this.fireBtn.on(h.EventType.TOUCH_MOVE,this.camCtr_TouchMove_fireBtn,this),this.fireBtn.on(r.EventType.TOUCH_START,this.fireOn,this),this.fireBtn.on(r.EventType.TOUCH_END,this.fireOff,this),this.fireBtn.on(r.EventType.TOUCH_CANCEL,this.fireOff,this),m.d2_AddClickEvent(this.skillBtn,this,this.skillOn,[],!1,!1),m.d2_AddClickEvent(this.cool,this,this.onCoolClick,[],!1),m.d2_AddClickEvent(this.happy,this,this.onHappyClick,[],!1),m.d2_AddClickEvent(this.sad,this,this.onSadClick,[],!1))},o.controlOff=function(){T.off(k.joyAxis,this,this.moveCtrl),this.moveCtrl([0,0]),this.camControlNode.off(h.EventType.TOUCH_START,this.camCtr_CheckOn,this),this.camControlNode.off(h.EventType.TOUCH_END,this.camCtr_CheckOff,this),this.camControlNode.off(h.EventType.TOUCH_CANCEL,this.camCtr_CheckOff,this),this.camControlNode.off(h.EventType.TOUCH_MOVE,this.camCtr_TouchMove,this),this.fireBtn.off(h.EventType.TOUCH_START,this.camCtr_CheckOn,this),this.fireBtn.off(h.EventType.TOUCH_END,this.camCtr_CheckOff,this),this.fireBtn.off(h.EventType.TOUCH_CANCEL,this.camCtr_CheckOff,this),this.fireBtn.off(h.EventType.TOUCH_MOVE,this.camCtr_TouchMove_fireBtn,this),this.fireBtn.off(r.EventType.TOUCH_START,this.fireOn,this),this.fireBtn.off(r.EventType.TOUCH_END,this.fireOff,this),this.fireBtn.off(r.EventType.TOUCH_CANCEL,this.fireOff,this),this.fireOff(),this.skillBtn.targetOff(this),this.cool.targetOff(this),this.happy.targetOff(this),this.sad.targetOff(this)},o.moveCtrl=function(t){this.hero.moveCtrl_forPlayer(t)},o.camCtr_CheckOn=function(t){this.firstTouchId||(this.firstTouchId=t.getID(),this.orignalHorizontalAlways=t.getUILocation().x/E.width,this.orignalAxisAlways=t.getUILocation().y/E.height)},o.camCtr_TouchMove=function(t){if(null!=this.firstTouchId&&t.getID()==this.firstTouchId){var i=t.getUILocation().x/E.width-this.orignalHorizontalAlways,e=t.getUILocation().y/E.height-this.orignalAxisAlways;this.orignalHorizontalAlways=t.getUILocation().x/E.width,this.orignalAxisAlways=t.getUILocation().y/E.height,this.camCtr_moveVec2.x=e,this.camCtr_moveVec2.y=i,this.hero.camRot_ForPlayer(this.camCtr_moveVec2)}},o.camCtr_TouchMove_fireBtn=function(t){if(null!=this.firstTouchId&&t.getID()==this.firstTouchId){var i=t.getUILocation().x/E.width-this.orignalHorizontalAlways,e=t.getUILocation().y/E.height-this.orignalAxisAlways;this.orignalHorizontalAlways=t.getUILocation().x/E.width,this.orignalAxisAlways=t.getUILocation().y/E.height,this.camCtr_moveVec2.x=e,this.camCtr_moveVec2.y=i,this.hero.camRot_ForPlayer(this.camCtr_moveVec2,!0)}},o.camCtr_CheckOff=function(t){this.firstTouchId==t.getID()&&(this.firstTouchId=null,this.orignalHorizontalAlways=t.getUILocation().x/E.width,this.orignalAxisAlways=t.getUILocation().y/E.height)},o.fireOn=function(){for(var t=0;t<2;t++)this.fireBtn.children[t].active=1==t;this.hero.fireOn()},o.fireOff=function(){for(var t=0;t<2;t++)this.fireBtn.children[t].active=0==t;this.hero.fireOff()},o.skillOn=function(){switch(T.event(_.Game_Teach_Skill),this.hero.dinasorType){case d.Dinasor1:this.hero.Skill_1_On();break;case d.Dinasor2:this.hero.isSkill2On?this.hero.Skill_2_End():this.hero.Skill_2_On();break;case d.Dinasor3:this.hero.Skill_3_On();break;case d.Dinasor4:this.hero.Skill_4_On();break;case d.Dinasor5:this.hero.isSkill2On?this.hero.Skill_2_End():this.hero.Skill_2_On();break;case d.Dinasor6:this.hero.Skill_5_On()}},o.skillUIUpdate=function(t){if(this.hero){var i=0,e=1;switch(this.hero.dinasorType){case d.Dinasor1:i=this.hero.skill1CD,e=y.skill_1_cd;break;case d.Dinasor2:i=this.hero.skill2CD,e=y.skill_2_cd;break;case d.Dinasor3:i=this.hero.skill3CD,e=y.skill_3_cd;break;case d.Dinasor4:i=this.hero.skill4CD,e=y.skill_4_cd;break;case d.Dinasor5:i=this.hero.skill2CD,e=y.skill_2_cd;break;case d.Dinasor6:i=this.hero.skill5CD,e=y.skill_5_cd}var o=i/e;this.skillBtn.getComponent(u).updateSkillBtn(o)}},o.changeSkillIcon=function(t){var i=this;a.getBundle("02_Stage").loadDir("UI/skill",l,(function(e,o){if(e)console.warn(e);else for(var n=0;n<o.length;n++)if(o[n].name=="skill"+t.toString()){i.skillBtn.getChildByName("icon").getComponent(c).spriteFrame=o[n];break}}))},o.onCoolClick=function(){this.hero.emoji_On(v.Cool)},o.onHappyClick=function(){this.hero.emoji_On(v.Happy)},o.onSadClick=function(){this.hero.emoji_On(v.Sad)},e}(C))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/PlayFeedBack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./EventMgr.ts"],(function(e){"use strict";var t,i,a,n,s,o,h,r;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,a=e._decorator,n=e.ProgressBar,s=e.Animation,o=e.Component},function(e){h=e.EventType},function(e){r=e.EventMgr}],execute:function(){var c;i._RF.push({},"1b53aBXmXVPKYuYBaErjLBr","PlayFeedBack",void 0);var p=a.ccclass;a.property,e("PlayFeedBack",p("PlayFeedBack")(c=function(e){function i(){for(var t,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(t=e.call.apply(e,[this].concat(a))||this).bite=void 0,t.sniperCam=void 0,t.dash=void 0,t.aoe=void 0,t.charge=void 0,t}t(i,e);var a=i.prototype;return a.onLoad=function(){this.bite=this.node.getChildByName("Bite"),this.sniperCam=this.node.getChildByName("SniperCam"),this.dash=this.node.getChildByName("Dash"),this.aoe=this.node.getChildByName("Aoe"),this.charge=this.node.getChildByName("Charge")},a.start=function(){this.bite.active=!0,this.sniperCam.active=!1,this.dash.active=!0,this.aoe.active=!0,this.charge.active=!1,r.on(h.Game_Skill1_Bite,this,this.showBite),r.on(h.Game_Skill4_Sweep,this,this.showSweap),r.on(h.Game_Skill5_Hit,this,this.showDash),r.on(h.Game_Skill2_Aim_Open,this,this.openAim),r.on(h.Game_Skill2_Aim_Close,this,this.closeAim),r.on(h.Game_Skill2_Aim_Update,this,this.updateAim),r.on(h.Game_Charge_Open,this,this.openCharge),r.on(h.Game_Charge_Close,this,this.closeCharge),r.on(h.Game_Charge_Update,this,this.updateCharge)},a.openCharge=function(){this.charge.active=!0,this.updateCharge(0)},a.closeCharge=function(){this.charge.active=!1},a.updateCharge=function(e){for(var t=this.charge.getComponentsInChildren(n),i=0;i<t.length;i++)t[i].progress=e},a.openAim=function(){this.sniperCam.active=!0},a.closeAim=function(){this.sniperCam.active=!1},a.updateAim=function(e){for(var t=this.sniperCam.getComponentsInChildren(n),i=0;i<t.length;i++)t[i].progress=e},a.showBite=function(){this.bite.getComponent(s).play()},a.showSweap=function(){this.aoe.getComponent(s).play()},a.showDash=function(){this.dash.getComponent(s).play()},i}(o))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/PoolComp.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){"use strict";var t,n,e,r;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,r=o.Component}],execute:function(){var c;n._RF.push({},"d9e6bKPmrBKVKpydYfynAUT","PoolComp",void 0);var i=e.ccclass;e.property,o("PoolComp",i("PoolComp")(c=function(o){function n(){return o.apply(this,arguments)||this}t(n,o);var e=n.prototype;return e.firstBorn=function(){},e.clear=function(){},e.init=function(){this.node.active=!0},e.recyle=function(){this.node.active=!1},n}(r))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/PoolMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolComp.ts"],(function(e){"use strict";var o,t,n,i,l,a,r,d,s,h,p;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){l=e.cclegacy,a=e._decorator,r=e.Prefab,d=e.Node,s=e.instantiate,h=e.Component},function(e){p=e.PoolComp}],execute:function(){var u,c,f,C,P,_,y;e("PoolObjType",void 0),l._RF.push({},"593efpN5e1IgayKKpGwgYdf","PoolMgr",void 0);var S,b=a.ccclass,m=a.property,g=a.menu;!function(e){e[e.Bullet_1=0]="Bullet_1",e[e.Bullet_2=1]="Bullet_2",e[e.Bullet_3=2]="Bullet_3",e[e.Bullet_4=3]="Bullet_4",e[e.Bullet_5=4]="Bullet_5",e[e.Bullet_6=5]="Bullet_6",e[e.FireEffect=6]="FireEffect",e[e.HitEffect=7]="HitEffect",e[e.AtkUp=8]="AtkUp",e[e.Heal=9]="Heal",e[e.Sheild=10]="Sheild",e[e.SpeedUp=11]="SpeedUp",e[e.Shield_S=12]="Shield_S",e[e.Shield_L=13]="Shield_L",e[e.Heal_S=14]="Heal_S",e[e.Heal_L=15]="Heal_L",e[e.Power_S=16]="Power_S",e[e.Power_L=17]="Power_L",e[e.Speed_S=18]="Speed_S",e[e.Speed_L=19]="Speed_L",e[e.Cool=20]="Cool",e[e.Happy=21]="Happy",e[e.Sad=22]="Sad"}(S||(S=e("PoolObjType",{})));e("PoolMgr",(u=b("PoolMgr"),c=g("Mgr/PoolMgr"),f=m({type:[r],visible:!0,displayName:"池子物品"}),u(C=c(((y=function(e){function o(){for(var o,t=arguments.length,l=new Array(t),a=0;a<t;a++)l[a]=arguments[a];return o=e.call.apply(e,[this].concat(l))||this,n(o,"prefabs",_,i(o)),o.nodePoolChildren=[],o.mainScene=void 0,o.nodePoolNames=[],o.typeMaxCount=[],o.addPoolObj=void 0,o.addPoolComp=void 0,o}t(o,e);var l=o.prototype;return l.getObj=function(e){this.nodePoolChildren=this.node.getComponentsInChildren(p);for(var o=this.nodePoolChildren.length-1;o>=0;o--)if(this.nodePoolChildren[o].node.name==this.nodePoolNames[e])return this.mainScene.addChild(this.nodePoolChildren[o].node),this.nodePoolChildren[o].init(),this.nodePoolChildren[o];var t=this.bornNew(e);return t.init(),t},l.recyleObj=function(e){if(e.node){e.recyle();var o=this.node.getChildByName(e.node.name);o.addChild(e.node),this.checkPoolTop(o)}},l.clearObj=function(e){e.clear(),e.node.destroy()},l.onLoad=function(){o.instance=this,this.mainScene=this.node.scene,this.typeMaxCount.length=0;for(var e=0;e<this.prefabs.length;e++)this.typeMaxCount.push(3);this.typeMaxCount[S.Bullet_1]=20,this.typeMaxCount[S.Bullet_4]=25,this.typeMaxCount[S.HitEffect]=20,this.typeMaxCount[S.Happy]=5,this.typeMaxCount[S.Cool]=5,this.typeMaxCount[S.Sad]=5;for(var t=0;t<this.prefabs.length;t++){this.nodePoolNames.push(this.prefabs[t].data.name),this.node.addChild(new d(this.prefabs[t].data.name));for(var n=0;n<this.typeMaxCount[t];n++)this.recyleObj(this.bornNew(t))}},l.bornNew=function(e){return this.addPoolObj=s(this.prefabs[e]),this.addPoolComp=this.addPoolObj.getComponent(p),this.addPoolComp.firstBorn(),this.mainScene.addChild(this.addPoolObj),this.addPoolComp},l.checkPoolTop=function(e){e.children.length>this.typeMaxCount[e.getSiblingIndex()]&&(console.log(e.name,"超过上限，清理"),this.clearObj(e.children[0].getComponent(p)))},o}(h)).instance=void 0,_=o((P=y).prototype,"prefabs",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),C=P))||C)||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/Predictor.ts",["cc","./Math.ts"],(function(t){"use strict";var i,e,o;return{setters:[function(t){i=t.cclegacy,e=t.Vec3},function(t){o=t.SmoothDamper}],execute:function(){i._RF.push({},"c8d6930H0tIwYdCiSEhw5fJ","Predictor",void 0);var s=new e;t("Predictor",function(){function t(){this._prePos=null,this._velocity=new e,this._dampingVelocity=new e,this._smoothDamper=new o}return t.prototype.predictPosition=function(t,i,o,c,r){return null===this._prePos?(this._prePos=new e(i),t.set(i)):(e.subtract(this._velocity,i,this._prePos).multiplyScalar(1/r),this._smoothDamper.Vec3_smoothDamp(this._dampingVelocity,this._dampingVelocity,this._velocity,o,r),this._prePos.set(i),e.multiplyScalar(s,this._dampingVelocity,c),e.add(t,i,s)),t},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/preprocess-class.ts",["cc"],(function(t){"use strict";var r,e,n,i;return{setters:[function(t){r=t.cclegacy,e=t.js,n=t.errorID,i=t.error}],execute:function(){t({doValidateMethodWithProps_DEV:function(t,r,o,a,u){if(a.__props__&&a.__props__.indexOf(r)>=0){var l=e.getClassName(void 0);return n(3648,o,r,l),!1}"destroy"===r&&e.isChildClassOf(u,s.Component)&&!p.test(t)&&i("Overwriting '"+r+"' function in '"+o+"' class without calling super is not allowed. Call the super function in '"+r+"' please.")},getFullFormOfProperty:c,preprocessAttrs:function(t,r,e){for(var n in t){var i=t[n],s=c(i,!1);if(s&&(i=t[n]=s),i){var o=i.notify;o&&a(i,n,o,t),"type"in i&&u(i,i.type,r,n)}}}}),r._RF.push({},"3eb5dim9SdATqOrRxxDMaNE","preprocess-class",void 0);var s=window.cc,o={default:{},serializable:{},editorOnly:{},formerlySerializedAs:{}};function a(t,r,e,n){if(!t.get&&!t.set&&t.hasOwnProperty("default")){var i="_N$"+r;t.get=function(){return this[i]},t.set=function(t){var r=this[i];this[i]=t,e.call(this,r)};var s={};for(var a in n[i]=s,o){var u=o[a];t.hasOwnProperty(a)&&(s[a]=t[a],u.canUsedInGet||delete t[a])}}}function u(t,r,e,i){if(Array.isArray(r)){if(!(r.length>0))return n(5508,e,i);t.type=r=r[0]}"function"==typeof r&&(r===String?t.type=s.String:r===Boolean?t.type=s.Boolean:r===Number&&(t.type=s.Float))}function l(t,r,e){var n=t?{_short:!0}:{_short:!0,default:r};return e&&(n.type=e),n}var f=t("PrimitiveType",function(){function t(t,r){this.name=void 0,this.default=void 0,this.name=t,this.default=r}return t.prototype.toString=function(){return this.name},t}());function c(t,r){if(!(t&&t.constructor===Object)){if(Array.isArray(t)&&t.length>0)return l(r,[],t);if("function"==typeof t){var n=t;return l(r,e.isChildClassOf(n,s.ValueType)?new n:null,n)}return l(r,t instanceof f?t.default:t)}return null}var p=/\b\._super\b|destroy.*\.call\s*\(\s*\w+\s*[,|)]/;r._RF.pop()}}}));

System.register("chunks:///_virtual/property.ts",["cc","./tools.ts","./preprocess-class.ts"],(function(t){"use strict";var e,r,n,i,o;return{setters:[function(t){e=t.cclegacy,r=t.js},function(t){n=t.getClassCache,i=t.getSubDict},function(t){o=t.getFullFormOfProperty}],execute:function(){t("property",(function t(e,u,c){var s=null;function a(t,e,u){var c=n(t.constructor);if(c){var a=i(c,"proto"),f=i(a,"properties");!function(t,e,n,i,u,c){var s,a=u&&(u.get||u.set);i&&(s=o(i,a));var f=e[n],l=r.mixin(f||{},s||i||{});if(a)u.get&&(l.get=u.get),u.set&&(l.set=u.set);else if(u)u.initializer&&(l.default=function(t){var e;try{e=t()}catch(e){return t}return"object"!=typeof e||null===e?e:t}(u.initializer));else{var p=c.default||(c.default=function(t){var e;try{e=new t}catch(t){return{}}return e}(t));p.hasOwnProperty(n)&&(l.default=p[n])}e[n]=l}(t.constructor,f,e,s,u,c)}}if(void 0===e)return t({type:void 0});if(void 0===u)return s=e,a;a(e,u,c)})),e._RF.push({},"82f578gnCdKxaATFwR4pCJU","property",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RandomSuccessful.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./behavior-status.ts","./btclass.ts","./property.ts","./behavior-decorator.ts"],(function(e){"use strict";var t,r,n,c,i,s,o,u,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,c=e.assertThisInitialized},function(e){i=e.cclegacy},null,function(e){s=e.BehaviorStatus},function(e){o=e.ccclass},function(e){u=e.property},function(e){a=e.BehaviorDecorator}],execute:function(){var l,p,f,h,d;i._RF.push({},"e9db3uUzwpLYpDF+APaIB+Q","RandomSuccessful",void 0);e("RandomSuccessful",(l=o("bt.RandomSuccessful"),p=u({tooltip:"返回成功的机率（0~1）"}),l((d=t((h=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,n(t,"percent",d,c(t)),t}return r(t,e),t.prototype.execute=function(t){if(0==this.percent)t=s.Failure;else if(1==this.percent)t=s.Success;else{t=Math.random()<this.percent?s.Success:s.Failure}return e.prototype.execute.call(this,t)},t}(a)).prototype,"percent",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),f=h))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/Repeater.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./property.ts","./behavior-status.ts","./behavior-decorator.ts"],(function(t){"use strict";var e,r,i,n,s,c,o,u,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy},null,function(t){c=t.ccclass},function(t){o=t.property},function(t){u=t.BehaviorStatus},function(t){a=t.BehaviorDecorator}],execute:function(){var p,l,h,f,y;s._RF.push({},"6ad35yq9I9K2IS8pb4WAfWp","Repeater",void 0);t("Repeater",(p=c("bt.Repeater"),l=o({tooltip:"Repeat times / 重复次数"}),p((y=e((f=function(t){function e(){for(var e,r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return e=t.call.apply(t,[this].concat(s))||this,i(e,"times",y,n(e)),e.current=0,e}r(e,t);var s=e.prototype;return s.reset=function(){t.prototype.reset.call(this),this.current=0},s.execute=function(e){return this.checkValid(e)?e=u.Running:e==u.Running&&(e=u.Success),t.prototype.execute.call(this,e)},s.checkValid=function(t){return 0==this.times||(this.current++,this.times>this.current)},s.getAppendedLog=function(t,e){return"execute"==t?"[ Repeat times: "+this.current+" / "+this.times+" ]":""},e}(a)).prototype,"times",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=f))||h));s._RF.pop()}}}));

System.register("chunks:///_virtual/RotateLoop.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,r,n,i,a,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,u=t.Quat,c=t.Component}],execute:function(){var s,l,p,f;i._RF.push({},"0afa6Tmq7VA1b5TmLrh73qC","RotateLoop",void 0);var h=a.ccclass,d=a.property;t("default",h("RotateLoop")((p=e((l=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i))||this,r(e,"duration",p,n(e)),r(e,"angle",f,n(e)),e.quat=new u,e}o(e,t);var i=e.prototype;return i.start=function(){},i.update=function(t){u.rotateZ(this.quat,this.node.getRotation(),-1/15),this.node.setRotation(this.quat)},e}(c)).prototype,"duration",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),f=e(l.prototype,"angle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),s=l))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/RunUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(n){"use strict";var t,e,i,c,a,o,s,r,u,l,h,d,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,c=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,s=n.Node,r=n.Animation,u=n.Component},function(n){l=n.default},function(n){h=n.default},function(n){d=n.default},function(n){f=n.default}],execute:function(){var p,C,g,R,b;a._RF.push({},"f6d82FFNM9AN4CbUkKi1ko1","RunUI",void 0);var y=o.ccclass,m=o.property;n("default",(p=y("RunUI"),C=m(s),p((b=t((R=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];return t=n.call.apply(n,[this].concat(a))||this,i(t,"Man",b,c(t)),t.ccb=null,t.hadClick=!1,t}e(t,n);var a=t.prototype;return a.onDisable=function(){this.unscheduleAllCallbacks(),this.ccb&&this.ccb()},a.showUI=function(n){this.ccb=n,h.Instance.NewWuchu&&l.instance.dataConfig.front_run_switch?(this.Man.getComponent(r).getState("RenRun").speed=.4,this.Man.getComponent(r).play("RenIdle"),this.Man.children[0].getComponent(r).play("Ren"),this.hadClick=!1,d.instance.showBanner(),this.node.active=!0):this.ccb&&this.ccb()},a.continueBtnCB=function(){var n=this;this.hadClick||(this.hadClick=!0,f.Instance.hideBannerFun(!0),this.Man.getComponent(r).play("RenRun"),this.scheduleOnce((function(){n.node.active=!1}),1.5))},a.adBtnCB=function(){var n=this;this.hadClick||d.instance.showVideoAd((function(){n.Man.children[0].getComponent(r).play("Ren1"),n.Man.getComponent(r).getState("RenRun").speed=.4,n.continueBtnCB()}),(function(){n.hadClick=!1}))},t}(u)).prototype,"Man",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=R))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/ScaleLoop.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,n,a,o,c,l,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Tween,l=e.tween,s=e.v3,u=e.Component}],execute:function(){var p,f,g,h,S;a._RF.push({},"246fenS1MtHwp4bZ/jx74nP","ScaleLoop",void 0);var y=o.ccclass,b=o.property;e("default",y("ScaleLoop")((g=t((f=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"originScale",g,n(t)),i(t,"targetScale",h,n(t)),i(t,"scaleDuration",S,n(t)),t}return r(t,e),t.prototype.start=function(){c.stopAllByTarget(this.node),l(this.node).to(this.scaleDuration,{scale:s(this.targetScale,this.targetScale,0)}).to(.2,{scale:s(this.originScale,this.originScale,0)}).union().repeatForever().start()},t}(u)).prototype,"originScale",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=t(f.prototype,"targetScale",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.1}}),S=t(f.prototype,"scaleDuration",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),p=f))||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/ScaleTween.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,o,c,r,a;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,c=e.tween,r=e.Vec3,a=e.Component}],execute:function(){var s;n._RF.push({},"d59030Cq+lEjK/1xsiW78N2","ScaleTween",void 0);var i=o.ccclass;o.property,e("ScaleTween",i("ScaleTween")(s=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(t=e.call.apply(e,[this].concat(o))||this).t=void 0,t}t(n,e);var o=n.prototype;return o.onEnable=function(){var e=this,t=c(this.node.getScale()).to(.5,new r(1.2,1.2,1.2),{onUpdate:function(t){e.node.setScale(t)}}).to(.5,new r(1,1,1),{onUpdate:function(t){e.node.setScale(t)}}).union();this.t=t.repeatForever().start()},o.onDisable=function(){this.t.stop(),this.node.scale=new r(1,1,1)},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/SceneToJson.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,n,r,s,i,a,c,l,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,s=e.createClass},function(e){i=e.cclegacy,a=e._decorator,c=e.Node,l=e.CCFloat,u=e.Component}],execute:function(){var p,g,y,h,d,f,S;i._RF.push({},"73f58mADKtF5pdX9/OYIbTM","SceneToJson",void 0);var v=a.ccclass,T=a.property,J=a.menu;e("SceneToJson",(p=v("SceneToJson"),g=J("Tool/SceneToJson"),y=T({type:c,visible:!0,displayName:"读取节点"}),h=T({type:l,visible:!0,displayName:"随便修改一下值读取"}),p(d=g((S=t((f=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),i=0;i<o;i++)s[i]=arguments[i];return t=e.call.apply(e,[this].concat(s))||this,n(t,"stage",S,r(t)),t._value=0,t}o(t,e);var i=t.prototype;return i.readScene=function(){for(var e=[],t=0;t<this.stage.children.length;t++){var o=this.stage.children[t],n={name:o.name,pos:this.V3ToJson(o.getPosition()),rot:this.QuatToJson(o.getRotation()),sca:this.V3ToJson(o.getScale())};e.push(n)}Editor.Message.send("asset-db","create-asset","db://assets/sceneJson.json",JSON.stringify(e))},i.V3ToJson=function(e){return{x:e.x.toString(),y:e.y.toString(),z:e.z.toString()}},i.QuatToJson=function(e){return{x:e.x.toString(),y:e.y.toString(),z:e.z.toString(),w:e.w.toString()}},s(t,[{key:"value",get:function(){return this._value},set:function(e){this.readScene()}}]),t}(u)).prototype,"stage",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),t(f.prototype,"value",[h],Object.getOwnPropertyDescriptor(f.prototype,"value"),f.prototype),d=f))||d)||d));i._RF.pop()}}}));

System.register("chunks:///_virtual/ScrollUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts"],(function(t){"use strict";var n,e,r,i,o,a,c,l,s,u,f,h,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,c=t.Node,l=t.Component,s=t.instantiate,u=t.v3,f=t.Sprite},function(t){h=t.default},function(t){p=t.default}],execute:function(){var d,v,g,m,A,y,I;o._RF.push({},"031b7VcdSJJzpl/U/4pTZPt","ScrollUI",void 0);var C=a.ccclass,b=a.property;t("default",(d=C("ScrollUI"),v=b(c),g=b(c),d((y=n((A=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n=t.call.apply(t,[this].concat(o))||this,r(n,"item",y,i(n)),r(n,"content",I,i(n)),n.myNavArr=[],n.fingerArr=[],n.hotArr=[],n}e(n,t);var o=n.prototype;return o.onEnable=function(){this.myNavArr=[].concat(h.instance.navDataArr);for(var t=[],n=[],e=0;e<h.instance.navDataArr.length;e++)t.push(e),n.push(e);this.hotArr=this.getRandomItemInArrWithoutSelf(-1,t,6),this.fingerArr=this.getRandomItemInArrWithoutSelf(-1,n,6),this._init()},o.onDisable=function(){this.unscheduleAllCallbacks(),this.content.destroyAllChildren()},o._init=function(){for(var t=this,n=function(n){var e=s(t.item);e.active=!0,e.setPosition(u(0,0,0)),t.content.addChild(e);var r=e.getChildByName("icon").getComponent(f),i=e.getChildByName("finger"),o=e.getChildByName("hot");i.active=-1!=t.fingerArr.indexOf(n),o.active=-1!=t.hotArr.indexOf(n),h.instance.loadImgByUrl(r,t.myNavArr[n].icon),e.on(c.EventType.TOUCH_END,(function(e){t.navCB(n)}),t)},e=0;e<this.myNavArr.length;e++)n(e)},o.navCB=function(t){console.log("click id:",t),h.instance.NavigateApp(t,(function(){p.Instance.NewWuchu&&h.instance.dataConfig.front_quxiao_switch&&p.Instance.clickFinishMoreGame()}),(function(){}))},o.shuffleArr=function(t){for(var n=t.length;n;){var e=Math.floor(Math.random()*n--),r=[t[n],t[e]];t[e]=r[0],t[n]=r[1]}return t},o.getRandomItemInArrWithoutSelf=function(t,n,e){void 0===e&&(e=1);var r=[].concat(n);return r.splice(r.indexOf(t),1),(r=this.shuffleArr(r)).slice(0,e)},n}(l)).prototype,"item",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(A.prototype,"content",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=A))||m));o._RF.pop()}}}));

System.register("chunks:///_virtual/Selector.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./behavior-selector.ts"],(function(t){"use strict";var e,c,n,r;return{setters:[function(t){e=t.inheritsLoose},function(t){c=t.cclegacy},null,function(t){n=t.ccclass},function(t){r=t.BehaviorSelector}],execute:function(){var o;c._RF.push({},"8a33895bcRHv7EVmZOdpDNK","Selector",void 0);t("Selector",n("bt.Selector")(o=function(t){function c(){return t.apply(this,arguments)||this}return e(c,t),c}(r))||o);c._RF.pop()}}}));

System.register("chunks:///_virtual/SelectUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./AssetMgr.ts","./EventMgr.ts","./StorageMgr.ts","./Platform.ts","./UMTrack.ts","./Tool.ts"],(function(t){"use strict";var n,e,i,a,s,o,c,r,l,h,d,u;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,i=t._decorator,a=t.Component},function(t){s=t.DinasorType,o=t.EventType},function(t){c=t.AssetMgr},function(t){r=t.EventMgr},function(t){l=t.default},function(t){h=t.default},function(t){d=t.UMTrack},function(t){u=t.default}],execute:function(){var v;e._RF.push({},"d62eeG5RjNHeocDIclY4ADe","SelectUI",void 0);var y=i.ccclass;i.property,t("SelectUI",y("SelectUI")(v=function(t){function e(){for(var n,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return(n=t.call.apply(t,[this].concat(i))||this).btn1=void 0,n.btn2=void 0,n.btn3=void 0,n.btn4=void 0,n.btn5=void 0,n.btn6=void 0,n.teachHand=void 0,n}n(e,t);var i=e.prototype;return i.onLoad=function(){var t=this.node.getChildByName("Layout");this.btn1=t.getChildByName("dinasor_1"),this.btn2=t.getChildByName("dinasor_2"),this.btn3=t.getChildByName("dinasor_3"),this.btn4=t.getChildByName("dinasor_4"),this.btn6=t.getChildByName("dinasor_6"),this.updateUI()},i.updateUI=function(){0==l.instance.storageData.playCount?(this.btn2.getChildByName("lock").active=!1,this.btn3.getChildByName("lock").active=!1,this.btn4.getChildByName("lock").active=!1,this.btn6.getChildByName("lock").active=!1):(this.btn2.getChildByName("lock").active=1!=l.instance.storageData.hasDinosaur[s.Dinasor2],this.btn3.getChildByName("lock").active=1!=l.instance.storageData.hasDinosaur[s.Dinasor3],this.btn4.getChildByName("lock").active=1!=l.instance.storageData.hasDinosaur[s.Dinasor4],this.btn6.getChildByName("lock").active=1!=l.instance.storageData.hasDinosaur[s.Dinasor6])},i.checkLoadDinasor=function(){},i.start=function(){u.d2_AddClickEvent(this.btn1,this,this.onClick1),u.d2_AddClickEvent(this.btn2,this,this.onClick2),u.d2_AddClickEvent(this.btn3,this,this.onClick3),u.d2_AddClickEvent(this.btn4,this,this.onClick4),u.d2_AddClickEvent(this.btn6,this,this.onClick6)},i.onEnable=function(){if(0==l.instance.storageData.playCount){this.teachHand||(this.teachHand=this.node.parent.getChildByName("teachHand")),this.btn1.active=!0,this.btn2.active=!1,this.btn3.active=!1,this.btn4.active=!1,this.btn6.active=!1;var t=this.btn1.getPosition();t.y-=250,this.teachHand.children[0].setPosition(t)}},i.onClick1=function(){c.instance.isDinasor1Bundle?(0==l.instance.storageData.playCount&&r.event(o.Game_Teach_Add),r.event(o.Game_Player_Select,0)):h.instance.showToast("该恐龙正在赶往战场")},i.onClick2=function(){c.instance.isDinasor2Bundle?1==l.instance.storageData.hasDinosaur[s.Dinasor2]?r.event(o.Game_Player_Select,1):h.instance.showVideo((function(){d.instance.trackEvent("Game_TryOn"),r.event(o.Game_Player_Select,1)}),(function(){})):h.instance.showToast("该恐龙正在赶往战场")},i.onClick3=function(){c.instance.isDinasor3Bundle?1==l.instance.storageData.hasDinosaur[s.Dinasor3]?r.event(o.Game_Player_Select,2):h.instance.showVideo((function(){d.instance.trackEvent("Game_TryOn"),r.event(o.Game_Player_Select,2)}),(function(){})):h.instance.showToast("该恐龙正在赶往战场")},i.onClick4=function(){if(!c.instance.isDinasor4Bundle)return r.event(o.Game_Teach_Add),void h.instance.showToast("该恐龙正在赶往战场");1==l.instance.storageData.hasDinosaur[s.Dinasor4]?r.event(o.Game_Player_Select,3):h.instance.showVideo((function(){d.instance.trackEvent("Game_TryOn"),r.event(o.Game_Player_Select,3),l.instance.dinasorVideoCountAdd(s.Dinasor4)}),(function(){}))},i.onClick6=function(){c.instance.isDinasor6Bundle?1==l.instance.storageData.hasDinosaur[s.Dinasor5]?r.event(o.Game_Player_Select,5):h.instance.showVideo((function(){d.instance.trackEvent("Game_TryOn"),r.event(o.Game_Player_Select,5),l.instance.dinasorVideoCountAdd(s.Dinasor6)}),(function(){})):h.instance.showToast("该恐龙正在赶往战场")},e}(a))||v);e._RF.pop()}}}));

System.register("chunks:///_virtual/Sequence.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./behavior-sequence.ts"],(function(e){"use strict";var n,t,c,u;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy},null,function(e){c=e.ccclass},function(e){u=e.BehaviorSequence}],execute:function(){var s;t._RF.push({},"7c895CfOwBCgKYk2gJEdRCX","Sequence",void 0);e("Sequence",c("bt.Sequence")(s=function(e){function t(){return e.apply(this,arguments)||this}return n(t,e),t}(u))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/Service.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./behavior-service.ts"],(function(e){"use strict";var t,c,i,n;return{setters:[function(e){t=e.inheritsLoose},function(e){c=e.cclegacy},null,function(e){i=e.ccclass},function(e){n=e.BehaviorService}],execute:function(){var r;c._RF.push({},"c1106os1qVMUp8XmuX12d+2","Service",void 0);e("Service",i("bt.Service")(r=function(e){function c(){return e.apply(this,arguments)||this}return t(c,e),c}(n))||r);c._RF.pop()}}}));

System.register("chunks:///_virtual/shared-array.ts",["./rollupPluginModLoBabelHelpers.js","cc","./shared-variable.ts"],(function(e){"use strict";var t,r,n,s;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass},function(e){n=e.cclegacy},function(e){s=e.SharedVariable}],execute:function(){n._RF.push({},"25976bKN55PnZEWYSjHLNFM","shared-array",void 0);e("SharedArray",function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),r(n,[{key:"value",get:function(){return this.getValue()},set:function(e){this.setValue(e)}}]),n}(s));n._RF.pop()}}}));

System.register("chunks:///_virtual/shared-boolean.ts",["./rollupPluginModLoBabelHelpers.js","cc","./shared-variable.ts"],(function(e){"use strict";var t,n,r,a,s;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){r=e.cclegacy,a=e._decorator},function(e){s=e.SharedVariable}],execute:function(){var o;r._RF.push({},"bd58fP6ZdhF54nwzSGsS9It","shared-boolean",void 0);var u=a.ccclass;e("SharedBoolean",u("bt.SharedBoolean")(o=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),n(r,[{key:"value",get:function(){return this.getValue()},set:function(e){this.setValue(e)}}]),r}(s))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/shared-custom.ts",["./rollupPluginModLoBabelHelpers.js","cc","./shared-variable.ts"],(function(t){"use strict";var e,s,u,n;return{setters:[function(t){e=t.inheritsLoose,s=t.createClass},function(t){u=t.cclegacy},function(t){n=t.SharedVariable}],execute:function(){u._RF.push({},"26f03Cv4M9NEY02tvVyaFMW","shared-custom",void 0);t("SharedCustom",function(t){function u(){return t.apply(this,arguments)||this}return e(u,t),s(u,[{key:"value",get:function(){return this.getValue()},set:function(t){this.setValue(t)}}]),u}(n));u._RF.pop()}}}));

System.register("chunks:///_virtual/shared-node.ts",["./rollupPluginModLoBabelHelpers.js","cc","./shared-variable.ts"],(function(e){"use strict";var t,r,n,s,a;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass},function(e){n=e.cclegacy,s=e._decorator},function(e){a=e.SharedVariable}],execute:function(){var o;n._RF.push({},"15057KvK3JE3objFh0DjTT8","shared-node",void 0);var u=s.ccclass;e("SharedNode",u("bt.SharedNode")(o=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),r(n,[{key:"value",get:function(){return this.getValue()},set:function(e){this.setValue(e)}}]),n}(a))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/shared-number.ts",["./rollupPluginModLoBabelHelpers.js","cc","./shared-variable.ts"],(function(e){"use strict";var t,r,n,s,u;return{setters:[function(e){t=e.inheritsLoose,r=e.createClass},function(e){n=e.cclegacy,s=e._decorator},function(e){u=e.SharedVariable}],execute:function(){var a;n._RF.push({},"affcexAdSJPkqj/VgDzFAUX","shared-number",void 0);var c=s.ccclass;e("SharedNumber",c("bt.SharedNumber")(a=function(e){function n(){return e.apply(this,arguments)||this}return t(n,e),r(n,[{key:"value",get:function(){return this.getValue()},set:function(e){this.setValue(e)}}]),n}(u))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/shared-string.ts",["./rollupPluginModLoBabelHelpers.js","cc","./shared-variable.ts"],(function(t){"use strict";var e,r,n,s,i;return{setters:[function(t){e=t.inheritsLoose,r=t.createClass},function(t){n=t.cclegacy,s=t._decorator},function(t){i=t.SharedVariable}],execute:function(){var a;n._RF.push({},"a5dd5r6IwZOA6RWiqcq8wRW","shared-string",void 0);var c=s.ccclass;t("SharedString",c("bt.SharedString")(a=function(t){function n(){return t.apply(this,arguments)||this}return e(n,t),r(n,[{key:"value",get:function(){return this.getValue()},set:function(t){this.setValue(t)}}]),n}(i))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/shared-variable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./blackboard-declaration.ts"],(function(t){"use strict";var i,e,a;return{setters:[function(t){i=t.createClass},function(t){e=t.cclegacy},function(t){a=t.ENotifyObserver}],execute:function(){e._RF.push({},"58b35orH25PP4LLmCV+MBD2","shared-variable",void 0);t("SharedVariable",function(){function t(t,i,e){this.name="",this.original=void 0,this._value=void 0,this.blackboard=null,this.blackboard=t,this.name=i,void 0!==e&&(this.value=e)}var e=t.prototype;return e.getValue=function(){return this._value},e.setValue=function(t){var i,e=this._value;this._value=t,void 0!==this.original&&null!=this.original||(this.original=t),null==(i=this.blackboard)||i.emit(a.OnValueChange,this,e)},e.reset=function(){this.value=this.original},e.toString=function(){return""+this.value},i(t,[{key:"value",get:function(){return this.getValue()},set:function(t){this.setValue(t)}}]),t}()),t("SharedDynamic",(function(){}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ShieldBuff.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolComp.ts"],(function(t){"use strict";var n,i,o,e,r;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,o=t._decorator,e=t.Animation},function(t){r=t.PoolComp}],execute:function(){var c;i._RF.push({},"a5df2+/tXtJfJ/be4zotBUD","ShieldBuff",void 0);var u=o.ccclass;o.property,t("ShieldBuff",u("ShieldBuff")(c=function(t){function i(){for(var n,i=arguments.length,o=new Array(i),e=0;e<i;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this).anim=void 0,n}n(i,t);var o=i.prototype;return o.firstBorn=function(){this.anim=this.node.getComponent(e)},o.clear=function(){},o.init=function(){this.node.active=!0,this.anim.play()},o.recyle=function(){this.node.active=!1},i}(r))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/SkillBtn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CircleBar.ts"],(function(t){"use strict";var e,i,r,n,a,l,o,c,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,o=t.SpriteFrame,c=t.Sprite,s=t.Component},function(t){p=t.CircleBar}],execute:function(){var u,f,h,m,b,v,y;a._RF.push({},"d493cM4Gd5L/4aC/k8ltZDj","SkillBtn",void 0);var d=l.ccclass,k=l.property;t("SkillBtn",(u=d("SkillBtn"),f=k({type:o}),h=k({type:o}),u((v=e((b=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))||this).bar=void 0,r(e,"blackFrame",v,n(e)),r(e,"activeFrame",y,n(e)),e}i(e,t);var a=e.prototype;return a.onLoad=function(){this.bar=this.getComponent(p)},a.start=function(){this.updateSkillBtn(0)},a.updateSkillBtn=function(t){this.bar.value=t,this.getComponent(c).spriteFrame=0==t?this.activeFrame:this.blackFrame},e}(s)).prototype,"blackFrame",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=e(b.prototype,"activeFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=b))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/SoundMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){"use strict";var o,n,e,t,u,c,s,a,r;return{setters:[function(i){o=i.applyDecoratedDescriptor,n=i.inheritsLoose,e=i.initializerDefineProperty,t=i.assertThisInitialized},function(i){u=i.cclegacy,c=i._decorator,s=i.AudioClip,a=i.AudioSource,r=i.Component}],execute:function(){var h,d,p,l,S,g,y;u._RF.push({},"b0b1dbls6BHU7AFoanj1Trg","SoundMgr",void 0);var f=c.ccclass,m=c.property,v=c.menu;c.requireComponent,i("SoundMgr",(h=f("SoundMgr"),d=v("Mgr/SoundMgr"),p=m({type:[s]}),h(l=d(((y=function(i){function o(){for(var o,n=arguments.length,u=new Array(n),c=0;c<n;c++)u[c]=arguments[c];return o=i.call.apply(i,[this].concat(u))||this,e(o,"clips",g,t(o)),o.auidoSource=void 0,o.machineSource=void 0,o.chargeSource=void 0,o.hasPlayingSound=[],o}n(o,i);var u=o.prototype;return u.onLoad=function(){o.instacne=this,this.auidoSource=this.node.getComponent(a),this.machineSource=this.node.getChildByName("machineGun").getComponent(a),this.chargeSource=this.node.getChildByName("charge").getComponent(a),this.auidoSource||(this.auidoSource=this.node.addComponent(a))},u.playSound=function(i,o){var n=this;if(void 0===o&&(o=1),-1==this.hasPlayingSound.indexOf(i)){this.hasPlayingSound.push(i),this.auidoSource.playOneShot(this.clips[i],o);var e=.25*this.clips[i].getDuration();this.scheduleOnce((function(){n.hasPlayingSound.splice(n.hasPlayingSound.indexOf(i),1)}),e)}},u.playSoundNoLimted=function(i,o){if(void 0===o&&(o=1),-1==this.hasPlayingSound.indexOf(i)){this.auidoSource.playOneShot(this.clips[i],o);this.clips[i].getDuration()}},u.playMusic=function(i){this.auidoSource.clip.name!=this.clips[i].name&&(this.auidoSource.stop(),this.auidoSource.clip=this.clips[i],this.auidoSource.play())},u.setMuiscVolume=function(i){this.auidoSource.volume=i},u.stopMusic=function(){this.auidoSource.stop()},u.playMachineGunSound=function(){this.machineSource.play()},u.stopMachineGunSound=function(){this.machineSource.stop()},u.playChargeSound=function(){this.chargeSource.play()},u.stopChargeSound=function(){this.chargeSource.stop()},o}(r)).instacne=void 0,g=o((S=y).prototype,"clips",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=S))||l)||l));u._RF.pop()}}}));

System.register("chunks:///_virtual/SpeedBuff.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolComp.ts"],(function(t){"use strict";var e,n,o,c,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,c=t.ParticleSystem},function(t){i=t.PoolComp}],execute:function(){var r;n._RF.push({},"eac47u6tlFDjLtIicFzwndb","SpeedBuff",void 0);var f=o.ccclass;o.property,t("SpeedBuff",f("SpeedBuff")(r=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))||this).effect=void 0,e}e(n,t);var o=n.prototype;return o.firstBorn=function(){this.effect=this.node.children[0].getComponent(c)},o.clear=function(){},o.init=function(){this.node.active=!0,this.effect.play()},o.recyle=function(){this.node.active=!1,this.effect.stop()},n}(i))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/SphereController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,n,r,i,s;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,r=e.Vec3,i=e.tween,s=e.Component}],execute:function(){var c;o._RF.push({},"657c3fUNq5HCJcQBKCjO//j","SphereController",void 0);var u=n.ccclass;n.property,e("SphereController",u("SphereController")(c=function(e){function o(){return e.apply(this,arguments)||this}return t(o,e),o.prototype.onLoad=function(){var e=this,t=this.node.position,o=new r(t.x,7,t.z),n=new r(t.x,1.25,t.z);i(this.node).to(1,{position:n},{easing:"quartIn"}).call((function(){e.node.emit("setImpulse")})).to(1,{position:o},{easing:"quadOut"}).union().repeatForever().start()},o}(s))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/StartBoxUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomAdMgr.ts","./JJMgr.ts","./JJWxTrap.ts","./WxPlatform.ts","./WxPlatformBannerAd.ts"],(function(t){"use strict";var i,n,e,o,s,r,a,c,u,h,l,d,f,p,m,g,_;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.Node,c=t.ProgressBar,u=t.Quat,h=t.Tween,l=t.tween,d=t.Component},function(t){f=t.default},function(t){p=t.default},function(t){m=t.default},function(t){g=t.default},function(t){_=t.default}],execute:function(){var C,b,B,x,k,v,w;s._RF.push({},"b0157ssWNtAxaIU6RwO1Rvo","StartBoxUI",void 0);var I=r.ccclass,T=r.property;t("default",(C=I("StartBoxUI"),b=T(a),B=T(c),C((v=i((k=function(t){function i(){for(var i,n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,e(i,"box",v,o(i)),e(i,"pBar",w,o(i)),i.ccb=null,i.showCallback=null,i.hadShowBanner=!1,i.preTime=0,i.rateTime=0,i.minclicknum=void 0,i.maxclicknum=void 0,i.needClick=void 0,i.isforce=!1,i.addProgerss=void 0,i.repeatCount=0,i.isRepeat=void 0,i.clickCount=0,i.lianxu_num=void 0,i.quat1=new u,i.quat2=new u,i.quat3=new u,i}n(i,t);var s=i.prototype;return s.onDisable=function(){var t=this;this.unscheduleAllCallbacks(),f.instance.hideGrid(),_.Instance.hideBannerFun(!0),this.repeatCount>0?m.Instance.com.scheduleOnce((function(){t.showUI(t.isRepeat,t.lianxu_num,t.ccb),t.repeatCount--}),.1):this.ccb&&this.ccb()},s.showUI=function(t,i,n){this.clickCount=0,this.lianxu_num=i,this.isRepeat=t,t&&this.repeatCount<=0&&(this.repeatCount=i),this.minclicknum=Number(p.instance.dataConfig.front_box_clicks[0]),this.maxclicknum=Number(p.instance.dataConfig.front_box_clicks[1]),this.needClick=p.instance.GetRandom(this.minclicknum,this.maxclicknum-p.instance.dataConfig.front_progress_bar_reduce),this.isforce=p.instance.dataConfig.front_is_box_force,this.addProgerss=1/this.maxclicknum,console.log("this.needClick:",this.needClick),console.log("this.addProgerss:",this.addProgerss),this.ccb=n,this.node.active=!0,this.hadShowBanner=!1,this.pBar.progress=0,this.rateTime=0,this.preTime=0,this.schedule(this.DecBar),g.instance.showBanner()},s.closeCB=function(){this.node.active=!1},s.clickCB=function(){var t=this;if(this.clickCount++,this.pBar.progress+=this.addProgerss,this.pBar.progress>1&&(this.pBar.progress=1),this.shakeBox(),!this.hadShowBanner){this.isforce=p.instance.dataConfig.front_is_box_force;var i=p.instance.dataConfig.front_box_hide_time/1e3,n=function(){t.hadShowBanner=!0,t.scheduleOnce((function(){f.instance.getIsShow()||(t.repeatCount=0),f.instance.hideGrid(),t.closeCB()}),i),f.instance.showGrid()},e=this.rateTime-this.preTime,o=p.instance.dataConfig.front_box_sulv_qujian,s=this.getRandomItemInArr(o).split("|"),r=s[0],a=s[1];if(100*this.pBar.progress>=p.instance.dataConfig.front_box_sulv_start&&parseFloat(r)<=e&&e<=parseFloat(a))return console.log("宝箱触发频率：",e),p.instance.dataConfig.front_sulv_wuchu_switch&&(this.isforce=!0,i=p.instance.dataConfig.front_fbox_hide_time/1e3),void n();if(this.preTime=this.rateTime,this.pBar.progress>=this.needClick*this.addProgerss&&!this.hadShowBanner)return console.log("宝箱触发进度"),void n();this.clickCount>=p.instance.dataConfig.front_box_click_count&&(console.log("点击次数",this.clickCount),this.clickCount=0,n())}},s.shakeBox=function(){h.stopAllByTarget(this.box),u.fromEuler(this.quat1,0,0,-10),u.fromEuler(this.quat2,0,0,10),u.fromEuler(this.quat3,0,0,0),l(this.box).to(.1,{rotation:this.quat1}).to(.2,{rotation:this.quat2}).to(.1,{rotation:this.quat3}).start()},s.DecBar=function(){this.pBar.progress-=p.instance.dataConfig.front_progress_bar_return,this.pBar.progress<0&&(this.pBar.progress=0)},s.update=function(t){this.rateTime+=t},s.GetRandom=function(t,i,n){void 0===n&&(n=!0);var e=i-t,o=Math.random()*e;return o+=t,n?Math.floor(o):o},s.getRandomItemInArr=function(t){return t[Math.floor(Math.random()*t.length)]},i}(d)).prototype,"box",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(k.prototype,"pBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=k))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/StateController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,a,n,r,u,s,l,c,_,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){n=e.cclegacy,r=e._decorator,u=e.AudioClip,s=e.Animation,l=e.AudioSource,c=e.game,_=e.randomRangeInt,h=e.Component}],execute:function(){var d,S,m,I,p,f,A,g,E,b,y,L,M,O;n._RF.push({},"d41cfxJDflJ6pMNnUJOfdPw","StateController",void 0);var F=r.ccclass,R=r.property;e("StateController",(d=F("StateController"),S=R(u),m=R(u),I=R(u),p=R(u),f=R([u]),d(((O=function(e){function t(){for(var i,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return i=e.call.apply(e,[this].concat(r))||this,o(i,"shootSound",E,a(i)),o(i,"walkSound",b,a(i)),o(i,"aimInSound",y,a(i)),o(i,"reloadSound",L,a(i)),o(i,"casingSounds",M,a(i)),i._state=t.IDLE,i._values={},i._animFinshed=!1,i._animation=null,i._audioSource=null,i}i(t,e);var n=t.prototype;return n.onLoad=function(){var e,t=this;this._animation=this.getComponent(s),null==(e=this._animation)||e.on(s.EventType.FINISHED,(function(){t._animFinshed=!0})),this._audioSource=this.getComponent(l),c.on("__playCasingSound",this._onPlayCasing,this)},n.onDestroy=function(){c.off("__playCasingSound",this._onPlayCasing,this)},n._onPlayCasing=function(){if(this._audioSource){var e=_(0,this.casingSounds.length-1);this._audioSource.playOneShot(this.casingSounds[e])}},n.getState=function(){return this._state},n.setState=function(e,i,o){if(void 0===i&&(i=!1),(this._state!==e||i)&&(this._state=e,this._animation&&(this._animation.crossFade(e,o),this._animFinshed=!1),this._audioSource))switch(e){case t.WALK:this._audioSource.clip=this.walkSound,this._audioSource.loop=!0,this._audioSource.play();break;case t.IDLE:this._audioSource.stop();break;case t.AIM_FIRE:case t.FIRE:this.shootSound&&this._audioSource.playOneShot(this.shootSound);break;case t.AIM_IN:this.aimInSound&&this._audioSource.playOneShot(this.aimInSound);break;case t.RELOAD_OUTOF_AMMO:this.reloadSound&&this._audioSource.playOneShot(this.reloadSound)}},n.getValue=function(e){return this._values[e]},n.setValue=function(e,t){this._values[e]=t},n.update=function(){var e=this._state,i=this._values;switch(e){case t.IDLE:i.mouseLeft?e=t.FIRE:i.mouseRight?e=t.AIM_IN:i.moveSpeed>.2&&(e=t.WALK);break;case t.WALK:i.mouseRight?e=t.AIM_IN:i.moveSpeed<=.2&&(e=t.IDLE);break;case t.AIM_IN:i.mouseRight?i.mouseLeft&&(e=t.AIM_FIRE):e=t.AIM_OUT;break;case t.AIM_OUT:e=i.moveSpeed>.2?t.WALK:t.IDLE;break;case t.FIRE:i.mouseLeft||(e=t.IDLE);break;case t.AIM_FIRE:i.mouseLeft||(e=i.mouseRight?t.AIM_FIRE_POSE:t.IDLE);break;case t.AIM_FIRE_POSE:i.mouseRight||(e=t.AIM_OUT);break;case t.RELOAD_OUTOF_AMMO:this._animFinshed&&(e=t.IDLE)}this.setState(e)},t}(h)).AIM_IN="Armature|aim_in",O.AIM_OUT="Armature|aim_out",O.AIM_FIRE="Armature|aim_fire",O.AIM_FIRE_POSE="Armature|aim_fire_pose",O.IDLE="Armature|idle",O.WALK="Armature|walk",O.FIRE="Armature|fire",O.RELOAD_OUTOF_AMMO="Armature|reload_out_of_ammo",E=t((g=O).prototype,"shootSound",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(g.prototype,"walkSound",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(g.prototype,"aimInSound",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(g.prototype,"reloadSound",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(g.prototype,"casingSounds",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=g))||A));n._RF.pop()}}}));

System.register("chunks:///_virtual/StorageData.ts",["cc"],(function(t){"use strict";var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"f5046Umw/JJcbMzFTAf5pk3","StorageData",void 0);t("StorageData",(function(){this.playCount=0,this.gameVersion="0.9.3",this.gold=0,this.hasDinosaur=[1,0,0,0,0,0],this.hasDinosaurVideoCount=[0,0,0,0,0,0],this.rankPoint=0}));s._RF.pop()}}}));

System.register("chunks:///_virtual/StorageMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./StorageData.ts"],(function(t){"use strict";var a,o,e,r,s;return{setters:[function(t){a=t.inheritsLoose},function(t){o=t.cclegacy,e=t._decorator,r=t.Component},function(t){s=t.StorageData}],execute:function(){var i,n;o._RF.push({},"6ea42h4lndLC588kDBinVo+","StorageMgr",void 0);var g=e.ccclass;e.property,e.menu,t("default",g("StorageMgr")(((n=function(t){function o(){for(var a,o=arguments.length,e=new Array(o),r=0;r<o;r++)e[r]=arguments[r];return(a=t.call.apply(t,[this].concat(e))||this).storageData=new s,a.storageName=new s,a}a(o,t);var e=o.prototype;return e.onLoad=function(){if(o.instance=this,this.init(),null==this.storageData.gameVersion||this.storageData.gameVersion!=(new s).gameVersion)for(var t in console.log("清理存档"),localStorage.clear(),this.storageData=new s,this.storageName=new s,this.storageData)this.writeStorage(t,this.storageName[t]),console.log("初始化缓存数据",t,this.storageName[t]),this.storageName[t]=t},e.init=function(){for(var t in this.storageData){var a=this.readStorage(t);a?(this.storageData[t]=JSON.parse(a),console.log("加载缓存数据",t,this.storageData[t])):(this.writeStorage(t,this.storageName[t]),console.log("初始化缓存数据",t,this.storageName[t])),this.storageName[t]=t}},e.writeStorage=function(t,a){localStorage.setItem(t,JSON.stringify(a)),this.storageData[t]=a},e.readStorage=function(t){return localStorage.getItem(t)},e.removeStorage=function(t){localStorage.removeItem(t)},e.SaveAllStorge=function(){for(var t in this.storageData)this.writeStorage(t,this.storageData[t])},e.changeGold=function(t){var a=this.storageData.gold;a+=t,this.writeStorage("gold",a)},e.unlockDinasor=function(t){this.storageData.hasDinosaur[t]=1,this.writeStorage("hasDinosaur",this.storageData.hasDinosaur)},e.dinasorVideoCountAdd=function(t){this.storageData.hasDinosaurVideoCount[t]++,this.writeStorage("hasDinosaurVideoCount",this.storageData.hasDinosaurVideoCount)},e.changeRank=function(t){var a=this.storageData.rankPoint;(a+=t)>=1750&&(a=1749),this.writeStorage("rankPoint",a)},e.addPlayCount=function(){var t=this.storageData.playCount;t++,this.writeStorage("playCount",t)},o}(r)).instance=void 0,i=n))||i);o._RF.pop()}}}));

System.register("chunks:///_virtual/SwitchMat.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,n,r,i,o,s,c,l,p,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty,n=t.inheritsLoose,r=t.assertThisInitialized,i=t.createClass},function(t){o=t.cclegacy,s=t._decorator,c=t.MeshRenderer,l=t.CCFloat,p=t.Material,u=t.Component}],execute:function(){var h,f,g,y,d,m,b,M,v,D,w,C,B,I,z,_;o._RF.push({},"6c0a7BePH5M+L1b3LMe265D","SwitchMat",void 0);var L=s.ccclass,P=s.property,S=t("matData",(h=L("matData"),f=P({displayName:"name"}),g=P({type:[c],displayName:"renders"}),h((m=e((d=function(){a(this,"name",m,this),a(this,"renders",b,this)}).prototype,"name",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=e(d.prototype,"renders",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=d))||y));t("SwitchMat",(M=L("SwitchMat"),v=P({type:l,visible:!0,displayName:"更新材质"}),D=P({type:l,visible:!0,displayName:"获取子节点信息"}),w=P(p),C=P([S]),M((e((I=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this)._changeMatButton=0,a(e,"baseMat",z,r(e)),a(e,"matDatas",_,r(e)),e}n(e,t);var o=e.prototype;return o.onLoad=function(){},o.getInfo=function(){var t=this.node.children;this.matDatas=[];for(var e=0;e<t.length;e++){console.log(e);var a=new S;a.name=t[e].name,a.renders=t[e].getComponentsInChildren(c),this.matDatas.push(a)}},o.changeMat=function(){this.node.children;var t,e=this.baseMat.passes[1].getHandle("baseColorMap");this.baseMat.passes[1].getUniform(e,t),console.log(t);for(var a=0;a<this.matDatas.length;a++);},i(e,[{key:"changeMatButton",get:function(){return 0},set:function(t){this._changeMatButton=0,this.changeMat()}},{key:"getChildInfo",get:function(){return 0},set:function(t){this.getInfo()}}]),e}(u)).prototype,"changeMatButton",[v],Object.getOwnPropertyDescriptor(I.prototype,"changeMatButton"),I.prototype),e(I.prototype,"getChildInfo",[D],Object.getOwnPropertyDescriptor(I.prototype,"getChildInfo"),I.prototype),z=e(I.prototype,"baseMat",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(I.prototype,"matDatas",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=I))||B));o._RF.pop()}}}));

System.register("chunks:///_virtual/Task.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./behavior-task.ts"],(function(t){"use strict";var s,n,e,c,i;return{setters:[function(t){s=t.inheritsLoose},function(t){n=t.cclegacy},null,function(t){e=t.ccclass,c=t.delegate},function(t){i=t.BehaviorTask}],execute:function(){var r;n._RF.push({},"917dc/B4bBArq1QrBFaQ6gk","Task",void 0);t("Task",e("bt.Task")(r=c()(r=function(t){function n(){return t.apply(this,arguments)||this}return s(n,t),n}(i))||r)||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/Test.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,n,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,r=t.director,c=t.Component}],execute:function(){var s;o._RF.push({},"3df2f/RLuhEZpkoNfdN9c9W","Test",void 0);var u=n.ccclass;n.property,t("Test",u("Test")(s=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var n=o.prototype;return n.start=function(){},n.update=function(t){},n.goLoad=function(){r.loadScene("Load")},o}(c))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/TestCondition.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main.ts","./property.ts","./shared-number.ts","./shared-node.ts","./Conditional.ts"],(function(t){"use strict";var n,e,i,r,o,u,a,l,c;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy},null,function(t){u=t.property},function(t){a=t.SharedNumber},function(t){l=t.SharedNode},function(t){c=t.Conditional}],execute:function(){var s,p,d,f,y;o._RF.push({},"bdb14ZbxzRA7qS7Pg3O51rm","TestCondition",void 0);t("TestCondition",(s=u({type:a}),p=u({type:l}),f=n((d=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];return n=t.call.apply(t,[this].concat(o))||this,i(n,"count",f,r(n)),i(n,"target",y,r(n)),n}return e(n,t),n.prototype.load=function(){},n}(c)).prototype,"count",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(d.prototype,"target",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d));o._RF.pop()}}}));

System.register("chunks:///_virtual/TestDecorator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main.ts","./property.ts","./shared-number.ts","./shared-node.ts","./Decorator.ts"],(function(t){"use strict";var e,r,n,o,i,u,a,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy},null,function(t){u=t.property},function(t){a=t.SharedNumber},function(t){c=t.SharedNode},function(t){l=t.Decorator}],execute:function(){var s,p,f,y,h;i._RF.push({},"05febjgu/lCc46QCxo0tPhb","TestDecorator",void 0);t("TestDecorator",(s=u({type:a}),p=u({type:c}),y=e((f=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),u=0;u<r;u++)i[u]=arguments[u];return e=t.call.apply(t,[this].concat(i))||this,n(e,"count",y,o(e)),n(e,"target",h,o(e)),e}return r(e,t),e.prototype.load=function(){},e}(l)).prototype,"count",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=e(f.prototype,"target",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f));i._RF.pop()}}}));

System.register("chunks:///_virtual/TestService.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main.ts","./property.ts","./shared-number.ts","./shared-node.ts","./Service.ts"],(function(e){"use strict";var t,r,n,i,o,u,c,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy},null,function(e){u=e.property},function(e){c=e.SharedNumber},function(e){a=e.SharedNode},function(e){l=e.Service}],execute:function(){var s,p,f,y,d;o._RF.push({},"f45f3T5fCBHN4A89j+0tKIo","TestService",void 0);e("TestService",(s=u({type:c}),p=u({type:a}),y=t((f=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];return t=e.call.apply(e,[this].concat(o))||this,n(t,"count",y,i(t)),n(t,"target",d,i(t)),t}return r(t,e),t.prototype.load=function(){},t}(l)).prototype,"count",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(f.prototype,"target",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f));o._RF.pop()}}}));

System.register("chunks:///_virtual/TestTask.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main.ts","./property.ts","./shared-number.ts","./shared-node.ts","./Task.ts"],(function(e){"use strict";var t,r,n,i,a,o,u,l,s,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e.Node},null,function(e){u=e.property},function(e){l=e.SharedNumber},function(e){s=e.SharedNode},function(e){c=e.Task}],execute:function(){var p,f,d,y,b,h,g;a._RF.push({},"b8a95IvA3BKL7nNXvpCa2CL","TestTask",void 0);e("TestTask",(p=u({type:l}),f=u({type:s}),d=u(o),b=t((y=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"count",b,i(t)),n(t,"targetShared",h,i(t)),n(t,"target",g,i(t)),t}return r(t,e),t.prototype.load=function(){},t}(c)).prototype,"count",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(y.prototype,"targetShared",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"target",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y));a._RF.pop()}}}));

System.register("chunks:///_virtual/Tool.ts",["cc","./EnumTypes.ts","./SoundMgr.ts"],(function(n){"use strict";var e,r,t,o,c,a,i,l,u;return{setters:[function(n){e=n.cclegacy,r=n._decorator,t=n.Input,o=n.Vec2,c=n.Color,a=n.Vec3,i=n.tween},function(n){l=n.SoundType},function(n){u=n.SoundMgr}],execute:function(){var d;e._RF.push({},"3378deDU0pKDZeS1ht/W+jO","Tool",void 0);r.ccclass,r.property;var f=r.menu;n("default",f("Tool/Tool")(d=function(){function n(){}return n.d2_AddClickEvent=function(n,e,r,o,c,d){void 0===o&&(o=[]),void 0===c&&(c=!0),void 0===d&&(d=!0),n.targetOff(e);var f=.06,h=n.scale.x,s=.9*h,v=!1;n.on(t.EventType.TOUCH_START,(function(){v=!0,d&&i(n).to(f,{scale:new a(s,s,1)}).start()}),e);n.on(t.EventType.TOUCH_END,(function(){0!=v&&(v=!1,d?i(n).to(f,{scale:new a(h,h,1)}).call((function(){r&&r.call(e,o)})).start():r&&r.call(e,o),c&&u.instacne&&u.instacne.playSound(l.Button))}),e);n.on(t.EventType.TOUCH_CANCEL,(function(){0!=v&&(v=!1,d&&i(n).to(f,{scale:new a(h,h,1)}).start())}),e)},n.d3_FindNodeByName=function(n,e){var r=null;return function n(t){for(var o=0;o<t.children.length;o++){if(t.children[o].name==e)return void(r=t.children[o]);n(t.children[o])}}(n),r},n.d3_FindAllNodeByName=function(n,e){var r=[];return function n(t){for(var o=0;o<t.children.length;o++)t.children[o].name==e&&r.push(t.children[o]),n(t.children[o])}(n),r},n.d3_FindNodeHasName=function(n,e){var r=null;return function n(t){for(var o=0;o<t.children.length;o++){if(-1!=t.children[o].name.indexOf(e))return void(r=t.children[o]);n(t.children[o])}}(n),r},n.d3_FindAllNodeHasName=function(n,e){var r=[];return function n(t){for(var o=0;o<t.children.length;o++)-1!=t.children[o].name.indexOf(e)&&r.push(t.children[o]),n(t.children[o])}(n),r},n.unactiveAllChildren=function(n){for(var e=0;e<n.children.length;e++)n.children[e].active=!1},n.activeIndexInChildren=function(n,e){for(var r=0;r<n.children.length;r++)n.children[r].active=r==e},n.vector2Reduce=function(n,e){return new o(n.x-e.x,n.y-e.y)},n.getAngle2DWay=function(n,e){var r=o.dot(n,e),t=o.len(n)*o.len(e),c=180*Math.acos(r/t)/Math.PI,a=n.x*e.y-e.x*n.y;return a>0?c*=1:a<0?c*=-1:c=c,c},n.getRandomInArray=function(n){if(n.length){var e=Math.random()*n.length;return n[e=Math.floor(e)]}return console.error("传入错误参数,返回空"),null},n.getRandomByArray_Precent=function(n,e){if(n.length!=e.length)return console.log("长度不一致",n,e),null;for(var r=0,t=0;t<e.length;t++)r+=e[t];for(var o=0,c=Math.random(),a=0;a<e.length;a++)if(c<=(o+=e[a]/r))return n[a];return null},n.getPrecentFromWeight=function(n){for(var e=0,r=0;r<n.length;r++)e+=n[r];for(var t=0,o=[],c=0;c<n.length;c++)0==e?(o.push(1/n.length),console.log("比重传入全部都是0，返回平均数组")):(t=n[c]/e,o.push(t));return o},n.randomNumber=function(n,e){return n+(e-n)*Math.random()},n.randomInt=function(n,e){return Math.floor(n+(e+1-n)*Math.random())},n.halfPercent=function(){return Math.random()<.5},n.percent=function(n){return Math.random()<n},n.cloneArray=function(n){return[].concat(n)},n.d3_getRgbByHex=function(n){var e=[],r=[],t=n.replace(/#/,"");if(3==t.length){for(var o=[],a=0;a<3;a++)o.push(t.charAt(a)+t.charAt(a));t=o.join("")}for(a=0;a<3;a++)e[a]="0x"+t.substr(2*a,2),r.push(parseInt(e[a]));return new c(r[0],r[1],r[2],255)},n.d3_getAngle=function(n,e){var r=a.dot(n,e),t=n.length()*e.length();if(0==t){if(n.z>e.z)return 0;if(n.z<e.z)return 180;if(n.y>e.y)return 90;if(n.y<e.y)return-90}var o=r/t;return o<-1&&(o=-1),o>1&&(o=1),180*Math.acos(o)/Math.PI},n.d3_getProjection=function(n,e){var r=e.multiplyScalar(a.dot(n,e)),t=new a;return a.subtract(t,n,r),t},n.local_SaveData=function(n,e){Editor.Message.send("asset-db","create-asset","db://assets/"+n,e)},n}())||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/tools.ts",["cc"],(function(t){"use strict";var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){t({getClassCache:u,getSubDict:i,makeEditorClassDecoratorFn:function(t){return function(n){return function(r){c(r,t,n)}}},makeSmartClassDecorator:o,makeSmartEditorClassDecorator:function(t,n){return o((function(r,o){c(r,t,void 0!==n?n:o)}))}}),n._RF.push({},"69d4cf3GO1EUqdPUNbbQMV/","tools",void 0);var r=t("emptyDecorator",(function(){}));t("emptyDecoratorFn",(function(){return r})),t("emptySmartClassDecorator",o((function(){})));function o(t){return function(n){return"function"==typeof n?t(n):function(r){return t(r,n)}}}function c(t,n,r){var o=u(t);if(o){var c=i(o,"proto");i(c,"options")[n]=r}}var e=t("CACHE_KEY","__ccclassCache__");function u(t,n){return i(t,e)}function i(t,n){return t[n]||(t[n]={})}n._RF.pop()}}}));

System.register("chunks:///_virtual/TopState.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./GameData.ts","./EventMgr.ts"],(function(e){"use strict";var t,n,o,r,i,a,l,c,s,h;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,r=e.Label,i=e.instantiate,a=e.Vec3,l=e.Component},function(e){c=e.EventType},function(e){s=e.default},function(e){h=e.EventMgr}],execute:function(){var p;n._RF.push({},"fdd2fFnCAxAXa8qSBSgu+ZQ","TopState",void 0);var u=o.ccclass;o.property,e("TopState",u("TopState")(p=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).targetLabel=void 0,t.playerCount=void 0,t.enemyCount=void 0,t.playerScore=void 0,t.enemyScore=void 0,t}t(n,e);var o=n.prototype;return o.onLoad=function(){this.targetLabel=this.node.getChildByName("target").getComponentInChildren(r)},o.start=function(){h.on(c.TopState_Alive_Update,this,this.peopleCountUpdate),h.on(c.TopState_Score_Update,this,this.scoreUpdate),this.peopleCountInit(),this.scoreInit(),this.targetLabel.string="率先击杀"+s.killWinScore.toString()},o.peopleCountInit=function(){this.playerCount=this.node.getChildByName("PlayerCount"),this.enemyCount=this.node.getChildByName("EnemyCount");for(var e=1;e<s.players.length;e++){var t=i(this.playerCount.children[0]);this.playerCount.addChild(t)}for(var n=1;n<s.enemies.length;n++){var o=i(this.enemyCount.children[0]);this.enemyCount.addChild(o)}},o.peopleCountUpdate=function(e){for(var t=0;t<this.playerCount.children.length;t++)this.playerCount.children[t].active=t<e.playerCount;for(var n=0;n<this.enemyCount.children.length;n++)this.enemyCount.children[n].active=n<e.enemyCount},o.scoreInit=function(){this.playerScore=this.node.getChildByName("PlayerScore"),this.enemyScore=this.node.getChildByName("EnemyScore")},o.scoreUpdate=function(e){e.playerScore>=e.enemyScore?(this.playerScore.children[1].children[0].setRotationFromEuler(new a(0,0,0)),this.enemyScore.children[1].children[0].setRotationFromEuler(new a(0,0,180))):(this.playerScore.children[1].children[0].setRotationFromEuler(new a(0,0,180)),this.enemyScore.children[1].children[0].setRotationFromEuler(new a(0,0,0))),this.playerScore.getComponentInChildren(r).string=e.playerScore.toString(),this.enemyScore.getComponentInChildren(r).string=e.enemyScore.toString()},n}(l))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/TouchMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tool.ts","./EventMgr.ts"],(function(t){"use strict";var i,e,o,n,s,c,h,a,r,g,d;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator,n=t.geometry,s=t.view,c=t.Vec2,h=t.input,a=t.Input,r=t.Component},function(t){g=t.default},function(t){d=t.EventMgr}],execute:function(){var u,l;t("TouchEventType",void 0),e._RF.push({},"034e3b33zdA+5k3ZdMJZ7Xa","TouchMgr",void 0);var y,f=o.ccclass,T=(o.property,o.menu),w=(n.Ray,s.getVisibleSize());!function(t){t.start="touchStart",t.move="touchMove",t.end="touchEnd",t.getAxis="GetAxis",t.slideWay="slideWay",t.singleTouchStart="singleTouchStart",t.singleTouchMove="singleTouchMove",t.singleTouchEnd="singleTouchEnd",t.secondTouchStart="secondTouchStart",t.secondTouchMove="secondTouchMove",t.secondTouchEnd="secondTouchEnd",t.getAxisAlways="getAxisAlways",t.joyAxis="joyAxis",t.keyDown="keyDown",t.camRayClickCheck="camRayClickCheck"}(y||(y=t("TouchEventType",{})));t("TouchMgr",f("TouchMgr")(u=T("Mgr/TouchMgr")(((l=function(t){function e(){for(var i,e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];return(i=t.call.apply(t,[this].concat(o))||this).firstId=-1,i.secondId=-1,i.firstOriginalPoint=new c,i.secondOriginalPoint=new c,i.isSecond=!1,i.startPos=void 0,i.nowPos=void 0,i.isDown=void 0,i.touchTimer=void 0,i.orignalHorizontal=0,i.orignalAxis=0,i.orignalHorizontalAlways=0,i.orignalAxisAlways=0,i.camRay=void 0,i}i(e,t);var o=e.prototype;return o.onLoad=function(){e.instance=this},o.onEnable=function(){h.on(a.EventType.TOUCH_START,this.onTouchStart,this),h.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this),h.on(a.EventType.TOUCH_END,this.onTouchEnd,this),h.on(a.EventType.TOUCH_END,this.onTouchEnd,this),h.on(a.EventType.KEY_DOWN,this.keyDown,this),w=s.getVisibleSize()},o.onDisable=function(){d.clearTarget(this)},o.keyDown=function(t){d.event(y.keyDown,t.keyCode)},o.onTouchStart=function(t){0==this.isSecond?-1==this.firstId?(this.checkOut(t),this.firstId=t.getID(),d.event(y.singleTouchStart,t),this.firstOriginalPoint=new c(t.getLocationX()/w.width,t.getLocationY()/w.height)):this.firstId!=t.getID()&&-1==this.secondId&&(this.secondId=t.getID(),this.isSecond=!0,d.event(y.secondTouchStart,t),this.secondOriginalPoint=new c(t.getLocationX()/w.width,t.getLocationY()/w.height)):-1==this.firstId?(this.firstId=t.getID(),this.firstOriginalPoint=new c(t.getLocationX()/w.width,t.getLocationY()/w.height)):-1==this.secondId&&(this.secondId=t.getID(),this.secondOriginalPoint=new c(t.getLocationX()/w.width,t.getLocationY()/w.height)),this.checkOutAlways(t)},o.onTouchMove=function(t){if(0==this.isSecond)t.getID()==this.firstId&&(this.checkWay(t),this.checkOut(t),d.event(y.singleTouchMove,t));else if(-1!=this.firstId&&-1!=this.secondId){var i,e={distance:0,angle:0},o=g.vector2Reduce(this.secondOriginalPoint,this.firstOriginalPoint),n=c.len(o);if(t.getID()==this.firstId?i=g.vector2Reduce(this.secondOriginalPoint,new c(t.getLocation().x/w.width,t.getLocation().y/w.height)):t.getID()==this.secondId&&(i=g.vector2Reduce(new c(t.getLocation().x/w.width,t.getLocation().y/w.height),this.firstOriginalPoint)),i){var s=c.len(i);e.distance=s-n,e.angle=g.getAngle2DWay(o,i),d.event(y.secondTouchMove,e)}}t.getID()==this.firstId&&(this.firstOriginalPoint=new c(new c(t.getLocation().x/w.width,t.getLocation().y/w.height))),t.getID()==this.secondId&&(this.secondOriginalPoint=new c(new c(t.getLocation().x/w.width,t.getLocation().y/w.height))),this.checkWayAlways(t)},o.onTouchEnd=function(t){this.checkOutAlways(t),t.getID()==this.firstId&&(this.firstOriginalPoint=new c(new c(t.getLocation().x/w.width,t.getLocation().y/w.height))),t.getID()==this.secondId&&(this.secondOriginalPoint=new c(new c(t.getLocation().x/w.width,t.getLocation().y/w.height))),0==this.isSecond?t.getID()==this.firstId&&(this.checkOut(t),d.event(y.singleTouchEnd,t),this.firstId=-1):(t.getID()==this.firstId&&(this.firstId=-1),t.getID()==this.secondId&&(this.secondId=-1),-1==this.firstId&&-1==this.secondId&&(this.isSecond=!1))},o.WayCheck=function(){var t=g.vector2Reduce(this.nowPos,this.startPos);if(c.len(t)>100){Math.atan2(t.y,t.x),Math.PI;this.isDown=!1}this.startPos=this.nowPos},o.onDestroy=function(){this.touchTimer&&clearTimeout(this.touchTimer)},o.checkWay=function(t){var i=t.getLocationX()-this.orignalHorizontal,e=t.getLocationY()-this.orignalAxis;d.event(y.getAxis,[{x:i,y:e}])},o.checkOut=function(t){this.orignalHorizontal=t.stageX,this.orignalAxis=t.stageY},o.checkWayAlways=function(t){var i=t.getUILocation().x/w.width-this.orignalHorizontalAlways,e=t.getUILocation().y/w.height-this.orignalAxisAlways;this.checkOutAlways(t),d.event(y.getAxisAlways,{x:i,y:e,touchId:t.getID()})},o.checkOutAlways=function(t){this.orignalHorizontalAlways=t.getUILocation().x/w.width,this.orignalAxisAlways=t.getUILocation().y/w.height},o.camRayInit=function(){h.on(a.EventType.TOUCH_START,this.camRayCheck,this)},o.camRayCheck=function(t){},o.camRayOff=function(){h.off(a.EventType.TOUCH_START,this.camRayCheck,this)},e}(r)).instance=void 0,u=l))||u)||u);e._RF.pop()}}}));

System.register("chunks:///_virtual/Tower.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EnumTypes.ts","./GameData.ts","./TowerUI.ts"],(function(r){"use strict";var e,s,t,o,i,n,h,a;return{setters:[function(r){e=r.inheritsLoose},function(r){s=r.cclegacy,t=r._decorator,o=r.Vec3,i=r.Component},function(r){n=r.CampType},function(r){h=r.default},function(r){a=r.TowerUI}],execute:function(){var c;s._RF.push({},"4f30500bjtOVLy64BBnwkoX","Tower",void 0);var g=t.ccclass;t.property,r("Tower",g("Tower")(c=function(r){function s(){for(var e,s=arguments.length,t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];return(e=r.call.apply(r,[this].concat(t))||this).towerId=0,e.progress=0,e.nowState=0,e.range_raidus=25,e.range_raidus_pow=625,e.herosInTower=[],e.ringRender=void 0,e.ringRnederHandle=void 0,e}e(s,r);var t=s.prototype;return t.onLoad=function(){this.range_raidus_pow=this.range_raidus*this.range_raidus},t.update=function(r){var e;this.herosInTower.length=0;for(var s=0;s<h.heros.length;s++)h.heros[s].isDead||(e=h.heros[s].node.getWorldPosition(),o.squaredDistance(this.node.getWorldPosition(),e)<this.range_raidus_pow&&this.herosInTower.push(h.heros[s]));var t=null;this.herosInTower.length>0&&(t=this.herosInTower[0].camp);for(var i=0;i<this.herosInTower.length;i++)if(this.herosInTower[i].camp!=t){t=null;break}if(0==this.herosInTower.length)switch(this.nowState){case-1:this.progress-=r/h.tower_controlBackTime,this.progress<-1&&(this.progress=-1);break;case 0:this.progress<0?(this.progress+=r/h.tower_controlBackTime,this.progress>0&&(this.progress=0)):this.progress>0&&(this.progress-=r/h.tower_controlBackTime,this.progress<0&&(this.progress=0));break;case 1:this.progress+=r/h.tower_controlBackTime,this.progress>1&&(this.progress=1)}else{if(null!=t)switch(t){case n.Player:this.progress+=r/h.tower_controlTime*this.herosInTower.length,this.progress>1?(this.progress=1,this.nowState=1):this.progress>=0&&-1==this.nowState&&(this.nowState=0);break;case n.Enemy:this.progress-=r/h.tower_controlTime*this.herosInTower.length,this.progress<-1?(this.progress=-1,this.nowState=-1):this.progress<=0&&1==this.nowState&&(this.nowState=0)}for(var c=0;c<this.herosInTower.length;c++)if(this.herosInTower[c].isPlayerCtrl){!0;break}}a.instance},s}(i))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/TowerUI_Small.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameData.ts","./Tool.ts"],(function(i){"use strict";var t,e,o,r,n,s,a;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy,o=i._decorator,r=i.Sprite,n=i.Component},function(i){s=i.default},function(i){a=i.default}],execute:function(){var l;e._RF.push({},"62818oOpFJNBIE0d7UOGa4h","TowerUI_Small",void 0);var d=o.ccclass;o.property,i("TowerUI_Small",d("TowerUI_Small")(l=function(i){function e(){for(var t,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return(t=i.call.apply(i,[this].concat(o))||this).ring=void 0,t.mid=void 0,t.word=void 0,t}t(e,i);var o=e.prototype;return o.onLoad=function(){this.ring=this.node.getChildByName("ring"),this.mid=this.node.getChildByName("mid"),this.word=this.node.getChildByName("word")},o.towerUpdate=function(i){if(this.ring.active=i.isShow,this.mid.active=i.isShow,this.word.active=i.isShow,i.isShow){for(var t=i.progress>=0?0:1,e=0;e<this.word.children.length;e++)this.word.children[e].active=i.towerId==e;var o=0==t?i.progress:-i.progress;a.unactiveAllChildren(this.mid),a.unactiveAllChildren(this.ring);var n=this.mid.children[t],s=this.ring.children[t];n.active=!0,s.active=!0,n.getComponent(r).fillRange=o,s.getComponent(r).fillRange=-i.progress}},o.follow=function(i,t){var e=i.getWorldPosition();e.add(t);var o=s.cam.convertToUINode(e,this.node.parent);this.node.setPosition(o)},e}(n))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/TowerUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DataClass.ts","./Tool.ts"],(function(t){"use strict";var i,e,r,o,n,a,s;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,r=t._decorator,o=t.Sprite,n=t.Component},function(t){a=t.TowerUIData},function(t){s=t.default}],execute:function(){var l,h;e._RF.push({},"661deZ2KF9IvLLgV/qukIRS","TowerUI",void 0);var c=r.ccclass;r.property,t("TowerUI",c("TowerUI")(((h=function(t){function e(){for(var i,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(i=t.call.apply(t,[this].concat(r))||this).ring=void 0,i.mid=void 0,i.word=void 0,i.allData=[],i}i(e,t);var r=e.prototype;return r.onLoad=function(){e.instance=this,this.ring=this.node.getChildByName("ring"),this.mid=this.node.getChildByName("mid"),this.word=this.node.getChildByName("word")},r.lateUpdate=function(){if(this.allData.length>0){for(var t=0;t<this.allData.length;t++)if(this.allData[t].isShow){this.towerUpdate(this.allData[t]);break}this.allData.length=0}else this.towerUpdate(new a(!1))},r.towerUpdate=function(t){if(this.ring.active=t.isShow,this.mid.active=t.isShow,this.word.active=t.isShow,t.isShow){for(var i=t.progress>=0?0:1,e=0;e<this.word.children.length;e++)this.word.children[e].active=t.towerId==e;var r=0==i?t.progress:-t.progress;s.unactiveAllChildren(this.mid),s.unactiveAllChildren(this.ring);var n=this.mid.children[i],a=this.ring.children[i];n.active=!0,a.active=!0,n.getComponent(o).fillRange=r,a.getComponent(o).fillRange=-t.progress}},e}(n)).instance=void 0,l=h))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/TrackedHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Math.ts","./CameraHandler.ts"],(function(o){"use strict";var e,r,t,a,n,s;return{setters:[function(o){e=o.inheritsLoose},function(o){r=o.cclegacy,t=o.Vec3},function(o){a=o.quarticDamp,n=o.Vec3_closeTo},function(o){s=o.CameraHandler}],execute:function(){r._RF.push({},"394f8KsH69BrKYjKrRxsXm7","TrackedHandler",void 0);var i=new t;o("TrackedHandler",function(o){function r(){return o.apply(this,arguments)||this}return e(r,o),r.prototype.updateCamera=function(o){var e=this._vcam,r=e.body.tracked;if(r.path){if(r.autoDolly.enable&&e.follow){var t=e.follow.worldPosition,s=r.path.findClosestPoint(t,r.progress,r.autoDolly.searchRadius,r.autoDolly.searchResolution);r.progress=a(r.progress,s,r.damping,o)}r.path.evaluatePosition(i,r.progress)}n(i,e.node.worldPosition)||(e.node.worldPosition=i)},r}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/Types.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"40519iR4mJJb649sETbQDxH","Types",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/UMTrack.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,c,e;return{setters:[function(n){t=n.createClass},function(n){c=n.cclegacy,e=n._decorator}],execute:function(){var r,i;c._RF.push({},"66481x39YFPPLMhufOD40BX","UMTrack",void 0);var o=e.ccclass;e.property,n("UMTrack",o("UMTrack")(((i=function(){function n(){}var c=n.prototype;return c.init=function(){},c.trackEvent=function(n,t){},c.onStart=function(n,t){},c.onEnd=function(n,t){},c.onInitLevel=function(n,t){},c.onSetLevel=function(n,t){},t(n,null,[{key:"instance",get:function(){return null===n._instance&&(n._instance=new n),n._instance},set:function(t){n._instance=t}}]),n}())._instance=null,r=i))||r);c._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"b3dc9cALvRJ77bQF13bnHSq","utils",void 0);var n=e("utils",{isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isNumber:function(e){return"number"==typeof e},typeOf:function(e){var t=typeof e;if("object"===t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"===n)return"object";if("[object Array]"===n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"===n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"===t&&void 0===e.call)return"object";return t},isNull:function(e){return null==e},isFunction:function(e){return"function"===n.typeOf(e)},isObject:function(e){var t=typeof e;return"object"===t&&null!=e||"function"===t},def:function(e,t,r,i){void 0===i&&(i=!1),n.isObject(e)&&Object.defineProperty(e,t,{value:r,enumerable:!!i,writable:!0,configurable:!0})},clone:function(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Array||e instanceof Object){var t=e instanceof Array?[]:{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=this.clone(e[n]));return t}return e}});t._RF.pop()}}}));

System.register("chunks:///_virtual/VCamAim.ts",["./rollupPluginModLoBabelHelpers.js","cc","./VCamComposer.ts","./VCamHardLook.ts"],(function(e){"use strict";var t,o,r,i,n,a,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e._decorator,n=e.Enum},function(e){a=e.VCamComposer},function(e){p=e.VCamHardLook}],execute:function(){var c,s,u,m,l,f,y,C,b;e("AimType",void 0),r._RF.push({},"b5ce9A29MhBxp+Y4Lc9reA0","VCamAim",void 0);var h,d=i.ccclass,A=i.property;!function(e){e[e.None=0]="None",e[e.Composer=1]="Composer",e[e.HardLookAt=2]="HardLookAt"}(h||(h=e("AimType",{})));e("VCamAim",(c=d("VCamAim"),s=A({type:n(h)}),u=A({type:a,visible:function(){return this.type===h.Composer}}),m=A({type:p,visible:function(){return this.type===h.HardLookAt}}),c((y=t((f=function(){o(this,"type",y,this),o(this,"composer",C,this),o(this,"hardLookat",b,this)}).prototype,"type",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h.Composer}}),C=t(f.prototype,"composer",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),b=t(f.prototype,"hardLookat",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p}}),l=f))||l));r._RF.pop()}}}));

System.register("chunks:///_virtual/VCamAutoDolly.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts"],(function(e){"use strict";var t,i,o,r,n,s,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.createClass,o=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e._decorator,s=e.game},function(e){a=e.CinestationEvent}],execute:function(){var u,c,l,p,h,y,_,b,R,f,D,C;r._RF.push({},"6faa8Kj6xFD/Y2h9t5y/JgK","VCamAutoDolly",void 0);var g=n.ccclass,d=n.property;e("VCamAutoDoly",(u=g("VCamAutoDoly"),c=d({visible:!1}),l=d({visible:!1}),p=d({visible:!1}),h=d({tooltip:"开启自动定位"}),y=d({tooltip:"当前位置两侧搜索的片段数量。\n数值为0时，搜索整个路径"}),_=d({tooltip:"将轨道分成多个片段来搜索。\n数值越大，结果越精确，性能消耗也越大"}),u((f=t((R=function(){function e(){o(this,"_enable",f,this),o(this,"_searchRadius",D,this),o(this,"_searchResolution",C,this)}return i(e,[{key:"enable",get:function(){return this._enable},set:function(e){this._enable!==e&&(this._enable=e,CC_EDITOR&&s.emit(a.EDITOR_CHANGED))}},{key:"searchRadius",get:function(){return this._searchRadius},set:function(e){this._searchRadius!==e&&(this._searchRadius=e,CC_EDITOR&&s.emit(a.EDITOR_CHANGED))}},{key:"searchResolution",get:function(){return this._searchResolution},set:function(e){this._searchResolution!==e&&(this._searchResolution=e,CC_EDITOR&&s.emit(a.EDITOR_CHANGED))}}]),e}()).prototype,"_enable",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),D=t(R.prototype,"_searchRadius",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),C=t(R.prototype,"_searchResolution",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),t(R.prototype,"enable",[h],Object.getOwnPropertyDescriptor(R.prototype,"enable"),R.prototype),t(R.prototype,"searchRadius",[y],Object.getOwnPropertyDescriptor(R.prototype,"searchRadius"),R.prototype),t(R.prototype,"searchResolution",[_],Object.getOwnPropertyDescriptor(R.prototype,"searchResolution"),R.prototype),b=R))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/VCamBody.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts","./VCamFreeLook.ts","./VCamTracked.ts"],(function(e){"use strict";var t,r,i,o,n,a,c,p,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.createClass,i=e.initializerDefineProperty},function(e){o=e.cclegacy,n=e._decorator,a=e.Enum,c=e.game},function(e){p=e.CinestationEvent},function(e){u=e.VCamFreeLook},function(e){s=e.VCamTracked}],execute:function(){var y,l,f,d,m,b,k,h,C,v;e("BodyType",void 0),o._RF.push({},"98051KqNLZKB5mU2JZrUz3P","VCamBody",void 0);var _,g=n.ccclass,T=n.property;!function(e){e[e.None=0]="None",e[e.FreeLook=1]="FreeLook",e[e.Tracked=2]="Tracked"}(_||(_=e("BodyType",{})));e("VCamBody",(y=g("VCamBody"),l=T({visible:!1}),f=T({animatable:!1,type:a(_)}),d=T({animatable:!1,type:u,visible:function(){return this.type===_.FreeLook}}),m=T({type:s,visible:function(){return this.type===_.Tracked}}),y((h=t((k=function(){function e(){i(this,"_type",h,this),i(this,"freelook",C,this),i(this,"tracked",v,this)}return r(e,[{key:"type",get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e,CC_EDITOR&&c.emit(p.EDITOR_CHANGED))}}]),e}()).prototype,"_type",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return _.None}}),t(k.prototype,"type",[f],Object.getOwnPropertyDescriptor(k.prototype,"type"),k.prototype),C=t(k.prototype,"freelook",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),v=t(k.prototype,"tracked",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),b=k))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/VCamComposer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts"],(function(t){"use strict";var e,i,o,n,r,a,s,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.createClass,o=t.initializerDefineProperty},function(t){n=t.cclegacy,r=t._decorator,a=t.game,s=t.Vec3},function(t){p=t.CinestationEvent}],execute:function(){var l,h,d,u,c,f,g,b,y,Z,_,m,C,O,D,H,k,W,E,w,v,P,R;n._RF.push({},"a20f4DBjy1CkIZ+lahC6hYS","VCamComposer",void 0);var z=r.ccclass,j=r.property;t("VCamComposer",(l=z("VCamComposer"),h=j({visible:!1}),d=j({visible:!1}),u=j({visible:!1}),c=j({visible:!1}),f=j({tooltip:"从LookAt目标的中心作局部空间的位置偏移。 \n所需区域不是跟踪目标的中心时，微调跟踪目标的位置"}),g=j({tooltip:"根据LookAt目标的运动速度，动态调整偏移量。\n预估了目标将在未来几秒内出现的位置",range:[0,1],step:.1,slide:!0}),b=j({tooltip:"控制预估的阻尼系数。\n数值越大阻尼越强，预测越滞后，可以消除因为预测带来的抖动",range:[.1,2],step:.1,slide:!0}),y=j({tooltip:"瞄准目标的阻尼系数。\n数值越小，可以更快的将目标保持在死区，数值越大，瞄准速度越慢。",range:[.1,2],step:.1,slide:!0}),Z=j({tooltip:"死区宽度。\n如果目标在死区内，相机则不会旋转",range:[0,1],step:.01,slide:!0}),_=j({tooltip:"死区高度。\n如果目标在死区内，相机则不会旋转",range:[0,1],step:.01,slide:!0}),m=j({tooltip:"软区宽度。\n如果目标在软区内，相机将在lookatDamping指定时间内旋转到死区",range:[0,1],step:.01,slide:!0}),C=j({tooltip:"软区高度。\n如果目标在软区内，相机将在lookatDamping指定时间内旋转到死区",range:[0,1],step:.01,slide:!0}),l((H=e((D=function(){function t(){o(this,"_deadZoneWidth",H,this),o(this,"_deadZoneHeight",k,this),o(this,"_softZoneWidth",W,this),o(this,"_softZoneHeight",E,this),o(this,"trackedObjectOffset",w,this),o(this,"lookaheadTime",v,this),o(this,"lookaheadDamping",P,this),o(this,"lookatDamping",R,this)}return i(t,[{key:"deadZoneWidth",get:function(){return this._deadZoneWidth},set:function(t){this._deadZoneWidth!==t&&(this._deadZoneWidth=t,CC_EDITOR&&a.emit(p.COMPOSER_CHANGED))}},{key:"deadZoneHeight",get:function(){return this._deadZoneHeight},set:function(t){this._deadZoneHeight!==t&&(this._deadZoneHeight=t,CC_EDITOR&&a.emit(p.COMPOSER_CHANGED))}},{key:"softZoneWidth",get:function(){return this._softZoneWidth},set:function(t){this._softZoneWidth!==t&&(this._softZoneWidth=t,CC_EDITOR&&a.emit(p.COMPOSER_CHANGED))}},{key:"softZoneHeight",get:function(){return this._softZoneHeight},set:function(t){this._softZoneHeight!==t&&(this._softZoneHeight=t,CC_EDITOR&&a.emit(p.COMPOSER_CHANGED))}}]),t}()).prototype,"_deadZoneWidth",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),k=e(D.prototype,"_deadZoneHeight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),W=e(D.prototype,"_softZoneWidth",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),E=e(D.prototype,"_softZoneHeight",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.8}}),w=e(D.prototype,"trackedObjectOffset",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),v=e(D.prototype,"lookaheadTime",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),P=e(D.prototype,"lookaheadDamping",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),R=e(D.prototype,"lookatDamping",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),e(D.prototype,"deadZoneWidth",[Z],Object.getOwnPropertyDescriptor(D.prototype,"deadZoneWidth"),D.prototype),e(D.prototype,"deadZoneHeight",[_],Object.getOwnPropertyDescriptor(D.prototype,"deadZoneHeight"),D.prototype),e(D.prototype,"softZoneWidth",[m],Object.getOwnPropertyDescriptor(D.prototype,"softZoneWidth"),D.prototype),e(D.prototype,"softZoneHeight",[C],Object.getOwnPropertyDescriptor(D.prototype,"softZoneHeight"),D.prototype),O=D))||O));n._RF.pop()}}}));

System.register("chunks:///_virtual/VCamFreeLook.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,o,r,n;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,r=e._decorator,n=e.Vec3}],execute:function(){var a,l,p,u,b,s,f,c,m,h,g,d,w,y,z,S,F,k,v,D,L,V,C;o._RF.push({},"0b999naWjlKBKlbbhrzf9kj","VCamFreeLook",void 0);var P=r.ccclass,_=r.property;e("VCamFreeLook",(a=P("VCamFreeLook"),l=_({tooltip:"禁止水平方向旋转",animatable:!1}),p=_({tooltip:"禁止垂直方向旋转",animatable:!1}),u=_({tooltip:"禁止相机推移",animatable:!1}),b=_({tooltip:"禁止相机平移",animatable:!1}),s=_({tooltip:"旋转速度",animatable:!1,range:[.1,5],step:.1,slide:!0}),f=_({tooltip:"旋转平滑系数。\n数值越大旋转惯性越大",animatable:!1,range:[.1,5],step:.1,slide:!0}),c=_({tooltip:"平移速度",animatable:!1,range:[.1,5],step:.1,slide:!0}),m=_({tooltip:"平移平滑系数。\n数值越大平移惯性越大",animatable:!1,range:[.1,5],step:.1,slide:!0}),h=_({tooltip:"与Follow目标之间的位移，初始值为(0,0,-10)"}),g=_({tooltip:"跟随阻尼系数。\n数字越小相机越灵敏，越大越迟顿",animatable:!1,range:[0,5],step:.1,slide:!0}),a((y=t((w=function(){i(this,"forbidX",y,this),i(this,"forbidY",z,this),i(this,"forbidZ",S,this),i(this,"forbidPan",F,this),i(this,"rotateSpeed",k,this),i(this,"rotateSmoothing",v,this),i(this,"panSpeed",D,this),i(this,"panSmoothing",L,this),i(this,"followOffset",V,this),i(this,"followDamping",C,this)}).prototype,"forbidX",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=t(w.prototype,"forbidY",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=t(w.prototype,"forbidZ",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=t(w.prototype,"forbidPan",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=t(w.prototype,"rotateSpeed",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=t(w.prototype,"rotateSmoothing",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),D=t(w.prototype,"panSpeed",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),L=t(w.prototype,"panSmoothing",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),V=t(w.prototype,"followOffset",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n(0,0,-10)}}),C=t(w.prototype,"followDamping",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=w))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/VCamHardLook.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,o,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){o=e.cclegacy,a=e._decorator,c=e.Vec3}],execute:function(){var i,n,s,u,l;o._RF.push({},"47535R8yGBJapZG+5BzZbdz","VCamHardLook",void 0);var p=a.ccclass,f=a.property;e("VCamHardLook",(i=p("VCamHardLook"),n=f({tooltip:"从LookAt目标的中心作局部空间的位置偏移。 \n所需区域不是跟踪目标的中心时，微调跟踪目标的位置"}),i((l=t((u=function(){r(this,"trackedObjectOffset",l,this)}).prototype,"trackedObjectOffset",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),s=u))||s));o._RF.pop()}}}));

System.register("chunks:///_virtual/VCamImpulse.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,t,u,i,n,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){u=e.cclegacy,i=e._decorator,n=e.Enum,c=e.Layers}],execute:function(){var s,o,a,p,l;u._RF.push({},"8f0fdpmkflDmIp1ZB3EmmMS","VCamImpulse",void 0);var m=i.ccclass,f=i.property;e("VCamImpulse",(s=m("VCamImpulse"),o=f({type:n(c.Enum)}),s((l=r((p=function(){t(this,"source",l,this)}).prototype,"source",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c.Enum.DEFAULT}}),a=p))||a));u._RF.pop()}}}));

System.register("chunks:///_virtual/VCamLens.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Events.ts"],(function(t){"use strict";var e,r,i,n,o,a,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.createClass,i=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t._decorator,a=t.game},function(t){s=t.CinestationEvent}],execute:function(){var p,c,f,u,l,_,y,h,v;n._RF.push({},"1b0c6SIESZLp7YflAThQCmy","VCamLens",void 0);var b=o.ccclass,C=o.property;t("VCamLens",(p=b("VCamLens"),c=C({visible:!1}),f=C({visible:!1}),u=C({visible:!1}),p((y=e((_=function(){function t(){i(this,"_fov",y,this),i(this,"_near",h,this),i(this,"_far",v,this)}return r(t,[{key:"fov",get:function(){return this._fov},set:function(t){this._fov!==t&&(this._fov=t,CC_EDITOR&&a.emit(s.LENS_CHANGED))}},{key:"near",get:function(){return this._near},set:function(t){this._near!==t&&(this._near=t,CC_EDITOR&&a.emit(s.LENS_CHANGED))}},{key:"far",get:function(){return this._far},set:function(t){this._far!==t&&(this._far=t,CC_EDITOR&&a.emit(s.LENS_CHANGED))}}]),t}()).prototype,"_fov",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),h=e(_.prototype,"_near",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=e(_.prototype,"_far",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),e(_.prototype,"fov",[C],Object.getOwnPropertyDescriptor(_.prototype,"fov"),_.prototype),e(_.prototype,"near",[C],Object.getOwnPropertyDescriptor(_.prototype,"near"),_.prototype),e(_.prototype,"far",[C],Object.getOwnPropertyDescriptor(_.prototype,"far"),_.prototype),l=_))||l));n._RF.pop()}}}));

System.register("chunks:///_virtual/VCamNoise.ts",["./rollupPluginModLoBabelHelpers.js","cc","./NoiseGenerator.ts"],(function(e){"use strict";var i,t,n,r,o,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e._decorator,o=e.Enum},function(e){u=e.NoiseProfile}],execute:function(){var l,a,s,c,p,f,y,N,b,h,m;e("NoiseType",void 0),n._RF.push({},"64113KNDFdCe5TQiq+NPHCc","VCamNoise",void 0);var v,d=r.ccclass,g=r.property;!function(e){e[e.None=0]="None",e[e.Perlin=1]="Perlin"}(v||(v=e("NoiseType",{})));e("VCamNoise",(l=d("VCamNoise"),a=g({type:o(v)}),s=g({tooltip:"多种预置噪声参数",type:o(u),visible:function(){return this.type!==v.None}}),c=g({tooltip:"幅度增益。数值越大相机晃动幅度越明显",visible:function(){return this.type!==v.None}}),p=g({tooltip:"频率增益。数值越大相机晃动频率越高",visible:function(){return this.type!==v.None}}),l((N=i((y=function(){t(this,"type",N,this),t(this,"profile",b,this),t(this,"amplitudeGain",h,this),t(this,"frequncyGain",m,this)}).prototype,"type",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return v.None}}),b=i(y.prototype,"profile",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u.Noise_CM_4}}),h=i(y.prototype,"amplitudeGain",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),m=i(y.prototype,"frequncyGain",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=y))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/VCamTracked.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationSmoothPath.ts","./Events.ts","./VCamAutoDolly.ts"],(function(t){"use strict";var e,r,i,o,n,a,s,p,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.createClass,i=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t._decorator,a=t.game},function(t){s=t.CinestationSmoothPath},function(t){p=t.CinestationEvent},function(t){l=t.VCamAutoDoly}],execute:function(){var u,c,g,h,m,f,y,b,C,d,D,_;o._RF.push({},"28daaTaX7tIHIg1KeO3hzdb","VCamTracked",void 0);var v=n.ccclass,T=n.property;t("VCamTracked",(u=v("VCamTracked"),c=T({visible:!1}),g=T({tooltip:"相机移动的路径。\n此属性必须是CinestationSmoothPath",animatable:!1,type:s}),h=T({tooltip:"移动进度。\n数值0表示第一个位置点，数值1表示第二个位置点，以此类推。"}),m=T({tooltip:"跟随阻尼系数。\n数字越小相机越灵敏，越大越迟顿",animatable:!1,range:[.1,5],step:.1,slide:!0}),f=T({animatable:!1,type:l}),u((C=e((b=function(){function t(){i(this,"_progress",C,this),i(this,"path",d,this),i(this,"damping",D,this),i(this,"autoDolly",_,this)}return r(t,[{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,CC_EDITOR&&a.emit(p.EDITOR_CHANGED))}}]),t}()).prototype,"_progress",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),d=e(b.prototype,"path",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),e(b.prototype,"progress",[h],Object.getOwnPropertyDescriptor(b.prototype,"progress"),b.prototype),D=e(b.prototype,"damping",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),_=e(b.prototype,"autoDolly",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l}}),y=b))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/videoToggle.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var o,t,i,r,n,c,a,l,s;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){n=e.cclegacy,c=e._decorator,a=e.Node,l=e.Toggle,s=e.Component}],execute:function(){var u,p,g,d,v;n._RF.push({},"80e55OdRYtLGKa9VvN83FSy","videoToggle",void 0);var h=c.ccclass,f=c.property;e("videoToggle",(u=h("videoToggle"),p=f(a),u((v=o((d=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),c=0;c<t;c++)n[c]=arguments[c];return o=e.call.apply(e,[this].concat(n))||this,i(o,"backNode",v,r(o)),o}return t(o,e),o.prototype.onChange=function(){this.backNode.active=this.getComponent(l).isChecked},o}(s)).prototype,"backNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=d))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/VirtualCamera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationData.ts","./Events.ts","./Visualization.ts","./VCamAim.ts","./VCamBody.ts","./VCamImpulse.ts","./VCamLens.ts","./VCamNoise.ts","./AimStage.ts","./BodyStage.ts","./ImpulseStage.ts","./NoiseStage.ts"],(function(t){"use strict";var e,o,n,i,r,a,s,l,u,c,f,p,h,d,g,y,_,m,w,b,C,v,k,A,R,D,E,P,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose,a=t.createClass},function(t){s=t.cclegacy,l=t._decorator,u=t.Node,c=t.Vec3,f=t.Quat,p=t.game,h=t.view,d=t.Mat4,g=t.toRadian,y=t.utils},function(t){_=t.cinestation},function(t){m=t.CinestationEvent},function(t){w=t.Visualization},function(t){b=t.VCamAim},function(t){C=t.VCamBody,v=t.BodyType},function(t){k=t.VCamImpulse},function(t){A=t.VCamLens},function(t){R=t.VCamNoise},function(t){D=t.AimStage},function(t){E=t.BodyStage},function(t){P=t.ImpulseStage},function(t){I=t.NoiseStage}],execute:function(){var V,O,S,z,T,N,B,H,L,M,F,G,j,x,J,Q,U,q,K,W,X,Y,Z;s._RF.push({},"e84d7HSHCRNU4Jgu1AdeBGI","VirtualCamera",void 0);var $=l.ccclass,tt=l.property,et=l.executeInEditMode;t("VirtualCamera",(V=$("VirtualCamera"),O=tt({visible:!1}),S=tt({visible:!1}),z=tt({tooltip:"在运行时显示死区和软区"}),T=tt({tooltip:"虚拟相机优先级。\n数值越大优先级越高，默认值是10"}),N=tt({tooltip:"瞄准目标",type:u}),B=tt({tooltip:"跟踪目标",type:u}),H=tt({type:A}),L=tt({type:C}),M=tt({animatable:!1,type:b}),F=tt({animatable:!1,type:R}),G=tt({animatable:!1,type:k}),V(j=et((J=e((x=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._editorChanged=!0,e._composerChanged=!0,e._visibleDefault=!1,n(e,"_lookAt",J,i(e)),n(e,"_follow",Q,i(e)),n(e,"debug",U,i(e)),n(e,"priority",q,i(e)),n(e,"lens",K,i(e)),n(e,"body",W,i(e)),n(e,"aim",X,i(e)),n(e,"noise",Y,i(e)),n(e,"impulse",Z,i(e)),e._stages=[new E(i(e)),new D(i(e)),new I(i(e)),new P(i(e))],e._finalPosition=new c,e._finalRotation=new f,e._correctPosition=new c,e._correctRotation=new f,e._lookaheadPosition=new c,e}o(e,t);var s=e.prototype;return s.onLoad=function(){var t=this;CC_EDITOR&&(p.on(m.LENS_CHANGED,(function(){return t._modelChanged=!0})),p.on(m.EDITOR_CHANGED,(function(){return t._editorChanged=!0})),p.on(m.COMPOSER_CHANGED,(function(){return t._composerChanged=!0})),this.node.on(u.EventType.TRANSFORM_CHANGED,this._onTransformChanged,this))},s._onTransformChanged=function(t){if(this.follow&&t&u.TransformBit.POSITION)switch(this.body.type){case v.Tracked:this._editorChanged=!0;break;case v.FreeLook:c.subtract(this.body.freelook.followOffset,this.node.worldPosition,this.follow.worldPosition),this._editorChanged=!0}},s.onEnable=function(){t.prototype.onEnable.call(this),_.addCamera(this)},s.onDisable=function(){t.prototype.onDisable.call(this),_.removeCamera(this),this.onDeActive()},s.onActive=function(){this._stages.forEach((function(t){return t.enable=!0}))},s.onDeActive=function(){this._stages.forEach((function(t){return t.enable=!1}))},s.updateCamera=function(t){if(!CC_EDITOR||this._isChangedInEditor()){f.identity(this._correctRotation),c.zero(this._correctPosition);for(var e,o=r(this._stages);!(e=o()).done;){e.value.updateStage(t)}}},s._isChangedInEditor=function(){return!!this._editorChanged&&(this._editorChanged=!1,!0)},s._updateMesh=function(t){for(var e=[new c(-1,-1,-1),new c(1,-1,-1),new c(-1,1,-1),new c(1,1,-1),new c(-1,-1,1),new c(1,-1,1),new c(-1,1,1),new c(1,1,1)],o=this.lens,n=h.getDesignResolutionSize(),i=d.perspective(new d,g(o.fov),n.width/n.height,o.near,o.far).invert(),r=0;r<8;r++)e[r].transformMat4(i);for(var a=[],s=[],l=0;l<8;l++)for(var u=0;u<3;u++)c.toArray(a,e[l],a.length),c.toArray(a,e[l^1<<u],a.length),s.push(1,1,1,1),s.push(1,1,1,1);return y.createMesh({positions:a,colors:s},t)},a(e,[{key:"lookAt",get:function(){return this._lookAt},set:function(t){this._lookAt=t,this._editorChanged=CC_EDITOR}},{key:"follow",get:function(){return this._follow},set:function(t){this._follow=t,this._editorChanged=CC_EDITOR}},{key:"active",get:function(){return _.vcam===this},set:function(t){_.activeCamera(t?this:null)}},{key:"correctPosition",get:function(){return this._correctPosition}},{key:"correctRotation",get:function(){return this._correctRotation}},{key:"finalPosition",get:function(){return c.add(this._finalPosition,this.node.worldPosition,this._correctPosition)}},{key:"finalRotation",get:function(){return f.multiply(this._finalRotation,this.node.worldRotation,this._correctRotation)}},{key:"lookaheadPosition",get:function(){return this._lookaheadPosition}}]),e}(w)).prototype,"_lookAt",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(x.prototype,"_follow",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(x.prototype,"debug",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),q=e(x.prototype,"priority",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),e(x.prototype,"lookAt",[N],Object.getOwnPropertyDescriptor(x.prototype,"lookAt"),x.prototype),e(x.prototype,"follow",[B],Object.getOwnPropertyDescriptor(x.prototype,"follow"),x.prototype),K=e(x.prototype,"lens",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new A}}),W=e(x.prototype,"body",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new C}}),X=e(x.prototype,"aim",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new b}}),Y=e(x.prototype,"noise",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new R}}),Z=e(x.prototype,"impulse",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new k}}),j=x))||j)||j));s._RF.pop()}}}));

System.register("chunks:///_virtual/Visualization.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CinestationShareAssets.ts"],(function(e){"use strict";var t,i,n,s,o,l,h,a;return{setters:[function(e){t=e.inheritsLoose,i=e.createClass},function(e){n=e.cclegacy,s=e._decorator,o=e.director,l=e.renderer,h=e.Component},function(e){a=e.cinestationShareAssets}],execute:function(){var d;n._RF.push({},"33adaQlUqdEy5hcZt+9bHhU","Visualization",void 0);var r=s.ccclass;s.property,e("Visualization",r("Visualization")(d=function(e){function n(){for(var t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(t=e.call.apply(e,[this].concat(n))||this)._modelChanged=!1,t._mesh=null,t._model=null,t._material=a.lineMaterial,t._visibleInRuntime=CC_EDITOR,t._visibleDefault=!0,t}t(n,e);var s=n.prototype;return s.onEnable=function(){this._visibleInRuntime&&(this._createModel(),this._attachToScene())},s.onDisable=function(){this._visibleInRuntime&&this._detachFromScene()},s._attachToScene=function(){this._model&&this.node&&this.node.scene&&(this._model.scene&&this._detachFromScene(),this._getRenderScene().addModel(this._model))},s._detachFromScene=function(){this._model&&this._model.scene&&this._model.scene.removeModel(this._model)},s._createModel=function(){this._model||(this._model=o.root.createModel(l.scene.Model),this._model.node=this._model.transform=this.node,this._model.enabled=this._visibleDefault,this._modelChanged=!0)},s.update=function(e){this._modelChanged&&this._model&&(this._modelChanged=!1,this._mesh=this._updateMesh(this._mesh),this._mesh&&this._model.initSubModel(0,this._mesh.renderingSubMeshes[0],this._material))},s._updateMesh=function(e){return e},i(n,[{key:"visible",get:function(){return!!this._model&&this._model.enabled},set:function(e){this._model&&(this._model.enabled=e)}}]),n}(h))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/Wait.ts",["./rollupPluginModLoBabelHelpers.js","cc","./main2.ts","./btclass.ts","./property.ts","./shared-number.ts","./behavior-status.ts","./behavior-task.ts"],(function(t){"use strict";var i,e,n,r,a,s,o,u,c,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy},null,function(t){s=t.ccclass},function(t){o=t.property},function(t){u=t.SharedNumber},function(t){c=t.BehaviorStatus},function(t){l=t.BehaviorTask}],execute:function(){var p,h,f,v,d;a._RF.push({},"d6ba0cCO4hGyr03nOM9B5Vq","Wait",void 0);t("Wait",(p=s("bt.Wait"),h=o({type:u}),p((d=i((v=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,n(i,"duration",d,r(i)),i._intervel=0,i}return e(i,t),i.prototype.update=function(t){if(t=c.Running,this.duration.original>0){var i=this.duration.value;this._intervel+=this.$context.deltaTime,this._intervel-i>=0&&(t=c.Success,this._intervel=0)}return this.onUpdate(t)},i}(l)).prototype,"duration",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/WeaponController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CustomInput.ts","./StateController.ts"],(function(t){"use strict";var e,n,i,o,r,a,s,l,u,c,p,f,h,m,g,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Camera,l=t.Node,u=t.Prefab,c=t.Vec3,p=t.lerp,f=t.clamp,h=t.instantiate,m=t.Component},function(t){g=t.customInput},function(t){w=t.StateController}],execute:function(){var y,v,_,b,C,d,P,S,R,I;r._RF.push({},"c0716SCpO9GEZo32AffHxgX","WeaponController",void 0);var M=a.ccclass,z=a.property;t("WeaponController",(y=M("WeaponController"),v=z(s),_=z(l),b=z(u),y((P=e((d=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this)._swaySmoothness=4,e._swayMovement=new c,e._state=null,e._fireInterval=0,i(e,"gunCamera",P,o(e)),i(e,"fireRate",S,o(e)),i(e,"casingSpawnPoint",R,o(e)),i(e,"casingPrefab",I,o(e)),e}n(e,t);var r=e.prototype;return r.onLoad=function(){this._state=this.getComponent(w)},r.update=function(t){if(this.gunCamera){var e=g.mouseRight?20:40;this.gunCamera.fov=p(this.gunCamera.fov,e,10*t)}if(this._swayMovement.set(g.mouseX,g.mouseY).multiplyScalar(5e-4),this._swayMovement.x=f(this._swayMovement.x,-.06,.06),this._swayMovement.y=f(this._swayMovement.y,-.06,.06),this.node.position=this.node.position.lerp(this._swayMovement,t*this._swaySmoothness),this._state&&g.mouseLeft&&(this._fireInterval+=t,this._fireInterval>=1/this.fireRate&&(this._fireInterval=0,this._state.setState(g.mouseRight?w.AIM_FIRE:w.FIRE,!0,0),this.casingPrefab&&this.casingSpawnPoint))){var n=h(this.casingPrefab);n.parent=this.node.scene,n.worldPosition=this.casingSpawnPoint.worldPosition,n.worldRotation=this.casingSpawnPoint.worldRotation}},e}(m)).prototype,"gunCamera",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(d.prototype,"fireRate",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 16}}),R=e(d.prototype,"casingSpawnPoint",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(d.prototype,"casingPrefab",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=d))||C));r._RF.pop()}}}));

System.register("chunks:///_virtual/WxPlatform.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./AppConfig.ts","./BasePlatform.ts","./JJMgr.ts","./WxPlatformBannerAd.ts"],(function(n){"use strict";var i,t,e,o,r,d,a;return{setters:[function(n){i=n.inheritsLoose,t=n.createClass},function(n){e=n.cclegacy},function(n){o=n.WECHAT},null,function(n){r=n.default},function(n){d=n.default},function(n){a=n.default}],execute:function(){e._RF.push({},"94a82hcI5VDmJQGpuTAXQQQ","WxPlatform",void 0),n("default",function(n){function e(){for(var i,t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return(i=n.call.apply(n,[this].concat(e))||this).shareCallBack=void 0,i.sysInfo=void 0,i.bannerSize=void 0,i.bannerTopFactor=0,i.videoAd=void 0,i.isForceShowVideo=void 0,i.videoEndCallback=void 0,i.videoCloseCallback=void 0,i.interAd=void 0,i.interAdOnClose=null,i.homeGridAds=void 0,i.gameGridAd=void 0,i.singleGridAd=void 0,i}i(e,n);var r=e.prototype;return r.init=function(){},r.initAd=function(){},r.setBannerTop=function(n){a.Instance.setBannerTop(n)},r.showBanner=function(){return a.Instance.showBanner()},r.hideBanner=function(){a.Instance.hideBanner()},r.loadVideoAd=function(){},r.showVideoAd=function(n,i,t){return n&&n(),void(i&&i())},r.createInterAd=function(){},r.showInterAd=function(n){this.interAd&&this.interAd.show()},r.createHomeCustomAd=function(n){},r.createGameCustomAd=function(){},r.createSingleCustomAd=function(){},r.showHomeGridAd=function(){},r.hideHomeGridAd=function(){},r.showGameGridAd=function(){if(this.gameGridAd&&d.instance.dataConfig.front_dangezi_switch)for(var n=0;n<this.gameGridAd.length;n++)this.gameGridAd[n].show()},r.hideGameGridAd=function(){if(this.gameGridAd)for(var n=0;n<this.gameGridAd.length;n++)this.gameGridAd[n].hide()},r.showSingleGridAd=function(){},r.hideSingleGridAd=function(){},r.getGridPos=function(n,i){void 0===i&&(i=120);var t={width:20,height:20};return n%2==0?(t.left=20,t.top=i):(t.left=this.sysInfo.windowWidth-90,t.top=i),t},r.getSystemInfoSync=function(){},r.showShareMenuWithTicket=function(n){window.wx.showShareMenu({withShareTicket:n,success:function(){},fail:function(){},complete:function(){}})},r.regisiterWXShareCallback=function(){},r.showToast=function(n,i){},r.shareGame=function(n){},r.playVibrateShort=function(){},r.playVibrateLong=function(){},r.showModal=function(n){},r.WxOnHide=function(n){},r.WxOffHide=function(n){n&&o&&window.wx.offHide(n)},r.WxOnShow=function(n){},r.WxOffShow=function(n){n&&o&&window.wx.offShow(n)},r.aldSendEvent=function(n,i){console.log("埋点：",n)},r.aldSendTest=function(n,i){},r.aldSendOpenid=function(n){},r.JJBannerAdShowCount=function(){},r.JJSendVideoAdCount=function(n,i){},r.JJShareAppMessage=function(n,i){window.wx.JJShareAppMessage((function(){return{title:n.title,imageUrl:n.imageUrl,id:n.id}})).then((function(n){i(n)}))},r.JJOnShareAppMessage=function(n){window.wx.JJOnShareAppMessage((function(){return{title:n.title,imageUrl:n.imageUrl,id:n.id}}))},t(e,[{key:"bannerLoadError",get:function(){return a.Instance.isLoadBannerError},set:function(n){}}],[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}(r))._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/WxPlatformBannerAd.ts",["./rollupPluginModLoBabelHelpers.js","cc","./JJMgr.ts","./JJWxTrap.ts"],(function(n){"use strict";var e,r,t,s;return{setters:[function(n){e=n.createClass},function(n){r=n.cclegacy},function(n){t=n.default},function(n){s=n.default}],execute:function(){r._RF.push({},"51a2ft6sXpGUbTT7jXb3RY+","WxPlatformBannerAd",void 0),n("default",function(){function n(){this._sysInfo=void 0,this.isLoadBannerError=!1,this.bannerIds=void 0,this.bannerAdArr=[],this.bannerTimeArr=[],this.bannerErrorArr=[],this.bannerCountArr=[],this.currentIndex=0,this.indexTime=0,this.showBanner=void 0,this.hideBanner=void 0}var r=n.prototype;return r.initAd=function(n){void 0===n&&(n=[]),this.bannerIds=[],this.bannerIds=this.bannerIds.concat(t.instance.shuffleArr(n)),this.showBanner=this.showBannerFun,this.hideBanner=this.hideBannerFun,this.createBannerAd()},r.createBannerAd=function(){this.bannerAdArr=[],this.bannerTimeArr=[],this.bannerErrorArr=[],this.currentIndex=0;for(var n=0;n<this.bannerIds.length;n++){this.bannerErrorArr.push(!1),this.bannerTimeArr.push(0),this.bannerCountArr.push(0);var e=this.getBannerAd(n);this.bannerAdArr.push(e)}},r.getBannerAd=function(n,e){var r=this;void 0===e&&(e=!1),console.log("创建banner：",n);var s=window.wx.createBannerAd({adUnitId:e?this.getRandomItemInArr(this.bannerIds):this.bannerIds[n],style:{top:.8*this.sysInfo.screenHeight,width:.8*this.sysInfo.screenWidth,left:this.sysInfo.screenWidth/2-150},adIntervals:t.instance.dataConfig.front_banner_auto_refresh_time/1e3});return s.onError((function(){console.log("banner加载失败：",n),r.bannerErrorArr[n]=!0})),s.onLoad((function(){console.log("banner加载成功:",n),r.bannerErrorArr[n]=!1})),s.onResize((function(){s.style.top=r.sysInfo.screenHeight-s.style.realHeight,s.style.left=r.sysInfo.screenWidth/2-s.style.realWidth/2})),s},r.getIsAllError=function(){for(var n=!0,e=0;e<this.bannerErrorArr.length;e++)if(!this.bannerErrorArr[e]){n=!1;break}return n},r.showBannerFun=function(){this.currentIndex>=this.bannerAdArr.length&&(this.currentIndex=0),this.bannerCountArr[this.currentIndex]>=t.instance.dataConfig.front_banner_refresh_num&&(this.bannerCountArr[this.currentIndex]=0,this.currentIndex++,this.currentIndex>=this.bannerAdArr.length&&(this.currentIndex=0));for(var e=0;e<this.bannerErrorArr.length&&0!=this.bannerErrorArr[e];e++);for(var r=0;r<this.bannerErrorArr.length&&this.bannerErrorArr[this.currentIndex];r++)this.bannerTimeArr[this.currentIndex]=0,this.bannerCountArr[this.currentIndex]=0,this.bannerAdArr[this.currentIndex]=this.getBannerAd(this.currentIndex),this.currentIndex++,this.currentIndex>=this.bannerAdArr.length&&(this.currentIndex=0);return this.hideBannerFun(),console.log("当前展示的bannerId：",this.currentIndex),this.bannerAdArr[this.currentIndex]&&(this.bannerAdArr[this.currentIndex].show(),this.bannerCountArr[this.currentIndex]++),s.Instance.com.unschedule(n.Instance.updateBannerTime),s.Instance.com.schedule(n.Instance.updateBannerTime,.1),!0},r.showBannerFun2=function(){this.hideBannerFun(),this.showBannerFun()},r.showBannerFun2Fun=function(){this.showBannerFun()},r.hideBannerFun=function(e){s.Instance.com.unschedule(n.Instance.updateBannerTime);for(var r=0;r<this.bannerAdArr.length;r++)this.bannerAdArr[r]&&this.bannerAdArr[r].hide();e&&this.hideBannerFun2()},r.hideBannerFun2=function(){},r.checkBannerTimeOut=function(){var e=t.instance.dataConfig.front_banner_refresh_time;s.Instance.NewWuchu2||(e=3e4),this.bannerTimeArr[this.currentIndex]>=e/1e3&&(s.Instance.com.unschedule(n.Instance.updateBannerTime),this.hideBannerFun(),this.bannerAdArr[this.currentIndex].destroy(),this.bannerTimeArr[this.currentIndex]=0,this.bannerErrorArr[this.currentIndex]=!0,this.bannerAdArr[this.currentIndex]=this.getBannerAd(this.currentIndex),this.bannerAdArr[this.currentIndex].show(),s.Instance.com.schedule(n.Instance.updateBannerTime,.1))},r.updateBannerTime=function(){var e=n.Instance;e.bannerTimeArr[e.currentIndex]+=.1,e.checkBannerTimeOut()},r.countIndexTime=function(){s.Instance.com.schedule(n.Instance.updateIndexTime,.1)},r.updateIndexTime=function(){var e=n.Instance;e.indexTime+=.1,e.indexTime>=t.instance.dataConfig.front_assign_banner_time/1e3&&(e.hideBannerFun(),e.currentIndex++,e.showBannerFun(),e.indexTime=0)},r.stopCountIndexTime=function(){s.Instance.com.unschedule(n.Instance.updateIndexTime)},r.showHideBanner=function(){s.Instance.com.scheduleOnce(n.Instance.showHideBannerShow,t.instance.dataConfig.front_gezi_time/1e3)},r.showHideBannerShow=function(){n.Instance.showBannerFun(),s.Instance.com.scheduleOnce(n.Instance.showHideBannerHide,1)},r.showHideBannerHide=function(){n.Instance.hideBannerFun(),s.Instance.com.scheduleOnce(n.Instance.showHideBannerShow,t.instance.dataConfig.front_gezi_time/1e3)},r.clearShowHideBanner=function(){s.Instance.com.unschedule(n.Instance.showHideBannerHide),s.Instance.com.unschedule(n.Instance.showHideBannerShow),n.Instance.hideBannerFun()},r.getRandomIndex=function(n){for(var e=[],r=0;r<this.bannerIds.length;r++)e.push(r);return this.getRandomItemInArrWithoutSelf(n,e)[0]},r.setBannerTop=function(n){},r.shuffleArr=function(n){for(var e=n.length;e;){var r=Math.floor(Math.random()*e--),t=[n[e],n[r]];n[r]=t[0],n[e]=t[1]}return n},r.getRandomItemInArrWithoutSelf=function(n,e,r){void 0===r&&(r=1);var t=[].concat(e);return t.splice(t.indexOf(n),1),(t=this.shuffleArr(t)).slice(0,r)},r.getRandomItemInArr=function(n){return n[Math.floor(Math.random()*n.length)]},e(n,[{key:"sysInfo",get:function(){return this._sysInfo||(this._sysInfo=window.wx.getSystemInfoSync()),this._sysInfo}}],[{key:"Instance",get:function(){return n._instance||(n._instance=new n),n._instance}}]),n}())._instance=void 0,r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});