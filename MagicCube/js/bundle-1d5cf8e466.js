!function(){"use strict";var t,e,a,s,i,o,n,r,h,l;!function(t){t.WX="wx",t.OPPO="oppo",t.VIVO="vivo",t.PC="pc"}(t||(t={})),e||(e={}),function(t){t.Load="uiScene/Load.scene",t.Home="uiScene/Home.scene",t.Game="uiScene/Game.scene",t.Over="uiScene/Over.scene",t.Pram="uiScene/Pram.scene"}(a||(a={})),function(t){t[t.Load_Res_Msg_Event=0]="Load_Res_Msg_Event",t[t.Init_Game_Event=1]="Init_Game_Event",t[t.Play_Game_Event=2]="Play_Game_Event",t[t.Over_Game_Event=3]="Over_Game_Event",t[t.Open_Ui_Event=4]="Open_Ui_Event",t[t.Close_Ui_Event=5]="Close_Ui_Event",t[t.Update_Coin_Event=6]="Update_Coin_Event",t[t.Update_Skin_Event=7]="Update_Skin_Event",t[t.Update_NowLevel_Event=8]="Update_NowLevel_Event",t[t.settingPanel_On_Event=9]="settingPanel_On_Event",t[t.settingPanel_Off_Event=10]="settingPanel_Off_Event",t[t.ControlChange=11]="ControlChange",t[t.Tips_UI_Open=12]="Tips_UI_Open",t[t.Tips_UI_Restart=13]="Tips_UI_Restart",t[t.Tips_UI_Quit=14]="Tips_UI_Quit",t[t.Platform_Wake_Event=15]="Platform_Wake_Event",t[t.Platform_Sleep_Event=16]="Platform_Sleep_Event",t[t.Close_Video_Event=17]="Close_Video_Event",t[t.Show_Video_Event=18]="Show_Video_Event",t[t.Update_NativeAd_Event=19]="Update_NativeAd_Event",t[t.Native_Visible_Event=20]="Native_Visible_Event"}(s||(s={})),function(t){t.BGM="Bgm",t.CLICK="Click",t.Rotate="Rotate",t.Add="Add",t.Win="Win",t.Tips="Tips"}(i||(i={})),function(t){t.Low="Low",t.Mid="Mid",t.High="High"}(o||(o={}));class c{constructor(){this.bannerId="",this.videoId="",this.interId="",this.gridId="",this.nativeId="",this.customId="",this.boxPortalId="",this.canSubPackage=!1,this.initAd(),this.regisiterCallback()}initAd(){console.warn("未初始化广告组件")}createBannerAd(t){console.warn("暂不支持Banner广告")}createVideoAd(){console.warn("暂不支持激励视频广告")}createInterAd(){console.warn("暂不支持插屏广告")}createGridAd(){console.warn("暂不支持格子广告")}createNativeAd(t,e){return console.warn("暂不支持原生广告"),null}createBoxProtalAd(){console.warn("暂不支持九宫格广告")}showBannerAd(){}hideBannerAd(){}destroyBannerAd(){}showVideoAd(t,e){t&&t()}destroyVideoAd(){}showInterAd(){}destroyInterAd(){}showGridAd(){}hideGridAd(){}destroyGridAd(){}showNativeAd(t,e){}loadNativeAd(t,e){}destroyNativeAd(t){}showCustomAd(){}hideCustomAd(){}destroyCustomAd(){}showBoxProtalAd(t,e){e&&e()}destroyBoxProtalAd(){}getSystemInfoSync(){return this.sysInfo||(this.sysInfo=this.platformApi.getSystemInfoSync()),this.sysInfo}showToast(t,e){}vibrateShort(){N.GlData.isVibrate&&this.platformApi&&this.platformApi.vibrateShort()}vibrateLong(){N.GlData.isVibrate&&this.platformApi&&this.platformApi.vibrateLong()}loadSubpackage(t,e,a){this.platformApi.loadSubpackage({name:t,success:function(s){N.ConsoleLog("分包加载成功：",t),a.call(s,e,!0)},fail:function(s){N.ConsoleError("分包加载失败：",t,JSON.stringify(s)),a.call(s,e,!1)}}).onProgressUpdate(t=>{N.ConsoleLog("分包================",JSON.stringify(t))})}loadSubpackagesSync(t,e,a){var s=t.length;for(let i=0;i<s;i++)this.loadSubpackage(t[i],e,(t,e)=>{e&&0==--s&&(N.ConsoleLog("全部分包加载完成"),a.call(this,t,e))})}regisiterCallback(){this.platformApi&&(this.platformApi.offShow(this.onShowEvent),this.platformApi.onShow(this.onShowEvent),this.platformApi.offHide(this.onHideEvent),this.platformApi.onHide(this.onHideEvent))}onShowEvent(t){N.Event.event(s.Platform_Wake_Event,{param:t})}onHideEvent(t){N.Event.event(s.Platform_Sleep_Event,{param:t})}createShortcut(t){}hasShortcut(t){}setEnableDebug(){}exitApplication(){}}class d{}class g extends c{initAd(){this.canSubPackage=!0,this.platformApi=Laya.Browser.window.qg,this.bannerId="",this.videoId="414337",this.nativeId="414332",this.boxPortalId="",this.createVideoAd()}createBannerAd(t=!1){this.getPlatformVersionCode<1051?console.warn("版本过低暂不支持Banner广告组件"):(this.bannerAd&&this.destroyBannerAd(),this.bannerAd=Laya.Browser.window.qg.createBannerAd({adUnitId:this.bannerId}),this.bannerAd.onLoad(()=>{t&&this.bannerAd.show().then(()=>{}).catch(t=>{this.createBannerAd()}),console.log("Banner广告加载成功")}),this.bannerAd.onError(t=>{this.bannerAd=null,console.error("Banner广告加载失败",JSON.stringify(t))}),this.bannerAd.onResize(t=>{}))}showBannerAd(){this.bannerAd?this.bannerAd.show().then(()=>{}).catch(t=>{this.createBannerAd(!0)}):this.createBannerAd(!0)}hideBannerAd(){this.bannerAd&&this.bannerAd.hide()}destroyBannerAd(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)}createVideoAd(){this.getPlatformVersionCode<1051?console.warn("版本过低暂不支持激励视频广告组件"):(this.videoAd&&this.destroyVideoAd(),this.videoAd=Laya.Browser.window.qg.createRewardedVideoAd({adUnitId:this.videoId}),this.videoAd.onLoad(t=>{console.log("激励视频广告加载成功")}),this.videoAd.onError(t=>{this.videoAd=null,console.error("激励视频广告加载失败",JSON.stringify(t))}),this.videoAd.onClose(t=>{t&&(t.isEnded?this.videoFinishCallback&&this.videoFinishCallback():this.videoCancelCallback&&this.videoCancelCallback(),Laya.SoundManager.muted=!1,this.videoFinishCallback=null,this.videoCancelCallback=null,this.videoAd.load(),N.Event.event(s.Close_Video_Event,{isEnded:t.isEnded}))}),this.videoAd.load())}showVideoAd(t,e){if(!this.videoAd)return this.createVideoAd(),void this.showToast("广告暂未准备好,请稍后再试",2e3);this.videoFinishCallback=t,this.videoCancelCallback=e,Laya.SoundManager.muted=!0,this.videoAd.show().then(()=>{}).catch(t=>{this.createVideoAd(),this.videoFinishCallback=null,this.videoCancelCallback=null,this.showToast("广告暂未准备好,请稍后再试",2e3),Laya.SoundManager.muted=!1}),N.Event.event(s.Show_Video_Event)}destroyVideoAd(){this.videoAd&&(this.videoAd.destroy(),this.videoAd=null)}createBoxProtalAd(){this.getPlatformVersionCode<1076?console.warn("版本过低暂不支持九宫格广告组件"):(this.boxPortalAd=Laya.Browser.window.qg.createGamePortalAd({adUnitId:this.boxPortalId}),this.boxPortalAd.onLoad(()=>{console.log("九宫格广告加载成功"),Laya.timer.clear(this,this.resetBoxAd)}),this.boxPortalAd.onError(t=>{this.boxPortalAd=null,console.error("九宫格广告加载失败",JSON.stringify(t))}),this.boxPortalAd.onClose(()=>{this.boxPortalCloseCallback&&this.boxPortalCloseCallback(),this.boxPortalCloseCallback=null}),this.boxPortalAd.load(),Laya.timer.once(2e3,this,this.resetBoxAd))}resetBoxAd(){this.boxPortalAd=null}showBoxProtalAd(t,e){if(!this.boxPortalAd)return t&&t(),this.createBoxProtalAd(),void this.showToast("广告暂未准备好,请稍后再试",2e3);this.boxPortalAd.show().then(()=>{this.boxPortalCloseCallback=t,e&&e()}).catch(e=>{this.destroyBoxProtalAd(),t&&t(),this.showToast("广告暂未准备好,请稍后再试",2e3)})}destroyBoxProtalAd(){this.boxPortalAd&&(this.boxPortalAd.destroy(),this.boxPortalAd=null,this.createBoxProtalAd())}createNativeAd(t,e){if(!(this.getPlatformVersionCode<1051)){var a=new d,s=Laya.Browser.window.qg.createNativeAd({adUnitId:t||this.nativeId});return s.load(),s.onLoad(t=>{if(t&&t.adList){a.nativeAd=s;let i=t.adList.pop();a.title=i.title,a.adId=i.adId.toString(),a.imgUrl=i.imgUrlList[0],a.desc=i.desc,console.log("原生广告加载成功"),a.nativeAd.reportAdShow({adId:a.adId}),e&&e(a)}}),s.onError(t=>{console.error("原生广告加载失败",JSON.stringify(t)),e&&e(null)}),a}console.warn("版本过低暂不支持原生广告组件")}showNativeAd(t,e){t&&t.nativeAd&&(t.nativeAd.reportAdClick({adId:t.adId}),e&&e(!0)),e&&e(!1)}loadNativeAd(t,e){t&&t.nativeAd?t.nativeAd.load().then(()=>{e&&e(t)}).catch(t=>{e&&e(null)}):this.createNativeAd(null,e)}destroyNativeAd(t){t&&t.nativeAd&&t.nativeAd.destroy()}get getPlatformVersionCode(){return this.getSystemInfoSync().platformVersionCode}showToast(t,e=1500){Laya.Browser.window.qg.showToast({title:t,duration:e})}createShortcut(t){this.hasShortcut(e=>{0==e&&Laya.Browser.window.qg.installShortcut({success:function(){t&&t()},fail:function(t){},complete:function(){}})})}hasShortcut(t){Laya.Browser.window.qg.hasShortcutInstalled({success:function(e){t&&t(e)},fail:function(t){},complete:function(){}})}setEnableDebug(){qg.setEnableDebug({enableDebug:!0,success:function(){console.log("开启调试面板")},complete:function(){},fail:function(){}})}exitApplication(){this.platformApi&&this.platformApi.exitApplication({})}}class u{static TrackShare(e){switch(N.GlData.platform){case t.WX:var a=Laya.Browser.window.wx;if(!a)return;return a.uma.trackShare(e);case t.VIVO:if(!(s=Laya.Browser.window.qg))return;s.uma.trackEvent(e);break;case t.OPPO:var s;if(!(s=Laya.Browser.window.qg))return}}static TrackEvent(e,a=""){switch(N.GlData.platform){case t.WX:var s=Laya.Browser.window.wx;if(!s)return;s.uma.trackEvent(e,a);break;case t.VIVO:if(!(i=Laya.Browser.window.qg))return;i.uma&&(i.uma.enableVerify=!0,i.uma.trackEvent(e,a)),N.ConsoleLog("友盟发送事件",i.uma,e,a);break;case t.OPPO:var i;if(!(i=Laya.Browser.window.qg))return}}}class y extends c{initAd(){this.canSubPackage=!0,this.platformApi=Laya.Browser.window.qg,this.bannerId="4389ee48e81644b9afa0fa9bd33fb272",this.videoId="2e8ab2cc9643498581b6a9ba395fd5dc",this.nativeId="25bfc8d39174463b9fac0189805e2cb3",this.customId="25bfc8d39174463b9fac0189805e2cb3",this.boxPortalId="",this.createVideoAd()}createBannerAd(t=!1){this.getPlatformVersionCode<1031?console.warn("版本过低暂不支持Banner广告组件"):(this.bannerAd&&this.destroyBannerAd(),this.bannerAd=Laya.Browser.window.qg.createBannerAd({posId:this.bannerId,style:{},adIntervals:30}),this.bannerAd.onLoad(()=>{t&&this.bannerAd.show().then(()=>{}).catch(t=>{this.createBannerAd()}),console.log("Banner广告加载成功")}),this.bannerAd.onError(t=>{this.bannerAd=null,console.error("Banner广告加载失败",JSON.stringify(t))}),this.bannerAd.onClose(()=>{this.createBannerAd()}),this.bannerAd.onSize(t=>{}))}showBannerAd(){this.bannerAd?this.bannerAd.show().then(()=>{}).catch(t=>{this.createBannerAd(!0)}):this.createBannerAd(!0)}hideBannerAd(){this.bannerAd&&this.bannerAd.hide()}destroyBannerAd(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)}createVideoAd(){this.getPlatformVersionCode<1041?console.warn("版本过低暂不支持激励视频广告组件"):(this.videoAd&&this.destroyVideoAd(),this.videoAd=Laya.Browser.window.qg.createRewardedVideoAd({posId:this.videoId}),this.videoAd.onLoad(t=>{console.log("激励视频广告加载成功")}),this.videoAd.onError(t=>{this.videoAd=null,console.error("激励视频广告加载失败",JSON.stringify(t))}),this.videoAd.onClose(t=>{t&&(t.isEnded?(this.videoFinishCallback&&this.videoFinishCallback(),u.TrackEvent("RewardAdFinish")):this.videoCancelCallback&&this.videoCancelCallback(),this.videoFinishCallback=null,this.videoCancelCallback=null,this.videoAd.load(),N.Event.event(s.Close_Video_Event,{isEnded:t.isEnded}),Laya.SoundManager.muted=!1)}))}showVideoAd(t,e){if(u.TrackEvent("RewardAdClick"),!this.videoAd)return this.createVideoAd(),void(t&&t());this.videoFinishCallback=t,this.videoCancelCallback=e,Laya.SoundManager.muted=!0,this.videoAd.show().then(()=>{}).catch(e=>{t&&t(),this.createVideoAd(),this.videoFinishCallback=null,this.videoCancelCallback=null,Laya.SoundManager.muted=!1}),N.Event.event(s.Show_Video_Event)}destroyVideoAd(){this.videoAd&&(this.videoAd=null)}createBoxProtalAd(){Laya.Browser.window.qg.createBoxPortalAd?(this.boxPortalAd=Laya.Browser.window.qg.createBoxPortalAd({posId:this.boxPortalId,marginTop:.4*this.getSystemInfoSync().screenHeight}),this.boxPortalAd.onLoad(()=>{console.log("九宫格广告加载成功")}),this.boxPortalAd.onError(t=>{this.boxPortalAd=null,console.error("九宫格广告加载失败",JSON.stringify(t))}),this.boxPortalAd.onClose(()=>{this.boxPortalCloseCallback&&this.boxPortalCloseCallback(),this.boxPortalCloseCallback=null})):console.warn("版本过低暂不支持九宫格广告组件")}showBoxProtalAd(t){if(!this.boxPortalAd)return t&&t(),void this.createBoxProtalAd();this.boxPortalAd.show().then(()=>{this.boxPortalCloseCallback=t}).catch(e=>{this.destroyBoxProtalAd(),t&&t()})}destroyBoxProtalAd(){this.boxPortalAd&&(this.boxPortalAd.destroy(),this.boxPortalAd=null,this.createBoxProtalAd())}createNativeAd(t,e){if(!(this.getPlatformVersionCode<1053)){var a=new d,s=Laya.Browser.window.qg.createNativeAd({posId:t||this.nativeId});return s.onLoad(t=>{if(t&&t.adList){a.nativeAd=s;let i=t.adList.pop();a.title=i.title,a.adId=i.adId.toString(),a.imgUrl=i.imgUrlList[0],a.desc=i.desc,console.log("原生广告加载成功"),a.nativeAd.reportAdShow({adId:a.adId}),e&&(e(a),e=null)}}),s.onError(t=>{console.error("原生广告加载失败",JSON.stringify(t)),e&&(e(null),e=null)}),a}console.warn("版本过低暂不支持原生广告组件")}showNativeAd(t,e){t&&t.nativeAd&&(t.nativeAd.reportAdClick({adId:t.adId}),e&&e(!0)),e&&e(!1)}loadNativeAd(t,e){t&&t.nativeAd?t.nativeAd.load().then(()=>{e&&e(t)}).catch(t=>{e&&e(null)}):this.createNativeAd(null,e)}destroyNativeAd(t){null}createCustomAd(t=!1){this.getPlatformVersionCode<1091?console.warn("版本过低暂不支持原生模板广告组件"):(this.customAd&&this.destroyCustomAd(),this.customAd=Laya.Browser.window.qg.createCustomAd({posId:this.customId}),this.customAd.onLoad(()=>{t&&this.customAd.show(),console.log("Custom广告加载成功")}),this.customAd.onError(t=>{console.log("原生模板广告加载失败",t)}),this.customAd.show().then(()=>{console.log("原生模板广告展示完成")}).catch(t=>{console.log("原生模板广告展示失败",JSON.stringify(t))}))}showCustomAd(){this.createCustomAd(!0)}hideCustomAd(){this.destroyCustomAd()}destroyCustomAd(){this.customAd&&(this.customAd.destroy(),this.customAd=null)}get getPlatformVersionCode(){return this.getSystemInfoSync().platformVersionCode}showToast(t,e=0){Laya.Browser.window.qg.showToast({message:t,duration:e})}createShortcut(t){this.hasShortcut(e=>{0==e&&Laya.Browser.window.qg.installShortcut({success:function(){t&&t()},fail:function(t){},complete:function(){}})})}hasShortcut(t){Laya.Browser.window.qg.hasShortcutInstalled({success:function(e){t&&t(e)},fail:function(t){}})}}class m extends c{initAd(){this.canSubPackage=!0,this.platformApi=Laya.Browser.window.wx,this.bannerId="",this.videoId="",this.interId="",this.gridId="",this.createBannerAd(),this.createVideoAd(),this.createBoxProtalAd(),this.showShareMenuWithTicket(!0),this.regisiterWXShareCallback()}createBannerAd(t=!1){if(this.compareSDKVersion("2.0.4"))return void console.warn("版本过低暂不支持Banner广告组件");this.bannerAd&&this.destroyBannerAd();let e=this.getSystemInfoSync();this.bannerAd=Laya.Browser.window.wx.createBannerAd({adUnitId:this.bannerId,style:{top:.8*e.screenHeight,width:300,left:e.screenWidth/2-150},adIntervals:30}),this.bannerAd.onLoad(()=>{t&&this.bannerAd.show().then(()=>{}).catch(t=>{this.createBannerAd()}),console.log("Banner广告加载成功")}),this.bannerAd.onError(t=>{this.bannerAd=null,console.error("Banner广告加载失败",JSON.stringify(t))}),this.bannerAd.onResize(t=>{let a=this.bannerAd.style.realHeight+.1;e.model.startsWith("iPhone X")&&(a+=40/Laya.Browser.height*et.height),this.bannerAd.style.top=e.screenHeight-a})}showBannerAd(){this.bannerAd?this.bannerAd.show().then(()=>{}).catch(t=>{this.createBannerAd(!0)}):this.createBannerAd(!0)}hideBannerAd(){this.bannerAd&&this.bannerAd.hide()}destroyBannerAd(){this.bannerAd&&(this.bannerAd.destroy(),this.bannerAd=null)}createVideoAd(){this.compareSDKVersion("2.0.4")?console.warn("版本过低暂不支持激励视频广告组件"):(this.videoAd&&this.destroyVideoAd(),this.videoAd=Laya.Browser.window.wx.createRewardedVideoAd({adUnitId:this.videoId}),this.videoAd.onLoad(t=>{console.log("激励视频广告加载成功")}),this.videoAd.onError(t=>{this.videoAd=null,console.error("激励视频广告加载失败",JSON.stringify(t))}),this.videoAd.onClose(t=>{t&&(t.isEnded?this.videoFinishCallback&&this.videoFinishCallback():this.videoCancelCallback&&this.videoCancelCallback(),this.videoFinishCallback=null,this.videoCancelCallback=null,this.videoAd.load())}))}showVideoAd(t,e){if(!this.videoAd)return this.createVideoAd(),void(t&&t());this.videoFinishCallback=t,this.videoCancelCallback=e,Laya.SoundManager.muted=!0,this.videoAd.show().then(()=>{}).catch(e=>{t&&t(),this.createVideoAd(),this.videoFinishCallback=null,this.videoCancelCallback=null,Laya.SoundManager.muted=!1})}destroyVideoAd(){this.videoAd&&(this.videoAd.destroy(),this.videoAd=null)}get getPlatformVersionCode(){return this.getSystemInfoSync().SDKVersion}compareSDKVersion(t="1.0.0"){let e=this.getPlatformVersionCode.split("."),a=t.split("."),s=!1;for(let t=0;t<e.length&&!(e[t]>a[t]);t++)e[t]!=a[t]&&(s=!0);return s}showToast(t,e=1500){Laya.Browser.window.wx.showToast({title:t,duration:e})}showShareMenuWithTicket(t){wx.showShareMenu({withShareTicket:t,success:function(){},fail:function(){},complete:function(){}})}regisiterWXShareCallback(){if(Laya.Browser.onWeiXin){var t={title:"分享",image:""};Laya.Browser.window.wx.onShareAppMessage(function(){return console.log("用户点击了转发按钮"),{title:t.title,imageUrl:t.image,query:"share_id=1"}})}}}class p{constructor(){this.tween=new Laya.Tween,this.tweens=[]}getTimeByFrame(t){return Math.round(10*t)}toTween(t,e,a,s,i,o=!0){this.target=t,this.isLocal=o;var n={},r={};if(e.pos){var h=o?t.transform.localPosition.clone():t.transform.position.clone();n.posX=h.x,n.posY=h.y,n.posZ=h.z,r.posX=e.pos.x,r.posY=e.pos.y,r.posZ=e.pos.z}if(e.rot){var l=o?t.transform.localRotationEuler.clone():t.transform.rotationEuler.clone();n.rotX=l.x,n.rotY=l.y,n.rotZ=l.z,r.rotX=e.rot.x,r.rotY=e.rot.y,r.rotZ=e.rot.z}if(e.sca){var c=t.transform.getWorldLossyScale().clone();n.scaX=c.x,n.scaY=c.y,n.scaZ=c.z,r.scaX=e.sca.x,r.scaY=e.sca.y,r.scaZ=e.sca.z}this.tween.to(n,{posX:r.posX,posY:r.posY,posZ:r.posZ,rotX:r.rotX,rotY:r.rotY,rotZ:r.rotZ,scaX:r.scaX,scaY:r.scaY,scaZ:r.scaZ},a,i,Laya.Handler.create(this,()=>{var t=this.tweens.shift();t?this.toTween(this.target,t.value,t.time,t.completeFun,i):this.updateTweenCallback&&(this.updateTweenCallback=null),s&&s()}));var d=0;return this.tween.update=new Laya.Handler(this,()=>{if(!t||t.destroyed)return;let s=(d+=Laya.timer.delta)/a;s>1&&(s=1),e.pos&&(o?t.transform.localPosition=new Laya.Vector3(n.posX,n.posY,n.posZ):t.transform.position=new Laya.Vector3(n.posX,n.posY,n.posZ)),e.rot&&(o?t.transform.localRotationEuler=new Laya.Vector3(n.rotX,n.rotY,n.rotZ):t.transform.rotationEuler=new Laya.Vector3(n.rotX,n.rotY,n.rotZ)),e.sca&&t.transform.setWorldLossyScale(new Laya.Vector3(n.scaX,n.scaY,n.scaZ)),this.updateTweenCallback&&this.updateTweenCallback(s)}),this}clearTween(t){this.tweens=[],this.tween.clear(),this.target&&t&&(t.pos&&(this.isLocal?this.target.transform.localPosition=new Laya.Vector3(t.pos.x,t.pos.y,t.pos.z):this.target.transform.position=new Laya.Vector3(t.pos.x,t.pos.y,t.pos.z)),t.rot&&(this.target.transform.rotationEuler=new Laya.Vector3(t.rot.x,t.rot.y,t.rot.z)),t.sca&&this.target.transform.setWorldLossyScale(new Laya.Vector3(t.sca.x,t.sca.y,t.sca.z)))}then(t,e,a){return this.tweens.push({value:t,time:e,completeFun:a}),this}}class v{static add(t,e){var a=new Laya.Vector3;return Laya.Vector3.add(t,e,a),a.clone()}static subtract(t,e){var a=new Laya.Vector3;return Laya.Vector3.subtract(t,e,a),a.clone()}static mull(t,e){var a=new Laya.Vector3;return Laya.Vector3.scale(t,e,a),a.clone()}static dot(t,e){return Laya.Vector3.dot(t,e)}static cross(t,e){var a=new Laya.Vector3;return Laya.Vector3.cross(t,e,a),a.clone()}static normalized(t){var e=new Laya.Vector3;return Laya.Vector3.normalize(t,e),e.clone()}static distance(t,e){var a=v.subtract(t,e);return Laya.Vector3.scalarLength(a)}}class f extends Laya.Script3D{constructor(){super(...arguments),this.rotTime=300,this.isGo=!1}onEnable(){this.self=this.owner}onDisable(){}go(t,e,a=!1){let s=this,i=1,o=new p;this.isGo=!0,i=e?1:t.length-2;let n=()=>{if(!s||s.destroyed)return;let r,h,l;if(e?(r=i>t.length-1,h=i==t.length-1):(r=i<0,h=0==i),l=e?a?"end":"start":a?"start":"end",r)s.isGo=!1,a||N.Level.CarCheck();else{let a,r,c=s.self;if(h){let e=t[i].transform.localPosition.clone(),s=v.normalized(v.subtract(e,c.transform.localPosition.clone()));a=v.subtract(e,v.mull(s,.8))}else a=t[i].transform.localPosition.clone();let d=2e3*(r=v.distance(c.transform.localPosition.clone(),a))/10;if("rotate"==t[i].name){let e=t[i].getChildByName(l).transform.localRotation.clone();o.toTween(c,{pos:a},d,()=>{if(!s||s.destroyed)return;let t=c.transform.localRotation.clone(),a=e;o.updateTweenCallback=(e=>{s.goRot(c,t,a,e)}),o.toTween(c,{},s.rotTime,()=>{n()})})}else o.toTween(c,{pos:a},d,()=>{n()},null,!0);e?i++:i--}};n()}goRot(t,e,a,s){if(!t||t.destroyed)return;let i=new Laya.Quaternion;Laya.Quaternion.lerp(e,a,s,i),t.transform.localRotation=i}}!function(t){t.start="touchStart",t.move="touchMove",t.end="touchEnd",t.getAxis="GetAxis",t.slideWay="slideWay",t.singleTouchStart="singleTouchStart",t.singleTouchMove="singleTouchMove",t.singleTouchEnd="singleTouchEnd",t.secondTouchStart="secondTouchStart",t.secondTouchMove="secondTouchMove",t.secondTouchEnd="secondTouchEnd",t.getAxisAlways="getAxisAlways"}(n||(n={}));class L extends Laya.Script{constructor(){super(...arguments),this.isPressed=!1,this.hOriginal=0,this.vOriginal=0,this.hAxis=0,this.vAxis=0,this.outAxis=0}onEnable(){L.instance=this}onMouseDown(t){N.Event.event(n.start,[t])}onMouseMove(t){N.Event.event(n.move,[t])}onMouseUp(t){N.Event.event(n.end,[t])}}class w{static Vector2Add(t,e){return new Laya.Vector2(t.x+e.x,t.y+e.y)}static Vector2Reduce(t,e){return new Laya.Vector2(t.x-e.x,t.y-e.y)}static Vector2Scale(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}static gameButtonOn(t,e,a,s){t.offAllCaller(e),t.on(Laya.Event.MOUSE_DOWN,e,a),t.on(Laya.Event.MOUSE_UP,e,s),t.on(Laya.Event.MOUSE_OUT,e,s)}static buttonOffAll(t,e){t&&t.offAllCaller(e)}}class b{constructor(){this.sawControlType=0,this.paths=[],this.deadPoint=[],this.fakeLevel=0,this.minFov=40,this.maxFov=60,this.nowCubeId=0,this.isFirstInit=!0,this.lastLevelIndex=0,this.isFinish=!1,this.isRealFinish=!1,this.ControlOn=!0,this.isSecond=!1,this.isSawCanControl=!1,this.rotateSawSpeed=22.5,this.maxLerpAxis=.3,this.minLerpAxis=.001,this.targetRot=new Laya.Vector3,this.nowRot=new Laya.Vector3,this.cubeControlType=1,this.startPos=new Laya.Vector2,this.nowPos=new Laya.Vector2,this.isCanCubeControl=!1,this.isCubeMoving=!1,this.colliders=[],this.steps=[],this.startSteps=[],this.tipsInvertal=1e3,this.isHintDone=!1,this.isTips=!1,this.init()}init(){if(N.ConsoleLog("分包总开关",N.GlData.isSubPackage),N.ConsoleLog("平台分包是否允许",N.Platform.canSubPackage),N.GlData.isSubPackage&&N.Platform.canSubPackage){N.ConsoleLog("开始加载分包");let t=["scene"];N.Res.addLoadRes("分包"),N.Platform.loadSubpackagesSync(t,this,(t,e)=>{e&&(t.load3DRes(),N.Res.removeLoadRes("分包"),N.ConsoleLog("分包加载完毕"),this.setBg())})}else this.load3DRes(),this.setBg();this.initEvent(),this.readJson()}setBg(){let t=new Laya.Scene;Laya.stage.addChildAt(t,0),t.size(Laya.stage.width,Laya.stage.height),this.bg=new Laya.Image("ui/game/jb2.png"),t.addChild(this.bg),this.bg.width=Laya.stage.width,this.bg.height=Laya.stage.height}load3DRes(){N.Res.addLoadRes("场景");var t=[{url:N.GlData.sceneResUrl,clas:Laya.Scene3D,priority:1}];Laya.loader.create(t,Laya.Handler.create(this,this.onLoadFinished,[{target:"3dRes"}],!1),Laya.Handler.create(this,this.onLoading,null,!1)),Laya.loader.on(Laya.Event.ERROR,this,t=>{console.error("资源加载失败",t)})}onLoadFinished(t){N.ConsoleLog("资源加载完成",t),N.Res.removeLoadRes("场景")}onLoading(t){N.Res.updateLoadRes("场景",t,!1)}initEvent(){N.Event.on(s.Load_Res_Msg_Event,this,this.onLoadResEvent),N.Event.on(s.Init_Game_Event,this,this.onInitGameEvent),N.Event.on(s.Play_Game_Event,this,this.onPlayGameEvent),N.Event.on(s.Over_Game_Event,this,this.onOverGameEvent),this.initEventSpecial()}onLoadResEvent(t){t.allComplete&&this.loadSceneRes(1)}onInitGameEvent(t){0==N.GlData.playCount&&N.UI.openScene(a.Home)}onPlayGameEvent(t){N.UI.openScene(a.Game)}onOverGameEvent(t){N.UI.openScene(a.Over,!0,t)}loadSceneRes(t=0){let e=Laya.loader.getRes(N.GlData.sceneResUrl);Laya.stage.addChild(e),Laya.stage.setChildIndex(e,t),this.mainScene=e;let a=O.d3_FindNodeByName(e,"Main Camera");return a?this.mainCamera=a:N.ConsoleWarn("未找到场景主相机"),e}loadModelRes(){return this.loadResByUrl(N.GlData.modelResUrl)}loadResByUrl(t){return Laya.loader.getRes(t)}createShadow(t){t.shadowMode=Laya.ShadowMode.SoftHigh,t.shadowDistance=60,t.shadowResolution=2048,t.shadowCascadesMode=Laya.ShadowCascadesMode.TwoCascades,t.shadowNormalBias=.4,t.shadowStrength=.3}setFog(t,e,a){e.enableFog=t,t&&(e.fogColor=a,e.fogStart=50,e.fogRange=80)}bornStageObj(t,e){let a=O.d3_FindNodeByName(this.prefabs,t).clone();return e?e.addChild(a):this.mainScene.addChild(a),a.transform.localPosition=new Laya.Vector3,a.transform.localRotationEuler=new Laya.Vector3,a.transform.localScale=new Laya.Vector3(1,1,1),a}readJson(){N.Res.addLoadRes("配置");let t=["res/json/StagesConfig.json"];Laya.loader.load(t[0],Laya.Handler.create(this,t=>{N.ConsoleLog("stagesData",t),this.stagesData=t,N.Res.removeLoadRes("配置")}),null,Laya.Loader.JSON)}createMap(t,e){let a=t.self,s=this.prefabs.getChildByName(a.name);if(s)var i=O.d3_CloneSprite(s);else i=new Laya.Sprite3D;if(i.name=a.name,e.addChild(i),i.transform.position=new Laya.Vector3(a.position.x,a.position.y,a.position.z),i.transform.localRotationEuler=new Laya.Vector3(a.rotation.x,a.rotation.y,a.rotation.z),t.models.length>0)for(let e=0;e<t.models.length;e++)this.createMap(t.models[e],i)}fxInit(){this.fxPrefabs=this.prefabs.getChildByName("Fx")}fxBorn(t,e,a,s){let i=this.fxPrefabs.getChildByName(t).clone();s?s.addChild(i):this.mainScene.addChild(i),i.transform.position=e,i.transform.rotation=a,Laya.timer.once(3e3,this,()=>{i.destroy()})}initEventSpecial(){N.Event.on(s.Tips_UI_Open,this,this.tipsOn),N.Event.on(s.Tips_UI_Restart,this,this.tipsRestart),N.Event.on(s.Tips_UI_Quit,this,this.tipsQuit),N.Event.on(s.ControlChange,this,this.controlChange),N.Event.on(s.settingPanel_On_Event,this,()=>{this.ControlOn=!1}),N.Event.on(s.settingPanel_Off_Event,this,()=>{this.ControlOn=!0}),N.Event.on(n.getAxis,this,this.cubeSawControl),N.Event.on(n.singleTouchStart,this,this.cubeTouch),N.Event.on(n.singleTouchMove,this,this.cubeMove),N.Event.on(n.singleTouchEnd,this,this.cubeWayCheck),N.Event.on(n.secondTouchMove,this,this.cubeSawControl2),N.Event.on(s.Load_Res_Msg_Event,this,this.firstIn),N.Event.on(s.Init_Game_Event,this,t=>{this.isFirstInit=!0,this.roundInit(),N.GlData.playCount>0&&(this.gameStart(),N.UI.openScene(a.Game)),t&&t.select?u.TrackEvent("StartLevel",N.GlData.nowLevel.toString()+"select"):u.TrackEvent("StartLevel",N.GlData.nowLevel.toString()+"normal")}),N.Event.on(s.Play_Game_Event,this,this.gameStart)}firstIn(e){e.allComplete&&(N.GlData.platform,t.PC,N.GlData.nowLevel=N.Storage.storageData.level,this.prefabs=this.mainScene.getChildByName("Prefabs"),this.fxInit(),this.tipsCamera=this.mainCamera.parent.getChildByName("TipsCamera"),this.tipsCamera.active=!1,this.light=this.mainScene.getChildByName("Directional Light"),this.lightStartPos=this.light.transform.position.clone(),this.lightStartRot=this.light.transform.rotation.clone(),this.createShadow(this.light),N.Sound.playMusicLoop(i.BGM),N.Event.on(s.Platform_Wake_Event,this,()=>{N.Sound.playMusicLoop(i.BGM)}),N.Level.bg.width=Laya.stage.width,N.Level.bg.height=Laya.stage.height,u.TrackEvent("LoadFinish"))}roundInit(){this.rotTween&&this.rotTween.clearTween(),Laya.timer.clearAll(this),this.touchPanel=null,this.XGrip&&this.XGrip.destroy();let t=this.prefabs.getChildByName("XGrip");t.getChildByName("Axel"),t.getChildByName("ScanPlane");this.XGrip=t.clone(),this.mainScene.addChild(this.XGrip),this.XGrip.transform.position=new Laya.Vector3(0,0,0),this.fakeLevel=N.GlData.nowLevel-1;let e=this.stagesData.length,a=this.fakeLevel%e+1,s=[];if(this.fakeLevel>e-1)if(this.isFirstInit){let t=this.fakeLevel-e;if(t>=N.Storage.storageData.randomStageInfo.length){N.ConsoleLog("随机关卡");let t=[12,15,11,21,22,23,24,25,26,27];a=t[O.randomInt(0,t.length-1)],this.lastLevelIndex=a}else a=N.Storage.storageData.randomStageInfo[t].levelIndex,s=N.Storage.storageData.randomStageInfo[t].steps,this.lastLevelIndex=a}else a=this.lastLevelIndex;let i=O.randomInt(0,2);i=this.fakeLevel<15?2:Math.floor((this.fakeLevel-15)/15)%3;let o=this.stagesData[a-1].name.split("_")[1];this.cubeStage=this.XGrip.getChildByName(o),this.axel=this.cubeStage.getChildByName("Axel"),this.scanPlane=this.cubeStage.getChildByName("ScanPlane"),this.cubeStage.transform.localRotationEuler=new Laya.Vector3,this.cubePlaneInit(),this.cubes&&this.cubes.destroy();let n=new Laya.Sprite3D(this.stagesData[a-1].name);this.mainScene.addChild(n),this.waterMat=null;for(let t=0;t<this.stagesData[a-1].cubes.length;t++){let e=this.stagesData[a-1].cubes[t],s=this.bornStageObj(e.name,n);s.transform.localPosition=new Laya.Vector3(e.pos.x,e.pos.y,e.pos.z),s.transform.localRotation=new Laya.Quaternion(e.rot.x,e.rot.y,e.rot.z,e.rot.w);let o=s.getChildAt(0);for(let t=0;t<o.numChildren;t++)o.getChildAt(t).active=!1;if(o.getChildAt(i).active=!0,1==i&&!this.waterMat){let t=o.getChildAt(i).meshRenderer.sharedMaterials;this.waterMat=t.filter(t=>-1!=t.name.indexOf("sea"))[0],Laya.timer.loop(16,this,()=>{this.waterMat.tilingOffsetW-=.002})}}this.cubes=n,this.cubes.transform.localPosition=new Laya.Vector3,this.startRot=new Laya.Quaternion(this.stagesData[a-1].rot.x,this.stagesData[a-1].rot.y,this.stagesData[a-1].rot.z,this.stagesData[a-1].rot.w),this.cubeStage.addChild(this.cubes),this.cubes.transform.localRotationEuler=new Laya.Vector3(0,0,0),this.cubeStage.transform.localRotation=this.startRot,this.paths=[],this.deadPoint=[];let h=[];for(let t=0;t<this.cubes.numChildren;t++){let e=this.cubes.getChildAt(t),a=e.getChildByName("path"),s=[];if(a){for(let e=0;e<a.numChildren;e++){let i=a.getChildAt(e),n=0;"2*2*2"==o&&(Math.abs(Math.abs(i.transform.position.x)-6.5)<1&&n++,Math.abs(Math.abs(i.transform.position.y)-6.5)<1&&n++,Math.abs(Math.abs(i.transform.position.z)-6.5)<1&&n++,n>1&&"rotate"!=i.name&&(t!=this.cubes.numChildren-1?(this.deadPoint.push(new Laya.Vector2(t,e)),N.ConsoleLog("死路点",t,e)):N.ConsoleLog("终点不算死路"))),"3*3*3"==o&&(Math.abs(Math.abs(i.transform.position.x)-9.75)<1&&n++,Math.abs(Math.abs(i.transform.position.y)-9.75)<1&&n++,Math.abs(Math.abs(i.transform.position.z)-9.75)<1&&n++),n>1&&"rotate"!=i.name&&(N.ConsoleLog(n,i.transform.position),t!=this.cubes.numChildren-1?(this.deadPoint.push(new Laya.Vector2(t,e)),N.ConsoleLog("死路点",t,e)):N.ConsoleLog("终点不算死路")),s.push(i)}this.paths.push(s)}else this.paths.push(s);let i=e.getChildByName("terrains");for(let t=0;t<i.numChildren;t++){let e=i.getChildAt(t);h.push(e)}}let l=[];for(let t=0;t<h.length;t++)for(let e=t+1;e<h.length;e++)if(v.distance(h[t].transform.position.clone(),h[e].transform.position.clone())<1){let a=h[t].getChildAt(0).name,s=h[e].getChildAt(0).name;"empty"==a&&"empty"!=s?l.push(t):"empty"!=a&&"empty"==s?l.push(e):l.push(t)}for(let t=0;t<this.scanPlane.numChildren;t++){let e=this.scanPlane.getChildAt(t);for(let t=0;t<h.length;t++){if(-1!=l.indexOf(t))continue;let a=h[t];if(v.distance(e.transform.position.clone(),a.transform.position.clone())<1){let t=a.getChildAt(0),e=t.name,s=1;switch(o){case"3*3*3":s=.25;break;case"2*2*2":s=.15;break;case"2*2*1":s=.05;break;case"1*2*1":s=0}this.bornTerrains(i,e,t,s)}}}this.cubeType=o;let c=this.bornStageObj("Start",this.paths[0][0]);for(let t=0;t<c.numChildren;t++)t!=i&&(c.getChildAt(t).active=!1);for(let t=this.paths.length-1;t>=0;t++){if(this.paths[t].length>0){let e=this.bornStageObj("End",this.paths[t][this.paths[t].length-1]);for(let t=0;t<e.numChildren;t++)t!=i&&(e.getChildAt(t).active=!1);this.endPoint=e;break}}let d=["up","bottom"],g=this.mainCamera,u=this.tipsCamera,y=g.transform.position.clone(),m=u.transform.position.clone();switch(o){case"3*3*3":this.minFov=60,this.maxFov=80,d=[],y.y=-5,m.y=-5;for(let t=0;t<this.axel.numChildren;t++)d.push(this.axel.getChildAt(t).name);break;case"2*2*2":this.minFov=45,this.maxFov=65,d=[],y.y=-3.5,m.y=-3;for(let t=0;t<this.axel.numChildren;t++)d.push(this.axel.getChildAt(t).name);break;case"2*2*1":this.minFov=40,this.maxFov=60,d=[],y.y=-2.75,m.y=-1;for(let t=0;t<this.axel.numChildren;t++)d.push(this.axel.getChildAt(t).name);break;case"1*2*1":this.minFov=30,this.maxFov=50,d=[],y.y=-2.5,m.y=0;for(let t=0;t<this.axel.numChildren;t++)d.push(this.axel.getChildAt(t).name)}g.transform.position=y,this.tipsCamera.transform.position=m,this.mainCamera.fieldOfView=(this.maxFov+this.minFov)/1.8,this.car&&this.car.destroy();let p=this.prefabs.getChildByName("Objs").getChildByName("Car");this.car=p.clone();let f=this.paths[0][0],L=this.paths[0][1];f.parent.parent.addChild(this.car);let w=f.transform.position.clone(),b=v.normalized(v.subtract(L.transform.position.clone(),w));this.car.transform.position=v.add(w,v.mull(b,.8)),this.car.transform.rotation=this.paths[0][0].transform.rotation.clone();let C=this.car.getChildByName("Grip");for(let t=0;t<C.numChildren;t++)t!=i&&(C.getChildAt(t).active=!1);if(this.nowCubeId=0,this.stepsInit(),this.isFirstInit)switch(this.fakeLevel+1){case 1:this.cubeRotateStart("up","reduce");break;case 2:this.cubeRotateStart("bottom","reduce");break;case 3:this.cubeRotateStart("bottom","add"),this.cubeRotateStart("bottom","add");break;case 4:this.cubeRotateStart("bottom","reduce");break;case 5:case 6:this.cubeRotateStart("left","add");break;case 7:this.cubeRotateStart("bottom","add");break;case 8:this.cubeRotateStart("front","reduce");break;case 9:this.cubeRotateStart("front","add");break;case 10:this.cubeRotateStart("front","reduce"),this.cubeRotateStart("front","reduce");break;case 11:this.cubeRotateStart("bottom","add"),this.cubeRotateStart("bottom","add");break;case 12:this.cubeRotateStart("front","reduce"),this.cubeRotateStart("front","reduce");break;case 13:this.cubeRotateStart("left","add"),this.cubeRotateStart("left","add");break;case 14:this.cubeRotateStart("front","add"),this.cubeRotateStart("front","add");break;case 15:this.cubeRotateStart(r.front,r.reduce),this.cubeRotateStart("left","add");break;case 16:this.cubeRotateStart(r.front,r.reduce),this.cubeRotateStart(r.bottom,r.reduce);break;case 17:this.cubeRotateStart(r.bottom,r.add),this.cubeRotateStart(r.front,r.reduce);break;case 18:this.cubeRotateStart(r.front,r.reduce),this.cubeRotateStart(r.bottom,r.reduce);break;case 19:this.cubeRotateStart(r.left,r.add),this.cubeRotateStart(r.front,r.reduce);break;case 20:this.cubeRotateStart("right","add"),this.cubeRotateStart("back","add");break;case 21:this.cubeRotateStart("left","add"),this.cubeRotateStart("front","add"),this.cubeRotateStart("bottom","add");break;case 22:this.cubeRotateStart("left","reduce"),this.cubeRotateStart(r.front,r.reduce),this.cubeRotateStart(r.bottom,r.add);break;case 23:this.cubeRotateStart("front","add"),this.cubeRotateStart("up","reduce"),this.cubeRotateStart("back","reduce");break;case 24:this.cubeRotateStart("front","add"),this.cubeRotateStart("bottom","reduce"),this.cubeRotateStart("front","add");break;case 25:this.cubeRotateStart("back","add"),this.cubeRotateStart("midZ","add");break;case 26:this.cubeRotateStart("midY","reduce");break;case 27:this.cubeRotateStart("front","add");break;case 28:this.cubeRotateStart("midZ","add");break;case 29:this.cubeRotateStart("bottom","reduce");break;case 30:this.cubeRotateStart("back","add");break;case 31:this.cubeRotateStart("right","reduce"),this.cubeRotateStart("midZ","add");break;case 32:this.cubeRotateStart("midY","add"),this.cubeRotateStart("front","add");break;case 33:this.cubeRotateStart("back","reduce"),this.cubeRotateStart("bottom","reduce");break;case 34:this.cubeRotateStart("midZ","add"),this.cubeRotateStart("up","add");break;case 35:this.cubeRotateStart("midZ","add"),this.cubeRotateStart("left","add");break;default:if(s.length>0)for(let t=0;t<s.length;t++)this.cubeRotateStart(s[t].axelOrCubeId,s[t].way);else for(let t=0;t<3;t++){let t=d[O.randomInt(0,d.length-1)],e="add";O.halfPercent()&&(e="reduce"),this.cubeRotateStart(t,e)}}else for(let t=0;t<this.startSteps.length;t++)this.cubeRotateStart(this.startSteps[t].axelOrCubeId,this.startSteps[t].way);if(Laya.timer.clear(this,this.rotUpdate),Laya.timer.frameLoop(1,this,this.rotUpdate),this.controlChange(0),this.isFirstInit){if(this.isFirstInit=!1,this.isTips=!1,this.fakeLevel-e>=N.Storage.storageData.randomStageInfo.length){let t={levelIndex:a,steps:O.cloneArray(this.startSteps)};N.Storage.writeRandomStageData(t)}}let S=new Laya.Vector3;f.transform.getUp(S),Math.abs(S.x)<.1&&(S.x=0),Math.abs(S.y)<.1&&(S.y=0),Math.abs(S.z)<.1&&(S.z=0),this.nowRot.x=20,S.y>0||S.x<0&&S.z>0||S.x>0&&S.z>0?N.ConsoleLog("正面不用处理"):(N.ConsoleLog("背面"),this.nowRot.y+=180,this.targetRot.y=this.nowRot.y,S.y<0&&(this.nowRot.x=-20,this.targetRot.x=-20)),N.ConsoleLog("初始化完毕")}gameStart(){this.isFinish=!1,this.isRealFinish=!1,this.CarStartGo(),N.Sound.playMusicLoop(i.BGM),N.ConsoleLog("游戏开始")}gameRestart(){this.isFinish?this.isTips&&(this.roundInit(),this.CarStartGo(),this.isFinish=!1,this.isRealFinish=!1):(this.roundInit(),this.CarStartGo())}gameFinish(){this.isFinish=!0}gameRealFinish(){this.isRealFinish||(this.fxBorn(h.ConfettiBlastRainbow,this.car.transform.position.clone(),this.car.transform.rotation.clone(),this.endPoint),this.car.active=!1,N.Sound.play(i.Win),this.isRealFinish=!0,this.isTips||Laya.timer.once(2e3,this,()=>{N.Event.event(s.Over_Game_Event,{isWin:!0})}))}jumpStage(){this.isFinish=!0,this.car.active=!1,this.isRealFinish=!0,N.Event.event(s.Over_Game_Event,{isWin:!0})}cubeTouch(t){if(!this.ControlOn)return;this.point=new Laya.Vector2,this.out=new Laya.HitResult,this.point.x=t.stageX*Laya.stage.clientScaleX,this.point.y=t.stageY*Laya.stage.clientScaleY,this.mainCamera.viewportPointToRay(this.point,this.ray),this.mainScene.physicsSimulation.rayCast(this.ray,this.out);let e=this.out.succeeded&&!this.isTips;this.isRealFinish&&(e=!1),e?(this.touchPanel=this.out.collider.owner,this.isSawCanControl=!1,this.isCanCubeControl=!0,this.startPos.x=this.point.x,this.startPos.y=this.point.y,this.nowPos.x=this.point.x,this.nowPos.y=this.point.y):(this.isSawCanControl=!0,this.isCanCubeControl=!1)}rotUpdate(){let t=new Laya.Vector3;v.distance(this.targetRot,this.nowRot);switch(this.rotLerpAxis=this.maxLerpAxis,Laya.Vector3.lerp(this.nowRot,this.targetRot,this.rotLerpAxis,t),this.nowRot=t,this.sawControlType){case 0:this.XGrip.transform.localRotationEuler=new Laya.Vector3(this.nowRot.x,0,0),this.cubeStage.transform.localRotationEuler=new Laya.Vector3(0,this.nowRot.y,0)}}controlChange(t){this.sawControlType=t,1==this.sawControlType||0==this.sawControlType&&(this.XGrip.transform.localRotationEuler=new Laya.Vector3(30,0,0),this.startRot&&(this.cubeStage.transform.rotation=this.startRot),this.targetRot=new Laya.Vector3(this.XGrip.transform.localRotationEuler.x,this.cubeStage.transform.localRotationEuler.y,0),this.nowRot=this.targetRot),N.ConsoleLog("控制改变",this.sawControlType)}cubeSawControl(t){if(!this.isSawCanControl)return;if(!this.ControlOn)return;let e,a,s=t.x,i=t.y,o=new Laya.Vector3(i*this.rotateSawSpeed*.01,s*this.rotateSawSpeed*.01,0);switch(this.sawControlType){case 0:(e=this.targetRot.x+o.x)>=90?e=90:e<=-90&&(e=-90),a=this.targetRot.y+o.y,this.targetRot=new Laya.Vector3(e,a,0);break;case 1:this.cubeStage.transform.rotate(o,!1,!1)}}cubeSawControl2(t){if(!this.ControlOn)return;let e,a;switch(this.sawControlType){case 0:a=((e=this.mainCamera.fieldOfView)-this.minFov)/(this.maxFov-this.minFov)-.02*t.distance*260,this.mainCamera.fieldOfView=O.numberLerp(this.minFov,this.maxFov,a);break;case 1:this.cubeStage.transform.rotate(new Laya.Vector3(0,0,.5*-t.angle*this.rotateSawSpeed),!1,!1),a=((e=this.mainCamera.fieldOfView)-this.minFov)/(this.maxFov-this.minFov)-.5*t.distance*260,this.mainCamera.fieldOfView=O.numberLerp(this.minFov,this.maxFov,a)}}cubeMove(t){if(this.ControlOn&&this.isCanCubeControl&&!this.isCubeMoving)if(this.point=new Laya.Vector2,this.out=new Laya.HitResult,this.point.x=t.stageX*Laya.stage.clientScaleX,this.point.y=t.stageY*Laya.stage.clientScaleY,this.mainCamera.viewportPointToRay(this.point,this.ray),this.mainScene.physicsSimulation.rayCast(this.ray,this.out),this.out.succeeded)this.nowPos.x=this.point.x,this.nowPos.y=this.point.y;else{let t=w.Vector2Reduce(this.nowPos,this.startPos),e=100;Laya.Vector2.scalarLength(t)<e&&(this.isSawCanControl=!0,this.isCanCubeControl=!1)}}cubeWayCheck(t){if(!this.ControlOn)return;if(!this.isCanCubeControl)return;if(this.isCubeMoving)return;if(!this.touchPanel)return;let e=[],a=[],s=[],i=O.d3_getSpritePosBySprite3DPoint(this.touchPanel);for(let t=0;t<this.touchPanel.numChildren;t++){let o=this.touchPanel.getChildAt(t);if(o){let t=O.d3_getSpritePosBySprite3DPoint(o),n=new Laya.Vector2(t.x-i.x,t.y-i.y);e.push(t),a.push(o.name),s.push(n)}}let o,n=w.Vector2Reduce(this.nowPos,this.startPos),r=1e4,h=-1,l=1e4;switch(this.cubeControlType){case 0:if(Laya.Vector2.scalarLength(n)>100)for(let t=0;t<e.length;t++){let a=Laya.Vector2.scalarLength(w.Vector2Reduce(this.nowPos,e[t]));a<l&&(l=a,h=t)}break;case 1:if(Laya.Vector2.scalarLength(n)>100)for(let t=0;t<s.length;t++){let e=O.getAngle2D(n,s[t]);e<r&&(r=e,h=t)}}if(-1!=h){let t=(o=a[h].split("_"))[0],e=o[1];this.cubeRotate(t,e,!1)}}cubePlaneInit(){for(let t=0;t<this.colliders.length;t++)this.colliders[t].destroy();for(let t=0;t<this.scanPlane.numChildren;t++){let e=this.scanPlane.getChildAt(t).addComponent(Laya.PhysicsCollider),a=new Laya.BoxColliderShape(6.5,0,6.5);e.colliderShape=a,this.colliders.push(e)}this.mainScene.physicsSimulation.continuousCollisionDetection=!0,this.ray=new Laya.Ray(new Laya.Vector3(0,0,0),new Laya.Vector3(0,0,0)),this.point=new Laya.Vector2(0,0),this.out=new Laya.HitResult}cubeRotate(t,e,a=!1,s){let o=this.axel.getChildByName(t),n=o.getChildByName("axel");if(o){let o=[];for(let t=0;t<n.numChildren;t++){let e=n.getChildAt(t);for(let t=this.cubes.numChildren-1;t>=0;t--){let a=this.cubes.getChildAt(t);if(v.distance(e.transform.position.clone(),a.transform.position.clone())<1){let t=a.transform.position.clone(),s=a.transform.rotation.clone();e.addChild(a),o.push(a),a.transform.position=t,a.transform.rotation=s}}}this.rotTween=new p;let h=n.transform.localRotationEuler.clone();n.transform.localRotationEuler=h,"add"==e?(h.y-=90,"2*2*1"==this.cubeType&&(h.y-=90)):"reduce"==e?(h.y+=90,"2*2*1"==this.cubeType&&(h.y+=90)):N.ConsoleError("行为信息错误",e);let l=this;this.isCubeMoving=!0;let c=300;"2*2*1"==this.cubeType&&(c=600),this.rotTween.toTween(n,{rot:h},c,()=>{d(),l.isCubeMoving=!1,this.CarCheck()}),a?this.stepReduce():this.stepAdd(r.cube,t,e);let d=()=>{for(let t=0;t<o.length;t++)if(o[t]&&!o[t].destroyed){let e=o[t].transform.position.clone(),a=o[t].transform.rotation.clone();this.cubes.addChild(o[t]),o[t].transform.position=e,o[t].transform.rotation=a}s&&s(),N.Platform.vibrateShort()};N.Sound.play(i.Rotate)}else N.ConsoleError("名字信息错误",t)}cubeRotateStart(t,e){let a=this.axel.getChildByName(t),s=a.getChildByName("axel");if(a){let a=[];for(let t=0;t<s.numChildren;t++){let e=s.getChildAt(t);for(let t=this.cubes.numChildren-1;t>=0;t--){let s=this.cubes.getChildAt(t);if(v.distance(e.transform.position.clone(),s.transform.position.clone())<1){let t=s.transform.position.clone(),i=s.transform.rotation.clone();e.addChild(s),a.push(s),s.transform.position=t,s.transform.rotation=i}}}let i=s.transform.localRotationEuler.clone();s.transform.localRotationEuler=i,"add"==e?(i.y-=90,"2*2*1"==this.cubeType&&(i.y-=90)):"reduce"==e?(i.y+=90,"2*2*1"==this.cubeType&&(i.y+=90)):N.ConsoleError("行为信息错误",e);let o=this;this.isCubeMoving=!0,s.transform.localRotationEuler=i,this.startStepAdd(r.cube,t,e),(()=>{for(let t=0;t<a.length;t++){let e=a[t].transform.position.clone(),s=a[t].transform.rotation.clone();this.cubes.addChild(a[t]),a[t].transform.position=e,a[t].transform.rotation=s}})(),o.isCubeMoving=!1}else N.ConsoleError("名字信息错误",t)}CarStartGo(){this.car.addComponent(f).go(this.paths[0],!0),this.stepAdd(r.car,0,r.start)}CarCheck(){let t=this.car.transform.position.clone();if(this.car.getComponent(f).isGo)return;if(this.isCubeMoving)return;if(this.isFinish)return void this.gameRealFinish();let e=!1,a=-1,s=!1,i=new Laya.Vector2;for(let o=0;o<this.paths.length;o++){let n=this.paths[o].length;if(o!=this.nowCubeId&&n>0){let i=this.paths[o][0].transform.position.clone(),r=this.paths[o][n-1].transform.position.clone();v.distance(t,i)<1.05?(e=!0,s=!0,a=o):v.distance(t,r)<1.05&&(e=!0,s=!1,a=o)}else if(o==this.nowCubeId){let e=this.paths[o][0].transform.position.clone(),a=this.paths[o][n-1].transform.position.clone();v.distance(t,e)<1&&(i.x=o,i.y=0),v.distance(t,a)<1&&(i.x=o,i.y=this.paths[o].length-1)}}for(let t=0;t<this.deadPoint.length;t++)if(this.deadPoint[t].x==i.x&&this.deadPoint[t].y==i.y){if(N.ConsoleLog("死路掉头"),0==i.y)this.car.transform.rotation=this.paths[this.nowCubeId][0].transform.rotation.clone(),this.CarGo(i.x,!0);else{let t=this.paths[this.nowCubeId].length;this.car.transform.rotation=this.paths[this.nowCubeId][t-1].transform.rotation.clone(),this.CarGo(i.x,!1)}return}if(0==this.nowCubeId&&0==i.y)return this.car.transform.rotation=this.paths[0][0].transform.rotation.clone(),this.CarGo(0,!0),void N.ConsoleLog("回到了起点，掉头");0==a&&s||a==this.paths.length-1&&!s?N.ConsoleLog("前面是墙，不能过去，停车"):e&&(this.CarGo(a,s),this.stepAdd(r.car,a,s?r.start:r.end))}CarGo(t,e,a=!1){let s,o=t,n=this.paths[t].length,r=this.car.getComponent(f);s=e?0:n-1;let l=this.paths[o][s].parent.parent,c=this.car.transform.position.clone(),d=this.car.transform.rotation.clone();l.addChild(this.car),this.car.transform.rotation=d,this.car.transform.position=c,this.nowCubeId=o,o!=this.paths.length-1||(N.ConsoleLog("到达终点"),this.gameFinish(),e)?(r.go(this.paths[o],e,a),this.fxBorn(h.NumberFx,this.car.transform.position.clone(),new Laya.Quaternion,this.cubeStage),N.Platform.vibrateShort(),N.Sound.play(i.Add),this.isTips||N.Storage.updateCoin(2)):this.gameRealFinish()}stepsInit(){this.steps=[],this.isFirstInit&&(this.startSteps=[])}stepAdd(t,e,a){let s={type:t,axelOrCubeId:e,way:a};this.steps.push(s),N.ConsoleLog(s)}startStepAdd(t,e,a){if(this.isFirstInit){let s={type:t,axelOrCubeId:e,way:a};this.startSteps.push(s),N.ConsoleLog("打乱步骤",s)}}stepReduce(){this.steps.splice(this.steps.length-1,1)}backTracering(){}HintDo(){this.isHintDone=!1,this.stepId=this.startSteps.length,this.HintDoCb()}HintDoCb(){Laya.timer.once(N.Level.tipsInvertal,N.Level,()=>{if(N.Level.isTips){if(N.Level.stepId--,N.Level.stepId>=0){let t,e=N.Level.startSteps[N.Level.stepId];e.way==r.add?t=r.reduce:(e.way=r.reduce)&&(t=r.add),N.Level.cubeRotate(e.axelOrCubeId,t,!1,N.Level.HintDoCb)}}else N.Level.isHintDone=!0})}bornTerrains(t,e,a,s=.3){if("empty"==e){if(O.percent(1-s))return}else if(O.percent(.5)&&2==t)return;let i,o=this.prefabs.getChildByName("Terrains");switch(t){case 0:i="Green";break;case 1:i="Water";break;case 2:i="Yellow"}let n=o.getChildByName(i).getChildByName(e),r=O.randomInt(0,n.numChildren-1),h=n.getChildAt(r).clone();a.addChild(h),h.transform.localPosition=new Laya.Vector3,h.transform.localRotationEuler=new Laya.Vector3}tipsOn(){if(!this.isFinish){this.isTips=!0,this.gameRestart(),this.HintDo(),Laya.timer.frameLoop(1,this,this.tipsUpdate);let t=this.tipsCamera;this.mainCamera.active=!1,t.renderingOrder=-1,t.fieldOfView=.75*this.minFov,this.mainCamera.fieldOfView=100,this.renderTexture=new Laya.RenderTexture(518,518,Laya.RenderTextureFormat.R8G8B8A8,Laya.RenderTextureDepthFormat.DEPTHSTENCIL_24_8),t.renderTarget=this.renderTexture,this.scene3DImage=new Laya.Image,this.scene3DImage.source=new Laya.Texture(this.renderTexture),this.renderTexture.lock=!1,t.active=!0,U.instance.scene.addChild(this.scene3DImage),this.scene3DImage.centerX=0,this.scene3DImage.centerY=-80}}tipsUpdate(){}tipsRestart(){this.gameRestart(),this.HintDo()}tipsQuit(){this.gameRestart(),this.isTips=!1,Laya.timer.clear(this,this.tipsUpdate),this.scene3DImage.destroy(),this.tipsCamera.active=!1,this.mainCamera.active=!0}}!function(t){t.cube="cube",t.car="car",t.up="up",t.left="left",t.bottom="bottom",t.right="right",t.front="front",t.back="back",t.add="add",t.reduce="reduce",t.start="start",t.end="end"}(r||(r={}));!function(t){t.ConfettiBlastRainbow="ConfettiBlastRainbow",t.NumberFx="NumberFx"}(h||(h={}));class C{constructor(){this.score=0,this.level=1,this.coin=0,this.freshTime=(new Date).getTime()-864e5,this.playCount=0,this.signDay=1,this.signWeek=1,this.isSign=!1,this.skinList=[[1],[1]],this.skinId=[1,1],this.randomStageInfo=[]}}class S{constructor(){this.storageData=new C,this.storageName=new C;for(let t in this.storageData){let e=this.readStorage(t);e?(this.storageData[t]=JSON.parse(e),N.ConsoleLog("加载缓存数据",t,this.storageData[t])):(this.writeStorage(t,this.storageName[t]),N.ConsoleLog("初始化缓存数据",t,this.storageName[t])),this.storageName[t]=t}this.refreshData()}writeStorage(t,e){Laya.LocalStorage.setItem(t,JSON.stringify(e)),this.storageData[t]=e}readStorage(t){return Laya.LocalStorage.getItem(t)}removeStorage(t){Laya.LocalStorage.removeItem(t)}refreshData(){Math.floor(this.storageData.freshTime/864e5)!=Math.floor((new Date).getTime()/864e5)&&(N.ConsoleLog("更新每日数据"),this.writeStorage(this.storageName.playCount,0),this.writeStorage(this.storageName.freshTime,(new Date).getTime()))}initSign(){this.writeStorage(this.storageName.isSign,!1),this.storageData.signDay>7&&(this.writeStorage(this.storageName.signDay,1),this.writeStorage(this.storageName.signWeek,this.storageData.signWeek+1))}sign(t){this.writeStorage(this.storageName.isSign,!0),this.writeStorage(this.storageName.signDay,this.storageData.signDay+1),t&&t()}passLevel(){this.writeStorage(this.storageName.level,this.storageData.level+1)}updateCoin(t,e){this.writeStorage(this.storageName.coin,this.storageData.coin+t),N.Event.event(s.Update_Coin_Event,{coin:this.storageData.coin}),e&&e(this.storageData.coin)}writeRandomStageData(t){this.storageData.randomStageInfo.push(t),this.writeStorage(this.storageName.randomStageInfo,this.storageData.randomStageInfo)}unlockSkin(t,e=0){this.hasSkin(t,e)||(this.storageData.skinList[e].push(t),this.writeStorage(this.storageName.skinList,this.storageData.skinList),this.changeSkin(t))}hasSkin(t,e=0){return-1!=this.storageData.skinList[e].indexOf(t)}changeSkin(t,e=0,a){this.writeStorage(this.storageName.skinId[e],t),N.Event.event(s.Update_Skin_Event),a&&a()}}class A{constructor(){this.gameVersion="1.0.1",this.playCount=0,this.isShowLog=!1,this.isSubPackage=!0,this.sceneResUrl="res/scene/Conventional/ResScene.ls",this.modelResUrl="res/model/Conventional/ResScene.lh",this.modelsResUrl=[],this.nowLevel=1,this.isPlayBGM=!0,this.isPlaySound=!0,this.isVibrate=!0,this.restartNeedCoin=10}}class E{constructor(){for(var t in this.eventDispatcher=new Laya.EventDispatcher,s)t.length>1||(P[s[t]]=s[t])}getTypeKey(t){let e=P[s[t]];return e||(e=t),e}on(t,e,a,s){this.eventDispatcher.on(this.getTypeKey(t),e,a,s)}once(t,e,a,s){this.eventDispatcher.once(this.getTypeKey(t),e,a,s)}off(t,e,a,s){this.eventDispatcher.off(this.getTypeKey(t),e,a,s)}offAll(t){this.eventDispatcher.offAll(this.getTypeKey(t))}offAllCaller(t){this.eventDispatcher.offAllCaller(t)}event(t,e){this.eventDispatcher.event(this.getTypeKey(t),e)}hasListener(t){this.eventDispatcher.hasListener(this.getTypeKey(t))}isMouseEvent(t){this.eventDispatcher.isMouseEvent(this.getTypeKey(t))}}class P{}class _{constructor(){this.resList=[],this.resCount=0}addLoadRes(t){-1==this.resList.indexOf(t)&&(this.resCount++,this.resList.push(t),this.currentLoadType||(this.currentLoadType=t,N.Event.event(s.Load_Res_Msg_Event,{type:t,progress:0,isComplete:!1})))}removeLoadRes(t){let e=this.resList.indexOf(t);-1!=e&&(this.resList.splice(e,1),this.resCount--,N.Event.event(s.Load_Res_Msg_Event,{type:t,progress:1,isComplete:!0}),this.resList.length>0?(this.currentLoadType=this.resList[0],N.Event.event(s.Load_Res_Msg_Event,{type:this.resList[0],progress:0,isComplete:!1})):0==this.resCount?(N.ConsoleLog("全部资源加载完成"),N.Event.event(s.Load_Res_Msg_Event,{allComplete:!0})):this.currentLoadType=null)}updateLoadRes(t,e,a){N.Event.event(s.Load_Res_Msg_Event,{type:t,progress:e,isComplete:a})}}class x{constructor(){let t=[];for(let a in e)t.push(e[a]);t.length>0&&(N.Res.addLoadRes("预制体"),Laya.loader.load(t,Laya.Handler.create(this,this.loadComplete),Laya.Handler.create(this,this.loadProgress),Laya.Loader.PREFAB))}loadProgress(t){console.log("预制体资源加载中...",t)}loadComplete(){console.log("预制体资源加载完成!"),N.Res.removeLoadRes("预制体")}getItem(t){let e=Laya.loader.getRes(t);return e?Laya.Pool.getItemByCreateFun(t,e.create,e):(console.warn("预制体加载失败：确认是否已添加PrefabType成员"),null)}recoverItem(t,e){Laya.Pool.recover(t,e),e.parent.removeChild(e)}}class R{constructor(){this.scenes=[]}get TopScene(){return this.topScene}openScene(t,e=!1,a,i,o){let n=this.scenes.filter(e=>e.url==t);if(n&&n.length>0&&(N.ConsoleLog("已打开此场景",n),n[0].close(),this.scenes.splice(this.scenes.indexOf(n[0]),1)),e)for(let t=this.scenes.length-1;t>=0;t--)this.closeScene(this.scenes[t].url);Laya.Scene.open(t,!1,a,Laya.Handler.create(this,t=>{o&&o.addChild(t),this.scenes.push(t),this.topScene=t,i&&i(t),N.Event.event(s.Open_Ui_Event,t.url)}))}closeScene(t,e){let a=null;t?this.scenes.forEach(e=>{e.url!=t||(a=e)}):this.topScene&&(a=this.topScene),a&&a instanceof Laya.Scene&&(this.scenes.splice(this.scenes.indexOf(a),1),this.scenes.length>0?this.topScene=this.scenes[this.scenes.length-1]:this.topScene=null,a.close(),N.Event.event(s.Close_Ui_Event,{url:a.url,param:e}))}}class k{constructor(){for(var t in this.soundType=l.ogg,this._pathRoot="res/sound/",this._soundCtx={},this._soundFile=[],this.loopSounds=[],i){let e=i[t];this._soundFile.push(e)}N.ConsoleLog("音效：",this._soundFile),this.init()}init(){let t=this._pathRoot,e="",a=this._soundFile,s=this._soundFile.length;for(let i=0;i<s;++i){e=a[i];let s=new Laya.SoundChannel;s.url=t+e+l,Laya.SoundManager.addChannel(s),this._soundCtx[e]=!0}Laya.SoundManager.autoStopMusic=!0}setSoundVolume(t,e){this._soundCtx[t]&&Laya.SoundManager.setSoundVolume(e,this._pathRoot+t+this.soundType)}play(t,e=!1){this._soundCtx[t]&&(e&&-1==this.loopSounds.indexOf(t)?(this.loopSounds.push(t),Laya.SoundManager.playSound(this._pathRoot+t+this.soundType,0)):Laya.SoundManager.playSound(this._pathRoot+t+this.soundType))}stop(t,e=!1){if(this._soundCtx[t]){if(e){let e=this.loopSounds.indexOf(t);-1!=e&&this.loopSounds.splice(e,1)}Laya.SoundManager.stopSound(this._pathRoot+t+this.soundType)}}playMusic(t){Laya.SoundManager.stopMusic(),t?(Laya.SoundManager.playMusic(this._pathRoot+t+this.soundType,0),this.currentBgm=t):this.currentBgm?Laya.SoundManager.playMusic(this._pathRoot+this.currentBgm+this.soundType,0):Laya.SoundManager.playMusic(this._pathRoot+i.BGM+this.soundType,0)}playMusicLoop(t){this.currentBgm!=t&&(Laya.SoundManager.playMusic(this._pathRoot+t+this.soundType,0),this.currentBgm=t)}stopMusic(){Laya.SoundManager.stopMusic()}}!function(t){t.mp3=".mp3",t.wav=".wav",t.ogg=".ogg"}(l||(l={}));class I{}class T{static init(){this.dataConfig=new V,this.dataConfig.showNativeDelayTime=60,Laya.timer.once(1e3*this.dataConfig.showNativeDelayTime,this,()=>{this.canShowNativeAd=!0,this.refreshNativeAd(0)}),N.Event.on(s.Open_Ui_Event,this,this.onOpenUiEvent),N.Event.on(s.Close_Ui_Event,this,this.onCloseUiEvent)}static onOpenUiEvent(t){switch(N.ConsoleLog("开启页面",t),t){case a.Load:case a.Home:case a.Game:case a.Over:}}static onCloseUiEvent(t){switch(N.ConsoleLog("关闭页面",t.url),t.url){case a.Load:case a.Home:case a.Game:case a.Over:}}static httpRequest(t,e,a="get",s){var i=new Laya.HttpRequest;i.http.timeout=5e3,i.once(Laya.Event.COMPLETE,this,s),i.once(Laya.Event.ERROR,this,this.httpRequest,[t,e,a,s]),"get"==a?i.send(t,"",a,"text"):"post"==a&&i.send(t,JSON.stringify(e),a,"text")}static login(){Laya.Browser.window.qg&&Laya.Browser.window.qg.login({success(t){console.log("登录成功",JSON.stringify(t)),t.token?(T.token=t.token,T.getUserId()):console.log("登录失败！"+t.errMsg)}})}static getUserId(t){O.getCurrentTime}static abstractPar(t,e,a=!1){var s=t+"="+e;return a||(s+="&"),s}static refreshNativeAd(t){t=null!=t?1e3*t:1e3*this.dataConfig.nativeAdRefreshTime,Laya.timer.clear(this,this.loopCreateNativeAd),Laya.timer.loop(t,this,this.loopCreateNativeAd)}static loopCreateNativeAd(t=!1){t&&this.nativeAd&&(N.Platform.destroyNativeAd(this.nativeAd),this.nativeAd=null),N.Platform.loadNativeAd(this.nativeAd,t=>{t&&t.nativeAd?(console.log("原生广告创建成功=======",JSON.stringify(t)),this.nativeAd=t):this.refreshNativeAd(5),N.Event.event(s.Update_NativeAd_Event)}),this.refreshNativeAd()}}T.canShowNativeAd=!1,T.token="";class B{static init(){this.dataConfig=new V,N.Event.on(s.Open_Ui_Event,this,this.onOpenUiEvent),N.Event.on(s.Close_Ui_Event,this,this.onCloseUiEvent)}static onOpenUiEvent(t){switch(N.ConsoleLog("开启页面",t),t){case a.Load:case a.Home:break;case a.Game:N.Platform.showBannerAd();break;case a.Over:N.Platform.showCustomAd()}}static onCloseUiEvent(t){switch(N.ConsoleLog("关闭页面",t.url),t.url){case a.Load:case a.Home:case a.Game:break;case a.Over:N.Platform.hideCustomAd(),N.Platform.hideBannerAd()}}static httpRequest(t,e,a="get",s){var i=new Laya.HttpRequest;i.http.timeout=5e3,i.once(Laya.Event.COMPLETE,this,s),i.once(Laya.Event.ERROR,this,this.httpRequest,[t,e,a,s]),"get"==a?i.send(t,"",a,"text"):"post"==a&&i.send(t,JSON.stringify(e),a,"text")}static login(){Laya.Browser.window.qg&&Laya.Browser.window.qg.login({success(t){console.log("登录成功",JSON.stringify(t)),t.token?(B.token=t.token,B.getUserId()):console.log("登录失败！"+t.errMsg)}})}static getUserId(t){O.getCurrentTime}static abstractPar(t,e,a=!1){var s=t+"="+e;return a||(s+="&"),s}static refreshNativeAd(t){t=null!=t?1e3*t:1e3*this.dataConfig.nativeAdRefreshTime,Laya.timer.clear(this,this.loopCreateNativeAd),Laya.timer.loop(t,this,this.loopCreateNativeAd)}static loopCreateNativeAd(t=!1){t&&this.nativeAd&&(N.Platform.destroyNativeAd(this.nativeAd),this.nativeAd=null),N.Platform.loadNativeAd(this.nativeAd,t=>{t&&t.nativeAd?(console.log("原生广告创建成功=======",JSON.stringify(t)),this.nativeAd=t):this.refreshNativeAd(5),N.Event.event(s.Update_NativeAd_Event)}),this.refreshNativeAd()}}B.canShowNativeAd=!1,B.token="";class M{static init(){switch(N.GlData.platform){case t.WX:N.GlData.isSubPackage=!0;break;case t.OPPO:T.init(),N.GlData.isSubPackage=!1;break;case t.VIVO:B.init(),N.GlData.isSubPackage=!0;break;case t.PC:N.GlData.isSubPackage=!1}let e=Laya.LocalStorage.getItem("PrivacyAgreement");if(e&&JSON.parse(e))return void N.UI.closeScene(a.Pram);N.UI.openScene(a.Pram,!1,null,t=>{Laya.stage.addChild(t),t.zOrder=100})}}class V{constructor(){this.nativeAdRefreshTime=30,this.showNativeDelayTime=3,this.isShowGameNativeAd=!0,this.isShowInterNativeAd=!0,this.isDebug=!1,this.customAdRefreshTime=30}}class D{constructor(){this.init()}init(){M.init()}}class N{static init(){this.GlData=new A,this.initPlatform(),this.UI=new R,this.Event=new E,this.Res=new _,this.Prefab=new x,this.Sound=new k,this.Net=new I,this.initStorage(),this.CP=new D,this.Level=new b}static initStorage(){this.Storage=new S,this.StorageKey=this.Storage.storageName}static initPlatform(){Laya.Browser.onWeiXin&&Laya.Browser.window.wx?(this.GlData.platform=t.WX,this.Platform=new m):Laya.Browser.onVVMiniGame?(this.GlData.platform=t.VIVO,this.Platform=new y):Laya.Browser.onQGMiniGame?(this.GlData.platform=t.OPPO,this.Platform=new g):(Laya.Browser.onPC||Laya.Browser.onMobile)&&(this.GlData.platform=t.PC,this.Platform=new c)}static ConsoleLog(...t){this.GlData.isShowLog&&console.log(...t)}static ConsoleWarn(...t){this.GlData.isShowLog&&console.warn(...t)}static ConsoleError(...t){this.GlData.isShowLog&&console.error(...t)}static get IsStartGame(){return this._isStartGame}static set IsStartGame(t){this._isStartGame=t}static get FPS(){return 1e3/Laya.timer.delta}static checkPerformance(t){let e=0,a=50,s=a;Laya.timer.loop(100,this,function addValue(){e+=N.FPS;s--;if(s<=0){Laya.timer.clear(this,addValue);let s=e/a;N.equipmentPerformance=s>50?o.High:s>40?o.Mid:o.Low,t&&t()}})}}N._isStartGame=!1;class O{static file_ExportVarByUIScene(t){Laya.loader.load(t,Laya.Handler.create(this,t=>{let e="遍历Var开始：\n",a=t=>{if(t&&t.props&&null!=t.props.var&&null!=t.props.var){let a=t.type,s=t.props.var;e+=s+":Laya."+a+"\n"}},s=t=>{let e=t.child?t.child:[];for(let t=0;t<e.length;t++){let i=e[t];a(i),i.child&&s(i)}};s(t),e+="遍历Var结束！",console.log(e)}),null,Laya.Loader.JSON)}static file_SaveForBrowser(t,e){console.log("浏览器");let a=new Blob([t],{type:"application/json"}),s=document.createElement("a");s.download=e,s.innerHTML="Download File",null!=window.webkitURL&&(s.href=window.webkitURL.createObjectURL(a)),s.click()}static file_LoadJson(t,e){Laya.loader.load(t,Laya.Handler.create(this,()=>{let a=Laya.Loader.getRes(t);e&&e(a)}),null,Laya.Loader.JSON)}static d3_FindNodeByName(t,e){let a=null,s=t=>{for(let i=0;i<t.numChildren;i++){if(t.getChildAt(i).name==e)return void(a=t.getChildAt(i));s(t.getChildAt(i))}};return s(t),a}static d3_GetRandomPointInCircle(t,e,a=0){let s=new Laya.Vector3,i=Math.random()*(t-a)+a;s.x=2*Math.random()-1,s.z=2*Math.random()-1,Laya.Vector3.normalize(s,s);let o=new Laya.Vector3;return Laya.Vector3.scale(s,i,s),Laya.Vector3.add(e,s,o),o}static d3_GetParticleSystem(t){return t.particleSystem}static d3_CloneSprite(t){return t&&t.clone?t.clone():null}static d2_AddClickEvent(t,e,a,s,o=!1,n=!0,r=!0,h=!0){t.offAllCaller(e);let l=t.scaleX,c=.9*l,d=!1;t.on(Laya.Event.MOUSE_DOWN,e,e=>{d=!0,r&&Laya.Tween.to(t,{scaleX:c,scaleY:c},60),o&&e.stopPropagation},s);t.on(Laya.Event.MOUSE_UP,e,s=>{0!=d&&(d=!1,o&&s.stopPropagation,r&&Laya.Tween.to(t,{scaleX:l,scaleY:l},60),a&&a.call(e,s),n&&N.Sound.play(i.CLICK),h&&N.Platform.vibrateShort())},s);t.on(Laya.Event.MOUSE_OUT,e,e=>{r&&Laya.Tween.to(t,{scaleX:l,scaleY:l},60),o&&e.stopPropagation},s)}static clamp01(t){return t>1?1:t<0?0:t}static clamp(t,e,a){return t<e?e:t>a?a:t}static get getCurrentTime(){return(new Date).getTime()}static get getCurrentTime_Second(){return Math.floor(Date.parse((new Date).toString())/1e3)}static numberTo(t,e,a){return Math.abs(e-t)<a?t=e:t<e?t+=a:t>e&&(t-=a),t}static numberLerp(t,e,a){return a<0&&(a=0),a>1&&(a=1),t+=(e-t)*a}static randomNumber(t,e){return t+(e-t)*Math.random()}static randomInt(t,e){return Math.floor(t+(e+1-t)*Math.random())}static halfPercent(){return Math.random()<.5}static percent(t){return Math.random()<t}static getAngle(t,e){var a=Laya.Vector3.dot(t,e),s=Laya.Vector3.scalarLength(t)*Laya.Vector3.scalarLength(e);if(0==s){if(t.z>e.z)return 0;if(t.z<e.z)return 180;if(t.y>e.y)return 90;if(t.y<e.y)return-90}var i=a/s;return i<-1&&(i=-1),i>1&&(i=1),180*Math.acos(i)/Math.PI}static getAngle2D(t,e){var a=Laya.Vector2.dot(t,e),s=Laya.Vector2.scalarLength(t)*Laya.Vector2.scalarLength(e);return 180*Math.acos(a/s)/Math.PI}static getAngle2DWay(t,e){var a=Laya.Vector2.dot(t,e),s=Laya.Vector2.scalarLength(t)*Laya.Vector2.scalarLength(e),i=180*Math.acos(a/s)/Math.PI,o=t.x*e.y-e.x*t.y;return o>0?i*=1:o<0?i*=-1:i=0,i}static getProjection(t,e){let a=v.mull(e,v.dot(t,e));return v.subtract(t,a)}static cloneArray(t){return[].concat(t)}static getRandomInArray(t){if(t.length){let e=Math.random()*t.length;return t[e=Math.floor(e)]}return N.ConsoleLog("传入错误参数,返回空"),null}static takeRandomInArray(t){if(t.length){let e=Math.random()*t.length,a=t[e=Math.floor(e)];return t.splice(e,1),a}return N.ConsoleLog("传入错误参数,返回空"),null}static randomArray(t){let e=new Array(t.length),a=e.length;for(let s=0;s<a;s++){let a=this.takeRandomInArray(t);e[s]=a}return e}static d3_getSpritePosBySprite3DPoint(t){if(!t)return new Laya.Point(0,0);var e=t.transform.position.clone(),a=new Laya.Vector4;N.Level.mainCamera.viewport.project(e,N.Level.mainCamera.projectionViewMatrix,a);var s=new Laya.Vector2(a.x/Laya.stage.clientScaleX,a.y/Laya.stage.clientScaleY);return new Laya.Point(s.x,s.y)}static BoxCheck_2D_Normal(t,e,a,s,i,o,n,r){let h=Math.abs(o-e),l=Math.abs(i-t);return h<(s+r)/2&&l<(a+n)/2}static CircleCheck_2D(t,e,a,s,i,o){let n=Math.pow(t-s,2)+Math.pow(e-i,2),r=Math.pow(a+o,2);return{isHit:n<r,distance:n,range:r}}static objectScaleTips(t){let e=new p,a=t.transform.localScale.clone(),s=v.mull(a,.8),i=v.mull(a,1.2);e.toTween(t,{sca:s},50).then({sca:i},50).then({sca:a},50)}static faceToast(t,e,a,s){let i=new Laya.Image(t);i.anchorX=.5,i.anchorY=.5,i.alpha=1,i.size(100,100),e.addChild(i),i.x=a.x,i.y=a.y,Laya.Tween.to(i,{x:s.x,y:s.y,alpha:.9},1e3,Laya.Ease.strongOut,Laya.Handler.create(this,()=>{i&&!i.destroyed&&Laya.Tween.to(i,{x:s.x,y:s.y-100,alpha:0},1e3,null,Laya.Handler.create(this,()=>{i&&!i.destroyed&&i.destroy()}))}))}static wordToast(t,e,a){if(!this.wordToastOk)return;O.wordToastOk=!1;let s=new Laya.Image(t);s.anchorX=.5,s.anchorY=.5,s.alpha=1,e.addChild(s),s.top=300,s.centerX=0;s.scaleX=0,s.scaleY=0,Laya.Tween.to(s,{scaleX:1,scaleY:1},500,Laya.Ease.strongOut,Laya.Handler.create(this,()=>{O.wordToastOk=!0,s&&!s.destroyed&&Laya.Tween.to(s,{top:200,alpha:0},500,null,Laya.Handler.create(this,()=>{s&&!s.destroyed&&s.destroy()}))}))}static bubbleSort(t){let e=this.cloneArray(t),a=[];for(let t=0;t<e.length;t++)a.push(t);for(let t=0;t<e.length-1;t++)for(let s=0;s<e.length-1-t;s++)if(e[s]>e[s+1]){let t=e[s+1];e[s+1]=e[s],e[s]=t;let i=a[s+1];a[s+1]=a[s],a[s]=i}return[e,a]}}O.wordToastOk=!0;class G extends Laya.Scene{onAwake(){this.size(Laya.stage.width,Laya.stage.height),this.init(),this.initEvent()}onClosed(){N.Event.offAllCaller(this),Laya.timer.clearAll(this)}init(){}initEvent(){}}class U extends G{constructor(){super(...arguments),this.isTipsOn=!1}init(){switch(U.instance=this,N.GlData.nowLevel){case 1:this.teach1On();break;case 2:case 3:this.teach2On()}this.restart.getChildByName("value").text=N.GlData.restartNeedCoin.toString()}initEvent(){O.d2_AddClickEvent(this.restart,this,this.restartDo),O.d2_AddClickEvent(this.tips,this,this.tipsDo),O.d2_AddClickEvent(this.tipsRestart,this,this.tipsRestartDo),O.d2_AddClickEvent(this.tipsQuit,this,this.tipsQuitDo),O.d2_AddClickEvent(this.jump,this,this.jumpStage),N.Event.on(n.start,this,this.teach1Off),N.Event.on(n.start,this,this.teach2Off)}restartDo(){N.Storage.storageData.coin>=N.GlData.restartNeedCoin?(N.Storage.updateCoin(-N.GlData.restartNeedCoin),N.Level.gameRestart(),u.TrackEvent("RestartClick","true")):(N.ConsoleLog("金币不足"),N.Platform.showToast("金币不足"),u.TrackEvent("RestartClick","false"))}tipsDo(){if(N.Level.isFinish)return;let t=this,e=()=>{N.Event.event(s.Tips_UI_Open),t.tipsRestart.set_visible(!0),t.tipsQuit.set_visible(!0),t.tipsPanel.set_visible(!0),t.tipsBg.set_visible(!0),t.tipsBlack.set_visible(!0),this.tipsBlack.mouseEnabled=!0,this.tipsBlack.mouseThrough=!1};this.isTipsOn?(e(),N.ConsoleLog("已解锁")):(u.TrackEvent("TipsClick"),N.Platform.showVideoAd(()=>{t.isTipsOn=!0,e(),N.ConsoleLog("视频提示解锁")}))}tipsRestartDo(){N.Event.event(s.Tips_UI_Restart)}tipsQuitDo(){N.Event.event(s.Tips_UI_Quit),this.tipsRestart.set_visible(!1),this.tipsQuit.set_visible(!1),this.tipsPanel.set_visible(!1),this.tipsBg.set_visible(!1),this.tipsBlack.set_visible(!1),this.tipsBlack.mouseEnabled=!0,this.tipsBlack.mouseThrough=!0}teach1On(){this.teach1.set_visible(!0),Laya.timer.loop(16,this,this.teach1Update)}teach1Update(){let t=this.teach1.getChildAt(0);t.x+=10,t.x>650&&(t.x=0)}teach1Off(){this.teach1.set_visible(!1),Laya.timer.clear(this,this.teach1Off)}teach2On(){this.teach2.set_visible(!0)}teach2Off(){this.teach2.set_visible(!1)}jumpStage(){u.TrackEvent("PassClick"),N.Platform.showVideoAd(()=>{N.Level.jumpStage()})}}class F{static toAlpha(t,e,a,s,i=null,o=null,n=!1,r=!1){if(t){var h=null;t.alpha=e,alpha1()}function alpha1(){h=r||n?new Laya.Handler(this,alpha2):new Laya.Handler(this,()=>{o&&o(),o=null}),Laya.Tween.to(t,{alpha:a},s,i,h)}function alpha2(){h=r?new Laya.Handler(this,alpha1):null,Laya.Tween.to(t,{alpha:e},s,i,h)}}static toScale(t,e,a,s,i,o,n,r=!1){if(t){var h=null;t.scale(e,e),scale1()}function scale1(){h=r||n?new Laya.Handler(this,scale2):new Laya.Handler(this,()=>{o&&o(),o=null}),Laya.Tween.to(t,{scaleX:a,scaleY:a},s,i,h)}function scale2(){h=r?new Laya.Handler(this,scale1):null,Laya.Tween.to(t,{scaleX:e,scaleY:e},s,i,h)}}static toPosition(t,e,a,s=null,i=null,o=!1,n=0){let r={},h={};function pos1(){if(o)switch(n){case 0:var e=new Laya.Handler(this,pos2);break;case 1:e=new Laya.Handler(this,pos3)}else e=new Laya.Handler(this,()=>{i&&i(),i=null});Laya.Tween.to(t,h,a,s,e)}function pos2(){Laya.Tween.to(t,r,a,s,Laya.Handler.create(this,pos1))}function pos3(){t.pos(r.x,r.y),pos1()}null!=e.x&&(r.x=t.x,h.x=e.x),null!=e.y&&(r.y=t.y,h.y=e.y),pos1()}static toRotaion(t,e,a,s=null,i=null,o=!1,n=!1){var r=t.rotation,h=r+e,l=r-e+r;function rotate2(){Laya.Tween.to(t,{rotation:l},2*a,null,Laya.Handler.create(this,rotate3))}function rotate3(){Laya.Tween.to(t,{rotation:h},2*a,null,Laya.Handler.create(this,rotate2))}function rotate4(){Laya.Tween.to(t,{rotation:r},a)}!function(){if(n)var e=new Laya.Handler(this,rotate2);else e=o?new Laya.Handler(this,rotate4):new Laya.Handler(this,()=>{i&&i(),i=null});Laya.Tween.to(t,{rotation:h},a,null,e)}()}static clearTween(t){Laya.Tween.clearAll(t)}}class H extends Laya.Script{onEnable(){let t=this.owner;F.toScale(t,.9,1.1,500,null,()=>{},!1,!0)}onDisable(){let t=this.owner;F.clearTween(t),t.scale(1,1)}}class X extends Laya.Script{constructor(){super(...arguments),this.isInit=!1,this.scrollDir=1}onEnable(){this.isInit||this.init()}onDisable(){}init(t=0){this.isInit=!0,this.list=this.owner;let e=N.Storage.storageData.level+1;this.list.vScrollBarSkin="",this.list.repeatX=3,this.list.repeatY=Math.ceil(e/3),this.list.array=new Array(e),this.list.renderHandler=Laya.Handler.create(this,this.onListRender,null,!1);let a=this.list.scrollBar,s=195*this.list.repeatY-this.list.height;a.value=s}onListRender(t,e){var a=t.getChildByName("Item"),s=a.getChildByName("active"),i=a.getChildByName("choose"),o=a.getChildByName("lock"),n=a.getChildByName("value");O.d2_AddClickEvent(a,this,this.clickEvent,[e]);let r=e+1,h=N.GlData.nowLevel,l=N.Storage.storageData.level;s.visible=!0,i.visible=r==h,o.set_visible(r>l),r>=100&&(n.scaleX=.6,n.scaleY=.6),n.value=r.toString()}mouseHandler(t,e){this.againScroll()}againScroll(){Laya.timer.clear(this,this.scrollLoop),Laya.timer.once(3e3,this,()=>{Laya.timer.frameLoop(1,this,this.scrollLoop)})}scrollLoop(){let t=this.list.scrollBar;t.value+=this.scrollDir,(t.value>=t.max||t.value<=0)&&(this.scrollDir=-this.scrollDir,this.againScroll())}clickEvent(t){t+1<=N.Storage.storageData.level?N.GlData.nowLevel!=t+1&&(N.GlData.nowLevel=t+1,this.list.refresh(),N.Event.event(s.Update_NowLevel_Event),N.UI.closeScene(a.Home),N.UI.closeScene(a.Game),N.UI.closeScene(a.Over),N.Event.event(s.Init_Game_Event,{select:!0})):N.Platform.showToast("请继续通关解锁关卡")}}class Y extends Laya.Script{onAwake(){this.self=this.owner,this.init()}init(...t){}onDestroy(){Laya.timer.clearAll(this),N.Event.offAllCaller(this)}}class W extends Y{constructor(){super(...arguments),this.isSettingOpen=!1}init(){this.gradeValue=this.self.getChildByName("gradeUI").getChildByName("gradeValue"),this.gradeValue.value=N.GlData.nowLevel.toString(),this.stageChoosePanel=this.self.getChildByName("stageChoosePanel"),this.chooseStageBg=this.self.getChildByName("chooseStageBg"),this.chooseStage=this.self.getChildByName("chooseStage"),this.backFromChooseStage=this.stageChoosePanel.getChildByName("backFromChooseStage"),this.backClose=this.stageChoosePanel.getChildByName("backClose"),this.switchChooseStage(!1),this.coinValue=this.self.getChildByName("coinBack").getChildByName("coinValue"),this.coinValue.text=N.Storage.storageData.coin.toString();let t=this.self.getChildByName("settingShow").getChildByName("settingPanel");this.settingButton=this.self.getChildByName("setting"),this.musicSettingButton=t.getChildByName("muisc"),this.soundSettingButton=t.getChildByName("sound"),this.vibrateSettingButton=t.getChildByName("vibrate"),this.settingPanel=t,this.initEvent()}initEvent(){O.d2_AddClickEvent(this.chooseStage,this,this.switchChooseStage,[!0]),O.d2_AddClickEvent(this.backFromChooseStage,this,this.switchChooseStage,[!1]),O.d2_AddClickEvent(this.backClose,this,this.switchChooseStage,[!1]),O.d2_AddClickEvent(this.musicSettingButton,this,this.bgmSwitch),O.d2_AddClickEvent(this.soundSettingButton,this,this.soundSwitch),O.d2_AddClickEvent(this.vibrateSettingButton,this,this.vibrateSwitch),O.d2_AddClickEvent(this.settingButton,this,this.settingSwitch),N.Event.on(s.Update_Coin_Event,this,t=>{this.coinValue.text=t.coin.toString()})}switchChooseStage(t){this.stageChoosePanel.set_visible(t),this.chooseStageBg.set_visible(t),this.backFromChooseStage.set_visible(t),this.chooseStage.set_visible(!t),this.self.mouseThrough=!t}settingUpdate(){}settingSwitch(){F.clearTween(this.settingPanel),this.isSettingOpen?F.toPosition(this.settingPanel,{x:0,y:-90},500,null,()=>{},!1):F.toPosition(this.settingPanel,{x:0,y:35.5},500,null,()=>{},!1),this.isSettingOpen=!this.isSettingOpen}bgmSwitch(){N.GlData.isPlayBGM=!N.GlData.isPlayBGM,this.updateSetting()}soundSwitch(){N.GlData.isPlaySound=!N.GlData.isPlaySound,this.updateSetting()}vibrateSwitch(){N.GlData.isVibrate=!N.GlData.isVibrate,this.updateSetting()}updateSetting(){N.GlData.isPlayBGM?Laya.SoundManager.setMusicVolume(1):Laya.SoundManager.setMusicVolume(0),N.GlData.isPlaySound?Laya.SoundManager.setSoundVolume(1):Laya.SoundManager.setSoundVolume(0);let t=this.musicSettingButton.getChildAt(0),e=this.soundSettingButton.getChildAt(0),a=this.vibrateSettingButton.getChildAt(0);t.visible=!N.GlData.isPlayBGM,e.visible=!N.GlData.isPlaySound,a.visible=!N.GlData.isVibrate}}class z extends Laya.Script{constructor(){super(...arguments),this.calls=[],this.firstId=-1,this.secondId=-1,this.firstOriginalPoint=new Laya.Vector2,this.secondOriginalPoint=new Laya.Vector2,this.isSecond=!1,this.orignalHorizontal=0,this.orignalAxis=0,this.orignalHorizontalAlways=0,this.orignalAxisAlways=0,this.offset=new Laya.Vector3}onEnable(){N.Event.on(n.start,this,this.onMouseDown),N.Event.on(n.move,this,this.onMouseMove),N.Event.on(n.end,this,this.onMouseUp)}onDisable(){N.Event.off(n.start,this,this.onMouseDown),N.Event.off(n.move,this,this.onMouseMove),N.Event.off(n.end,this,this.onMouseUp)}onMouseDown(t){0==this.isSecond?-1==this.firstId?(this.checkOut(t),this.firstId=t.touchId,N.Event.event(n.singleTouchStart,t),this.firstOriginalPoint=new Laya.Vector2(t.stageX/Laya.stage.width,t.stageY/Laya.stage.height)):this.firstId!=t.touchId&&-1==this.secondId&&(this.secondId=t.touchId,this.isSecond=!0,N.Event.event(n.secondTouchStart,t),this.secondOriginalPoint=new Laya.Vector2(t.stageX/Laya.stage.width,t.stageY/Laya.stage.height)):-1==this.firstId?(this.firstId=t.touchId,this.firstOriginalPoint=new Laya.Vector2(t.stageX/Laya.stage.width,t.stageY/Laya.stage.height)):-1==this.secondId&&(this.secondId=t.touchId,this.secondOriginalPoint=new Laya.Vector2(t.stageX/Laya.stage.width,t.stageY/Laya.stage.height)),this.checkOutAlways(t)}onMouseMove(t){if(0==this.isSecond)t.touchId==this.firstId&&(this.checkWay(t),N.Event.event(n.singleTouchMove,t));else if(-1!=this.firstId&&-1!=this.secondId){let e,a={distance:0,angle:0},s=w.Vector2Reduce(this.secondOriginalPoint,this.firstOriginalPoint),i=Laya.Vector2.scalarLength(s);if(t.touchId==this.firstId?e=w.Vector2Reduce(this.secondOriginalPoint,new Laya.Vector2(t.stageX/Laya.stage.width,t.stageY/Laya.stage.height)):t.touchId==this.secondId&&(e=w.Vector2Reduce(new Laya.Vector2(t.stageX/Laya.stage.width,t.stageY/Laya.stage.height),this.firstOriginalPoint)),e){let t=Laya.Vector2.scalarLength(e);a.distance=t-i,a.angle=O.getAngle2DWay(s,e),N.Event.event(n.secondTouchMove,a)}}t.touchId==this.firstId&&(this.firstOriginalPoint=new Laya.Vector2(t.stageX/Laya.stage.width,t.stageY/Laya.stage.height)),t.touchId==this.secondId&&(this.secondOriginalPoint=new Laya.Vector2(t.stageX/Laya.stage.width,t.stageY/Laya.stage.height)),this.checkWayAlways(t)}onMouseUp(t){this.checkOutAlways(t),t.touchId==this.firstId&&(this.firstOriginalPoint=new Laya.Vector2(t.stageX/Laya.stage.width,t.stageY/Laya.stage.height)),t.touchId==this.secondId&&(this.secondOriginalPoint=new Laya.Vector2(t.stageX/Laya.stage.width,t.stageY/Laya.stage.height)),0==this.isSecond?t.touchId==this.firstId&&(this.checkOut(t),N.Event.event(n.singleTouchEnd,t),this.firstId=-1):(t.touchId==this.firstId&&(this.firstId=-1),t.touchId==this.secondId&&(this.secondId=-1),-1==this.firstId&&-1==this.secondId&&(this.isSecond=!1))}WayCheck(){let t=w.Vector2Reduce(this.nowPos,this.startPos);if(w.Vector2Scale(t)>100){let e=Math.atan2(t.y,t.x)/Math.PI*180,a="none";e>-135&&e<-45?a="up":e>-45&&e<45?a="right":e<135&&e>45?a="down":(e<-135||e>135)&&(a="left"),this.isDown=!1}this.startPos=this.nowPos}onDestroy(){this.touchTimer&&clearTimeout(this.touchTimer)}checkWay(t){let e=t.stageX-this.orignalHorizontal,a=t.stageY-this.orignalAxis;this.checkOut(t),N.Event.event(n.getAxis,[{x:e,y:a}])}checkOut(t){this.orignalHorizontal=t.stageX,this.orignalAxis=t.stageY}checkWayAlways(t){let e=t.stageX/Laya.stage.width-this.orignalHorizontalAlways,a=t.stageY/Laya.stage.height-this.orignalAxisAlways;this.checkOutAlways(t),N.Event.event(n.getAxisAlways,[{x:e,y:a}])}checkOutAlways(t){this.orignalHorizontalAlways=t.stageX/Laya.stage.width,this.orignalAxisAlways=t.stageY/Laya.stage.height}modelRotateControlDown(){let t=new Laya.Vector3(Laya.MouseManager.instance.mouseX,Laya.MouseManager.instance.mouseY,0);this.startPosition=t.clone(),this.prePosition=t.clone()}modelRotateControlMove(){let t=new Laya.Vector3(Laya.MouseManager.instance.mouseX,Laya.MouseManager.instance.mouseY,0);Laya.Vector3.subtract(t,this.prePosition,this.offset),this.prePosition=t.clone();var e=new Laya.Vector3(this.offset.x,this.offset.y,0);let a=new Laya.Vector3;Laya.Vector3.cross(e,new Laya.Vector3(0,0,1),a),Laya.Vector3.normalize(a,a)}modelRotateControlUp(){new Laya.Vector3(Laya.MouseManager.instance.mouseX,Laya.MouseManager.instance.mouseY,0)}}class q extends Y{constructor(){super(...arguments),this.triggerPos="Home",this.isEnable=!0,this.canShow=!0}init(){if(console.log("原生广告组件=============="),this.self.visible=!1,N.Event.event(s.Native_Visible_Event,!1),this.isEnable){switch(N.GlData.platform){case t.OPPO:this.logicalMgr=T;break;case t.VIVO:this.logicalMgr=B;break;case t.PC:return}N.Event.on("Update_NativeAd_Event",this,this.updateData),this.updateData()}}updateData(t){if(this.self.visible=!1,N.Event.event(s.Native_Visible_Event,!1),t&&(this.canShow=!t.isClose),this.canShow)if(this.logicalMgr&&this.logicalMgr.canShowNativeAd)if("Game"!=this.triggerPos||this.logicalMgr.dataConfig.isShowGameNativeAd){if(this.nativeAd=this.logicalMgr.nativeAd,N.ConsoleLog("是否有原生广告",this.nativeAd),this.nativeAd){let t=this.nativeAd;console.log("显示原生广告",JSON.stringify(t)),this.self.visible=!0,N.Event.event(s.Native_Visible_Event,!0),this.self.zOrder=10,this.imgAd=this.self.getChildByName("imgAd"),this.btnClose=this.self.getChildByName("btnClose"),this.btnCheck=this.self.getChildByName("btnCheck"),this.lbTitle=this.self.getChildByName("lbTitle"),this.lbDesc=this.self.getChildByName("lbDesc"),this.imgClick=this.self.getChildByName("imgClick"),this.imgAd.skin=t.imgUrl,this.lbTitle.text=t.title,this.lbDesc.text=t.desc,O.d2_AddClickEvent(this.btnClose,this,this.closeAd),O.d2_AddClickEvent(this.btnCheck,this,this.clickAd),O.d2_AddClickEvent(this.imgClick,this,this.clickAd,null,!1,!0,!1,!1),u.TrackEvent("NativeAdShow")}}else console.log("后台配置不允许游戏中原生广告显示，暂不显示");else console.log("配置或配置问题");else console.log("事件是关闭的")}clickAd(){N.Platform.showNativeAd(this.nativeAd,t=>{t&&(this.logicalMgr.loopCreateNativeAd(!0),this.self.visible=!1)}),u.TrackEvent("NativeAdClick")}closeAd(){switch(this.self.visible=!1,N.Event.event(s.Native_Visible_Event,!1),this.triggerPos){case"Home":case"Game":break;case"Inter":N.Event.off("Update_NativeAd_Event",this,this.updateData),N.Event.event("Update_NativeAd_Event",{isClose:!1})}}onDisable(){console.log("移除原生广告组件"),N.Event.event(s.Native_Visible_Event,!1),Laya.timer.clearAll(this),N.Event.offAllCaller(this)}}class J extends G{init(){}initEvent(){O.d2_AddClickEvent(this.btnStart,this,this.onStartClick)}onStartClick(){N.UI.closeScene(a.Home),N.Event.event(s.Play_Game_Event)}}class Z extends Laya.Script{constructor(){super(...arguments),this.delayTime=0}onEnable(){let t=this.owner;Laya.timer.once(this.delayTime,this,()=>{F.toPosition(t,{y:15},1e3,Laya.Ease.sineInOut,()=>{},!0)})}onDisable(){let t=this.owner;F.clearTween(t),Laya.timer.clearAll(this),t.y=-15}}class j extends G{init(){this.showWarning()}showWarning(){F.toAlpha(this.warningWord,0,1,200,null,()=>{Laya.timer.once(500,this,()=>{F.toAlpha(this.warningWord,1,0,500,null,()=>{this.warning.visible=!1,this.showCompanyLogo()})})})}showCompanyLogo(){this.plCompanyLogoBg.visible=!0,F.toAlpha(this.imgCompanyLogo,0,1,200,null,()=>{Laya.timer.once(500,this,()=>{F.toAlpha(this.imgCompanyLogo,1,0,500,null,()=>{this.showLoading()})})})}showLoading(){if(this.plCompanyLogoBg.visible=!1,N.Event.on(s.Load_Res_Msg_Event,this,this.loadResMsgEvent),0==N.Res.resList.length)this.loadResMsgEvent({allComplete:!0});else{let t=N.Res.currentLoadType;this.loadResMsgEvent({type:t,progress:0,isComplete:!1}),this.changePointTimer=0,this.curPointCount=3,Laya.timer.frameLoop(1,this,this.frameLoadProgress)}}loadResMsgEvent(t){if(t.allComplete)this.lbLoadMsg.text="资源加载完成",this.barLoadPgs.value=1,Laya.timer.clear(this,this.frameLoadProgress),N.UI.closeScene(a.Load),N.Event.event(s.Init_Game_Event);else{if(t.type!=N.Res.currentLoadType)return;let e=this.lbLoadMsg.text,a="";for(let t=0;t<this.curPointCount;t++)a+=".";e=t.type+"资源加载中"+a,this.lbLoadMsg.text=e,t.isComplete?this.barLoadPgs.value=1:0==t.progress?this.barLoadPgs.value=0:this.barLoadPgs.value=Math.max(t.progress,this.barLoadPgs.value)}}frameLoadProgress(){if(this.changePointTimer+=Laya.timer.delta,this.changePointTimer>200){this.changePointTimer=0;let t="";for(let e=0;e<this.curPointCount;e++)t+=".";this.curPointCount++,this.curPointCount>3&&(this.curPointCount=1);let e="";for(let t=0;t<this.curPointCount;t++)e+=".";let a=this.lbLoadMsg.text;a=a.replace(t,e),this.lbLoadMsg.text=a}this.barLoadPgs.value+=.01}}class Q extends G{onOpened(t){}onClosed(){super.onClosed(),N.GlData.playCount++}initEvent(){O.d2_AddClickEvent(this.btnContinue,this,this.onContinueClick)}onContinueClick(){N.GlData.nowLevel++,N.GlData.nowLevel>N.Storage.storageData.level&&(u.TrackEvent("FinishLevel",N.Storage.storageData.level.toString()),N.Storage.passLevel()),N.UI.closeScene(a.Over),N.Event.event(s.Init_Game_Event,{select:!1})}}class K extends Laya.Script{onEnable(){let t=this.owner;F.toScale(t,0,1.2,350,null,()=>{F.toAlpha(t,1,0,800,null)},!1,!1)}onDisable(){let t=this.owner;F.clearTween(t),t.scale(1,1)}}class $ extends Laya.Script{onEnable(){let t=this.owner;Laya.timer.loop(10,this,()=>{t.rotation++})}onDisable(){let t=this.owner;F.clearTween(t),Laya.timer.clearAll(this)}}class tt extends Y{constructor(){super(...arguments),this.companyName="广州猫仙人游戏科技有限公司",this.gameName="怪兽之王",this.prevX=0,this.prevY=0}init(){this.self.visible=!1;let t=Laya.LocalStorage.getItem("PrivacyAgreement");if(t&&JSON.parse(t))return void N.UI.closeScene(a.Pram);Laya.timer.scale=0,this.bg1=this.self.getChildAt(0),this.bg2=this.self.getChildAt(1),this.bg2.visible=!1,this.line1=this.bg1.getChildByName("line1"),this.line2=this.bg1.getChildByName("line2"),this.detail=this.bg1.getChildByName("detail"),this.cbDontShow=this.bg1.getChildByName("cbDontShow"),this.btnAgree=this.bg1.getChildByName("btnAgree"),this.btnDisagree=this.bg1.getChildByName("btnDisagree"),this.btnClose=this.bg2.getChildByName("btnClose"),this.msg=this.bg2.getChildByName("msg"),this.self.visible=!0,this.line1.text="       欢迎使用"+this.gameName+"！"+this.gameName+"非常重视您的隐私和个人信息保护。",this.line2.text="      在您使用"+this.gameName+"前，请认真阅读《隐私协议》，您同意并接受全部条款后方可使用"+this.gameName+"。",this.cbDontShow.selected=!0,this.btnAgree.on(Laya.Event.CLICK,this,()=>{this.cbDontShow.selected&&Laya.LocalStorage.setItem("PrivacyAgreement",JSON.stringify(!0));let t=this.self.parent;t&&t instanceof Laya.Scene&&t.url==a.Pram&&N.UI.closeScene(a.Pram),Laya.timer.scale=1}),this.btnDisagree.on(Laya.Event.CLICK,this,()=>{N.Platform.exitApplication()}),this.detail.on(Laya.Event.CLICK,this,this.showDetail)}showDetail(){this.bg2.visible=!0,this.initLine(),this.btnClose.on(Laya.Event.CLICK,this,()=>{this.bg2.visible=!1,this.msg.scrollY=0,this.msg.off(Laya.Event.MOUSE_DOWN,this,this.startScrollText),this.btnClose.offAllCaller(this)})}initLine(){let t="在为广大用户提供高品质服务的同时，一向注重保护用户的个人数据安全，视用户信息安全与隐私保护为自己的“生命线”。我们秉承“一切以用户价值为依归”的理念，致力于提升信息处理透明度，增强您对信息管理的便捷性，保障您的信息及通信安全。"+this.companyName+"严格遵守法律法规，遵循以下隐私保护原则，为您提供更加安全、可靠的服务： 1、安全可靠：我们竭尽全力通过合理有效的信息安全技术及管理流程，防止您的信息泄露、损毁、丢失。 2、自主选择：我们为您提供便利的信息管理选项，以便您做出合适的选择，管理您的个人信息。 3、保护通信秘密：我们严格遵照法律法规，保护您的通信秘密，为您提供安全的通信服务。 4、合理必要：为了向您和其他用户提供更好的服务，我们仅收集必要的信息。 5、清晰透明：我们努力使用简明易懂的表述，向您介绍隐私政策，以便您清晰地了解我们的信息处理方式。 6、将隐私保护融入产品设计：我们在产品或服务开发的各个环节，综合法律、产品、设计等多方因素，融入隐私保护的理念。 本《隐私政策》主要向您说明： 我们收集哪些信息； 我们收集信息的用途； 您所享有的权利。 希望您仔细阅读《隐私政策》（以下简称“本政策”），详细了解我们对信息的收集、使用方式，以便您更好地了解我们的服务并作出适当的选择。 若您使用"+this.companyName+"服务，即表示您认同我们在本政策中所述内容。 如您有问题，请联系我们。 一、我们收集的信息 我们根据合法、正当、必要的原则，仅收集实现产品功能所必要的信息。 1.1您在使用我们服务时主动提供的信息 1.1.1 您在注册帐户时填写的信息。例如，您在注册帐户时所填写的昵称、手机号码。 1.1.2 您在使用服务时上传的信息。例如，您在使用游戏、社区时，上传的头像、分享的照片。 1.1.3 您通过我们的客服或参加我们举办的活动时所提交的信息。例如，您参与我们线上活动时填写的调查问卷中可能包含您的姓名、电话、家庭地址等信息。 我们的部分服务可能需要您提供特定的个人敏感信息来实现特定功能。若您选择不提供该类信息，则可能无法正常使用服务中的特定功能，但不影响您使用服务中的其他功能。若您主动提供您的个人敏感信息，即表示您同意我们按本政策所述目的和方式来处理您的个人敏感信息。 1.2我们在您使用服务时获取的信息 1.2.1 日志信息。当您使用我们的服务时，我们可能会自动收集相关信息并存储为服务日志信息。 1.2.1.1 设备信息。例如，设备型号、操作系统版本、唯一设备标识符、电池、信号强度等信息。 1.2.1.2软件信息。例如，软件的版本号、浏览器类型。为确保操作环境的安全或提供服务所需，我们会收集有关您使用的移动应用和其他软件的信息。 1.2.1.3 IP地址。 1.2.1.4 服务日志信息。例如，您在使用我们服务时搜索、查看的信息、服务故障信息、引荐网址等信息。 1.2.1.5通讯日志信息。例如，您在使用我们服务时曾经通讯的账户、通讯时间和时长。 1.2.2 位置信息。当您使用与位置有关的服务时，我们可能会记录您设备所在的位置信息，以便为您提供相关服务。 1.2.2.1在您使用服务时，我们可能会通过IP地址、GPS、WiFi或基站等途径获取您的地理位置信息； 1.2.2.2您或其他用户在使用服务时提供的信息中可能包含您所在地理位置信息，例如您提供的帐号信息中可能包含的您所在地区信息，您或其他人共享的照片包含的地理标记信息； 1.2.3 其他相关信息。为了帮助您更好地使用我们的产品或服务，我们会收集相关信息。例如，我们收集的好友列表、群列表信息、声纹特征值信息。为确保您使用我们服务时能与您认识的人进行联系，如您选择开启导入通讯录功能，我们可能对您联系人的姓名和电话号码进行加密，并仅收集加密后的信息。 1.3其他用户分享的信息中含有您的信息例如，其他用户发布的照片或分享的视频中可能包含您的信息。 1.4从第三方合作伙伴获取的信息我们可能会获得您在使用第三方合作伙伴服务时所产生或分享的信息。例如，您使用第三方合作伙伴服务微信或QQ帐户登录时，我们会获得您使用第三方合作伙伴服务登录的名称、登录时间，方便您进行授权管理。请您仔细阅读第三方合作伙伴服务的用户协议或隐私政策。 二、我们如何使用收集的信息 我们严格遵守法律法规的规定及与用户的约定，将收集的信息用于以下用途。若我们超出以下用途使用您的信息，我们将再次向您进行说明，并征得您的同意。 --电子邮箱地址 您在注册时提供的电子邮箱地址是您在产品内的身份标识，我们使用您的电子邮箱地址在产品中识别您，以便为您提供产品服务。例如：记录您的产品数据；响应您的产品内请求；向您提供客户服务等。我们对电子邮箱地址的使用是基于您对本隐私政策的同意。 --IP地址 IP地址是网络通信中常用的标识信息，我们使用您的IP地址是为了向您提供服务或改善我们的服务质量，例如：与您建立诸如下载、产品内请求等网络通信；识别您的所属区域以便提供个性化服务；判断您的登录行为的一致性以保障您的账户安全。我们对IP地址的使用是基于我们对您的合同义务。 --设备信息 设备标识码、设备类型、网络类型、操作系统等设备信息有助于我们更好了解您体验产品服务的设备情况，我们使用您的设备信息是为了向您提供服务或改善我们的服务质量，例如：统计设备适配性；反馈并解决您在体验产品服务过程中遇到的故障；判断您的登录行为的一致性以保障您的账户安全。我们对设备信息的使用是基于我们对您的合同义务。 --联系方式 电子邮箱地址、电话号码、即时通讯工具账号、收货地址、身份证明信息等您在特定场景下提供的联系方式，将仅用于完成该场景的目的，例如：向您发送促销信息；给您寄送奖品；响应您的客户反馈。我们对联系方式的使用是基于您对本隐私政策的同意。 --个人特征 性别、年龄、个人爱好等个人特征，主要为了向您提供个性化服务，例如：个人空间展示；用户行为统计；用户问卷调查等。我们对个人特征的使用是基于您对本隐私政策的同意。 --产品数据 产品id、角色名称、产品日志等产品服务内生成的数据，是我们提供产品服务的基础之一，我们对产品数据的使用是为了履行我们对您的合同义务。 我们收集信息是为了： 2.1向您提供服务。 2.2满足您的个性化需求。例如，语言设定、位置设定、个性化的帮助服务。 2.3产品开发和服务优化。例如，当我们的系统发生故障时，我们会记录和分析系统故障时产生的信息，优化我们的服务。 2.4安全保障。例如，我们会将您的信息用于身份验证、安全防范、反诈骗监测、存档备份、客户的安全服务等用途。例如，您下载或安装的安全软件会对恶意程序或病毒进行检测，或为您识别诈骗信息。 2.5向您推荐您可能感兴趣的广告、资讯等。 2.6评估、改善我们的广告投放和其他促销及推广活动的效果。 2.7管理软件。例如，进行软件认证、软件升级等。 2.8邀请您参与有关我们服务的调查。 为了让您有更好的体验、改善我们的服务或经您同意的其他用途，在符合相关法律法规的前提下，我们可能将通过某些服务所收集的信息用于我们的其他服务。例如，将您在使用我们某项服务时的信息，用于另一项服务中向您展示个性化的内容或广告、用于用户研究分析与统计等服务。 为了确保服务的安全，帮助我们更好地了解我们应用程序的运行情况，我们可能记录相关信息，例如，您使用应用程序的频率、故障信息、总体使用情况、性能数据以及应用程序的来源。我们不会将我们存储在分析软件中的信息与您在应用程序中提供的个人身份信息相结合。 三、我们如何使用Cookie及相关技术 我们或我们的第三方合作伙伴，可能通过放置安全的Cookie及相关技术收集您的信息，目的是为您提供更个性化的用户体验和服务。我们会严格要求第三方合作伙伴遵守本政策的相关规定。 您也可以通过浏览器设置管理Cookie。但请注意，如果停用Cookie，您可能无法享受最佳的服务体验，某些服务也可能无法正常使用。 四、我们如何存储和披露您的信息 为了履行我们对您的合同义务，即：向您提供产品服务，您的个人信息会在我们的服务器上进行处理。我们的服务器位于中国。 为了向您提供产品服务，我们可能会向以下第三方披露您的个人信息： --腾讯公司，为确保您能在产品服务中使用微信支付，基于您的同意，我们会向其提供与您支付有关的信息，该公司位于中国； --阿里巴巴公司，为确保您能在产品服务中使用支付宝支付，基于您的同意，我们会向其提供与您支付有关的信息，该公司位于中国； --高德软件公司，为确保您能在产品服务中使用定位查询功能，基于您的同意，我们会向高德地图提供您的地理位置信息，该公司位于中国； --谷歌公司，为确保您能在产品服务中使用定位查询功能，基于您的同意，我们会向谷歌地图提供您的地理位置信息，该公司位于美国； --基于履行法定义务或合同义务，预防技术或安全问题，保护他人权益、公共利益或其它合理必要的理由，我们应该向其披露您的个人信息的司法机构、执法主体或其它有权实体。 五、您如何管理自己的信息 5.1您可以在使用我们服务的过程中，访问、修改和删除您提供的注册信息和其他个人信息，也可按照通知指引与我们联系。您访问、修改和删除个人信息的范围和方式将取决于您使用的具体服务。例如，若您在使用地理位置相关服务时，希望停止分享您的地理位置信息，您可通过手机定位关闭功能、软硬件服务商及通讯服务提供商的关闭方式停止分享，建议您仔细阅读相关指引。 5.2我们将按照本政策所述，仅为实现我们产品或服务的功能，收集、使用您的信息。如您发现我们违反法律、行政法规的规定或者双方的约定收集、使用您的个人信息，您可以要求我们删除。如您发现我们收集、存储的您的个人信息有错误的，您也可以要求我们更正。请通过本政策列明的联系方式与我们联系。 5.3在您访问、修改和删除相关信息时，我们可能会要求您进行身份验证，以保障帐号的安全。 5.4请您理解，由于技术所限、法律或监管要求，我们可能无法满足您的所有要求，我们会在合理的期限内答复您的请求。 六、我们分享的信息 我们遵照法律法规的规定，对信息的分享进行严格的限制，例如： 6.1经您事先同意，我们可能与第三方分享您的个人信息； 6.2仅为实现外部处理的目的，我们可能会与第三方合作伙伴（第三方服务供应商、承包商、代理、广告合作伙伴、应用开发者等，例如，代表我们发出电子邮件或推送通知的通讯服务提供商、为我们提供位置服务的地图服务供应商）（他们可能并非位于您所在的法域）分享您的个人信息，让他们按照我们的说明、隐私政策以及其他相关的保密和安全措施来为我们处理上述信息，并用于以下用途： 6.2.1 向您提供我们的服务； 6.2.2 实现“我们如何使用收集的信息”部分所述目的； 6.2.3 履行我们在本政策中的义务和行使我们的权利； 6.2.4 理解、维护和改善我们的服务。 如我们与上述第三方分享您的信息，我们将会采用加密、匿名化处理等手段保障您的信息安全。 6.3随着我们业务的持续发展，当发生合并、收购、资产转让等交易导致向第三方分享您的个人信息时，我们将通过推送通知、公告等形式告知您相关情形，按照法律法规及不低于本政策所要求的标准继续保护或要求新的管理者继续保护您的个人信息。 6.4我们会将所收集到的信息用于大数据分析。例如，我们将收集到的信息用于分析形成不包含任何个人信息的城市热力图或行业洞察报告。我们可能对外公开并与我们的合作伙伴分享经统计加工后不含身份识别内容的信息，用于了解用户如何使用我们服务或让公众了解我们服务的总体使用趋势。 6.5我们可能基于以下目的披露您的个人信息： 6.5.1 遵守适用的法律法规等有关规定； 6.5.2 遵守法院判决、裁定或其他法律程序的规定； 6.5.3 遵守相关政府机关或其他法定授权组织的要求； 6.5.4 我们有理由确信需要遵守法律法规等有关规定； 6.5.5 为执行相关服务协议或本政策、维护社会公共利益，为保护我们的客户、我们或我们的关联公司、其他用户或雇员的人身财产安全或其他合法权益合理且必要的用途。 七、我们可能向您发送的信息 7.1信息推送 您在使用我们的服务时，我们可能向您发送电子邮件、短信、资讯或推送通知。您可以按照我们的相关提示，在设备上选择取消订阅。 7.2与服务有关的公告 我们可能在必要时（例如，因系统维护而暂停某一项服务时）向您发出与服务有关的公告。您可能无法取消这些与服务有关、性质不属于广告的公告。 八、存储信息的地点和期限 8.1存储信息的地点 我们遵守法律法规的规定，将境内收集的用户个人信息存储于境内。 8.2存储信息的期限 一般而言，我们仅为实现目的所必需的最短时间保留您的个人信息。但在下列情况下，我们有可能因需符合法律要求，更改个人信息的存储时间： 8.2.1 为遵守适用的法律法规等有关规定； 8.2.2 为遵守法院判决、裁定或其他法律程序的规定； 8.2.3 为遵守相关政府机关或法定授权组织的要求； 8.2.4 我们有理由确信需要遵守法律法规等有关规定； 8.2.5 为执行相关服务协议或本政策、维护社会公共利益，为保护我们的客户、我们或我们的关联公司、其他用户或雇员的人身财产安全或其他合法权益所合理必需的用途。 当我们的产品或服务发生停止运营的情形时，我们将采取例如，推送通知、公告等形式通知您，并在合理的期限内删除或匿名化处理您的个人信息。 九、信息安全 我们为您的信息提供相应的安全保障，以防止信息的丢失、不当使用、未经授权访问或披露。 9.1我们严格遵守法律法规保护用户的通信秘密。 9.2我们将在合理的安全水平内使用各种安全保护措施以保障信息的安全。例如，我们使用加密技术（例如，TLS、SSL）、匿名化处理等手段来保护您的个人信息。 9.3我们建立专门的管理制度、流程和组织确保信息安全。例如，我们严格限制访问信息的人员范围，要求他们遵守保密义务，并进行审查。 9.4若发生个人信息泄露等安全事件，我们会启动应急预案，阻止安全事件扩大，并以推送通知、公告等形式告知您。 我们可能使用您的相关信息，在相关网站、应用及其他渠道向您提供与您更加相关的广告。您可以在关于广告页面中了解更多。 十、未成年人保护 我们非常重视对未成年人个人信息的保护。根据相关法律法规的规定，若您是18周岁以下的未成年人，在使用"+this.companyName+"的服务前，我们建议应事先取得您的家长或法定监护人的同意。若您是未成年人的监护人，当您对您所监护的未成年人的个人信息有相关疑问时，请通过联系方式与我们联系。 十一、适用范围 我们的所有服务均适用本政策。但某些服务有其特定的隐私指引/声明，该特定隐私指引/声明更具体地说明我们在该服务中如何处理您的信息。如本政策与特定服务的隐私指引/声明有不一致之处，请以该特定隐私指引/声明为准。请您注意，本政策不适用由其他公司或个人提供的服务。例如，您通过使用微信帐号登录其他公司或个人提供的服务。 您使用该等第三方服务须受其隐私政策（而非本政策）约束，您需要仔细阅读其政策内容。 十二、变更 我们可能适时修订本政策内容。如该等变更会导致您在本政策项下权利的实质减损，我们将在变更生效前，通过在页面显著位置提示、向您发送电子邮件等方式通知您。在该种情况下，若您继续使用我们的服务，即表示同意受经修订的政策约束。";this.msg.text=this.companyName+t;let e=this.msg.text,a=e.split(" ");console.log(a.length);for(var s=0;s<a.length;s++)e=e.replace(" ","\n");this.msg.text=e,this.msg.on(Laya.Event.MOUSE_DOWN,this,this.startScrollText)}startScrollText(t){this.prevX=this.msg.mouseX,this.prevY=this.msg.mouseY,Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.scrollText),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.finishScrollText)}finishScrollText(t){Laya.stage.off(Laya.Event.MOUSE_MOVE,this,this.scrollText),Laya.stage.off(Laya.Event.MOUSE_UP,this,this.finishScrollText)}scrollText(t){var e=this.msg.mouseX,a=this.msg.mouseY;this.msg.scrollX+=this.prevX-e,this.msg.scrollY+=this.prevY-a,this.prevX=e,this.prevY=a}}class et{constructor(){}static init(){var t=Laya.ClassUtils.regClass;t("uiScenes/Game.ts",U),t("nimo_Mods/ScaleUITween.ts",H),t("d2Components/StageList.ts",X),t("d2Components/BaseUI.ts",W),t("nimo_Mods/ctrl/TouchScan.ts",L),t("nimo_Mods/ctrl/TouchWayCheck.ts",z),t("platforms/cpLogicalMgr/Maoxianren/Component/NativeAdComponent.ts",q),t("uiScenes/Home.ts",J),t("nimo_Mods/PosUITween.ts",Z),t("uiScenes/Load.ts",j),t("uiScenes/Over.ts",Q),t("nimo_Mods/ScaleUIOnceTween.ts",K),t("nimo_Mods/RotUITween.ts",$),t("d2Components/PrivacyAgreementComponent.ts",tt),t("uiScenes/UiScene.ts",G)}}et.width=750,et.height=1334,et.scaleMode="fixedwidth",et.screenMode="vertical",et.alignV="middle",et.alignH="center",et.startScene="uiScene/Game.scene",et.sceneRoot="",et.debug=!1,et.stat=!1,et.physicsDebug=!0,et.exportSceneToJson=!0,et.init();new class{constructor(){window.Laya3D?Laya3D.init(et.width,et.height):Laya.init(et.width,et.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=et.scaleMode,Laya.stage.screenMode=et.screenMode,Laya.stage.alignV=et.alignV,Laya.stage.alignH=et.alignH,Laya.URL.exportSceneToJson=et.exportSceneToJson,(et.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),et.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),et.stat&&Laya.Stat.show(),Laya.alertGlobalError(!0),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){N.init(),N.UI.openScene(a.Load)}}}();