window.__require=function e(t,o,n){function l(i,a){if(!o[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var c="function"==typeof __require&&__require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var d=o[i]={exports:{}};t[i][0].call(d.exports,function(e){return l(t[i][1][e]||e)},d,d.exports,e,t,o,n)}return o[i].exports}for(var r="function"==typeof __require&&__require,i=0;i<n.length;i++)l(n[i]);return l}({BallAsset:[function(e,t,o){"use strict";cc._RF.push(t,"b0b93/2gIBPR7We23/0LQBP","BallAsset");var n,l=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var l,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(i=(r<3?l(i):r>3?l(t,o,i):l(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ballTexture=[],t}return l(t,e),r([s({type:[cc.SpriteFrame]})],t.prototype,"ballTexture",void 0),r([a],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],BallBtns:[function(e,t,o){"use strict";cc._RF.push(t,"f9352Vx9CJGSKxe+6pYOnky","BallBtns");var n,l=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var l,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(i=(r<3?l(i):r>3?l(t,o,i):l(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.updateBtn=function(e,t){for(var o=1;o<this.node.children.length;o++)this.node.children[o].destroy();var n=this.node.children[0];for(o=0;o<e.length;o++){var l=void 0;0!=o?(l=cc.instantiate(n),this.node.addChild(l)):l=n,l.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=e[o],l.getChildByName("text").getComponent(cc.RichText).string="<color=#000000>X"+t[o].toString()+"</c>"}},t.prototype.updateBtnJustChangeText=function(e){for(var t=0;t<this.node.children.length;t++)this.node.children[t].getChildByName("text").getComponent(cc.RichText).string="<color=#000000>X"+e[t].toString()+"</c>"},r([a],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],BottlePuzzle_TipsNode:[function(e,t,o){"use strict";cc._RF.push(t,"5d0e0OoJf1AHo9eGrCjcmPt","BottlePuzzle_TipsNode");var n,l=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var l,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(i=(r<3?l(i):r>3?l(t,o,i):l(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../../../../Bundle1_Loading/Scripts/Platform/Platform"),a=e("../../../../../../Bundle1_Loading/Scripts/Tool/Tool"),s=cc._decorator,c=s.ccclass,d=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.onLoad=function(){this.closeBtn=this.node.getChildByName("closeBtn")},t.prototype.start=function(){a.Tool.d2_AddClickEvent(this.closeBtn,this.close,this)},t.prototype.onEnable=function(){i.default.instance.showBanner()},t.prototype.close=function(){this.node.active=!1,i.default.instance.hideBanner()},r([c],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../../../../Bundle1_Loading/Scripts/Platform/Platform":void 0,"../../../../../../Bundle1_Loading/Scripts/Tool/Tool":void 0}],Bottle_GameUI:[function(e,t,o){"use strict";cc._RF.push(t,"d9576o6WAdI6YiB2eQia5tD","Bottle_GameUI");var n,l=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var l,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(i=(r<3?l(i):r>3?l(t,o,i):l(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../../../../Bundle1_Loading/Scripts/Config/EnumTypes"),a=e("../../../../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),s=e("../../../../../../Bundle1_Loading/Scripts/Mgr/StorageMgr"),c=cc._decorator,d=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.levelLabel=null,t.result=null,t.tipNode=null,t.powerNode=null,t}return l(t,e),t.prototype.onLoad=function(){a.EventMgr.on(i.EventType.Game_NextLevel_Event,this.usePowerToNextLevel,this),a.EventMgr.on(i.EventType.Game_Ball_LevelUpdate_Event,this.updateNowLevelLabel,this),a.EventMgr.on(i.EventType.Game_ShowTips_Event,this.opneTipPanel,this),this.tipNode=this.node.getChildByName("tipNode"),this.tipNode.active=!1},t.prototype.opneTipPanel=function(){this.tipNode.active=!0},t.prototype.usePowerToNextLevel=function(){s.default.instance.usePower()},t.prototype.onEnable=function(){},t.prototype.updateNowLevelLabel=function(e){this.node.getChildByName("levelLabel").getComponent(cc.Label).string="\u7b2c"+e.toString()+"\u5173"},r([d],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../../../../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../../../../Bundle1_Loading/Scripts/Mgr/EventMgr":void 0,"../../../../../../Bundle1_Loading/Scripts/Mgr/StorageMgr":void 0}],FailCollider:[function(e,t,o){"use strict";cc._RF.push(t,"fd2a9zuDnFDJ7kkPZJSV0ra","FailCollider");var n,l=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var l,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(i=(r<3?l(i):r>3?l(t,o,i):l(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../../../../Bundle1_Loading/Scripts/Config/EnumTypes"),a=e("../../../../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),s=cc._decorator,c=s.ccclass,d=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.onBeginContact=function(){a.EventMgr.event(i.EventType.Game_Ball_HitGround,!1)},r([c],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../../../../Bundle1_Loading/Scripts/Mgr/EventMgr":void 0}],GameMgr:[function(e,t,o){"use strict";cc._RF.push(t,"817dfHwz1xKYIPwmFAXRuTr","GameMgr");var n,l=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var l,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(i=(r<3?l(i):r>3?l(t,o,i):l(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../../../Bundle1_Loading/Scripts/Config/EnumTypes"),a=e("../../../../../Bundle1_Loading/Scripts/Mgr/AssetMgr"),s=e("../../../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),c=e("../../../../../Bundle1_Loading/Scripts/Mgr/SoundMgr"),d=e("../../../../../Bundle1_Loading/Scripts/Mgr/StorageMgr"),p=e("../../../../../Bundle1_Loading/Scripts/Platform/Platform"),u=e("../../../../../Bundle1_Loading/Scripts/Tool/Tool"),h=e("../../../../../Bundle2_Res/Scripts/ResPanelOpen"),g=e("../../../../../Bundle2_Res/Scripts/ResPrefabBorn"),f=e("../Comps/GameComp/BallBtns"),y=cc._decorator,b=y.ccclass,_=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ballsTexture=[],t.maxLevel=40,t.isEnd=!0,t.ballLoadCount=0,t.ballNumbers=[],t.ballType=[],t.ballBornPos=cc.v2(0,0),t.ballTargetCount=0,t.nowStageIndex=-1,t.teachStep=-1,t.ballCheckSuccessCount=0,t.inBottleCount=0,t.isInId=[],t.isReadyToClear=!1,t.isDoingClear=!1,t.claerRangeSqr=1e4,t}return l(t,e),t.prototype.onLoad=function(){s.EventMgr.on(i.EventType.Game_PowerLess_Event,this.showPowerLess,this),this.bundle=a.default.bottleGameBundle,this.startPhyics(),this.ballNode=this.node.getChildByName("ballNode"),this.uiNode=this.node.getChildByName("uiNode"),this.clearBtn=this.uiNode.getChildByName("clearBtn"),this.ballLoad(function(){})},t.prototype.onEnable=function(){this.stageLoad(d.default.instance.storageData.bottlePuzzleData.maxLevel)},t.prototype.onDisable=function(){this.unscheduleAllCallbacks()},t.prototype.start=function(){var e=this;this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),u.Tool.d2_AddClickEvent(this.clearBtn,this.onClearBtnClick,this),s.EventMgr.on(i.EventType.Game_NextLevel_Event,this.nextLevel,this),s.EventMgr.on(i.EventType.Game_Retry_Event,this.retry,this),s.EventMgr.on(i.EventType.Game_Ball_HitGround,this.GameOver,this),this.scheduleOnce(function(){e.clearBtnStartPos=e.clearBtn.getPosition()}),s.EventMgr.on(i.EventType.Game_PassLevel_Event,this.passLevel,this)},t.prototype.showPowerLess=function(){h.default.show_Game_PowerLess_Panel(cc.find("Canvas"))},t.prototype.onTouchStart=function(e){var t=e.getLocation();if(t.x=t.x-this.node.parent.width/2,t.y=t.y-this.node.parent.height/2,this.isReadyToClear)for(var o=0;o<this.ballNode.children.length;o++)cc.Vec2.squaredDistance(this.ballNode.children[o].getPosition(),t)<3600&&this.startClear(t)},t.prototype.GameOver=function(e,t){var o=this;void 0===t&&(t=!0),this.isEnd||(this.isEnd=!0,c.default.instance.PlaySound(i.SoundType.Win),g.default.gameOverFxCreate(e,cc.find("Canvas")),e&&d.default.instance.addLevel(i.GameNames.bottlePuzzle),e?this.scheduleOnce(function(){h.default.show_Result_Success_Panel(cc.find("Canvas"))},1.5):this.scheduleOnce(function(){o.retry()},1.5))},t.prototype.passLevel=function(){d.default.instance.addLevel(i.GameNames.bottlePuzzle),this.stageLoad(d.default.instance.storageData.bottlePuzzleData.maxLevel)},t.prototype.nextLevel=function(){this.stageLoad(d.default.instance.storageData.bottlePuzzleData.maxLevel)},t.prototype.retry=function(){this.stageLoad(d.default.instance.storageData.bottlePuzzleData.maxLevel)},t.prototype.clearBtnShake=function(){u.Tool.objectShake(this.clearBtn,1,10)},t.prototype.ballLoad=function(e){this.ballsTexture.length=8;for(var t=this,o=function(o){n.bundle.load("BottlePuzzles_Main/texture/ball/ball_"+o.toString(),cc.SpriteFrame,function(n,l){n?console.error(n):(t.ballsTexture[o]=l,t.ballLoadCount++,t.ballLoadCount>=t.ballsTexture.length&&e&&e())})},n=this,l=0;l<this.ballsTexture.length;l++)o(l)},t.prototype.stageLoad=function(e){console.log("\u5173\u5361\u52a0\u8f7d",e),this.schedule(this.ballCheck,1),s.EventMgr.event(i.EventType.Game_Ball_LevelUpdate_Event,e),e>this.maxLevel&&(e=u.Tool.randomInt(1,this.maxLevel),console.log("\u751f\u6210\u968f\u673a\u5173\u5361",e)),this.nowStageIndex!=e&&d.default.instance.usePower(),this.nowStageIndex=e,this.stageNode=this.node.getChildByName("stage"),this.stageBg=this.stageNode.getChildByName("bg"),this.stageEdge=this.stageNode.getChildByName("edge");var t=this.stageNode.getChildByName("uiNode"),o=this;this.bundle.load("stage/"+e.toString(),cc.JsonAsset,function(n,l){if(n)cc.error("\u5173\u5361\u52a0\u8f7d\u5931\u8d25",e,n);else{var r=l.json;o.stageBg.y=r.bgPosY,o.stageBg.x=r.bgPosX,o.stageBg.scaleX=r.bgScaleX,o.stageBg.scaleY=r.bgScaleY,o.stageEdge.y=r.edgePosY,o.stageEdge.x=r.edgePosX,o.stageEdge.scaleX=r.edgeScaleX,o.stageEdge.scaleY=r.edgeScaleY;var i="BottlePuzzles_Main/texture/bg/"+r.bgName.toString(),a="BottlePuzzles_Main/texture/edge/"+r.edgeName.toString();o.bundle.load(i,cc.SpriteFrame,function(e,t){e?cc.error("\u5173\u5361\u80cc\u666f\u52a0\u8f7d\u5931\u8d25",i,e):o.stageBg.getComponent(cc.Sprite).spriteFrame=t}),o.bundle.load(a,cc.SpriteFrame,function(e,t){e?cc.error("\u5173\u5361\u8fb9\u7f18\u52a0\u8f7d\u5931\u8d25",a,e):o.stageEdge.getComponent(cc.Sprite).spriteFrame=t}),o.stageBg.active=!1,o.stageEdge.active=!1;for(var s=o.stageBg.getComponents(cc.PhysicsPolygonCollider),c=s.length-1;c>=0;c--)s[c].destroy();for(c=0;c<r.bgCollidersData.length;c++){(h=o.stageBg.addComponent(cc.PhysicsPolygonCollider)).density=1,h.sensor=!0,h.friction=.2,h.restitution=0,h.points.length=0;for(var d=0;d<r.bgCollidersData[c].length;d++)h.points.push(new cc.Vec2(r.bgCollidersData[c][d].x,r.bgCollidersData[c][d].y));h.apply(),h.enabled=!1}var p=o.stageEdge.getComponents(cc.PhysicsPolygonCollider);for(c=p.length-1;c>=0;c--)p[c].destroy();for(c=0;c<r.edgeCollidersData.length;c++){var h;for((h=o.stageEdge.addComponent(cc.PhysicsPolygonCollider)).density=1e5,h.sensor=!1,h.friction=.1,h.restitution=.2,h.points.length=0,h.offset=new cc.Vec2(r.edgeOffsets[c].x,r.edgeOffsets[c].y),d=0;d<r.edgeCollidersData[c].length;d++)h.points.push(new cc.Vec2(r.edgeCollidersData[c][d].x,r.edgeCollidersData[c][d].y));h.apply(),h.enabled=!0}for(o.stageBg.active=!0,o.stageEdge.active=!0,o.ballNode.destroyAllChildren(),o.ballBornPos=new cc.Vec2(r.bornPos.x,r.bornPos.y),o.ballType=u.Tool.cloneArray_normal(r.ballTypeNames),o.ballNumbers=u.Tool.cloneArray_normal(r.ballNumbers),o.ballTargetCount=0,c=t.children.length-1;c>=1;c--)t.children[c].destroy();var g=[];for(c=0;c<o.ballNumbers.length;c++)if(o.ballTargetCount+=o.ballNumbers[c],c>0){var y=t.children[0],b=cc.instantiate(y);b.parent=t,b.active=!0,g.push(b)}else g.push(t.children[0]);var _=function(e){o.bundle.load("BottlePuzzles_Main/texture/ball/"+o.ballType[e],cc.SpriteFrame,function(t,n){t?cc.error("\u7403\u56fe\u7247\u52a0\u8f7d\u5931\u8d25",o.ballType[e],t):g[e].getChildByName("icon").getComponent(cc.Sprite).spriteFrame=n}),g[e].getChildByName("text").getComponent(cc.RichText).string="<color=#000000>X"+o.ballNumbers[e]+"</c>",u.Tool.d2_AddClickEvent(g[e],o.playerBornBall,o,[e])};for(c=0;c<g.length;c++)_(c);o.ballUI=t.getComponent(f.default),console.log(o.ballNumbers),o.isEnd=!1,o.teachInit()}})},t.prototype.teachInit=function(){for(var e=0;e<this.ballUI.node.children.length;e++)this.ballUI.node.children[e].getChildByName("icon").getChildByName("teachHand").active=!1;1==this.nowStageIndex?(this.teachStep=0,this.ballUI.node.children.length>=2&&(this.ballUI.node.children[0].getChildByName("icon").getChildByName("teachHand").active=!0)):this.teachStep=-1},t.prototype.addTeachStep=function(){switch(this.teachStep++,this.teachStep){case 1:this.ballUI.node.children.length>=2&&(this.ballUI.node.children[0].getChildByName("icon").getChildByName("teachHand").active=!1,this.ballUI.node.children[1].getChildByName("icon").getChildByName("teachHand").active=!0);break;case 2:this.teachEnd()}},t.prototype.teachEnd=function(){this.ballUI.node.children.length>=2&&(this.ballUI.node.children[0].getChildByName("icon").getChildByName("teachHand").active=!1,this.ballUI.node.children[1].getChildByName("icon").getChildByName("teachHand").active=!1),this.teachStep=-1},t.prototype.ballCheck=function(){for(var e=!0,t=0;t<this.ballNode.children.length;t++)this.ballNode.children[t].getComponent(cc.RigidBody).awake&&(e=!1),this.ballNode.children[t].y<-500&&(this.ballNode.children[t].destroy(),this.GameOver(!1));var o=!0;for(t=0;t<this.ballNumbers.length;t++)if(this.ballNumbers[t]>0){o=!1;break}o?(this.ballCheckSuccessCount++,(e||this.ballCheckSuccessCount>=3)&&this.ballCheckInBottleOn()):this.ballCheckSuccessCount=0},t.prototype.ballCheckInBottleOn=function(){this.inBottleCount=0,this.stageBg.getComponent(cc.PhysicsPolygonCollider).enabled=!0,this.stageBg.getComponent(cc.PhysicsPolygonCollider).apply(),this.isInId.length=0;for(var e=0;e<this.ballNode.children.length;e++)this.ballNode.children[e].getComponent(cc.RigidBody).awake=!0;s.EventMgr.on(i.EventType.Game_Ball_InBottle,this.ballInBottle,this),this.unschedule(this.ballCheck),this.scheduleOnce(this.ballCheckInBottleOff,.5)},t.prototype.ballInBottle=function(e){-1==this.isInId.indexOf(e)&&(this.inBottleCount++,this.isInId.push(e))},t.prototype.ballCheckInBottleOff=function(){s.EventMgr.off(i.EventType.Game_Ball_InBottle,this,this.ballInBottle),this.inBottleCount==this.ballTargetCount?this.GameOver(!0):this.GameOver(!1)},t.prototype.bornBall=function(e){var t=parseInt(e.split("_")[1]);if(null!=this.ballsTexture[t]){var o=this.ballsTexture[t],n=new cc.Node(e);n.addComponent(cc.Sprite).spriteFrame=o,this.ballNode.addChild(n),n.setPosition(this.ballBornPos),n.group="ball";var l=n.addComponent(cc.RigidBody);l.type=cc.RigidBodyType.Dynamic,l.gravityScale=4.8,l.linearVelocity=cc.v2(u.Tool.randomNumber(-1,1),u.Tool.randomNumber(-1,1));var r=n.addComponent(cc.PhysicsCircleCollider),i=0;t<=1?i=20:t<=3?i=30:t<=5?i=40:t<=7&&(i=50),r.radius=i,r.apply()}},t.prototype.onResetClick=function(){this.isEnd||this.stageLoad(this.nowStageIndex)},t.prototype.playerBornBall=function(e){if(!this.isEnd){var t=e[0];if(this.ballNumbers[t]<=0)p.default.instance.showToast("\u6ca1\u6709\u7403\u4e86");else{this.ballNumbers[t]--,this.bornBall(this.ballType[t]);for(var o=[],n=0;n<this.ballType.length;n++){var l=parseInt(this.ballType[n].split("_")[1]);o.push(this.ballsTexture[l])}this.ballUI.updateBtnJustChangeText(this.ballNumbers),0==t&&0==this.teachStep?this.addTeachStep():1==t&&1==this.teachStep&&this.addTeachStep()}}},t.prototype.onClearBtnClick=function(){var e=this;this.isEnd||this.isReadyToClear||p.default.instance.showVideo(function(){e.isReadyToClear=!0,u.Tool.unactiveAllChildren(e.clearBtn),e.clearBtnShake(),e.schedule(e.clearBtnShake,1.5)},function(){})},t.prototype.startClear=function(e){if(!this.isDoingClear){this.isDoingClear=!0,this.unschedule(this.clearBtnShake);var t=this.clearBtn.getPosition(),o=cc.Vec2.distance(t,e)/700;cc.tween(this.clearBtn).to(o,{x:e.x,y:e.y},{easing:"backIn"}).call(this.doClear,this).to(o,{x:t.x,y:t.y},{easing:"backOut"}).call(this.endClear,this).start()}},t.prototype.doClear=function(e){for(var t=e.getPosition(),o=0;o<this.ballNode.children.length;o++)cc.Vec2.squaredDistance(this.ballNode.children[o].getPosition(),t)<this.claerRangeSqr&&(this.ballTargetCount--,this.ballNode.children[o].destroy())},t.prototype.endClear=function(){this.isReadyToClear=!1,this.isDoingClear=!1,this.clearBtn.setPosition(this.clearBtnStartPos),u.Tool.activeAllChildren(this.clearBtn)},t.prototype.startPhyics=function(){cc.director.getCollisionManager().enabled=!0;var e=cc.director.getPhysicsManager();e.enabled=!0,console.log("\u7269\u7406\u5df2\u7ecf\u5f00\u542f"),e.enabledAccumulator=!0,e.FIXED_TIME_STEP=1/60,e.VELOCITY_ITERATIONS=10,e.POSITION_ITERATIONS=10},r([b],t)}(cc.Component));o.default=_,cc._RF.pop()},{"../../../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../../../Bundle1_Loading/Scripts/Mgr/AssetMgr":void 0,"../../../../../Bundle1_Loading/Scripts/Mgr/EventMgr":void 0,"../../../../../Bundle1_Loading/Scripts/Mgr/SoundMgr":void 0,"../../../../../Bundle1_Loading/Scripts/Mgr/StorageMgr":void 0,"../../../../../Bundle1_Loading/Scripts/Platform/Platform":void 0,"../../../../../Bundle1_Loading/Scripts/Tool/Tool":void 0,"../../../../../Bundle2_Res/Scripts/ResPanelOpen":void 0,"../../../../../Bundle2_Res/Scripts/ResPrefabBorn":void 0,"../Comps/GameComp/BallBtns":"BallBtns"}],StageNode:[function(e,t,o){"use strict";cc._RF.push(t,"1b197RU5TREZJBZ0/ZkVTO2","StageNode");var n,l=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var l,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(i=(r<3?l(i):r>3?l(t,o,i):l(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BallType=void 0;var i,a=e("./BallAsset"),s=e("./BallBtns"),c=cc._decorator,d=c.ccclass,p=c.property;(function(e){e[e.samll=0]="samll",e[e.middle=1]="middle",e[e.big=2]="big",e[e.large=3]="large"})(i=o.BallType||(o.BallType={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._value=!1,t.bgTexture=null,t.edgeTexture=null,t.ballTypes=[],t.ballNumbers=[],t.smallBallNumber=0,t.midBallNumber=0,t.bigBallNumber=0,t.largeBallNumber=0,t.bgName="",t.edgeName="",t.ballTypeNames=[],t}return l(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(e){this.bornStage(),this._value=e},enumerable:!1,configurable:!0}),t.prototype.bornStage=function(){if(this.ballTypes.length==this.ballNumbers.length)if(this.bgTexture)if(this.edgeTexture){this.ballTypes.length=0,this.ballNumbers.length=0,0!=this.largeBallNumber&&(this.ballTypes.push(i.large),this.ballNumbers.push(this.largeBallNumber)),0!=this.bigBallNumber&&(this.ballTypes.push(i.big),this.ballNumbers.push(this.bigBallNumber)),0!=this.midBallNumber&&(this.ballTypes.push(i.middle),this.ballNumbers.push(this.midBallNumber)),0!=this.smallBallNumber&&(this.ballTypes.push(i.samll),this.ballNumbers.push(this.smallBallNumber));var e=this.node.parent.getComponent(a.default).ballTexture;this.bg=this.node.getChildByName("bg"),this.edge=this.node.getChildByName("edge"),this.bg.getComponent(cc.Sprite).spriteFrame=this.bgTexture,this.edge.getComponent(cc.Sprite).spriteFrame=this.edgeTexture,this.bgName=this.bgTexture.name,this.edgeName=this.edgeTexture.name,this.ballTypeNames.length=0;for(var t=[],o=0;o<this.ballTypes.length;o++){var n=2*this.ballTypes[o];this.ballTypeNames.push(e[n].name),t.push(e[n])}this.node.getChildByName("uiNode").getComponent(s.default).updateBtn(t,this.ballNumbers),console.log("\u751f\u6210\u5173\u5361")}else cc.error("\u8fb9\u6846\u56fe\u7247\u672a\u8bbe\u7f6e");else cc.error("\u80cc\u666f\u56fe\u7247\u672a\u8bbe\u7f6e");else cc.error("\u7403\u7c7b\u578b\u548c\u7403\u6570\u91cf\u4e0d\u5339\u914d")},r([p({type:cc.Boolean,visible:!0,displayName:"\u70b9\u51fb\u751f\u6210\u5173\u5361"})],t.prototype,"value",null),r([p({type:cc.SpriteFrame,displayName:"\u80cc\u666f\u56fe\u7247"})],t.prototype,"bgTexture",void 0),r([p({type:cc.SpriteFrame,displayName:"\u8fb9\u6846\u56fe\u7247"})],t.prototype,"edgeTexture",void 0),r([p({type:cc.Enum(i),displayName:"\u7403\u7c7b\u578b",visible:!1})],t.prototype,"ballTypes",void 0),r([p({type:[cc.Integer],displayName:"\u7403\u6570\u91cf",visible:!1})],t.prototype,"ballNumbers",void 0),r([p({type:cc.Integer,displayName:"\u5c0f\u7403\u6570\u91cf"})],t.prototype,"smallBallNumber",void 0),r([p({type:cc.Integer,displayName:"\u4e2d\u7403\u6570\u91cf"})],t.prototype,"midBallNumber",void 0),r([p({type:cc.Integer,displayName:"\u5927\u7403\u6570\u91cf"})],t.prototype,"bigBallNumber",void 0),r([p({type:cc.Integer,displayName:"\u5de8\u7403\u6570\u91cf"})],t.prototype,"largeBallNumber",void 0),r([p({displayName:"\u80cc\u666f\u56fe\u7247\u540d\u5b57"})],t.prototype,"bgName",void 0),r([p({displayName:"\u8fb9\u6846\u56fe\u7247\u540d\u5b57"})],t.prototype,"edgeName",void 0),r([p({displayName:"\u7403\u7c7b\u578b\u540d\u5b57"})],t.prototype,"ballTypeNames",void 0),r([d],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./BallAsset":"BallAsset","./BallBtns":"BallBtns"}],SuccessCollider:[function(e,t,o){"use strict";cc._RF.push(t,"5ea18/tev5FJY95osdc0a0Q","SuccessCollider");var n,l=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),r=this&&this.__decorate||function(e,t,o,n){var l,r=arguments.length,i=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(l=e[a])&&(i=(r<3?l(i):r>3?l(t,o,i):l(t,o))||i);return r>3&&i&&Object.defineProperty(t,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../../../../Bundle1_Loading/Scripts/Config/EnumTypes"),a=e("../../../../../../Bundle1_Loading/Scripts/Mgr/EventMgr"),s=cc._decorator,c=s.ccclass,d=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.onBeginContact=function(e,t,o){a.EventMgr.event(i.EventType.Game_Ball_InBottle,o.node.getSiblingIndex())},r([c],t)}(cc.Component));o.default=d,cc._RF.pop()},{"../../../../../../Bundle1_Loading/Scripts/Config/EnumTypes":void 0,"../../../../../../Bundle1_Loading/Scripts/Mgr/EventMgr":void 0}]},{},["BallAsset","BallBtns","FailCollider","StageNode","SuccessCollider","BottlePuzzle_TipsNode","Bottle_GameUI","GameMgr"]);